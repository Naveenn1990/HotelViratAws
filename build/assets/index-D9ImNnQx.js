(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dy={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA;function lF(){if(xA)return Iu;xA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var d in i)d!=="key"&&(s[d]=i[d])}else s=i;return i=s.ref,{$$typeof:e,type:a,key:l,ref:i!==void 0?i:null,props:s}}return Iu.Fragment=t,Iu.jsx=r,Iu.jsxs=r,Iu}var yA;function cF(){return yA||(yA=1,dy.exports=lF()),dy.exports}var n=cF(),uy={exports:{}},ar={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA;function dF(){if(vA)return ar;vA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function y(q,Y,z){this.props=q,this.context=Y,this.refs=b,this.updater=z||v}y.prototype.isReactComponent={},y.prototype.setState=function(q,Y){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Y,"setState")},y.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function C(){}C.prototype=y.prototype;function E(q,Y,z){this.props=q,this.context=Y,this.refs=b,this.updater=z||v}var O=E.prototype=new C;O.constructor=E,j(O,y.prototype),O.isPureReactComponent=!0;var S=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function D(q,Y,z,ee,H,re){return z=re.ref,{$$typeof:e,type:q,key:Y,ref:z!==void 0?z:null,props:re}}function F(q,Y){return D(q.type,Y,void 0,void 0,void 0,q.props)}function B(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function M(q){var Y={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(z){return Y[z]})}var L=/\/+/g;function A(q,Y){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):Y.toString(36)}function U(){}function P(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(Y){q.status==="pending"&&(q.status="fulfilled",q.value=Y)},function(Y){q.status==="pending"&&(q.status="rejected",q.reason=Y)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function I(q,Y,z,ee,H){var re=typeof q;(re==="undefined"||re==="boolean")&&(q=null);var le=!1;if(q===null)le=!0;else switch(re){case"bigint":case"string":case"number":le=!0;break;case"object":switch(q.$$typeof){case e:case t:le=!0;break;case p:return le=q._init,I(le(q._payload),Y,z,ee,H)}}if(le)return H=H(q),le=ee===""?"."+A(q,0):ee,S(H)?(z="",le!=null&&(z=le.replace(L,"$&/")+"/"),I(H,Y,z,"",function(K){return K})):H!=null&&(B(H)&&(H=F(H,z+(H.key==null||q&&q.key===H.key?"":(""+H.key).replace(L,"$&/")+"/")+le)),Y.push(H)),1;le=0;var pe=ee===""?".":ee+":";if(S(q))for(var Se=0;Se<q.length;Se++)ee=q[Se],re=pe+A(ee,Se),le+=I(ee,Y,z,re,H);else if(Se=x(q),typeof Se=="function")for(q=Se.call(q),Se=0;!(ee=q.next()).done;)ee=ee.value,re=pe+A(ee,Se++),le+=I(ee,Y,z,re,H);else if(re==="object"){if(typeof q.then=="function")return I(P(q),Y,z,ee,H);throw Y=String(q),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return le}function R(q,Y,z){if(q==null)return q;var ee=[],H=0;return I(q,ee,"","",function(re){return Y.call(z,re,H++)}),ee}function W(q){if(q._status===-1){var Y=q._result;Y=Y(),Y.then(function(z){(q._status===0||q._status===-1)&&(q._status=1,q._result=z)},function(z){(q._status===0||q._status===-1)&&(q._status=2,q._result=z)}),q._status===-1&&(q._status=0,q._result=Y)}if(q._status===1)return q._result.default;throw q._result}var Q=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function ge(){}return ar.Children={map:R,forEach:function(q,Y,z){R(q,function(){Y.apply(this,arguments)},z)},count:function(q){var Y=0;return R(q,function(){Y++}),Y},toArray:function(q){return R(q,function(Y){return Y})||[]},only:function(q){if(!B(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ar.Component=y,ar.Fragment=r,ar.Profiler=i,ar.PureComponent=E,ar.StrictMode=a,ar.Suspense=u,ar.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ar.__COMPILER_RUNTIME={__proto__:null,c:function(q){return T.H.useMemoCache(q)}},ar.cache=function(q){return function(){return q.apply(null,arguments)}},ar.cloneElement=function(q,Y,z){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ee=j({},q.props),H=q.key,re=void 0;if(Y!=null)for(le in Y.ref!==void 0&&(re=void 0),Y.key!==void 0&&(H=""+Y.key),Y)!k.call(Y,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&Y.ref===void 0||(ee[le]=Y[le]);var le=arguments.length-2;if(le===1)ee.children=z;else if(1<le){for(var pe=Array(le),Se=0;Se<le;Se++)pe[Se]=arguments[Se+2];ee.children=pe}return D(q.type,H,void 0,void 0,re,ee)},ar.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},ar.createElement=function(q,Y,z){var ee,H={},re=null;if(Y!=null)for(ee in Y.key!==void 0&&(re=""+Y.key),Y)k.call(Y,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(H[ee]=Y[ee]);var le=arguments.length-2;if(le===1)H.children=z;else if(1<le){for(var pe=Array(le),Se=0;Se<le;Se++)pe[Se]=arguments[Se+2];H.children=pe}if(q&&q.defaultProps)for(ee in le=q.defaultProps,le)H[ee]===void 0&&(H[ee]=le[ee]);return D(q,re,void 0,void 0,null,H)},ar.createRef=function(){return{current:null}},ar.forwardRef=function(q){return{$$typeof:d,render:q}},ar.isValidElement=B,ar.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:W}},ar.memo=function(q,Y){return{$$typeof:f,type:q,compare:Y===void 0?null:Y}},ar.startTransition=function(q){var Y=T.T,z={};T.T=z;try{var ee=q(),H=T.S;H!==null&&H(z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(ge,Q)}catch(re){Q(re)}finally{T.T=Y}},ar.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ar.use=function(q){return T.H.use(q)},ar.useActionState=function(q,Y,z){return T.H.useActionState(q,Y,z)},ar.useCallback=function(q,Y){return T.H.useCallback(q,Y)},ar.useContext=function(q){return T.H.useContext(q)},ar.useDebugValue=function(){},ar.useDeferredValue=function(q,Y){return T.H.useDeferredValue(q,Y)},ar.useEffect=function(q,Y,z){var ee=T.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(q,Y)},ar.useId=function(){return T.H.useId()},ar.useImperativeHandle=function(q,Y,z){return T.H.useImperativeHandle(q,Y,z)},ar.useInsertionEffect=function(q,Y){return T.H.useInsertionEffect(q,Y)},ar.useLayoutEffect=function(q,Y){return T.H.useLayoutEffect(q,Y)},ar.useMemo=function(q,Y){return T.H.useMemo(q,Y)},ar.useOptimistic=function(q,Y){return T.H.useOptimistic(q,Y)},ar.useReducer=function(q,Y,z){return T.H.useReducer(q,Y,z)},ar.useRef=function(q){return T.H.useRef(q)},ar.useState=function(q){return T.H.useState(q)},ar.useSyncExternalStore=function(q,Y,z){return T.H.useSyncExternalStore(q,Y,z)},ar.useTransition=function(){return T.H.useTransition()},ar.version="19.1.0",ar}var bA;function fw(){return bA||(bA=1,uy.exports=dF()),uy.exports}var N=fw();const Ie=Gr(N);var fy={exports:{}},Du={},hy={exports:{}},py={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jA;function uF(){return jA||(jA=1,function(e){function t(R,W){var Q=R.length;R.push(W);e:for(;0<Q;){var ge=Q-1>>>1,q=R[ge];if(0<i(q,W))R[ge]=W,R[Q]=q,Q=ge;else break e}}function r(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var W=R[0],Q=R.pop();if(Q!==W){R[0]=Q;e:for(var ge=0,q=R.length,Y=q>>>1;ge<Y;){var z=2*(ge+1)-1,ee=R[z],H=z+1,re=R[H];if(0>i(ee,Q))H<q&&0>i(re,ee)?(R[ge]=re,R[H]=Q,ge=H):(R[ge]=ee,R[z]=Q,ge=z);else if(H<q&&0>i(re,Q))R[ge]=re,R[H]=Q,ge=H;else break e}}return W}function i(R,W){var Q=R.sortIndex-W.sortIndex;return Q!==0?Q:R.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],f=[],p=1,m=null,x=3,v=!1,j=!1,b=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function S(R){for(var W=r(f);W!==null;){if(W.callback===null)a(f);else if(W.startTime<=R)a(f),W.sortIndex=W.expirationTime,t(u,W);else break;W=r(f)}}function T(R){if(b=!1,S(R),!j)if(r(u)!==null)j=!0,k||(k=!0,A());else{var W=r(f);W!==null&&I(T,W.startTime-R)}}var k=!1,D=-1,F=5,B=-1;function M(){return y?!0:!(e.unstable_now()-B<F)}function L(){if(y=!1,k){var R=e.unstable_now();B=R;var W=!0;try{e:{j=!1,b&&(b=!1,E(D),D=-1),v=!0;var Q=x;try{t:{for(S(R),m=r(u);m!==null&&!(m.expirationTime>R&&M());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,x=m.priorityLevel;var q=ge(m.expirationTime<=R);if(R=e.unstable_now(),typeof q=="function"){m.callback=q,S(R),W=!0;break t}m===r(u)&&a(u),S(R)}else a(u);m=r(u)}if(m!==null)W=!0;else{var Y=r(f);Y!==null&&I(T,Y.startTime-R),W=!1}}break e}finally{m=null,x=Q,v=!1}W=void 0}}finally{W?A():k=!1}}}var A;if(typeof O=="function")A=function(){O(L)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,P=U.port2;U.port1.onmessage=L,A=function(){P.postMessage(null)}}else A=function(){C(L,0)};function I(R,W){D=C(function(){R(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(R){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var Q=x;x=W;try{return R()}finally{x=Q}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Q=x;x=R;try{return W()}finally{x=Q}},e.unstable_scheduleCallback=function(R,W,Q){var ge=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ge+Q:ge):Q=ge,R){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Q+q,R={id:p++,callback:W,priorityLevel:R,startTime:Q,expirationTime:q,sortIndex:-1},Q>ge?(R.sortIndex=Q,t(f,R),r(u)===null&&R===r(f)&&(b?(E(D),D=-1):b=!0,I(T,Q-ge))):(R.sortIndex=q,t(u,R),j||v||(j=!0,k||(k=!0,A()))),R},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(R){var W=x;return function(){var Q=x;x=W;try{return R.apply(this,arguments)}finally{x=Q}}}}(py)),py}var wA;function fF(){return wA||(wA=1,hy.exports=uF()),hy.exports}var my={exports:{}},sa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function hF(){if(SA)return sa;SA=1;var e=fw();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:u,containerInfo:f,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return sa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,sa.createPortal=function(u,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(u,f,null,p)},sa.flushSync=function(u){var f=l.T,p=a.p;try{if(l.T=null,a.p=2,u)return u()}finally{l.T=f,a.p=p,a.d.f()}},sa.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(u,f))},sa.prefetchDNS=function(u){typeof u=="string"&&a.d.D(u)},sa.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var p=f.as,m=d(p,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?a.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:v}):p==="script"&&a.d.X(u,{crossOrigin:m,integrity:x,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},sa.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=d(f.as,f.crossOrigin);a.d.M(u,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(u)},sa.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=d(p,f.crossOrigin);a.d.L(u,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},sa.preloadModule=function(u,f){if(typeof u=="string")if(f){var p=d(f.as,f.crossOrigin);a.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(u)},sa.requestFormReset=function(u){a.d.r(u)},sa.unstable_batchedUpdates=function(u,f){return u(f)},sa.useFormState=function(u,f,p){return l.H.useFormState(u,f,p)},sa.useFormStatus=function(){return l.H.useHostTransitionStatus()},sa.version="19.1.0",sa}var NA;function pF(){if(NA)return my.exports;NA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),my.exports=hF(),my.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA;function mF(){if(TA)return Du;TA=1;var e=fF(),t=fw(),r=pF();function a(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(s(o)!==o)throw Error(a(188))}function u(o){var c=o.alternate;if(!c){if(c=s(o),c===null)throw Error(a(188));return c!==o?null:o}for(var h=o,g=c;;){var w=h.return;if(w===null)break;var _=w.alternate;if(_===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===h)return d(w),o;if(_===g)return d(w),c;_=_.sibling}throw Error(a(188))}if(h.return!==g.return)h=w,g=_;else{for(var V=!1,oe=w.child;oe;){if(oe===h){V=!0,h=w,g=_;break}if(oe===g){V=!0,g=w,h=_;break}oe=oe.sibling}if(!V){for(oe=_.child;oe;){if(oe===h){V=!0,h=_,g=w;break}if(oe===g){V=!0,g=_,h=w;break}oe=oe.sibling}if(!V)throw Error(a(189))}}if(h.alternate!==g)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),O=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function A(o){return o===null||typeof o!="object"?null:(o=L&&o[L]||o["@@iterator"],typeof o=="function"?o:null)}var U=Symbol.for("react.client.reference");function P(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===U?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case y:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case B:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case O:return(o.displayName||"Context")+".Provider";case E:return(o._context.displayName||"Context")+".Consumer";case S:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return c=o.displayName||null,c!==null?c:P(o.type)||"Memo";case F:c=o._payload,o=o._init;try{return P(o(c))}catch{}}return null}var I=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ge=[],q=-1;function Y(o){return{current:o}}function z(o){0>q||(o.current=ge[q],ge[q]=null,q--)}function ee(o,c){q++,ge[q]=o.current,o.current=c}var H=Y(null),re=Y(null),le=Y(null),pe=Y(null);function Se(o,c){switch(ee(le,c),ee(re,o),ee(H,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?HC(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=HC(c),o=GC(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}z(H),ee(H,o)}function K(){z(H),z(re),z(le)}function ue(o){o.memoizedState!==null&&ee(pe,o);var c=H.current,h=GC(c,o.type);c!==h&&(ee(re,o),ee(H,h))}function ye(o){re.current===o&&(z(H),z(re)),pe.current===o&&(z(pe),Au._currentValue=Q)}var fe=Object.prototype.hasOwnProperty,Xe=e.unstable_scheduleCallback,Ce=e.unstable_cancelCallback,Le=e.unstable_shouldYield,ne=e.unstable_requestPaint,Ae=e.unstable_now,Ve=e.unstable_getCurrentPriorityLevel,te=e.unstable_ImmediatePriority,ce=e.unstable_UserBlockingPriority,X=e.unstable_NormalPriority,se=e.unstable_LowPriority,J=e.unstable_IdlePriority,Ne=e.log,Ge=e.unstable_setDisableYieldValue,tt=null,$e=null;function Ze(o){if(typeof Ne=="function"&&Ge(o),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(tt,o)}catch{}}var Oe=Math.clz32?Math.clz32:Pt,Qe=Math.log,ht=Math.LN2;function Pt(o){return o>>>=0,o===0?32:31-(Qe(o)/ht|0)|0}var Rt=256,Et=4194304;function ie(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function De(o,c,h){var g=o.pendingLanes;if(g===0)return 0;var w=0,_=o.suspendedLanes,V=o.pingedLanes;o=o.warmLanes;var oe=g&134217727;return oe!==0?(g=oe&~_,g!==0?w=ie(g):(V&=oe,V!==0?w=ie(V):h||(h=oe&~o,h!==0&&(w=ie(h))))):(oe=g&~_,oe!==0?w=ie(oe):V!==0?w=ie(V):h||(h=g&~o,h!==0&&(w=ie(h)))),w===0?0:c!==0&&c!==w&&(c&_)===0&&(_=w&-w,h=c&-c,_>=h||_===32&&(h&4194048)!==0)?c:w}function Ye(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Ft(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function me(){var o=Rt;return Rt<<=1,(Rt&4194048)===0&&(Rt=256),o}function ke(){var o=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),o}function Pe(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function it(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function pt(o,c,h,g,w,_){var V=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var oe=o.entanglements,Te=o.expirationTimes,Ue=o.hiddenUpdates;for(h=V&~h;0<h;){var st=31-Oe(h),dt=1<<st;oe[st]=0,Te[st]=-1;var He=Ue[st];if(He!==null)for(Ue[st]=null,st=0;st<He.length;st++){var Ke=He[st];Ke!==null&&(Ke.lane&=-536870913)}h&=~dt}g!==0&&Nt(o,g,0),_!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=_&~(V&~c))}function Nt(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var g=31-Oe(c);o.entangledLanes|=c,o.entanglements[g]=o.entanglements[g]|1073741824|h&4194090}function _t(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-Oe(h),w=1<<g;w&c|o[g]&c&&(o[g]|=c),h&=~w}}function ot(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function jt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function mt(){var o=W.p;return o!==0?o:(o=window.event,o===void 0?32:uA(o.type))}function gt(o,c){var h=W.p;try{return W.p=o,c()}finally{W.p=h}}var $t=Math.random().toString(36).slice(2),Jt="__reactFiber$"+$t,Gt="__reactProps$"+$t,Fr="__reactContainer$"+$t,ir="__reactEvents$"+$t,Zr="__reactListeners$"+$t,ae="__reactHandles$"+$t,xe="__reactResources$"+$t,de="__reactMarker$"+$t;function he(o){delete o[Jt],delete o[Gt],delete o[ir],delete o[Zr],delete o[ae]}function je(o){var c=o[Jt];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Fr]||h[Jt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=XC(o);o!==null;){if(h=o[Jt])return h;o=XC(o)}return c}o=h,h=o.parentNode}return null}function we(o){if(o=o[Jt]||o[Fr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function ze(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(a(33))}function et(o){var c=o[xe];return c||(c=o[xe]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Me(o){o[de]=!0}var We=new Set,qe={};function ft(o,c){yt(o,c),yt(o+"Capture",c)}function yt(o,c){for(qe[o]=c,o=0;o<c.length;o++)We.add(c[o])}var At=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xt={},Tt={};function Vt(o){return fe.call(Tt,o)?!0:fe.call(xt,o)?!1:At.test(o)?Tt[o]=!0:(xt[o]=!0,!1)}function Cr(o,c,h){if(Vt(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function Ar(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function Lr(o,c,h,g){if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+g)}}var ki,Zi;function Ea(o){if(ki===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);ki=c&&c[1]||"",Zi=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ki+o+Zi}var ma=!1;function vs(o,c){if(!o||ma)return"";ma=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Ke){var He=Ke}Reflect.construct(o,[],dt)}else{try{dt.call()}catch(Ke){He=Ke}o.call(dt.prototype)}}else{try{throw Error()}catch(Ke){He=Ke}(dt=o())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Ke){if(Ke&&He&&typeof Ke.stack=="string")return[Ke.stack,He.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),V=_[0],oe=_[1];if(V&&oe){var Te=V.split(`
`),Ue=oe.split(`
`);for(w=g=0;g<Te.length&&!Te[g].includes("DetermineComponentFrameRoot");)g++;for(;w<Ue.length&&!Ue[w].includes("DetermineComponentFrameRoot");)w++;if(g===Te.length||w===Ue.length)for(g=Te.length-1,w=Ue.length-1;1<=g&&0<=w&&Te[g]!==Ue[w];)w--;for(;1<=g&&0<=w;g--,w--)if(Te[g]!==Ue[w]){if(g!==1||w!==1)do if(g--,w--,0>w||Te[g]!==Ue[w]){var st=`
`+Te[g].replace(" at new "," at ");return o.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",o.displayName)),st}while(1<=g&&0<=w);break}}}finally{ma=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Ea(h):""}function ga(o){switch(o.tag){case 26:case 27:case 5:return Ea(o.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 15:return vs(o.type,!1);case 11:return vs(o.type.render,!1);case 1:return vs(o.type,!0);case 31:return Ea("Activity");default:return""}}function Ud(o){try{var c="";do c+=ga(o),o=o.return;while(o);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Oa(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function qd(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Th(o){var c=qd(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,_=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(V){g=""+V,_.call(this,V)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(V){g=""+V},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Z(o){o._valueTracker||(o._valueTracker=Th(o))}function ve(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=qd(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function be(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ee=/[\n"\\]/g;function Be(o){return o.replace(Ee,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function lt(o,c,h,g,w,_,V,oe){o.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.type=V:o.removeAttribute("type"),c!=null?V==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Oa(c)):o.value!==""+Oa(c)&&(o.value=""+Oa(c)):V!=="submit"&&V!=="reset"||o.removeAttribute("value"),c!=null?It(o,V,Oa(c)):h!=null?It(o,V,Oa(h)):g!=null&&o.removeAttribute("value"),w==null&&_!=null&&(o.defaultChecked=!!_),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?o.name=""+Oa(oe):o.removeAttribute("name")}function nt(o,c,h,g,w,_,V,oe){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),c!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||c!=null))return;h=h!=null?""+Oa(h):"",c=c!=null?""+Oa(c):h,oe||c===o.value||(o.value=c),o.defaultValue=c}g=g??w,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=oe?o.checked:!!g,o.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(o.name=V)}function It(o,c,h){c==="number"&&be(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Mt(o,c,h,g){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Oa(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function Yr(o,c,h){if(c!=null&&(c=""+Oa(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+Oa(h):""}function er(o,c,h,g){if(c==null){if(g!=null){if(h!=null)throw Error(a(92));if(I(g)){if(1<g.length)throw Error(a(93));g=g[0]}h=g}h==null&&(h=""),c=h}h=Oa(c),o.defaultValue=h,g=o.textContent,g===h&&g!==""&&g!==null&&(o.value=g)}function Ct(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var tr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function On(o,c,h){var g=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":g?o.setProperty(c,h):typeof h!="number"||h===0||tr.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function qa(o,c,h){if(c!=null&&typeof c!="object")throw Error(a(62));if(o=o.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var w in c)g=c[w],c.hasOwnProperty(w)&&h[w]!==g&&On(o,w,g)}else for(var _ in c)c.hasOwnProperty(_)&&On(o,_,c[_])}function Wa(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),g0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ql(o){return g0.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var bs=null;function js(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ws=null,G=null;function Ot(o){var c=we(o);if(c&&(o=c.stateNode)){var h=o[Gt]||null;e:switch(o=c.stateNode,c.type){case"input":if(lt(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Be(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var w=g[Gt]||null;if(!w)throw Error(a(90));lt(g,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<h.length;c++)g=h[c],g.form===o.form&&ve(g)}break e;case"textarea":Yr(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Mt(o,!!h.multiple,c,!1)}}}var wt=!1;function rr(o,c,h){if(wt)return o(c,h);wt=!0;try{var g=o(c);return g}finally{if(wt=!1,(ws!==null||G!==null)&&(sp(),ws&&(c=ws,o=G,G=ws=null,Ot(c),o)))for(c=0;c<o.length;c++)Ot(o[c])}}function Er(o,c){var h=o.stateNode;if(h===null)return null;var g=h[Gt]||null;if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(a(231,c,typeof h));return h}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mn=!1;if(kr)try{var mn={};Object.defineProperty(mn,"passive",{get:function(){Mn=!0}}),window.addEventListener("test",mn,mn),window.removeEventListener("test",mn,mn)}catch{Mn=!1}var rn=null,xa=null,Ha=null;function _a(){if(Ha)return Ha;var o,c=xa,h=c.length,g,w="value"in rn?rn.value:rn.textContent,_=w.length;for(o=0;o<h&&c[o]===w[o];o++);var V=h-o;for(g=1;g<=V&&c[h-g]===w[_-g];g++);return Ha=w.slice(o,1<g?1-g:void 0)}function es(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function hr(){return!0}function Xt(){return!1}function zr(o){function c(h,g,w,_,V){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=_,this.target=V,this.currentTarget=null;for(var oe in o)o.hasOwnProperty(oe)&&(h=o[oe],this[oe]=h?h(_):_[oe]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?hr:Xt,this.isPropagationStopped=Xt,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),c}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=zr(vn),mr=p({},vn,{view:0,detail:0}),Xr=zr(mr),ln,aa,bn,Ch=p({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y0,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==bn&&(bn&&o.type==="mousemove"?(ln=o.screenX-bn.screenX,aa=o.screenY-bn.screenY):aa=ln=0,bn=o),ln)},movementY:function(o){return"movementY"in o?o.movementY:aa}}),QS=zr(Ch),cM=p({},Ch,{dataTransfer:0}),dM=zr(cM),uM=p({},mr,{relatedTarget:0}),x0=zr(uM),fM=p({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),hM=zr(fM),pM=p({},vn,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),mM=zr(pM),gM=p({},vn,{data:0}),JS=zr(gM),xM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bM(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=vM[o])?!!c[o]:!1}function y0(){return bM}var jM=p({},mr,{key:function(o){if(o.key){var c=xM[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=es(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?yM[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y0,charCode:function(o){return o.type==="keypress"?es(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?es(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),wM=zr(jM),SM=p({},Ch,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZS=zr(SM),NM=p({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y0}),TM=zr(NM),CM=p({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),AM=zr(CM),EM=p({},Ch,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),OM=zr(EM),_M=p({},vn,{newState:0,oldState:0}),kM=zr(_M),IM=[9,13,27,32],v0=kr&&"CompositionEvent"in window,Wd=null;kr&&"documentMode"in document&&(Wd=document.documentMode);var DM=kr&&"TextEvent"in window&&!Wd,eN=kr&&(!v0||Wd&&8<Wd&&11>=Wd),tN=" ",rN=!1;function nN(o,c){switch(o){case"keyup":return IM.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aN(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Jl=!1;function RM(o,c){switch(o){case"compositionend":return aN(c);case"keypress":return c.which!==32?null:(rN=!0,tN);case"textInput":return o=c.data,o===tN&&rN?null:o;default:return null}}function PM(o,c){if(Jl)return o==="compositionend"||!v0&&nN(o,c)?(o=_a(),Ha=xa=rn=null,Jl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return eN&&c.locale!=="ko"?null:c.data;default:return null}}var MM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iN(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!MM[o.type]:c==="textarea"}function sN(o,c,h,g){ws?G?G.push(g):G=[g]:ws=g,c=fp(c,"onChange"),0<c.length&&(h=new ya("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Hd=null,Gd=null;function BM(o){zC(o,0)}function Ah(o){var c=ze(o);if(ve(c))return o}function oN(o,c){if(o==="change")return c}var lN=!1;if(kr){var b0;if(kr){var j0="oninput"in document;if(!j0){var cN=document.createElement("div");cN.setAttribute("oninput","return;"),j0=typeof cN.oninput=="function"}b0=j0}else b0=!1;lN=b0&&(!document.documentMode||9<document.documentMode)}function dN(){Hd&&(Hd.detachEvent("onpropertychange",uN),Gd=Hd=null)}function uN(o){if(o.propertyName==="value"&&Ah(Gd)){var c=[];sN(c,Gd,o,js(o)),rr(BM,c)}}function FM(o,c,h){o==="focusin"?(dN(),Hd=c,Gd=h,Hd.attachEvent("onpropertychange",uN)):o==="focusout"&&dN()}function LM(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ah(Gd)}function zM(o,c){if(o==="click")return Ah(c)}function $M(o,c){if(o==="input"||o==="change")return Ah(c)}function UM(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Ga=typeof Object.is=="function"?Object.is:UM;function Kd(o,c){if(Ga(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!fe.call(c,w)||!Ga(o[w],c[w]))return!1}return!0}function fN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function hN(o,c){var h=fN(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=fN(h)}}function pN(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?pN(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function mN(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=be(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=be(o.document)}return c}function w0(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var qM=kr&&"documentMode"in document&&11>=document.documentMode,Zl=null,S0=null,Vd=null,N0=!1;function gN(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;N0||Zl==null||Zl!==be(g)||(g=Zl,"selectionStart"in g&&w0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Vd&&Kd(Vd,g)||(Vd=g,g=fp(S0,"onSelect"),0<g.length&&(c=new ya("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Zl)))}function Jo(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var ec={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionrun:Jo("Transition","TransitionRun"),transitionstart:Jo("Transition","TransitionStart"),transitioncancel:Jo("Transition","TransitionCancel"),transitionend:Jo("Transition","TransitionEnd")},T0={},xN={};kr&&(xN=document.createElement("div").style,"AnimationEvent"in window||(delete ec.animationend.animation,delete ec.animationiteration.animation,delete ec.animationstart.animation),"TransitionEvent"in window||delete ec.transitionend.transition);function Zo(o){if(T0[o])return T0[o];if(!ec[o])return o;var c=ec[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in xN)return T0[o]=c[h];return o}var yN=Zo("animationend"),vN=Zo("animationiteration"),bN=Zo("animationstart"),WM=Zo("transitionrun"),HM=Zo("transitionstart"),GM=Zo("transitioncancel"),jN=Zo("transitionend"),wN=new Map,C0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");C0.push("scrollEnd");function Ii(o,c){wN.set(o,c),ft(c,[o])}var SN=new WeakMap;function ci(o,c){if(typeof o=="object"&&o!==null){var h=SN.get(o);return h!==void 0?h:(c={value:o,source:c,stack:Ud(c)},SN.set(o,c),c)}return{value:o,source:c,stack:Ud(c)}}var di=[],tc=0,A0=0;function Eh(){for(var o=tc,c=A0=tc=0;c<o;){var h=di[c];di[c++]=null;var g=di[c];di[c++]=null;var w=di[c];di[c++]=null;var _=di[c];if(di[c++]=null,g!==null&&w!==null){var V=g.pending;V===null?w.next=w:(w.next=V.next,V.next=w),g.pending=w}_!==0&&NN(h,w,_)}}function Oh(o,c,h,g){di[tc++]=o,di[tc++]=c,di[tc++]=h,di[tc++]=g,A0|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function E0(o,c,h,g){return Oh(o,c,h,g),_h(o)}function rc(o,c){return Oh(o,null,null,c),_h(o)}function NN(o,c,h){o.lanes|=h;var g=o.alternate;g!==null&&(g.lanes|=h);for(var w=!1,_=o.return;_!==null;)_.childLanes|=h,g=_.alternate,g!==null&&(g.childLanes|=h),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(w=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,w&&c!==null&&(w=31-Oe(h),o=_.hiddenUpdates,g=o[w],g===null?o[w]=[c]:g.push(c),c.lane=h|536870912),_):null}function _h(o){if(50<vu)throw vu=0,Rx=null,Error(a(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var nc={};function KM(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(o,c,h,g){return new KM(o,c,h,g)}function O0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ss(o,c){var h=o.alternate;return h===null?(h=Ka(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function TN(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function kh(o,c,h,g,w,_){var V=0;if(g=o,typeof o=="function")O0(o)&&(V=1);else if(typeof o=="string")V=YB(o,h,H.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case B:return o=Ka(31,h,c,w),o.elementType=B,o.lanes=_,o;case j:return el(h.children,w,_,c);case b:V=8,w|=24;break;case y:return o=Ka(12,h,c,w|2),o.elementType=y,o.lanes=_,o;case T:return o=Ka(13,h,c,w),o.elementType=T,o.lanes=_,o;case k:return o=Ka(19,h,c,w),o.elementType=k,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case O:V=10;break e;case E:V=9;break e;case S:V=11;break e;case D:V=14;break e;case F:V=16,g=null;break e}V=29,h=Error(a(130,o===null?"null":typeof o,"")),g=null}return c=Ka(V,h,c,w),c.elementType=o,c.type=g,c.lanes=_,c}function el(o,c,h,g){return o=Ka(7,o,g,c),o.lanes=h,o}function _0(o,c,h){return o=Ka(6,o,null,c),o.lanes=h,o}function k0(o,c,h){return c=Ka(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var ac=[],ic=0,Ih=null,Dh=0,ui=[],fi=0,tl=null,Ns=1,Ts="";function rl(o,c){ac[ic++]=Dh,ac[ic++]=Ih,Ih=o,Dh=c}function CN(o,c,h){ui[fi++]=Ns,ui[fi++]=Ts,ui[fi++]=tl,tl=o;var g=Ns;o=Ts;var w=32-Oe(g)-1;g&=~(1<<w),h+=1;var _=32-Oe(c)+w;if(30<_){var V=w-w%5;_=(g&(1<<V)-1).toString(32),g>>=V,w-=V,Ns=1<<32-Oe(c)+w|h<<w|g,Ts=_+o}else Ns=1<<_|h<<w|g,Ts=o}function I0(o){o.return!==null&&(rl(o,1),CN(o,1,0))}function D0(o){for(;o===Ih;)Ih=ac[--ic],ac[ic]=null,Dh=ac[--ic],ac[ic]=null;for(;o===tl;)tl=ui[--fi],ui[fi]=null,Ts=ui[--fi],ui[fi]=null,Ns=ui[--fi],ui[fi]=null}var va=null,dn=null,Nr=!1,nl=null,ts=!1,R0=Error(a(519));function al(o){var c=Error(a(418,""));throw Qd(ci(c,o)),R0}function AN(o){var c=o.stateNode,h=o.type,g=o.memoizedProps;switch(c[Jt]=o,c[Gt]=g,h){case"dialog":ur("cancel",c),ur("close",c);break;case"iframe":case"object":case"embed":ur("load",c);break;case"video":case"audio":for(h=0;h<ju.length;h++)ur(ju[h],c);break;case"source":ur("error",c);break;case"img":case"image":case"link":ur("error",c),ur("load",c);break;case"details":ur("toggle",c);break;case"input":ur("invalid",c),nt(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Z(c);break;case"select":ur("invalid",c);break;case"textarea":ur("invalid",c),er(c,g.value,g.defaultValue,g.children),Z(c)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||g.suppressHydrationWarning===!0||WC(c.textContent,h)?(g.popover!=null&&(ur("beforetoggle",c),ur("toggle",c)),g.onScroll!=null&&ur("scroll",c),g.onScrollEnd!=null&&ur("scrollend",c),g.onClick!=null&&(c.onclick=hp),c=!0):c=!1,c||al(o)}function EN(o){for(va=o.return;va;)switch(va.tag){case 5:case 13:ts=!1;return;case 27:case 3:ts=!0;return;default:va=va.return}}function Yd(o){if(o!==va)return!1;if(!Nr)return EN(o),Nr=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Xx(o.type,o.memoizedProps)),h=!h),h&&dn&&al(o),EN(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(h=o.data,h==="/$"){if(c===0){dn=Ri(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;o=o.nextSibling}dn=null}}else c===27?(c=dn,To(o.type)?(o=ey,ey=null,dn=o):dn=c):dn=va?Ri(o.stateNode.nextSibling):null;return!0}function Xd(){dn=va=null,Nr=!1}function ON(){var o=nl;return o!==null&&(Da===null?Da=o:Da.push.apply(Da,o),nl=null),o}function Qd(o){nl===null?nl=[o]:nl.push(o)}var P0=Y(null),il=null,Cs=null;function co(o,c,h){ee(P0,c._currentValue),c._currentValue=h}function As(o){o._currentValue=P0.current,z(P0)}function M0(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function B0(o,c,h,g){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var _=w.dependencies;if(_!==null){var V=w.child;_=_.firstContext;e:for(;_!==null;){var oe=_;_=w;for(var Te=0;Te<c.length;Te++)if(oe.context===c[Te]){_.lanes|=h,oe=_.alternate,oe!==null&&(oe.lanes|=h),M0(_.return,h,o),g||(V=null);break e}_=oe.next}}else if(w.tag===18){if(V=w.return,V===null)throw Error(a(341));V.lanes|=h,_=V.alternate,_!==null&&(_.lanes|=h),M0(V,h,o),V=null}else V=w.child;if(V!==null)V.return=w;else for(V=w;V!==null;){if(V===o){V=null;break}if(w=V.sibling,w!==null){w.return=V.return,V=w;break}V=V.return}w=V}}function Jd(o,c,h,g){o=null;for(var w=c,_=!1;w!==null;){if(!_){if((w.flags&524288)!==0)_=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var V=w.alternate;if(V===null)throw Error(a(387));if(V=V.memoizedProps,V!==null){var oe=w.type;Ga(w.pendingProps.value,V.value)||(o!==null?o.push(oe):o=[oe])}}else if(w===pe.current){if(V=w.alternate,V===null)throw Error(a(387));V.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(Au):o=[Au])}w=w.return}o!==null&&B0(c,o,h,g),c.flags|=262144}function Rh(o){for(o=o.firstContext;o!==null;){if(!Ga(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function sl(o){il=o,Cs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ia(o){return _N(il,o)}function Ph(o,c){return il===null&&sl(o),_N(o,c)}function _N(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Cs===null){if(o===null)throw Error(a(308));Cs=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Cs=Cs.next=c;return h}var VM=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,g){o.push(g)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},YM=e.unstable_scheduleCallback,XM=e.unstable_NormalPriority,_n={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function F0(){return{controller:new VM,data:new Map,refCount:0}}function Zd(o){o.refCount--,o.refCount===0&&YM(XM,function(){o.controller.abort()})}var eu=null,L0=0,sc=0,oc=null;function QM(o,c){if(eu===null){var h=eu=[];L0=0,sc=$x(),oc={status:"pending",value:void 0,then:function(g){h.push(g)}}}return L0++,c.then(kN,kN),c}function kN(){if(--L0===0&&eu!==null){oc!==null&&(oc.status="fulfilled");var o=eu;eu=null,sc=0,oc=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function JM(o,c){var h=[],g={status:"pending",value:null,reason:null,then:function(w){h.push(w)}};return o.then(function(){g.status="fulfilled",g.value=c;for(var w=0;w<h.length;w++)(0,h[w])(c)},function(w){for(g.status="rejected",g.reason=w,w=0;w<h.length;w++)(0,h[w])(void 0)}),g}var IN=R.S;R.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&QM(o,c),IN!==null&&IN(o,c)};var ol=Y(null);function z0(){var o=ol.current;return o!==null?o:Qr.pooledCache}function Mh(o,c){c===null?ee(ol,ol.current):ee(ol,c.pool)}function DN(){var o=z0();return o===null?null:{parent:_n._currentValue,pool:o}}var tu=Error(a(460)),RN=Error(a(474)),Bh=Error(a(542)),$0={then:function(){}};function PN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Fh(){}function MN(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(Fh,Fh),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,FN(o),o;default:if(typeof c.status=="string")c.then(Fh,Fh);else{if(o=Qr,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=c,o.status="pending",o.then(function(g){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=g}},function(g){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,FN(o),o}throw ru=c,tu}}var ru=null;function BN(){if(ru===null)throw Error(a(459));var o=ru;return ru=null,o}function FN(o){if(o===tu||o===Bh)throw Error(a(483))}var uo=!1;function U0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function q0(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function fo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ho(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Ir&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,c=_h(o),NN(o,null,h),c}return Oh(o,g,c,h),_h(o)}function nu(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,_t(o,h)}}function W0(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var V={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?w=_=V:_=_.next=V,h=h.next}while(h!==null);_===null?w=_=c:_=_.next=c}else w=_=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var H0=!1;function au(){if(H0){var o=oc;if(o!==null)throw o}}function iu(o,c,h,g){H0=!1;var w=o.updateQueue;uo=!1;var _=w.firstBaseUpdate,V=w.lastBaseUpdate,oe=w.shared.pending;if(oe!==null){w.shared.pending=null;var Te=oe,Ue=Te.next;Te.next=null,V===null?_=Ue:V.next=Ue,V=Te;var st=o.alternate;st!==null&&(st=st.updateQueue,oe=st.lastBaseUpdate,oe!==V&&(oe===null?st.firstBaseUpdate=Ue:oe.next=Ue,st.lastBaseUpdate=Te))}if(_!==null){var dt=w.baseState;V=0,st=Ue=Te=null,oe=_;do{var He=oe.lane&-536870913,Ke=He!==oe.lane;if(Ke?(xr&He)===He:(g&He)===He){He!==0&&He===sc&&(H0=!0),st!==null&&(st=st.next={lane:0,tag:oe.tag,payload:oe.payload,callback:null,next:null});e:{var Kt=o,qt=oe;He=c;var qr=h;switch(qt.tag){case 1:if(Kt=qt.payload,typeof Kt=="function"){dt=Kt.call(qr,dt,He);break e}dt=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=qt.payload,He=typeof Kt=="function"?Kt.call(qr,dt,He):Kt,He==null)break e;dt=p({},dt,He);break e;case 2:uo=!0}}He=oe.callback,He!==null&&(o.flags|=64,Ke&&(o.flags|=8192),Ke=w.callbacks,Ke===null?w.callbacks=[He]:Ke.push(He))}else Ke={lane:He,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},st===null?(Ue=st=Ke,Te=dt):st=st.next=Ke,V|=He;if(oe=oe.next,oe===null){if(oe=w.shared.pending,oe===null)break;Ke=oe,oe=Ke.next,Ke.next=null,w.lastBaseUpdate=Ke,w.shared.pending=null}}while(!0);st===null&&(Te=dt),w.baseState=Te,w.firstBaseUpdate=Ue,w.lastBaseUpdate=st,_===null&&(w.shared.lanes=0),jo|=V,o.lanes=V,o.memoizedState=dt}}function LN(o,c){if(typeof o!="function")throw Error(a(191,o));o.call(c)}function zN(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)LN(h[o],c)}var lc=Y(null),Lh=Y(0);function $N(o,c){o=Rs,ee(Lh,o),ee(lc,c),Rs=o|c.baseLanes}function G0(){ee(Lh,Rs),ee(lc,lc.current)}function K0(){Rs=Lh.current,z(lc),z(Lh)}var po=0,or=null,$r=null,jn=null,zh=!1,cc=!1,ll=!1,$h=0,su=0,dc=null,ZM=0;function gn(){throw Error(a(321))}function V0(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Ga(o[h],c[h]))return!1;return!0}function Y0(o,c,h,g,w,_){return po=_,or=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=o===null||o.memoizedState===null?NT:TT,ll=!1,_=h(g,w),ll=!1,cc&&(_=qN(c,h,g,w)),UN(o),_}function UN(o){R.H=Kh;var c=$r!==null&&$r.next!==null;if(po=0,jn=$r=or=null,zh=!1,su=0,dc=null,c)throw Error(a(300));o===null||Bn||(o=o.dependencies,o!==null&&Rh(o)&&(Bn=!0))}function qN(o,c,h,g){or=o;var w=0;do{if(cc&&(dc=null),su=0,cc=!1,25<=w)throw Error(a(301));if(w+=1,jn=$r=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}R.H=sB,_=c(h,g)}while(cc);return _}function eB(){var o=R.H,c=o.useState()[0];return c=typeof c.then=="function"?ou(c):c,o=o.useState()[0],($r!==null?$r.memoizedState:null)!==o&&(or.flags|=1024),c}function X0(){var o=$h!==0;return $h=0,o}function Q0(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function J0(o){if(zh){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}zh=!1}po=0,jn=$r=or=null,cc=!1,su=$h=0,dc=null}function ka(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?or.memoizedState=jn=o:jn=jn.next=o,jn}function wn(){if($r===null){var o=or.alternate;o=o!==null?o.memoizedState:null}else o=$r.next;var c=jn===null?or.memoizedState:jn.next;if(c!==null)jn=c,$r=o;else{if(o===null)throw or.alternate===null?Error(a(467)):Error(a(310));$r=o,o={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},jn===null?or.memoizedState=jn=o:jn=jn.next=o}return jn}function Z0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(o){var c=su;return su+=1,dc===null&&(dc=[]),o=MN(dc,o,c),c=or,(jn===null?c.memoizedState:jn.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?NT:TT),o}function Uh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ou(o);if(o.$$typeof===O)return ia(o)}throw Error(a(438,String(o)))}function ex(o){var c=null,h=or.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var g=or.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Z0(),or.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),g=0;g<o;g++)h[g]=M;return c.index++,h}function Es(o,c){return typeof c=="function"?c(o):c}function qh(o){var c=wn();return tx(c,$r,o)}function tx(o,c,h){var g=o.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=h;var w=o.baseQueue,_=g.pending;if(_!==null){if(w!==null){var V=w.next;w.next=_.next,_.next=V}c.baseQueue=w=_,g.pending=null}if(_=o.baseState,w===null)o.memoizedState=_;else{c=w.next;var oe=V=null,Te=null,Ue=c,st=!1;do{var dt=Ue.lane&-536870913;if(dt!==Ue.lane?(xr&dt)===dt:(po&dt)===dt){var He=Ue.revertLane;if(He===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),dt===sc&&(st=!0);else if((po&He)===He){Ue=Ue.next,He===sc&&(st=!0);continue}else dt={lane:0,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Te===null?(oe=Te=dt,V=_):Te=Te.next=dt,or.lanes|=He,jo|=He;dt=Ue.action,ll&&h(_,dt),_=Ue.hasEagerState?Ue.eagerState:h(_,dt)}else He={lane:dt,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Te===null?(oe=Te=He,V=_):Te=Te.next=He,or.lanes|=dt,jo|=dt;Ue=Ue.next}while(Ue!==null&&Ue!==c);if(Te===null?V=_:Te.next=oe,!Ga(_,o.memoizedState)&&(Bn=!0,st&&(h=oc,h!==null)))throw h;o.memoizedState=_,o.baseState=V,o.baseQueue=Te,g.lastRenderedState=_}return w===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function rx(o){var c=wn(),h=c.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=o;var g=h.dispatch,w=h.pending,_=c.memoizedState;if(w!==null){h.pending=null;var V=w=w.next;do _=o(_,V.action),V=V.next;while(V!==w);Ga(_,c.memoizedState)||(Bn=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,g]}function WN(o,c,h){var g=or,w=wn(),_=Nr;if(_){if(h===void 0)throw Error(a(407));h=h()}else h=c();var V=!Ga(($r||w).memoizedState,h);V&&(w.memoizedState=h,Bn=!0),w=w.queue;var oe=KN.bind(null,g,w,o);if(lu(2048,8,oe,[o]),w.getSnapshot!==c||V||jn!==null&&jn.memoizedState.tag&1){if(g.flags|=2048,uc(9,Wh(),GN.bind(null,g,w,h,c),null),Qr===null)throw Error(a(349));_||(po&124)!==0||HN(g,c,h)}return h}function HN(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=or.updateQueue,c===null?(c=Z0(),or.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function GN(o,c,h,g){c.value=h,c.getSnapshot=g,VN(c)&&YN(o)}function KN(o,c,h){return h(function(){VN(c)&&YN(o)})}function VN(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Ga(o,h)}catch{return!0}}function YN(o){var c=rc(o,2);c!==null&&Ja(c,o,2)}function nx(o){var c=ka();if(typeof o=="function"){var h=o;if(o=h(),ll){Ze(!0);try{h()}finally{Ze(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:o},c}function XN(o,c,h,g){return o.baseState=h,tx(o,$r,typeof g=="function"?g:Es)}function tB(o,c,h,g,w){if(Gh(o))throw Error(a(485));if(o=c.action,o!==null){var _={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){_.listeners.push(V)}};R.T!==null?h(!0):_.isTransition=!1,g(_),h=c.pending,h===null?(_.next=c.pending=_,QN(c,_)):(_.next=h.next,c.pending=h.next=_)}}function QN(o,c){var h=c.action,g=c.payload,w=o.state;if(c.isTransition){var _=R.T,V={};R.T=V;try{var oe=h(w,g),Te=R.S;Te!==null&&Te(V,oe),JN(o,c,oe)}catch(Ue){ax(o,c,Ue)}finally{R.T=_}}else try{_=h(w,g),JN(o,c,_)}catch(Ue){ax(o,c,Ue)}}function JN(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){ZN(o,c,g)},function(g){return ax(o,c,g)}):ZN(o,c,h)}function ZN(o,c,h){c.status="fulfilled",c.value=h,eT(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,QN(o,h)))}function ax(o,c,h){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=h,eT(c),c=c.next;while(c!==g)}o.action=null}function eT(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function tT(o,c){return c}function rT(o,c){if(Nr){var h=Qr.formState;if(h!==null){e:{var g=or;if(Nr){if(dn){t:{for(var w=dn,_=ts;w.nodeType!==8;){if(!_){w=null;break t}if(w=Ri(w.nextSibling),w===null){w=null;break t}}_=w.data,w=_==="F!"||_==="F"?w:null}if(w){dn=Ri(w.nextSibling),g=w.data==="F!";break e}}al(g)}g=!1}g&&(c=h[0])}}return h=ka(),h.memoizedState=h.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tT,lastRenderedState:c},h.queue=g,h=jT.bind(null,or,g),g.dispatch=h,g=nx(!1),_=cx.bind(null,or,!1,g.queue),g=ka(),w={state:c,dispatch:null,action:o,pending:null},g.queue=w,h=tB.bind(null,or,w,_,h),w.dispatch=h,g.memoizedState=o,[c,h,!1]}function nT(o){var c=wn();return aT(c,$r,o)}function aT(o,c,h){if(c=tx(o,c,tT)[0],o=qh(Es)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=ou(c)}catch(V){throw V===tu?Bh:V}else g=c;c=wn();var w=c.queue,_=w.dispatch;return h!==c.memoizedState&&(or.flags|=2048,uc(9,Wh(),rB.bind(null,w,h),null)),[g,_,o]}function rB(o,c){o.action=c}function iT(o){var c=wn(),h=$r;if(h!==null)return aT(c,h,o);wn(),c=c.memoizedState,h=wn();var g=h.queue.dispatch;return h.memoizedState=o,[c,g,!1]}function uc(o,c,h,g){return o={tag:o,create:h,deps:g,inst:c,next:null},c=or.updateQueue,c===null&&(c=Z0(),or.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o),o}function Wh(){return{destroy:void 0,resource:void 0}}function sT(){return wn().memoizedState}function Hh(o,c,h,g){var w=ka();g=g===void 0?null:g,or.flags|=o,w.memoizedState=uc(1|c,Wh(),h,g)}function lu(o,c,h,g){var w=wn();g=g===void 0?null:g;var _=w.memoizedState.inst;$r!==null&&g!==null&&V0(g,$r.memoizedState.deps)?w.memoizedState=uc(c,_,h,g):(or.flags|=o,w.memoizedState=uc(1|c,_,h,g))}function oT(o,c){Hh(8390656,8,o,c)}function lT(o,c){lu(2048,8,o,c)}function cT(o,c){return lu(4,2,o,c)}function dT(o,c){return lu(4,4,o,c)}function uT(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function fT(o,c,h){h=h!=null?h.concat([o]):null,lu(4,4,uT.bind(null,c,o),h)}function ix(){}function hT(o,c){var h=wn();c=c===void 0?null:c;var g=h.memoizedState;return c!==null&&V0(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function pT(o,c){var h=wn();c=c===void 0?null:c;var g=h.memoizedState;if(c!==null&&V0(c,g[1]))return g[0];if(g=o(),ll){Ze(!0);try{o()}finally{Ze(!1)}}return h.memoizedState=[g,c],g}function sx(o,c,h){return h===void 0||(po&1073741824)!==0?o.memoizedState=c:(o.memoizedState=h,o=xC(),or.lanes|=o,jo|=o,h)}function mT(o,c,h,g){return Ga(h,c)?h:lc.current!==null?(o=sx(o,h,g),Ga(o,c)||(Bn=!0),o):(po&42)===0?(Bn=!0,o.memoizedState=h):(o=xC(),or.lanes|=o,jo|=o,c)}function gT(o,c,h,g,w){var _=W.p;W.p=_!==0&&8>_?_:8;var V=R.T,oe={};R.T=oe,cx(o,!1,c,h);try{var Te=w(),Ue=R.S;if(Ue!==null&&Ue(oe,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var st=JM(Te,g);cu(o,c,st,Qa(o))}else cu(o,c,g,Qa(o))}catch(dt){cu(o,c,{then:function(){},status:"rejected",reason:dt},Qa())}finally{W.p=_,R.T=V}}function nB(){}function ox(o,c,h,g){if(o.tag!==5)throw Error(a(476));var w=xT(o).queue;gT(o,w,c,Q,h===null?nB:function(){return yT(o),h(g)})}function xT(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:Q},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function yT(o){var c=xT(o).next.queue;cu(o,c,{},Qa())}function lx(){return ia(Au)}function vT(){return wn().memoizedState}function bT(){return wn().memoizedState}function aB(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=Qa();o=fo(h);var g=ho(c,o,h);g!==null&&(Ja(g,c,h),nu(g,c,h)),c={cache:F0()},o.payload=c;return}c=c.return}}function iB(o,c,h){var g=Qa();h={lane:g,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Gh(o)?wT(c,h):(h=E0(o,c,h,g),h!==null&&(Ja(h,o,g),ST(h,c,g)))}function jT(o,c,h){var g=Qa();cu(o,c,h,g)}function cu(o,c,h,g){var w={lane:g,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Gh(o))wT(c,w);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var V=c.lastRenderedState,oe=_(V,h);if(w.hasEagerState=!0,w.eagerState=oe,Ga(oe,V))return Oh(o,c,w,0),Qr===null&&Eh(),!1}catch{}finally{}if(h=E0(o,c,w,g),h!==null)return Ja(h,o,g),ST(h,c,g),!0}return!1}function cx(o,c,h,g){if(g={lane:2,revertLane:$x(),action:g,hasEagerState:!1,eagerState:null,next:null},Gh(o)){if(c)throw Error(a(479))}else c=E0(o,h,g,2),c!==null&&Ja(c,o,2)}function Gh(o){var c=o.alternate;return o===or||c!==null&&c===or}function wT(o,c){cc=zh=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function ST(o,c,h){if((h&4194048)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,_t(o,h)}}var Kh={readContext:ia,use:Uh,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn},NT={readContext:ia,use:Uh,useCallback:function(o,c){return ka().memoizedState=[o,c===void 0?null:c],o},useContext:ia,useEffect:oT,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,Hh(4194308,4,uT.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Hh(4194308,4,o,c)},useInsertionEffect:function(o,c){Hh(4,2,o,c)},useMemo:function(o,c){var h=ka();c=c===void 0?null:c;var g=o();if(ll){Ze(!0);try{o()}finally{Ze(!1)}}return h.memoizedState=[g,c],g},useReducer:function(o,c,h){var g=ka();if(h!==void 0){var w=h(c);if(ll){Ze(!0);try{h(c)}finally{Ze(!1)}}}else w=c;return g.memoizedState=g.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},g.queue=o,o=o.dispatch=iB.bind(null,or,o),[g.memoizedState,o]},useRef:function(o){var c=ka();return o={current:o},c.memoizedState=o},useState:function(o){o=nx(o);var c=o.queue,h=jT.bind(null,or,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:ix,useDeferredValue:function(o,c){var h=ka();return sx(h,o,c)},useTransition:function(){var o=nx(!1);return o=gT.bind(null,or,o.queue,!0,!1),ka().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var g=or,w=ka();if(Nr){if(h===void 0)throw Error(a(407));h=h()}else{if(h=c(),Qr===null)throw Error(a(349));(xr&124)!==0||HN(g,c,h)}w.memoizedState=h;var _={value:h,getSnapshot:c};return w.queue=_,oT(KN.bind(null,g,_,o),[o]),g.flags|=2048,uc(9,Wh(),GN.bind(null,g,_,h,c),null),h},useId:function(){var o=ka(),c=Qr.identifierPrefix;if(Nr){var h=Ts,g=Ns;h=(g&~(1<<32-Oe(g)-1)).toString(32)+h,c=""+c+"R"+h,h=$h++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=ZM++,c=""+c+"r"+h.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:lx,useFormState:rT,useActionState:rT,useOptimistic:function(o){var c=ka();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=cx.bind(null,or,!0,h),h.dispatch=c,[o,c]},useMemoCache:ex,useCacheRefresh:function(){return ka().memoizedState=aB.bind(null,or)}},TT={readContext:ia,use:Uh,useCallback:hT,useContext:ia,useEffect:lT,useImperativeHandle:fT,useInsertionEffect:cT,useLayoutEffect:dT,useMemo:pT,useReducer:qh,useRef:sT,useState:function(){return qh(Es)},useDebugValue:ix,useDeferredValue:function(o,c){var h=wn();return mT(h,$r.memoizedState,o,c)},useTransition:function(){var o=qh(Es)[0],c=wn().memoizedState;return[typeof o=="boolean"?o:ou(o),c]},useSyncExternalStore:WN,useId:vT,useHostTransitionStatus:lx,useFormState:nT,useActionState:nT,useOptimistic:function(o,c){var h=wn();return XN(h,$r,o,c)},useMemoCache:ex,useCacheRefresh:bT},sB={readContext:ia,use:Uh,useCallback:hT,useContext:ia,useEffect:lT,useImperativeHandle:fT,useInsertionEffect:cT,useLayoutEffect:dT,useMemo:pT,useReducer:rx,useRef:sT,useState:function(){return rx(Es)},useDebugValue:ix,useDeferredValue:function(o,c){var h=wn();return $r===null?sx(h,o,c):mT(h,$r.memoizedState,o,c)},useTransition:function(){var o=rx(Es)[0],c=wn().memoizedState;return[typeof o=="boolean"?o:ou(o),c]},useSyncExternalStore:WN,useId:vT,useHostTransitionStatus:lx,useFormState:iT,useActionState:iT,useOptimistic:function(o,c){var h=wn();return $r!==null?XN(h,$r,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:ex,useCacheRefresh:bT},fc=null,du=0;function Vh(o){var c=du;return du+=1,fc===null&&(fc=[]),MN(fc,o,c)}function uu(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Yh(o,c){throw c.$$typeof===m?Error(a(525)):(o=Object.prototype.toString.call(c),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function CT(o){var c=o._init;return c(o._payload)}function AT(o){function c(Re,_e){if(o){var Fe=Re.deletions;Fe===null?(Re.deletions=[_e],Re.flags|=16):Fe.push(_e)}}function h(Re,_e){if(!o)return null;for(;_e!==null;)c(Re,_e),_e=_e.sibling;return null}function g(Re){for(var _e=new Map;Re!==null;)Re.key!==null?_e.set(Re.key,Re):_e.set(Re.index,Re),Re=Re.sibling;return _e}function w(Re,_e){return Re=Ss(Re,_e),Re.index=0,Re.sibling=null,Re}function _(Re,_e,Fe){return Re.index=Fe,o?(Fe=Re.alternate,Fe!==null?(Fe=Fe.index,Fe<_e?(Re.flags|=67108866,_e):Fe):(Re.flags|=67108866,_e)):(Re.flags|=1048576,_e)}function V(Re){return o&&Re.alternate===null&&(Re.flags|=67108866),Re}function oe(Re,_e,Fe,ct){return _e===null||_e.tag!==6?(_e=_0(Fe,Re.mode,ct),_e.return=Re,_e):(_e=w(_e,Fe),_e.return=Re,_e)}function Te(Re,_e,Fe,ct){var Dt=Fe.type;return Dt===j?st(Re,_e,Fe.props.children,ct,Fe.key):_e!==null&&(_e.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===F&&CT(Dt)===_e.type)?(_e=w(_e,Fe.props),uu(_e,Fe),_e.return=Re,_e):(_e=kh(Fe.type,Fe.key,Fe.props,null,Re.mode,ct),uu(_e,Fe),_e.return=Re,_e)}function Ue(Re,_e,Fe,ct){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Fe.containerInfo||_e.stateNode.implementation!==Fe.implementation?(_e=k0(Fe,Re.mode,ct),_e.return=Re,_e):(_e=w(_e,Fe.children||[]),_e.return=Re,_e)}function st(Re,_e,Fe,ct,Dt){return _e===null||_e.tag!==7?(_e=el(Fe,Re.mode,ct,Dt),_e.return=Re,_e):(_e=w(_e,Fe),_e.return=Re,_e)}function dt(Re,_e,Fe){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=_0(""+_e,Re.mode,Fe),_e.return=Re,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case x:return Fe=kh(_e.type,_e.key,_e.props,null,Re.mode,Fe),uu(Fe,_e),Fe.return=Re,Fe;case v:return _e=k0(_e,Re.mode,Fe),_e.return=Re,_e;case F:var ct=_e._init;return _e=ct(_e._payload),dt(Re,_e,Fe)}if(I(_e)||A(_e))return _e=el(_e,Re.mode,Fe,null),_e.return=Re,_e;if(typeof _e.then=="function")return dt(Re,Vh(_e),Fe);if(_e.$$typeof===O)return dt(Re,Ph(Re,_e),Fe);Yh(Re,_e)}return null}function He(Re,_e,Fe,ct){var Dt=_e!==null?_e.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Dt!==null?null:oe(Re,_e,""+Fe,ct);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case x:return Fe.key===Dt?Te(Re,_e,Fe,ct):null;case v:return Fe.key===Dt?Ue(Re,_e,Fe,ct):null;case F:return Dt=Fe._init,Fe=Dt(Fe._payload),He(Re,_e,Fe,ct)}if(I(Fe)||A(Fe))return Dt!==null?null:st(Re,_e,Fe,ct,null);if(typeof Fe.then=="function")return He(Re,_e,Vh(Fe),ct);if(Fe.$$typeof===O)return He(Re,_e,Ph(Re,Fe),ct);Yh(Re,Fe)}return null}function Ke(Re,_e,Fe,ct,Dt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Re=Re.get(Fe)||null,oe(_e,Re,""+ct,Dt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:return Re=Re.get(ct.key===null?Fe:ct.key)||null,Te(_e,Re,ct,Dt);case v:return Re=Re.get(ct.key===null?Fe:ct.key)||null,Ue(_e,Re,ct,Dt);case F:var cr=ct._init;return ct=cr(ct._payload),Ke(Re,_e,Fe,ct,Dt)}if(I(ct)||A(ct))return Re=Re.get(Fe)||null,st(_e,Re,ct,Dt,null);if(typeof ct.then=="function")return Ke(Re,_e,Fe,Vh(ct),Dt);if(ct.$$typeof===O)return Ke(Re,_e,Fe,Ph(_e,ct),Dt);Yh(_e,ct)}return null}function Kt(Re,_e,Fe,ct){for(var Dt=null,cr=null,Lt=_e,Wt=_e=0,Ln=null;Lt!==null&&Wt<Fe.length;Wt++){Lt.index>Wt?(Ln=Lt,Lt=null):Ln=Lt.sibling;var vr=He(Re,Lt,Fe[Wt],ct);if(vr===null){Lt===null&&(Lt=Ln);break}o&&Lt&&vr.alternate===null&&c(Re,Lt),_e=_(vr,_e,Wt),cr===null?Dt=vr:cr.sibling=vr,cr=vr,Lt=Ln}if(Wt===Fe.length)return h(Re,Lt),Nr&&rl(Re,Wt),Dt;if(Lt===null){for(;Wt<Fe.length;Wt++)Lt=dt(Re,Fe[Wt],ct),Lt!==null&&(_e=_(Lt,_e,Wt),cr===null?Dt=Lt:cr.sibling=Lt,cr=Lt);return Nr&&rl(Re,Wt),Dt}for(Lt=g(Lt);Wt<Fe.length;Wt++)Ln=Ke(Lt,Re,Wt,Fe[Wt],ct),Ln!==null&&(o&&Ln.alternate!==null&&Lt.delete(Ln.key===null?Wt:Ln.key),_e=_(Ln,_e,Wt),cr===null?Dt=Ln:cr.sibling=Ln,cr=Ln);return o&&Lt.forEach(function(_o){return c(Re,_o)}),Nr&&rl(Re,Wt),Dt}function qt(Re,_e,Fe,ct){if(Fe==null)throw Error(a(151));for(var Dt=null,cr=null,Lt=_e,Wt=_e=0,Ln=null,vr=Fe.next();Lt!==null&&!vr.done;Wt++,vr=Fe.next()){Lt.index>Wt?(Ln=Lt,Lt=null):Ln=Lt.sibling;var _o=He(Re,Lt,vr.value,ct);if(_o===null){Lt===null&&(Lt=Ln);break}o&&Lt&&_o.alternate===null&&c(Re,Lt),_e=_(_o,_e,Wt),cr===null?Dt=_o:cr.sibling=_o,cr=_o,Lt=Ln}if(vr.done)return h(Re,Lt),Nr&&rl(Re,Wt),Dt;if(Lt===null){for(;!vr.done;Wt++,vr=Fe.next())vr=dt(Re,vr.value,ct),vr!==null&&(_e=_(vr,_e,Wt),cr===null?Dt=vr:cr.sibling=vr,cr=vr);return Nr&&rl(Re,Wt),Dt}for(Lt=g(Lt);!vr.done;Wt++,vr=Fe.next())vr=Ke(Lt,Re,Wt,vr.value,ct),vr!==null&&(o&&vr.alternate!==null&&Lt.delete(vr.key===null?Wt:vr.key),_e=_(vr,_e,Wt),cr===null?Dt=vr:cr.sibling=vr,cr=vr);return o&&Lt.forEach(function(oF){return c(Re,oF)}),Nr&&rl(Re,Wt),Dt}function qr(Re,_e,Fe,ct){if(typeof Fe=="object"&&Fe!==null&&Fe.type===j&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case x:e:{for(var Dt=Fe.key;_e!==null;){if(_e.key===Dt){if(Dt=Fe.type,Dt===j){if(_e.tag===7){h(Re,_e.sibling),ct=w(_e,Fe.props.children),ct.return=Re,Re=ct;break e}}else if(_e.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===F&&CT(Dt)===_e.type){h(Re,_e.sibling),ct=w(_e,Fe.props),uu(ct,Fe),ct.return=Re,Re=ct;break e}h(Re,_e);break}else c(Re,_e);_e=_e.sibling}Fe.type===j?(ct=el(Fe.props.children,Re.mode,ct,Fe.key),ct.return=Re,Re=ct):(ct=kh(Fe.type,Fe.key,Fe.props,null,Re.mode,ct),uu(ct,Fe),ct.return=Re,Re=ct)}return V(Re);case v:e:{for(Dt=Fe.key;_e!==null;){if(_e.key===Dt)if(_e.tag===4&&_e.stateNode.containerInfo===Fe.containerInfo&&_e.stateNode.implementation===Fe.implementation){h(Re,_e.sibling),ct=w(_e,Fe.children||[]),ct.return=Re,Re=ct;break e}else{h(Re,_e);break}else c(Re,_e);_e=_e.sibling}ct=k0(Fe,Re.mode,ct),ct.return=Re,Re=ct}return V(Re);case F:return Dt=Fe._init,Fe=Dt(Fe._payload),qr(Re,_e,Fe,ct)}if(I(Fe))return Kt(Re,_e,Fe,ct);if(A(Fe)){if(Dt=A(Fe),typeof Dt!="function")throw Error(a(150));return Fe=Dt.call(Fe),qt(Re,_e,Fe,ct)}if(typeof Fe.then=="function")return qr(Re,_e,Vh(Fe),ct);if(Fe.$$typeof===O)return qr(Re,_e,Ph(Re,Fe),ct);Yh(Re,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint"?(Fe=""+Fe,_e!==null&&_e.tag===6?(h(Re,_e.sibling),ct=w(_e,Fe),ct.return=Re,Re=ct):(h(Re,_e),ct=_0(Fe,Re.mode,ct),ct.return=Re,Re=ct),V(Re)):h(Re,_e)}return function(Re,_e,Fe,ct){try{du=0;var Dt=qr(Re,_e,Fe,ct);return fc=null,Dt}catch(Lt){if(Lt===tu||Lt===Bh)throw Lt;var cr=Ka(29,Lt,null,Re.mode);return cr.lanes=ct,cr.return=Re,cr}finally{}}}var hc=AT(!0),ET=AT(!1),hi=Y(null),rs=null;function mo(o){var c=o.alternate;ee(kn,kn.current&1),ee(hi,o),rs===null&&(c===null||lc.current!==null||c.memoizedState!==null)&&(rs=o)}function OT(o){if(o.tag===22){if(ee(kn,kn.current),ee(hi,o),rs===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(rs=o)}}else go()}function go(){ee(kn,kn.current),ee(hi,hi.current)}function Os(o){z(hi),rs===o&&(rs=null),z(kn)}var kn=Y(0);function Xh(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Zx(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function dx(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:p({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var ux={enqueueSetState:function(o,c,h){o=o._reactInternals;var g=Qa(),w=fo(g);w.payload=c,h!=null&&(w.callback=h),c=ho(o,w,g),c!==null&&(Ja(c,o,g),nu(c,o,g))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=Qa(),w=fo(g);w.tag=1,w.payload=c,h!=null&&(w.callback=h),c=ho(o,w,g),c!==null&&(Ja(c,o,g),nu(c,o,g))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Qa(),g=fo(h);g.tag=2,c!=null&&(g.callback=c),c=ho(o,g,h),c!==null&&(Ja(c,o,h),nu(c,o,h))}};function _T(o,c,h,g,w,_,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,_,V):c.prototype&&c.prototype.isPureReactComponent?!Kd(h,g)||!Kd(w,_):!0}function kT(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&ux.enqueueReplaceState(c,c.state,null)}function cl(o,c){var h=c;if("ref"in c){h={};for(var g in c)g!=="ref"&&(h[g]=c[g])}if(o=o.defaultProps){h===c&&(h=p({},h));for(var w in o)h[w]===void 0&&(h[w]=o[w])}return h}var Qh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function IT(o){Qh(o)}function DT(o){console.error(o)}function RT(o){Qh(o)}function Jh(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function PT(o,c,h){try{var g=o.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function fx(o,c,h){return h=fo(h),h.tag=3,h.payload={element:null},h.callback=function(){Jh(o,c)},h}function MT(o){return o=fo(o),o.tag=3,o}function BT(o,c,h,g){var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var _=g.value;o.payload=function(){return w(_)},o.callback=function(){PT(c,h,g)}}var V=h.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(o.callback=function(){PT(c,h,g),typeof w!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var oe=g.stack;this.componentDidCatch(g.value,{componentStack:oe!==null?oe:""})})}function oB(o,c,h,g,w){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=h.alternate,c!==null&&Jd(c,h,w,!0),h=hi.current,h!==null){switch(h.tag){case 13:return rs===null?Mx():h.alternate===null&&un===0&&(un=3),h.flags&=-257,h.flags|=65536,h.lanes=w,g===$0?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([g]):c.add(g),Fx(o,g,w)),!1;case 22:return h.flags|=65536,g===$0?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([g]):h.add(g)),Fx(o,g,w)),!1}throw Error(a(435,h.tag))}return Fx(o,g,w),Mx(),!1}if(Nr)return c=hi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,g!==R0&&(o=Error(a(422),{cause:g}),Qd(ci(o,h)))):(g!==R0&&(c=Error(a(423),{cause:g}),Qd(ci(c,h))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,g=ci(g,h),w=fx(o.stateNode,g,w),W0(o,w),un!==4&&(un=2)),!1;var _=Error(a(520),{cause:g});if(_=ci(_,h),yu===null?yu=[_]:yu.push(_),un!==4&&(un=2),c===null)return!0;g=ci(g,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=w&-w,h.lanes|=o,o=fx(h.stateNode,g,o),W0(h,o),!1;case 1:if(c=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(wo===null||!wo.has(_))))return h.flags|=65536,w&=-w,h.lanes|=w,w=MT(w),BT(w,o,h,g),W0(h,w),!1}h=h.return}while(h!==null);return!1}var FT=Error(a(461)),Bn=!1;function Hn(o,c,h,g){c.child=o===null?ET(c,null,h,g):hc(c,o.child,h,g)}function LT(o,c,h,g,w){h=h.render;var _=c.ref;if("ref"in g){var V={};for(var oe in g)oe!=="ref"&&(V[oe]=g[oe])}else V=g;return sl(c),g=Y0(o,c,h,V,_,w),oe=X0(),o!==null&&!Bn?(Q0(o,c,w),_s(o,c,w)):(Nr&&oe&&I0(c),c.flags|=1,Hn(o,c,g,w),c.child)}function zT(o,c,h,g,w){if(o===null){var _=h.type;return typeof _=="function"&&!O0(_)&&_.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=_,$T(o,c,_,g,w)):(o=kh(h.type,null,g,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(_=o.child,!bx(o,w)){var V=_.memoizedProps;if(h=h.compare,h=h!==null?h:Kd,h(V,g)&&o.ref===c.ref)return _s(o,c,w)}return c.flags|=1,o=Ss(_,g),o.ref=c.ref,o.return=c,c.child=o}function $T(o,c,h,g,w){if(o!==null){var _=o.memoizedProps;if(Kd(_,g)&&o.ref===c.ref)if(Bn=!1,c.pendingProps=g=_,bx(o,w))(o.flags&131072)!==0&&(Bn=!0);else return c.lanes=o.lanes,_s(o,c,w)}return hx(o,c,h,g,w)}function UT(o,c,h){var g=c.pendingProps,w=g.children,_=o!==null?o.memoizedState:null;if(g.mode==="hidden"){if((c.flags&128)!==0){if(g=_!==null?_.baseLanes|h:h,o!==null){for(w=c.child=o.child,_=0;w!==null;)_=_|w.lanes|w.childLanes,w=w.sibling;c.childLanes=_&~g}else c.childLanes=0,c.child=null;return qT(o,c,g,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Mh(c,_!==null?_.cachePool:null),_!==null?$N(c,_):G0(),OT(c);else return c.lanes=c.childLanes=536870912,qT(o,c,_!==null?_.baseLanes|h:h,h)}else _!==null?(Mh(c,_.cachePool),$N(c,_),go(),c.memoizedState=null):(o!==null&&Mh(c,null),G0(),go());return Hn(o,c,w,h),c.child}function qT(o,c,h,g){var w=z0();return w=w===null?null:{parent:_n._currentValue,pool:w},c.memoizedState={baseLanes:h,cachePool:w},o!==null&&Mh(c,null),G0(),OT(c),o!==null&&Jd(o,c,g,!0),null}function Zh(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(a(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function hx(o,c,h,g,w){return sl(c),h=Y0(o,c,h,g,void 0,w),g=X0(),o!==null&&!Bn?(Q0(o,c,w),_s(o,c,w)):(Nr&&g&&I0(c),c.flags|=1,Hn(o,c,h,w),c.child)}function WT(o,c,h,g,w,_){return sl(c),c.updateQueue=null,h=qN(c,g,h,w),UN(o),g=X0(),o!==null&&!Bn?(Q0(o,c,_),_s(o,c,_)):(Nr&&g&&I0(c),c.flags|=1,Hn(o,c,h,_),c.child)}function HT(o,c,h,g,w){if(sl(c),c.stateNode===null){var _=nc,V=h.contextType;typeof V=="object"&&V!==null&&(_=ia(V)),_=new h(g,_),c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ux,c.stateNode=_,_._reactInternals=c,_=c.stateNode,_.props=g,_.state=c.memoizedState,_.refs={},U0(c),V=h.contextType,_.context=typeof V=="object"&&V!==null?ia(V):nc,_.state=c.memoizedState,V=h.getDerivedStateFromProps,typeof V=="function"&&(dx(c,h,V,g),_.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(V=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),V!==_.state&&ux.enqueueReplaceState(_,_.state,null),iu(c,g,_,w),au(),_.state=c.memoizedState),typeof _.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(o===null){_=c.stateNode;var oe=c.memoizedProps,Te=cl(h,oe);_.props=Te;var Ue=_.context,st=h.contextType;V=nc,typeof st=="object"&&st!==null&&(V=ia(st));var dt=h.getDerivedStateFromProps;st=typeof dt=="function"||typeof _.getSnapshotBeforeUpdate=="function",oe=c.pendingProps!==oe,st||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(oe||Ue!==V)&&kT(c,_,g,V),uo=!1;var He=c.memoizedState;_.state=He,iu(c,g,_,w),au(),Ue=c.memoizedState,oe||He!==Ue||uo?(typeof dt=="function"&&(dx(c,h,dt,g),Ue=c.memoizedState),(Te=uo||_T(c,h,Te,g,He,Ue,V))?(st||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(c.flags|=4194308)):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=Ue),_.props=g,_.state=Ue,_.context=V,g=Te):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{_=c.stateNode,q0(o,c),V=c.memoizedProps,st=cl(h,V),_.props=st,dt=c.pendingProps,He=_.context,Ue=h.contextType,Te=nc,typeof Ue=="object"&&Ue!==null&&(Te=ia(Ue)),oe=h.getDerivedStateFromProps,(Ue=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V!==dt||He!==Te)&&kT(c,_,g,Te),uo=!1,He=c.memoizedState,_.state=He,iu(c,g,_,w),au();var Ke=c.memoizedState;V!==dt||He!==Ke||uo||o!==null&&o.dependencies!==null&&Rh(o.dependencies)?(typeof oe=="function"&&(dx(c,h,oe,g),Ke=c.memoizedState),(st=uo||_T(c,h,st,g,He,Ke,Te)||o!==null&&o.dependencies!==null&&Rh(o.dependencies))?(Ue||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Ke,Te),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Ke,Te)),typeof _.componentDidUpdate=="function"&&(c.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof _.componentDidUpdate!="function"||V===o.memoizedProps&&He===o.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&He===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Ke),_.props=g,_.state=Ke,_.context=Te,g=st):(typeof _.componentDidUpdate!="function"||V===o.memoizedProps&&He===o.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&He===o.memoizedState||(c.flags|=1024),g=!1)}return _=g,Zh(o,c),g=(c.flags&128)!==0,_||g?(_=c.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:_.render(),c.flags|=1,o!==null&&g?(c.child=hc(c,o.child,null,w),c.child=hc(c,null,h,w)):Hn(o,c,h,w),c.memoizedState=_.state,o=c.child):o=_s(o,c,w),o}function GT(o,c,h,g){return Xd(),c.flags|=256,Hn(o,c,h,g),c.child}var px={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mx(o){return{baseLanes:o,cachePool:DN()}}function gx(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=pi),o}function KT(o,c,h){var g=c.pendingProps,w=!1,_=(c.flags&128)!==0,V;if((V=_)||(V=o!==null&&o.memoizedState===null?!1:(kn.current&2)!==0),V&&(w=!0,c.flags&=-129),V=(c.flags&32)!==0,c.flags&=-33,o===null){if(Nr){if(w?mo(c):go(),Nr){var oe=dn,Te;if(Te=oe){e:{for(Te=oe,oe=ts;Te.nodeType!==8;){if(!oe){oe=null;break e}if(Te=Ri(Te.nextSibling),Te===null){oe=null;break e}}oe=Te}oe!==null?(c.memoizedState={dehydrated:oe,treeContext:tl!==null?{id:Ns,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},Te=Ka(18,null,null,0),Te.stateNode=oe,Te.return=c,c.child=Te,va=c,dn=null,Te=!0):Te=!1}Te||al(c)}if(oe=c.memoizedState,oe!==null&&(oe=oe.dehydrated,oe!==null))return Zx(oe)?c.lanes=32:c.lanes=536870912,null;Os(c)}return oe=g.children,g=g.fallback,w?(go(),w=c.mode,oe=ep({mode:"hidden",children:oe},w),g=el(g,w,h,null),oe.return=c,g.return=c,oe.sibling=g,c.child=oe,w=c.child,w.memoizedState=mx(h),w.childLanes=gx(o,V,h),c.memoizedState=px,g):(mo(c),xx(c,oe))}if(Te=o.memoizedState,Te!==null&&(oe=Te.dehydrated,oe!==null)){if(_)c.flags&256?(mo(c),c.flags&=-257,c=yx(o,c,h)):c.memoizedState!==null?(go(),c.child=o.child,c.flags|=128,c=null):(go(),w=g.fallback,oe=c.mode,g=ep({mode:"visible",children:g.children},oe),w=el(w,oe,h,null),w.flags|=2,g.return=c,w.return=c,g.sibling=w,c.child=g,hc(c,o.child,null,h),g=c.child,g.memoizedState=mx(h),g.childLanes=gx(o,V,h),c.memoizedState=px,c=w);else if(mo(c),Zx(oe)){if(V=oe.nextSibling&&oe.nextSibling.dataset,V)var Ue=V.dgst;V=Ue,g=Error(a(419)),g.stack="",g.digest=V,Qd({value:g,source:null,stack:null}),c=yx(o,c,h)}else if(Bn||Jd(o,c,h,!1),V=(h&o.childLanes)!==0,Bn||V){if(V=Qr,V!==null&&(g=h&-h,g=(g&42)!==0?1:ot(g),g=(g&(V.suspendedLanes|h))!==0?0:g,g!==0&&g!==Te.retryLane))throw Te.retryLane=g,rc(o,g),Ja(V,o,g),FT;oe.data==="$?"||Mx(),c=yx(o,c,h)}else oe.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=Te.treeContext,dn=Ri(oe.nextSibling),va=c,Nr=!0,nl=null,ts=!1,o!==null&&(ui[fi++]=Ns,ui[fi++]=Ts,ui[fi++]=tl,Ns=o.id,Ts=o.overflow,tl=c),c=xx(c,g.children),c.flags|=4096);return c}return w?(go(),w=g.fallback,oe=c.mode,Te=o.child,Ue=Te.sibling,g=Ss(Te,{mode:"hidden",children:g.children}),g.subtreeFlags=Te.subtreeFlags&65011712,Ue!==null?w=Ss(Ue,w):(w=el(w,oe,h,null),w.flags|=2),w.return=c,g.return=c,g.sibling=w,c.child=g,g=w,w=c.child,oe=o.child.memoizedState,oe===null?oe=mx(h):(Te=oe.cachePool,Te!==null?(Ue=_n._currentValue,Te=Te.parent!==Ue?{parent:Ue,pool:Ue}:Te):Te=DN(),oe={baseLanes:oe.baseLanes|h,cachePool:Te}),w.memoizedState=oe,w.childLanes=gx(o,V,h),c.memoizedState=px,g):(mo(c),h=o.child,o=h.sibling,h=Ss(h,{mode:"visible",children:g.children}),h.return=c,h.sibling=null,o!==null&&(V=c.deletions,V===null?(c.deletions=[o],c.flags|=16):V.push(o)),c.child=h,c.memoizedState=null,h)}function xx(o,c){return c=ep({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function ep(o,c){return o=Ka(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function yx(o,c,h){return hc(c,o.child,null,h),o=xx(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function VT(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),M0(o.return,c,h)}function vx(o,c,h,g,w){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=h,_.tailMode=w)}function YT(o,c,h){var g=c.pendingProps,w=g.revealOrder,_=g.tail;if(Hn(o,c,g.children,h),g=kn.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&VT(o,h,c);else if(o.tag===19)VT(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}switch(ee(kn,g),w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&Xh(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),vx(c,!1,w,h,_);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&Xh(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}vx(c,!0,h,null,_);break;case"together":vx(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function _s(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),jo|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(Jd(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(a(153));if(c.child!==null){for(o=c.child,h=Ss(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Ss(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function bx(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Rh(o)))}function lB(o,c,h){switch(c.tag){case 3:Se(c,c.stateNode.containerInfo),co(c,_n,o.memoizedState.cache),Xd();break;case 27:case 5:ue(c);break;case 4:Se(c,c.stateNode.containerInfo);break;case 10:co(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(mo(c),c.flags|=128,null):(h&c.child.childLanes)!==0?KT(o,c,h):(mo(c),o=_s(o,c,h),o!==null?o.sibling:null);mo(c);break;case 19:var w=(o.flags&128)!==0;if(g=(h&c.childLanes)!==0,g||(Jd(o,c,h,!1),g=(h&c.childLanes)!==0),w){if(g)return YT(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ee(kn,kn.current),g)break;return null;case 22:case 23:return c.lanes=0,UT(o,c,h);case 24:co(c,_n,o.memoizedState.cache)}return _s(o,c,h)}function XT(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)Bn=!0;else{if(!bx(o,h)&&(c.flags&128)===0)return Bn=!1,lB(o,c,h);Bn=(o.flags&131072)!==0}else Bn=!1,Nr&&(c.flags&1048576)!==0&&CN(c,Dh,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var g=c.elementType,w=g._init;if(g=w(g._payload),c.type=g,typeof g=="function")O0(g)?(o=cl(g,o),c.tag=1,c=HT(null,c,g,o,h)):(c.tag=0,c=hx(null,c,g,o,h));else{if(g!=null){if(w=g.$$typeof,w===S){c.tag=11,c=LT(null,c,g,o,h);break e}else if(w===D){c.tag=14,c=zT(null,c,g,o,h);break e}}throw c=P(g)||g,Error(a(306,c,""))}}return c;case 0:return hx(o,c,c.type,c.pendingProps,h);case 1:return g=c.type,w=cl(g,c.pendingProps),HT(o,c,g,w,h);case 3:e:{if(Se(c,c.stateNode.containerInfo),o===null)throw Error(a(387));g=c.pendingProps;var _=c.memoizedState;w=_.element,q0(o,c),iu(c,g,null,h);var V=c.memoizedState;if(g=V.cache,co(c,_n,g),g!==_.cache&&B0(c,[_n],h,!0),au(),g=V.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:V.cache},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){c=GT(o,c,g,h);break e}else if(g!==w){w=ci(Error(a(424)),c),Qd(w),c=GT(o,c,g,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(dn=Ri(o.firstChild),va=c,Nr=!0,nl=null,ts=!0,h=ET(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Xd(),g===w){c=_s(o,c,h);break e}Hn(o,c,g,h)}c=c.child}return c;case 26:return Zh(o,c),o===null?(h=eA(c.type,null,c.pendingProps,null))?c.memoizedState=h:Nr||(h=c.type,o=c.pendingProps,g=pp(le.current).createElement(h),g[Jt]=c,g[Gt]=o,Kn(g,h,o),Me(g),c.stateNode=g):c.memoizedState=eA(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ue(c),o===null&&Nr&&(g=c.stateNode=QC(c.type,c.pendingProps,le.current),va=c,ts=!0,w=dn,To(c.type)?(ey=w,dn=Ri(g.firstChild)):dn=w),Hn(o,c,c.pendingProps.children,h),Zh(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Nr&&((w=g=dn)&&(g=MB(g,c.type,c.pendingProps,ts),g!==null?(c.stateNode=g,va=c,dn=Ri(g.firstChild),ts=!1,w=!0):w=!1),w||al(c)),ue(c),w=c.type,_=c.pendingProps,V=o!==null?o.memoizedProps:null,g=_.children,Xx(w,_)?g=null:V!==null&&Xx(w,V)&&(c.flags|=32),c.memoizedState!==null&&(w=Y0(o,c,eB,null,null,h),Au._currentValue=w),Zh(o,c),Hn(o,c,g,h),c.child;case 6:return o===null&&Nr&&((o=h=dn)&&(h=BB(h,c.pendingProps,ts),h!==null?(c.stateNode=h,va=c,dn=null,o=!0):o=!1),o||al(c)),null;case 13:return KT(o,c,h);case 4:return Se(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=hc(c,null,g,h):Hn(o,c,g,h),c.child;case 11:return LT(o,c,c.type,c.pendingProps,h);case 7:return Hn(o,c,c.pendingProps,h),c.child;case 8:return Hn(o,c,c.pendingProps.children,h),c.child;case 12:return Hn(o,c,c.pendingProps.children,h),c.child;case 10:return g=c.pendingProps,co(c,c.type,g.value),Hn(o,c,g.children,h),c.child;case 9:return w=c.type._context,g=c.pendingProps.children,sl(c),w=ia(w),g=g(w),c.flags|=1,Hn(o,c,g,h),c.child;case 14:return zT(o,c,c.type,c.pendingProps,h);case 15:return $T(o,c,c.type,c.pendingProps,h);case 19:return YT(o,c,h);case 31:return g=c.pendingProps,h=c.mode,g={mode:g.mode,children:g.children},o===null?(h=ep(g,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=Ss(o.child,g),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return UT(o,c,h);case 24:return sl(c),g=ia(_n),o===null?(w=z0(),w===null&&(w=Qr,_=F0(),w.pooledCache=_,_.refCount++,_!==null&&(w.pooledCacheLanes|=h),w=_),c.memoizedState={parent:g,cache:w},U0(c),co(c,_n,w)):((o.lanes&h)!==0&&(q0(o,c),iu(c,null,null,h),au()),w=o.memoizedState,_=c.memoizedState,w.parent!==g?(w={parent:g,cache:g},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),co(c,_n,g)):(g=_.cache,co(c,_n,g),g!==w.cache&&B0(c,[_n],h,!0))),Hn(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function ks(o){o.flags|=4}function QT(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!iA(c)){if(c=hi.current,c!==null&&((xr&4194048)===xr?rs!==null:(xr&62914560)!==xr&&(xr&536870912)===0||c!==rs))throw ru=$0,RN;o.flags|=8192}}function tp(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ke():536870912,o.lanes|=c,xc|=c)}function fu(o,c){if(!Nr)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function cn(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&65011712,g|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function cB(o,c,h){var g=c.pendingProps;switch(D0(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(c),null;case 1:return cn(c),null;case 3:return h=c.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),As(_n),K(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Yd(c)?ks(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ON())),cn(c),null;case 26:return h=c.memoizedState,o===null?(ks(c),h!==null?(cn(c),QT(c,h)):(cn(c),c.flags&=-16777217)):h?h!==o.memoizedState?(ks(c),cn(c),QT(c,h)):(cn(c),c.flags&=-16777217):(o.memoizedProps!==g&&ks(c),cn(c),c.flags&=-16777217),null;case 27:ye(c),h=le.current;var w=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==g&&ks(c);else{if(!g){if(c.stateNode===null)throw Error(a(166));return cn(c),null}o=H.current,Yd(c)?AN(c):(o=QC(w,g,h),c.stateNode=o,ks(c))}return cn(c),null;case 5:if(ye(c),h=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&ks(c);else{if(!g){if(c.stateNode===null)throw Error(a(166));return cn(c),null}if(o=H.current,Yd(c))AN(c);else{switch(w=pp(le.current),o){case 1:o=w.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:o=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":o=w.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":o=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof g.is=="string"?w.createElement("select",{is:g.is}):w.createElement("select"),g.multiple?o.multiple=!0:g.size&&(o.size=g.size);break;default:o=typeof g.is=="string"?w.createElement(h,{is:g.is}):w.createElement(h)}}o[Jt]=c,o[Gt]=g;e:for(w=c.child;w!==null;){if(w.tag===5||w.tag===6)o.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===c)break e;for(;w.sibling===null;){if(w.return===null||w.return===c)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}c.stateNode=o;e:switch(Kn(o,h,g),h){case"button":case"input":case"select":case"textarea":o=!!g.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ks(c)}}return cn(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==g&&ks(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(a(166));if(o=le.current,Yd(c)){if(o=c.stateNode,h=c.memoizedProps,g=null,w=va,w!==null)switch(w.tag){case 27:case 5:g=w.memoizedProps}o[Jt]=c,o=!!(o.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||WC(o.nodeValue,h)),o||al(c)}else o=pp(o).createTextNode(g),o[Jt]=c,c.stateNode=o}return cn(c),null;case 13:if(g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=Yd(c),g!==null&&g.dehydrated!==null){if(o===null){if(!w)throw Error(a(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));w[Jt]=c}else Xd(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cn(c),w=!1}else w=ON(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(Os(c),c):(Os(c),null)}if(Os(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=g!==null,o=o!==null&&o.memoizedState!==null,h){g=c.child,w=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(w=g.alternate.memoizedState.cachePool.pool);var _=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==w&&(g.flags|=2048)}return h!==o&&h&&(c.child.flags|=8192),tp(c,c.updateQueue),cn(c),null;case 4:return K(),o===null&&Hx(c.stateNode.containerInfo),cn(c),null;case 10:return As(c.type),cn(c),null;case 19:if(z(kn),w=c.memoizedState,w===null)return cn(c),null;if(g=(c.flags&128)!==0,_=w.rendering,_===null)if(g)fu(w,!1);else{if(un!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(_=Xh(o),_!==null){for(c.flags|=128,fu(w,!1),o=_.updateQueue,c.updateQueue=o,tp(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)TN(h,o),h=h.sibling;return ee(kn,kn.current&1|2),c.child}o=o.sibling}w.tail!==null&&Ae()>ap&&(c.flags|=128,g=!0,fu(w,!1),c.lanes=4194304)}else{if(!g)if(o=Xh(_),o!==null){if(c.flags|=128,g=!0,o=o.updateQueue,c.updateQueue=o,tp(c,o),fu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!_.alternate&&!Nr)return cn(c),null}else 2*Ae()-w.renderingStartTime>ap&&h!==536870912&&(c.flags|=128,g=!0,fu(w,!1),c.lanes=4194304);w.isBackwards?(_.sibling=c.child,c.child=_):(o=w.last,o!==null?o.sibling=_:c.child=_,w.last=_)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=Ae(),c.sibling=null,o=kn.current,ee(kn,g?o&1|2:o&1),c):(cn(c),null);case 22:case 23:return Os(c),K0(),g=c.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(h&536870912)!==0&&(c.flags&128)===0&&(cn(c),c.subtreeFlags&6&&(c.flags|=8192)):cn(c),h=c.updateQueue,h!==null&&tp(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048),o!==null&&z(ol),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),As(_n),cn(c),null;case 25:return null;case 30:return null}throw Error(a(156,c.tag))}function dB(o,c){switch(D0(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return As(_n),K(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return ye(c),null;case 13:if(Os(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(a(340));Xd()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return z(kn),null;case 4:return K(),null;case 10:return As(c.type),null;case 22:case 23:return Os(c),K0(),o!==null&&z(ol),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return As(_n),null;case 25:return null;default:return null}}function JT(o,c){switch(D0(c),c.tag){case 3:As(_n),K();break;case 26:case 27:case 5:ye(c);break;case 4:K();break;case 13:Os(c);break;case 19:z(kn);break;case 10:As(c.type);break;case 22:case 23:Os(c),K0(),o!==null&&z(ol);break;case 24:As(_n)}}function hu(o,c){try{var h=c.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var w=g.next;h=w;do{if((h.tag&o)===o){g=void 0;var _=h.create,V=h.inst;g=_(),V.destroy=g}h=h.next}while(h!==w)}}catch(oe){Kr(c,c.return,oe)}}function xo(o,c,h){try{var g=c.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var _=w.next;g=_;do{if((g.tag&o)===o){var V=g.inst,oe=V.destroy;if(oe!==void 0){V.destroy=void 0,w=c;var Te=h,Ue=oe;try{Ue()}catch(st){Kr(w,Te,st)}}}g=g.next}while(g!==_)}}catch(st){Kr(c,c.return,st)}}function ZT(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{zN(c,h)}catch(g){Kr(o,o.return,g)}}}function eC(o,c,h){h.props=cl(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(g){Kr(o,c,g)}}function pu(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof h=="function"?o.refCleanup=h(g):h.current=g}}catch(w){Kr(o,c,w)}}function ns(o,c){var h=o.ref,g=o.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(w){Kr(o,c,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(w){Kr(o,c,w)}else h.current=null}function tC(o){var c=o.type,h=o.memoizedProps,g=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(w){Kr(o,o.return,w)}}function jx(o,c,h){try{var g=o.stateNode;kB(g,o.type,h,c),g[Gt]=c}catch(w){Kr(o,o.return,w)}}function rC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&To(o.type)||o.tag===4}function wx(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||rC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&To(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Sx(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=hp));else if(g!==4&&(g===27&&To(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for(Sx(o,c,h),o=o.sibling;o!==null;)Sx(o,c,h),o=o.sibling}function rp(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(g===27&&To(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(rp(o,c,h),o=o.sibling;o!==null;)rp(o,c,h),o=o.sibling}function nC(o){var c=o.stateNode,h=o.memoizedProps;try{for(var g=o.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);Kn(c,g,h),c[Jt]=o,c[Gt]=h}catch(_){Kr(o,o.return,_)}}var Is=!1,xn=!1,Nx=!1,aC=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function uB(o,c){if(o=o.containerInfo,Vx=bp,o=mN(o),w0(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var V=0,oe=-1,Te=-1,Ue=0,st=0,dt=o,He=null;t:for(;;){for(var Ke;dt!==h||w!==0&&dt.nodeType!==3||(oe=V+w),dt!==_||g!==0&&dt.nodeType!==3||(Te=V+g),dt.nodeType===3&&(V+=dt.nodeValue.length),(Ke=dt.firstChild)!==null;)He=dt,dt=Ke;for(;;){if(dt===o)break t;if(He===h&&++Ue===w&&(oe=V),He===_&&++st===g&&(Te=V),(Ke=dt.nextSibling)!==null)break;dt=He,He=dt.parentNode}dt=Ke}h=oe===-1||Te===-1?null:{start:oe,end:Te}}else h=null}h=h||{start:0,end:0}}else h=null;for(Yx={focusedElem:o,selectionRange:h},bp=!1,Fn=c;Fn!==null;)if(c=Fn,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,Fn=o;else for(;Fn!==null;){switch(c=Fn,_=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,h=c,w=_.memoizedProps,_=_.memoizedState,g=h.stateNode;try{var Kt=cl(h.type,w,h.elementType===h.type);o=g.getSnapshotBeforeUpdate(Kt,_),g.__reactInternalSnapshotBeforeUpdate=o}catch(qt){Kr(h,h.return,qt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)Jx(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Jx(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=c.sibling,o!==null){o.return=c.return,Fn=o;break}Fn=c.return}}function iC(o,c,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:yo(o,h),g&4&&hu(5,h);break;case 1:if(yo(o,h),g&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(V){Kr(h,h.return,V)}else{var w=cl(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(w,c,o.__reactInternalSnapshotBeforeUpdate)}catch(V){Kr(h,h.return,V)}}g&64&&ZT(h),g&512&&pu(h,h.return);break;case 3:if(yo(o,h),g&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{zN(o,c)}catch(V){Kr(h,h.return,V)}}break;case 27:c===null&&g&4&&nC(h);case 26:case 5:yo(o,h),c===null&&g&4&&tC(h),g&512&&pu(h,h.return);break;case 12:yo(o,h);break;case 13:yo(o,h),g&4&&lC(o,h),g&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=bB.bind(null,h),FB(o,h))));break;case 22:if(g=h.memoizedState!==null||Is,!g){c=c!==null&&c.memoizedState!==null||xn,w=Is;var _=xn;Is=g,(xn=c)&&!_?vo(o,h,(h.subtreeFlags&8772)!==0):yo(o,h),Is=w,xn=_}break;case 30:break;default:yo(o,h)}}function sC(o){var c=o.alternate;c!==null&&(o.alternate=null,sC(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&he(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var nn=null,Ia=!1;function Ds(o,c,h){for(h=h.child;h!==null;)oC(o,c,h),h=h.sibling}function oC(o,c,h){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(tt,h)}catch{}switch(h.tag){case 26:xn||ns(h,c),Ds(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:xn||ns(h,c);var g=nn,w=Ia;To(h.type)&&(nn=h.stateNode,Ia=!1),Ds(o,c,h),Su(h.stateNode),nn=g,Ia=w;break;case 5:xn||ns(h,c);case 6:if(g=nn,w=Ia,nn=null,Ds(o,c,h),nn=g,Ia=w,nn!==null)if(Ia)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(h.stateNode)}catch(_){Kr(h,c,_)}else try{nn.removeChild(h.stateNode)}catch(_){Kr(h,c,_)}break;case 18:nn!==null&&(Ia?(o=nn,YC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),ku(o)):YC(nn,h.stateNode));break;case 4:g=nn,w=Ia,nn=h.stateNode.containerInfo,Ia=!0,Ds(o,c,h),nn=g,Ia=w;break;case 0:case 11:case 14:case 15:xn||xo(2,h,c),xn||xo(4,h,c),Ds(o,c,h);break;case 1:xn||(ns(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"&&eC(h,c,g)),Ds(o,c,h);break;case 21:Ds(o,c,h);break;case 22:xn=(g=xn)||h.memoizedState!==null,Ds(o,c,h),xn=g;break;default:Ds(o,c,h)}}function lC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ku(o)}catch(h){Kr(c,c.return,h)}}function fB(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new aC),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new aC),c;default:throw Error(a(435,o.tag))}}function Tx(o,c){var h=fB(o);c.forEach(function(g){var w=jB.bind(null,o,g);h.has(g)||(h.add(g),g.then(w,w))})}function Va(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g],_=o,V=c,oe=V;e:for(;oe!==null;){switch(oe.tag){case 27:if(To(oe.type)){nn=oe.stateNode,Ia=!1;break e}break;case 5:nn=oe.stateNode,Ia=!1;break e;case 3:case 4:nn=oe.stateNode.containerInfo,Ia=!0;break e}oe=oe.return}if(nn===null)throw Error(a(160));oC(_,V,w),nn=null,Ia=!1,_=w.alternate,_!==null&&(_.return=null),w.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)cC(c,o),c=c.sibling}var Di=null;function cC(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Va(c,o),Ya(o),g&4&&(xo(3,o,o.return),hu(3,o),xo(5,o,o.return));break;case 1:Va(c,o),Ya(o),g&512&&(xn||h===null||ns(h,h.return)),g&64&&Is&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var w=Di;if(Va(c,o),Ya(o),g&512&&(xn||h===null||ns(h,h.return)),g&4){var _=h!==null?h.memoizedState:null;if(g=o.memoizedState,h===null)if(g===null)if(o.stateNode===null){e:{g=o.type,h=o.memoizedProps,w=w.ownerDocument||w;t:switch(g){case"title":_=w.getElementsByTagName("title")[0],(!_||_[de]||_[Jt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=w.createElement(g),w.head.insertBefore(_,w.querySelector("head > title"))),Kn(_,g,h),_[Jt]=o,Me(_),g=_;break e;case"link":var V=nA("link","href",w).get(g+(h.href||""));if(V){for(var oe=0;oe<V.length;oe++)if(_=V[oe],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){V.splice(oe,1);break t}}_=w.createElement(g),Kn(_,g,h),w.head.appendChild(_);break;case"meta":if(V=nA("meta","content",w).get(g+(h.content||""))){for(oe=0;oe<V.length;oe++)if(_=V[oe],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){V.splice(oe,1);break t}}_=w.createElement(g),Kn(_,g,h),w.head.appendChild(_);break;default:throw Error(a(468,g))}_[Jt]=o,Me(_),g=_}o.stateNode=g}else aA(w,o.type,o.stateNode);else o.stateNode=rA(w,g,o.memoizedProps);else _!==g?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,g===null?aA(w,o.type,o.stateNode):rA(w,g,o.memoizedProps)):g===null&&o.stateNode!==null&&jx(o,o.memoizedProps,h.memoizedProps)}break;case 27:Va(c,o),Ya(o),g&512&&(xn||h===null||ns(h,h.return)),h!==null&&g&4&&jx(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Va(c,o),Ya(o),g&512&&(xn||h===null||ns(h,h.return)),o.flags&32){w=o.stateNode;try{Ct(w,"")}catch(Ke){Kr(o,o.return,Ke)}}g&4&&o.stateNode!=null&&(w=o.memoizedProps,jx(o,w,h!==null?h.memoizedProps:w)),g&1024&&(Nx=!0);break;case 6:if(Va(c,o),Ya(o),g&4){if(o.stateNode===null)throw Error(a(162));g=o.memoizedProps,h=o.stateNode;try{h.nodeValue=g}catch(Ke){Kr(o,o.return,Ke)}}break;case 3:if(xp=null,w=Di,Di=mp(c.containerInfo),Va(c,o),Di=w,Ya(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{ku(c.containerInfo)}catch(Ke){Kr(o,o.return,Ke)}Nx&&(Nx=!1,dC(o));break;case 4:g=Di,Di=mp(o.stateNode.containerInfo),Va(c,o),Ya(o),Di=g;break;case 12:Va(c,o),Ya(o);break;case 13:Va(c,o),Ya(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(kx=Ae()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Tx(o,g)));break;case 22:w=o.memoizedState!==null;var Te=h!==null&&h.memoizedState!==null,Ue=Is,st=xn;if(Is=Ue||w,xn=st||Te,Va(c,o),xn=st,Is=Ue,Ya(o),g&8192)e:for(c=o.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(h===null||Te||Is||xn||dl(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){Te=h=c;try{if(_=Te.stateNode,w)V=_.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{oe=Te.stateNode;var dt=Te.memoizedProps.style,He=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;oe.style.display=He==null||typeof He=="boolean"?"":(""+He).trim()}}catch(Ke){Kr(Te,Te.return,Ke)}}}else if(c.tag===6){if(h===null){Te=c;try{Te.stateNode.nodeValue=w?"":Te.memoizedProps}catch(Ke){Kr(Te,Te.return,Ke)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=o.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,Tx(o,h))));break;case 19:Va(c,o),Ya(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Tx(o,g)));break;case 30:break;case 21:break;default:Va(c,o),Ya(o)}}function Ya(o){var c=o.flags;if(c&2){try{for(var h,g=o.return;g!==null;){if(rC(g)){h=g;break}g=g.return}if(h==null)throw Error(a(160));switch(h.tag){case 27:var w=h.stateNode,_=wx(o);rp(o,_,w);break;case 5:var V=h.stateNode;h.flags&32&&(Ct(V,""),h.flags&=-33);var oe=wx(o);rp(o,oe,V);break;case 3:case 4:var Te=h.stateNode.containerInfo,Ue=wx(o);Sx(o,Ue,Te);break;default:throw Error(a(161))}}catch(st){Kr(o,o.return,st)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function dC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;dC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function yo(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)iC(o,c.alternate,c),c=c.sibling}function dl(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:xo(4,c,c.return),dl(c);break;case 1:ns(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&eC(c,c.return,h),dl(c);break;case 27:Su(c.stateNode);case 26:case 5:ns(c,c.return),dl(c);break;case 22:c.memoizedState===null&&dl(c);break;case 30:dl(c);break;default:dl(c)}o=o.sibling}}function vo(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,w=o,_=c,V=_.flags;switch(_.tag){case 0:case 11:case 15:vo(w,_,h),hu(4,_);break;case 1:if(vo(w,_,h),g=_,w=g.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Ue){Kr(g,g.return,Ue)}if(g=_,w=g.updateQueue,w!==null){var oe=g.stateNode;try{var Te=w.shared.hiddenCallbacks;if(Te!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Te.length;w++)LN(Te[w],oe)}catch(Ue){Kr(g,g.return,Ue)}}h&&V&64&&ZT(_),pu(_,_.return);break;case 27:nC(_);case 26:case 5:vo(w,_,h),h&&g===null&&V&4&&tC(_),pu(_,_.return);break;case 12:vo(w,_,h);break;case 13:vo(w,_,h),h&&V&4&&lC(w,_);break;case 22:_.memoizedState===null&&vo(w,_,h),pu(_,_.return);break;case 30:break;default:vo(w,_,h)}c=c.sibling}}function Cx(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Zd(h))}function Ax(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Zd(o))}function as(o,c,h,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)uC(o,c,h,g),c=c.sibling}function uC(o,c,h,g){var w=c.flags;switch(c.tag){case 0:case 11:case 15:as(o,c,h,g),w&2048&&hu(9,c);break;case 1:as(o,c,h,g);break;case 3:as(o,c,h,g),w&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Zd(o)));break;case 12:if(w&2048){as(o,c,h,g),o=c.stateNode;try{var _=c.memoizedProps,V=_.id,oe=_.onPostCommit;typeof oe=="function"&&oe(V,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Te){Kr(c,c.return,Te)}}else as(o,c,h,g);break;case 13:as(o,c,h,g);break;case 23:break;case 22:_=c.stateNode,V=c.alternate,c.memoizedState!==null?_._visibility&2?as(o,c,h,g):mu(o,c):_._visibility&2?as(o,c,h,g):(_._visibility|=2,pc(o,c,h,g,(c.subtreeFlags&10256)!==0)),w&2048&&Cx(V,c);break;case 24:as(o,c,h,g),w&2048&&Ax(c.alternate,c);break;default:as(o,c,h,g)}}function pc(o,c,h,g,w){for(w=w&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var _=o,V=c,oe=h,Te=g,Ue=V.flags;switch(V.tag){case 0:case 11:case 15:pc(_,V,oe,Te,w),hu(8,V);break;case 23:break;case 22:var st=V.stateNode;V.memoizedState!==null?st._visibility&2?pc(_,V,oe,Te,w):mu(_,V):(st._visibility|=2,pc(_,V,oe,Te,w)),w&&Ue&2048&&Cx(V.alternate,V);break;case 24:pc(_,V,oe,Te,w),w&&Ue&2048&&Ax(V.alternate,V);break;default:pc(_,V,oe,Te,w)}c=c.sibling}}function mu(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,g=c,w=g.flags;switch(g.tag){case 22:mu(h,g),w&2048&&Cx(g.alternate,g);break;case 24:mu(h,g),w&2048&&Ax(g.alternate,g);break;default:mu(h,g)}c=c.sibling}}var gu=8192;function mc(o){if(o.subtreeFlags&gu)for(o=o.child;o!==null;)fC(o),o=o.sibling}function fC(o){switch(o.tag){case 26:mc(o),o.flags&gu&&o.memoizedState!==null&&QB(Di,o.memoizedState,o.memoizedProps);break;case 5:mc(o);break;case 3:case 4:var c=Di;Di=mp(o.stateNode.containerInfo),mc(o),Di=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=gu,gu=16777216,mc(o),gu=c):mc(o));break;default:mc(o)}}function hC(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function xu(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];Fn=g,mC(g,o)}hC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)pC(o),o=o.sibling}function pC(o){switch(o.tag){case 0:case 11:case 15:xu(o),o.flags&2048&&xo(9,o,o.return);break;case 3:xu(o);break;case 12:xu(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,np(o)):xu(o);break;default:xu(o)}}function np(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];Fn=g,mC(g,o)}hC(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:xo(8,c,c.return),np(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,np(c));break;default:np(c)}o=o.sibling}}function mC(o,c){for(;Fn!==null;){var h=Fn;switch(h.tag){case 0:case 11:case 15:xo(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Zd(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,Fn=g;else e:for(h=o;Fn!==null;){g=Fn;var w=g.sibling,_=g.return;if(sC(g),g===h){Fn=null;break e}if(w!==null){w.return=_,Fn=w;break e}Fn=_}}}var hB={getCacheForType:function(o){var c=ia(_n),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h}},pB=typeof WeakMap=="function"?WeakMap:Map,Ir=0,Qr=null,dr=null,xr=0,Dr=0,Xa=null,bo=!1,gc=!1,Ex=!1,Rs=0,un=0,jo=0,ul=0,Ox=0,pi=0,xc=0,yu=null,Da=null,_x=!1,kx=0,ap=1/0,ip=null,wo=null,Gn=0,So=null,yc=null,vc=0,Ix=0,Dx=null,gC=null,vu=0,Rx=null;function Qa(){if((Ir&2)!==0&&xr!==0)return xr&-xr;if(R.T!==null){var o=sc;return o!==0?o:$x()}return mt()}function xC(){pi===0&&(pi=(xr&536870912)===0||Nr?me():536870912);var o=hi.current;return o!==null&&(o.flags|=32),pi}function Ja(o,c,h){(o===Qr&&(Dr===2||Dr===9)||o.cancelPendingCommit!==null)&&(bc(o,0),No(o,xr,pi,!1)),it(o,h),((Ir&2)===0||o!==Qr)&&(o===Qr&&((Ir&2)===0&&(ul|=h),un===4&&No(o,xr,pi,!1)),is(o))}function yC(o,c,h){if((Ir&6)!==0)throw Error(a(327));var g=!h&&(c&124)===0&&(c&o.expiredLanes)===0||Ye(o,c),w=g?xB(o,c):Bx(o,c,!0),_=g;do{if(w===0){gc&&!g&&No(o,c,0,!1);break}else{if(h=o.current.alternate,_&&!mB(h)){w=Bx(o,c,!1),_=!1;continue}if(w===2){if(_=c,o.errorRecoveryDisabledLanes&_)var V=0;else V=o.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){c=V;e:{var oe=o;w=yu;var Te=oe.current.memoizedState.isDehydrated;if(Te&&(bc(oe,V).flags|=256),V=Bx(oe,V,!1),V!==2){if(Ex&&!Te){oe.errorRecoveryDisabledLanes|=_,ul|=_,w=4;break e}_=Da,Da=w,_!==null&&(Da===null?Da=_:Da.push.apply(Da,_))}w=V}if(_=!1,w!==2)continue}}if(w===1){bc(o,0),No(o,c,0,!0);break}e:{switch(g=o,_=w,_){case 0:case 1:throw Error(a(345));case 4:if((c&4194048)!==c)break;case 6:No(g,c,pi,!bo);break e;case 2:Da=null;break;case 3:case 5:break;default:throw Error(a(329))}if((c&62914560)===c&&(w=kx+300-Ae(),10<w)){if(No(g,c,pi,!bo),De(g,0,!0)!==0)break e;g.timeoutHandle=KC(vC.bind(null,g,h,Da,ip,_x,c,pi,ul,xc,bo,_,2,-0,0),w);break e}vC(g,h,Da,ip,_x,c,pi,ul,xc,bo,_,0,-0,0)}}break}while(!0);is(o)}function vC(o,c,h,g,w,_,V,oe,Te,Ue,st,dt,He,Ke){if(o.timeoutHandle=-1,dt=c.subtreeFlags,(dt&8192||(dt&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:XB},fC(c),dt=JB(),dt!==null)){o.cancelPendingCommit=dt(CC.bind(null,o,c,_,h,g,w,V,oe,Te,st,1,He,Ke)),No(o,_,V,!Ue);return}CC(o,c,_,h,g,w,V,oe,Te)}function mB(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var w=h[g],_=w.getSnapshot;w=w.value;try{if(!Ga(_(),w))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function No(o,c,h,g){c&=~Ox,c&=~ul,o.suspendedLanes|=c,o.pingedLanes&=~c,g&&(o.warmLanes|=c),g=o.expirationTimes;for(var w=c;0<w;){var _=31-Oe(w),V=1<<_;g[_]=-1,w&=~V}h!==0&&Nt(o,h,c)}function sp(){return(Ir&6)===0?(bu(0),!1):!0}function Px(){if(dr!==null){if(Dr===0)var o=dr.return;else o=dr,Cs=il=null,J0(o),fc=null,du=0,o=dr;for(;o!==null;)JT(o.alternate,o),o=o.return;dr=null}}function bc(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,DB(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Px(),Qr=o,dr=h=Ss(o.current,null),xr=c,Dr=0,Xa=null,bo=!1,gc=Ye(o,c),Ex=!1,xc=pi=Ox=ul=jo=un=0,Da=yu=null,_x=!1,(c&8)!==0&&(c|=c&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=c;0<g;){var w=31-Oe(g),_=1<<w;c|=o[w],g&=~_}return Rs=c,Eh(),h}function bC(o,c){or=null,R.H=Kh,c===tu||c===Bh?(c=BN(),Dr=3):c===RN?(c=BN(),Dr=4):Dr=c===FT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Xa=c,dr===null&&(un=1,Jh(o,ci(c,o.current)))}function jC(){var o=R.H;return R.H=Kh,o===null?Kh:o}function wC(){var o=R.A;return R.A=hB,o}function Mx(){un=4,bo||(xr&4194048)!==xr&&hi.current!==null||(gc=!0),(jo&134217727)===0&&(ul&134217727)===0||Qr===null||No(Qr,xr,pi,!1)}function Bx(o,c,h){var g=Ir;Ir|=2;var w=jC(),_=wC();(Qr!==o||xr!==c)&&(ip=null,bc(o,c)),c=!1;var V=un;e:do try{if(Dr!==0&&dr!==null){var oe=dr,Te=Xa;switch(Dr){case 8:Px(),V=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(c=!0);var Ue=Dr;if(Dr=0,Xa=null,jc(o,oe,Te,Ue),h&&gc){V=0;break e}break;default:Ue=Dr,Dr=0,Xa=null,jc(o,oe,Te,Ue)}}gB(),V=un;break}catch(st){bC(o,st)}while(!0);return c&&o.shellSuspendCounter++,Cs=il=null,Ir=g,R.H=w,R.A=_,dr===null&&(Qr=null,xr=0,Eh()),V}function gB(){for(;dr!==null;)SC(dr)}function xB(o,c){var h=Ir;Ir|=2;var g=jC(),w=wC();Qr!==o||xr!==c?(ip=null,ap=Ae()+500,bc(o,c)):gc=Ye(o,c);e:do try{if(Dr!==0&&dr!==null){c=dr;var _=Xa;t:switch(Dr){case 1:Dr=0,Xa=null,jc(o,c,_,1);break;case 2:case 9:if(PN(_)){Dr=0,Xa=null,NC(c);break}c=function(){Dr!==2&&Dr!==9||Qr!==o||(Dr=7),is(o)},_.then(c,c);break e;case 3:Dr=7;break e;case 4:Dr=5;break e;case 7:PN(_)?(Dr=0,Xa=null,NC(c)):(Dr=0,Xa=null,jc(o,c,_,7));break;case 5:var V=null;switch(dr.tag){case 26:V=dr.memoizedState;case 5:case 27:var oe=dr;if(!V||iA(V)){Dr=0,Xa=null;var Te=oe.sibling;if(Te!==null)dr=Te;else{var Ue=oe.return;Ue!==null?(dr=Ue,op(Ue)):dr=null}break t}}Dr=0,Xa=null,jc(o,c,_,5);break;case 6:Dr=0,Xa=null,jc(o,c,_,6);break;case 8:Px(),un=6;break e;default:throw Error(a(462))}}yB();break}catch(st){bC(o,st)}while(!0);return Cs=il=null,R.H=g,R.A=w,Ir=h,dr!==null?0:(Qr=null,xr=0,Eh(),un)}function yB(){for(;dr!==null&&!Le();)SC(dr)}function SC(o){var c=XT(o.alternate,o,Rs);o.memoizedProps=o.pendingProps,c===null?op(o):dr=c}function NC(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=WT(h,c,c.pendingProps,c.type,void 0,xr);break;case 11:c=WT(h,c,c.pendingProps,c.type.render,c.ref,xr);break;case 5:J0(c);default:JT(h,c),c=dr=TN(c,Rs),c=XT(h,c,Rs)}o.memoizedProps=o.pendingProps,c===null?op(o):dr=c}function jc(o,c,h,g){Cs=il=null,J0(c),fc=null,du=0;var w=c.return;try{if(oB(o,w,c,h,xr)){un=1,Jh(o,ci(h,o.current)),dr=null;return}}catch(_){if(w!==null)throw dr=w,_;un=1,Jh(o,ci(h,o.current)),dr=null;return}c.flags&32768?(Nr||g===1?o=!0:gc||(xr&536870912)!==0?o=!1:(bo=o=!0,(g===2||g===9||g===3||g===6)&&(g=hi.current,g!==null&&g.tag===13&&(g.flags|=16384))),TC(c,o)):op(c)}function op(o){var c=o;do{if((c.flags&32768)!==0){TC(c,bo);return}o=c.return;var h=cB(c.alternate,c,Rs);if(h!==null){dr=h;return}if(c=c.sibling,c!==null){dr=c;return}dr=c=o}while(c!==null);un===0&&(un=5)}function TC(o,c){do{var h=dB(o.alternate,o);if(h!==null){h.flags&=32767,dr=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){dr=o;return}dr=o=h}while(o!==null);un=6,dr=null}function CC(o,c,h,g,w,_,V,oe,Te){o.cancelPendingCommit=null;do lp();while(Gn!==0);if((Ir&6)!==0)throw Error(a(327));if(c!==null){if(c===o.current)throw Error(a(177));if(_=c.lanes|c.childLanes,_|=A0,pt(o,h,_,V,oe,Te),o===Qr&&(dr=Qr=null,xr=0),yc=c,So=o,vc=h,Ix=_,Dx=w,gC=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,wB(X,function(){return kC(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=R.T,R.T=null,w=W.p,W.p=2,V=Ir,Ir|=4;try{uB(o,c,h)}finally{Ir=V,W.p=w,R.T=g}}Gn=1,AC(),EC(),OC()}}function AC(){if(Gn===1){Gn=0;var o=So,c=yc,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=R.T,R.T=null;var g=W.p;W.p=2;var w=Ir;Ir|=4;try{cC(c,o);var _=Yx,V=mN(o.containerInfo),oe=_.focusedElem,Te=_.selectionRange;if(V!==oe&&oe&&oe.ownerDocument&&pN(oe.ownerDocument.documentElement,oe)){if(Te!==null&&w0(oe)){var Ue=Te.start,st=Te.end;if(st===void 0&&(st=Ue),"selectionStart"in oe)oe.selectionStart=Ue,oe.selectionEnd=Math.min(st,oe.value.length);else{var dt=oe.ownerDocument||document,He=dt&&dt.defaultView||window;if(He.getSelection){var Ke=He.getSelection(),Kt=oe.textContent.length,qt=Math.min(Te.start,Kt),qr=Te.end===void 0?qt:Math.min(Te.end,Kt);!Ke.extend&&qt>qr&&(V=qr,qr=qt,qt=V);var Re=hN(oe,qt),_e=hN(oe,qr);if(Re&&_e&&(Ke.rangeCount!==1||Ke.anchorNode!==Re.node||Ke.anchorOffset!==Re.offset||Ke.focusNode!==_e.node||Ke.focusOffset!==_e.offset)){var Fe=dt.createRange();Fe.setStart(Re.node,Re.offset),Ke.removeAllRanges(),qt>qr?(Ke.addRange(Fe),Ke.extend(_e.node,_e.offset)):(Fe.setEnd(_e.node,_e.offset),Ke.addRange(Fe))}}}}for(dt=[],Ke=oe;Ke=Ke.parentNode;)Ke.nodeType===1&&dt.push({element:Ke,left:Ke.scrollLeft,top:Ke.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<dt.length;oe++){var ct=dt[oe];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}bp=!!Vx,Yx=Vx=null}finally{Ir=w,W.p=g,R.T=h}}o.current=c,Gn=2}}function EC(){if(Gn===2){Gn=0;var o=So,c=yc,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=R.T,R.T=null;var g=W.p;W.p=2;var w=Ir;Ir|=4;try{iC(o,c.alternate,c)}finally{Ir=w,W.p=g,R.T=h}}Gn=3}}function OC(){if(Gn===4||Gn===3){Gn=0,ne();var o=So,c=yc,h=vc,g=gC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Gn=5:(Gn=0,yc=So=null,_C(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(wo=null),jt(h),c=c.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(tt,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=R.T,w=W.p,W.p=2,R.T=null;try{for(var _=o.onRecoverableError,V=0;V<g.length;V++){var oe=g[V];_(oe.value,{componentStack:oe.stack})}}finally{R.T=c,W.p=w}}(vc&3)!==0&&lp(),is(o),w=o.pendingLanes,(h&4194090)!==0&&(w&42)!==0?o===Rx?vu++:(vu=0,Rx=o):vu=0,bu(0)}}function _C(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Zd(c)))}function lp(o){return AC(),EC(),OC(),kC()}function kC(){if(Gn!==5)return!1;var o=So,c=Ix;Ix=0;var h=jt(vc),g=R.T,w=W.p;try{W.p=32>h?32:h,R.T=null,h=Dx,Dx=null;var _=So,V=vc;if(Gn=0,yc=So=null,vc=0,(Ir&6)!==0)throw Error(a(331));var oe=Ir;if(Ir|=4,pC(_.current),uC(_,_.current,V,h),Ir=oe,bu(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(tt,_)}catch{}return!0}finally{W.p=w,R.T=g,_C(o,c)}}function IC(o,c,h){c=ci(h,c),c=fx(o.stateNode,c,2),o=ho(o,c,2),o!==null&&(it(o,2),is(o))}function Kr(o,c,h){if(o.tag===3)IC(o,o,h);else for(;c!==null;){if(c.tag===3){IC(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(wo===null||!wo.has(g))){o=ci(h,o),h=MT(2),g=ho(c,h,2),g!==null&&(BT(h,g,c,o),it(g,2),is(g));break}}c=c.return}}function Fx(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new pB;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(Ex=!0,w.add(h),o=vB.bind(null,o,c,h),c.then(o,o))}function vB(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Qr===o&&(xr&h)===h&&(un===4||un===3&&(xr&62914560)===xr&&300>Ae()-kx?(Ir&2)===0&&bc(o,0):Ox|=h,xc===xr&&(xc=0)),is(o)}function DC(o,c){c===0&&(c=ke()),o=rc(o,c),o!==null&&(it(o,c),is(o))}function bB(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),DC(o,h)}function jB(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(c),DC(o,h)}function wB(o,c){return Xe(o,c)}var cp=null,wc=null,Lx=!1,dp=!1,zx=!1,fl=0;function is(o){o!==wc&&o.next===null&&(wc===null?cp=wc=o:wc=wc.next=o),dp=!0,Lx||(Lx=!0,NB())}function bu(o,c){if(!zx&&dp){zx=!0;do for(var h=!1,g=cp;g!==null;){if(o!==0){var w=g.pendingLanes;if(w===0)var _=0;else{var V=g.suspendedLanes,oe=g.pingedLanes;_=(1<<31-Oe(42|o)+1)-1,_&=w&~(V&~oe),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,BC(g,_))}else _=xr,_=De(g,g===Qr?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Ye(g,_)||(h=!0,BC(g,_));g=g.next}while(h);zx=!1}}function SB(){RC()}function RC(){dp=Lx=!1;var o=0;fl!==0&&(IB()&&(o=fl),fl=0);for(var c=Ae(),h=null,g=cp;g!==null;){var w=g.next,_=PC(g,c);_===0?(g.next=null,h===null?cp=w:h.next=w,w===null&&(wc=h)):(h=g,(o!==0||(_&3)!==0)&&(dp=!0)),g=w}bu(o)}function PC(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var V=31-Oe(_),oe=1<<V,Te=w[V];Te===-1?((oe&h)===0||(oe&g)!==0)&&(w[V]=Ft(oe,c)):Te<=c&&(o.expiredLanes|=oe),_&=~oe}if(c=Qr,h=xr,h=De(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,h===0||o===c&&(Dr===2||Dr===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&Ce(g),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Ye(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(g!==null&&Ce(g),jt(h)){case 2:case 8:h=ce;break;case 32:h=X;break;case 268435456:h=J;break;default:h=X}return g=MC.bind(null,o),h=Xe(h,g),o.callbackPriority=c,o.callbackNode=h,c}return g!==null&&g!==null&&Ce(g),o.callbackPriority=2,o.callbackNode=null,2}function MC(o,c){if(Gn!==0&&Gn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(lp()&&o.callbackNode!==h)return null;var g=xr;return g=De(o,o===Qr?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(yC(o,g,c),PC(o,Ae()),o.callbackNode!=null&&o.callbackNode===h?MC.bind(null,o):null)}function BC(o,c){if(lp())return null;yC(o,c,!0)}function NB(){RB(function(){(Ir&6)!==0?Xe(te,SB):RC()})}function $x(){return fl===0&&(fl=me()),fl}function FC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ql(""+o)}function LC(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function TB(o,c,h,g,w){if(c==="submit"&&h&&h.stateNode===w){var _=FC((w[Gt]||null).action),V=g.submitter;V&&(c=(c=V[Gt]||null)?FC(c.formAction):V.getAttribute("formAction"),c!==null&&(_=c,V=null));var oe=new ya("action","action",null,g,w);o.push({event:oe,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(fl!==0){var Te=V?LC(w,V):new FormData(w);ox(h,{pending:!0,data:Te,method:w.method,action:_},null,Te)}}else typeof _=="function"&&(oe.preventDefault(),Te=V?LC(w,V):new FormData(w),ox(h,{pending:!0,data:Te,method:w.method,action:_},_,Te))},currentTarget:w}]})}}for(var Ux=0;Ux<C0.length;Ux++){var qx=C0[Ux],CB=qx.toLowerCase(),AB=qx[0].toUpperCase()+qx.slice(1);Ii(CB,"on"+AB)}Ii(yN,"onAnimationEnd"),Ii(vN,"onAnimationIteration"),Ii(bN,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(WM,"onTransitionRun"),Ii(HM,"onTransitionStart"),Ii(GM,"onTransitionCancel"),Ii(jN,"onTransitionEnd"),yt("onMouseEnter",["mouseout","mouseover"]),yt("onMouseLeave",["mouseout","mouseover"]),yt("onPointerEnter",["pointerout","pointerover"]),yt("onPointerLeave",["pointerout","pointerover"]),ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function zC(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],w=g.event;g=g.listeners;e:{var _=void 0;if(c)for(var V=g.length-1;0<=V;V--){var oe=g[V],Te=oe.instance,Ue=oe.currentTarget;if(oe=oe.listener,Te!==_&&w.isPropagationStopped())break e;_=oe,w.currentTarget=Ue;try{_(w)}catch(st){Qh(st)}w.currentTarget=null,_=Te}else for(V=0;V<g.length;V++){if(oe=g[V],Te=oe.instance,Ue=oe.currentTarget,oe=oe.listener,Te!==_&&w.isPropagationStopped())break e;_=oe,w.currentTarget=Ue;try{_(w)}catch(st){Qh(st)}w.currentTarget=null,_=Te}}}}function ur(o,c){var h=c[ir];h===void 0&&(h=c[ir]=new Set);var g=o+"__bubble";h.has(g)||($C(c,o,2,!1),h.add(g))}function Wx(o,c,h){var g=0;c&&(g|=4),$C(h,o,g,c)}var up="_reactListening"+Math.random().toString(36).slice(2);function Hx(o){if(!o[up]){o[up]=!0,We.forEach(function(h){h!=="selectionchange"&&(EB.has(h)||Wx(h,!1,o),Wx(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[up]||(c[up]=!0,Wx("selectionchange",!1,c))}}function $C(o,c,h,g){switch(uA(c)){case 2:var w=tF;break;case 8:w=rF;break;default:w=iy}h=w.bind(null,c,h,o),w=void 0,!Mn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function Gx(o,c,h,g,w){var _=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var oe=g.stateNode.containerInfo;if(oe===w)break;if(V===4)for(V=g.return;V!==null;){var Te=V.tag;if((Te===3||Te===4)&&V.stateNode.containerInfo===w)return;V=V.return}for(;oe!==null;){if(V=je(oe),V===null)return;if(Te=V.tag,Te===5||Te===6||Te===26||Te===27){g=_=V;continue e}oe=oe.parentNode}}g=g.return}rr(function(){var Ue=_,st=js(h),dt=[];e:{var He=wN.get(o);if(He!==void 0){var Ke=ya,Kt=o;switch(o){case"keypress":if(es(h)===0)break e;case"keydown":case"keyup":Ke=wM;break;case"focusin":Kt="focus",Ke=x0;break;case"focusout":Kt="blur",Ke=x0;break;case"beforeblur":case"afterblur":Ke=x0;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=QS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=dM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=TM;break;case yN:case vN:case bN:Ke=hM;break;case jN:Ke=AM;break;case"scroll":case"scrollend":Ke=Xr;break;case"wheel":Ke=OM;break;case"copy":case"cut":case"paste":Ke=mM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=ZS;break;case"toggle":case"beforetoggle":Ke=kM}var qt=(c&4)!==0,qr=!qt&&(o==="scroll"||o==="scrollend"),Re=qt?He!==null?He+"Capture":null:He;qt=[];for(var _e=Ue,Fe;_e!==null;){var ct=_e;if(Fe=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Fe===null||Re===null||(ct=Er(_e,Re),ct!=null&&qt.push(wu(_e,ct,Fe))),qr)break;_e=_e.return}0<qt.length&&(He=new Ke(He,Kt,null,h,st),dt.push({event:He,listeners:qt}))}}if((c&7)===0){e:{if(He=o==="mouseover"||o==="pointerover",Ke=o==="mouseout"||o==="pointerout",He&&h!==bs&&(Kt=h.relatedTarget||h.fromElement)&&(je(Kt)||Kt[Fr]))break e;if((Ke||He)&&(He=st.window===st?st:(He=st.ownerDocument)?He.defaultView||He.parentWindow:window,Ke?(Kt=h.relatedTarget||h.toElement,Ke=Ue,Kt=Kt?je(Kt):null,Kt!==null&&(qr=s(Kt),qt=Kt.tag,Kt!==qr||qt!==5&&qt!==27&&qt!==6)&&(Kt=null)):(Ke=null,Kt=Ue),Ke!==Kt)){if(qt=QS,ct="onMouseLeave",Re="onMouseEnter",_e="mouse",(o==="pointerout"||o==="pointerover")&&(qt=ZS,ct="onPointerLeave",Re="onPointerEnter",_e="pointer"),qr=Ke==null?He:ze(Ke),Fe=Kt==null?He:ze(Kt),He=new qt(ct,_e+"leave",Ke,h,st),He.target=qr,He.relatedTarget=Fe,ct=null,je(st)===Ue&&(qt=new qt(Re,_e+"enter",Kt,h,st),qt.target=Fe,qt.relatedTarget=qr,ct=qt),qr=ct,Ke&&Kt)t:{for(qt=Ke,Re=Kt,_e=0,Fe=qt;Fe;Fe=Sc(Fe))_e++;for(Fe=0,ct=Re;ct;ct=Sc(ct))Fe++;for(;0<_e-Fe;)qt=Sc(qt),_e--;for(;0<Fe-_e;)Re=Sc(Re),Fe--;for(;_e--;){if(qt===Re||Re!==null&&qt===Re.alternate)break t;qt=Sc(qt),Re=Sc(Re)}qt=null}else qt=null;Ke!==null&&UC(dt,He,Ke,qt,!1),Kt!==null&&qr!==null&&UC(dt,qr,Kt,qt,!0)}}e:{if(He=Ue?ze(Ue):window,Ke=He.nodeName&&He.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&He.type==="file")var Dt=oN;else if(iN(He))if(lN)Dt=$M;else{Dt=LM;var cr=FM}else Ke=He.nodeName,!Ke||Ke.toLowerCase()!=="input"||He.type!=="checkbox"&&He.type!=="radio"?Ue&&Wa(Ue.elementType)&&(Dt=oN):Dt=zM;if(Dt&&(Dt=Dt(o,Ue))){sN(dt,Dt,h,st);break e}cr&&cr(o,He,Ue),o==="focusout"&&Ue&&He.type==="number"&&Ue.memoizedProps.value!=null&&It(He,"number",He.value)}switch(cr=Ue?ze(Ue):window,o){case"focusin":(iN(cr)||cr.contentEditable==="true")&&(Zl=cr,S0=Ue,Vd=null);break;case"focusout":Vd=S0=Zl=null;break;case"mousedown":N0=!0;break;case"contextmenu":case"mouseup":case"dragend":N0=!1,gN(dt,h,st);break;case"selectionchange":if(qM)break;case"keydown":case"keyup":gN(dt,h,st)}var Lt;if(v0)e:{switch(o){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else Jl?nN(o,h)&&(Wt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Wt="onCompositionStart");Wt&&(eN&&h.locale!=="ko"&&(Jl||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&Jl&&(Lt=_a()):(rn=st,xa="value"in rn?rn.value:rn.textContent,Jl=!0)),cr=fp(Ue,Wt),0<cr.length&&(Wt=new JS(Wt,o,null,h,st),dt.push({event:Wt,listeners:cr}),Lt?Wt.data=Lt:(Lt=aN(h),Lt!==null&&(Wt.data=Lt)))),(Lt=DM?RM(o,h):PM(o,h))&&(Wt=fp(Ue,"onBeforeInput"),0<Wt.length&&(cr=new JS("onBeforeInput","beforeinput",null,h,st),dt.push({event:cr,listeners:Wt}),cr.data=Lt)),TB(dt,o,Ue,h,st)}zC(dt,c)})}function wu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function fp(o,c){for(var h=c+"Capture",g=[];o!==null;){var w=o,_=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||_===null||(w=Er(o,h),w!=null&&g.unshift(wu(o,w,_)),w=Er(o,c),w!=null&&g.push(wu(o,w,_))),o.tag===3)return g;o=o.return}return[]}function Sc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function UC(o,c,h,g,w){for(var _=c._reactName,V=[];h!==null&&h!==g;){var oe=h,Te=oe.alternate,Ue=oe.stateNode;if(oe=oe.tag,Te!==null&&Te===g)break;oe!==5&&oe!==26&&oe!==27||Ue===null||(Te=Ue,w?(Ue=Er(h,_),Ue!=null&&V.unshift(wu(h,Ue,Te))):w||(Ue=Er(h,_),Ue!=null&&V.push(wu(h,Ue,Te)))),h=h.return}V.length!==0&&o.push({event:c,listeners:V})}var OB=/\r\n?/g,_B=/\u0000|\uFFFD/g;function qC(o){return(typeof o=="string"?o:""+o).replace(OB,`
`).replace(_B,"")}function WC(o,c){return c=qC(c),qC(o)===c}function hp(){}function Ur(o,c,h,g,w,_){switch(h){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||Ct(o,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&Ct(o,""+g);break;case"className":Ar(o,"class",g);break;case"tabIndex":Ar(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(o,h,g);break;case"style":qa(o,g,_);break;case"data":if(c!=="object"){Ar(o,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=Ql(""+g),o.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(c!=="input"&&Ur(o,c,"name",w.name,w,null),Ur(o,c,"formEncType",w.formEncType,w,null),Ur(o,c,"formMethod",w.formMethod,w,null),Ur(o,c,"formTarget",w.formTarget,w,null)):(Ur(o,c,"encType",w.encType,w,null),Ur(o,c,"method",w.method,w,null),Ur(o,c,"target",w.target,w,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=Ql(""+g),o.setAttribute(h,g);break;case"onClick":g!=null&&(o.onclick=hp);break;case"onScroll":g!=null&&ur("scroll",o);break;case"onScrollEnd":g!=null&&ur("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(h=g.__html,h!=null){if(w.children!=null)throw Error(a(60));o.innerHTML=h}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}h=Ql(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""+g):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":g===!0?o.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,g):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(h,g):o.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(h):o.setAttribute(h,g);break;case"popover":ur("beforetoggle",o),ur("toggle",o),Cr(o,"popover",g);break;case"xlinkActuate":Lr(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Lr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Lr(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Lr(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Lr(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Lr(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Lr(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Lr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Lr(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Cr(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Qo.get(h)||h,Cr(o,h,g))}}function Kx(o,c,h,g,w,_){switch(h){case"style":qa(o,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(h=g.__html,h!=null){if(w.children!=null)throw Error(a(60));o.innerHTML=h}}break;case"children":typeof g=="string"?Ct(o,g):(typeof g=="number"||typeof g=="bigint")&&Ct(o,""+g);break;case"onScroll":g!=null&&ur("scroll",o);break;case"onScrollEnd":g!=null&&ur("scrollend",o);break;case"onClick":g!=null&&(o.onclick=hp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qe.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(w=h.endsWith("Capture"),c=h.slice(2,w?h.length-7:void 0),_=o[Gt]||null,_=_!=null?_[h]:null,typeof _=="function"&&o.removeEventListener(c,_,w),typeof g=="function")){typeof _!="function"&&_!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,g,w);break e}h in o?o[h]=g:g===!0?o.setAttribute(h,""):Cr(o,h,g)}}}function Kn(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ur("error",o),ur("load",o);var g=!1,w=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var V=h[_];if(V!=null)switch(_){case"src":g=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:Ur(o,c,_,V,h,null)}}w&&Ur(o,c,"srcSet",h.srcSet,h,null),g&&Ur(o,c,"src",h.src,h,null);return;case"input":ur("invalid",o);var oe=_=V=w=null,Te=null,Ue=null;for(g in h)if(h.hasOwnProperty(g)){var st=h[g];if(st!=null)switch(g){case"name":w=st;break;case"type":V=st;break;case"checked":Te=st;break;case"defaultChecked":Ue=st;break;case"value":_=st;break;case"defaultValue":oe=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(a(137,c));break;default:Ur(o,c,g,st,h,null)}}nt(o,_,oe,Te,Ue,V,w,!1),Z(o);return;case"select":ur("invalid",o),g=V=_=null;for(w in h)if(h.hasOwnProperty(w)&&(oe=h[w],oe!=null))switch(w){case"value":_=oe;break;case"defaultValue":V=oe;break;case"multiple":g=oe;default:Ur(o,c,w,oe,h,null)}c=_,h=V,o.multiple=!!g,c!=null?Mt(o,!!g,c,!1):h!=null&&Mt(o,!!g,h,!0);return;case"textarea":ur("invalid",o),_=w=g=null;for(V in h)if(h.hasOwnProperty(V)&&(oe=h[V],oe!=null))switch(V){case"value":g=oe;break;case"defaultValue":w=oe;break;case"children":_=oe;break;case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(91));break;default:Ur(o,c,V,oe,h,null)}er(o,g,w,_),Z(o);return;case"option":for(Te in h)if(h.hasOwnProperty(Te)&&(g=h[Te],g!=null))switch(Te){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Ur(o,c,Te,g,h,null)}return;case"dialog":ur("beforetoggle",o),ur("toggle",o),ur("cancel",o),ur("close",o);break;case"iframe":case"object":ur("load",o);break;case"video":case"audio":for(g=0;g<ju.length;g++)ur(ju[g],o);break;case"image":ur("error",o),ur("load",o);break;case"details":ur("toggle",o);break;case"embed":case"source":case"link":ur("error",o),ur("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in h)if(h.hasOwnProperty(Ue)&&(g=h[Ue],g!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:Ur(o,c,Ue,g,h,null)}return;default:if(Wa(c)){for(st in h)h.hasOwnProperty(st)&&(g=h[st],g!==void 0&&Kx(o,c,st,g,h,void 0));return}}for(oe in h)h.hasOwnProperty(oe)&&(g=h[oe],g!=null&&Ur(o,c,oe,g,h,null))}function kB(o,c,h,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,_=null,V=null,oe=null,Te=null,Ue=null,st=null;for(Ke in h){var dt=h[Ke];if(h.hasOwnProperty(Ke)&&dt!=null)switch(Ke){case"checked":break;case"value":break;case"defaultValue":Te=dt;default:g.hasOwnProperty(Ke)||Ur(o,c,Ke,null,g,dt)}}for(var He in g){var Ke=g[He];if(dt=h[He],g.hasOwnProperty(He)&&(Ke!=null||dt!=null))switch(He){case"type":_=Ke;break;case"name":w=Ke;break;case"checked":Ue=Ke;break;case"defaultChecked":st=Ke;break;case"value":V=Ke;break;case"defaultValue":oe=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(a(137,c));break;default:Ke!==dt&&Ur(o,c,He,Ke,g,dt)}}lt(o,V,oe,Te,Ue,st,_,w);return;case"select":Ke=V=oe=He=null;for(_ in h)if(Te=h[_],h.hasOwnProperty(_)&&Te!=null)switch(_){case"value":break;case"multiple":Ke=Te;default:g.hasOwnProperty(_)||Ur(o,c,_,null,g,Te)}for(w in g)if(_=g[w],Te=h[w],g.hasOwnProperty(w)&&(_!=null||Te!=null))switch(w){case"value":He=_;break;case"defaultValue":oe=_;break;case"multiple":V=_;default:_!==Te&&Ur(o,c,w,_,g,Te)}c=oe,h=V,g=Ke,He!=null?Mt(o,!!h,He,!1):!!g!=!!h&&(c!=null?Mt(o,!!h,c,!0):Mt(o,!!h,h?[]:"",!1));return;case"textarea":Ke=He=null;for(oe in h)if(w=h[oe],h.hasOwnProperty(oe)&&w!=null&&!g.hasOwnProperty(oe))switch(oe){case"value":break;case"children":break;default:Ur(o,c,oe,null,g,w)}for(V in g)if(w=g[V],_=h[V],g.hasOwnProperty(V)&&(w!=null||_!=null))switch(V){case"value":He=w;break;case"defaultValue":Ke=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:w!==_&&Ur(o,c,V,w,g,_)}Yr(o,He,Ke);return;case"option":for(var Kt in h)if(He=h[Kt],h.hasOwnProperty(Kt)&&He!=null&&!g.hasOwnProperty(Kt))switch(Kt){case"selected":o.selected=!1;break;default:Ur(o,c,Kt,null,g,He)}for(Te in g)if(He=g[Te],Ke=h[Te],g.hasOwnProperty(Te)&&He!==Ke&&(He!=null||Ke!=null))switch(Te){case"selected":o.selected=He&&typeof He!="function"&&typeof He!="symbol";break;default:Ur(o,c,Te,He,g,Ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qt in h)He=h[qt],h.hasOwnProperty(qt)&&He!=null&&!g.hasOwnProperty(qt)&&Ur(o,c,qt,null,g,He);for(Ue in g)if(He=g[Ue],Ke=h[Ue],g.hasOwnProperty(Ue)&&He!==Ke&&(He!=null||Ke!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(a(137,c));break;default:Ur(o,c,Ue,He,g,Ke)}return;default:if(Wa(c)){for(var qr in h)He=h[qr],h.hasOwnProperty(qr)&&He!==void 0&&!g.hasOwnProperty(qr)&&Kx(o,c,qr,void 0,g,He);for(st in g)He=g[st],Ke=h[st],!g.hasOwnProperty(st)||He===Ke||He===void 0&&Ke===void 0||Kx(o,c,st,He,g,Ke);return}}for(var Re in h)He=h[Re],h.hasOwnProperty(Re)&&He!=null&&!g.hasOwnProperty(Re)&&Ur(o,c,Re,null,g,He);for(dt in g)He=g[dt],Ke=h[dt],!g.hasOwnProperty(dt)||He===Ke||He==null&&Ke==null||Ur(o,c,dt,He,g,Ke)}var Vx=null,Yx=null;function pp(o){return o.nodeType===9?o:o.ownerDocument}function HC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GC(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Xx(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Qx=null;function IB(){var o=window.event;return o&&o.type==="popstate"?o===Qx?!1:(Qx=o,!0):(Qx=null,!1)}var KC=typeof setTimeout=="function"?setTimeout:void 0,DB=typeof clearTimeout=="function"?clearTimeout:void 0,VC=typeof Promise=="function"?Promise:void 0,RB=typeof queueMicrotask=="function"?queueMicrotask:typeof VC<"u"?function(o){return VC.resolve(null).then(o).catch(PB)}:KC;function PB(o){setTimeout(function(){throw o})}function To(o){return o==="head"}function YC(o,c){var h=c,g=0,w=0;do{var _=h.nextSibling;if(o.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(0<g&&8>g){h=g;var V=o.ownerDocument;if(h&1&&Su(V.documentElement),h&2&&Su(V.body),h&4)for(h=V.head,Su(h),V=h.firstChild;V;){var oe=V.nextSibling,Te=V.nodeName;V[de]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&V.rel.toLowerCase()==="stylesheet"||h.removeChild(V),V=oe}}if(w===0){o.removeChild(_),ku(c);return}w--}else h==="$"||h==="$?"||h==="$!"?w++:g=h.charCodeAt(0)-48;else g=0;h=_}while(h);ku(c)}function Jx(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Jx(h),he(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function MB(o,c,h,g){for(;o.nodeType===1;){var w=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[de])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var _=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Ri(o.nextSibling),o===null)break}return null}function BB(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Ri(o.nextSibling),o===null))return null;return o}function Zx(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function FB(o,c){var h=o.ownerDocument;if(o.data!=="$?"||h.readyState==="complete")c();else{var g=function(){c(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function Ri(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var ey=null;function XC(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}function QC(o,c,h){switch(c=pp(h),o){case"html":if(o=c.documentElement,!o)throw Error(a(452));return o;case"head":if(o=c.head,!o)throw Error(a(453));return o;case"body":if(o=c.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function Su(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);he(o)}var mi=new Map,JC=new Set;function mp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ps=W.d;W.d={f:LB,r:zB,D:$B,C:UB,L:qB,m:WB,X:GB,S:HB,M:KB};function LB(){var o=Ps.f(),c=sp();return o||c}function zB(o){var c=we(o);c!==null&&c.tag===5&&c.type==="form"?yT(c):Ps.r(o)}var Nc=typeof document>"u"?null:document;function ZC(o,c,h){var g=Nc;if(g&&typeof c=="string"&&c){var w=Be(c);w='link[rel="'+o+'"][href="'+w+'"]',typeof h=="string"&&(w+='[crossorigin="'+h+'"]'),JC.has(w)||(JC.add(w),o={rel:o,crossOrigin:h,href:c},g.querySelector(w)===null&&(c=g.createElement("link"),Kn(c,"link",o),Me(c),g.head.appendChild(c)))}}function $B(o){Ps.D(o),ZC("dns-prefetch",o,null)}function UB(o,c){Ps.C(o,c),ZC("preconnect",o,c)}function qB(o,c,h){Ps.L(o,c,h);var g=Nc;if(g&&o&&c){var w='link[rel="preload"][as="'+Be(c)+'"]';c==="image"&&h&&h.imageSrcSet?(w+='[imagesrcset="'+Be(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(w+='[imagesizes="'+Be(h.imageSizes)+'"]')):w+='[href="'+Be(o)+'"]';var _=w;switch(c){case"style":_=Tc(o);break;case"script":_=Cc(o)}mi.has(_)||(o=p({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),mi.set(_,o),g.querySelector(w)!==null||c==="style"&&g.querySelector(Nu(_))||c==="script"&&g.querySelector(Tu(_))||(c=g.createElement("link"),Kn(c,"link",o),Me(c),g.head.appendChild(c)))}}function WB(o,c){Ps.m(o,c);var h=Nc;if(h&&o){var g=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+Be(g)+'"][href="'+Be(o)+'"]',_=w;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Cc(o)}if(!mi.has(_)&&(o=p({rel:"modulepreload",href:o},c),mi.set(_,o),h.querySelector(w)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Tu(_)))return}g=h.createElement("link"),Kn(g,"link",o),Me(g),h.head.appendChild(g)}}}function HB(o,c,h){Ps.S(o,c,h);var g=Nc;if(g&&o){var w=et(g).hoistableStyles,_=Tc(o);c=c||"default";var V=w.get(_);if(!V){var oe={loading:0,preload:null};if(V=g.querySelector(Nu(_)))oe.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":c},h),(h=mi.get(_))&&ty(o,h);var Te=V=g.createElement("link");Me(Te),Kn(Te,"link",o),Te._p=new Promise(function(Ue,st){Te.onload=Ue,Te.onerror=st}),Te.addEventListener("load",function(){oe.loading|=1}),Te.addEventListener("error",function(){oe.loading|=2}),oe.loading|=4,gp(V,c,g)}V={type:"stylesheet",instance:V,count:1,state:oe},w.set(_,V)}}}function GB(o,c){Ps.X(o,c);var h=Nc;if(h&&o){var g=et(h).hoistableScripts,w=Cc(o),_=g.get(w);_||(_=h.querySelector(Tu(w)),_||(o=p({src:o,async:!0},c),(c=mi.get(w))&&ry(o,c),_=h.createElement("script"),Me(_),Kn(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(w,_))}}function KB(o,c){Ps.M(o,c);var h=Nc;if(h&&o){var g=et(h).hoistableScripts,w=Cc(o),_=g.get(w);_||(_=h.querySelector(Tu(w)),_||(o=p({src:o,async:!0,type:"module"},c),(c=mi.get(w))&&ry(o,c),_=h.createElement("script"),Me(_),Kn(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(w,_))}}function eA(o,c,h,g){var w=(w=le.current)?mp(w):null;if(!w)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=Tc(h.href),h=et(w).hoistableStyles,g=h.get(c),g||(g={type:"style",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Tc(h.href);var _=et(w).hoistableStyles,V=_.get(o);if(V||(w=w.ownerDocument||w,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,V),(_=w.querySelector(Nu(o)))&&!_._p&&(V.instance=_,V.state.loading=5),mi.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},mi.set(o,h),_||VB(w,o,h,V.state))),c&&g===null)throw Error(a(528,""));return V}if(c&&g!==null)throw Error(a(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Cc(h),h=et(w).hoistableScripts,g=h.get(c),g||(g={type:"script",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function Tc(o){return'href="'+Be(o)+'"'}function Nu(o){return'link[rel="stylesheet"]['+o+"]"}function tA(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function VB(o,c,h,g){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=o.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Kn(c,"link",h),Me(c),o.head.appendChild(c))}function Cc(o){return'[src="'+Be(o)+'"]'}function Tu(o){return"script[async]"+o}function rA(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var g=o.querySelector('style[data-href~="'+Be(h.href)+'"]');if(g)return c.instance=g,Me(g),g;var w=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Me(g),Kn(g,"style",w),gp(g,h.precedence,o),c.instance=g;case"stylesheet":w=Tc(h.href);var _=o.querySelector(Nu(w));if(_)return c.state.loading|=4,c.instance=_,Me(_),_;g=tA(h),(w=mi.get(w))&&ty(g,w),_=(o.ownerDocument||o).createElement("link"),Me(_);var V=_;return V._p=new Promise(function(oe,Te){V.onload=oe,V.onerror=Te}),Kn(_,"link",g),c.state.loading|=4,gp(_,h.precedence,o),c.instance=_;case"script":return _=Cc(h.src),(w=o.querySelector(Tu(_)))?(c.instance=w,Me(w),w):(g=h,(w=mi.get(_))&&(g=p({},h),ry(g,w)),o=o.ownerDocument||o,w=o.createElement("script"),Me(w),Kn(w,"link",g),o.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(a(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,gp(g,h.precedence,o));return c.instance}function gp(o,c,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=g.length?g[g.length-1]:null,_=w,V=0;V<g.length;V++){var oe=g[V];if(oe.dataset.precedence===c)_=oe;else if(_!==w)break}_?_.parentNode.insertBefore(o,_.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function ty(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function ry(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var xp=null;function nA(o,c,h){if(xp===null){var g=new Map,w=xp=new Map;w.set(h,g)}else w=xp,g=w.get(h),g||(g=new Map,w.set(h,g));if(g.has(o))return g;for(g.set(o,null),h=h.getElementsByTagName(o),w=0;w<h.length;w++){var _=h[w];if(!(_[de]||_[Jt]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var V=_.getAttribute(c)||"";V=o+V;var oe=g.get(V);oe?oe.push(_):g.set(V,[_])}}return g}function aA(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function YB(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function iA(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Cu=null;function XB(){}function QB(o,c,h){if(Cu===null)throw Error(a(475));var g=Cu;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var w=Tc(h.href),_=o.querySelector(Nu(w));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(g.count++,g=yp.bind(g),o.then(g,g)),c.state.loading|=4,c.instance=_,Me(_);return}_=o.ownerDocument||o,h=tA(h),(w=mi.get(w))&&ty(h,w),_=_.createElement("link"),Me(_);var V=_;V._p=new Promise(function(oe,Te){V.onload=oe,V.onerror=Te}),Kn(_,"link",h),c.instance=_}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=yp.bind(g),o.addEventListener("load",c),o.addEventListener("error",c))}}function JB(){if(Cu===null)throw Error(a(475));var o=Cu;return o.stylesheets&&o.count===0&&ny(o,o.stylesheets),0<o.count?function(c){var h=setTimeout(function(){if(o.stylesheets&&ny(o,o.stylesheets),o.unsuspend){var g=o.unsuspend;o.unsuspend=null,g()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(h)}}:null}function yp(){if(this.count--,this.count===0){if(this.stylesheets)ny(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var vp=null;function ny(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,vp=new Map,c.forEach(ZB,o),vp=null,yp.call(o))}function ZB(o,c){if(!(c.state.loading&4)){var h=vp.get(o);if(h)var g=h.get(null);else{h=new Map,vp.set(o,h);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<w.length;_++){var V=w[_];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(h.set(V.dataset.precedence,V),g=V)}g&&h.set(null,g)}w=c.instance,V=w.getAttribute("data-precedence"),_=h.get(V)||g,_===g&&h.set(null,w),h.set(V,w),this.count++,g=yp.bind(this),w.addEventListener("load",g),w.addEventListener("error",g),_?_.parentNode.insertBefore(w,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),c.state.loading|=4}}var Au={$$typeof:O,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function eF(o,c,h,g,w,_,V,oe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=g,this.onUncaughtError=w,this.onCaughtError=_,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function sA(o,c,h,g,w,_,V,oe,Te,Ue,st,dt){return o=new eF(o,c,h,V,oe,Te,Ue,dt),c=1,_===!0&&(c|=24),_=Ka(3,null,null,c),o.current=_,_.stateNode=o,c=F0(),c.refCount++,o.pooledCache=c,c.refCount++,_.memoizedState={element:g,isDehydrated:h,cache:c},U0(_),o}function oA(o){return o?(o=nc,o):nc}function lA(o,c,h,g,w,_){w=oA(w),g.context===null?g.context=w:g.pendingContext=w,g=fo(c),g.payload={element:h},_=_===void 0?null:_,_!==null&&(g.callback=_),h=ho(o,g,c),h!==null&&(Ja(h,o,c),nu(h,o,c))}function cA(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function ay(o,c){cA(o,c),(o=o.alternate)&&cA(o,c)}function dA(o){if(o.tag===13){var c=rc(o,67108864);c!==null&&Ja(c,o,67108864),ay(o,67108864)}}var bp=!0;function tF(o,c,h,g){var w=R.T;R.T=null;var _=W.p;try{W.p=2,iy(o,c,h,g)}finally{W.p=_,R.T=w}}function rF(o,c,h,g){var w=R.T;R.T=null;var _=W.p;try{W.p=8,iy(o,c,h,g)}finally{W.p=_,R.T=w}}function iy(o,c,h,g){if(bp){var w=sy(g);if(w===null)Gx(o,c,g,jp,h),fA(o,g);else if(aF(w,o,c,h,g))g.stopPropagation();else if(fA(o,g),c&4&&-1<nF.indexOf(o)){for(;w!==null;){var _=we(w);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var V=ie(_.pendingLanes);if(V!==0){var oe=_;for(oe.pendingLanes|=2,oe.entangledLanes|=2;V;){var Te=1<<31-Oe(V);oe.entanglements[1]|=Te,V&=~Te}is(_),(Ir&6)===0&&(ap=Ae()+500,bu(0))}}break;case 13:oe=rc(_,2),oe!==null&&Ja(oe,_,2),sp(),ay(_,2)}if(_=sy(g),_===null&&Gx(o,c,g,jp,h),_===w)break;w=_}w!==null&&g.stopPropagation()}else Gx(o,c,g,null,h)}}function sy(o){return o=js(o),oy(o)}var jp=null;function oy(o){if(jp=null,o=je(o),o!==null){var c=s(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=l(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return jp=o,null}function uA(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case te:return 2;case ce:return 8;case X:case se:return 32;case J:return 268435456;default:return 32}default:return 32}}var ly=!1,Co=null,Ao=null,Eo=null,Eu=new Map,Ou=new Map,Oo=[],nF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fA(o,c){switch(o){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Eu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(c.pointerId)}}function _u(o,c,h,g,w,_){return o===null||o.nativeEvent!==_?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[w]},c!==null&&(c=we(c),c!==null&&dA(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function aF(o,c,h,g,w){switch(c){case"focusin":return Co=_u(Co,o,c,h,g,w),!0;case"dragenter":return Ao=_u(Ao,o,c,h,g,w),!0;case"mouseover":return Eo=_u(Eo,o,c,h,g,w),!0;case"pointerover":var _=w.pointerId;return Eu.set(_,_u(Eu.get(_)||null,o,c,h,g,w)),!0;case"gotpointercapture":return _=w.pointerId,Ou.set(_,_u(Ou.get(_)||null,o,c,h,g,w)),!0}return!1}function hA(o){var c=je(o.target);if(c!==null){var h=s(c);if(h!==null){if(c=h.tag,c===13){if(c=l(h),c!==null){o.blockedOn=c,gt(o.priority,function(){if(h.tag===13){var g=Qa();g=ot(g);var w=rc(h,g);w!==null&&Ja(w,h,g),ay(h,g)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function wp(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=sy(o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);bs=g,h.target.dispatchEvent(g),bs=null}else return c=we(h),c!==null&&dA(c),o.blockedOn=h,!1;c.shift()}return!0}function pA(o,c,h){wp(o)&&h.delete(c)}function iF(){ly=!1,Co!==null&&wp(Co)&&(Co=null),Ao!==null&&wp(Ao)&&(Ao=null),Eo!==null&&wp(Eo)&&(Eo=null),Eu.forEach(pA),Ou.forEach(pA)}function Sp(o,c){o.blockedOn===c&&(o.blockedOn=null,ly||(ly=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iF)))}var Np=null;function mA(o){Np!==o&&(Np=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Np===o&&(Np=null);for(var c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],w=o[c+2];if(typeof g!="function"){if(oy(g||h)===null)continue;break}var _=we(h);_!==null&&(o.splice(c,3),c-=3,ox(_,{pending:!0,data:w,method:h.method,action:g},g,w))}}))}function ku(o){function c(Te){return Sp(Te,o)}Co!==null&&Sp(Co,o),Ao!==null&&Sp(Ao,o),Eo!==null&&Sp(Eo,o),Eu.forEach(c),Ou.forEach(c);for(var h=0;h<Oo.length;h++){var g=Oo[h];g.blockedOn===o&&(g.blockedOn=null)}for(;0<Oo.length&&(h=Oo[0],h.blockedOn===null);)hA(h),h.blockedOn===null&&Oo.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var w=h[g],_=h[g+1],V=w[Gt]||null;if(typeof _=="function")V||mA(h);else if(V){var oe=null;if(_&&_.hasAttribute("formAction")){if(w=_,V=_[Gt]||null)oe=V.formAction;else if(oy(w)!==null)continue}else oe=V.action;typeof oe=="function"?h[g+1]=oe:(h.splice(g,3),g-=3),mA(h)}}}function cy(o){this._internalRoot=o}Tp.prototype.render=cy.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(a(409));var h=c.current,g=Qa();lA(h,g,o,c,null,null)},Tp.prototype.unmount=cy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;lA(o.current,2,null,o,null,null),sp(),c[Fr]=null}};function Tp(o){this._internalRoot=o}Tp.prototype.unstable_scheduleHydration=function(o){if(o){var c=mt();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Oo.length&&c!==0&&c<Oo[h].priority;h++);Oo.splice(h,0,o),h===0&&hA(o)}};var gA=t.version;if(gA!=="19.1.0")throw Error(a(527,gA,"19.1.0"));W.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var sF={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{tt=Cp.inject(sF),$e=Cp}catch{}}return Du.createRoot=function(o,c){if(!i(o))throw Error(a(299));var h=!1,g="",w=IT,_=DT,V=RT,oe=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(V=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(oe=c.unstable_transitionCallbacks)),c=sA(o,1,!1,null,null,h,g,w,_,V,oe,null),o[Fr]=c.current,Hx(o),new cy(c)},Du.hydrateRoot=function(o,c,h){if(!i(o))throw Error(a(299));var g=!1,w="",_=IT,V=DT,oe=RT,Te=null,Ue=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(V=h.onCaughtError),h.onRecoverableError!==void 0&&(oe=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Te=h.unstable_transitionCallbacks),h.formState!==void 0&&(Ue=h.formState)),c=sA(o,1,!0,c,h??null,g,w,_,V,oe,Te,Ue),c.context=oA(null),h=c.current,g=Qa(),g=ot(g),w=fo(g),w.callback=null,ho(h,w,g),h=g,c.current.lanes=h,it(c,h),is(c),o[Fr]=c.current,Hx(o),new Tp(c)},Du.version="19.1.0",Du}var CA;function gF(){if(CA)return fy.exports;CA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fy.exports=mF(),fy.exports}var xF=gF();const yF=Gr(xF);var Ru={},AA;function vF(){if(AA)return Ru;AA=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.parse=l,Ru.serialize=f;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,v){const j=new s,b=x.length;if(b<2)return j;const y=(v==null?void 0:v.decode)||p;let C=0;do{const E=x.indexOf("=",C);if(E===-1)break;const O=x.indexOf(";",C),S=O===-1?b:O;if(E>S){C=x.lastIndexOf(";",E-1)+1;continue}const T=d(x,C,E),k=u(x,E,T),D=x.slice(T,k);if(j[D]===void 0){let F=d(x,E+1,S),B=u(x,S,F);const M=y(x.slice(F,B));j[D]=M}C=S+1}while(C<b);return j}function d(x,v,j){do{const b=x.charCodeAt(v);if(b!==32&&b!==9)return v}while(++v<j);return j}function u(x,v,j){for(;v>j;){const b=x.charCodeAt(--v);if(b!==32&&b!==9)return v+1}return j}function f(x,v,j){const b=(j==null?void 0:j.encode)||encodeURIComponent;if(!e.test(x))throw new TypeError(`argument name is invalid: ${x}`);const y=b(v);if(!t.test(y))throw new TypeError(`argument val is invalid: ${v}`);let C=x+"="+y;if(!j)return C;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);C+="; Max-Age="+j.maxAge}if(j.domain){if(!r.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);C+="; Domain="+j.domain}if(j.path){if(!a.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);C+="; Path="+j.path}if(j.expires){if(!m(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);C+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(C+="; HttpOnly"),j.secure&&(C+="; Secure"),j.partitioned&&(C+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return C}function p(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function m(x){return i.call(x)==="[object Date]"}return Ru}vF();var EA="popstate";function bF(e={}){function t(a,i){let{pathname:s,search:l,hash:d}=a.location;return Oj("",{pathname:s,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:uf(i)}return wF(t,r,null,e)}function on(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jF(){return Math.random().toString(36).substring(2,10)}function OA(e,t){return{usr:e.state,key:e.key,idx:t}}function Oj(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Nd(t):t,state:r,key:t&&t.key||a||jF()}}function uf({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Nd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function wF(e,t,r,a={}){let{window:i=document.defaultView,v5Compat:s=!1}=a,l=i.history,d="POP",u=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function m(){d="POP";let y=p(),C=y==null?null:y-f;f=y,u&&u({action:d,location:b.location,delta:C})}function x(y,C){d="PUSH";let E=Oj(b.location,y,C);f=p()+1;let O=OA(E,f),S=b.createHref(E);try{l.pushState(O,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(S)}s&&u&&u({action:d,location:b.location,delta:1})}function v(y,C){d="REPLACE";let E=Oj(b.location,y,C);f=p();let O=OA(E,f),S=b.createHref(E);l.replaceState(O,"",S),s&&u&&u({action:d,location:b.location,delta:0})}function j(y){return SF(y)}let b={get action(){return d},get location(){return e(i,l)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(EA,m),u=y,()=>{i.removeEventListener(EA,m),u=null}},createHref(y){return t(i,y)},createURL:j,encodeLocation(y){let C=j(y);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:v,go(y){return l.go(y)}};return b}function SF(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),on(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:uf(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function O3(e,t,r="/"){return NF(e,t,r,!1)}function NF(e,t,r,a){let i=typeof t=="string"?Nd(t):t,s=Qs(i.pathname||"/",r);if(s==null)return null;let l=_3(e);TF(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let f=MF(s);d=RF(l[u],f,a)}return d}function _3(e,t=[],r=[],a=""){let i=(s,l,d)=>{let u={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};u.relativePath.startsWith("/")&&(on(u.relativePath.startsWith(a),`Absolute route path "${u.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(a.length));let f=qs([a,u.relativePath]),p=r.concat(u);s.children&&s.children.length>0&&(on(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),_3(s.children,t,p,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:IF(f,s.index),routesMeta:p})};return e.forEach((s,l)=>{var d;if(s.path===""||!((d=s.path)!=null&&d.includes("?")))i(s,l);else for(let u of k3(s.path))i(s,l,u)}),t}function k3(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(a.length===0)return i?[s,""]:[s];let l=k3(a.join("/")),d=[];return d.push(...l.map(u=>u===""?s:[s,u].join("/"))),i&&d.push(...l),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function TF(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:DF(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var CF=/^:[\w-]+$/,AF=3,EF=2,OF=1,_F=10,kF=-2,_A=e=>e==="*";function IF(e,t){let r=e.split("/"),a=r.length;return r.some(_A)&&(a+=kF),t&&(a+=EF),r.filter(i=>!_A(i)).reduce((i,s)=>i+(CF.test(s)?AF:s===""?OF:_F),a)}function DF(e,t){return e.length===t.length&&e.slice(0,-1).every((a,i)=>a===t[i])?e[e.length-1]-t[t.length-1]:0}function RF(e,t,r=!1){let{routesMeta:a}=e,i={},s="/",l=[];for(let d=0;d<a.length;++d){let u=a[d],f=d===a.length-1,p=s==="/"?t:t.slice(s.length)||"/",m=nm({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},p),x=u.route;if(!m&&f&&r&&!a[a.length-1].route.index&&(m=nm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:qs([s,m.pathname]),pathnameBase:zF(qs([s,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(s=qs([s,m.pathnameBase]))}return l}function nm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=PF(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:a.reduce((f,{paramName:p,isOptional:m},x)=>{if(p==="*"){let j=d[x]||"";l=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const v=d[x];return m&&!v?f[p]=void 0:f[p]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:l,pattern:e}}function PF(e,t=!1,r=!0){Vi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(a.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function MF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Qs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function BF(e,t="/"){let{pathname:r,search:a="",hash:i=""}=typeof e=="string"?Nd(e):e;return{pathname:r?r.startsWith("/")?r:FF(r,t):t,search:$F(a),hash:UF(i)}}function FF(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function gy(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LF(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function hw(e){let t=LF(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function pw(e,t,r,a=!1){let i;typeof e=="string"?i=Nd(e):(i={...e},on(!i.pathname||!i.pathname.includes("?"),gy("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),gy("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),gy("#","search","hash",i)));let s=e===""||i.pathname==="",l=s?"/":i.pathname,d;if(l==null)d=r;else{let m=t.length-1;if(!a&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),m-=1;i.pathname=x.join("/")}d=m>=0?t[m]:"/"}let u=BF(i,d),f=l&&l!=="/"&&l.endsWith("/"),p=(s||l===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(f||p)&&(u.pathname+="/"),u}var qs=e=>e.join("/").replace(/\/\/+/g,"/"),zF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$F=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var I3=["POST","PUT","PATCH","DELETE"];new Set(I3);var WF=["GET",...I3];new Set(WF);var Td=N.createContext(null);Td.displayName="DataRouter";var wg=N.createContext(null);wg.displayName="DataRouterState";var D3=N.createContext({isTransitioning:!1});D3.displayName="ViewTransition";var HF=N.createContext(new Map);HF.displayName="Fetchers";var GF=N.createContext(null);GF.displayName="Await";var Yi=N.createContext(null);Yi.displayName="Navigation";var nh=N.createContext(null);nh.displayName="Location";var xs=N.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var mw=N.createContext(null);mw.displayName="RouteError";function KF(e,{relative:t}={}){on(Cd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=N.useContext(Yi),{hash:i,pathname:s,search:l}=ah(e,{relative:t}),d=s;return r!=="/"&&(d=s==="/"?r:qs([r,s])),a.createHref({pathname:d,search:l,hash:i})}function Cd(){return N.useContext(nh)!=null}function pa(){return on(Cd(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(nh).location}var R3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P3(e){N.useContext(Yi).static||N.useLayoutEffect(e)}function An(){let{isDataRoute:e}=N.useContext(xs);return e?sL():VF()}function VF(){on(Cd(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(Td),{basename:t,navigator:r}=N.useContext(Yi),{matches:a}=N.useContext(xs),{pathname:i}=pa(),s=JSON.stringify(hw(a)),l=N.useRef(!1);return P3(()=>{l.current=!0}),N.useCallback((u,f={})=>{if(Vi(l.current,R3),!l.current)return;if(typeof u=="number"){r.go(u);return}let p=pw(u,JSON.parse(s),i,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:qs([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,s,i,e])}N.createContext(null);function ah(e,{relative:t}={}){let{matches:r}=N.useContext(xs),{pathname:a}=pa(),i=JSON.stringify(hw(r));return N.useMemo(()=>pw(e,JSON.parse(i),a,t==="path"),[e,i,a,t])}function YF(e,t){return M3(e,t)}function M3(e,t,r,a){var C;on(Cd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=N.useContext(Yi),{matches:s}=N.useContext(xs),l=s[s.length-1],d=l?l.params:{},u=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let E=p&&p.path||"";B3(u,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=pa(),x;if(t){let E=typeof t=="string"?Nd(t):t;on(f==="/"||((C=E.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),x=E}else x=m;let v=x.pathname||"/",j=v;if(f!=="/"){let E=f.replace(/^\//,"").split("/");j="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=O3(e,{pathname:j});Vi(p||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Vi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=eL(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},d,E.params),pathname:qs([f,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:qs([f,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,r,a);return t&&y?N.createElement(nh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},y):y}function XF(){let e=iL(),t=qF(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:s},"ErrorBoundary")," or"," ",N.createElement("code",{style:s},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:i},r):null,l)}var QF=N.createElement(XF,null),JF=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(xs.Provider,{value:this.props.routeContext},N.createElement(mw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZF({routeContext:e,match:t,children:r}){let a=N.useContext(Td);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(xs.Provider,{value:e},r)}function eL(e,t=[],r=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r==null?void 0:r.errors;if(s!=null){let u=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);on(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,d=-1;if(r)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:p,errors:m}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||x){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,f,p)=>{let m,x=!1,v=null,j=null;r&&(m=s&&f.route.id?s[f.route.id]:void 0,v=f.route.errorElement||QF,l&&(d<0&&p===0?(B3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):d===p&&(x=!0,j=f.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,p+1)),y=()=>{let C;return m?C=v:x?C=j:f.route.Component?C=N.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=u,N.createElement(ZF,{match:f,routeContext:{outlet:u,matches:b,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?N.createElement(JF,{location:r.location,revalidation:r.revalidation,component:v,error:m,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}function gw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tL(e){let t=N.useContext(Td);return on(t,gw(e)),t}function rL(e){let t=N.useContext(wg);return on(t,gw(e)),t}function nL(e){let t=N.useContext(xs);return on(t,gw(e)),t}function xw(e){let t=nL(e),r=t.matches[t.matches.length-1];return on(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function aL(){return xw("useRouteId")}function iL(){var a;let e=N.useContext(mw),t=rL("useRouteError"),r=xw("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[r]}function sL(){let{router:e}=tL("useNavigate"),t=xw("useNavigate"),r=N.useRef(!1);return P3(()=>{r.current=!0}),N.useCallback(async(i,s={})=>{Vi(r.current,R3),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var kA={};function B3(e,t,r){!t&&!kA[e]&&(kA[e]=!0,Vi(!1,r))}N.memo(oL);function oL({routes:e,future:t,state:r}){return M3(e,void 0,r,t)}function am({to:e,replace:t,state:r,relative:a}){on(Cd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(Yi);Vi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=N.useContext(xs),{pathname:l}=pa(),d=An(),u=pw(e,hw(s),l,a==="path"),f=JSON.stringify(u);return N.useEffect(()=>{d(JSON.parse(f),{replace:t,state:r,relative:a})},[d,f,a,t,r]),null}function zt(e){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lL({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:i,static:s=!1}){on(!Cd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:l,navigator:i,static:s,future:{}}),[l,i,s]);typeof r=="string"&&(r=Nd(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:x="default"}=r,v=N.useMemo(()=>{let j=Qs(u,l);return j==null?null:{location:{pathname:j,search:f,hash:p,state:m,key:x},navigationType:a}},[l,u,f,p,m,x,a]);return Vi(v!=null,`<Router basename="${l}"> is not able to match the URL "${u}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:N.createElement(Yi.Provider,{value:d},N.createElement(nh.Provider,{children:t,value:v}))}function _j({children:e,location:t}){return YF(kj(e),t)}function kj(e,t=[]){let r=[];return N.Children.forEach(e,(a,i)=>{if(!N.isValidElement(a))return;let s=[...t,i];if(a.type===N.Fragment){r.push.apply(r,kj(a.props.children,s));return}on(a.type===zt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=kj(a.props.children,s)),r.push(l)}),r}var Xp="get",Qp="application/x-www-form-urlencoded";function Sg(e){return e!=null&&typeof e.tagName=="string"}function cL(e){return Sg(e)&&e.tagName.toLowerCase()==="button"}function dL(e){return Sg(e)&&e.tagName.toLowerCase()==="form"}function uL(e){return Sg(e)&&e.tagName.toLowerCase()==="input"}function fL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hL(e,t){return e.button===0&&(!t||t==="_self")&&!fL(e)}var Ep=null;function pL(){if(Ep===null)try{new FormData(document.createElement("form"),0),Ep=!1}catch{Ep=!0}return Ep}var mL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xy(e){return e!=null&&!mL.has(e)?(Vi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qp}"`),null):e}function gL(e,t){let r,a,i,s,l;if(dL(e)){let d=e.getAttribute("action");a=d?Qs(d,t):null,r=e.getAttribute("method")||Xp,i=xy(e.getAttribute("enctype"))||Qp,s=new FormData(e)}else if(cL(e)||uL(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||d.getAttribute("action");if(a=u?Qs(u,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||Xp,i=xy(e.getAttribute("formenctype"))||xy(d.getAttribute("enctype"))||Qp,s=new FormData(d,e),!pL()){let{name:f,type:p,value:m}=e;if(p==="image"){let x=f?`${f}.`:"";s.append(`${x}x`,"0"),s.append(`${x}y`,"0")}else f&&s.append(f,m)}}else{if(Sg(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Xp,a=null,i=Qp,l=e}return s&&i==="text/plain"&&(l=s,s=void 0),{action:a,method:r.toLowerCase(),encType:i,formData:s,body:l}}function yw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function xL(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vL(e,t,r){let a=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let l=await xL(s,r);return l.links?l.links():[]}return[]}));return SL(a.flat(1).filter(yL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function IA(e,t,r,a,i,s){let l=(u,f)=>r[f]?u.route.id!==r[f].route.id:!0,d=(u,f)=>{var p;return r[f].pathname!==u.pathname||((p=r[f].route.path)==null?void 0:p.endsWith("*"))&&r[f].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,f)=>l(u,f)||d(u,f)):s==="data"?t.filter((u,f)=>{var m;let p=a.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(l(u,f)||d(u,f))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=r[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function bL(e,t,{includeHydrateFallback:r}={}){return jL(e.map(a=>{let i=t.routes[a.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function jL(e){return[...new Set(e)]}function wL(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function SL(e,t){let r=new Set;return new Set(t),e.reduce((a,i)=>{let s=JSON.stringify(wL(i));return r.has(s)||(r.add(s),a.push({key:s,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var NL=new Set([100,101,204,205]);function TL(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&Qs(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function F3(){let e=N.useContext(Td);return yw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function CL(){let e=N.useContext(wg);return yw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var vw=N.createContext(void 0);vw.displayName="FrameworkContext";function L3(){let e=N.useContext(vw);return yw(e,"You must render this element inside a <HydratedRouter> element"),e}function AL(e,t){let r=N.useContext(vw),[a,i]=N.useState(!1),[s,l]=N.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:f,onMouseLeave:p,onTouchStart:m}=t,x=N.useRef(null);N.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=C=>{C.forEach(E=>{l(E.isIntersecting)})},y=new IntersectionObserver(b,{threshold:.5});return x.current&&y.observe(x.current),()=>{y.disconnect()}}},[e]),N.useEffect(()=>{if(a){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[a]);let v=()=>{i(!0)},j=()=>{i(!1),l(!1)};return r?e!=="intent"?[s,x,{}]:[s,x,{onFocus:Pu(d,v),onBlur:Pu(u,j),onMouseEnter:Pu(f,v),onMouseLeave:Pu(p,j),onTouchStart:Pu(m,v)}]:[!1,x,{}]}function Pu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function EL({page:e,...t}){let{router:r}=F3(),a=N.useMemo(()=>O3(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?N.createElement(_L,{page:e,matches:a,...t}):null}function OL(e){let{manifest:t,routeModules:r}=L3(),[a,i]=N.useState([]);return N.useEffect(()=>{let s=!1;return vL(e,t,r).then(l=>{s||i(l)}),()=>{s=!0}},[e,t,r]),a}function _L({page:e,matches:t,...r}){let a=pa(),{manifest:i,routeModules:s}=L3(),{basename:l}=F3(),{loaderData:d,matches:u}=CL(),f=N.useMemo(()=>IA(e,t,u,i,a,"data"),[e,t,u,i,a]),p=N.useMemo(()=>IA(e,t,u,i,a,"assets"),[e,t,u,i,a]),m=N.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let j=new Set,b=!1;if(t.forEach(C=>{var O;let E=i.routes[C.route.id];!E||!E.hasLoader||(!f.some(S=>S.route.id===C.route.id)&&C.route.id in d&&((O=s[C.route.id])!=null&&O.shouldRevalidate)||E.hasClientLoader?b=!0:j.add(C.route.id))}),j.size===0)return[];let y=TL(e,l);return b&&j.size>0&&y.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[y.pathname+y.search]},[l,d,a,i,f,t,e,s]),x=N.useMemo(()=>bL(p,i),[p,i]),v=OL(p);return N.createElement(N.Fragment,null,m.map(j=>N.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>N.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),v.map(({key:j,link:b})=>N.createElement("link",{key:j,...b})))}function kL(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var z3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{z3&&(window.__reactRouterVersion="7.6.2")}catch{}function IL({basename:e,children:t,window:r}){let a=N.useRef();a.current==null&&(a.current=bF({window:r,v5Compat:!0}));let i=a.current,[s,l]=N.useState({action:i.action,location:i.location}),d=N.useCallback(u=>{N.startTransition(()=>l(u))},[l]);return N.useLayoutEffect(()=>i.listen(d),[i,d]),N.createElement(lL,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var $3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bw=N.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:i,reloadDocument:s,replace:l,state:d,target:u,to:f,preventScrollReset:p,viewTransition:m,...x},v){let{basename:j}=N.useContext(Yi),b=typeof f=="string"&&$3.test(f),y,C=!1;if(typeof f=="string"&&b&&(y=f,z3))try{let B=new URL(window.location.href),M=f.startsWith("//")?new URL(B.protocol+f):new URL(f),L=Qs(M.pathname,j);M.origin===B.origin&&L!=null?f=L+M.search+M.hash:C=!0}catch{Vi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=KF(f,{relative:i}),[O,S,T]=AL(a,x),k=ML(f,{replace:l,state:d,target:u,preventScrollReset:p,relative:i,viewTransition:m});function D(B){t&&t(B),B.defaultPrevented||k(B)}let F=N.createElement("a",{...x,...T,href:y||E,onClick:C||s?t:D,ref:kL(v,S),target:u,"data-discover":!b&&r==="render"?"true":void 0});return O&&!b?N.createElement(N.Fragment,null,F,N.createElement(EL,{page:E})):F});bw.displayName="Link";var DL=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:i=!1,style:s,to:l,viewTransition:d,children:u,...f},p){let m=ah(l,{relative:f.relative}),x=pa(),v=N.useContext(wg),{navigator:j,basename:b}=N.useContext(Yi),y=v!=null&&$L(m)&&d===!0,C=j.encodeLocation?j.encodeLocation(m).pathname:m.pathname,E=x.pathname,O=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(E=E.toLowerCase(),O=O?O.toLowerCase():null,C=C.toLowerCase()),O&&b&&(O=Qs(O,b)||O);const S=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let T=E===C||!i&&E.startsWith(C)&&E.charAt(S)==="/",k=O!=null&&(O===C||!i&&O.startsWith(C)&&O.charAt(C.length)==="/"),D={isActive:T,isPending:k,isTransitioning:y},F=T?t:void 0,B;typeof a=="function"?B=a(D):B=[a,T?"active":null,k?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(D):s;return N.createElement(bw,{...f,"aria-current":F,className:B,ref:p,style:M,to:l,viewTransition:d},typeof u=="function"?u(D):u)});DL.displayName="NavLink";var RL=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:i,state:s,method:l=Xp,action:d,onSubmit:u,relative:f,preventScrollReset:p,viewTransition:m,...x},v)=>{let j=LL(),b=zL(d,{relative:f}),y=l.toLowerCase()==="get"?"get":"post",C=typeof d=="string"&&$3.test(d),E=O=>{if(u&&u(O),O.defaultPrevented)return;O.preventDefault();let S=O.nativeEvent.submitter,T=(S==null?void 0:S.getAttribute("formmethod"))||l;j(S||O.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:i,state:s,relative:f,preventScrollReset:p,viewTransition:m})};return N.createElement("form",{ref:v,method:y,action:b,onSubmit:a?u:E,...x,"data-discover":!C&&e==="render"?"true":void 0})});RL.displayName="Form";function PL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U3(e){let t=N.useContext(Td);return on(t,PL(e)),t}function ML(e,{target:t,replace:r,state:a,preventScrollReset:i,relative:s,viewTransition:l}={}){let d=An(),u=pa(),f=ah(e,{relative:s});return N.useCallback(p=>{if(hL(p,t)){p.preventDefault();let m=r!==void 0?r:uf(u)===uf(f);d(e,{replace:m,state:a,preventScrollReset:i,relative:s,viewTransition:l})}},[u,d,f,r,a,t,e,i,s,l])}var BL=0,FL=()=>`__${String(++BL)}__`;function LL(){let{router:e}=U3("useSubmit"),{basename:t}=N.useContext(Yi),r=aL();return N.useCallback(async(a,i={})=>{let{action:s,method:l,encType:d,formData:u,body:f}=gL(a,t);if(i.navigate===!1){let p=i.fetcherKey||FL();await e.fetch(p,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function zL(e,{relative:t}={}){let{basename:r}=N.useContext(Yi),a=N.useContext(xs);on(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s={...ah(e||".",{relative:t})},l=pa();if(e==null){s.search=l.search;let d=new URLSearchParams(s.search),u=d.getAll("index");if(u.some(p=>p==="")){d.delete("index"),u.filter(m=>m).forEach(m=>d.append("index",m));let p=d.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:qs([r,s.pathname])),uf(s)}function $L(e,t={}){let r=N.useContext(D3);on(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=U3("useViewTransitionState"),i=ah(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=Qs(r.currentLocation.pathname,a)||r.currentLocation.pathname,l=Qs(r.nextLocation.pathname,a)||r.nextLocation.pathname;return nm(i.pathname,l)!=null||nm(i.pathname,s)!=null}[...NL];/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qL=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),DA=e=>{const t=qL(e);return t.charAt(0).toUpperCase()+t.slice(1)},q3=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),WL=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:i="",children:s,iconNode:l,...d},u)=>N.createElement("svg",{ref:u,...HL,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:q3("lucide",i),...!s&&!WL(d)&&{"aria-hidden":"true"},...d},[...l.map(([f,p])=>N.createElement(f,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=(e,t)=>{const r=N.forwardRef(({className:a,...i},s)=>N.createElement(GL,{ref:s,iconNode:t,className:q3(`lucide-${UL(DA(e))}`,`lucide-${e}`,a),...i}));return r.displayName=DA(e),r};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],zo=Bt("arrow-down",KL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],$o=Bt("arrow-up",VL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],XL=Bt("banknote",YL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],cs=Bt("bed",QL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],an=Bt("calendar",JL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$c=Bt("chart-column",ZL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ra=Bt("check",e7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ih=Bt("chevron-left",t7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],sh=Bt("chevron-right",r7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fr=Bt("circle-alert",n7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bs=Bt("circle-check-big",a7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],s7=Bt("circle-help",i7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Jp=Bt("circle-x",o7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ds=Bt("clock",l7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Na=Bt("credit-card",c7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ij=Bt("dollar-sign",d7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ca=Bt("download",u7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],jw=Bt("eye-off",f7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xi=Bt("eye",h7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qc=Bt("file-text",p7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],im=Bt("funnel",m7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],RA=Bt("heart",g7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zl=Bt("image",x7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],Ws=Bt("indian-rupee",y7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],b7=Bt("info",v7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],PA=Bt("key-round",j7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],W3=Bt("key",w7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],N7=Bt("layout-dashboard",S7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ra=Bt("loader",T7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],A7=Bt("lock",C7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],sm=Bt("log-out",E7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Js=Bt("mail",O7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ff=Bt("map-pin",_7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["path",{d:"M5 12h14",key:"1ays0h"}]],MA=Bt("minus",k7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],D7=Bt("package",I7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Ai=Bt("phone",R7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ni=Bt("plus",P7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],wi=Bt("printer",M7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Fs=Bt("qr-code",B7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Jc=Bt("receipt",F7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fs=Bt("refresh-cw",L7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],$7=Bt("rotate-cw",z7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],H3=Bt("save",U7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wr=Bt("search",q7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],H7=Bt("shopping-bag",W7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],om=Bt("shopping-cart",G7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Aa=Bt("square-pen",K7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Dj=Bt("store",V7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],X7=Bt("table",Y7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],J7=Bt("tags",Q7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],La=Bt("trash-2",Z7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],lm=Bt("trending-up",ez);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ro=Bt("upload",tz);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ad=Bt("user-plus",rz);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ol=Bt("user",nz);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ls=Bt("users",az);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],hf=Bt("wallet",iz);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ha=Bt("x",sz);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],lz=Bt("zoom-in",oz);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],dz=Bt("zoom-out",cz),uz=({collapsed:e,setCollapsed:t})=>{const r=pa(),a=An(),[i,s]=N.useState(r.pathname),[l,d]=N.useState(null);N.useEffect(()=>{s(r.pathname);const p=localStorage.getItem("userData");p&&d(JSON.parse(p))},[r.pathname]);const u=[{path:"/",name:"Dashboard",icon:n.jsx(N7,{size:20})},{path:"/branches",name:"Branches",icon:n.jsx(Dj,{size:20})},{path:"/rooms",name:"Rooms",icon:n.jsx(cs,{size:20})},{path:"/room-bookings",name:"Room Bookings",icon:n.jsx(an,{size:20})},{path:"/room-payments",name:"Room Payments",icon:n.jsx(Na,{size:20})},{path:"/categories",name:"Categories",icon:n.jsx(J7,{size:20})},{path:"/products",name:"Menu",icon:n.jsx(D7,{size:20})},{path:"/tables",name:"Tables",icon:n.jsx(X7,{size:20})},{path:"/staff-orders",name:"Staff Orders",icon:n.jsx(om,{size:20})},{path:"/counter-orders",name:"Counter Orders",icon:n.jsx(om,{size:20})},{path:"/product-submissions",name:"Purchase Orders",icon:n.jsx(Jc,{size:20})},{path:"/qr-uploads",name:"QR Uploads",icon:n.jsx(Jc,{size:20})},{path:"/users",name:"Users",icon:n.jsx(Ls,{size:20})},{path:"/staff-users",name:"Staff Users",icon:n.jsx(Ls,{size:20})},{path:"/counter-users",name:"Counter Users",icon:n.jsx(Ls,{size:20})},{path:"/purchase-users",name:"Purchase Users",icon:n.jsx(Ls,{size:20})},{path:"/category-access",name:"Category Access",icon:n.jsx(PA,{size:20})},{path:"/receptionist-access",name:"Receptionist Access",icon:n.jsx(PA,{size:20})},{path:"/help-support",name:"Help & Support",icon:n.jsx(s7,{size:20})},{path:"/about-us",name:"About Us",icon:n.jsx(b7,{size:20})},{path:"/terms-policies",name:"Terms & Policies",icon:n.jsx(Qc,{size:20})}],f=()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userData"),localStorage.removeItem("authToken"),a("/login")};return n.jsxs("aside",{className:`sidebar ${e?"sidebar-collapsed":""}`,children:[n.jsxs("div",{className:"sidebar-header",children:[!e&&n.jsxs("div",{className:"logo",children:[n.jsx("div",{className:"logo-icon",children:n.jsx(Dj,{size:24})}),n.jsx("h2",{children:"Hotel Virat"})]}),n.jsx("button",{className:"collapse-btn",onClick:()=>t(!e),children:e?n.jsx(sh,{size:20}):n.jsx(ih,{size:20})})]}),n.jsx("nav",{className:"sidebar-nav",children:n.jsx("ul",{children:u.map(p=>n.jsx("li",{children:n.jsxs(bw,{to:p.path,className:`nav-link ${i===p.path?"active":""}`,onClick:()=>s(p.path),children:[n.jsx("span",{className:"icon",children:p.icon}),!e&&n.jsx("span",{className:"text",children:p.name})]})},p.path))})}),n.jsxs("div",{className:"sidebar-footer",children:[e?n.jsx("div",{className:"avatar-small",children:n.jsx("img",{src:(l==null?void 0:l.profileImage)||`https://ui-avatars.com/api/?name=${(l==null?void 0:l.name)||"Admin"}&background=f0f0f0&color=333`,alt:(l==null?void 0:l.name)||"Admin"})}):n.jsxs("div",{className:"user-info",children:[n.jsx("div",{className:"avatar",children:n.jsx("img",{src:(l==null?void 0:l.profileImage)||`https://ui-avatars.com/api/?name=${(l==null?void 0:l.name)||"Admin"}&background=f0f0f0&color=333`,alt:(l==null?void 0:l.name)||"Admin"})}),n.jsxs("div",{className:"user-details",children:[n.jsx("h4",{children:(l==null?void 0:l.name)||"Admin"}),n.jsx("p",{children:(l==null?void 0:l.email)||""})]})]}),n.jsxs("button",{className:"logout-btn",onClick:f,children:[n.jsx(sm,{size:18}),!e&&n.jsx("span",{children:"Logout"})]})]})]})};function G3(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=G3(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function jr(){for(var e,t,r=0,a="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=G3(e))&&(a&&(a+=" "),a+=t);return a}var yy,BA;function Ua(){if(BA)return yy;BA=1;var e=Array.isArray;return yy=e,yy}var vy,FA;function K3(){if(FA)return vy;FA=1;var e=typeof Ap=="object"&&Ap&&Ap.Object===Object&&Ap;return vy=e,vy}var by,LA;function ys(){if(LA)return by;LA=1;var e=K3(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return by=r,by}var jy,zA;function oh(){if(zA)return jy;zA=1;var e=ys(),t=e.Symbol;return jy=t,jy}var wy,$A;function fz(){if($A)return wy;$A=1;var e=oh(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,i=e?e.toStringTag:void 0;function s(l){var d=r.call(l,i),u=l[i];try{l[i]=void 0;var f=!0}catch{}var p=a.call(l);return f&&(d?l[i]=u:delete l[i]),p}return wy=s,wy}var Sy,UA;function hz(){if(UA)return Sy;UA=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return Sy=r,Sy}var Ny,qA;function io(){if(qA)return Ny;qA=1;var e=oh(),t=fz(),r=hz(),a="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function l(d){return d==null?d===void 0?i:a:s&&s in Object(d)?t(d):r(d)}return Ny=l,Ny}var Ty,WA;function so(){if(WA)return Ty;WA=1;function e(t){return t!=null&&typeof t=="object"}return Ty=e,Ty}var Cy,HA;function Ed(){if(HA)return Cy;HA=1;var e=io(),t=so(),r="[object Symbol]";function a(i){return typeof i=="symbol"||t(i)&&e(i)==r}return Cy=a,Cy}var Ay,GA;function ww(){if(GA)return Ay;GA=1;var e=Ua(),t=Ed(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(s,l){if(e(s))return!1;var d=typeof s;return d=="number"||d=="symbol"||d=="boolean"||s==null||t(s)?!0:a.test(s)||!r.test(s)||l!=null&&s in Object(l)}return Ay=i,Ay}var Ey,KA;function Ho(){if(KA)return Ey;KA=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Ey=e,Ey}var Oy,VA;function Sw(){if(VA)return Oy;VA=1;var e=io(),t=Ho(),r="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function l(d){if(!t(d))return!1;var u=e(d);return u==a||u==i||u==r||u==s}return Oy=l,Oy}var _y,YA;function pz(){if(YA)return _y;YA=1;var e=ys(),t=e["__core-js_shared__"];return _y=t,_y}var ky,XA;function mz(){if(XA)return ky;XA=1;var e=pz(),t=function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function r(a){return!!t&&t in a}return ky=r,ky}var Iy,QA;function V3(){if(QA)return Iy;QA=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return Iy=r,Iy}var Dy,JA;function gz(){if(JA)return Dy;JA=1;var e=Sw(),t=mz(),r=Ho(),a=V3(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,u=l.toString,f=d.hasOwnProperty,p=RegExp("^"+u.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(x){if(!r(x)||t(x))return!1;var v=e(x)?p:s;return v.test(a(x))}return Dy=m,Dy}var Ry,ZA;function xz(){if(ZA)return Ry;ZA=1;function e(t,r){return t==null?void 0:t[r]}return Ry=e,Ry}var Py,eE;function $l(){if(eE)return Py;eE=1;var e=gz(),t=xz();function r(a,i){var s=t(a,i);return e(s)?s:void 0}return Py=r,Py}var My,tE;function Ng(){if(tE)return My;tE=1;var e=$l(),t=e(Object,"create");return My=t,My}var By,rE;function yz(){if(rE)return By;rE=1;var e=Ng();function t(){this.__data__=e?e(null):{},this.size=0}return By=t,By}var Fy,nE;function vz(){if(nE)return Fy;nE=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Fy=e,Fy}var Ly,aE;function bz(){if(aE)return Ly;aE=1;var e=Ng(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function i(s){var l=this.__data__;if(e){var d=l[s];return d===t?void 0:d}return a.call(l,s)?l[s]:void 0}return Ly=i,Ly}var zy,iE;function jz(){if(iE)return zy;iE=1;var e=Ng(),t=Object.prototype,r=t.hasOwnProperty;function a(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return zy=a,zy}var $y,sE;function wz(){if(sE)return $y;sE=1;var e=Ng(),t="__lodash_hash_undefined__";function r(a,i){var s=this.__data__;return this.size+=this.has(a)?0:1,s[a]=e&&i===void 0?t:i,this}return $y=r,$y}var Uy,oE;function Sz(){if(oE)return Uy;oE=1;var e=yz(),t=vz(),r=bz(),a=jz(),i=wz();function s(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var f=l[d];this.set(f[0],f[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=a,s.prototype.set=i,Uy=s,Uy}var qy,lE;function Nz(){if(lE)return qy;lE=1;function e(){this.__data__=[],this.size=0}return qy=e,qy}var Wy,cE;function Nw(){if(cE)return Wy;cE=1;function e(t,r){return t===r||t!==t&&r!==r}return Wy=e,Wy}var Hy,dE;function Tg(){if(dE)return Hy;dE=1;var e=Nw();function t(r,a){for(var i=r.length;i--;)if(e(r[i][0],a))return i;return-1}return Hy=t,Hy}var Gy,uE;function Tz(){if(uE)return Gy;uE=1;var e=Tg(),t=Array.prototype,r=t.splice;function a(i){var s=this.__data__,l=e(s,i);if(l<0)return!1;var d=s.length-1;return l==d?s.pop():r.call(s,l,1),--this.size,!0}return Gy=a,Gy}var Ky,fE;function Cz(){if(fE)return Ky;fE=1;var e=Tg();function t(r){var a=this.__data__,i=e(a,r);return i<0?void 0:a[i][1]}return Ky=t,Ky}var Vy,hE;function Az(){if(hE)return Vy;hE=1;var e=Tg();function t(r){return e(this.__data__,r)>-1}return Vy=t,Vy}var Yy,pE;function Ez(){if(pE)return Yy;pE=1;var e=Tg();function t(r,a){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,a])):i[s][1]=a,this}return Yy=t,Yy}var Xy,mE;function Cg(){if(mE)return Xy;mE=1;var e=Nz(),t=Tz(),r=Cz(),a=Az(),i=Ez();function s(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var f=l[d];this.set(f[0],f[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=a,s.prototype.set=i,Xy=s,Xy}var Qy,gE;function Tw(){if(gE)return Qy;gE=1;var e=$l(),t=ys(),r=e(t,"Map");return Qy=r,Qy}var Jy,xE;function Oz(){if(xE)return Jy;xE=1;var e=Sz(),t=Cg(),r=Tw();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Jy=a,Jy}var Zy,yE;function _z(){if(yE)return Zy;yE=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Zy=e,Zy}var ev,vE;function Ag(){if(vE)return ev;vE=1;var e=_z();function t(r,a){var i=r.__data__;return e(a)?i[typeof a=="string"?"string":"hash"]:i.map}return ev=t,ev}var tv,bE;function kz(){if(bE)return tv;bE=1;var e=Ag();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return tv=t,tv}var rv,jE;function Iz(){if(jE)return rv;jE=1;var e=Ag();function t(r){return e(this,r).get(r)}return rv=t,rv}var nv,wE;function Dz(){if(wE)return nv;wE=1;var e=Ag();function t(r){return e(this,r).has(r)}return nv=t,nv}var av,SE;function Rz(){if(SE)return av;SE=1;var e=Ag();function t(r,a){var i=e(this,r),s=i.size;return i.set(r,a),this.size+=i.size==s?0:1,this}return av=t,av}var iv,NE;function Cw(){if(NE)return iv;NE=1;var e=Oz(),t=kz(),r=Iz(),a=Dz(),i=Rz();function s(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var f=l[d];this.set(f[0],f[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=a,s.prototype.set=i,iv=s,iv}var sv,TE;function Y3(){if(TE)return sv;TE=1;var e=Cw(),t="Expected a function";function r(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var l=arguments,d=i?i.apply(this,l):l[0],u=s.cache;if(u.has(d))return u.get(d);var f=a.apply(this,l);return s.cache=u.set(d,f)||u,f};return s.cache=new(r.Cache||e),s}return r.Cache=e,sv=r,sv}var ov,CE;function Pz(){if(CE)return ov;CE=1;var e=Y3(),t=500;function r(a){var i=e(a,function(l){return s.size===t&&s.clear(),l}),s=i.cache;return i}return ov=r,ov}var lv,AE;function Mz(){if(AE)return lv;AE=1;var e=Pz(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(l,d,u,f){s.push(u?f.replace(r,"$1"):d||l)}),s});return lv=a,lv}var cv,EE;function Aw(){if(EE)return cv;EE=1;function e(t,r){for(var a=-1,i=t==null?0:t.length,s=Array(i);++a<i;)s[a]=r(t[a],a,t);return s}return cv=e,cv}var dv,OE;function Bz(){if(OE)return dv;OE=1;var e=oh(),t=Aw(),r=Ua(),a=Ed(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function l(d){if(typeof d=="string")return d;if(r(d))return t(d,l)+"";if(a(d))return s?s.call(d):"";var u=d+"";return u=="0"&&1/d==-1/0?"-0":u}return dv=l,dv}var uv,_E;function X3(){if(_E)return uv;_E=1;var e=Bz();function t(r){return r==null?"":e(r)}return uv=t,uv}var fv,kE;function Q3(){if(kE)return fv;kE=1;var e=Ua(),t=ww(),r=Mz(),a=X3();function i(s,l){return e(s)?s:t(s,l)?[s]:r(a(s))}return fv=i,fv}var hv,IE;function Eg(){if(IE)return hv;IE=1;var e=Ed();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return hv=t,hv}var pv,DE;function Ew(){if(DE)return pv;DE=1;var e=Q3(),t=Eg();function r(a,i){i=e(i,a);for(var s=0,l=i.length;a!=null&&s<l;)a=a[t(i[s++])];return s&&s==l?a:void 0}return pv=r,pv}var mv,RE;function J3(){if(RE)return mv;RE=1;var e=Ew();function t(r,a,i){var s=r==null?void 0:e(r,a);return s===void 0?i:s}return mv=t,mv}var Fz=J3();const Ti=Gr(Fz);var gv,PE;function Lz(){if(PE)return gv;PE=1;function e(t){return t==null}return gv=e,gv}var zz=Lz();const pr=Gr(zz);var xv,ME;function $z(){if(ME)return xv;ME=1;var e=io(),t=Ua(),r=so(),a="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==a}return xv=i,xv}var Uz=$z();const _l=Gr(Uz);var qz=Sw();const lr=Gr(qz);var Wz=Ho();const Od=Gr(Wz);var yv={exports:{}},Or={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function Hz(){if(BE)return Or;BE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),j;j=Symbol.for("react.module.reference");function b(y){if(typeof y=="object"&&y!==null){var C=y.$$typeof;switch(C){case e:switch(y=y.type,y){case r:case i:case a:case f:case p:return y;default:switch(y=y&&y.$$typeof,y){case d:case l:case u:case x:case m:case s:return y;default:return C}}case t:return C}}}return Or.ContextConsumer=l,Or.ContextProvider=s,Or.Element=e,Or.ForwardRef=u,Or.Fragment=r,Or.Lazy=x,Or.Memo=m,Or.Portal=t,Or.Profiler=i,Or.StrictMode=a,Or.Suspense=f,Or.SuspenseList=p,Or.isAsyncMode=function(){return!1},Or.isConcurrentMode=function(){return!1},Or.isContextConsumer=function(y){return b(y)===l},Or.isContextProvider=function(y){return b(y)===s},Or.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Or.isForwardRef=function(y){return b(y)===u},Or.isFragment=function(y){return b(y)===r},Or.isLazy=function(y){return b(y)===x},Or.isMemo=function(y){return b(y)===m},Or.isPortal=function(y){return b(y)===t},Or.isProfiler=function(y){return b(y)===i},Or.isStrictMode=function(y){return b(y)===a},Or.isSuspense=function(y){return b(y)===f},Or.isSuspenseList=function(y){return b(y)===p},Or.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===i||y===a||y===f||y===p||y===v||typeof y=="object"&&y!==null&&(y.$$typeof===x||y.$$typeof===m||y.$$typeof===s||y.$$typeof===l||y.$$typeof===u||y.$$typeof===j||y.getModuleId!==void 0)},Or.typeOf=b,Or}var FE;function Gz(){return FE||(FE=1,yv.exports=Hz()),yv.exports}var Kz=Gz(),vv,LE;function Z3(){if(LE)return vv;LE=1;var e=io(),t=so(),r="[object Number]";function a(i){return typeof i=="number"||t(i)&&e(i)==r}return vv=a,vv}var bv,zE;function Vz(){if(zE)return bv;zE=1;var e=Z3();function t(r){return e(r)&&r!=+r}return bv=t,bv}var Yz=Vz();const lh=Gr(Yz);var Xz=Z3();const Qz=Gr(Xz);var Hi=function(t){return t===0?0:t>0?1:-1},bl=function(t){return _l(t)&&t.indexOf("%")===t.length-1},St=function(t){return Qz(t)&&!lh(t)},Rn=function(t){return St(t)||_l(t)},Jz=0,ch=function(t){var r=++Jz;return"".concat(t||"").concat(r)},kl=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!St(t)&&!_l(t))return a;var s;if(bl(t)){var l=t.indexOf("%");s=r*parseFloat(t.slice(0,l))/100}else s=+t;return lh(s)&&(s=a),i&&s>r&&(s=r),s},Do=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Zz=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},i=0;i<r;i++)if(!a[t[i]])a[t[i]]=!0;else return!0;return!1},Ui=function(t,r){return St(t)&&St(r)?function(a){return t+a*(r-t)}:function(){return r}};function cm(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):Ti(a,t))===r})}var e$=function(t,r){return St(t)&&St(r)?t-r:_l(t)&&_l(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Uc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Rj(e){"@babel/helpers - typeof";return Rj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rj(e)}var t$=["viewBox","children"],r$=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$E=["points","pathLength"],jv={svg:t$,polygon:$E,polyline:$E},Ow=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],dm=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(N.isValidElement(t)&&(a=t.props),!Od(a))return null;var i={};return Object.keys(a).forEach(function(s){Ow.includes(s)&&(i[s]=r||function(l){return a[s](a,l)})}),i},n$=function(t,r,a){return function(i){return t(r,a,i),null}},um=function(t,r,a){if(!Od(t)||Rj(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var l=t[s];Ow.includes(s)&&typeof l=="function"&&(i||(i={}),i[s]=n$(l,r,a))}),i},a$=["children"],i$=["children"];function UE(e,t){if(e==null)return{};var r=s$(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function s$(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Pj(e){"@babel/helpers - typeof";return Pj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pj(e)}var qE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Hs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},WE=null,wv=null,_w=function e(t){if(t===WE&&Array.isArray(wv))return wv;var r=[];return N.Children.forEach(t,function(a){pr(a)||(Kz.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),wv=r,WE=t,r};function Ci(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(i){return Hs(i)}):a=[Hs(t)],_w(e).forEach(function(i){var s=Ti(i,"type.displayName")||Ti(i,"type.name");a.indexOf(s)!==-1&&r.push(i)}),r}function ri(e,t){var r=Ci(e,t);return r&&r[0]}var HE=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,i=r.height;return!(!St(a)||a<=0||!St(i)||i<=0)},o$=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],l$=function(t){return t&&t.type&&_l(t.type)&&o$.indexOf(t.type)>=0},c$=function(t){return t&&Pj(t)==="object"&&"clipDot"in t},d$=function(t,r,a,i){var s,l=(s=jv==null?void 0:jv[i])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!lr(t)&&(i&&l.includes(r)||r$.includes(r))||a&&Ow.includes(r)},gr=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(N.isValidElement(t)&&(i=t.props),!Od(i))return null;var s={};return Object.keys(i).forEach(function(l){var d;d$((d=i)===null||d===void 0?void 0:d[l],l,r,a)&&(s[l]=i[l])}),s},Mj=function e(t,r){if(t===r)return!0;var a=N.Children.count(t);if(a!==N.Children.count(r))return!1;if(a===0)return!0;if(a===1)return GE(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<a;i++){var s=t[i],l=r[i];if(Array.isArray(s)||Array.isArray(l)){if(!e(s,l))return!1}else if(!GE(s,l))return!1}return!0},GE=function(t,r){if(pr(t)&&pr(r))return!0;if(!pr(t)&&!pr(r)){var a=t.props||{},i=a.children,s=UE(a,a$),l=r.props||{},d=l.children,u=UE(l,i$);return i&&d?Uc(s,u)&&Mj(i,d):!i&&!d?Uc(s,u):!1}return!1},KE=function(t,r){var a=[],i={};return _w(t).forEach(function(s,l){if(l$(s))a.push(s);else if(s){var d=Hs(s.type),u=r[d]||{},f=u.handler,p=u.once;if(f&&(!p||!i[d])){var m=f(s,d,l);a.push(m),i[d]=!0}}}),a},u$=function(t){var r=t&&t.type;return r&&qE[r]?qE[r]:null},f$=function(t,r){return _w(r).indexOf(t)},h$=["children","width","height","viewBox","className","style","title","desc"];function Bj(){return Bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Bj.apply(this,arguments)}function p$(e,t){if(e==null)return{};var r=m$(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function m$(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Fj(e){var t=e.children,r=e.width,a=e.height,i=e.viewBox,s=e.className,l=e.style,d=e.title,u=e.desc,f=p$(e,h$),p=i||{width:r,height:a,x:0,y:0},m=jr("recharts-surface",s);return Ie.createElement("svg",Bj({},gr(f,!0,"svg"),{className:m,width:r,height:a,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),Ie.createElement("title",null,d),Ie.createElement("desc",null,u),t)}var g$=["children","className"];function Lj(){return Lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lj.apply(this,arguments)}function x$(e,t){if(e==null)return{};var r=y$(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function y$(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var yn=Ie.forwardRef(function(e,t){var r=e.children,a=e.className,i=x$(e,g$),s=jr("recharts-layer",a);return Ie.createElement("g",Lj({className:s},gr(i,!0),{ref:t}),r)}),Gs=function(t,r){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s]},Sv,VE;function v$(){if(VE)return Sv;VE=1;function e(t,r,a){var i=-1,s=t.length;r<0&&(r=-r>s?0:s+r),a=a>s?s:a,a<0&&(a+=s),s=r>a?0:a-r>>>0,r>>>=0;for(var l=Array(s);++i<s;)l[i]=t[i+r];return l}return Sv=e,Sv}var Nv,YE;function b$(){if(YE)return Nv;YE=1;var e=v$();function t(r,a,i){var s=r.length;return i=i===void 0?s:i,!a&&i>=s?r:e(r,a,i)}return Nv=t,Nv}var Tv,XE;function eD(){if(XE)return Tv;XE=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=t+r+a,s="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+e+i+s+"]");function u(f){return d.test(f)}return Tv=u,Tv}var Cv,QE;function j$(){if(QE)return Cv;QE=1;function e(t){return t.split("")}return Cv=e,Cv}var Av,JE;function w$(){if(JE)return Av;JE=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=t+r+a,s="\\ufe0e\\ufe0f",l="["+e+"]",d="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+u+")",p="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",j=f+"?",b="["+s+"]?",y="(?:"+v+"(?:"+[p,m,x].join("|")+")"+b+j+")*",C=b+j+y,E="(?:"+[p+d+"?",d,m,x,l].join("|")+")",O=RegExp(u+"(?="+u+")|"+E+C,"g");function S(T){return T.match(O)||[]}return Av=S,Av}var Ev,ZE;function S$(){if(ZE)return Ev;ZE=1;var e=j$(),t=eD(),r=w$();function a(i){return t(i)?r(i):e(i)}return Ev=a,Ev}var Ov,eO;function N$(){if(eO)return Ov;eO=1;var e=b$(),t=eD(),r=S$(),a=X3();function i(s){return function(l){l=a(l);var d=t(l)?r(l):void 0,u=d?d[0]:l.charAt(0),f=d?e(d,1).join(""):l.slice(1);return u[s]()+f}}return Ov=i,Ov}var _v,tO;function T$(){if(tO)return _v;tO=1;var e=N$(),t=e("toUpperCase");return _v=t,_v}var C$=T$();const Og=Gr(C$);function Jr(e){return function(){return e}}const tD=Math.cos,fm=Math.sin,Qi=Math.sqrt,hm=Math.PI,_g=2*hm,zj=Math.PI,$j=2*zj,xl=1e-6,A$=$j-xl;function rD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function E$(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rD;const r=10**t;return function(a){this._+=a[0];for(let i=1,s=a.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+a[i]}}class O${constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rD:E$(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,i){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(t,r,a,i,s,l){this._append`C${+t},${+r},${+a},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,r,a,i,s){if(t=+t,r=+r,a=+a,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,d=this._y1,u=a-t,f=i-r,p=l-t,m=d-r,x=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>xl)if(!(Math.abs(m*u-f*p)>xl)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let v=a-l,j=i-d,b=u*u+f*f,y=v*v+j*j,C=Math.sqrt(b),E=Math.sqrt(x),O=s*Math.tan((zj-Math.acos((b+x-y)/(2*C*E)))/2),S=O/E,T=O/C;Math.abs(S-1)>xl&&this._append`L${t+S*p},${r+S*m}`,this._append`A${s},${s},0,0,${+(m*v>p*j)},${this._x1=t+T*u},${this._y1=r+T*f}`}}arc(t,r,a,i,s,l){if(t=+t,r=+r,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(i),u=a*Math.sin(i),f=t+d,p=r+u,m=1^l,x=l?i-s:s-i;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>xl||Math.abs(this._y1-p)>xl)&&this._append`L${f},${p}`,a&&(x<0&&(x=x%$j+$j),x>A$?this._append`A${a},${a},0,1,${m},${t-d},${r-u}A${a},${a},0,1,${m},${this._x1=f},${this._y1=p}`:x>xl&&this._append`A${a},${a},0,${+(x>=zj)},${m},${this._x1=t+a*Math.cos(s)},${this._y1=r+a*Math.sin(s)}`)}rect(t,r,a,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function kw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new O$(t)}function Iw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nD(e){this._context=e}nD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function kg(e){return new nD(e)}function aD(e){return e[0]}function iD(e){return e[1]}function sD(e,t){var r=Jr(!0),a=null,i=kg,s=null,l=kw(d);e=typeof e=="function"?e:e===void 0?aD:Jr(e),t=typeof t=="function"?t:t===void 0?iD:Jr(t);function d(u){var f,p=(u=Iw(u)).length,m,x=!1,v;for(a==null&&(s=i(v=l())),f=0;f<=p;++f)!(f<p&&r(m=u[f],f,u))===x&&((x=!x)?s.lineStart():s.lineEnd()),x&&s.point(+e(m,f,u),+t(m,f,u));if(v)return s=null,v+""||null}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:Jr(+u),d):e},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:Jr(+u),d):t},d.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Jr(!!u),d):r},d.curve=function(u){return arguments.length?(i=u,a!=null&&(s=i(a)),d):i},d.context=function(u){return arguments.length?(u==null?a=s=null:s=i(a=u),d):a},d}function Op(e,t,r){var a=null,i=Jr(!0),s=null,l=kg,d=null,u=kw(f);e=typeof e=="function"?e:e===void 0?aD:Jr(+e),t=typeof t=="function"?t:Jr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?iD:Jr(+r);function f(m){var x,v,j,b=(m=Iw(m)).length,y,C=!1,E,O=new Array(b),S=new Array(b);for(s==null&&(d=l(E=u())),x=0;x<=b;++x){if(!(x<b&&i(y=m[x],x,m))===C)if(C=!C)v=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=x-1;j>=v;--j)d.point(O[j],S[j]);d.lineEnd(),d.areaEnd()}C&&(O[x]=+e(y,x,m),S[x]=+t(y,x,m),d.point(a?+a(y,x,m):O[x],r?+r(y,x,m):S[x]))}if(E)return d=null,E+""||null}function p(){return sD().defined(i).curve(l).context(s)}return f.x=function(m){return arguments.length?(e=typeof m=="function"?m:Jr(+m),a=null,f):e},f.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Jr(+m),f):e},f.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:Jr(+m),f):a},f.y=function(m){return arguments.length?(t=typeof m=="function"?m:Jr(+m),r=null,f):t},f.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Jr(+m),f):t},f.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Jr(+m),f):r},f.lineX0=f.lineY0=function(){return p().x(e).y(t)},f.lineY1=function(){return p().x(e).y(r)},f.lineX1=function(){return p().x(a).y(t)},f.defined=function(m){return arguments.length?(i=typeof m=="function"?m:Jr(!!m),f):i},f.curve=function(m){return arguments.length?(l=m,s!=null&&(d=l(s)),f):l},f.context=function(m){return arguments.length?(m==null?s=d=null:d=l(s=m),f):s},f}class oD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function _$(e){return new oD(e,!0)}function k$(e){return new oD(e,!1)}const Dw={draw(e,t){const r=Qi(t/hm);e.moveTo(r,0),e.arc(0,0,r,0,_g)}},I$={draw(e,t){const r=Qi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},lD=Qi(1/3),D$=lD*2,R$={draw(e,t){const r=Qi(t/D$),a=r*lD;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},P$={draw(e,t){const r=Qi(t),a=-r/2;e.rect(a,a,r,r)}},M$=.8908130915292852,cD=fm(hm/10)/fm(7*hm/10),B$=fm(_g/10)*cD,F$=-tD(_g/10)*cD,L$={draw(e,t){const r=Qi(t*M$),a=B$*r,i=F$*r;e.moveTo(0,-r),e.lineTo(a,i);for(let s=1;s<5;++s){const l=_g*s/5,d=tD(l),u=fm(l);e.lineTo(u*r,-d*r),e.lineTo(d*a-u*i,u*a+d*i)}e.closePath()}},kv=Qi(3),z$={draw(e,t){const r=-Qi(t/(kv*3));e.moveTo(0,r*2),e.lineTo(-kv*r,-r),e.lineTo(kv*r,-r),e.closePath()}},gi=-.5,xi=Qi(3)/2,Uj=1/Qi(12),$$=(Uj/2+1)*3,U$={draw(e,t){const r=Qi(t/$$),a=r/2,i=r*Uj,s=a,l=r*Uj+r,d=-s,u=l;e.moveTo(a,i),e.lineTo(s,l),e.lineTo(d,u),e.lineTo(gi*a-xi*i,xi*a+gi*i),e.lineTo(gi*s-xi*l,xi*s+gi*l),e.lineTo(gi*d-xi*u,xi*d+gi*u),e.lineTo(gi*a+xi*i,gi*i-xi*a),e.lineTo(gi*s+xi*l,gi*l-xi*s),e.lineTo(gi*d+xi*u,gi*u-xi*d),e.closePath()}};function q$(e,t){let r=null,a=kw(i);e=typeof e=="function"?e:Jr(e||Dw),t=typeof t=="function"?t:Jr(t===void 0?64:+t);function i(){let s;if(r||(r=s=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Jr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Jr(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function pm(){}function mm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function dD(e){this._context=e}dD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function W$(e){return new dD(e)}function uD(e){this._context=e}uD.prototype={areaStart:pm,areaEnd:pm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function H$(e){return new uD(e)}function fD(e){this._context=e}fD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:mm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function G$(e){return new fD(e)}function hD(e){this._context=e}hD.prototype={areaStart:pm,areaEnd:pm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function K$(e){return new hD(e)}function rO(e){return e<0?-1:1}function nO(e,t,r){var a=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(a||i<0&&-0),l=(r-e._y1)/(i||a<0&&-0),d=(s*i+l*a)/(a+i);return(rO(s)+rO(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(d))||0}function aO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Iv(e,t,r){var a=e._x0,i=e._y0,s=e._x1,l=e._y1,d=(s-a)/3;e._context.bezierCurveTo(a+d,i+d*t,s-d,l-d*r,s,l)}function gm(e){this._context=e}gm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Iv(this,this._t0,aO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Iv(this,aO(this,r=nO(this,e,t)),r);break;default:Iv(this,this._t0,r=nO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function pD(e){this._context=new mD(e)}(pD.prototype=Object.create(gm.prototype)).point=function(e,t){gm.prototype.point.call(this,t,e)};function mD(e){this._context=e}mD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,i,s){this._context.bezierCurveTo(t,e,a,r,s,i)}};function V$(e){return new gm(e)}function Y$(e){return new pD(e)}function gD(e){this._context=e}gD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=iO(e),i=iO(t),s=0,l=1;l<r;++s,++l)this._context.bezierCurveTo(a[0][s],i[0][s],a[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function iO(e){var t,r=e.length-1,a,i=new Array(r),s=new Array(r),l=new Array(r);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=i[t]/s[t-1],s[t]-=a,l[t]-=a*l[t-1];for(i[r-1]=l[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function X$(e){return new gD(e)}function Ig(e,t){this._context=e,this._t=t}Ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Q$(e){return new Ig(e,.5)}function J$(e){return new Ig(e,0)}function Z$(e){return new Ig(e,1)}function Zc(e,t){if((l=e.length)>1)for(var r=1,a,i,s=e[t[0]],l,d=s.length;r<l;++r)for(i=s,s=e[t[r]],a=0;a<d;++a)s[a][1]+=s[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function qj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function e9(e,t){return e[t]}function t9(e){const t=[];return t.key=e,t}function r9(){var e=Jr([]),t=qj,r=Zc,a=e9;function i(s){var l=Array.from(e.apply(this,arguments),t9),d,u=l.length,f=-1,p;for(const m of s)for(d=0,++f;d<u;++d)(l[d][f]=[0,+a(m,l[d].key,f,s)]).data=m;for(d=0,p=Iw(t(l));d<u;++d)l[p[d]].index=d;return r(l,p),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Jr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(a=typeof s=="function"?s:Jr(+s),i):a},i.order=function(s){return arguments.length?(t=s==null?qj:typeof s=="function"?s:Jr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Zc,i):r},i}function n9(e,t){if((a=e.length)>0){for(var r,a,i=0,s=e[0].length,l;i<s;++i){for(l=r=0;r<a;++r)l+=e[r][i][1]||0;if(l)for(r=0;r<a;++r)e[r][i][1]/=l}Zc(e,t)}}function a9(e,t){if((i=e.length)>0){for(var r=0,a=e[t[0]],i,s=a.length;r<s;++r){for(var l=0,d=0;l<i;++l)d+=e[l][r][1]||0;a[r][1]+=a[r][0]=-d/2}Zc(e,t)}}function i9(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,a=1,i,s,l;a<s;++a){for(var d=0,u=0,f=0;d<l;++d){for(var p=e[t[d]],m=p[a][1]||0,x=p[a-1][1]||0,v=(m-x)/2,j=0;j<d;++j){var b=e[t[j]],y=b[a][1]||0,C=b[a-1][1]||0;v+=y-C}u+=m,f+=v*m}i[a-1][1]+=i[a-1][0]=r,u&&(r-=f/u)}i[a-1][1]+=i[a-1][0]=r,Zc(e,t)}}function pf(e){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(e)}var s9=["type","size","sizeType"];function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Wj.apply(this,arguments)}function sO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function oO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(r),!0).forEach(function(a){o9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function o9(e,t,r){return t=l9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l9(e){var t=c9(e,"string");return pf(t)=="symbol"?t:t+""}function c9(e,t){if(pf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(pf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d9(e,t){if(e==null)return{};var r=u9(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function u9(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var xD={symbolCircle:Dw,symbolCross:I$,symbolDiamond:R$,symbolSquare:P$,symbolStar:L$,symbolTriangle:z$,symbolWye:U$},f9=Math.PI/180,h9=function(t){var r="symbol".concat(Og(t));return xD[r]||Dw},p9=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*f9;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},m9=function(t,r){xD["symbol".concat(Og(t))]=r},Rw=function(t){var r=t.type,a=r===void 0?"circle":r,i=t.size,s=i===void 0?64:i,l=t.sizeType,d=l===void 0?"area":l,u=d9(t,s9),f=oO(oO({},u),{},{type:a,size:s,sizeType:d}),p=function(){var y=h9(a),C=q$().type(y).size(p9(s,d,a));return C()},m=f.className,x=f.cx,v=f.cy,j=gr(f,!0);return x===+x&&v===+v&&s===+s?Ie.createElement("path",Wj({},j,{className:jr("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(v,")"),d:p()})):null};Rw.registerSymbol=m9;function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hj.apply(this,arguments)}function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function g9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lO(Object(r),!0).forEach(function(a){mf(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function x9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y9(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vD(a.key),a)}}function v9(e,t,r){return t&&y9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b9(e,t,r){return t=xm(t),j9(e,yD()?Reflect.construct(t,r||[],xm(e).constructor):t.apply(e,r))}function j9(e,t){if(t&&(ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w9(e)}function w9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yD=function(){return!!e})()}function xm(e){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xm(e)}function S9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}function Gj(e,t){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},Gj(e,t)}function mf(e,t,r){return t=vD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vD(e){var t=N9(e,"string");return ed(t)=="symbol"?t:t+""}function N9(e,t){if(ed(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ed(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yi=32,Pw=function(e){function t(){return x9(this,t),b9(this,t,arguments)}return S9(t,e),v9(t,[{key:"renderIcon",value:function(a){var i=this.props.inactiveColor,s=yi/2,l=yi/6,d=yi/3,u=a.inactive?i:a.color;if(a.type==="plainline")return Ie.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:s,x2:yi,y2:s,className:"recharts-legend-icon"});if(a.type==="line")return Ie.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(s,"h").concat(d,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*d,",").concat(s,`
            H`).concat(yi,"M").concat(2*d,",").concat(s,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(d,",").concat(s),className:"recharts-legend-icon"});if(a.type==="rect")return Ie.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(yi/8,"h").concat(yi,"v").concat(yi*3/4,"h").concat(-yi,"z"),className:"recharts-legend-icon"});if(Ie.isValidElement(a.legendIcon)){var f=g9({},a);return delete f.legendIcon,Ie.cloneElement(a.legendIcon,f)}return Ie.createElement(Rw,{fill:u,cx:s,cy:s,size:yi,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,i=this.props,s=i.payload,l=i.iconSize,d=i.layout,u=i.formatter,f=i.inactiveColor,p={x:0,y:0,width:yi,height:yi},m={display:d==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(v,j){var b=v.formatter||u,y=jr(mf(mf({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",v.inactive));if(v.type==="none")return null;var C=lr(v.value)?null:v.value;Gs(!lr(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var E=v.inactive?f:v.color;return Ie.createElement("li",Hj({className:y,style:m,key:"legend-item-".concat(j)},um(a.props,v,j)),Ie.createElement(Fj,{width:l,height:l,viewBox:p,style:x},a.renderIcon(v)),Ie.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},b?b(C,v,j):C))})}},{key:"render",value:function(){var a=this.props,i=a.payload,s=a.layout,l=a.align;if(!i||!i.length)return null;var d={padding:0,margin:0,textAlign:s==="horizontal"?l:"left"};return Ie.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}])}(N.PureComponent);mf(Pw,"displayName","Legend");mf(Pw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Dv,cO;function T9(){if(cO)return Dv;cO=1;var e=Cg();function t(){this.__data__=new e,this.size=0}return Dv=t,Dv}var Rv,dO;function C9(){if(dO)return Rv;dO=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return Rv=e,Rv}var Pv,uO;function A9(){if(uO)return Pv;uO=1;function e(t){return this.__data__.get(t)}return Pv=e,Pv}var Mv,fO;function E9(){if(fO)return Mv;fO=1;function e(t){return this.__data__.has(t)}return Mv=e,Mv}var Bv,hO;function O9(){if(hO)return Bv;hO=1;var e=Cg(),t=Tw(),r=Cw(),a=200;function i(s,l){var d=this.__data__;if(d instanceof e){var u=d.__data__;if(!t||u.length<a-1)return u.push([s,l]),this.size=++d.size,this;d=this.__data__=new r(u)}return d.set(s,l),this.size=d.size,this}return Bv=i,Bv}var Fv,pO;function bD(){if(pO)return Fv;pO=1;var e=Cg(),t=T9(),r=C9(),a=A9(),i=E9(),s=O9();function l(d){var u=this.__data__=new e(d);this.size=u.size}return l.prototype.clear=t,l.prototype.delete=r,l.prototype.get=a,l.prototype.has=i,l.prototype.set=s,Fv=l,Fv}var Lv,mO;function _9(){if(mO)return Lv;mO=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Lv=t,Lv}var zv,gO;function k9(){if(gO)return zv;gO=1;function e(t){return this.__data__.has(t)}return zv=e,zv}var $v,xO;function jD(){if(xO)return $v;xO=1;var e=Cw(),t=_9(),r=k9();function a(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new e;++s<l;)this.add(i[s])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,$v=a,$v}var Uv,yO;function wD(){if(yO)return Uv;yO=1;function e(t,r){for(var a=-1,i=t==null?0:t.length;++a<i;)if(r(t[a],a,t))return!0;return!1}return Uv=e,Uv}var qv,vO;function SD(){if(vO)return qv;vO=1;function e(t,r){return t.has(r)}return qv=e,qv}var Wv,bO;function ND(){if(bO)return Wv;bO=1;var e=jD(),t=wD(),r=SD(),a=1,i=2;function s(l,d,u,f,p,m){var x=u&a,v=l.length,j=d.length;if(v!=j&&!(x&&j>v))return!1;var b=m.get(l),y=m.get(d);if(b&&y)return b==d&&y==l;var C=-1,E=!0,O=u&i?new e:void 0;for(m.set(l,d),m.set(d,l);++C<v;){var S=l[C],T=d[C];if(f)var k=x?f(T,S,C,d,l,m):f(S,T,C,l,d,m);if(k!==void 0){if(k)continue;E=!1;break}if(O){if(!t(d,function(D,F){if(!r(O,F)&&(S===D||p(S,D,u,f,m)))return O.push(F)})){E=!1;break}}else if(!(S===T||p(S,T,u,f,m))){E=!1;break}}return m.delete(l),m.delete(d),E}return Wv=s,Wv}var Hv,jO;function I9(){if(jO)return Hv;jO=1;var e=ys(),t=e.Uint8Array;return Hv=t,Hv}var Gv,wO;function D9(){if(wO)return Gv;wO=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(i,s){a[++r]=[s,i]}),a}return Gv=e,Gv}var Kv,SO;function Mw(){if(SO)return Kv;SO=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(i){a[++r]=i}),a}return Kv=e,Kv}var Vv,NO;function R9(){if(NO)return Vv;NO=1;var e=oh(),t=I9(),r=Nw(),a=ND(),i=D9(),s=Mw(),l=1,d=2,u="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Map]",x="[object Number]",v="[object RegExp]",j="[object Set]",b="[object String]",y="[object Symbol]",C="[object ArrayBuffer]",E="[object DataView]",O=e?e.prototype:void 0,S=O?O.valueOf:void 0;function T(k,D,F,B,M,L,A){switch(F){case E:if(k.byteLength!=D.byteLength||k.byteOffset!=D.byteOffset)return!1;k=k.buffer,D=D.buffer;case C:return!(k.byteLength!=D.byteLength||!L(new t(k),new t(D)));case u:case f:case x:return r(+k,+D);case p:return k.name==D.name&&k.message==D.message;case v:case b:return k==D+"";case m:var U=i;case j:var P=B&l;if(U||(U=s),k.size!=D.size&&!P)return!1;var I=A.get(k);if(I)return I==D;B|=d,A.set(k,D);var R=a(U(k),U(D),B,M,L,A);return A.delete(k),R;case y:if(S)return S.call(k)==S.call(D)}return!1}return Vv=T,Vv}var Yv,TO;function TD(){if(TO)return Yv;TO=1;function e(t,r){for(var a=-1,i=r.length,s=t.length;++a<i;)t[s+a]=r[a];return t}return Yv=e,Yv}var Xv,CO;function P9(){if(CO)return Xv;CO=1;var e=TD(),t=Ua();function r(a,i,s){var l=i(a);return t(a)?l:e(l,s(a))}return Xv=r,Xv}var Qv,AO;function M9(){if(AO)return Qv;AO=1;function e(t,r){for(var a=-1,i=t==null?0:t.length,s=0,l=[];++a<i;){var d=t[a];r(d,a,t)&&(l[s++]=d)}return l}return Qv=e,Qv}var Jv,EO;function B9(){if(EO)return Jv;EO=1;function e(){return[]}return Jv=e,Jv}var Zv,OO;function F9(){if(OO)return Zv;OO=1;var e=M9(),t=B9(),r=Object.prototype,a=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(l){return l==null?[]:(l=Object(l),e(i(l),function(d){return a.call(l,d)}))}:t;return Zv=s,Zv}var eb,_O;function L9(){if(_O)return eb;_O=1;function e(t,r){for(var a=-1,i=Array(t);++a<t;)i[a]=r(a);return i}return eb=e,eb}var tb,kO;function z9(){if(kO)return tb;kO=1;var e=io(),t=so(),r="[object Arguments]";function a(i){return t(i)&&e(i)==r}return tb=a,tb}var rb,IO;function Bw(){if(IO)return rb;IO=1;var e=z9(),t=so(),r=Object.prototype,a=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(l){return t(l)&&a.call(l,"callee")&&!i.call(l,"callee")};return rb=s,rb}var Yu={exports:{}},nb,DO;function $9(){if(DO)return nb;DO=1;function e(){return!1}return nb=e,nb}Yu.exports;var RO;function CD(){return RO||(RO=1,function(e,t){var r=ys(),a=$9(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,l=s&&s.exports===i,d=l?r.Buffer:void 0,u=d?d.isBuffer:void 0,f=u||a;e.exports=f}(Yu,Yu.exports)),Yu.exports}var ab,PO;function Fw(){if(PO)return ab;PO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,i){var s=typeof a;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<i}return ab=r,ab}var ib,MO;function Lw(){if(MO)return ib;MO=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return ib=t,ib}var sb,BO;function U9(){if(BO)return sb;BO=1;var e=io(),t=Lw(),r=so(),a="[object Arguments]",i="[object Array]",s="[object Boolean]",l="[object Date]",d="[object Error]",u="[object Function]",f="[object Map]",p="[object Number]",m="[object Object]",x="[object RegExp]",v="[object Set]",j="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",C="[object DataView]",E="[object Float32Array]",O="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",k="[object Int32Array]",D="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",M="[object Uint32Array]",L={};L[E]=L[O]=L[S]=L[T]=L[k]=L[D]=L[F]=L[B]=L[M]=!0,L[a]=L[i]=L[y]=L[s]=L[C]=L[l]=L[d]=L[u]=L[f]=L[p]=L[m]=L[x]=L[v]=L[j]=L[b]=!1;function A(U){return r(U)&&t(U.length)&&!!L[e(U)]}return sb=A,sb}var ob,FO;function AD(){if(FO)return ob;FO=1;function e(t){return function(r){return t(r)}}return ob=e,ob}var Xu={exports:{}};Xu.exports;var LO;function q9(){return LO||(LO=1,function(e,t){var r=K3(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,l=s&&r.process,d=function(){try{var u=i&&i.require&&i.require("util").types;return u||l&&l.binding&&l.binding("util")}catch{}}();e.exports=d}(Xu,Xu.exports)),Xu.exports}var lb,zO;function ED(){if(zO)return lb;zO=1;var e=U9(),t=AD(),r=q9(),a=r&&r.isTypedArray,i=a?t(a):e;return lb=i,lb}var cb,$O;function W9(){if($O)return cb;$O=1;var e=L9(),t=Bw(),r=Ua(),a=CD(),i=Fw(),s=ED(),l=Object.prototype,d=l.hasOwnProperty;function u(f,p){var m=r(f),x=!m&&t(f),v=!m&&!x&&a(f),j=!m&&!x&&!v&&s(f),b=m||x||v||j,y=b?e(f.length,String):[],C=y.length;for(var E in f)(p||d.call(f,E))&&!(b&&(E=="length"||v&&(E=="offset"||E=="parent")||j&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||i(E,C)))&&y.push(E);return y}return cb=u,cb}var db,UO;function H9(){if(UO)return db;UO=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,i=typeof a=="function"&&a.prototype||e;return r===i}return db=t,db}var ub,qO;function OD(){if(qO)return ub;qO=1;function e(t,r){return function(a){return t(r(a))}}return ub=e,ub}var fb,WO;function G9(){if(WO)return fb;WO=1;var e=OD(),t=e(Object.keys,Object);return fb=t,fb}var hb,HO;function K9(){if(HO)return hb;HO=1;var e=H9(),t=G9(),r=Object.prototype,a=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var l=[];for(var d in Object(s))a.call(s,d)&&d!="constructor"&&l.push(d);return l}return hb=i,hb}var pb,GO;function dh(){if(GO)return pb;GO=1;var e=Sw(),t=Lw();function r(a){return a!=null&&t(a.length)&&!e(a)}return pb=r,pb}var mb,KO;function Dg(){if(KO)return mb;KO=1;var e=W9(),t=K9(),r=dh();function a(i){return r(i)?e(i):t(i)}return mb=a,mb}var gb,VO;function V9(){if(VO)return gb;VO=1;var e=P9(),t=F9(),r=Dg();function a(i){return e(i,r,t)}return gb=a,gb}var xb,YO;function Y9(){if(YO)return xb;YO=1;var e=V9(),t=1,r=Object.prototype,a=r.hasOwnProperty;function i(s,l,d,u,f,p){var m=d&t,x=e(s),v=x.length,j=e(l),b=j.length;if(v!=b&&!m)return!1;for(var y=v;y--;){var C=x[y];if(!(m?C in l:a.call(l,C)))return!1}var E=p.get(s),O=p.get(l);if(E&&O)return E==l&&O==s;var S=!0;p.set(s,l),p.set(l,s);for(var T=m;++y<v;){C=x[y];var k=s[C],D=l[C];if(u)var F=m?u(D,k,C,l,s,p):u(k,D,C,s,l,p);if(!(F===void 0?k===D||f(k,D,d,u,p):F)){S=!1;break}T||(T=C=="constructor")}if(S&&!T){var B=s.constructor,M=l.constructor;B!=M&&"constructor"in s&&"constructor"in l&&!(typeof B=="function"&&B instanceof B&&typeof M=="function"&&M instanceof M)&&(S=!1)}return p.delete(s),p.delete(l),S}return xb=i,xb}var yb,XO;function X9(){if(XO)return yb;XO=1;var e=$l(),t=ys(),r=e(t,"DataView");return yb=r,yb}var vb,QO;function Q9(){if(QO)return vb;QO=1;var e=$l(),t=ys(),r=e(t,"Promise");return vb=r,vb}var bb,JO;function _D(){if(JO)return bb;JO=1;var e=$l(),t=ys(),r=e(t,"Set");return bb=r,bb}var jb,ZO;function J9(){if(ZO)return jb;ZO=1;var e=$l(),t=ys(),r=e(t,"WeakMap");return jb=r,jb}var wb,e_;function Z9(){if(e_)return wb;e_=1;var e=X9(),t=Tw(),r=Q9(),a=_D(),i=J9(),s=io(),l=V3(),d="[object Map]",u="[object Object]",f="[object Promise]",p="[object Set]",m="[object WeakMap]",x="[object DataView]",v=l(e),j=l(t),b=l(r),y=l(a),C=l(i),E=s;return(e&&E(new e(new ArrayBuffer(1)))!=x||t&&E(new t)!=d||r&&E(r.resolve())!=f||a&&E(new a)!=p||i&&E(new i)!=m)&&(E=function(O){var S=s(O),T=S==u?O.constructor:void 0,k=T?l(T):"";if(k)switch(k){case v:return x;case j:return d;case b:return f;case y:return p;case C:return m}return S}),wb=E,wb}var Sb,t_;function eU(){if(t_)return Sb;t_=1;var e=bD(),t=ND(),r=R9(),a=Y9(),i=Z9(),s=Ua(),l=CD(),d=ED(),u=1,f="[object Arguments]",p="[object Array]",m="[object Object]",x=Object.prototype,v=x.hasOwnProperty;function j(b,y,C,E,O,S){var T=s(b),k=s(y),D=T?p:i(b),F=k?p:i(y);D=D==f?m:D,F=F==f?m:F;var B=D==m,M=F==m,L=D==F;if(L&&l(b)){if(!l(y))return!1;T=!0,B=!1}if(L&&!B)return S||(S=new e),T||d(b)?t(b,y,C,E,O,S):r(b,y,D,C,E,O,S);if(!(C&u)){var A=B&&v.call(b,"__wrapped__"),U=M&&v.call(y,"__wrapped__");if(A||U){var P=A?b.value():b,I=U?y.value():y;return S||(S=new e),O(P,I,C,E,S)}}return L?(S||(S=new e),a(b,y,C,E,O,S)):!1}return Sb=j,Sb}var Nb,r_;function zw(){if(r_)return Nb;r_=1;var e=eU(),t=so();function r(a,i,s,l,d){return a===i?!0:a==null||i==null||!t(a)&&!t(i)?a!==a&&i!==i:e(a,i,s,l,r,d)}return Nb=r,Nb}var Tb,n_;function tU(){if(n_)return Tb;n_=1;var e=bD(),t=zw(),r=1,a=2;function i(s,l,d,u){var f=d.length,p=f,m=!u;if(s==null)return!p;for(s=Object(s);f--;){var x=d[f];if(m&&x[2]?x[1]!==s[x[0]]:!(x[0]in s))return!1}for(;++f<p;){x=d[f];var v=x[0],j=s[v],b=x[1];if(m&&x[2]){if(j===void 0&&!(v in s))return!1}else{var y=new e;if(u)var C=u(j,b,v,s,l,y);if(!(C===void 0?t(b,j,r|a,u,y):C))return!1}}return!0}return Tb=i,Tb}var Cb,a_;function kD(){if(a_)return Cb;a_=1;var e=Ho();function t(r){return r===r&&!e(r)}return Cb=t,Cb}var Ab,i_;function rU(){if(i_)return Ab;i_=1;var e=kD(),t=Dg();function r(a){for(var i=t(a),s=i.length;s--;){var l=i[s],d=a[l];i[s]=[l,d,e(d)]}return i}return Ab=r,Ab}var Eb,s_;function ID(){if(s_)return Eb;s_=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return Eb=e,Eb}var Ob,o_;function nU(){if(o_)return Ob;o_=1;var e=tU(),t=rU(),r=ID();function a(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(l){return l===i||e(l,i,s)}}return Ob=a,Ob}var _b,l_;function aU(){if(l_)return _b;l_=1;function e(t,r){return t!=null&&r in Object(t)}return _b=e,_b}var kb,c_;function iU(){if(c_)return kb;c_=1;var e=Q3(),t=Bw(),r=Ua(),a=Fw(),i=Lw(),s=Eg();function l(d,u,f){u=e(u,d);for(var p=-1,m=u.length,x=!1;++p<m;){var v=s(u[p]);if(!(x=d!=null&&f(d,v)))break;d=d[v]}return x||++p!=m?x:(m=d==null?0:d.length,!!m&&i(m)&&a(v,m)&&(r(d)||t(d)))}return kb=l,kb}var Ib,d_;function sU(){if(d_)return Ib;d_=1;var e=aU(),t=iU();function r(a,i){return a!=null&&t(a,i,e)}return Ib=r,Ib}var Db,u_;function oU(){if(u_)return Db;u_=1;var e=zw(),t=J3(),r=sU(),a=ww(),i=kD(),s=ID(),l=Eg(),d=1,u=2;function f(p,m){return a(p)&&i(m)?s(l(p),m):function(x){var v=t(x,p);return v===void 0&&v===m?r(x,p):e(m,v,d|u)}}return Db=f,Db}var Rb,f_;function _d(){if(f_)return Rb;f_=1;function e(t){return t}return Rb=e,Rb}var Pb,h_;function lU(){if(h_)return Pb;h_=1;function e(t){return function(r){return r==null?void 0:r[t]}}return Pb=e,Pb}var Mb,p_;function cU(){if(p_)return Mb;p_=1;var e=Ew();function t(r){return function(a){return e(a,r)}}return Mb=t,Mb}var Bb,m_;function dU(){if(m_)return Bb;m_=1;var e=lU(),t=cU(),r=ww(),a=Eg();function i(s){return r(s)?e(a(s)):t(s)}return Bb=i,Bb}var Fb,g_;function Go(){if(g_)return Fb;g_=1;var e=nU(),t=oU(),r=_d(),a=Ua(),i=dU();function s(l){return typeof l=="function"?l:l==null?r:typeof l=="object"?a(l)?t(l[0],l[1]):e(l):i(l)}return Fb=s,Fb}var Lb,x_;function DD(){if(x_)return Lb;x_=1;function e(t,r,a,i){for(var s=t.length,l=a+(i?1:-1);i?l--:++l<s;)if(r(t[l],l,t))return l;return-1}return Lb=e,Lb}var zb,y_;function uU(){if(y_)return zb;y_=1;function e(t){return t!==t}return zb=e,zb}var $b,v_;function fU(){if(v_)return $b;v_=1;function e(t,r,a){for(var i=a-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return $b=e,$b}var Ub,b_;function hU(){if(b_)return Ub;b_=1;var e=DD(),t=uU(),r=fU();function a(i,s,l){return s===s?r(i,s,l):e(i,t,l)}return Ub=a,Ub}var qb,j_;function pU(){if(j_)return qb;j_=1;var e=hU();function t(r,a){var i=r==null?0:r.length;return!!i&&e(r,a,0)>-1}return qb=t,qb}var Wb,w_;function mU(){if(w_)return Wb;w_=1;function e(t,r,a){for(var i=-1,s=t==null?0:t.length;++i<s;)if(a(r,t[i]))return!0;return!1}return Wb=e,Wb}var Hb,S_;function gU(){if(S_)return Hb;S_=1;function e(){}return Hb=e,Hb}var Gb,N_;function xU(){if(N_)return Gb;N_=1;var e=_D(),t=gU(),r=Mw(),a=1/0,i=e&&1/r(new e([,-0]))[1]==a?function(s){return new e(s)}:t;return Gb=i,Gb}var Kb,T_;function yU(){if(T_)return Kb;T_=1;var e=jD(),t=pU(),r=mU(),a=SD(),i=xU(),s=Mw(),l=200;function d(u,f,p){var m=-1,x=t,v=u.length,j=!0,b=[],y=b;if(p)j=!1,x=r;else if(v>=l){var C=f?null:i(u);if(C)return s(C);j=!1,x=a,y=new e}else y=f?[]:b;e:for(;++m<v;){var E=u[m],O=f?f(E):E;if(E=p||E!==0?E:0,j&&O===O){for(var S=y.length;S--;)if(y[S]===O)continue e;f&&y.push(O),b.push(E)}else x(y,O,p)||(y!==b&&y.push(O),b.push(E))}return b}return Kb=d,Kb}var Vb,C_;function vU(){if(C_)return Vb;C_=1;var e=Go(),t=yU();function r(a,i){return a&&a.length?t(a,e(i,2)):[]}return Vb=r,Vb}var bU=vU();const A_=Gr(bU);function RD(e,t,r){return t===!0?A_(e,r):lr(t)?A_(e,t):e}function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}var jU=["ref"];function E_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E_(Object(r),!0).forEach(function(a){Rg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E_(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O_(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,MD(a.key),a)}}function SU(e,t,r){return t&&O_(e.prototype,t),r&&O_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NU(e,t,r){return t=ym(t),TU(e,PD()?Reflect.construct(t,r||[],ym(e).constructor):t.apply(e,r))}function TU(e,t){if(t&&(td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CU(e)}function CU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PD=function(){return!!e})()}function ym(e){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ym(e)}function AU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kj(e,t)}function Kj(e,t){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},Kj(e,t)}function Rg(e,t,r){return t=MD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MD(e){var t=EU(e,"string");return td(t)=="symbol"?t:t+""}function EU(e,t){if(td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(td(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function OU(e,t){if(e==null)return{};var r=_U(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function _U(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function kU(e){return e.value}function IU(e,t){if(Ie.isValidElement(e))return Ie.cloneElement(e,t);if(typeof e=="function")return Ie.createElement(e,t);t.ref;var r=OU(t,jU);return Ie.createElement(Pw,r)}var __=1,qc=function(e){function t(){var r;wU(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=NU(this,t,[].concat(i)),Rg(r,"lastBoundingBox",{width:-1,height:-1}),r}return AU(t,e),SU(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>__||Math.abs(i.height-this.lastBoundingBox.height)>__)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,a&&a(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ms({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var i=this.props,s=i.layout,l=i.align,d=i.verticalAlign,u=i.margin,f=i.chartWidth,p=i.chartHeight,m,x;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(l==="center"&&s==="vertical"){var v=this.getBBoxSnapshot();m={left:((f||0)-v.width)/2}}else m=l==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(d==="middle"){var j=this.getBBoxSnapshot();x={top:((p||0)-j.height)/2}}else x=d==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return Ms(Ms({},m),x)}},{key:"render",value:function(){var a=this,i=this.props,s=i.content,l=i.width,d=i.height,u=i.wrapperStyle,f=i.payloadUniqBy,p=i.payload,m=Ms(Ms({position:"absolute",width:l||"auto",height:d||"auto"},this.getDefaultPosition(u)),u);return Ie.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(v){a.wrapperNode=v}},IU(s,Ms(Ms({},this.props),{},{payload:RD(p,f,kU)})))}}],[{key:"getWithHeight",value:function(a,i){var s=Ms(Ms({},this.defaultProps),a.props),l=s.layout;return l==="vertical"&&St(a.props.height)?{height:a.props.height}:l==="horizontal"?{width:a.props.width||i}:null}}])}(N.PureComponent);Rg(qc,"displayName","Legend");Rg(qc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Yb,k_;function DU(){if(k_)return Yb;k_=1;var e=oh(),t=Bw(),r=Ua(),a=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(a&&s&&s[a])}return Yb=i,Yb}var Xb,I_;function BD(){if(I_)return Xb;I_=1;var e=TD(),t=DU();function r(a,i,s,l,d){var u=-1,f=a.length;for(s||(s=t),d||(d=[]);++u<f;){var p=a[u];i>0&&s(p)?i>1?r(p,i-1,s,l,d):e(d,p):l||(d[d.length]=p)}return d}return Xb=r,Xb}var Qb,D_;function RU(){if(D_)return Qb;D_=1;function e(t){return function(r,a,i){for(var s=-1,l=Object(r),d=i(r),u=d.length;u--;){var f=d[t?u:++s];if(a(l[f],f,l)===!1)break}return r}}return Qb=e,Qb}var Jb,R_;function PU(){if(R_)return Jb;R_=1;var e=RU(),t=e();return Jb=t,Jb}var Zb,P_;function FD(){if(P_)return Zb;P_=1;var e=PU(),t=Dg();function r(a,i){return a&&e(a,i,t)}return Zb=r,Zb}var e1,M_;function MU(){if(M_)return e1;M_=1;var e=dh();function t(r,a){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var l=i.length,d=a?l:-1,u=Object(i);(a?d--:++d<l)&&s(u[d],d,u)!==!1;);return i}}return e1=t,e1}var t1,B_;function $w(){if(B_)return t1;B_=1;var e=FD(),t=MU(),r=t(e);return t1=r,t1}var r1,F_;function LD(){if(F_)return r1;F_=1;var e=$w(),t=dh();function r(a,i){var s=-1,l=t(a)?Array(a.length):[];return e(a,function(d,u,f){l[++s]=i(d,u,f)}),l}return r1=r,r1}var n1,L_;function BU(){if(L_)return n1;L_=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return n1=e,n1}var a1,z_;function FU(){if(z_)return a1;z_=1;var e=Ed();function t(r,a){if(r!==a){var i=r!==void 0,s=r===null,l=r===r,d=e(r),u=a!==void 0,f=a===null,p=a===a,m=e(a);if(!f&&!m&&!d&&r>a||d&&u&&p&&!f&&!m||s&&u&&p||!i&&p||!l)return 1;if(!s&&!d&&!m&&r<a||m&&i&&l&&!s&&!d||f&&i&&l||!u&&l||!p)return-1}return 0}return a1=t,a1}var i1,$_;function LU(){if($_)return i1;$_=1;var e=FU();function t(r,a,i){for(var s=-1,l=r.criteria,d=a.criteria,u=l.length,f=i.length;++s<u;){var p=e(l[s],d[s]);if(p){if(s>=f)return p;var m=i[s];return p*(m=="desc"?-1:1)}}return r.index-a.index}return i1=t,i1}var s1,U_;function zU(){if(U_)return s1;U_=1;var e=Aw(),t=Ew(),r=Go(),a=LD(),i=BU(),s=AD(),l=LU(),d=_d(),u=Ua();function f(p,m,x){m.length?m=e(m,function(b){return u(b)?function(y){return t(y,b.length===1?b[0]:b)}:b}):m=[d];var v=-1;m=e(m,s(r));var j=a(p,function(b,y,C){var E=e(m,function(O){return O(b)});return{criteria:E,index:++v,value:b}});return i(j,function(b,y){return l(b,y,x)})}return s1=f,s1}var o1,q_;function $U(){if(q_)return o1;q_=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return o1=e,o1}var l1,W_;function UU(){if(W_)return l1;W_=1;var e=$U(),t=Math.max;function r(a,i,s){return i=t(i===void 0?a.length-1:i,0),function(){for(var l=arguments,d=-1,u=t(l.length-i,0),f=Array(u);++d<u;)f[d]=l[i+d];d=-1;for(var p=Array(i+1);++d<i;)p[d]=l[d];return p[i]=s(f),e(a,this,p)}}return l1=r,l1}var c1,H_;function qU(){if(H_)return c1;H_=1;function e(t){return function(){return t}}return c1=e,c1}var d1,G_;function zD(){if(G_)return d1;G_=1;var e=$l(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return d1=t,d1}var u1,K_;function WU(){if(K_)return u1;K_=1;var e=qU(),t=zD(),r=_d(),a=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return u1=a,u1}var f1,V_;function HU(){if(V_)return f1;V_=1;var e=800,t=16,r=Date.now;function a(i){var s=0,l=0;return function(){var d=r(),u=t-(d-l);if(l=d,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return f1=a,f1}var h1,Y_;function GU(){if(Y_)return h1;Y_=1;var e=WU(),t=HU(),r=t(e);return h1=r,h1}var p1,X_;function KU(){if(X_)return p1;X_=1;var e=_d(),t=UU(),r=GU();function a(i,s){return r(t(i,s,e),i+"")}return p1=a,p1}var m1,Q_;function Pg(){if(Q_)return m1;Q_=1;var e=Nw(),t=dh(),r=Fw(),a=Ho();function i(s,l,d){if(!a(d))return!1;var u=typeof l;return(u=="number"?t(d)&&r(l,d.length):u=="string"&&l in d)?e(d[l],s):!1}return m1=i,m1}var g1,J_;function VU(){if(J_)return g1;J_=1;var e=BD(),t=zU(),r=KU(),a=Pg(),i=r(function(s,l){if(s==null)return[];var d=l.length;return d>1&&a(s,l[0],l[1])?l=[]:d>2&&a(l[0],l[1],l[2])&&(l=[l[0]]),t(s,e(l,1),[])});return g1=i,g1}var YU=VU();const Uw=Gr(YU);function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}function Vj(){return Vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vj.apply(this,arguments)}function XU(e,t){return eq(e)||ZU(e,t)||JU(e,t)||QU()}function QU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JU(e,t){if(e){if(typeof e=="string")return Z_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z_(e,t)}}function Z_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ZU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function eq(e){if(Array.isArray(e))return e}function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function x1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(a){tq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function tq(e,t,r){return t=rq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rq(e){var t=nq(e,"string");return gf(t)=="symbol"?t:t+""}function nq(e,t){if(gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(gf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aq(e){return Array.isArray(e)&&Rn(e[0])&&Rn(e[1])?e.join(" ~ "):e}var iq=function(t){var r=t.separator,a=r===void 0?" : ":r,i=t.contentStyle,s=i===void 0?{}:i,l=t.itemStyle,d=l===void 0?{}:l,u=t.labelStyle,f=u===void 0?{}:u,p=t.payload,m=t.formatter,x=t.itemSorter,v=t.wrapperClassName,j=t.labelClassName,b=t.label,y=t.labelFormatter,C=t.accessibilityLayer,E=C===void 0?!1:C,O=function(){if(p&&p.length){var A={padding:0,margin:0},U=(x?Uw(p,x):p).map(function(P,I){if(P.type==="none")return null;var R=x1({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},d),W=P.formatter||m||aq,Q=P.value,ge=P.name,q=Q,Y=ge;if(W&&q!=null&&Y!=null){var z=W(Q,ge,P,I,p);if(Array.isArray(z)){var ee=XU(z,2);q=ee[0],Y=ee[1]}else q=z}return Ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:R},Rn(Y)?Ie.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,Rn(Y)?Ie.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Ie.createElement("span",{className:"recharts-tooltip-item-value"},q),Ie.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return Ie.createElement("ul",{className:"recharts-tooltip-item-list",style:A},U)}return null},S=x1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),T=x1({margin:0},f),k=!pr(b),D=k?b:"",F=jr("recharts-default-tooltip",v),B=jr("recharts-tooltip-label",j);k&&y&&p!==void 0&&p!==null&&(D=y(b,p));var M=E?{role:"status","aria-live":"assertive"}:{};return Ie.createElement("div",Vj({className:F,style:S},M),Ie.createElement("p",{className:B,style:T},Ie.isValidElement(D)?D:"".concat(D)),O())};function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function _p(e,t,r){return t=sq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sq(e){var t=oq(e,"string");return xf(t)=="symbol"?t:t+""}function oq(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(xf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mu="recharts-tooltip-wrapper",lq={visibility:"hidden"};function cq(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return jr(Mu,_p(_p(_p(_p({},"".concat(Mu,"-right"),St(r)&&t&&St(t.x)&&r>=t.x),"".concat(Mu,"-left"),St(r)&&t&&St(t.x)&&r<t.x),"".concat(Mu,"-bottom"),St(a)&&t&&St(t.y)&&a>=t.y),"".concat(Mu,"-top"),St(a)&&t&&St(t.y)&&a<t.y))}function t6(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,i=e.offsetTopLeft,s=e.position,l=e.reverseDirection,d=e.tooltipDimension,u=e.viewBox,f=e.viewBoxDimension;if(s&&St(s[a]))return s[a];var p=r[a]-d-i,m=r[a]+i;if(t[a])return l[a]?p:m;if(l[a]){var x=p,v=u[a];return x<v?Math.max(m,u[a]):Math.max(p,u[a])}var j=m+d,b=u[a]+f;return j>b?Math.max(p,u[a]):Math.max(m,u[a])}function dq(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function uq(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,l=e.tooltipBox,d=e.useTranslate3d,u=e.viewBox,f,p,m;return l.height>0&&l.width>0&&r?(p=t6({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),m=t6({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),f=dq({translateX:p,translateY:m,useTranslate3d:d})):f=lq,{cssProperties:f,cssClasses:cq({translateX:p,translateY:m,coordinate:r})}}function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function r6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function n6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r6(Object(r),!0).forEach(function(a){Xj(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hq(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,UD(a.key),a)}}function pq(e,t,r){return t&&hq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mq(e,t,r){return t=vm(t),gq(e,$D()?Reflect.construct(t,r||[],vm(e).constructor):t.apply(e,r))}function gq(e,t){if(t&&(rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xq(e)}function xq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($D=function(){return!!e})()}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vm(e)}function yq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yj(e,t)}function Yj(e,t){return Yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},Yj(e,t)}function Xj(e,t,r){return t=UD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UD(e){var t=vq(e,"string");return rd(t)=="symbol"?t:t+""}function vq(e,t){if(rd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(rd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var a6=1,bq=function(e){function t(){var r;fq(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=mq(this,t,[].concat(i)),Xj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Xj(r,"handleKeyDown",function(l){if(l.key==="Escape"){var d,u,f,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&d!==void 0?d:0,y:(f=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&f!==void 0?f:0}})}}),r}return yq(t,e),pq(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>a6||Math.abs(a.height-this.state.lastBoundingBox.height)>a6)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,i=this.props,s=i.active,l=i.allowEscapeViewBox,d=i.animationDuration,u=i.animationEasing,f=i.children,p=i.coordinate,m=i.hasPayload,x=i.isAnimationActive,v=i.offset,j=i.position,b=i.reverseDirection,y=i.useTranslate3d,C=i.viewBox,E=i.wrapperStyle,O=uq({allowEscapeViewBox:l,coordinate:p,offsetTopLeft:v,position:j,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:C}),S=O.cssClasses,T=O.cssProperties,k=n6(n6({transition:x&&s?"transform ".concat(d,"ms ").concat(u):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&m?"visible":"hidden",position:"absolute",top:0,left:0},E);return Ie.createElement("div",{tabIndex:-1,className:S,style:k,ref:function(F){a.wrapperNode=F}},f)}}])}(N.PureComponent),jq=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},kd={isSsr:jq()};function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function s6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(a){qw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sq(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,WD(a.key),a)}}function Nq(e,t,r){return t&&Sq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tq(e,t,r){return t=bm(t),Cq(e,qD()?Reflect.construct(t,r||[],bm(e).constructor):t.apply(e,r))}function Cq(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aq(e)}function Aq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qD=function(){return!!e})()}function bm(e){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bm(e)}function Eq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qj(e,t)}function Qj(e,t){return Qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},Qj(e,t)}function qw(e,t,r){return t=WD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WD(e){var t=Oq(e,"string");return nd(t)=="symbol"?t:t+""}function Oq(e,t){if(nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(nd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _q(e){return e.dataKey}function kq(e,t){return Ie.isValidElement(e)?Ie.cloneElement(e,t):typeof e=="function"?Ie.createElement(e,t):Ie.createElement(iq,t)}var Li=function(e){function t(){return wq(this,t),Tq(this,t,arguments)}return Eq(t,e),Nq(t,[{key:"render",value:function(){var a=this,i=this.props,s=i.active,l=i.allowEscapeViewBox,d=i.animationDuration,u=i.animationEasing,f=i.content,p=i.coordinate,m=i.filterNull,x=i.isAnimationActive,v=i.offset,j=i.payload,b=i.payloadUniqBy,y=i.position,C=i.reverseDirection,E=i.useTranslate3d,O=i.viewBox,S=i.wrapperStyle,T=j??[];m&&T.length&&(T=RD(j.filter(function(D){return D.value!=null&&(D.hide!==!0||a.props.includeHidden)}),b,_q));var k=T.length>0;return Ie.createElement(bq,{allowEscapeViewBox:l,animationDuration:d,animationEasing:u,isAnimationActive:x,active:s,coordinate:p,hasPayload:k,offset:v,position:y,reverseDirection:C,useTranslate3d:E,viewBox:O,wrapperStyle:S},kq(f,s6(s6({},this.props),{},{payload:T})))}}])}(N.PureComponent);qw(Li,"displayName","Tooltip");qw(Li,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!kd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var y1,o6;function Iq(){if(o6)return y1;o6=1;var e=ys(),t=function(){return e.Date.now()};return y1=t,y1}var v1,l6;function Dq(){if(l6)return v1;l6=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return v1=t,v1}var b1,c6;function Rq(){if(c6)return b1;c6=1;var e=Dq(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return b1=r,b1}var j1,d6;function HD(){if(d6)return j1;d6=1;var e=Rq(),t=Ho(),r=Ed(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return a;if(t(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=t(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=e(f);var m=s.test(f);return m||l.test(f)?d(f.slice(2),m?2:8):i.test(f)?a:+f}return j1=u,j1}var w1,u6;function Pq(){if(u6)return w1;u6=1;var e=Ho(),t=Iq(),r=HD(),a="Expected a function",i=Math.max,s=Math.min;function l(d,u,f){var p,m,x,v,j,b,y=0,C=!1,E=!1,O=!0;if(typeof d!="function")throw new TypeError(a);u=r(u)||0,e(f)&&(C=!!f.leading,E="maxWait"in f,x=E?i(r(f.maxWait)||0,u):x,O="trailing"in f?!!f.trailing:O);function S(U){var P=p,I=m;return p=m=void 0,y=U,v=d.apply(I,P),v}function T(U){return y=U,j=setTimeout(F,u),C?S(U):v}function k(U){var P=U-b,I=U-y,R=u-P;return E?s(R,x-I):R}function D(U){var P=U-b,I=U-y;return b===void 0||P>=u||P<0||E&&I>=x}function F(){var U=t();if(D(U))return B(U);j=setTimeout(F,k(U))}function B(U){return j=void 0,O&&p?S(U):(p=m=void 0,v)}function M(){j!==void 0&&clearTimeout(j),y=0,p=b=m=j=void 0}function L(){return j===void 0?v:B(t())}function A(){var U=t(),P=D(U);if(p=arguments,m=this,b=U,P){if(j===void 0)return T(b);if(E)return clearTimeout(j),j=setTimeout(F,u),S(b)}return j===void 0&&(j=setTimeout(F,u)),v}return A.cancel=M,A.flush=L,A}return w1=l,w1}var S1,f6;function Mq(){if(f6)return S1;f6=1;var e=Pq(),t=Ho(),r="Expected a function";function a(i,s,l){var d=!0,u=!0;if(typeof i!="function")throw new TypeError(r);return t(l)&&(d="leading"in l?!!l.leading:d,u="trailing"in l?!!l.trailing:u),e(i,s,{leading:d,maxWait:s,trailing:u})}return S1=a,S1}var Bq=Mq();const GD=Gr(Bq);function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}function h6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function kp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(r),!0).forEach(function(a){Fq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fq(e,t,r){return t=Lq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lq(e){var t=zq(e,"string");return yf(t)=="symbol"?t:t+""}function zq(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(yf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $q(e,t){return Hq(e)||Wq(e,t)||qq(e,t)||Uq()}function Uq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qq(e,t){if(e){if(typeof e=="string")return p6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p6(e,t)}}function p6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Wq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function Hq(e){if(Array.isArray(e))return e}var m6=N.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,i=a===void 0?{width:-1,height:-1}:a,s=e.width,l=s===void 0?"100%":s,d=e.height,u=d===void 0?"100%":d,f=e.minWidth,p=f===void 0?0:f,m=e.minHeight,x=e.maxHeight,v=e.children,j=e.debounce,b=j===void 0?0:j,y=e.id,C=e.className,E=e.onResize,O=e.style,S=O===void 0?{}:O,T=N.useRef(null),k=N.useRef();k.current=E,N.useImperativeHandle(t,function(){return Object.defineProperty(T.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),T.current},configurable:!0})});var D=N.useState({containerWidth:i.width,containerHeight:i.height}),F=$q(D,2),B=F[0],M=F[1],L=N.useCallback(function(U,P){M(function(I){var R=Math.round(U),W=Math.round(P);return I.containerWidth===R&&I.containerHeight===W?I:{containerWidth:R,containerHeight:W}})},[]);N.useEffect(function(){var U=function(ge){var q,Y=ge[0].contentRect,z=Y.width,ee=Y.height;L(z,ee),(q=k.current)===null||q===void 0||q.call(k,z,ee)};b>0&&(U=GD(U,b,{trailing:!0,leading:!1}));var P=new ResizeObserver(U),I=T.current.getBoundingClientRect(),R=I.width,W=I.height;return L(R,W),P.observe(T.current),function(){P.disconnect()}},[L,b]);var A=N.useMemo(function(){var U=B.containerWidth,P=B.containerHeight;if(U<0||P<0)return null;Gs(bl(l)||bl(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,u),Gs(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=bl(l)?U:l,R=bl(u)?P:u;r&&r>0&&(I?R=I/r:R&&(I=R*r),x&&R>x&&(R=x)),Gs(I>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,R,l,u,p,m,r);var W=!Array.isArray(v)&&Hs(v.type).endsWith("Chart");return Ie.Children.map(v,function(Q){return Ie.isValidElement(Q)?N.cloneElement(Q,kp({width:I,height:R},W?{style:kp({height:"100%",width:"100%",maxHeight:R,maxWidth:I},Q.props.style)}:{})):Q})},[r,v,u,x,m,p,B,l]);return Ie.createElement("div",{id:y?"".concat(y):void 0,className:jr("recharts-responsive-container",C),style:kp(kp({},S),{},{width:l,height:u,minWidth:p,minHeight:m,maxHeight:x}),ref:T},A)}),KD=function(t){return null};KD.displayName="Cell";function vf(e){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(a){Gq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Gq(e,t,r){return t=Kq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kq(e){var t=Vq(e,"string");return vf(t)=="symbol"?t:t+""}function Vq(e,t){if(vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(vf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ac={widthCache:{},cacheCount:0},Yq=2e3,Xq={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},x6="recharts_measurement_span";function Qq(e){var t=Jj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Zu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||kd.isSsr)return{width:0,height:0};var a=Qq(r),i=JSON.stringify({text:t,copyStyle:a});if(Ac.widthCache[i])return Ac.widthCache[i];try{var s=document.getElementById(x6);s||(s=document.createElement("span"),s.setAttribute("id",x6),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var l=Jj(Jj({},Xq),a);Object.assign(s.style,l),s.textContent="".concat(t);var d=s.getBoundingClientRect(),u={width:d.width,height:d.height};return Ac.widthCache[i]=u,++Ac.cacheCount>Yq&&(Ac.cacheCount=0,Ac.widthCache={}),u}catch{return{width:0,height:0}}},Jq=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function jm(e,t){return rW(e)||tW(e,t)||eW(e,t)||Zq()}function Zq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eW(e,t){if(e){if(typeof e=="string")return y6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y6(e,t)}}function y6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function tW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function rW(e){if(Array.isArray(e))return e}function nW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,iW(a.key),a)}}function aW(e,t,r){return t&&v6(e.prototype,t),r&&v6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iW(e){var t=sW(e,"string");return bf(t)=="symbol"?t:t+""}function sW(e,t){if(bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(bf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var b6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,j6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,lW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,VD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},cW=Object.keys(VD),Bc="NaN";function dW(e,t){return e*VD[t]}var Ip=function(){function e(t,r){nW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!oW.test(r)&&(this.num=NaN,this.unit=""),cW.includes(r)&&(this.num=dW(t,r),this.unit="px")}return aW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,i=(a=lW.exec(r))!==null&&a!==void 0?a:[],s=jm(i,3),l=s[1],d=s[2];return new e(parseFloat(l),d??"")}}])}();function YD(e){if(e.includes(Bc))return Bc;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=b6.exec(t))!==null&&r!==void 0?r:[],i=jm(a,4),s=i[1],l=i[2],d=i[3],u=Ip.parse(s??""),f=Ip.parse(d??""),p=l==="*"?u.multiply(f):u.divide(f);if(p.isNaN())return Bc;t=t.replace(b6,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,x=(m=j6.exec(t))!==null&&m!==void 0?m:[],v=jm(x,4),j=v[1],b=v[2],y=v[3],C=Ip.parse(j??""),E=Ip.parse(y??""),O=b==="+"?C.add(E):C.subtract(E);if(O.isNaN())return Bc;t=t.replace(j6,O.toString())}return t}var w6=/\(([^()]*)\)/;function uW(e){for(var t=e;t.includes("(");){var r=w6.exec(t),a=jm(r,2),i=a[1];t=t.replace(w6,YD(i))}return t}function fW(e){var t=e.replace(/\s+/g,"");return t=uW(t),t=YD(t),t}function hW(e){try{return fW(e)}catch{return Bc}}function N1(e){var t=hW(e.slice(5,-1));return t===Bc?"":t}var pW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mW=["dx","dy","angle","className","breakAll"];function Zj(){return Zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zj.apply(this,arguments)}function S6(e,t){if(e==null)return{};var r=gW(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function gW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function N6(e,t){return bW(e)||vW(e,t)||yW(e,t)||xW()}function xW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yW(e,t){if(e){if(typeof e=="string")return T6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T6(e,t)}}function T6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function vW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function bW(e){if(Array.isArray(e))return e}var XD=/[ \f\n\r\t\v\u2028\u2029]+/,QD=function(t){var r=t.children,a=t.breakAll,i=t.style;try{var s=[];pr(r)||(a?s=r.toString().split(""):s=r.toString().split(XD));var l=s.map(function(u){return{word:u,width:Zu(u,i).width}}),d=a?0:Zu("",i).width;return{wordsWithComputedWidth:l,spaceWidth:d}}catch{return null}},jW=function(t,r,a,i,s){var l=t.maxLines,d=t.children,u=t.style,f=t.breakAll,p=St(l),m=d,x=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(R,W){var Q=W.word,ge=W.width,q=R[R.length-1];if(q&&(i==null||s||q.width+ge+a<Number(i)))q.words.push(Q),q.width+=ge+a;else{var Y={words:[Q],width:ge};R.push(Y)}return R},[])},v=x(r),j=function(I){return I.reduce(function(R,W){return R.width>W.width?R:W})};if(!p)return v;for(var b="",y=function(I){var R=m.slice(0,I),W=QD({breakAll:f,style:u,children:R+b}).wordsWithComputedWidth,Q=x(W),ge=Q.length>l||j(Q).width>Number(i);return[ge,Q]},C=0,E=m.length-1,O=0,S;C<=E&&O<=m.length-1;){var T=Math.floor((C+E)/2),k=T-1,D=y(k),F=N6(D,2),B=F[0],M=F[1],L=y(T),A=N6(L,1),U=A[0];if(!B&&!U&&(C=T+1),B&&U&&(E=T-1),!B&&U){S=M;break}O++}return S||v},C6=function(t){var r=pr(t)?[]:t.toString().split(XD);return[{words:r}]},wW=function(t){var r=t.width,a=t.scaleToFit,i=t.children,s=t.style,l=t.breakAll,d=t.maxLines;if((r||a)&&!kd.isSsr){var u,f,p=QD({breakAll:l,children:i,style:s});if(p){var m=p.wordsWithComputedWidth,x=p.spaceWidth;u=m,f=x}else return C6(i);return jW({breakAll:l,children:i,maxLines:d,style:s},u,f,r,a)}return C6(i)},A6="#808080",wm=function(t){var r=t.x,a=r===void 0?0:r,i=t.y,s=i===void 0?0:i,l=t.lineHeight,d=l===void 0?"1em":l,u=t.capHeight,f=u===void 0?"0.71em":u,p=t.scaleToFit,m=p===void 0?!1:p,x=t.textAnchor,v=x===void 0?"start":x,j=t.verticalAnchor,b=j===void 0?"end":j,y=t.fill,C=y===void 0?A6:y,E=S6(t,pW),O=N.useMemo(function(){return wW({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:m,style:E.style,width:E.width})},[E.breakAll,E.children,E.maxLines,m,E.style,E.width]),S=E.dx,T=E.dy,k=E.angle,D=E.className,F=E.breakAll,B=S6(E,mW);if(!Rn(a)||!Rn(s))return null;var M=a+(St(S)?S:0),L=s+(St(T)?T:0),A;switch(b){case"start":A=N1("calc(".concat(f,")"));break;case"middle":A=N1("calc(".concat((O.length-1)/2," * -").concat(d," + (").concat(f," / 2))"));break;default:A=N1("calc(".concat(O.length-1," * -").concat(d,")"));break}var U=[];if(m){var P=O[0].width,I=E.width;U.push("scale(".concat((St(I)?I/P:1)/P,")"))}return k&&U.push("rotate(".concat(k,", ").concat(M,", ").concat(L,")")),U.length&&(B.transform=U.join(" ")),Ie.createElement("text",Zj({},gr(B,!0),{x:M,y:L,className:jr("recharts-text",D),textAnchor:v,fill:C.includes("url")?A6:C}),O.map(function(R,W){var Q=R.words.join(F?"":" ");return Ie.createElement("tspan",{x:M,dy:W===0?A:d,key:"".concat(Q,"-").concat(W)},Q)}))};function Fo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function SW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ww(e){let t,r,a;e.length!==2?(t=Fo,r=(d,u)=>Fo(e(d),u),a=(d,u)=>e(d)-u):(t=e===Fo||e===SW?e:NW,r=e,a=e);function i(d,u,f=0,p=d.length){if(f<p){if(t(u,u)!==0)return p;do{const m=f+p>>>1;r(d[m],u)<0?f=m+1:p=m}while(f<p)}return f}function s(d,u,f=0,p=d.length){if(f<p){if(t(u,u)!==0)return p;do{const m=f+p>>>1;r(d[m],u)<=0?f=m+1:p=m}while(f<p)}return f}function l(d,u,f=0,p=d.length){const m=i(d,u,f,p-1);return m>f&&a(d[m-1],u)>-a(d[m],u)?m-1:m}return{left:i,center:l,right:s}}function NW(){return 0}function JD(e){return e===null?NaN:+e}function*TW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const CW=Ww(Fo),uh=CW.right;Ww(JD).center;class E6 extends Map{constructor(t,r=OW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,i]of t)this.set(a,i)}get(t){return super.get(O6(this,t))}has(t){return super.has(O6(this,t))}set(t,r){return super.set(AW(this,t),r)}delete(t){return super.delete(EW(this,t))}}function O6({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function AW({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function EW({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function OW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _W(e=Fo){if(e===Fo)return ZD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function ZD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kW=Math.sqrt(50),IW=Math.sqrt(10),DW=Math.sqrt(2);function Sm(e,t,r){const a=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(a)),s=a/Math.pow(10,i),l=s>=kW?10:s>=IW?5:s>=DW?2:1;let d,u,f;return i<0?(f=Math.pow(10,-i)/l,d=Math.round(e*f),u=Math.round(t*f),d/f<e&&++d,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*l,d=Math.round(e/f),u=Math.round(t/f),d*f<e&&++d,u*f>t&&--u),u<d&&.5<=r&&r<2?Sm(e,t,r*2):[d,u,f]}function e2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[i,s,l]=a?Sm(t,e,r):Sm(e,t,r);if(!(s>=i))return[];const d=s-i+1,u=new Array(d);if(a)if(l<0)for(let f=0;f<d;++f)u[f]=(s-f)/-l;else for(let f=0;f<d;++f)u[f]=(s-f)*l;else if(l<0)for(let f=0;f<d;++f)u[f]=(i+f)/-l;else for(let f=0;f<d;++f)u[f]=(i+f)*l;return u}function t2(e,t,r){return t=+t,e=+e,r=+r,Sm(e,t,r)[2]}function r2(e,t,r){t=+t,e=+e,r=+r;const a=t<e,i=a?t2(t,e,r):t2(e,t,r);return(a?-1:1)*(i<0?1/-i:i)}function _6(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function k6(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function eR(e,t,r=0,a=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(i=i===void 0?ZD:_W(i);a>r;){if(a-r>600){const u=a-r+1,f=t-r+1,p=Math.log(u),m=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*m*(u-m)/u)*(f-u/2<0?-1:1),v=Math.max(r,Math.floor(t-f*m/u+x)),j=Math.min(a,Math.floor(t+(u-f)*m/u+x));eR(e,t,v,j,i)}const s=e[t];let l=r,d=a;for(Bu(e,r,t),i(e[a],s)>0&&Bu(e,r,a);l<d;){for(Bu(e,l,d),++l,--d;i(e[l],s)<0;)++l;for(;i(e[d],s)>0;)--d}i(e[r],s)===0?Bu(e,r,d):(++d,Bu(e,d,a)),d<=t&&(r=d+1),t<=d&&(a=d-1)}return e}function Bu(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function RW(e,t,r){if(e=Float64Array.from(TW(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return k6(e);if(t>=1)return _6(e);var a,i=(a-1)*t,s=Math.floor(i),l=_6(eR(e,s).subarray(0,s+1)),d=k6(e.subarray(s+1));return l+(d-l)*(i-s)}}function PW(e,t,r=JD){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,i=(a-1)*t,s=Math.floor(i),l=+r(e[s],s,e),d=+r(e[s+1],s+1,e);return l+(d-l)*(i-s)}}function MW(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var a=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++a<i;)s[a]=e+a*r;return s}function Oi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function oo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const n2=Symbol("implicit");function Hw(){var e=new E6,t=[],r=[],a=n2;function i(s){let l=e.get(s);if(l===void 0){if(a!==n2)return a;e.set(s,l=t.push(s)-1)}return r[l%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new E6;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return Hw(t,r).unknown(a)},Oi.apply(i,arguments),i}function jf(){var e=Hw().unknown(void 0),t=e.domain,r=e.range,a=0,i=1,s,l,d=!1,u=0,f=0,p=.5;delete e.unknown;function m(){var x=t().length,v=i<a,j=v?i:a,b=v?a:i;s=(b-j)/Math.max(1,x-u+f*2),d&&(s=Math.floor(s)),j+=(b-j-s*(x-u))*p,l=s*(1-u),d&&(j=Math.round(j),l=Math.round(l));var y=MW(x).map(function(C){return j+s*C});return r(v?y.reverse():y)}return e.domain=function(x){return arguments.length?(t(x),m()):t()},e.range=function(x){return arguments.length?([a,i]=x,a=+a,i=+i,m()):[a,i]},e.rangeRound=function(x){return[a,i]=x,a=+a,i=+i,d=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(x){return arguments.length?(d=!!x,m()):d},e.padding=function(x){return arguments.length?(u=Math.min(1,f=+x),m()):u},e.paddingInner=function(x){return arguments.length?(u=Math.min(1,x),m()):u},e.paddingOuter=function(x){return arguments.length?(f=+x,m()):f},e.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),m()):p},e.copy=function(){return jf(t(),[a,i]).round(d).paddingInner(u).paddingOuter(f).align(p)},Oi.apply(m(),arguments)}function tR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return tR(t())},e}function ef(){return tR(jf.apply(null,arguments).paddingInner(1))}function Gw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function rR(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function fh(){}var wf=.7,Nm=1/wf,Wc="\\s*([+-]?\\d+)\\s*",Sf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BW=/^#([0-9a-f]{3,8})$/,FW=new RegExp(`^rgb\\(${Wc},${Wc},${Wc}\\)$`),LW=new RegExp(`^rgb\\(${hs},${hs},${hs}\\)$`),zW=new RegExp(`^rgba\\(${Wc},${Wc},${Wc},${Sf}\\)$`),$W=new RegExp(`^rgba\\(${hs},${hs},${hs},${Sf}\\)$`),UW=new RegExp(`^hsl\\(${Sf},${hs},${hs}\\)$`),qW=new RegExp(`^hsla\\(${Sf},${hs},${hs},${Sf}\\)$`),I6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gw(fh,Nf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:D6,formatHex:D6,formatHex8:WW,formatHsl:HW,formatRgb:R6,toString:R6});function D6(){return this.rgb().formatHex()}function WW(){return this.rgb().formatHex8()}function HW(){return nR(this).formatHsl()}function R6(){return this.rgb().formatRgb()}function Nf(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=BW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?P6(t):r===3?new Pa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Dp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Dp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=FW.exec(e))?new Pa(t[1],t[2],t[3],1):(t=LW.exec(e))?new Pa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zW.exec(e))?Dp(t[1],t[2],t[3],t[4]):(t=$W.exec(e))?Dp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=UW.exec(e))?F6(t[1],t[2]/100,t[3]/100,1):(t=qW.exec(e))?F6(t[1],t[2]/100,t[3]/100,t[4]):I6.hasOwnProperty(e)?P6(I6[e]):e==="transparent"?new Pa(NaN,NaN,NaN,0):null}function P6(e){return new Pa(e>>16&255,e>>8&255,e&255,1)}function Dp(e,t,r,a){return a<=0&&(e=t=r=NaN),new Pa(e,t,r,a)}function GW(e){return e instanceof fh||(e=Nf(e)),e?(e=e.rgb(),new Pa(e.r,e.g,e.b,e.opacity)):new Pa}function a2(e,t,r,a){return arguments.length===1?GW(e):new Pa(e,t,r,a??1)}function Pa(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}Gw(Pa,a2,rR(fh,{brighter(e){return e=e==null?Nm:Math.pow(Nm,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wf:Math.pow(wf,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pa(Tl(this.r),Tl(this.g),Tl(this.b),Tm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M6,formatHex:M6,formatHex8:KW,formatRgb:B6,toString:B6}));function M6(){return`#${jl(this.r)}${jl(this.g)}${jl(this.b)}`}function KW(){return`#${jl(this.r)}${jl(this.g)}${jl(this.b)}${jl((isNaN(this.opacity)?1:this.opacity)*255)}`}function B6(){const e=Tm(this.opacity);return`${e===1?"rgb(":"rgba("}${Tl(this.r)}, ${Tl(this.g)}, ${Tl(this.b)}${e===1?")":`, ${e})`}`}function Tm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jl(e){return e=Tl(e),(e<16?"0":"")+e.toString(16)}function F6(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qi(e,t,r,a)}function nR(e){if(e instanceof qi)return new qi(e.h,e.s,e.l,e.opacity);if(e instanceof fh||(e=Nf(e)),!e)return new qi;if(e instanceof qi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,i=Math.min(t,r,a),s=Math.max(t,r,a),l=NaN,d=s-i,u=(s+i)/2;return d?(t===s?l=(r-a)/d+(r<a)*6:r===s?l=(a-t)/d+2:l=(t-r)/d+4,d/=u<.5?s+i:2-s-i,l*=60):d=u>0&&u<1?0:l,new qi(l,d,u,e.opacity)}function VW(e,t,r,a){return arguments.length===1?nR(e):new qi(e,t,r,a??1)}function qi(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}Gw(qi,VW,rR(fh,{brighter(e){return e=e==null?Nm:Math.pow(Nm,e),new qi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wf:Math.pow(wf,e),new qi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,i=2*r-a;return new Pa(T1(e>=240?e-240:e+120,i,a),T1(e,i,a),T1(e<120?e+240:e-120,i,a),this.opacity)},clamp(){return new qi(L6(this.h),Rp(this.s),Rp(this.l),Tm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Tm(this.opacity);return`${e===1?"hsl(":"hsla("}${L6(this.h)}, ${Rp(this.s)*100}%, ${Rp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function L6(e){return e=(e||0)%360,e<0?e+360:e}function Rp(e){return Math.max(0,Math.min(1,e||0))}function T1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Kw=e=>()=>e;function YW(e,t){return function(r){return e+r*t}}function XW(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function QW(e){return(e=+e)==1?aR:function(t,r){return r-t?XW(t,r,e):Kw(isNaN(t)?r:t)}}function aR(e,t){var r=t-e;return r?YW(e,r):Kw(isNaN(e)?t:e)}const z6=function e(t){var r=QW(t);function a(i,s){var l=r((i=a2(i)).r,(s=a2(s)).r),d=r(i.g,s.g),u=r(i.b,s.b),f=aR(i.opacity,s.opacity);return function(p){return i.r=l(p),i.g=d(p),i.b=u(p),i.opacity=f(p),i+""}}return a.gamma=e,a}(1);function JW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),i;return function(s){for(i=0;i<r;++i)a[i]=e[i]*(1-s)+t[i]*s;return a}}function ZW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eH(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),s=new Array(r),l;for(l=0;l<a;++l)i[l]=Id(e[l],t[l]);for(;l<r;++l)s[l]=t[l];return function(d){for(l=0;l<a;++l)s[l]=i[l](d);return s}}function tH(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Cm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function rH(e,t){var r={},a={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Id(e[i],t[i]):a[i]=t[i];return function(s){for(i in r)a[i]=r[i](s);return a}}var i2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,C1=new RegExp(i2.source,"g");function nH(e){return function(){return e}}function aH(e){return function(t){return e(t)+""}}function iH(e,t){var r=i2.lastIndex=C1.lastIndex=0,a,i,s,l=-1,d=[],u=[];for(e=e+"",t=t+"";(a=i2.exec(e))&&(i=C1.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),d[l]?d[l]+=s:d[++l]=s),(a=a[0])===(i=i[0])?d[l]?d[l]+=i:d[++l]=i:(d[++l]=null,u.push({i:l,x:Cm(a,i)})),r=C1.lastIndex;return r<t.length&&(s=t.slice(r),d[l]?d[l]+=s:d[++l]=s),d.length<2?u[0]?aH(u[0].x):nH(t):(t=u.length,function(f){for(var p=0,m;p<t;++p)d[(m=u[p]).i]=m.x(f);return d.join("")})}function Id(e,t){var r=typeof t,a;return t==null||r==="boolean"?Kw(t):(r==="number"?Cm:r==="string"?(a=Nf(t))?(t=a,z6):iH:t instanceof Nf?z6:t instanceof Date?tH:ZW(t)?JW:Array.isArray(t)?eH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?rH:Cm)(e,t)}function Vw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function sH(e,t){t===void 0&&(t=e,e=Id);for(var r=0,a=t.length-1,i=t[0],s=new Array(a<0?0:a);r<a;)s[r]=e(i,i=t[++r]);return function(l){var d=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return s[d](l-d)}}function oH(e){return function(){return e}}function Am(e){return+e}var $6=[0,1];function Sa(e){return e}function s2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:oH(isNaN(t)?NaN:.5)}function lH(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function cH(e,t,r){var a=e[0],i=e[1],s=t[0],l=t[1];return i<a?(a=s2(i,a),s=r(l,s)):(a=s2(a,i),s=r(s,l)),function(d){return s(a(d))}}function dH(e,t,r){var a=Math.min(e.length,t.length)-1,i=new Array(a),s=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)i[l]=s2(e[l],e[l+1]),s[l]=r(t[l],t[l+1]);return function(d){var u=uh(e,d,1,a)-1;return s[u](i[u](d))}}function hh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Mg(){var e=$6,t=$6,r=Id,a,i,s,l=Sa,d,u,f;function p(){var x=Math.min(e.length,t.length);return l!==Sa&&(l=lH(e[0],e[x-1])),d=x>2?dH:cH,u=f=null,m}function m(x){return x==null||isNaN(x=+x)?s:(u||(u=d(e.map(a),t,r)))(a(l(x)))}return m.invert=function(x){return l(i((f||(f=d(t,e.map(a),Cm)))(x)))},m.domain=function(x){return arguments.length?(e=Array.from(x,Am),p()):e.slice()},m.range=function(x){return arguments.length?(t=Array.from(x),p()):t.slice()},m.rangeRound=function(x){return t=Array.from(x),r=Vw,p()},m.clamp=function(x){return arguments.length?(l=x?!0:Sa,p()):l!==Sa},m.interpolate=function(x){return arguments.length?(r=x,p()):r},m.unknown=function(x){return arguments.length?(s=x,m):s},function(x,v){return a=x,i=v,p()}}function Yw(){return Mg()(Sa,Sa)}function uH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Em(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function ad(e){return e=Em(Math.abs(e)),e?e[1]:NaN}function fH(e,t){return function(r,a){for(var i=r.length,s=[],l=0,d=e[0],u=0;i>0&&d>0&&(u+d+1>a&&(d=Math.max(1,a-u)),s.push(r.substring(i-=d,i+d)),!((u+=d+1)>a));)d=e[l=(l+1)%e.length];return s.reverse().join(t)}}function hH(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var pH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tf(e){if(!(t=pH.exec(e)))throw new Error("invalid format: "+e);var t;return new Xw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tf.prototype=Xw.prototype;function Xw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mH(e){e:for(var t=e.length,r=1,a=-1,i;r<t;++r)switch(e[r]){case".":a=i=r;break;case"0":a===0&&(a=r),i=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(i+1):e}var iR;function gH(e,t){var r=Em(e,t);if(!r)return e+"";var a=r[0],i=r[1],s=i-(iR=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=a.length;return s===l?a:s>l?a+new Array(s-l+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Em(e,Math.max(0,t+s-1))[0]}function U6(e,t){var r=Em(e,t);if(!r)return e+"";var a=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const q6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:uH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>U6(e*100,t),r:U6,s:gH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function W6(e){return e}var H6=Array.prototype.map,G6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function xH(e){var t=e.grouping===void 0||e.thousands===void 0?W6:fH(H6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?W6:hH(H6.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(m){m=Tf(m);var x=m.fill,v=m.align,j=m.sign,b=m.symbol,y=m.zero,C=m.width,E=m.comma,O=m.precision,S=m.trim,T=m.type;T==="n"?(E=!0,T="g"):q6[T]||(O===void 0&&(O=12),S=!0,T="g"),(y||x==="0"&&v==="=")&&(y=!0,x="0",v="=");var k=b==="$"?r:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",D=b==="$"?a:/[%p]/.test(T)?l:"",F=q6[T],B=/[defgprs%]/.test(T);O=O===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function M(L){var A=k,U=D,P,I,R;if(T==="c")U=F(L)+U,L="";else{L=+L;var W=L<0||1/L<0;if(L=isNaN(L)?u:F(Math.abs(L),O),S&&(L=mH(L)),W&&+L==0&&j!=="+"&&(W=!1),A=(W?j==="("?j:d:j==="-"||j==="("?"":j)+A,U=(T==="s"?G6[8+iR/3]:"")+U+(W&&j==="("?")":""),B){for(P=-1,I=L.length;++P<I;)if(R=L.charCodeAt(P),48>R||R>57){U=(R===46?i+L.slice(P+1):L.slice(P))+U,L=L.slice(0,P);break}}}E&&!y&&(L=t(L,1/0));var Q=A.length+L.length+U.length,ge=Q<C?new Array(C-Q+1).join(x):"";switch(E&&y&&(L=t(ge+L,ge.length?C-U.length:1/0),ge=""),v){case"<":L=A+L+U+ge;break;case"=":L=A+ge+L+U;break;case"^":L=ge.slice(0,Q=ge.length>>1)+A+L+U+ge.slice(Q);break;default:L=ge+A+L+U;break}return s(L)}return M.toString=function(){return m+""},M}function p(m,x){var v=f((m=Tf(m),m.type="f",m)),j=Math.max(-8,Math.min(8,Math.floor(ad(x)/3)))*3,b=Math.pow(10,-j),y=G6[8+j/3];return function(C){return v(b*C)+y}}return{format:f,formatPrefix:p}}var Pp,Qw,sR;yH({thousands:",",grouping:[3],currency:["$",""]});function yH(e){return Pp=xH(e),Qw=Pp.format,sR=Pp.formatPrefix,Pp}function vH(e){return Math.max(0,-ad(Math.abs(e)))}function bH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ad(t)/3)))*3-ad(Math.abs(e)))}function jH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ad(t)-ad(e))+1}function oR(e,t,r,a){var i=r2(e,t,r),s;switch(a=Tf(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(s=bH(i,l))&&(a.precision=s),sR(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=jH(i,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=vH(i))&&(a.precision=s-(a.type==="%")*2);break}}return Qw(a)}function Ko(e){var t=e.domain;return e.ticks=function(r){var a=t();return e2(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var i=t();return oR(i[0],i[i.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),i=0,s=a.length-1,l=a[i],d=a[s],u,f,p=10;for(d<l&&(f=l,l=d,d=f,f=i,i=s,s=f);p-- >0;){if(f=t2(l,d,r),f===u)return a[i]=l,a[s]=d,t(a);if(f>0)l=Math.floor(l/f)*f,d=Math.ceil(d/f)*f;else if(f<0)l=Math.ceil(l*f)/f,d=Math.floor(d*f)/f;else break;u=f}return e},e}function Om(){var e=Yw();return e.copy=function(){return hh(e,Om())},Oi.apply(e,arguments),Ko(e)}function lR(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,Am),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return lR(e).unknown(t)},e=arguments.length?Array.from(e,Am):[0,1],Ko(r)}function cR(e,t){e=e.slice();var r=0,a=e.length-1,i=e[r],s=e[a],l;return s<i&&(l=r,r=a,a=l,l=i,i=s,s=l),e[r]=t.floor(i),e[a]=t.ceil(s),e}function K6(e){return Math.log(e)}function V6(e){return Math.exp(e)}function wH(e){return-Math.log(-e)}function SH(e){return-Math.exp(-e)}function NH(e){return isFinite(e)?+("1e"+e):e<0?0:e}function TH(e){return e===10?NH:e===Math.E?Math.exp:t=>Math.pow(e,t)}function CH(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Y6(e){return(t,r)=>-e(-t,r)}function Jw(e){const t=e(K6,V6),r=t.domain;let a=10,i,s;function l(){return i=CH(a),s=TH(a),r()[0]<0?(i=Y6(i),s=Y6(s),e(wH,SH)):e(K6,V6),t}return t.base=function(d){return arguments.length?(a=+d,l()):a},t.domain=function(d){return arguments.length?(r(d),l()):r()},t.ticks=d=>{const u=r();let f=u[0],p=u[u.length-1];const m=p<f;m&&([f,p]=[p,f]);let x=i(f),v=i(p),j,b;const y=d==null?10:+d;let C=[];if(!(a%1)&&v-x<y){if(x=Math.floor(x),v=Math.ceil(v),f>0){for(;x<=v;++x)for(j=1;j<a;++j)if(b=x<0?j/s(-x):j*s(x),!(b<f)){if(b>p)break;C.push(b)}}else for(;x<=v;++x)for(j=a-1;j>=1;--j)if(b=x>0?j/s(-x):j*s(x),!(b<f)){if(b>p)break;C.push(b)}C.length*2<y&&(C=e2(f,p,y))}else C=e2(x,v,Math.min(v-x,y)).map(s);return m?C.reverse():C},t.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=a===10?"s":","),typeof u!="function"&&(!(a%1)&&(u=Tf(u)).precision==null&&(u.trim=!0),u=Qw(u)),d===1/0)return u;const f=Math.max(1,a*d/t.ticks().length);return p=>{let m=p/s(Math.round(i(p)));return m*a<a-.5&&(m*=a),m<=f?u(p):""}},t.nice=()=>r(cR(r(),{floor:d=>s(Math.floor(i(d))),ceil:d=>s(Math.ceil(i(d)))})),t}function dR(){const e=Jw(Mg()).domain([1,10]);return e.copy=()=>hh(e,dR()).base(e.base()),Oi.apply(e,arguments),e}function X6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Q6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Zw(e){var t=1,r=e(X6(t),Q6(t));return r.constant=function(a){return arguments.length?e(X6(t=+a),Q6(t)):t},Ko(r)}function uR(){var e=Zw(Mg());return e.copy=function(){return hh(e,uR()).constant(e.constant())},Oi.apply(e,arguments)}function J6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function AH(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function EH(e){return e<0?-e*e:e*e}function eS(e){var t=e(Sa,Sa),r=1;function a(){return r===1?e(Sa,Sa):r===.5?e(AH,EH):e(J6(r),J6(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,a()):r},Ko(t)}function tS(){var e=eS(Mg());return e.copy=function(){return hh(e,tS()).exponent(e.exponent())},Oi.apply(e,arguments),e}function OH(){return tS.apply(null,arguments).exponent(.5)}function Z6(e){return Math.sign(e)*e*e}function _H(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fR(){var e=Yw(),t=[0,1],r=!1,a;function i(s){var l=_H(e(s));return isNaN(l)?a:r?Math.round(l):l}return i.invert=function(s){return e.invert(Z6(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Am)).map(Z6)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return fR(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Oi.apply(i,arguments),Ko(i)}function hR(){var e=[],t=[],r=[],a;function i(){var l=0,d=Math.max(1,t.length);for(r=new Array(d-1);++l<d;)r[l-1]=PW(e,l/d);return s}function s(l){return l==null||isNaN(l=+l)?a:t[uh(r,l)]}return s.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Fo),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(a=l,s):a},s.quantiles=function(){return r.slice()},s.copy=function(){return hR().domain(e).range(t).unknown(a)},Oi.apply(s,arguments)}function pR(){var e=0,t=1,r=1,a=[.5],i=[0,1],s;function l(u){return u!=null&&u<=u?i[uh(a,u,0,r)]:s}function d(){var u=-1;for(a=new Array(r);++u<r;)a[u]=((u+1)*t-(u-r)*e)/(r+1);return l}return l.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,d()):[e,t]},l.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,d()):i.slice()},l.invertExtent=function(u){var f=i.indexOf(u);return f<0?[NaN,NaN]:f<1?[e,a[0]]:f>=r?[a[r-1],t]:[a[f-1],a[f]]},l.unknown=function(u){return arguments.length&&(s=u),l},l.thresholds=function(){return a.slice()},l.copy=function(){return pR().domain([e,t]).range(i).unknown(s)},Oi.apply(Ko(l),arguments)}function mR(){var e=[.5],t=[0,1],r,a=1;function i(s){return s!=null&&s<=s?t[uh(e,s,0,a)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),a=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),a=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return mR().domain(e).range(t).unknown(r)},Oi.apply(i,arguments)}const A1=new Date,E1=new Date;function Pn(e,t,r,a){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),d=i.ceil(s);return s-l<d-s?l:d},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,d)=>{const u=[];if(s=i.ceil(s),d=d==null?1:Math.floor(d),!(s<l)||!(d>0))return u;let f;do u.push(f=new Date(+s)),t(s,d),e(s);while(f<s&&s<l);return u},i.filter=s=>Pn(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!s(l););else for(;--d>=0;)for(;t(l,1),!s(l););}),r&&(i.count=(s,l)=>(A1.setTime(+s),E1.setTime(+l),e(A1),e(E1),Math.floor(r(A1,E1))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(a?l=>a(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const _m=Pn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_m.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):_m);_m.range;const zs=1e3,Si=zs*60,$s=Si*60,Zs=$s*24,rS=Zs*7,e4=Zs*30,O1=Zs*365,wl=Pn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getUTCSeconds());wl.range;const nS=Pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs)},(e,t)=>{e.setTime(+e+t*Si)},(e,t)=>(t-e)/Si,e=>e.getMinutes());nS.range;const aS=Pn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Si)},(e,t)=>(t-e)/Si,e=>e.getUTCMinutes());aS.range;const iS=Pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs-e.getMinutes()*Si)},(e,t)=>{e.setTime(+e+t*$s)},(e,t)=>(t-e)/$s,e=>e.getHours());iS.range;const sS=Pn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$s)},(e,t)=>(t-e)/$s,e=>e.getUTCHours());sS.range;const ph=Pn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Si)/Zs,e=>e.getDate()-1);ph.range;const Bg=Pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zs,e=>e.getUTCDate()-1);Bg.range;const gR=Pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zs,e=>Math.floor(e/Zs));gR.range;function Ul(e){return Pn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Si)/rS)}const Fg=Ul(0),km=Ul(1),kH=Ul(2),IH=Ul(3),id=Ul(4),DH=Ul(5),RH=Ul(6);Fg.range;km.range;kH.range;IH.range;id.range;DH.range;RH.range;function ql(e){return Pn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/rS)}const Lg=ql(0),Im=ql(1),PH=ql(2),MH=ql(3),sd=ql(4),BH=ql(5),FH=ql(6);Lg.range;Im.range;PH.range;MH.range;sd.range;BH.range;FH.range;const oS=Pn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oS.range;const lS=Pn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());lS.range;const eo=Pn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());eo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});eo.range;const to=Pn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());to.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});to.range;function xR(e,t,r,a,i,s){const l=[[wl,1,zs],[wl,5,5*zs],[wl,15,15*zs],[wl,30,30*zs],[s,1,Si],[s,5,5*Si],[s,15,15*Si],[s,30,30*Si],[i,1,$s],[i,3,3*$s],[i,6,6*$s],[i,12,12*$s],[a,1,Zs],[a,2,2*Zs],[r,1,rS],[t,1,e4],[t,3,3*e4],[e,1,O1]];function d(f,p,m){const x=p<f;x&&([f,p]=[p,f]);const v=m&&typeof m.range=="function"?m:u(f,p,m),j=v?v.range(f,+p+1):[];return x?j.reverse():j}function u(f,p,m){const x=Math.abs(p-f)/m,v=Ww(([,,y])=>y).right(l,x);if(v===l.length)return e.every(r2(f/O1,p/O1,m));if(v===0)return _m.every(Math.max(r2(f,p,m),1));const[j,b]=l[x/l[v-1][2]<l[v][2]/x?v-1:v];return j.every(b)}return[d,u]}const[LH,zH]=xR(to,lS,Lg,gR,sS,aS),[$H,UH]=xR(eo,oS,Fg,ph,iS,nS);function _1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function k1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function qH(e){var t=e.dateTime,r=e.date,a=e.time,i=e.periods,s=e.days,l=e.shortDays,d=e.months,u=e.shortMonths,f=Lu(i),p=zu(i),m=Lu(s),x=zu(s),v=Lu(l),j=zu(l),b=Lu(d),y=zu(d),C=Lu(u),E=zu(u),O={a:W,A:Q,b:ge,B:q,c:null,d:s4,e:s4,f:fG,g:wG,G:NG,H:cG,I:dG,j:uG,L:yR,m:hG,M:pG,p:Y,q:z,Q:c4,s:d4,S:mG,u:gG,U:xG,V:yG,w:vG,W:bG,x:null,X:null,y:jG,Y:SG,Z:TG,"%":l4},S={a:ee,A:H,b:re,B:le,c:null,d:o4,e:o4,f:OG,g:LG,G:$G,H:CG,I:AG,j:EG,L:bR,m:_G,M:kG,p:pe,q:Se,Q:c4,s:d4,S:IG,u:DG,U:RG,V:PG,w:MG,W:BG,x:null,X:null,y:FG,Y:zG,Z:UG,"%":l4},T={a:M,A:L,b:A,B:U,c:P,d:a4,e:a4,f:iG,g:n4,G:r4,H:i4,I:i4,j:tG,L:aG,m:eG,M:rG,p:B,q:ZH,Q:oG,s:lG,S:nG,u:VH,U:YH,V:XH,w:KH,W:QH,x:I,X:R,y:n4,Y:r4,Z:JH,"%":sG};O.x=k(r,O),O.X=k(a,O),O.c=k(t,O),S.x=k(r,S),S.X=k(a,S),S.c=k(t,S);function k(K,ue){return function(ye){var fe=[],Xe=-1,Ce=0,Le=K.length,ne,Ae,Ve;for(ye instanceof Date||(ye=new Date(+ye));++Xe<Le;)K.charCodeAt(Xe)===37&&(fe.push(K.slice(Ce,Xe)),(Ae=t4[ne=K.charAt(++Xe)])!=null?ne=K.charAt(++Xe):Ae=ne==="e"?" ":"0",(Ve=ue[ne])&&(ne=Ve(ye,Ae)),fe.push(ne),Ce=Xe+1);return fe.push(K.slice(Ce,Xe)),fe.join("")}}function D(K,ue){return function(ye){var fe=Fu(1900,void 0,1),Xe=F(fe,K,ye+="",0),Ce,Le;if(Xe!=ye.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(ue&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Ce=k1(Fu(fe.y,0,1)),Le=Ce.getUTCDay(),Ce=Le>4||Le===0?Im.ceil(Ce):Im(Ce),Ce=Bg.offset(Ce,(fe.V-1)*7),fe.y=Ce.getUTCFullYear(),fe.m=Ce.getUTCMonth(),fe.d=Ce.getUTCDate()+(fe.w+6)%7):(Ce=_1(Fu(fe.y,0,1)),Le=Ce.getDay(),Ce=Le>4||Le===0?km.ceil(Ce):km(Ce),Ce=ph.offset(Ce,(fe.V-1)*7),fe.y=Ce.getFullYear(),fe.m=Ce.getMonth(),fe.d=Ce.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Le="Z"in fe?k1(Fu(fe.y,0,1)).getUTCDay():_1(Fu(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Le+5)%7:fe.w+fe.U*7-(Le+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,k1(fe)):_1(fe)}}function F(K,ue,ye,fe){for(var Xe=0,Ce=ue.length,Le=ye.length,ne,Ae;Xe<Ce;){if(fe>=Le)return-1;if(ne=ue.charCodeAt(Xe++),ne===37){if(ne=ue.charAt(Xe++),Ae=T[ne in t4?ue.charAt(Xe++):ne],!Ae||(fe=Ae(K,ye,fe))<0)return-1}else if(ne!=ye.charCodeAt(fe++))return-1}return fe}function B(K,ue,ye){var fe=f.exec(ue.slice(ye));return fe?(K.p=p.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function M(K,ue,ye){var fe=v.exec(ue.slice(ye));return fe?(K.w=j.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function L(K,ue,ye){var fe=m.exec(ue.slice(ye));return fe?(K.w=x.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function A(K,ue,ye){var fe=C.exec(ue.slice(ye));return fe?(K.m=E.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function U(K,ue,ye){var fe=b.exec(ue.slice(ye));return fe?(K.m=y.get(fe[0].toLowerCase()),ye+fe[0].length):-1}function P(K,ue,ye){return F(K,t,ue,ye)}function I(K,ue,ye){return F(K,r,ue,ye)}function R(K,ue,ye){return F(K,a,ue,ye)}function W(K){return l[K.getDay()]}function Q(K){return s[K.getDay()]}function ge(K){return u[K.getMonth()]}function q(K){return d[K.getMonth()]}function Y(K){return i[+(K.getHours()>=12)]}function z(K){return 1+~~(K.getMonth()/3)}function ee(K){return l[K.getUTCDay()]}function H(K){return s[K.getUTCDay()]}function re(K){return u[K.getUTCMonth()]}function le(K){return d[K.getUTCMonth()]}function pe(K){return i[+(K.getUTCHours()>=12)]}function Se(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var ue=k(K+="",O);return ue.toString=function(){return K},ue},parse:function(K){var ue=D(K+="",!1);return ue.toString=function(){return K},ue},utcFormat:function(K){var ue=k(K+="",S);return ue.toString=function(){return K},ue},utcParse:function(K){var ue=D(K+="",!0);return ue.toString=function(){return K},ue}}}var t4={"-":"",_:" ",0:"0"},Wn=/^\s*\d+/,WH=/^%/,HH=/[\\^$*+?|[\]().{}]/g;function Sr(e,t,r){var a=e<0?"-":"",i=(a?-e:e)+"",s=i.length;return a+(s<r?new Array(r-s+1).join(t)+i:i)}function GH(e){return e.replace(HH,"\\$&")}function Lu(e){return new RegExp("^(?:"+e.map(GH).join("|")+")","i")}function zu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function KH(e,t,r){var a=Wn.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function VH(e,t,r){var a=Wn.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function YH(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function XH(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function QH(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function r4(e,t,r){var a=Wn.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function n4(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function JH(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function ZH(e,t,r){var a=Wn.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function eG(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function a4(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function tG(e,t,r){var a=Wn.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function i4(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function rG(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function nG(e,t,r){var a=Wn.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function aG(e,t,r){var a=Wn.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function iG(e,t,r){var a=Wn.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function sG(e,t,r){var a=WH.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function oG(e,t,r){var a=Wn.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function lG(e,t,r){var a=Wn.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function s4(e,t){return Sr(e.getDate(),t,2)}function cG(e,t){return Sr(e.getHours(),t,2)}function dG(e,t){return Sr(e.getHours()%12||12,t,2)}function uG(e,t){return Sr(1+ph.count(eo(e),e),t,3)}function yR(e,t){return Sr(e.getMilliseconds(),t,3)}function fG(e,t){return yR(e,t)+"000"}function hG(e,t){return Sr(e.getMonth()+1,t,2)}function pG(e,t){return Sr(e.getMinutes(),t,2)}function mG(e,t){return Sr(e.getSeconds(),t,2)}function gG(e){var t=e.getDay();return t===0?7:t}function xG(e,t){return Sr(Fg.count(eo(e)-1,e),t,2)}function vR(e){var t=e.getDay();return t>=4||t===0?id(e):id.ceil(e)}function yG(e,t){return e=vR(e),Sr(id.count(eo(e),e)+(eo(e).getDay()===4),t,2)}function vG(e){return e.getDay()}function bG(e,t){return Sr(km.count(eo(e)-1,e),t,2)}function jG(e,t){return Sr(e.getFullYear()%100,t,2)}function wG(e,t){return e=vR(e),Sr(e.getFullYear()%100,t,2)}function SG(e,t){return Sr(e.getFullYear()%1e4,t,4)}function NG(e,t){var r=e.getDay();return e=r>=4||r===0?id(e):id.ceil(e),Sr(e.getFullYear()%1e4,t,4)}function TG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Sr(t/60|0,"0",2)+Sr(t%60,"0",2)}function o4(e,t){return Sr(e.getUTCDate(),t,2)}function CG(e,t){return Sr(e.getUTCHours(),t,2)}function AG(e,t){return Sr(e.getUTCHours()%12||12,t,2)}function EG(e,t){return Sr(1+Bg.count(to(e),e),t,3)}function bR(e,t){return Sr(e.getUTCMilliseconds(),t,3)}function OG(e,t){return bR(e,t)+"000"}function _G(e,t){return Sr(e.getUTCMonth()+1,t,2)}function kG(e,t){return Sr(e.getUTCMinutes(),t,2)}function IG(e,t){return Sr(e.getUTCSeconds(),t,2)}function DG(e){var t=e.getUTCDay();return t===0?7:t}function RG(e,t){return Sr(Lg.count(to(e)-1,e),t,2)}function jR(e){var t=e.getUTCDay();return t>=4||t===0?sd(e):sd.ceil(e)}function PG(e,t){return e=jR(e),Sr(sd.count(to(e),e)+(to(e).getUTCDay()===4),t,2)}function MG(e){return e.getUTCDay()}function BG(e,t){return Sr(Im.count(to(e)-1,e),t,2)}function FG(e,t){return Sr(e.getUTCFullYear()%100,t,2)}function LG(e,t){return e=jR(e),Sr(e.getUTCFullYear()%100,t,2)}function zG(e,t){return Sr(e.getUTCFullYear()%1e4,t,4)}function $G(e,t){var r=e.getUTCDay();return e=r>=4||r===0?sd(e):sd.ceil(e),Sr(e.getUTCFullYear()%1e4,t,4)}function UG(){return"+0000"}function l4(){return"%"}function c4(e){return+e}function d4(e){return Math.floor(+e/1e3)}var Ec,wR,SR;qG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qG(e){return Ec=qH(e),wR=Ec.format,Ec.parse,SR=Ec.utcFormat,Ec.utcParse,Ec}function WG(e){return new Date(e)}function HG(e){return e instanceof Date?+e:+new Date(+e)}function cS(e,t,r,a,i,s,l,d,u,f){var p=Yw(),m=p.invert,x=p.domain,v=f(".%L"),j=f(":%S"),b=f("%I:%M"),y=f("%I %p"),C=f("%a %d"),E=f("%b %d"),O=f("%B"),S=f("%Y");function T(k){return(u(k)<k?v:d(k)<k?j:l(k)<k?b:s(k)<k?y:a(k)<k?i(k)<k?C:E:r(k)<k?O:S)(k)}return p.invert=function(k){return new Date(m(k))},p.domain=function(k){return arguments.length?x(Array.from(k,HG)):x().map(WG)},p.ticks=function(k){var D=x();return e(D[0],D[D.length-1],k??10)},p.tickFormat=function(k,D){return D==null?T:f(D)},p.nice=function(k){var D=x();return(!k||typeof k.range!="function")&&(k=t(D[0],D[D.length-1],k??10)),k?x(cR(D,k)):p},p.copy=function(){return hh(p,cS(e,t,r,a,i,s,l,d,u,f))},p}function GG(){return Oi.apply(cS($H,UH,eo,oS,Fg,ph,iS,nS,wl,wR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KG(){return Oi.apply(cS(LH,zH,to,lS,Lg,Bg,sS,aS,wl,SR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zg(){var e=0,t=1,r,a,i,s,l=Sa,d=!1,u;function f(m){return m==null||isNaN(m=+m)?u:l(i===0?.5:(m=(s(m)-r)*i,d?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([e,t]=m,r=s(e=+e),a=s(t=+t),i=r===a?0:1/(a-r),f):[e,t]},f.clamp=function(m){return arguments.length?(d=!!m,f):d},f.interpolator=function(m){return arguments.length?(l=m,f):l};function p(m){return function(x){var v,j;return arguments.length?([v,j]=x,l=m(v,j),f):[l(0),l(1)]}}return f.range=p(Id),f.rangeRound=p(Vw),f.unknown=function(m){return arguments.length?(u=m,f):u},function(m){return s=m,r=m(e),a=m(t),i=r===a?0:1/(a-r),f}}function Vo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function NR(){var e=Ko(zg()(Sa));return e.copy=function(){return Vo(e,NR())},oo.apply(e,arguments)}function TR(){var e=Jw(zg()).domain([1,10]);return e.copy=function(){return Vo(e,TR()).base(e.base())},oo.apply(e,arguments)}function CR(){var e=Zw(zg());return e.copy=function(){return Vo(e,CR()).constant(e.constant())},oo.apply(e,arguments)}function dS(){var e=eS(zg());return e.copy=function(){return Vo(e,dS()).exponent(e.exponent())},oo.apply(e,arguments)}function VG(){return dS.apply(null,arguments).exponent(.5)}function AR(){var e=[],t=Sa;function r(a){if(a!=null&&!isNaN(a=+a))return t((uh(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let i of a)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Fo),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,i)=>t(i/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(i,s)=>RW(e,s/a))},r.copy=function(){return AR(t).domain(e)},oo.apply(r,arguments)}function $g(){var e=0,t=.5,r=1,a=1,i,s,l,d,u,f=Sa,p,m=!1,x;function v(b){return isNaN(b=+b)?x:(b=.5+((b=+p(b))-s)*(a*b<a*s?d:u),f(m?Math.max(0,Math.min(1,b)):b))}v.domain=function(b){return arguments.length?([e,t,r]=b,i=p(e=+e),s=p(t=+t),l=p(r=+r),d=i===s?0:.5/(s-i),u=s===l?0:.5/(l-s),a=s<i?-1:1,v):[e,t,r]},v.clamp=function(b){return arguments.length?(m=!!b,v):m},v.interpolator=function(b){return arguments.length?(f=b,v):f};function j(b){return function(y){var C,E,O;return arguments.length?([C,E,O]=y,f=sH(b,[C,E,O]),v):[f(0),f(.5),f(1)]}}return v.range=j(Id),v.rangeRound=j(Vw),v.unknown=function(b){return arguments.length?(x=b,v):x},function(b){return p=b,i=b(e),s=b(t),l=b(r),d=i===s?0:.5/(s-i),u=s===l?0:.5/(l-s),a=s<i?-1:1,v}}function ER(){var e=Ko($g()(Sa));return e.copy=function(){return Vo(e,ER())},oo.apply(e,arguments)}function OR(){var e=Jw($g()).domain([.1,1,10]);return e.copy=function(){return Vo(e,OR()).base(e.base())},oo.apply(e,arguments)}function _R(){var e=Zw($g());return e.copy=function(){return Vo(e,_R()).constant(e.constant())},oo.apply(e,arguments)}function uS(){var e=eS($g());return e.copy=function(){return Vo(e,uS()).exponent(e.exponent())},oo.apply(e,arguments)}function YG(){return uS.apply(null,arguments).exponent(.5)}const u4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jf,scaleDiverging:ER,scaleDivergingLog:OR,scaleDivergingPow:uS,scaleDivergingSqrt:YG,scaleDivergingSymlog:_R,scaleIdentity:lR,scaleImplicit:n2,scaleLinear:Om,scaleLog:dR,scaleOrdinal:Hw,scalePoint:ef,scalePow:tS,scaleQuantile:hR,scaleQuantize:pR,scaleRadial:fR,scaleSequential:NR,scaleSequentialLog:TR,scaleSequentialPow:dS,scaleSequentialQuantile:AR,scaleSequentialSqrt:VG,scaleSequentialSymlog:CR,scaleSqrt:OH,scaleSymlog:uR,scaleThreshold:mR,scaleTime:GG,scaleUtc:KG,tickFormat:oR},Symbol.toStringTag,{value:"Module"}));var I1,f4;function kR(){if(f4)return I1;f4=1;var e=Ed();function t(r,a,i){for(var s=-1,l=r.length;++s<l;){var d=r[s],u=a(d);if(u!=null&&(f===void 0?u===u&&!e(u):i(u,f)))var f=u,p=d}return p}return I1=t,I1}var D1,h4;function XG(){if(h4)return D1;h4=1;function e(t,r){return t>r}return D1=e,D1}var R1,p4;function QG(){if(p4)return R1;p4=1;var e=kR(),t=XG(),r=_d();function a(i){return i&&i.length?e(i,r,t):void 0}return R1=a,R1}var JG=QG();const Ug=Gr(JG);var P1,m4;function ZG(){if(m4)return P1;m4=1;function e(t,r){return t<r}return P1=e,P1}var M1,g4;function eK(){if(g4)return M1;g4=1;var e=kR(),t=ZG(),r=_d();function a(i){return i&&i.length?e(i,r,t):void 0}return M1=a,M1}var tK=eK();const qg=Gr(tK);var B1,x4;function rK(){if(x4)return B1;x4=1;var e=Aw(),t=Go(),r=LD(),a=Ua();function i(s,l){var d=a(s)?e:r;return d(s,t(l,3))}return B1=i,B1}var F1,y4;function nK(){if(y4)return F1;y4=1;var e=BD(),t=rK();function r(a,i){return e(t(a,i),1)}return F1=r,F1}var aK=nK();const iK=Gr(aK);var L1,v4;function sK(){if(v4)return L1;v4=1;var e=zw();function t(r,a){return e(r,a)}return L1=t,L1}var oK=sK();const Wg=Gr(oK);var Dd=1e9,lK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hS,sn=!0,Ei="[DecimalError] ",Cl=Ei+"Invalid argument: ",fS=Ei+"Exponent out of range: ",Rd=Math.floor,yl=Math.pow,cK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,si,zn=1e7,en=7,IR=9007199254740991,Dm=Rd(IR/en),kt={};kt.absoluteValue=kt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};kt.comparedTo=kt.cmp=function(e){var t,r,a,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(a=s.d.length,i=e.d.length,t=0,r=a<i?a:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return a===i?0:a>i^s.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*en;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(e){return Ks(this,new this.constructor(e))};kt.dividedToIntegerBy=kt.idiv=function(e){var t=this,r=t.constructor;return Vr(Ks(t,new r(e),0,1),r.precision)};kt.equals=kt.eq=function(e){return!this.cmp(e)};kt.exponent=function(){return Tn(this)};kt.greaterThan=kt.gt=function(e){return this.cmp(e)>0};kt.greaterThanOrEqualTo=kt.gte=function(e){return this.cmp(e)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(e){return this.cmp(e)<0};kt.lessThanOrEqualTo=kt.lte=function(e){return this.cmp(e)<1};kt.logarithm=kt.log=function(e){var t,r=this,a=r.constructor,i=a.precision,s=i+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(si))throw Error(Ei+"NaN");if(r.s<1)throw Error(Ei+(r.s?"NaN":"-Infinity"));return r.eq(si)?new a(0):(sn=!1,t=Ks(Cf(r,s),Cf(e,s),s),sn=!0,Vr(t,i))};kt.minus=kt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?PR(t,e):DR(t,(e.s=-e.s,e))};kt.modulo=kt.mod=function(e){var t,r=this,a=r.constructor,i=a.precision;if(e=new a(e),!e.s)throw Error(Ei+"NaN");return r.s?(sn=!1,t=Ks(r,e,0,1).times(e),sn=!0,r.minus(t)):Vr(new a(r),i)};kt.naturalExponential=kt.exp=function(){return RR(this)};kt.naturalLogarithm=kt.ln=function(){return Cf(this)};kt.negated=kt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};kt.plus=kt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DR(t,e):PR(t,(e.s=-e.s,e))};kt.precision=kt.sd=function(e){var t,r,a,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Cl+e);if(t=Tn(i)+1,a=i.d.length-1,r=a*en+1,a=i.d[a],a){for(;a%10==0;a/=10)r--;for(a=i.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};kt.squareRoot=kt.sqrt=function(){var e,t,r,a,i,s,l,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(Ei+"NaN")}for(e=Tn(d),sn=!1,i=Math.sqrt(+d),i==0||i==1/0?(t=us(d.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Rd((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new u(t)):a=new u(i.toString()),r=u.precision,i=l=r+3;;)if(s=a,a=s.plus(Ks(d,s,l+2)).times(.5),us(s.d).slice(0,l)===(t=us(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(Vr(s,r+1,0),s.times(s).eq(d)){a=s;break}}else if(t!="9999")break;l+=4}return sn=!0,Vr(a,r)};kt.times=kt.mul=function(e){var t,r,a,i,s,l,d,u,f,p=this,m=p.constructor,x=p.d,v=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,r=p.e+e.e,u=x.length,f=v.length,u<f&&(s=x,x=v,v=s,l=u,u=f,f=l),s=[],l=u+f,a=l;a--;)s.push(0);for(a=f;--a>=0;){for(t=0,i=u+a;i>a;)d=s[i]+v[a]*x[i-a-1]+t,s[i--]=d%zn|0,t=d/zn|0;s[i]=(s[i]+t)%zn|0}for(;!s[--l];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,sn?Vr(e,m.precision):e};kt.toDecimalPlaces=kt.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(ms(e,0,Dd),t===void 0?t=a.rounding:ms(t,0,8),Vr(r,e+Tn(r)+1,t))};kt.toExponential=function(e,t){var r,a=this,i=a.constructor;return e===void 0?r=Il(a,!0):(ms(e,0,Dd),t===void 0?t=i.rounding:ms(t,0,8),a=Vr(new i(a),e+1,t),r=Il(a,!0,e+1)),r};kt.toFixed=function(e,t){var r,a,i=this,s=i.constructor;return e===void 0?Il(i):(ms(e,0,Dd),t===void 0?t=s.rounding:ms(t,0,8),a=Vr(new s(i),e+Tn(i)+1,t),r=Il(a.abs(),!1,e+Tn(a)+1),i.isneg()&&!i.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var e=this,t=e.constructor;return Vr(new t(e),Tn(e)+1,t.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(e){var t,r,a,i,s,l,d=this,u=d.constructor,f=12,p=+(e=new u(e));if(!e.s)return new u(si);if(d=new u(d),!d.s){if(e.s<1)throw Error(Ei+"Infinity");return d}if(d.eq(si))return d;if(a=u.precision,e.eq(si))return Vr(d,a);if(t=e.e,r=e.d.length-1,l=t>=r,s=d.s,l){if((r=p<0?-p:p)<=IR){for(i=new u(si),t=Math.ceil(a/en+4),sn=!1;r%2&&(i=i.times(d),j4(i.d,t)),r=Rd(r/2),r!==0;)d=d.times(d),j4(d.d,t);return sn=!0,e.s<0?new u(si).div(i):Vr(i,a)}}else if(s<0)throw Error(Ei+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,sn=!1,i=e.times(Cf(d,a+f)),sn=!0,i=RR(i),i.s=s,i};kt.toPrecision=function(e,t){var r,a,i=this,s=i.constructor;return e===void 0?(r=Tn(i),a=Il(i,r<=s.toExpNeg||r>=s.toExpPos)):(ms(e,1,Dd),t===void 0?t=s.rounding:ms(t,0,8),i=Vr(new s(i),e,t),r=Tn(i),a=Il(i,e<=r||r<=s.toExpNeg,e)),a};kt.toSignificantDigits=kt.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(ms(e,1,Dd),t===void 0?t=a.rounding:ms(t,0,8)),Vr(new a(r),e,t)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Tn(e),r=e.constructor;return Il(e,t<=r.toExpNeg||t>=r.toExpPos)};function DR(e,t){var r,a,i,s,l,d,u,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),sn?Vr(t,m):t;if(u=e.d,f=t.d,l=e.e,i=t.e,u=u.slice(),s=l-i,s){for(s<0?(a=u,s=-s,d=f.length):(a=f,i=l,d=u.length),l=Math.ceil(m/en),d=l>d?l+1:d+1,s>d&&(s=d,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(d=u.length,s=f.length,d-s<0&&(s=d,a=f,f=u,u=a),r=0;s;)r=(u[--s]=u[s]+f[s]+r)/zn|0,u[s]%=zn;for(r&&(u.unshift(r),++i),d=u.length;u[--d]==0;)u.pop();return t.d=u,t.e=i,sn?Vr(t,m):t}function ms(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Cl+e)}function us(e){var t,r,a,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)a=e[t]+"",r=en-a.length,r&&(s+=Io(r)),s+=a;l=e[t],a=l+"",r=en-a.length,r&&(s+=Io(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var Ks=function(){function e(a,i){var s,l=0,d=a.length;for(a=a.slice();d--;)s=a[d]*i+l,a[d]=s%zn|0,l=s/zn|0;return l&&a.unshift(l),a}function t(a,i,s,l){var d,u;if(s!=l)u=s>l?1:-1;else for(d=u=0;d<s;d++)if(a[d]!=i[d]){u=a[d]>i[d]?1:-1;break}return u}function r(a,i,s){for(var l=0;s--;)a[s]-=l,l=a[s]<i[s]?1:0,a[s]=l*zn+a[s]-i[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,s,l){var d,u,f,p,m,x,v,j,b,y,C,E,O,S,T,k,D,F,B=a.constructor,M=a.s==i.s?1:-1,L=a.d,A=i.d;if(!a.s)return new B(a);if(!i.s)throw Error(Ei+"Division by zero");for(u=a.e-i.e,D=A.length,T=L.length,v=new B(M),j=v.d=[],f=0;A[f]==(L[f]||0);)++f;if(A[f]>(L[f]||0)&&--u,s==null?E=s=B.precision:l?E=s+(Tn(a)-Tn(i))+1:E=s,E<0)return new B(0);if(E=E/en+2|0,f=0,D==1)for(p=0,A=A[0],E++;(f<T||p)&&E--;f++)O=p*zn+(L[f]||0),j[f]=O/A|0,p=O%A|0;else{for(p=zn/(A[0]+1)|0,p>1&&(A=e(A,p),L=e(L,p),D=A.length,T=L.length),S=D,b=L.slice(0,D),y=b.length;y<D;)b[y++]=0;F=A.slice(),F.unshift(0),k=A[0],A[1]>=zn/2&&++k;do p=0,d=t(A,b,D,y),d<0?(C=b[0],D!=y&&(C=C*zn+(b[1]||0)),p=C/k|0,p>1?(p>=zn&&(p=zn-1),m=e(A,p),x=m.length,y=b.length,d=t(m,b,x,y),d==1&&(p--,r(m,D<x?F:A,x))):(p==0&&(d=p=1),m=A.slice()),x=m.length,x<y&&m.unshift(0),r(b,m,y),d==-1&&(y=b.length,d=t(A,b,D,y),d<1&&(p++,r(b,D<y?F:A,y))),y=b.length):d===0&&(p++,b=[0]),j[f++]=p,d&&b[0]?b[y++]=L[S]||0:(b=[L[S]],y=1);while((S++<T||b[0]!==void 0)&&E--)}return j[0]||j.shift(),v.e=u,Vr(v,l?s+Tn(v)+1:s)}}();function RR(e,t){var r,a,i,s,l,d,u=0,f=0,p=e.constructor,m=p.precision;if(Tn(e)>16)throw Error(fS+Tn(e));if(!e.s)return new p(si);for(sn=!1,d=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(a=Math.log(yl(2,f))/Math.LN10*2+5|0,d+=a,r=i=s=new p(si),p.precision=d;;){if(i=Vr(i.times(e),d),r=r.times(++u),l=s.plus(Ks(i,r,d)),us(l.d).slice(0,d)===us(s.d).slice(0,d)){for(;f--;)s=Vr(s.times(s),d);return p.precision=m,t==null?(sn=!0,Vr(s,m)):s}s=l}}function Tn(e){for(var t=e.e*en,r=e.d[0];r>=10;r/=10)t++;return t}function z1(e,t,r){if(t>e.LN10.sd())throw sn=!0,r&&(e.precision=r),Error(Ei+"LN10 precision limit exceeded");return Vr(new e(e.LN10),t)}function Io(e){for(var t="";e--;)t+="0";return t}function Cf(e,t){var r,a,i,s,l,d,u,f,p,m=1,x=10,v=e,j=v.d,b=v.constructor,y=b.precision;if(v.s<1)throw Error(Ei+(v.s?"NaN":"-Infinity"));if(v.eq(si))return new b(0);if(t==null?(sn=!1,f=y):f=t,v.eq(10))return t==null&&(sn=!0),z1(b,f);if(f+=x,b.precision=f,r=us(j),a=r.charAt(0),s=Tn(v),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)v=v.times(e),r=us(v.d),a=r.charAt(0),m++;s=Tn(v),a>1?(v=new b("0."+r),s++):v=new b(a+"."+r.slice(1))}else return u=z1(b,f+2,y).times(s+""),v=Cf(new b(a+"."+r.slice(1)),f-x).plus(u),b.precision=y,t==null?(sn=!0,Vr(v,y)):v;for(d=l=v=Ks(v.minus(si),v.plus(si),f),p=Vr(v.times(v),f),i=3;;){if(l=Vr(l.times(p),f),u=d.plus(Ks(l,new b(i),f)),us(u.d).slice(0,f)===us(d.d).slice(0,f))return d=d.times(2),s!==0&&(d=d.plus(z1(b,f+2,y).times(s+""))),d=Ks(d,new b(m),f),b.precision=y,t==null?(sn=!0,Vr(d,y)):d;d=u,i+=2}}function b4(e,t){var r,a,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(a,i),t){if(i-=a,r=r-a-1,e.e=Rd(r/en),e.d=[],a=(r+1)%en,r<0&&(a+=en),a<i){for(a&&e.d.push(+t.slice(0,a)),i-=en;a<i;)e.d.push(+t.slice(a,a+=en));t=t.slice(a),a=en-t.length}else a-=i;for(;a--;)t+="0";if(e.d.push(+t),sn&&(e.e>Dm||e.e<-Dm))throw Error(fS+r)}else e.s=0,e.e=0,e.d=[0];return e}function Vr(e,t,r){var a,i,s,l,d,u,f,p,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(a=t-l,a<0)a+=en,i=t,f=m[p=0];else{if(p=Math.ceil((a+1)/en),s=m.length,p>=s)return e;for(f=s=m[p],l=1;s>=10;s/=10)l++;a%=en,i=a-en+l}if(r!==void 0&&(s=yl(10,l-i-1),d=f/s%10|0,u=t<0||m[p+1]!==void 0||f%s,u=r<4?(d||u)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||u||r==6&&(a>0?i>0?f/yl(10,l-i):0:m[p-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return u?(s=Tn(e),m.length=1,t=t-s-1,m[0]=yl(10,(en-t%en)%en),e.e=Rd(-t/en)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=p,s=1,p--):(m.length=p+1,s=yl(10,en-a),m[p]=i>0?(f/yl(10,l-i)%yl(10,i)|0)*s:0),u)for(;;)if(p==0){(m[0]+=s)==zn&&(m[0]=1,++e.e);break}else{if(m[p]+=s,m[p]!=zn)break;m[p--]=0,s=1}for(a=m.length;m[--a]===0;)m.pop();if(sn&&(e.e>Dm||e.e<-Dm))throw Error(fS+Tn(e));return e}function PR(e,t){var r,a,i,s,l,d,u,f,p,m,x=e.constructor,v=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),sn?Vr(t,v):t;if(u=e.d,m=t.d,a=t.e,f=e.e,u=u.slice(),l=f-a,l){for(p=l<0,p?(r=u,l=-l,d=m.length):(r=m,a=f,d=u.length),i=Math.max(Math.ceil(v/en),d)+2,l>i&&(l=i,r.length=1),r.reverse(),i=l;i--;)r.push(0);r.reverse()}else{for(i=u.length,d=m.length,p=i<d,p&&(d=i),i=0;i<d;i++)if(u[i]!=m[i]){p=u[i]<m[i];break}l=0}for(p&&(r=u,u=m,m=r,t.s=-t.s),d=u.length,i=m.length-d;i>0;--i)u[d++]=0;for(i=m.length;i>l;){if(u[--i]<m[i]){for(s=i;s&&u[--s]===0;)u[s]=zn-1;--u[s],u[i]+=zn}u[i]-=m[i]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--a;return u[0]?(t.d=u,t.e=a,sn?Vr(t,v):t):new x(0)}function Il(e,t,r){var a,i=Tn(e),s=us(e.d),l=s.length;return t?(r&&(a=r-l)>0?s=s.charAt(0)+"."+s.slice(1)+Io(a):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Io(-i-1)+s,r&&(a=r-l)>0&&(s+=Io(a))):i>=l?(s+=Io(i+1-l),r&&(a=r-i-1)>0&&(s=s+"."+Io(a))):((a=i+1)<l&&(s=s.slice(0,a)+"."+s.slice(a)),r&&(a=r-l)>0&&(i+1===l&&(s+="."),s+=Io(a))),e.s<0?"-"+s:s}function j4(e,t){if(e.length>t)return e.length=t,!0}function MR(e){var t,r,a;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Cl+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return b4(l,s.toString())}else if(typeof s!="string")throw Error(Cl+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,cK.test(s))b4(l,s);else throw Error(Cl+s)}if(i.prototype=kt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=MR,i.config=i.set=dK,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return i.config(e),i}function dK(e){if(!e||typeof e!="object")throw Error(Ei+"Object expected");var t,r,a,i=["precision",1,Dd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((a=e[r=i[t]])!==void 0)if(Rd(a)===a&&a>=i[t+1]&&a<=i[t+2])this[r]=a;else throw Error(Cl+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Cl+r+": "+a);return this}var hS=MR(lK);si=new hS(1);const Wr=hS;function uK(e){return mK(e)||pK(e)||hK(e)||fK()}function fK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hK(e,t){if(e){if(typeof e=="string")return o2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o2(e,t)}}function pK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function mK(e){if(Array.isArray(e))return o2(e)}function o2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var gK=function(t){return t},BR={},FR=function(t){return t===BR},w4=function(t){return function r(){return arguments.length===0||arguments.length===1&&FR(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},xK=function e(t,r){return t===1?r:w4(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var l=i.filter(function(d){return d!==BR}).length;return l>=t?r.apply(void 0,i):e(t-l,w4(function(){for(var d=arguments.length,u=new Array(d),f=0;f<d;f++)u[f]=arguments[f];var p=i.map(function(m){return FR(m)?u.shift():m});return r.apply(void 0,uK(p).concat(u))}))})},Hg=function(t){return xK(t.length,t)},l2=function(t,r){for(var a=[],i=t;i<r;++i)a[i-t]=i;return a},yK=Hg(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),vK=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return gK;var i=r.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce(function(d,u){return u(d)},s.apply(void 0,arguments))}},c2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},LR=function(t){var r=null,a=null;return function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r&&s.every(function(d,u){return d===r[u]})||(r=s,a=t.apply(void 0,s)),a}};function bK(e){var t;return e===0?t=1:t=Math.floor(new Wr(e).abs().log(10).toNumber())+1,t}function jK(e,t,r){for(var a=new Wr(e),i=0,s=[];a.lt(t)&&i<1e5;)s.push(a.toNumber()),a=a.add(r),i++;return s}var wK=Hg(function(e,t,r){var a=+e,i=+t;return a+r*(i-a)}),SK=Hg(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),NK=Hg(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Gg={rangeStep:jK,getDigitCount:bK,interpolateNumber:wK,uninterpolateNumber:SK,uninterpolateTruncation:NK};function d2(e){return AK(e)||CK(e)||zR(e)||TK()}function TK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function AK(e){if(Array.isArray(e))return u2(e)}function Af(e,t){return _K(e)||OK(e,t)||zR(e,t)||EK()}function EK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zR(e,t){if(e){if(typeof e=="string")return u2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u2(e,t)}}function u2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function OK(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,i=!1,s=void 0;try{for(var l=e[Symbol.iterator](),d;!(a=(d=l.next()).done)&&(r.push(d.value),!(t&&r.length===t));a=!0);}catch(u){i=!0,s=u}finally{try{!a&&l.return!=null&&l.return()}finally{if(i)throw s}}return r}}function _K(e){if(Array.isArray(e))return e}function $R(e){var t=Af(e,2),r=t[0],a=t[1],i=r,s=a;return r>a&&(i=a,s=r),[i,s]}function UR(e,t,r){if(e.lte(0))return new Wr(0);var a=Gg.getDigitCount(e.toNumber()),i=new Wr(10).pow(a),s=e.div(i),l=a!==1?.05:.1,d=new Wr(Math.ceil(s.div(l).toNumber())).add(r).mul(l),u=d.mul(i);return t?u:new Wr(Math.ceil(u))}function kK(e,t,r){var a=1,i=new Wr(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(a=new Wr(10).pow(Gg.getDigitCount(e)-1),i=new Wr(Math.floor(i.div(a).toNumber())).mul(a)):s>1&&(i=new Wr(Math.floor(e)))}else e===0?i=new Wr(Math.floor((t-1)/2)):r||(i=new Wr(Math.floor(e)));var l=Math.floor((t-1)/2),d=vK(yK(function(u){return i.add(new Wr(u-l).mul(a)).toNumber()}),l2);return d(0,t)}function qR(e,t,r,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Wr(0),tickMin:new Wr(0),tickMax:new Wr(0)};var s=UR(new Wr(t).sub(e).div(r-1),a,i),l;e<=0&&t>=0?l=new Wr(0):(l=new Wr(e).add(t).div(2),l=l.sub(new Wr(l).mod(s)));var d=Math.ceil(l.sub(e).div(s).toNumber()),u=Math.ceil(new Wr(t).sub(l).div(s).toNumber()),f=d+u+1;return f>r?qR(e,t,r,a,i+1):(f<r&&(u=t>0?u+(r-f):u,d=t>0?d:d+(r-f)),{step:s,tickMin:l.sub(new Wr(d).mul(s)),tickMax:l.add(new Wr(u).mul(s))})}function IK(e){var t=Af(e,2),r=t[0],a=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),d=$R([r,a]),u=Af(d,2),f=u[0],p=u[1];if(f===-1/0||p===1/0){var m=p===1/0?[f].concat(d2(l2(0,i-1).map(function(){return 1/0}))):[].concat(d2(l2(0,i-1).map(function(){return-1/0})),[p]);return r>a?c2(m):m}if(f===p)return kK(f,i,s);var x=qR(f,p,l,s),v=x.step,j=x.tickMin,b=x.tickMax,y=Gg.rangeStep(j,b.add(new Wr(.1).mul(v)),v);return r>a?c2(y):y}function DK(e,t){var r=Af(e,2),a=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=$R([a,i]),d=Af(l,2),u=d[0],f=d[1];if(u===-1/0||f===1/0)return[a,i];if(u===f)return[u];var p=Math.max(t,2),m=UR(new Wr(f).sub(u).div(p-1),s,0),x=[].concat(d2(Gg.rangeStep(new Wr(u),new Wr(f).sub(new Wr(.99).mul(m)),m)),[f]);return a>i?c2(x):x}var RK=LR(IK),PK=LR(DK),MK="Invariant failed";function Dl(e,t){throw new Error(MK)}var BK=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Rm.apply(this,arguments)}function FK(e,t){return UK(e)||$K(e,t)||zK(e,t)||LK()}function LK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zK(e,t){if(e){if(typeof e=="string")return S4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S4(e,t)}}function S4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function $K(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function UK(e){if(Array.isArray(e))return e}function qK(e,t){if(e==null)return{};var r=WK(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WK(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function HK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GK(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GR(a.key),a)}}function KK(e,t,r){return t&&GK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VK(e,t,r){return t=Pm(t),YK(e,WR()?Reflect.construct(t,r||[],Pm(e).constructor):t.apply(e,r))}function YK(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XK(e)}function XK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WR=function(){return!!e})()}function Pm(e){return Pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pm(e)}function QK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f2(e,t)}function f2(e,t){return f2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},f2(e,t)}function HR(e,t,r){return t=GR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GR(e){var t=JK(e,"string");return od(t)=="symbol"?t:t+""}function JK(e,t){if(od(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(od(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mh=function(e){function t(){return HK(this,t),VK(this,t,arguments)}return QK(t,e),KK(t,[{key:"render",value:function(){var a=this.props,i=a.offset,s=a.layout,l=a.width,d=a.dataKey,u=a.data,f=a.dataPointFormatter,p=a.xAxis,m=a.yAxis,x=qK(a,BK),v=gr(x,!1);this.props.direction==="x"&&p.type!=="number"&&Dl();var j=u.map(function(b){var y=f(b,d),C=y.x,E=y.y,O=y.value,S=y.errorVal;if(!S)return null;var T=[],k,D;if(Array.isArray(S)){var F=FK(S,2);k=F[0],D=F[1]}else k=D=S;if(s==="vertical"){var B=p.scale,M=E+i,L=M+l,A=M-l,U=B(O-k),P=B(O+D);T.push({x1:P,y1:L,x2:P,y2:A}),T.push({x1:U,y1:M,x2:P,y2:M}),T.push({x1:U,y1:L,x2:U,y2:A})}else if(s==="horizontal"){var I=m.scale,R=C+i,W=R-l,Q=R+l,ge=I(O-k),q=I(O+D);T.push({x1:W,y1:q,x2:Q,y2:q}),T.push({x1:R,y1:ge,x2:R,y2:q}),T.push({x1:W,y1:ge,x2:Q,y2:ge})}return Ie.createElement(yn,Rm({className:"recharts-errorBar",key:"bar-".concat(T.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},v),T.map(function(Y){return Ie.createElement("line",Rm({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return Ie.createElement(yn,{className:"recharts-errorBars"},j)}}])}(Ie.Component);HR(mh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});HR(mh,"displayName","ErrorBar");function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function N4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N4(Object(r),!0).forEach(function(a){ZK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ZK(e,t,r){return t=eV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eV(e){var t=tV(e,"string");return Ef(t)=="symbol"?t:t+""}function tV(e,t){if(Ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ef(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KR=function(t){var r=t.children,a=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,l=ri(r,qc);if(!l)return null;var d=qc.defaultProps,u=d!==void 0?hl(hl({},d),l.props):{},f;return l.props&&l.props.payload?f=l.props&&l.props.payload:s==="children"?f=(a||[]).reduce(function(p,m){var x=m.item,v=m.props,j=v.sectors||v.data||[];return p.concat(j.map(function(b){return{type:l.props.iconType||x.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):f=(a||[]).map(function(p){var m=p.item,x=m.type.defaultProps,v=x!==void 0?hl(hl({},x),m.props):{},j=v.dataKey,b=v.name,y=v.legendType,C=v.hide;return{inactive:C,dataKey:j,type:u.iconType||y||"square",color:pS(m),value:b||j,payload:v}}),hl(hl(hl({},u),qc.getWithHeight(l,i)),{},{payload:f,item:l})};function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function T4(e){return iV(e)||aV(e)||nV(e)||rV()}function rV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nV(e,t){if(e){if(typeof e=="string")return h2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h2(e,t)}}function aV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iV(e){if(Array.isArray(e))return h2(e)}function h2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function C4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C4(Object(r),!0).forEach(function(a){Hc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hc(e,t,r){return t=sV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sV(e){var t=oV(e,"string");return Of(t)=="symbol"?t:t+""}function oV(e,t){if(Of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Of(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oi(e,t,r){return pr(e)||pr(t)?r:Rn(t)?Ti(e,t,r):lr(t)?t(e):r}function tf(e,t,r,a){var i=iK(e,function(d){return oi(d,t)});if(r==="number"){var s=i.filter(function(d){return St(d)||parseFloat(d)});return s.length?[qg(s),Ug(s)]:[1/0,-1/0]}var l=a?i.filter(function(d){return!pr(d)}):i;return l.map(function(d){return Rn(d)||d instanceof Date?d:""})}var lV=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,l=-1,d=(r=a==null?void 0:a.length)!==null&&r!==void 0?r:0;if(d<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var u=s.range,f=0;f<d;f++){var p=f>0?i[f-1].coordinate:i[d-1].coordinate,m=i[f].coordinate,x=f>=d-1?i[0].coordinate:i[f+1].coordinate,v=void 0;if(Hi(m-p)!==Hi(x-m)){var j=[];if(Hi(x-m)===Hi(u[1]-u[0])){v=x;var b=m+u[1]-u[0];j[0]=Math.min(b,(b+p)/2),j[1]=Math.max(b,(b+p)/2)}else{v=p;var y=x+u[1]-u[0];j[0]=Math.min(m,(y+m)/2),j[1]=Math.max(m,(y+m)/2)}var C=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(t>C[0]&&t<=C[1]||t>=j[0]&&t<=j[1]){l=i[f].index;break}}else{var E=Math.min(p,x),O=Math.max(p,x);if(t>(E+m)/2&&t<=(O+m)/2){l=i[f].index;break}}}else for(var S=0;S<d;S++)if(S===0&&t<=(a[S].coordinate+a[S+1].coordinate)/2||S>0&&S<d-1&&t>(a[S].coordinate+a[S-1].coordinate)/2&&t<=(a[S].coordinate+a[S+1].coordinate)/2||S===d-1&&t>(a[S].coordinate+a[S-1].coordinate)/2){l=a[S].index;break}return l},pS=function(t){var r,a=t,i=a.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?fn(fn({},t.type.defaultProps),t.props):t.props,l=s.stroke,d=s.fill,u;switch(i){case"Line":u=l;break;case"Area":case"Radar":u=l&&l!=="none"?l:d;break;default:u=d;break}return u},cV=function(t){var r=t.barSize,a=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var l={},d=Object.keys(s),u=0,f=d.length;u<f;u++)for(var p=s[d[u]].stackGroups,m=Object.keys(p),x=0,v=m.length;x<v;x++){var j=p[m[x]],b=j.items,y=j.cateAxisId,C=b.filter(function(D){return Hs(D.type).indexOf("Bar")>=0});if(C&&C.length){var E=C[0].type.defaultProps,O=E!==void 0?fn(fn({},E),C[0].props):C[0].props,S=O.barSize,T=O[y];l[T]||(l[T]=[]);var k=pr(S)?r:S;l[T].push({item:C[0],stackList:C.slice(1),barSize:pr(k)?void 0:kl(k,a,0)})}}return l},dV=function(t){var r=t.barGap,a=t.barCategoryGap,i=t.bandSize,s=t.sizeList,l=s===void 0?[]:s,d=t.maxBarSize,u=l.length;if(u<1)return null;var f=kl(r,i,0,!0),p,m=[];if(l[0].barSize===+l[0].barSize){var x=!1,v=i/u,j=l.reduce(function(S,T){return S+T.barSize||0},0);j+=(u-1)*f,j>=i&&(j-=(u-1)*f,f=0),j>=i&&v>0&&(x=!0,v*=.9,j=u*v);var b=(i-j)/2>>0,y={offset:b-f,size:0};p=l.reduce(function(S,T){var k={item:T.item,position:{offset:y.offset+y.size+f,size:x?v:T.barSize}},D=[].concat(T4(S),[k]);return y=D[D.length-1].position,T.stackList&&T.stackList.length&&T.stackList.forEach(function(F){D.push({item:F,position:y})}),D},m)}else{var C=kl(a,i,0,!0);i-2*C-(u-1)*f<=0&&(f=0);var E=(i-2*C-(u-1)*f)/u;E>1&&(E>>=0);var O=d===+d?Math.min(E,d):E;p=l.reduce(function(S,T,k){var D=[].concat(T4(S),[{item:T.item,position:{offset:C+(E+f)*k+(E-O)/2,size:O}}]);return T.stackList&&T.stackList.length&&T.stackList.forEach(function(F){D.push({item:F,position:D[D.length-1].position})}),D},m)}return p},uV=function(t,r,a,i){var s=a.children,l=a.width,d=a.margin,u=l-(d.left||0)-(d.right||0),f=KR({children:s,legendWidth:u});if(f){var p=i||{},m=p.width,x=p.height,v=f.align,j=f.verticalAlign,b=f.layout;if((b==="vertical"||b==="horizontal"&&j==="middle")&&v!=="center"&&St(t[v]))return fn(fn({},t),{},Hc({},v,t[v]+(m||0)));if((b==="horizontal"||b==="vertical"&&v==="center")&&j!=="middle"&&St(t[j]))return fn(fn({},t),{},Hc({},j,t[j]+(x||0)))}return t},fV=function(t,r,a){return pr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},VR=function(t,r,a,i,s){var l=r.props.children,d=Ci(l,mh).filter(function(f){return fV(i,s,f.props.direction)});if(d&&d.length){var u=d.map(function(f){return f.props.dataKey});return t.reduce(function(f,p){var m=oi(p,a);if(pr(m))return f;var x=Array.isArray(m)?[qg(m),Ug(m)]:[m,m],v=u.reduce(function(j,b){var y=oi(p,b,0),C=x[0]-Math.abs(Array.isArray(y)?y[0]:y),E=x[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(C,j[0]),Math.max(E,j[1])]},[1/0,-1/0]);return[Math.min(v[0],f[0]),Math.max(v[1],f[1])]},[1/0,-1/0])}return null},hV=function(t,r,a,i,s){var l=r.map(function(d){return VR(t,d,a,s,i)}).filter(function(d){return!pr(d)});return l&&l.length?l.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]):null},YR=function(t,r,a,i,s){var l=r.map(function(u){var f=u.props.dataKey;return a==="number"&&f&&VR(t,u,f,i)||tf(t,f,a,s)});if(a==="number")return l.reduce(function(u,f){return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);var d={};return l.reduce(function(u,f){for(var p=0,m=f.length;p<m;p++)d[f[p]]||(d[f[p]]=!0,u.push(f[p]));return u},[])},XR=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},QR=function(t,r,a,i){if(i)return t.map(function(u){return u.coordinate});var s,l,d=t.map(function(u){return u.coordinate===r&&(s=!0),u.coordinate===a&&(l=!0),u.coordinate});return s||d.push(r),l||d.push(a),d},Us=function(t,r,a){if(!t)return null;var i=t.scale,s=t.duplicateDomain,l=t.type,d=t.range,u=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,f=(r||a)&&l==="category"&&i.bandwidth?i.bandwidth()/u:0;if(f=t.axisType==="angleAxis"&&(d==null?void 0:d.length)>=2?Hi(d[0]-d[1])*2*f:f,r&&(t.ticks||t.niceTicks)){var p=(t.ticks||t.niceTicks).map(function(m){var x=s?s.indexOf(m):m;return{coordinate:i(x)+f,value:m,offset:f}});return p.filter(function(m){return!lh(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,x){return{coordinate:i(m)+f,value:m,index:x,offset:f}}):i.ticks&&!a?i.ticks(t.tickCount).map(function(m){return{coordinate:i(m)+f,value:m,offset:f}}):i.domain().map(function(m,x){return{coordinate:i(m)+f,value:s?s[m]:m,index:x,offset:f}})},$1=new WeakMap,Mp=function(t,r){if(typeof r!="function")return t;$1.has(t)||$1.set(t,new WeakMap);var a=$1.get(t);if(a.has(r))return a.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,i),i},pV=function(t,r,a){var i=t.scale,s=t.type,l=t.layout,d=t.axisType;if(i==="auto")return l==="radial"&&d==="radiusAxis"?{scale:jf(),realScaleType:"band"}:l==="radial"&&d==="angleAxis"?{scale:Om(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:ef(),realScaleType:"point"}:s==="category"?{scale:jf(),realScaleType:"band"}:{scale:Om(),realScaleType:"linear"};if(_l(i)){var u="scale".concat(Og(i));return{scale:(u4[u]||ef)(),realScaleType:u4[u]?u:"point"}}return lr(i)?{scale:i}:{scale:ef(),realScaleType:"point"}},A4=1e-4,mV=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,i=t.range(),s=Math.min(i[0],i[1])-A4,l=Math.max(i[0],i[1])+A4,d=t(r[0]),u=t(r[a-1]);(d<s||d>l||u<s||u>l)&&t.domain([r[0],r[a-1]])}},gV=function(t,r){if(!t)return null;for(var a=0,i=t.length;a<i;a++)if(t[a].item===r)return t[a].position;return null},xV=function(t,r){if(!r||r.length!==2||!St(r[0])||!St(r[1]))return t;var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[t[0],t[1]];return(!St(t[0])||t[0]<a)&&(s[0]=a),(!St(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<a&&(s[1]=a),s},yV=function(t){var r=t.length;if(!(r<=0))for(var a=0,i=t[0].length;a<i;++a)for(var s=0,l=0,d=0;d<r;++d){var u=lh(t[d][a][1])?t[d][a][0]:t[d][a][1];u>=0?(t[d][a][0]=s,t[d][a][1]=s+u,s=t[d][a][1]):(t[d][a][0]=l,t[d][a][1]=l+u,l=t[d][a][1])}},vV=function(t){var r=t.length;if(!(r<=0))for(var a=0,i=t[0].length;a<i;++a)for(var s=0,l=0;l<r;++l){var d=lh(t[l][a][1])?t[l][a][0]:t[l][a][1];d>=0?(t[l][a][0]=s,t[l][a][1]=s+d,s=t[l][a][1]):(t[l][a][0]=0,t[l][a][1]=0)}},bV={sign:yV,expand:n9,none:Zc,silhouette:a9,wiggle:i9,positive:vV},jV=function(t,r,a){var i=r.map(function(d){return d.props.dataKey}),s=bV[a],l=r9().keys(i).value(function(d,u){return+oi(d,u,0)}).order(qj).offset(s);return l(t)},wV=function(t,r,a,i,s,l){if(!t)return null;var d=l?r.reverse():r,u={},f=d.reduce(function(m,x){var v,j=(v=x.type)!==null&&v!==void 0&&v.defaultProps?fn(fn({},x.type.defaultProps),x.props):x.props,b=j.stackId,y=j.hide;if(y)return m;var C=j[a],E=m[C]||{hasStack:!1,stackGroups:{}};if(Rn(b)){var O=E.stackGroups[b]||{numericAxisId:a,cateAxisId:i,items:[]};O.items.push(x),E.hasStack=!0,E.stackGroups[b]=O}else E.stackGroups[ch("_stackId_")]={numericAxisId:a,cateAxisId:i,items:[x]};return fn(fn({},m),{},Hc({},C,E))},u),p={};return Object.keys(f).reduce(function(m,x){var v=f[x];if(v.hasStack){var j={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(b,y){var C=v.stackGroups[y];return fn(fn({},b),{},Hc({},y,{numericAxisId:a,cateAxisId:i,items:C.items,stackedData:jV(t,C.items,s)}))},j)}return fn(fn({},m),{},Hc({},x,v))},p)},SV=function(t,r){var a=r.realScaleType,i=r.type,s=r.tickCount,l=r.originalDomain,d=r.allowDecimals,u=a||r.scale;if(u!=="auto"&&u!=="linear")return null;if(s&&i==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var f=t.domain();if(!f.length)return null;var p=RK(f,s,d);return t.domain([qg(p),Ug(p)]),{niceTicks:p}}if(s&&i==="number"){var m=t.domain(),x=PK(m,s,d);return{niceTicks:x}}return null};function E4(e){var t=e.axis,r=e.ticks,a=e.bandSize,i=e.entry,s=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!pr(i[t.dataKey])){var d=cm(r,"value",i[t.dataKey]);if(d)return d.coordinate+a/2}return r[s]?r[s].coordinate+a/2:null}var u=oi(i,pr(l)?t.dataKey:l);return pr(u)?null:t.scale(u)}var O4=function(t){var r=t.axis,a=t.ticks,i=t.offset,s=t.bandSize,l=t.entry,d=t.index;if(r.type==="category")return a[d]?a[d].coordinate+i:null;var u=oi(l,r.dataKey,r.domain[d]);return pr(u)?null:r.scale(u)-s/2+i},NV=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var i=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);return i<=0&&s>=0?0:s<0?s:i}return a[0]},TV=function(t,r){var a,i=(a=t.type)!==null&&a!==void 0&&a.defaultProps?fn(fn({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(Rn(s)){var l=r[s];if(l){var d=l.items.indexOf(t);return d>=0?l.stackedData[d]:null}}return null},CV=function(t){return t.reduce(function(r,a){return[qg(a.concat([r[0]]).filter(St)),Ug(a.concat([r[1]]).filter(St))]},[1/0,-1/0])},JR=function(t,r,a){return Object.keys(t).reduce(function(i,s){var l=t[s],d=l.stackedData,u=d.reduce(function(f,p){var m=CV(p.slice(r,a+1));return[Math.min(f[0],m[0]),Math.max(f[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],i[0]),Math.max(u[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},_4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,k4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p2=function(t,r,a){if(lr(t))return t(r,a);if(!Array.isArray(t))return r;var i=[];if(St(t[0]))i[0]=a?t[0]:Math.min(t[0],r[0]);else if(_4.test(t[0])){var s=+_4.exec(t[0])[1];i[0]=r[0]-s}else lr(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(St(t[1]))i[1]=a?t[1]:Math.max(t[1],r[1]);else if(k4.test(t[1])){var l=+k4.exec(t[1])[1];i[1]=r[1]+l}else lr(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},Mm=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!a||i>0)return i}if(t&&r&&r.length>=2){for(var s=Uw(r,function(m){return m.coordinate}),l=1/0,d=1,u=s.length;d<u;d++){var f=s[d],p=s[d-1];l=Math.min((f.coordinate||0)-(p.coordinate||0),l)}return l===1/0?0:l}return a?void 0:0},I4=function(t,r,a){return!t||!t.length||Wg(t,Ti(a,"type.defaultProps.domain"))?r:t},ZR=function(t,r){var a=t.type.defaultProps?fn(fn({},t.type.defaultProps),t.props):t.props,i=a.dataKey,s=a.name,l=a.unit,d=a.formatter,u=a.tooltipType,f=a.chartType,p=a.hide;return fn(fn({},gr(t,!1)),{},{dataKey:i,unit:l,formatter:d,name:s||i,color:pS(t),value:oi(r,i),type:u,payload:r,chartType:f,hide:p})};function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function D4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function R4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D4(Object(r),!0).forEach(function(a){AV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AV(e,t,r){return t=EV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EV(e){var t=OV(e,"string");return _f(t)=="symbol"?t:t+""}function OV(e,t){if(_f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(_f(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bm=Math.PI/180,_V=function(t){return t*180/Math.PI},ea=function(t,r,a,i){return{x:t+Math.cos(-Bm*i)*a,y:r+Math.sin(-Bm*i)*a}},kV=function(t,r){var a=t.x,i=t.y,s=r.x,l=r.y;return Math.sqrt(Math.pow(a-s,2)+Math.pow(i-l,2))},IV=function(t,r){var a=t.x,i=t.y,s=r.cx,l=r.cy,d=kV({x:a,y:i},{x:s,y:l});if(d<=0)return{radius:d};var u=(a-s)/d,f=Math.acos(u);return i>l&&(f=2*Math.PI-f),{radius:d,angle:_V(f),angleInRadian:f}},DV=function(t){var r=t.startAngle,a=t.endAngle,i=Math.floor(r/360),s=Math.floor(a/360),l=Math.min(i,s);return{startAngle:r-l*360,endAngle:a-l*360}},RV=function(t,r){var a=r.startAngle,i=r.endAngle,s=Math.floor(a/360),l=Math.floor(i/360),d=Math.min(s,l);return t+d*360},P4=function(t,r){var a=t.x,i=t.y,s=IV({x:a,y:i},r),l=s.radius,d=s.angle,u=r.innerRadius,f=r.outerRadius;if(l<u||l>f)return!1;if(l===0)return!0;var p=DV(r),m=p.startAngle,x=p.endAngle,v=d,j;if(m<=x){for(;v>x;)v-=360;for(;v<m;)v+=360;j=v>=m&&v<=x}else{for(;v>m;)v-=360;for(;v<x;)v+=360;j=v>=x&&v<=m}return j?R4(R4({},r),{},{radius:l,angle:RV(v,r)}):null};function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}var PV=["offset"];function MV(e){return zV(e)||LV(e)||FV(e)||BV()}function BV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FV(e,t){if(e){if(typeof e=="string")return m2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m2(e,t)}}function LV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zV(e){if(Array.isArray(e))return m2(e)}function m2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function $V(e,t){if(e==null)return{};var r=UV(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function UV(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function M4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(r),!0).forEach(function(a){qV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qV(e,t,r){return t=WV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WV(e){var t=HV(e,"string");return kf(t)=="symbol"?t:t+""}function HV(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(kf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},If.apply(this,arguments)}var GV=function(t){var r=t.value,a=t.formatter,i=pr(t.children)?r:t.children;return lr(a)?a(i):i},KV=function(t,r){var a=Hi(r-t),i=Math.min(Math.abs(r-t),360);return a*i},VV=function(t,r,a){var i=t.position,s=t.viewBox,l=t.offset,d=t.className,u=s,f=u.cx,p=u.cy,m=u.innerRadius,x=u.outerRadius,v=u.startAngle,j=u.endAngle,b=u.clockWise,y=(m+x)/2,C=KV(v,j),E=C>=0?1:-1,O,S;i==="insideStart"?(O=v+E*l,S=b):i==="insideEnd"?(O=j-E*l,S=!b):i==="end"&&(O=j+E*l,S=b),S=C<=0?S:!S;var T=ea(f,p,y,O),k=ea(f,p,y,O+(S?1:-1)*359),D="M".concat(T.x,",").concat(T.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),F=pr(t.id)?ch("recharts-radial-line-"):t.id;return Ie.createElement("text",If({},a,{dominantBaseline:"central",className:jr("recharts-radial-bar-label",d)}),Ie.createElement("defs",null,Ie.createElement("path",{id:F,d:D})),Ie.createElement("textPath",{xlinkHref:"#".concat(F)},r))},YV=function(t){var r=t.viewBox,a=t.offset,i=t.position,s=r,l=s.cx,d=s.cy,u=s.innerRadius,f=s.outerRadius,p=s.startAngle,m=s.endAngle,x=(p+m)/2;if(i==="outside"){var v=ea(l,d,f+a,x),j=v.x,b=v.y;return{x:j,y:b,textAnchor:j>=l?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"end"};var y=(u+f)/2,C=ea(l,d,y,x),E=C.x,O=C.y;return{x:E,y:O,textAnchor:"middle",verticalAnchor:"middle"}},XV=function(t){var r=t.viewBox,a=t.parentViewBox,i=t.offset,s=t.position,l=r,d=l.x,u=l.y,f=l.width,p=l.height,m=p>=0?1:-1,x=m*i,v=m>0?"end":"start",j=m>0?"start":"end",b=f>=0?1:-1,y=b*i,C=b>0?"end":"start",E=b>0?"start":"end";if(s==="top"){var O={x:d+f/2,y:u-m*i,textAnchor:"middle",verticalAnchor:v};return In(In({},O),a?{height:Math.max(u-a.y,0),width:f}:{})}if(s==="bottom"){var S={x:d+f/2,y:u+p+x,textAnchor:"middle",verticalAnchor:j};return In(In({},S),a?{height:Math.max(a.y+a.height-(u+p),0),width:f}:{})}if(s==="left"){var T={x:d-y,y:u+p/2,textAnchor:C,verticalAnchor:"middle"};return In(In({},T),a?{width:Math.max(T.x-a.x,0),height:p}:{})}if(s==="right"){var k={x:d+f+y,y:u+p/2,textAnchor:E,verticalAnchor:"middle"};return In(In({},k),a?{width:Math.max(a.x+a.width-k.x,0),height:p}:{})}var D=a?{width:f,height:p}:{};return s==="insideLeft"?In({x:d+y,y:u+p/2,textAnchor:E,verticalAnchor:"middle"},D):s==="insideRight"?In({x:d+f-y,y:u+p/2,textAnchor:C,verticalAnchor:"middle"},D):s==="insideTop"?In({x:d+f/2,y:u+x,textAnchor:"middle",verticalAnchor:j},D):s==="insideBottom"?In({x:d+f/2,y:u+p-x,textAnchor:"middle",verticalAnchor:v},D):s==="insideTopLeft"?In({x:d+y,y:u+x,textAnchor:E,verticalAnchor:j},D):s==="insideTopRight"?In({x:d+f-y,y:u+x,textAnchor:C,verticalAnchor:j},D):s==="insideBottomLeft"?In({x:d+y,y:u+p-x,textAnchor:E,verticalAnchor:v},D):s==="insideBottomRight"?In({x:d+f-y,y:u+p-x,textAnchor:C,verticalAnchor:v},D):Od(s)&&(St(s.x)||bl(s.x))&&(St(s.y)||bl(s.y))?In({x:d+kl(s.x,f),y:u+kl(s.y,p),textAnchor:"end",verticalAnchor:"end"},D):In({x:d+f/2,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},D)},QV=function(t){return"cx"in t&&St(t.cx)};function la(e){var t=e.offset,r=t===void 0?5:t,a=$V(e,PV),i=In({offset:r},a),s=i.viewBox,l=i.position,d=i.value,u=i.children,f=i.content,p=i.className,m=p===void 0?"":p,x=i.textBreakAll;if(!s||pr(d)&&pr(u)&&!N.isValidElement(f)&&!lr(f))return null;if(N.isValidElement(f))return N.cloneElement(f,i);var v;if(lr(f)){if(v=N.createElement(f,i),N.isValidElement(v))return v}else v=GV(i);var j=QV(s),b=gr(i,!0);if(j&&(l==="insideStart"||l==="insideEnd"||l==="end"))return VV(i,v,b);var y=j?YV(i):XV(i);return Ie.createElement(wm,If({className:jr("recharts-label",m)},b,y,{breakAll:x}),v)}la.displayName="Label";var e8=function(t){var r=t.cx,a=t.cy,i=t.angle,s=t.startAngle,l=t.endAngle,d=t.r,u=t.radius,f=t.innerRadius,p=t.outerRadius,m=t.x,x=t.y,v=t.top,j=t.left,b=t.width,y=t.height,C=t.clockWise,E=t.labelViewBox;if(E)return E;if(St(b)&&St(y)){if(St(m)&&St(x))return{x:m,y:x,width:b,height:y};if(St(v)&&St(j))return{x:v,y:j,width:b,height:y}}return St(m)&&St(x)?{x:m,y:x,width:0,height:0}:St(r)&&St(a)?{cx:r,cy:a,startAngle:s||i||0,endAngle:l||i||0,innerRadius:f||0,outerRadius:p||u||d||0,clockWise:C}:t.viewBox?t.viewBox:{}},JV=function(t,r){return t?t===!0?Ie.createElement(la,{key:"label-implicit",viewBox:r}):Rn(t)?Ie.createElement(la,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===la?N.cloneElement(t,{key:"label-implicit",viewBox:r}):Ie.createElement(la,{key:"label-implicit",content:t,viewBox:r}):lr(t)?Ie.createElement(la,{key:"label-implicit",content:t,viewBox:r}):Od(t)?Ie.createElement(la,If({viewBox:r},t,{key:"label-implicit"})):null:null},ZV=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var i=t.children,s=e8(t),l=Ci(i,la).map(function(u,f){return N.cloneElement(u,{viewBox:r||s,key:"label-".concat(f)})});if(!a)return l;var d=JV(t.label,r||s);return[d].concat(MV(l))};la.parseViewBox=e8;la.renderCallByParent=ZV;var U1,B4;function eY(){if(B4)return U1;B4=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return U1=e,U1}var tY=eY();const rY=Gr(tY);function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}var nY=["valueAccessor"],aY=["data","dataKey","clockWise","id","textBreakAll"];function iY(e){return cY(e)||lY(e)||oY(e)||sY()}function sY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oY(e,t){if(e){if(typeof e=="string")return g2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g2(e,t)}}function lY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cY(e){if(Array.isArray(e))return g2(e)}function g2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fm.apply(this,arguments)}function F4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function L4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F4(Object(r),!0).forEach(function(a){dY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dY(e,t,r){return t=uY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=fY(e,"string");return Df(t)=="symbol"?t:t+""}function fY(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Df(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z4(e,t){if(e==null)return{};var r=hY(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var pY=function(t){return Array.isArray(t.value)?rY(t.value):t.value};function Lo(e){var t=e.valueAccessor,r=t===void 0?pY:t,a=z4(e,nY),i=a.data,s=a.dataKey,l=a.clockWise,d=a.id,u=a.textBreakAll,f=z4(a,aY);return!i||!i.length?null:Ie.createElement(yn,{className:"recharts-label-list"},i.map(function(p,m){var x=pr(s)?r(p,m):oi(p&&p.payload,s),v=pr(d)?{}:{id:"".concat(d,"-").concat(m)};return Ie.createElement(la,Fm({},gr(p,!0),f,v,{parentViewBox:p.parentViewBox,value:x,textBreakAll:u,viewBox:la.parseViewBox(pr(l)?p:L4(L4({},p),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}Lo.displayName="LabelList";function mY(e,t){return e?e===!0?Ie.createElement(Lo,{key:"labelList-implicit",data:t}):Ie.isValidElement(e)||lr(e)?Ie.createElement(Lo,{key:"labelList-implicit",data:t,content:e}):Od(e)?Ie.createElement(Lo,Fm({data:t},e,{key:"labelList-implicit"})):null:null}function gY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,i=Ci(a,Lo).map(function(l,d){return N.cloneElement(l,{data:t,key:"labelList-".concat(d)})});if(!r)return i;var s=mY(e.label,t);return[s].concat(iY(i))}Lo.renderCallByParent=gY;function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}function x2(){return x2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x2.apply(this,arguments)}function $4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function U4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(r),!0).forEach(function(a){xY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xY(e,t,r){return t=yY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yY(e){var t=vY(e,"string");return Rf(t)=="symbol"?t:t+""}function vY(e,t){if(Rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bY=function(t,r){var a=Hi(r-t),i=Math.min(Math.abs(r-t),359.999);return a*i},Bp=function(t){var r=t.cx,a=t.cy,i=t.radius,s=t.angle,l=t.sign,d=t.isExternal,u=t.cornerRadius,f=t.cornerIsExternal,p=u*(d?1:-1)+i,m=Math.asin(u/p)/Bm,x=f?s:s+l*m,v=ea(r,a,p,x),j=ea(r,a,i,x),b=f?s-l*m:s,y=ea(r,a,p*Math.cos(m*Bm),b);return{center:v,circleTangency:j,lineTangency:y,theta:m}},t8=function(t){var r=t.cx,a=t.cy,i=t.innerRadius,s=t.outerRadius,l=t.startAngle,d=t.endAngle,u=bY(l,d),f=l+u,p=ea(r,a,s,l),m=ea(r,a,s,f),x="M ".concat(p.x,",").concat(p.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>f),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var v=ea(r,a,i,l),j=ea(r,a,i,f);x+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=f),`,
            `).concat(v.x,",").concat(v.y," Z")}else x+="L ".concat(r,",").concat(a," Z");return x},jY=function(t){var r=t.cx,a=t.cy,i=t.innerRadius,s=t.outerRadius,l=t.cornerRadius,d=t.forceCornerRadius,u=t.cornerIsExternal,f=t.startAngle,p=t.endAngle,m=Hi(p-f),x=Bp({cx:r,cy:a,radius:s,angle:f,sign:m,cornerRadius:l,cornerIsExternal:u}),v=x.circleTangency,j=x.lineTangency,b=x.theta,y=Bp({cx:r,cy:a,radius:s,angle:p,sign:-m,cornerRadius:l,cornerIsExternal:u}),C=y.circleTangency,E=y.lineTangency,O=y.theta,S=u?Math.abs(f-p):Math.abs(f-p)-b-O;if(S<0)return d?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):t8({cx:r,cy:a,innerRadius:i,outerRadius:s,startAngle:f,endAngle:p});var T="M ".concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(S>180),",").concat(+(m<0),",").concat(C.x,",").concat(C.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
  `);if(i>0){var k=Bp({cx:r,cy:a,radius:i,angle:f,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),D=k.circleTangency,F=k.lineTangency,B=k.theta,M=Bp({cx:r,cy:a,radius:i,angle:p,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),L=M.circleTangency,A=M.lineTangency,U=M.theta,P=u?Math.abs(f-p):Math.abs(f-p)-B-U;if(P<0&&l===0)return"".concat(T,"L").concat(r,",").concat(a,"Z");T+="L".concat(A.x,",").concat(A.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(m>0),",").concat(D.x,",").concat(D.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,"Z")}else T+="L".concat(r,",").concat(a,"Z");return T},wY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},r8=function(t){var r=U4(U4({},wY),t),a=r.cx,i=r.cy,s=r.innerRadius,l=r.outerRadius,d=r.cornerRadius,u=r.forceCornerRadius,f=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,x=r.className;if(l<s||p===m)return null;var v=jr("recharts-sector",x),j=l-s,b=kl(d,j,0,!0),y;return b>0&&Math.abs(p-m)<360?y=jY({cx:a,cy:i,innerRadius:s,outerRadius:l,cornerRadius:Math.min(b,j/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:p,endAngle:m}):y=t8({cx:a,cy:i,innerRadius:s,outerRadius:l,startAngle:p,endAngle:m}),Ie.createElement("path",x2({},gr(r,!0),{className:v,d:y,role:"img"}))};function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function y2(){return y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},y2.apply(this,arguments)}function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function W4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(r),!0).forEach(function(a){SY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function SY(e,t,r){return t=NY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NY(e){var t=TY(e,"string");return Pf(t)=="symbol"?t:t+""}function TY(e,t){if(Pf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Pf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H4={curveBasisClosed:H$,curveBasisOpen:G$,curveBasis:W$,curveBumpX:_$,curveBumpY:k$,curveLinearClosed:K$,curveLinear:kg,curveMonotoneX:V$,curveMonotoneY:Y$,curveNatural:X$,curveStep:Q$,curveStepAfter:Z$,curveStepBefore:J$},Fp=function(t){return t.x===+t.x&&t.y===+t.y},$u=function(t){return t.x},Uu=function(t){return t.y},CY=function(t,r){if(lr(t))return t;var a="curve".concat(Og(t));return(a==="curveMonotone"||a==="curveBump")&&r?H4["".concat(a).concat(r==="vertical"?"Y":"X")]:H4[a]||kg},AY=function(t){var r=t.type,a=r===void 0?"linear":r,i=t.points,s=i===void 0?[]:i,l=t.baseLine,d=t.layout,u=t.connectNulls,f=u===void 0?!1:u,p=CY(a,d),m=f?s.filter(function(b){return Fp(b)}):s,x;if(Array.isArray(l)){var v=f?l.filter(function(b){return Fp(b)}):l,j=m.map(function(b,y){return W4(W4({},b),{},{base:v[y]})});return d==="vertical"?x=Op().y(Uu).x1($u).x0(function(b){return b.base.x}):x=Op().x($u).y1(Uu).y0(function(b){return b.base.y}),x.defined(Fp).curve(p),x(j)}return d==="vertical"&&St(l)?x=Op().y(Uu).x1($u).x0(l):St(l)?x=Op().x($u).y1(Uu).y0(l):x=sD().x($u).y(Uu),x.defined(Fp).curve(p),x(m)},v2=function(t){var r=t.className,a=t.points,i=t.path,s=t.pathRef;if((!a||!a.length)&&!i)return null;var l=a&&a.length?AY(t):i;return Ie.createElement("path",y2({},gr(t,!1),dm(t),{className:jr("recharts-curve",r),d:l,ref:s}))},q1={exports:{}},W1,G4;function EY(){if(G4)return W1;G4=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return W1=e,W1}var H1,K4;function OY(){if(K4)return H1;K4=1;var e=EY();function t(){}function r(){}return r.resetWarningCache=t,H1=function(){function a(l,d,u,f,p,m){if(m!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return s.PropTypes=s,s},H1}var V4;function _Y(){return V4||(V4=1,q1.exports=OY()()),q1.exports}var kY=_Y();const _r=Gr(kY);var IY=Object.getOwnPropertyNames,DY=Object.getOwnPropertySymbols,RY=Object.prototype.hasOwnProperty;function Y4(e,t){return function(a,i,s){return e(a,i,s)&&t(a,i,s)}}function Lp(e){return function(r,a,i){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,i);var s=i.cache,l=s.get(r),d=s.get(a);if(l&&d)return l===a&&d===r;s.set(r,a),s.set(a,r);var u=e(r,a,i);return s.delete(r),s.delete(a),u}}function X4(e){return IY(e).concat(DY(e))}var PY=Object.hasOwn||function(e,t){return RY.call(e,t)};function Wl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var MY="__v",BY="__o",FY="_owner",Q4=Object.getOwnPropertyDescriptor,J4=Object.keys;function LY(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function zY(e,t){return Wl(e.getTime(),t.getTime())}function $Y(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function UY(e,t){return e===t}function Z4(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var i=new Array(a),s=e.entries(),l,d,u=0;(l=s.next())&&!l.done;){for(var f=t.entries(),p=!1,m=0;(d=f.next())&&!d.done;){if(i[m]){m++;continue}var x=l.value,v=d.value;if(r.equals(x[0],v[0],u,m,e,t,r)&&r.equals(x[1],v[1],x[0],v[0],e,t,r)){p=i[m]=!0;break}m++}if(!p)return!1;u++}return!0}var qY=Wl;function WY(e,t,r){var a=J4(e),i=a.length;if(J4(t).length!==i)return!1;for(;i-- >0;)if(!n8(e,t,r,a[i]))return!1;return!0}function qu(e,t,r){var a=X4(e),i=a.length;if(X4(t).length!==i)return!1;for(var s,l,d;i-- >0;)if(s=a[i],!n8(e,t,r,s)||(l=Q4(e,s),d=Q4(t,s),(l||d)&&(!l||!d||l.configurable!==d.configurable||l.enumerable!==d.enumerable||l.writable!==d.writable)))return!1;return!0}function HY(e,t){return Wl(e.valueOf(),t.valueOf())}function GY(e,t){return e.source===t.source&&e.flags===t.flags}function ek(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var i=new Array(a),s=e.values(),l,d;(l=s.next())&&!l.done;){for(var u=t.values(),f=!1,p=0;(d=u.next())&&!d.done;){if(!i[p]&&r.equals(l.value,d.value,l.value,d.value,e,t,r)){f=i[p]=!0;break}p++}if(!f)return!1}return!0}function KY(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function VY(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function n8(e,t,r,a){return(a===FY||a===BY||a===MY)&&(e.$$typeof||t.$$typeof)?!0:PY(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}var YY="[object Arguments]",XY="[object Boolean]",QY="[object Date]",JY="[object Error]",ZY="[object Map]",eX="[object Number]",tX="[object Object]",rX="[object RegExp]",nX="[object Set]",aX="[object String]",iX="[object URL]",sX=Array.isArray,tk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rk=Object.assign,oX=Object.prototype.toString.call.bind(Object.prototype.toString);function lX(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areErrorsEqual,i=e.areFunctionsEqual,s=e.areMapsEqual,l=e.areNumbersEqual,d=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,f=e.areRegExpsEqual,p=e.areSetsEqual,m=e.areTypedArraysEqual,x=e.areUrlsEqual;return function(j,b,y){if(j===b)return!0;if(j==null||b==null)return!1;var C=typeof j;if(C!==typeof b)return!1;if(C!=="object")return C==="number"?l(j,b,y):C==="function"?i(j,b,y):!1;var E=j.constructor;if(E!==b.constructor)return!1;if(E===Object)return d(j,b,y);if(sX(j))return t(j,b,y);if(tk!=null&&tk(j))return m(j,b,y);if(E===Date)return r(j,b,y);if(E===RegExp)return f(j,b,y);if(E===Map)return s(j,b,y);if(E===Set)return p(j,b,y);var O=oX(j);return O===QY?r(j,b,y):O===rX?f(j,b,y):O===ZY?s(j,b,y):O===nX?p(j,b,y):O===tX?typeof j.then!="function"&&typeof b.then!="function"&&d(j,b,y):O===iX?x(j,b,y):O===JY?a(j,b,y):O===YY?d(j,b,y):O===XY||O===eX||O===aX?u(j,b,y):!1}}function cX(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,i={areArraysEqual:a?qu:LY,areDatesEqual:zY,areErrorsEqual:$Y,areFunctionsEqual:UY,areMapsEqual:a?Y4(Z4,qu):Z4,areNumbersEqual:qY,areObjectsEqual:a?qu:WY,arePrimitiveWrappersEqual:HY,areRegExpsEqual:GY,areSetsEqual:a?Y4(ek,qu):ek,areTypedArraysEqual:a?qu:KY,areUrlsEqual:VY};if(r&&(i=rk({},i,r(i))),t){var s=Lp(i.areArraysEqual),l=Lp(i.areMapsEqual),d=Lp(i.areObjectsEqual),u=Lp(i.areSetsEqual);i=rk({},i,{areArraysEqual:s,areMapsEqual:l,areObjectsEqual:d,areSetsEqual:u})}return i}function dX(e){return function(t,r,a,i,s,l,d){return e(t,r,d)}}function uX(e){var t=e.circular,r=e.comparator,a=e.createState,i=e.equals,s=e.strict;if(a)return function(u,f){var p=a(),m=p.cache,x=m===void 0?t?new WeakMap:void 0:m,v=p.meta;return r(u,f,{cache:x,equals:i,meta:v,strict:s})};if(t)return function(u,f){return r(u,f,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var l={cache:void 0,equals:i,meta:void 0,strict:s};return function(u,f){return r(u,f,l)}}var fX=Yo();Yo({strict:!0});Yo({circular:!0});Yo({circular:!0,strict:!0});Yo({createInternalComparator:function(){return Wl}});Yo({strict:!0,createInternalComparator:function(){return Wl}});Yo({circular:!0,createInternalComparator:function(){return Wl}});Yo({circular:!0,createInternalComparator:function(){return Wl},strict:!0});function Yo(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,i=e.createState,s=e.strict,l=s===void 0?!1:s,d=cX(e),u=lX(d),f=a?a(u):dX(u);return uX({circular:r,comparator:u,createState:i,equals:f,strict:l})}function hX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function nk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function i(s){r<0&&(r=s),s-r>t?(e(s),r=-1):hX(i)};requestAnimationFrame(a)}function b2(e){"@babel/helpers - typeof";return b2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b2(e)}function pX(e){return yX(e)||xX(e)||gX(e)||mX()}function mX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gX(e,t){if(e){if(typeof e=="string")return ak(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ak(e,t)}}function ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function xX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yX(e){if(Array.isArray(e))return e}function vX(){var e={},t=function(){return null},r=!1,a=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var l=s,d=pX(l),u=d[0],f=d.slice(1);if(typeof u=="number"){nk(i.bind(null,f),u);return}i(u),nk(i.bind(null,f));return}b2(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,a(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function sk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(r),!0).forEach(function(a){a8(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function a8(e,t,r){return t=bX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=jX(e,"string");return Mf(t)==="symbol"?t:String(t)}function jX(e,t){if(Mf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Mf(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wX=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,i){return a.filter(function(s){return i.includes(s)})})},SX=function(t){return t},NX=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},rf=function(t,r){return Object.keys(r).reduce(function(a,i){return sk(sk({},a),{},a8({},i,t(i,r[i])))},{})},ok=function(t,r,a){return t.map(function(i){return"".concat(NX(i)," ").concat(r,"ms ").concat(a)}).join(",")};function TX(e,t){return EX(e)||AX(e,t)||i8(e,t)||CX()}function CX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function EX(e){if(Array.isArray(e))return e}function OX(e){return IX(e)||kX(e)||i8(e)||_X()}function _X(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i8(e,t){if(e){if(typeof e=="string")return j2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j2(e,t)}}function kX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IX(e){if(Array.isArray(e))return j2(e)}function j2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Lm=1e-4,s8=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},o8=function(t,r){return t.map(function(a,i){return a*Math.pow(r,i)}).reduce(function(a,i){return a+i})},lk=function(t,r){return function(a){var i=s8(t,r);return o8(i,a)}},DX=function(t,r){return function(a){var i=s8(t,r),s=[].concat(OX(i.map(function(l,d){return l*d}).slice(1)),[0]);return o8(s,a)}},ck=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var i=r[0],s=r[1],l=r[2],d=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,l=1,d=1;break;case"ease":i=.25,s=.1,l=.25,d=1;break;case"ease-in":i=.42,s=0,l=1,d=1;break;case"ease-out":i=.42,s=0,l=.58,d=1;break;case"ease-in-out":i=0,s=0,l=.58,d=1;break;default:{var u=r[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var f=u[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),p=TX(f,4);i=p[0],s=p[1],l=p[2],d=p[3]}}}var m=lk(i,l),x=lk(s,d),v=DX(i,l),j=function(C){return C>1?1:C<0?0:C},b=function(C){for(var E=C>1?1:C,O=E,S=0;S<8;++S){var T=m(O)-E,k=v(O);if(Math.abs(T-E)<Lm||k<Lm)return x(O);O=j(O-T/k)}return x(O)};return b.isStepper=!1,b},RX=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,i=t.damping,s=i===void 0?8:i,l=t.dt,d=l===void 0?17:l,u=function(p,m,x){var v=-(p-m)*a,j=x*s,b=x+(v-j)*d/1e3,y=x*d/1e3+p;return Math.abs(y-m)<Lm&&Math.abs(b)<Lm?[m,0]:[y,b]};return u.isStepper=!0,u.dt=d,u},PX=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ck(i);case"spring":return RX();default:if(i.split("(")[0]==="cubic-bezier")return ck(i)}return typeof i=="function"?i:null};function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function dk(e){return FX(e)||BX(e)||l8(e)||MX()}function MX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FX(e){if(Array.isArray(e))return S2(e)}function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(a){w2(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function w2(e,t,r){return t=LX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LX(e){var t=zX(e,"string");return Bf(t)==="symbol"?t:String(t)}function zX(e,t){if(Bf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bf(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $X(e,t){return WX(e)||qX(e,t)||l8(e,t)||UX()}function UX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l8(e,t){if(e){if(typeof e=="string")return S2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S2(e,t)}}function S2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function qX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function WX(e){if(Array.isArray(e))return e}var zm=function(t,r,a){return t+(r-t)*a},N2=function(t){var r=t.from,a=t.to;return r!==a},HX=function e(t,r,a){var i=rf(function(s,l){if(N2(l)){var d=t(l.from,l.to,l.velocity),u=$X(d,2),f=u[0],p=u[1];return Xn(Xn({},l),{},{from:f,velocity:p})}return l},r);return a<1?rf(function(s,l){return N2(l)?Xn(Xn({},l),{},{velocity:zm(l.velocity,i[s].velocity,a),from:zm(l.from,i[s].from,a)}):l},r):e(t,i,a-1)};const GX=function(e,t,r,a,i){var s=wX(e,t),l=s.reduce(function(y,C){return Xn(Xn({},y),{},w2({},C,[e[C],t[C]]))},{}),d=s.reduce(function(y,C){return Xn(Xn({},y),{},w2({},C,{from:e[C],velocity:0,to:t[C]}))},{}),u=-1,f,p,m=function(){return null},x=function(){return rf(function(C,E){return E.from},d)},v=function(){return!Object.values(d).filter(N2).length},j=function(C){f||(f=C);var E=C-f,O=E/r.dt;d=HX(r,d,O),i(Xn(Xn(Xn({},e),t),x())),f=C,v()||(u=requestAnimationFrame(m))},b=function(C){p||(p=C);var E=(C-p)/a,O=rf(function(T,k){return zm.apply(void 0,dk(k).concat([r(E)]))},l);if(i(Xn(Xn(Xn({},e),t),O)),E<1)u=requestAnimationFrame(m);else{var S=rf(function(T,k){return zm.apply(void 0,dk(k).concat([r(1)]))},l);i(Xn(Xn(Xn({},e),t),S))}};return m=r.isStepper?j:b,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(u)}}};function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}var KX=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function VX(e,t){if(e==null)return{};var r=YX(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function YX(e,t){if(e==null)return{};var r={},a=Object.keys(e),i,s;for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function G1(e){return ZX(e)||JX(e)||QX(e)||XX()}function XX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QX(e,t){if(e){if(typeof e=="string")return T2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T2(e,t)}}function JX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZX(e){if(Array.isArray(e))return T2(e)}function T2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(r),!0).forEach(function(a){Qu(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qu(e,t,r){return t=c8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tQ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c8(a.key),a)}}function rQ(e,t,r){return t&&tQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c8(e){var t=nQ(e,"string");return ld(t)==="symbol"?t:String(t)}function nQ(e,t){if(ld(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ld(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C2(e,t)}function C2(e,t){return C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},C2(e,t)}function iQ(e){var t=sQ();return function(){var a=$m(e),i;if(t){var s=$m(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return A2(this,i)}}function A2(e,t){if(t&&(ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E2(e)}function E2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $m(e){return $m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$m(e)}var ro=function(e){aQ(r,e);var t=iQ(r);function r(a,i){var s;eQ(this,r),s=t.call(this,a,i);var l=s.props,d=l.isActive,u=l.attributeName,f=l.from,p=l.to,m=l.steps,x=l.children,v=l.duration;if(s.handleStyleChange=s.handleStyleChange.bind(E2(s)),s.changeStyle=s.changeStyle.bind(E2(s)),!d||v<=0)return s.state={style:{}},typeof x=="function"&&(s.state={style:p}),A2(s);if(m&&m.length)s.state={style:m[0].style};else if(f){if(typeof x=="function")return s.state={style:f},A2(s);s.state={style:u?Qu({},u,f):f}}else s.state={style:{}};return s}return rQ(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,l=i.canBegin;this.mounted=!0,!(!s||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,l=s.isActive,d=s.canBegin,u=s.attributeName,f=s.shouldReAnimate,p=s.to,m=s.from,x=this.state.style;if(d){if(!l){var v={style:u?Qu({},u,p):p};this.state&&x&&(u&&x[u]!==p||!u&&x!==p)&&this.setState(v);return}if(!(fX(i.to,p)&&i.canBegin&&i.isActive)){var j=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=j||f?m:i.to;if(this.state&&x){var y={style:u?Qu({},u,b):b};(u&&x[u]!==b||!u&&x!==b)&&this.setState(y)}this.runAnimation(Pi(Pi({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,l=i.from,d=i.to,u=i.duration,f=i.easing,p=i.begin,m=i.onAnimationEnd,x=i.onAnimationStart,v=GX(l,d,PX(f),u,this.changeStyle),j=function(){s.stopJSAnimation=v()};this.manager.start([x,p,j,u,m])}},{key:"runStepAnimation",value:function(i){var s=this,l=i.steps,d=i.begin,u=i.onAnimationStart,f=l[0],p=f.style,m=f.duration,x=m===void 0?0:m,v=function(b,y,C){if(C===0)return b;var E=y.duration,O=y.easing,S=O===void 0?"ease":O,T=y.style,k=y.properties,D=y.onAnimationEnd,F=C>0?l[C-1]:y,B=k||Object.keys(T);if(typeof S=="function"||S==="spring")return[].concat(G1(b),[s.runJSAnimation.bind(s,{from:F.style,to:T,duration:E,easing:S}),E]);var M=ok(B,E,S),L=Pi(Pi(Pi({},F.style),T),{},{transition:M});return[].concat(G1(b),[L,E,D]).filter(SX)};return this.manager.start([u].concat(G1(l.reduce(v,[p,Math.max(x,d)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=vX());var s=i.begin,l=i.duration,d=i.attributeName,u=i.to,f=i.easing,p=i.onAnimationStart,m=i.onAnimationEnd,x=i.steps,v=i.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof f=="function"||typeof v=="function"||f==="spring"){this.runJSAnimation(i);return}if(x.length>1){this.runStepAnimation(i);return}var b=d?Qu({},d,u):u,y=ok(Object.keys(b),l,f);j.start([p,s,Pi(Pi({},b),{},{transition:y}),l,m])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var l=i.duration;i.attributeName,i.easing;var d=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var u=VX(i,KX),f=N.Children.count(s),p=this.state.style;if(typeof s=="function")return s(p);if(!d||f===0||l<=0)return s;var m=function(v){var j=v.props,b=j.style,y=b===void 0?{}:b,C=j.className,E=N.cloneElement(v,Pi(Pi({},u),{},{style:Pi(Pi({},y),p),className:C}));return E};return f===1?m(N.Children.only(s)):Ie.createElement("div",null,N.Children.map(s,function(x){return m(x)}))}}]),r}(N.PureComponent);ro.displayName="Animate";ro.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ro.propTypes={from:_r.oneOfType([_r.object,_r.string]),to:_r.oneOfType([_r.object,_r.string]),attributeName:_r.string,duration:_r.number,begin:_r.number,easing:_r.oneOfType([_r.string,_r.func]),steps:_r.arrayOf(_r.shape({duration:_r.number.isRequired,style:_r.object.isRequired,easing:_r.oneOfType([_r.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),_r.func]),properties:_r.arrayOf("string"),onAnimationEnd:_r.func})),children:_r.oneOfType([_r.node,_r.func]),isActive:_r.bool,canBegin:_r.bool,onAnimationEnd:_r.func,shouldReAnimate:_r.bool,onAnimationStart:_r.func,onAnimationReStart:_r.func};function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Um.apply(this,arguments)}function oQ(e,t){return uQ(e)||dQ(e,t)||cQ(e,t)||lQ()}function lQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cQ(e,t){if(e){if(typeof e=="string")return hk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hk(e,t)}}function hk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function dQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function uQ(e){if(Array.isArray(e))return e}function pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function mk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(r),!0).forEach(function(a){fQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fQ(e,t,r){return t=hQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e){var t=pQ(e,"string");return Ff(t)=="symbol"?t:t+""}function pQ(e,t){if(Ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ff(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gk=function(t,r,a,i,s){var l=Math.min(Math.abs(a)/2,Math.abs(i)/2),d=i>=0?1:-1,u=a>=0?1:-1,f=i>=0&&a>=0||i<0&&a<0?1:0,p;if(l>0&&s instanceof Array){for(var m=[0,0,0,0],x=0,v=4;x<v;x++)m[x]=s[x]>l?l:s[x];p="M".concat(t,",").concat(r+d*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(f,",").concat(t+u*m[0],",").concat(r)),p+="L ".concat(t+a-u*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(f,`,
        `).concat(t+a,",").concat(r+d*m[1])),p+="L ".concat(t+a,",").concat(r+i-d*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(f,`,
        `).concat(t+a-u*m[2],",").concat(r+i)),p+="L ".concat(t+u*m[3],",").concat(r+i),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(f,`,
        `).concat(t,",").concat(r+i-d*m[3])),p+="Z"}else if(l>0&&s===+s&&s>0){var j=Math.min(l,s);p="M ".concat(t,",").concat(r+d*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(f,",").concat(t+u*j,",").concat(r,`
            L `).concat(t+a-u*j,",").concat(r,`
            A `).concat(j,",").concat(j,",0,0,").concat(f,",").concat(t+a,",").concat(r+d*j,`
            L `).concat(t+a,",").concat(r+i-d*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(f,",").concat(t+a-u*j,",").concat(r+i,`
            L `).concat(t+u*j,",").concat(r+i,`
            A `).concat(j,",").concat(j,",0,0,").concat(f,",").concat(t,",").concat(r+i-d*j," Z")}else p="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return p},mQ=function(t,r){if(!t||!r)return!1;var a=t.x,i=t.y,s=r.x,l=r.y,d=r.width,u=r.height;if(Math.abs(d)>0&&Math.abs(u)>0){var f=Math.min(s,s+d),p=Math.max(s,s+d),m=Math.min(l,l+u),x=Math.max(l,l+u);return a>=f&&a<=p&&i>=m&&i<=x}return!1},gQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mS=function(t){var r=mk(mk({},gQ),t),a=N.useRef(),i=N.useState(-1),s=oQ(i,2),l=s[0],d=s[1];N.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var S=a.current.getTotalLength();S&&d(S)}catch{}},[]);var u=r.x,f=r.y,p=r.width,m=r.height,x=r.radius,v=r.className,j=r.animationEasing,b=r.animationDuration,y=r.animationBegin,C=r.isAnimationActive,E=r.isUpdateAnimationActive;if(u!==+u||f!==+f||p!==+p||m!==+m||p===0||m===0)return null;var O=jr("recharts-rectangle",v);return E?Ie.createElement(ro,{canBegin:l>0,from:{width:p,height:m,x:u,y:f},to:{width:p,height:m,x:u,y:f},duration:b,animationEasing:j,isActive:E},function(S){var T=S.width,k=S.height,D=S.x,F=S.y;return Ie.createElement(ro,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,isActive:C,easing:j},Ie.createElement("path",Um({},gr(r,!0),{className:O,d:gk(D,F,T,k,x),ref:a})))}):Ie.createElement("path",Um({},gr(r,!0),{className:O,d:gk(u,f,p,m,x)}))};function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},O2.apply(this,arguments)}var gS=function(t){var r=t.cx,a=t.cy,i=t.r,s=t.className,l=jr("recharts-dot",s);return r===+r&&a===+a&&i===+i?Ie.createElement("circle",O2({},gr(t,!1),dm(t),{className:l,cx:r,cy:a,r:i})):null};function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}var xQ=["x","y","top","left","width","height","className"];function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_2.apply(this,arguments)}function xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function yQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(r),!0).forEach(function(a){vQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vQ(e,t,r){return t=bQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bQ(e){var t=jQ(e,"string");return Lf(t)=="symbol"?t:t+""}function jQ(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Lf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wQ(e,t){if(e==null)return{};var r=SQ(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function SQ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var NQ=function(t,r,a,i,s,l){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(l,",").concat(r,"h").concat(a)},TQ=function(t){var r=t.x,a=r===void 0?0:r,i=t.y,s=i===void 0?0:i,l=t.top,d=l===void 0?0:l,u=t.left,f=u===void 0?0:u,p=t.width,m=p===void 0?0:p,x=t.height,v=x===void 0?0:x,j=t.className,b=wQ(t,xQ),y=yQ({x:a,y:s,top:d,left:f,width:m,height:v},b);return!St(a)||!St(s)||!St(m)||!St(v)||!St(d)||!St(f)?null:Ie.createElement("path",_2({},gr(y,!0),{className:jr("recharts-cross",j),d:NQ(a,s,m,v,d,f)}))},K1,yk;function CQ(){if(yk)return K1;yk=1;var e=OD(),t=e(Object.getPrototypeOf,Object);return K1=t,K1}var V1,vk;function AQ(){if(vk)return V1;vk=1;var e=io(),t=CQ(),r=so(),a="[object Object]",i=Function.prototype,s=Object.prototype,l=i.toString,d=s.hasOwnProperty,u=l.call(Object);function f(p){if(!r(p)||e(p)!=a)return!1;var m=t(p);if(m===null)return!0;var x=d.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==u}return V1=f,V1}var EQ=AQ();const OQ=Gr(EQ);var Y1,bk;function _Q(){if(bk)return Y1;bk=1;var e=io(),t=so(),r="[object Boolean]";function a(i){return i===!0||i===!1||t(i)&&e(i)==r}return Y1=a,Y1}var kQ=_Q();const IQ=Gr(kQ);function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qm.apply(this,arguments)}function DQ(e,t){return BQ(e)||MQ(e,t)||PQ(e,t)||RQ()}function RQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PQ(e,t){if(e){if(typeof e=="string")return jk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jk(e,t)}}function jk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function MQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function BQ(e){if(Array.isArray(e))return e}function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Sk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(a){FQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function FQ(e,t,r){return t=LQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LQ(e){var t=zQ(e,"string");return zf(t)=="symbol"?t:t+""}function zQ(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nk=function(t,r,a,i,s){var l=a-i,d;return d="M ".concat(t,",").concat(r),d+="L ".concat(t+a,",").concat(r),d+="L ".concat(t+a-l/2,",").concat(r+s),d+="L ".concat(t+a-l/2-i,",").concat(r+s),d+="L ".concat(t,",").concat(r," Z"),d},$Q={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UQ=function(t){var r=Sk(Sk({},$Q),t),a=N.useRef(),i=N.useState(-1),s=DQ(i,2),l=s[0],d=s[1];N.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var O=a.current.getTotalLength();O&&d(O)}catch{}},[]);var u=r.x,f=r.y,p=r.upperWidth,m=r.lowerWidth,x=r.height,v=r.className,j=r.animationEasing,b=r.animationDuration,y=r.animationBegin,C=r.isUpdateAnimationActive;if(u!==+u||f!==+f||p!==+p||m!==+m||x!==+x||p===0&&m===0||x===0)return null;var E=jr("recharts-trapezoid",v);return C?Ie.createElement(ro,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:x,x:u,y:f},to:{upperWidth:p,lowerWidth:m,height:x,x:u,y:f},duration:b,animationEasing:j,isActive:C},function(O){var S=O.upperWidth,T=O.lowerWidth,k=O.height,D=O.x,F=O.y;return Ie.createElement(ro,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,easing:j},Ie.createElement("path",qm({},gr(r,!0),{className:E,d:Nk(D,F,S,T,k),ref:a})))}):Ie.createElement("g",null,Ie.createElement("path",qm({},gr(r,!0),{className:E,d:Nk(u,f,p,m,x)})))},qQ=["option","shapeType","propTransformer","activeClassName","isActive"];function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function WQ(e,t){if(e==null)return{};var r=HQ(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function HQ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Wm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(a){GQ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function GQ(e,t,r){return t=KQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KQ(e){var t=VQ(e,"string");return $f(t)=="symbol"?t:t+""}function VQ(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($f(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YQ(e,t){return Wm(Wm({},t),e)}function XQ(e,t){return e==="symbols"}function Ck(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Ie.createElement(mS,r);case"trapezoid":return Ie.createElement(UQ,r);case"sector":return Ie.createElement(r8,r);case"symbols":if(XQ(t))return Ie.createElement(Rw,r);break;default:return null}}function QQ(e){return N.isValidElement(e)?e.props:e}function JQ(e){var t=e.option,r=e.shapeType,a=e.propTransformer,i=a===void 0?YQ:a,s=e.activeClassName,l=s===void 0?"recharts-active-shape":s,d=e.isActive,u=WQ(e,qQ),f;if(N.isValidElement(t))f=N.cloneElement(t,Wm(Wm({},u),QQ(t)));else if(lr(t))f=t(u);else if(OQ(t)&&!IQ(t)){var p=i(t,u);f=Ie.createElement(Ck,{shapeType:r,elementProps:p})}else{var m=u;f=Ie.createElement(Ck,{shapeType:r,elementProps:m})}return d?Ie.createElement(yn,{className:l},f):f}function Kg(e,t){return t!=null&&"trapezoids"in e.props}function Vg(e,t){return t!=null&&"sectors"in e.props}function Uf(e,t){return t!=null&&"points"in e.props}function ZQ(e,t){var r,a,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return i&&s}function eJ(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function tJ(e,t){var r=e.x===t.x,a=e.y===t.y,i=e.z===t.z;return r&&a&&i}function rJ(e,t){var r;return Kg(e,t)?r=ZQ:Vg(e,t)?r=eJ:Uf(e,t)&&(r=tJ),r}function nJ(e,t){var r;return Kg(e,t)?r="trapezoids":Vg(e,t)?r="sectors":Uf(e,t)&&(r="points"),r}function aJ(e,t){if(Kg(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Vg(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Uf(e,t)?t.payload:{}}function iJ(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,i=nJ(r,t),s=aJ(r,t),l=a.filter(function(u,f){var p=Wg(s,u),m=r.props[i].filter(function(j){var b=rJ(r,t);return b(j,t)}),x=r.props[i].indexOf(m[m.length-1]),v=f===x;return p&&v}),d=a.indexOf(l[l.length-1]);return d}var X1,Ak;function sJ(){if(Ak)return X1;Ak=1;var e=Math.ceil,t=Math.max;function r(a,i,s,l){for(var d=-1,u=t(e((i-a)/(s||1)),0),f=Array(u);u--;)f[l?u:++d]=a,a+=s;return f}return X1=r,X1}var Q1,Ek;function d8(){if(Ek)return Q1;Ek=1;var e=HD(),t=1/0,r=17976931348623157e292;function a(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*r}return i===i?i:0}return Q1=a,Q1}var J1,Ok;function oJ(){if(Ok)return J1;Ok=1;var e=sJ(),t=Pg(),r=d8();function a(i){return function(s,l,d){return d&&typeof d!="number"&&t(s,l,d)&&(l=d=void 0),s=r(s),l===void 0?(l=s,s=0):l=r(l),d=d===void 0?s<l?1:-1:r(d),e(s,l,d,i)}}return J1=a,J1}var Z1,_k;function lJ(){if(_k)return Z1;_k=1;var e=oJ(),t=e();return Z1=t,Z1}var cJ=lJ();const Hm=Gr(cJ);function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(a){u8(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function u8(e,t,r){return t=dJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dJ(e){var t=uJ(e,"string");return qf(t)=="symbol"?t:t+""}function uJ(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fJ=["Webkit","Moz","O","ms"],hJ=function(t,r){var a=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=fJ.reduce(function(s,l){return Ik(Ik({},s),{},u8({},l+a,r))},{});return i[t]=r,i};function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Gm.apply(this,arguments)}function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(a){ei(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,h8(a.key),a)}}function mJ(e,t,r){return t&&Rk(e.prototype,t),r&&Rk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gJ(e,t,r){return t=Km(t),xJ(e,f8()?Reflect.construct(t,r||[],Km(e).constructor):t.apply(e,r))}function xJ(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yJ(e)}function yJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f8=function(){return!!e})()}function Km(e){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Km(e)}function vJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k2(e,t)}function k2(e,t){return k2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},k2(e,t)}function ei(e,t,r){return t=h8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h8(e){var t=bJ(e,"string");return cd(t)=="symbol"?t:t+""}function bJ(e,t){if(cd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(cd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jJ=function(t){var r=t.data,a=t.startIndex,i=t.endIndex,s=t.x,l=t.width,d=t.travellerWidth;if(!r||!r.length)return{};var u=r.length,f=ef().domain(Hm(0,u)).range([s,s+l-d]),p=f.domain().map(function(m){return f(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:f(a),endX:f(i),scale:f,scaleValues:p}},Pk=function(t){return t.changedTouches&&!!t.changedTouches.length},dd=function(e){function t(r){var a;return pJ(this,t),a=gJ(this,t,[r]),ei(a,"handleDrag",function(i){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(i):a.state.isSlideMoving&&a.handleSlideDrag(i)}),ei(a,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&a.handleDrag(i.changedTouches[0])}),ei(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=a.props,s=i.endIndex,l=i.onDragEnd,d=i.startIndex;l==null||l({endIndex:s,startIndex:d})}),a.detachDragEndListener()}),ei(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),ei(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),ei(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),ei(a,"handleSlideDragStart",function(i){var s=Pk(i)?i.changedTouches[0]:i;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return vJ(t,e),mJ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var i=a.startX,s=a.endX,l=this.state.scaleValues,d=this.props,u=d.gap,f=d.data,p=f.length-1,m=Math.min(i,s),x=Math.max(i,s),v=t.getIndexInRange(l,m),j=t.getIndexInRange(l,x);return{startIndex:v-v%u,endIndex:j===p?p:j-j%u}}},{key:"getTextOfTick",value:function(a){var i=this.props,s=i.data,l=i.tickFormatter,d=i.dataKey,u=oi(s[a],d,a);return lr(l)?l(u,a):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var i=this.state,s=i.slideMoveStartX,l=i.startX,d=i.endX,u=this.props,f=u.x,p=u.width,m=u.travellerWidth,x=u.startIndex,v=u.endIndex,j=u.onChange,b=a.pageX-s;b>0?b=Math.min(b,f+p-m-d,f+p-m-l):b<0&&(b=Math.max(b,f-l,f-d));var y=this.getIndex({startX:l+b,endX:d+b});(y.startIndex!==x||y.endIndex!==v)&&j&&j(y),this.setState({startX:l+b,endX:d+b,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,i){var s=Pk(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var i=this.state,s=i.brushMoveStartX,l=i.movingTravellerId,d=i.endX,u=i.startX,f=this.state[l],p=this.props,m=p.x,x=p.width,v=p.travellerWidth,j=p.onChange,b=p.gap,y=p.data,C={startX:this.state.startX,endX:this.state.endX},E=a.pageX-s;E>0?E=Math.min(E,m+x-v-f):E<0&&(E=Math.max(E,m-f)),C[l]=f+E;var O=this.getIndex(C),S=O.startIndex,T=O.endIndex,k=function(){var F=y.length-1;return l==="startX"&&(d>u?S%b===0:T%b===0)||d<u&&T===F||l==="endX"&&(d>u?T%b===0:S%b===0)||d>u&&T===F};this.setState(ei(ei({},l,f+E),"brushMoveStartX",a.pageX),function(){j&&k()&&j(O)})}},{key:"handleTravellerMoveKeyboard",value:function(a,i){var s=this,l=this.state,d=l.scaleValues,u=l.startX,f=l.endX,p=this.state[i],m=d.indexOf(p);if(m!==-1){var x=m+a;if(!(x===-1||x>=d.length)){var v=d[x];i==="startX"&&v>=f||i==="endX"&&v<=u||this.setState(ei({},i,v),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,i=a.x,s=a.y,l=a.width,d=a.height,u=a.fill,f=a.stroke;return Ie.createElement("rect",{stroke:f,fill:u,x:i,y:s,width:l,height:d})}},{key:"renderPanorama",value:function(){var a=this.props,i=a.x,s=a.y,l=a.width,d=a.height,u=a.data,f=a.children,p=a.padding,m=N.Children.only(f);return m?Ie.cloneElement(m,{x:i,y:s,width:l,height:d,margin:p,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(a,i){var s,l,d=this,u=this.props,f=u.y,p=u.travellerWidth,m=u.height,x=u.traveller,v=u.ariaLabel,j=u.data,b=u.startIndex,y=u.endIndex,C=Math.max(a,this.props.x),E=ej(ej({},gr(this.props,!1)),{},{x:C,y:f,width:p,height:m}),O=v||"Min value: ".concat((s=j[b])===null||s===void 0?void 0:s.name,", Max value: ").concat((l=j[y])===null||l===void 0?void 0:l.name);return Ie.createElement(yn,{tabIndex:0,role:"slider","aria-label":O,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(T){["ArrowLeft","ArrowRight"].includes(T.key)&&(T.preventDefault(),T.stopPropagation(),d.handleTravellerMoveKeyboard(T.key==="ArrowRight"?1:-1,i))},onFocus:function(){d.setState({isTravellerFocused:!0})},onBlur:function(){d.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(x,E))}},{key:"renderSlide",value:function(a,i){var s=this.props,l=s.y,d=s.height,u=s.stroke,f=s.travellerWidth,p=Math.min(a,i)+f,m=Math.max(Math.abs(i-a)-f,0);return Ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:p,y:l,width:m,height:d})}},{key:"renderText",value:function(){var a=this.props,i=a.startIndex,s=a.endIndex,l=a.y,d=a.height,u=a.travellerWidth,f=a.stroke,p=this.state,m=p.startX,x=p.endX,v=5,j={pointerEvents:"none",fill:f};return Ie.createElement(yn,{className:"recharts-brush-texts"},Ie.createElement(wm,Gm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-v,y:l+d/2},j),this.getTextOfTick(i)),Ie.createElement(wm,Gm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+u+v,y:l+d/2},j),this.getTextOfTick(s)))}},{key:"render",value:function(){var a=this.props,i=a.data,s=a.className,l=a.children,d=a.x,u=a.y,f=a.width,p=a.height,m=a.alwaysShowText,x=this.state,v=x.startX,j=x.endX,b=x.isTextActive,y=x.isSlideMoving,C=x.isTravellerMoving,E=x.isTravellerFocused;if(!i||!i.length||!St(d)||!St(u)||!St(f)||!St(p)||f<=0||p<=0)return null;var O=jr("recharts-brush",s),S=Ie.Children.count(l)===1,T=hJ("userSelect","none");return Ie.createElement(yn,{className:O,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:T},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(v,j),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(j,"endX"),(b||y||C||E||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var i=a.x,s=a.y,l=a.width,d=a.height,u=a.stroke,f=Math.floor(s+d/2)-1;return Ie.createElement(Ie.Fragment,null,Ie.createElement("rect",{x:i,y:s,width:l,height:d,fill:u,stroke:"none"}),Ie.createElement("line",{x1:i+1,y1:f,x2:i+l-1,y2:f,fill:"none",stroke:"#fff"}),Ie.createElement("line",{x1:i+1,y1:f+2,x2:i+l-1,y2:f+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,i){var s;return Ie.isValidElement(a)?s=Ie.cloneElement(a,i):lr(a)?s=a(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(a,i){var s=a.data,l=a.width,d=a.x,u=a.travellerWidth,f=a.updateId,p=a.startIndex,m=a.endIndex;if(s!==i.prevData||f!==i.prevUpdateId)return ej({prevData:s,prevTravellerWidth:u,prevUpdateId:f,prevX:d,prevWidth:l},s&&s.length?jJ({data:s,width:l,x:d,travellerWidth:u,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(i.scale&&(l!==i.prevWidth||d!==i.prevX||u!==i.prevTravellerWidth)){i.scale.range([d,d+l-u]);var x=i.scale.domain().map(function(v){return i.scale(v)});return{prevData:s,prevTravellerWidth:u,prevUpdateId:f,prevX:d,prevWidth:l,startX:i.scale(a.startIndex),endX:i.scale(a.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(a,i){for(var s=a.length,l=0,d=s-1;d-l>1;){var u=Math.floor((l+d)/2);a[u]>i?d=u:l=u}return i>=a[d]?d:l}}])}(N.PureComponent);ei(dd,"displayName","Brush");ei(dd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var tj,Mk;function wJ(){if(Mk)return tj;Mk=1;var e=$w();function t(r,a){var i;return e(r,function(s,l,d){return i=a(s,l,d),!i}),!!i}return tj=t,tj}var rj,Bk;function SJ(){if(Bk)return rj;Bk=1;var e=wD(),t=Go(),r=wJ(),a=Ua(),i=Pg();function s(l,d,u){var f=a(l)?e:r;return u&&i(l,d,u)&&(d=void 0),f(l,t(d,3))}return rj=s,rj}var NJ=SJ();const TJ=Gr(NJ);var ps=function(t,r){var a=t.alwaysShow,i=t.ifOverflow;return a&&(i="extendDomain"),i===r},nj,Fk;function CJ(){if(Fk)return nj;Fk=1;var e=zD();function t(r,a,i){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[a]=i}return nj=t,nj}var aj,Lk;function AJ(){if(Lk)return aj;Lk=1;var e=CJ(),t=FD(),r=Go();function a(i,s){var l={};return s=r(s,3),t(i,function(d,u,f){e(l,u,s(d,u,f))}),l}return aj=a,aj}var EJ=AJ();const OJ=Gr(EJ);var ij,zk;function _J(){if(zk)return ij;zk=1;function e(t,r){for(var a=-1,i=t==null?0:t.length;++a<i;)if(!r(t[a],a,t))return!1;return!0}return ij=e,ij}var sj,$k;function kJ(){if($k)return sj;$k=1;var e=$w();function t(r,a){var i=!0;return e(r,function(s,l,d){return i=!!a(s,l,d),i}),i}return sj=t,sj}var oj,Uk;function IJ(){if(Uk)return oj;Uk=1;var e=_J(),t=kJ(),r=Go(),a=Ua(),i=Pg();function s(l,d,u){var f=a(l)?e:t;return u&&i(l,d,u)&&(d=void 0),f(l,r(d,3))}return oj=s,oj}var DJ=IJ();const p8=Gr(DJ);var RJ=["x","y"];function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function I2(){return I2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I2.apply(this,arguments)}function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(a){PJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function PJ(e,t,r){return t=MJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=BJ(e,"string");return Wf(t)=="symbol"?t:t+""}function BJ(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FJ(e,t){if(e==null)return{};var r=LJ(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LJ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function zJ(e,t){var r=e.x,a=e.y,i=FJ(e,RJ),s="".concat(r),l=parseInt(s,10),d="".concat(a),u=parseInt(d,10),f="".concat(t.height||i.height),p=parseInt(f,10),m="".concat(t.width||i.width),x=parseInt(m,10);return Wu(Wu(Wu(Wu(Wu({},t),i),l?{x:l}:{}),u?{y:u}:{}),{},{height:p,width:x,name:t.name,radius:t.radius})}function Wk(e){return Ie.createElement(JQ,I2({shapeType:"rectangle",propTransformer:zJ,activeClassName:"recharts-active-bar"},e))}var $J=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,i){if(typeof t=="number")return t;var s=typeof a=="number";return s?t(a,i):(s||Dl(),r)}},UJ=["value","background"],m8;function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function qJ(e,t){if(e==null)return{};var r=WJ(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WJ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Vm(){return Vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vm.apply(this,arguments)}function Hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hk(Object(r),!0).forEach(function(a){Po(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,x8(a.key),a)}}function GJ(e,t,r){return t&&Gk(e.prototype,t),r&&Gk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KJ(e,t,r){return t=Ym(t),VJ(e,g8()?Reflect.construct(t,r||[],Ym(e).constructor):t.apply(e,r))}function VJ(e,t){if(t&&(ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YJ(e)}function YJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g8=function(){return!!e})()}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ym(e)}function XJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D2(e,t)}function D2(e,t){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},D2(e,t)}function Po(e,t,r){return t=x8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x8(e){var t=QJ(e,"string");return ud(t)=="symbol"?t:t+""}function QJ(e,t){if(ud(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ud(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hl=function(e){function t(){var r;HJ(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=KJ(this,t,[].concat(i)),Po(r,"state",{isAnimationFinished:!1}),Po(r,"id",ch("recharts-bar-")),Po(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),Po(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return XJ(t,e),GJ(t,[{key:"renderRectanglesStatically",value:function(a){var i=this,s=this.props,l=s.shape,d=s.dataKey,u=s.activeIndex,f=s.activeBar,p=gr(this.props,!1);return a&&a.map(function(m,x){var v=x===u,j=v?f:l,b=Nn(Nn(Nn({},p),m),{},{isActive:v,option:j,index:x,dataKey:d,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ie.createElement(yn,Vm({className:"recharts-bar-rectangle"},um(i.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),Ie.createElement(Wk,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,i=this.props,s=i.data,l=i.layout,d=i.isAnimationActive,u=i.animationBegin,f=i.animationDuration,p=i.animationEasing,m=i.animationId,x=this.state.prevData;return Ie.createElement(ro,{begin:u,duration:f,isActive:d,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var j=v.t,b=s.map(function(y,C){var E=x&&x[C];if(E){var O=Ui(E.x,y.x),S=Ui(E.y,y.y),T=Ui(E.width,y.width),k=Ui(E.height,y.height);return Nn(Nn({},y),{},{x:O(j),y:S(j),width:T(j),height:k(j)})}if(l==="horizontal"){var D=Ui(0,y.height),F=D(j);return Nn(Nn({},y),{},{y:y.y+y.height-F,height:F})}var B=Ui(0,y.width),M=B(j);return Nn(Nn({},y),{},{width:M})});return Ie.createElement(yn,null,a.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var a=this.props,i=a.data,s=a.isAnimationActive,l=this.state.prevData;return s&&i&&i.length&&(!l||!Wg(l,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var a=this,i=this.props,s=i.data,l=i.dataKey,d=i.activeIndex,u=gr(this.props.background,!1);return s.map(function(f,p){f.value;var m=f.background,x=qJ(f,UJ);if(!m)return null;var v=Nn(Nn(Nn(Nn(Nn({},x),{},{fill:"#eee"},m),u),um(a.props,f,p)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:l,index:p,className:"recharts-bar-background-rectangle"});return Ie.createElement(Wk,Vm({key:"background-bar-".concat(p),option:a.props.background,isActive:p===d},v))})}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.data,d=s.xAxis,u=s.yAxis,f=s.layout,p=s.children,m=Ci(p,mh);if(!m)return null;var x=f==="vertical"?l[0].height/2:l[0].width/2,v=function(y,C){var E=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:E,errorVal:oi(y,C)}},j={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ie.createElement(yn,j,m.map(function(b){return Ie.cloneElement(b,{key:"error-bar-".concat(i,"-").concat(b.props.dataKey),data:l,xAxis:d,yAxis:u,layout:f,offset:x,dataPointFormatter:v})}))}},{key:"render",value:function(){var a=this.props,i=a.hide,s=a.data,l=a.className,d=a.xAxis,u=a.yAxis,f=a.left,p=a.top,m=a.width,x=a.height,v=a.isAnimationActive,j=a.background,b=a.id;if(i||!s||!s.length)return null;var y=this.state.isAnimationFinished,C=jr("recharts-bar",l),E=d&&d.allowDataOverflow,O=u&&u.allowDataOverflow,S=E||O,T=pr(b)?this.id:b;return Ie.createElement(yn,{className:C},E||O?Ie.createElement("defs",null,Ie.createElement("clipPath",{id:"clipPath-".concat(T)},Ie.createElement("rect",{x:E?f:f-m/2,y:O?p:p-x/2,width:E?m:m*2,height:O?x:x*2}))):null,Ie.createElement(yn,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(T,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,T),(!v||y)&&Lo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:i.curData}:a.data!==i.curData?{curData:a.data}:null}}])}(N.PureComponent);m8=Hl;Po(Hl,"displayName","Bar");Po(Hl,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!kd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Po(Hl,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,i=e.bandSize,s=e.xAxis,l=e.yAxis,d=e.xAxisTicks,u=e.yAxisTicks,f=e.stackedData,p=e.dataStartIndex,m=e.displayedData,x=e.offset,v=gV(a,r);if(!v)return null;var j=t.layout,b=r.type.defaultProps,y=b!==void 0?Nn(Nn({},b),r.props):r.props,C=y.dataKey,E=y.children,O=y.minPointSize,S=j==="horizontal"?l:s,T=f?S.scale.domain():null,k=NV({numericAxis:S}),D=Ci(E,KD),F=m.map(function(B,M){var L,A,U,P,I,R;f?L=xV(f[p+M],T):(L=oi(B,C),Array.isArray(L)||(L=[k,L]));var W=$J(O,m8.defaultProps.minPointSize)(L[1],M);if(j==="horizontal"){var Q,ge=[l.scale(L[0]),l.scale(L[1])],q=ge[0],Y=ge[1];A=O4({axis:s,ticks:d,bandSize:i,offset:v.offset,entry:B,index:M}),U=(Q=Y??q)!==null&&Q!==void 0?Q:void 0,P=v.size;var z=q-Y;if(I=Number.isNaN(z)?0:z,R={x:A,y:l.y,width:P,height:l.height},Math.abs(W)>0&&Math.abs(I)<Math.abs(W)){var ee=Hi(I||W)*(Math.abs(W)-Math.abs(I));U-=ee,I+=ee}}else{var H=[s.scale(L[0]),s.scale(L[1])],re=H[0],le=H[1];if(A=re,U=O4({axis:l,ticks:u,bandSize:i,offset:v.offset,entry:B,index:M}),P=le-re,I=v.size,R={x:s.x,y:U,width:s.width,height:I},Math.abs(W)>0&&Math.abs(P)<Math.abs(W)){var pe=Hi(P||W)*(Math.abs(W)-Math.abs(P));P+=pe}}return Nn(Nn(Nn({},B),{},{x:A,y:U,width:P,height:I,value:f?L:L[1],payload:B,background:R},D&&D[M]&&D[M].props),{},{tooltipPayload:[ZR(r,B)],tooltipPosition:{x:A+P/2,y:U+I/2}})});return Nn({data:F,layout:j},x)});function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function JJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,y8(a.key),a)}}function ZJ(e,t,r){return t&&Kk(e.prototype,t),r&&Kk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function zi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vk(Object(r),!0).forEach(function(a){Yg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yg(e,t,r){return t=y8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y8(e){var t=eZ(e,"string");return Hf(t)=="symbol"?t:t+""}function eZ(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v8=function(t,r,a,i,s){var l=t.width,d=t.height,u=t.layout,f=t.children,p=Object.keys(r),m={left:a.left,leftMirror:a.left,right:l-a.right,rightMirror:l-a.right,top:a.top,topMirror:a.top,bottom:d-a.bottom,bottomMirror:d-a.bottom},x=!!ri(f,Hl);return p.reduce(function(v,j){var b=r[j],y=b.orientation,C=b.domain,E=b.padding,O=E===void 0?{}:E,S=b.mirror,T=b.reversed,k="".concat(y).concat(S?"Mirror":""),D,F,B,M,L;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var A=C[1]-C[0],U=1/0,P=b.categoricalDomain.sort(e$);if(P.forEach(function(H,re){re>0&&(U=Math.min((H||0)-(P[re-1]||0),U))}),Number.isFinite(U)){var I=U/A,R=b.layout==="vertical"?a.height:a.width;if(b.padding==="gap"&&(D=I*R/2),b.padding==="no-gap"){var W=kl(t.barCategoryGap,I*R),Q=I*R/2;D=Q-W-(Q-W)/R*W}}}i==="xAxis"?F=[a.left+(O.left||0)+(D||0),a.left+a.width-(O.right||0)-(D||0)]:i==="yAxis"?F=u==="horizontal"?[a.top+a.height-(O.bottom||0),a.top+(O.top||0)]:[a.top+(O.top||0)+(D||0),a.top+a.height-(O.bottom||0)-(D||0)]:F=b.range,T&&(F=[F[1],F[0]]);var ge=pV(b,s,x),q=ge.scale,Y=ge.realScaleType;q.domain(C).range(F),mV(q);var z=SV(q,zi(zi({},b),{},{realScaleType:Y}));i==="xAxis"?(L=y==="top"&&!S||y==="bottom"&&S,B=a.left,M=m[k]-L*b.height):i==="yAxis"&&(L=y==="left"&&!S||y==="right"&&S,B=m[k]-L*b.width,M=a.top);var ee=zi(zi(zi({},b),z),{},{realScaleType:Y,x:B,y:M,scale:q,width:i==="xAxis"?a.width:b.width,height:i==="yAxis"?a.height:b.height});return ee.bandSize=Mm(ee,z),!b.hide&&i==="xAxis"?m[k]+=(L?-1:1)*ee.height:b.hide||(m[k]+=(L?-1:1)*ee.width),zi(zi({},v),{},Yg({},j,ee))},{})},b8=function(t,r){var a=t.x,i=t.y,s=r.x,l=r.y;return{x:Math.min(a,s),y:Math.min(i,l),width:Math.abs(s-a),height:Math.abs(l-i)}},tZ=function(t){var r=t.x1,a=t.y1,i=t.x2,s=t.y2;return b8({x:r,y:a},{x:i,y:s})},j8=function(){function e(t){JJ(this,e),this.scale=t}return ZJ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,s=a.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var d=this.bandwidth?this.bandwidth():0;return this.scale(r)+d}default:return this.scale(r)}if(i){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+u}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),i=a[0],s=a[a.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();Yg(j8,"EPS",1e-4);var xS=function(t){var r=Object.keys(t).reduce(function(a,i){return zi(zi({},a),{},Yg({},i,j8.create(t[i])))},{});return zi(zi({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=s.bandAware,d=s.position;return OJ(i,function(u,f){return r[f].apply(u,{bandAware:l,position:d})})},isInRange:function(i){return p8(i,function(s,l){return r[l].isInRange(s)})}})};function rZ(e){return(e%180+180)%180}var nZ=function(t){var r=t.width,a=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=rZ(i),l=s*Math.PI/180,d=Math.atan(a/r),u=l>d&&l<Math.PI-d?a/Math.sin(l):r/Math.cos(l);return Math.abs(u)},lj,Yk;function aZ(){if(Yk)return lj;Yk=1;var e=Go(),t=dh(),r=Dg();function a(i){return function(s,l,d){var u=Object(s);if(!t(s)){var f=e(l,3);s=r(s),l=function(m){return f(u[m],m,u)}}var p=i(s,l,d);return p>-1?u[f?s[p]:p]:void 0}}return lj=a,lj}var cj,Xk;function iZ(){if(Xk)return cj;Xk=1;var e=d8();function t(r){var a=e(r),i=a%1;return a===a?i?a-i:a:0}return cj=t,cj}var dj,Qk;function sZ(){if(Qk)return dj;Qk=1;var e=DD(),t=Go(),r=iZ(),a=Math.max;function i(s,l,d){var u=s==null?0:s.length;if(!u)return-1;var f=d==null?0:r(d);return f<0&&(f=a(u+f,0)),e(s,t(l,3),f)}return dj=i,dj}var uj,Jk;function oZ(){if(Jk)return uj;Jk=1;var e=aZ(),t=sZ(),r=e(t);return uj=r,uj}var lZ=oZ();const cZ=Gr(lZ);var dZ=Y3();const uZ=Gr(dZ);var fZ=uZ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),yS=N.createContext(void 0),vS=N.createContext(void 0),w8=N.createContext(void 0),S8=N.createContext({}),N8=N.createContext(void 0),T8=N.createContext(0),C8=N.createContext(0),Zk=function(t){var r=t.state,a=r.xAxisMap,i=r.yAxisMap,s=r.offset,l=t.clipPathId,d=t.children,u=t.width,f=t.height,p=fZ(s);return Ie.createElement(yS.Provider,{value:a},Ie.createElement(vS.Provider,{value:i},Ie.createElement(S8.Provider,{value:s},Ie.createElement(w8.Provider,{value:p},Ie.createElement(N8.Provider,{value:l},Ie.createElement(T8.Provider,{value:f},Ie.createElement(C8.Provider,{value:u},d)))))))},hZ=function(){return N.useContext(N8)},A8=function(t){var r=N.useContext(yS);r==null&&Dl();var a=r[t];return a==null&&Dl(),a},pZ=function(){var t=N.useContext(yS);return Do(t)},mZ=function(){var t=N.useContext(vS),r=cZ(t,function(a){return p8(a.domain,Number.isFinite)});return r||Do(t)},E8=function(t){var r=N.useContext(vS);r==null&&Dl();var a=r[t];return a==null&&Dl(),a},gZ=function(){var t=N.useContext(w8);return t},xZ=function(){return N.useContext(S8)},bS=function(){return N.useContext(C8)},jS=function(){return N.useContext(T8)};function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function yZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vZ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_8(a.key),a)}}function bZ(e,t,r){return t&&vZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jZ(e,t,r){return t=Xm(t),wZ(e,O8()?Reflect.construct(t,r||[],Xm(e).constructor):t.apply(e,r))}function wZ(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SZ(e)}function SZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O8=function(){return!!e})()}function Xm(e){return Xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xm(e)}function NZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R2(e,t)}function R2(e,t){return R2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},R2(e,t)}function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function tI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(a){wS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wS(e,t,r){return t=_8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _8(e){var t=TZ(e,"string");return fd(t)=="symbol"?t:t+""}function TZ(e,t){if(fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(fd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CZ(e,t){return _Z(e)||OZ(e,t)||EZ(e,t)||AZ()}function AZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EZ(e,t){if(e){if(typeof e=="string")return rI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rI(e,t)}}function rI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function OZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function _Z(e){if(Array.isArray(e))return e}function P2(){return P2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},P2.apply(this,arguments)}var kZ=function(t,r){var a;return Ie.isValidElement(t)?a=Ie.cloneElement(t,r):lr(t)?a=t(r):a=Ie.createElement("line",P2({},r,{className:"recharts-reference-line-line"})),a},IZ=function(t,r,a,i,s,l,d,u,f){var p=s.x,m=s.y,x=s.width,v=s.height;if(a){var j=f.y,b=t.y.apply(j,{position:l});if(ps(f,"discard")&&!t.y.isInRange(b))return null;var y=[{x:p+x,y:b},{x:p,y:b}];return u==="left"?y.reverse():y}if(r){var C=f.x,E=t.x.apply(C,{position:l});if(ps(f,"discard")&&!t.x.isInRange(E))return null;var O=[{x:E,y:m+v},{x:E,y:m}];return d==="top"?O.reverse():O}if(i){var S=f.segment,T=S.map(function(k){return t.apply(k,{position:l})});return ps(f,"discard")&&TJ(T,function(k){return!t.isInRange(k)})?null:T}return null};function DZ(e){var t=e.x,r=e.y,a=e.segment,i=e.xAxisId,s=e.yAxisId,l=e.shape,d=e.className,u=e.alwaysShow,f=hZ(),p=A8(i),m=E8(s),x=gZ();if(!f||!x)return null;Gs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=xS({x:p.scale,y:m.scale}),j=Rn(t),b=Rn(r),y=a&&a.length===2,C=IZ(v,j,b,y,x,e.position,p.orientation,m.orientation,e);if(!C)return null;var E=CZ(C,2),O=E[0],S=O.x,T=O.y,k=E[1],D=k.x,F=k.y,B=ps(e,"hidden")?"url(#".concat(f,")"):void 0,M=tI(tI({clipPath:B},gr(e,!0)),{},{x1:S,y1:T,x2:D,y2:F});return Ie.createElement(yn,{className:jr("recharts-reference-line",d)},kZ(l,M),la.renderCallByParent(e,tZ({x1:S,y1:T,x2:D,y2:F})))}var SS=function(e){function t(){return yZ(this,t),jZ(this,t,arguments)}return NZ(t,e),bZ(t,[{key:"render",value:function(){return Ie.createElement(DZ,this.props)}}])}(Ie.Component);wS(SS,"displayName","ReferenceLine");wS(SS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function M2(){return M2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M2.apply(this,arguments)}function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function nI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function aI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(r),!0).forEach(function(a){Xg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function RZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PZ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,I8(a.key),a)}}function MZ(e,t,r){return t&&PZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BZ(e,t,r){return t=Qm(t),FZ(e,k8()?Reflect.construct(t,r||[],Qm(e).constructor):t.apply(e,r))}function FZ(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LZ(e)}function LZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k8=function(){return!!e})()}function Qm(e){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qm(e)}function zZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B2(e,t)}function B2(e,t){return B2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},B2(e,t)}function Xg(e,t,r){return t=I8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I8(e){var t=$Z(e,"string");return hd(t)=="symbol"?t:t+""}function $Z(e,t){if(hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(hd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var UZ=function(t){var r=t.x,a=t.y,i=t.xAxis,s=t.yAxis,l=xS({x:i.scale,y:s.scale}),d=l.apply({x:r,y:a},{bandAware:!0});return ps(t,"discard")&&!l.isInRange(d)?null:d},Qg=function(e){function t(){return RZ(this,t),BZ(this,t,arguments)}return zZ(t,e),MZ(t,[{key:"render",value:function(){var a=this.props,i=a.x,s=a.y,l=a.r,d=a.alwaysShow,u=a.clipPathId,f=Rn(i),p=Rn(s);if(Gs(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!f||!p)return null;var m=UZ(this.props);if(!m)return null;var x=m.x,v=m.y,j=this.props,b=j.shape,y=j.className,C=ps(this.props,"hidden")?"url(#".concat(u,")"):void 0,E=aI(aI({clipPath:C},gr(this.props,!0)),{},{cx:x,cy:v});return Ie.createElement(yn,{className:jr("recharts-reference-dot",y)},t.renderDot(b,E),la.renderCallByParent(this.props,{x:x-l,y:v-l,width:2*l,height:2*l}))}}])}(Ie.Component);Xg(Qg,"displayName","ReferenceDot");Xg(Qg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Xg(Qg,"renderDot",function(e,t){var r;return Ie.isValidElement(e)?r=Ie.cloneElement(e,t):lr(e)?r=e(t):r=Ie.createElement(gS,M2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F2.apply(this,arguments)}function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function iI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function sI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iI(Object(r),!0).forEach(function(a){Jg(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WZ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,R8(a.key),a)}}function HZ(e,t,r){return t&&WZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GZ(e,t,r){return t=Jm(t),KZ(e,D8()?Reflect.construct(t,r||[],Jm(e).constructor):t.apply(e,r))}function KZ(e,t){if(t&&(pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VZ(e)}function VZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D8=function(){return!!e})()}function Jm(e){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jm(e)}function YZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L2(e,t)}function L2(e,t){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},L2(e,t)}function Jg(e,t,r){return t=R8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R8(e){var t=XZ(e,"string");return pd(t)=="symbol"?t:t+""}function XZ(e,t){if(pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(pd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var QZ=function(t,r,a,i,s){var l=s.x1,d=s.x2,u=s.y1,f=s.y2,p=s.xAxis,m=s.yAxis;if(!p||!m)return null;var x=xS({x:p.scale,y:m.scale}),v={x:t?x.x.apply(l,{position:"start"}):x.x.rangeMin,y:a?x.y.apply(u,{position:"start"}):x.y.rangeMin},j={x:r?x.x.apply(d,{position:"end"}):x.x.rangeMax,y:i?x.y.apply(f,{position:"end"}):x.y.rangeMax};return ps(s,"discard")&&(!x.isInRange(v)||!x.isInRange(j))?null:b8(v,j)},Zg=function(e){function t(){return qZ(this,t),GZ(this,t,arguments)}return YZ(t,e),HZ(t,[{key:"render",value:function(){var a=this.props,i=a.x1,s=a.x2,l=a.y1,d=a.y2,u=a.className,f=a.alwaysShow,p=a.clipPathId;Gs(f===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Rn(i),x=Rn(s),v=Rn(l),j=Rn(d),b=this.props.shape;if(!m&&!x&&!v&&!j&&!b)return null;var y=QZ(m,x,v,j,this.props);if(!y&&!b)return null;var C=ps(this.props,"hidden")?"url(#".concat(p,")"):void 0;return Ie.createElement(yn,{className:jr("recharts-reference-area",u)},t.renderRect(b,sI(sI({clipPath:C},gr(this.props,!0)),y)),la.renderCallByParent(this.props,y))}}])}(Ie.Component);Jg(Zg,"displayName","ReferenceArea");Jg(Zg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Jg(Zg,"renderRect",function(e,t){var r;return Ie.isValidElement(e)?r=Ie.cloneElement(e,t):lr(e)?r=e(t):r=Ie.createElement(mS,F2({},t,{className:"recharts-reference-area-rect"})),r});function P8(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],i=0;i<e.length;i+=t)a.push(e[i]);return a}function JZ(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return nZ(a,r)}function ZZ(e,t,r){var a=r==="width",i=e.x,s=e.y,l=e.width,d=e.height;return t===1?{start:a?i:s,end:a?i+l:s+d}:{start:a?i+l:s+d,end:a?i:s}}function Zm(e,t,r,a,i){if(e*t<e*a||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-a)>=0&&e*(t+e*s/2-i)<=0}function eee(e,t){return P8(e,t+1)}function tee(e,t,r,a,i){for(var s=(a||[]).slice(),l=t.start,d=t.end,u=0,f=1,p=l,m=function(){var j=a==null?void 0:a[u];if(j===void 0)return{v:P8(a,f)};var b=u,y,C=function(){return y===void 0&&(y=r(j,b)),y},E=j.coordinate,O=u===0||Zm(e,E,C,p,d);O||(u=0,p=l,f+=1),O&&(p=E+e*(C()/2+i),u+=f)},x;f<=s.length;)if(x=m(),x)return x.v;return[]}function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function oI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(r),!0).forEach(function(a){ree(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ree(e,t,r){return t=nee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nee(e){var t=aee(e,"string");return Gf(t)=="symbol"?t:t+""}function aee(e,t){if(Gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iee(e,t,r,a,i){for(var s=(a||[]).slice(),l=s.length,d=t.start,u=t.end,f=function(x){var v=s[x],j,b=function(){return j===void 0&&(j=r(v,x)),j};if(x===l-1){var y=e*(v.coordinate+e*b()/2-u);s[x]=v=oa(oa({},v),{},{tickCoord:y>0?v.coordinate-y*e:v.coordinate})}else s[x]=v=oa(oa({},v),{},{tickCoord:v.coordinate});var C=Zm(e,v.tickCoord,b,d,u);C&&(u=v.tickCoord-e*(b()/2+i),s[x]=oa(oa({},v),{},{isShow:!0}))},p=l-1;p>=0;p--)f(p);return s}function see(e,t,r,a,i,s){var l=(a||[]).slice(),d=l.length,u=t.start,f=t.end;if(s){var p=a[d-1],m=r(p,d-1),x=e*(p.coordinate+e*m/2-f);l[d-1]=p=oa(oa({},p),{},{tickCoord:x>0?p.coordinate-x*e:p.coordinate});var v=Zm(e,p.tickCoord,function(){return m},u,f);v&&(f=p.tickCoord-e*(m/2+i),l[d-1]=oa(oa({},p),{},{isShow:!0}))}for(var j=s?d-1:d,b=function(E){var O=l[E],S,T=function(){return S===void 0&&(S=r(O,E)),S};if(E===0){var k=e*(O.coordinate-e*T()/2-u);l[E]=O=oa(oa({},O),{},{tickCoord:k<0?O.coordinate-k*e:O.coordinate})}else l[E]=O=oa(oa({},O),{},{tickCoord:O.coordinate});var D=Zm(e,O.tickCoord,T,u,f);D&&(u=O.tickCoord+e*(T()/2+i),l[E]=oa(oa({},O),{},{isShow:!0}))},y=0;y<j;y++)b(y);return l}function NS(e,t,r){var a=e.tick,i=e.ticks,s=e.viewBox,l=e.minTickGap,d=e.orientation,u=e.interval,f=e.tickFormatter,p=e.unit,m=e.angle;if(!i||!i.length||!a)return[];if(St(u)||kd.isSsr)return eee(i,typeof u=="number"&&St(u)?u:0);var x=[],v=d==="top"||d==="bottom"?"width":"height",j=p&&v==="width"?Zu(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=function(O,S){var T=lr(f)?f(O.value,S):O.value;return v==="width"?JZ(Zu(T,{fontSize:t,letterSpacing:r}),j,m):Zu(T,{fontSize:t,letterSpacing:r})[v]},y=i.length>=2?Hi(i[1].coordinate-i[0].coordinate):1,C=ZZ(s,y,v);return u==="equidistantPreserveStart"?tee(y,C,b,i,l):(u==="preserveStart"||u==="preserveStartEnd"?x=see(y,C,b,i,l,u==="preserveStartEnd"):x=iee(y,C,b,i,l),x.filter(function(E){return E.isShow}))}var oee=["viewBox"],lee=["viewBox"],cee=["ticks"];function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fc.apply(this,arguments)}function lI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(r),!0).forEach(function(a){TS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fj(e,t){if(e==null)return{};var r=dee(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function dee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cI(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,B8(a.key),a)}}function fee(e,t,r){return t&&cI(e.prototype,t),r&&cI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hee(e,t,r){return t=eg(t),pee(e,M8()?Reflect.construct(t,r||[],eg(e).constructor):t.apply(e,r))}function pee(e,t){if(t&&(md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mee(e)}function mee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M8=function(){return!!e})()}function eg(e){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eg(e)}function gee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z2(e,t)}function z2(e,t){return z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},z2(e,t)}function TS(e,t,r){return t=B8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B8(e){var t=xee(e,"string");return md(t)=="symbol"?t:t+""}function xee(e,t){if(md(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(md(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pd=function(e){function t(r){var a;return uee(this,t),a=hee(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return gee(t,e),fee(t,[{key:"shouldComponentUpdate",value:function(a,i){var s=a.viewBox,l=fj(a,oee),d=this.props,u=d.viewBox,f=fj(d,lee);return!Uc(s,u)||!Uc(l,f)||!Uc(i,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var i=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.x,l=i.y,d=i.width,u=i.height,f=i.orientation,p=i.tickSize,m=i.mirror,x=i.tickMargin,v,j,b,y,C,E,O=m?-1:1,S=a.tickSize||p,T=St(a.tickCoord)?a.tickCoord:a.coordinate;switch(f){case"top":v=j=a.coordinate,y=l+ +!m*u,b=y-O*S,E=b-O*x,C=T;break;case"left":b=y=a.coordinate,j=s+ +!m*d,v=j-O*S,C=v-O*x,E=T;break;case"right":b=y=a.coordinate,j=s+ +m*d,v=j+O*S,C=v+O*x,E=T;break;default:v=j=a.coordinate,y=l+ +m*u,b=y+O*S,E=b+O*x,C=T;break}return{line:{x1:v,y1:b,x2:j,y2:y},tick:{x:C,y:E}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,l;switch(i){case"left":l=s?"start":"end";break;case"right":l=s?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,l="end";switch(i){case"left":case"right":l="middle";break;case"top":l=s?"start":"end";break;default:l=s?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.x,s=a.y,l=a.width,d=a.height,u=a.orientation,f=a.mirror,p=a.axisLine,m=ba(ba(ba({},gr(this.props,!1)),gr(p,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var x=+(u==="top"&&!f||u==="bottom"&&f);m=ba(ba({},m),{},{x1:i,y1:s+x*d,x2:i+l,y2:s+x*d})}else{var v=+(u==="left"&&!f||u==="right"&&f);m=ba(ba({},m),{},{x1:i+v*l,y1:s,x2:i+v*l,y2:s+d})}return Ie.createElement("line",Fc({},m,{className:jr("recharts-cartesian-axis-line",Ti(p,"className"))}))}},{key:"renderTicks",value:function(a,i,s){var l=this,d=this.props,u=d.tickLine,f=d.stroke,p=d.tick,m=d.tickFormatter,x=d.unit,v=NS(ba(ba({},this.props),{},{ticks:a}),i,s),j=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),y=gr(this.props,!1),C=gr(p,!1),E=ba(ba({},y),{},{fill:"none"},gr(u,!1)),O=v.map(function(S,T){var k=l.getTickLineCoord(S),D=k.line,F=k.tick,B=ba(ba(ba(ba({textAnchor:j,verticalAnchor:b},y),{},{stroke:"none",fill:f},C),F),{},{index:T,payload:S,visibleTicksCount:v.length,tickFormatter:m});return Ie.createElement(yn,Fc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},um(l.props,S,T)),u&&Ie.createElement("line",Fc({},E,D,{className:jr("recharts-cartesian-axis-tick-line",Ti(u,"className"))})),p&&t.renderTickItem(p,B,"".concat(lr(m)?m(S.value,T):S.value).concat(x||"")))});return Ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},O)}},{key:"render",value:function(){var a=this,i=this.props,s=i.axisLine,l=i.width,d=i.height,u=i.ticksGenerator,f=i.className,p=i.hide;if(p)return null;var m=this.props,x=m.ticks,v=fj(m,cee),j=x;return lr(u)&&(j=x&&x.length>0?u(this.props):u(v)),l<=0||d<=0||!j||!j.length?null:Ie.createElement(yn,{className:jr("recharts-cartesian-axis",f),ref:function(y){a.layerReference=y}},s&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),la.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,i,s){var l;return Ie.isValidElement(a)?l=Ie.cloneElement(a,i):lr(a)?l=a(i):l=Ie.createElement(wm,Fc({},i,{className:"recharts-cartesian-axis-tick-value"}),s),l}}])}(N.Component);TS(Pd,"displayName","CartesianAxis");TS(Pd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var yee=["x1","y1","x2","y2","key"],vee=["offset"];function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function dI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(r),!0).forEach(function(a){bee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bee(e,t,r){return t=jee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jee(e){var t=wee(e,"string");return Rl(t)=="symbol"?t:t+""}function wee(e,t){if(Rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sl.apply(this,arguments)}function uI(e,t){if(e==null)return{};var r=See(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function See(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Nee=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,i=t.x,s=t.y,l=t.width,d=t.height,u=t.ry;return Ie.createElement("rect",{x:i,y:s,ry:u,width:l,height:d,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function F8(e,t){var r;if(Ie.isValidElement(e))r=Ie.cloneElement(e,t);else if(lr(e))r=e(t);else{var a=t.x1,i=t.y1,s=t.x2,l=t.y2,d=t.key,u=uI(t,yee),f=gr(u,!1);f.offset;var p=uI(f,vee);r=Ie.createElement("line",Sl({},p,{x1:a,y1:i,x2:s,y2:l,fill:"none",key:d}))}return r}function Tee(e){var t=e.x,r=e.width,a=e.horizontal,i=a===void 0?!0:a,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var l=s.map(function(d,u){var f=ca(ca({},e),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return F8(i,f)});return Ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Cee(e){var t=e.y,r=e.height,a=e.vertical,i=a===void 0?!0:a,s=e.verticalPoints;if(!i||!s||!s.length)return null;var l=s.map(function(d,u){var f=ca(ca({},e),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return F8(i,f)});return Ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Aee(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,i=e.y,s=e.width,l=e.height,d=e.horizontalPoints,u=e.horizontal,f=u===void 0?!0:u;if(!f||!t||!t.length)return null;var p=d.map(function(x){return Math.round(x+i-i)}).sort(function(x,v){return x-v});i!==p[0]&&p.unshift(0);var m=p.map(function(x,v){var j=!p[v+1],b=j?i+l-x:p[v+1]-x;if(b<=0)return null;var y=v%t.length;return Ie.createElement("rect",{key:"react-".concat(v),y:x,x:a,height:b,width:s,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Eee(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,i=e.fillOpacity,s=e.x,l=e.y,d=e.width,u=e.height,f=e.verticalPoints;if(!r||!a||!a.length)return null;var p=f.map(function(x){return Math.round(x+s-s)}).sort(function(x,v){return x-v});s!==p[0]&&p.unshift(0);var m=p.map(function(x,v){var j=!p[v+1],b=j?s+d-x:p[v+1]-x;if(b<=0)return null;var y=v%a.length;return Ie.createElement("rect",{key:"react-".concat(v),x,y:l,width:b,height:u,stroke:"none",fill:a[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Oee=function(t,r){var a=t.xAxis,i=t.width,s=t.height,l=t.offset;return QR(NS(ca(ca(ca({},Pd.defaultProps),a),{},{ticks:Us(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),l.left,l.left+l.width,r)},_ee=function(t,r){var a=t.yAxis,i=t.width,s=t.height,l=t.offset;return QR(NS(ca(ca(ca({},Pd.defaultProps),a),{},{ticks:Us(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),l.top,l.top+l.height,r)},Oc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function $2(e){var t,r,a,i,s,l,d=bS(),u=jS(),f=xZ(),p=ca(ca({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Oc.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Oc.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Oc.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Oc.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Oc.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:Oc.verticalFill,x:St(e.x)?e.x:f.left,y:St(e.y)?e.y:f.top,width:St(e.width)?e.width:f.width,height:St(e.height)?e.height:f.height}),m=p.x,x=p.y,v=p.width,j=p.height,b=p.syncWithTicks,y=p.horizontalValues,C=p.verticalValues,E=pZ(),O=mZ();if(!St(v)||v<=0||!St(j)||j<=0||!St(m)||m!==+m||!St(x)||x!==+x)return null;var S=p.verticalCoordinatesGenerator||Oee,T=p.horizontalCoordinatesGenerator||_ee,k=p.horizontalPoints,D=p.verticalPoints;if((!k||!k.length)&&lr(T)){var F=y&&y.length,B=T({yAxis:O?ca(ca({},O),{},{ticks:F?y:O.ticks}):void 0,width:d,height:u,offset:f},F?!0:b);Gs(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Rl(B),"]")),Array.isArray(B)&&(k=B)}if((!D||!D.length)&&lr(S)){var M=C&&C.length,L=S({xAxis:E?ca(ca({},E),{},{ticks:M?C:E.ticks}):void 0,width:d,height:u,offset:f},M?!0:b);Gs(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Rl(L),"]")),Array.isArray(L)&&(D=L)}return Ie.createElement("g",{className:"recharts-cartesian-grid"},Ie.createElement(Nee,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),Ie.createElement(Tee,Sl({},p,{offset:f,horizontalPoints:k,xAxis:E,yAxis:O})),Ie.createElement(Cee,Sl({},p,{offset:f,verticalPoints:D,xAxis:E,yAxis:O})),Ie.createElement(Aee,Sl({},p,{horizontalPoints:k})),Ie.createElement(Eee,Sl({},p,{verticalPoints:D})))}$2.displayName="CartesianGrid";var kee=["type","layout","connectNulls","ref"],Iee=["key"];function gd(e){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gd(e)}function fI(e,t){if(e==null)return{};var r=Dee(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function nf(){return nf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nf.apply(this,arguments)}function hI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(r),!0).forEach(function(a){$i(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _c(e){return Bee(e)||Mee(e)||Pee(e)||Ree()}function Ree(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pee(e,t){if(e){if(typeof e=="string")return U2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U2(e,t)}}function Mee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bee(e){if(Array.isArray(e))return U2(e)}function U2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Fee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pI(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,z8(a.key),a)}}function Lee(e,t,r){return t&&pI(e.prototype,t),r&&pI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zee(e,t,r){return t=tg(t),$ee(e,L8()?Reflect.construct(t,r||[],tg(e).constructor):t.apply(e,r))}function $ee(e,t){if(t&&(gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uee(e)}function Uee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L8=function(){return!!e})()}function tg(e){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tg(e)}function qee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q2(e,t)}function q2(e,t){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},q2(e,t)}function $i(e,t,r){return t=z8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z8(e){var t=Wee(e,"string");return gd(t)=="symbol"?t:t+""}function Wee(e,t){if(gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(gd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gh=function(e){function t(){var r;Fee(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=zee(this,t,[].concat(i)),$i(r,"state",{isAnimationFinished:!0,totalLength:0}),$i(r,"generateSimpleStrokeDasharray",function(l,d){return"".concat(d,"px ").concat(l-d,"px")}),$i(r,"getStrokeDasharray",function(l,d,u){var f=u.reduce(function(C,E){return C+E});if(!f)return r.generateSimpleStrokeDasharray(d,l);for(var p=Math.floor(l/f),m=l%f,x=d-l,v=[],j=0,b=0;j<u.length;b+=u[j],++j)if(b+u[j]>m){v=[].concat(_c(u.slice(0,j)),[m-b]);break}var y=v.length%2===0?[0,x]:[x];return[].concat(_c(t.repeat(u,p)),_c(v),y).map(function(C){return"".concat(C,"px")}).join(", ")}),$i(r,"id",ch("recharts-line-")),$i(r,"pathRef",function(l){r.mainCurve=l}),$i(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),$i(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return qee(t,e),Lee(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.points,d=s.xAxis,u=s.yAxis,f=s.layout,p=s.children,m=Ci(p,mh);if(!m)return null;var x=function(b,y){return{x:b.x,y:b.y,value:b.value,errorVal:oi(b.payload,y)}},v={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Ie.createElement(yn,v,m.map(function(j){return Ie.cloneElement(j,{key:"bar-".concat(j.props.dataKey),data:l,xAxis:d,yAxis:u,layout:f,dataPointFormatter:x})}))}},{key:"renderDots",value:function(a,i,s){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var d=this.props,u=d.dot,f=d.points,p=d.dataKey,m=gr(this.props,!1),x=gr(u,!0),v=f.map(function(b,y){var C=Za(Za(Za({key:"dot-".concat(y),r:3},m),x),{},{index:y,cx:b.x,cy:b.y,value:b.value,dataKey:p,payload:b.payload,points:f});return t.renderDotItem(u,C)}),j={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Ie.createElement(yn,nf({className:"recharts-line-dots",key:"dots"},j),v)}},{key:"renderCurveStatically",value:function(a,i,s,l){var d=this.props,u=d.type,f=d.layout,p=d.connectNulls;d.ref;var m=fI(d,kee),x=Za(Za(Za({},gr(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:a},l),{},{type:u,layout:f,connectNulls:p});return Ie.createElement(v2,nf({},x,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var s=this,l=this.props,d=l.points,u=l.strokeDasharray,f=l.isAnimationActive,p=l.animationBegin,m=l.animationDuration,x=l.animationEasing,v=l.animationId,j=l.animateNewValues,b=l.width,y=l.height,C=this.state,E=C.prevPoints,O=C.totalLength;return Ie.createElement(ro,{begin:p,duration:m,isActive:f,easing:x,from:{t:0},to:{t:1},key:"line-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var T=S.t;if(E){var k=E.length/d.length,D=d.map(function(A,U){var P=Math.floor(U*k);if(E[P]){var I=E[P],R=Ui(I.x,A.x),W=Ui(I.y,A.y);return Za(Za({},A),{},{x:R(T),y:W(T)})}if(j){var Q=Ui(b*2,A.x),ge=Ui(y/2,A.y);return Za(Za({},A),{},{x:Q(T),y:ge(T)})}return Za(Za({},A),{},{x:A.x,y:A.y})});return s.renderCurveStatically(D,a,i)}var F=Ui(0,O),B=F(T),M;if(u){var L="".concat(u).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});M=s.getStrokeDasharray(B,O,L)}else M=s.generateSimpleStrokeDasharray(O,B);return s.renderCurveStatically(d,a,i,{strokeDasharray:M})})}},{key:"renderCurve",value:function(a,i){var s=this.props,l=s.points,d=s.isAnimationActive,u=this.state,f=u.prevPoints,p=u.totalLength;return d&&l&&l.length&&(!f&&p>0||!Wg(f,l))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(l,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,l=i.dot,d=i.points,u=i.className,f=i.xAxis,p=i.yAxis,m=i.top,x=i.left,v=i.width,j=i.height,b=i.isAnimationActive,y=i.id;if(s||!d||!d.length)return null;var C=this.state.isAnimationFinished,E=d.length===1,O=jr("recharts-line",u),S=f&&f.allowDataOverflow,T=p&&p.allowDataOverflow,k=S||T,D=pr(y)?this.id:y,F=(a=gr(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},B=F.r,M=B===void 0?3:B,L=F.strokeWidth,A=L===void 0?2:L,U=c$(l)?l:{},P=U.clipDot,I=P===void 0?!0:P,R=M*2+A;return Ie.createElement(yn,{className:O},S||T?Ie.createElement("defs",null,Ie.createElement("clipPath",{id:"clipPath-".concat(D)},Ie.createElement("rect",{x:S?x:x-v/2,y:T?m:m-j/2,width:S?v:v*2,height:T?j:j*2})),!I&&Ie.createElement("clipPath",{id:"clipPath-dots-".concat(D)},Ie.createElement("rect",{x:x-R/2,y:m-R/2,width:v+R,height:j+R}))):null,!E&&this.renderCurve(k,D),this.renderErrorBar(k,D),(E||l)&&this.renderDots(k,I,D),(!b||C)&&Lo.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var s=a.length%2!==0?[].concat(_c(a),[0]):a,l=[],d=0;d<i;++d)l=[].concat(_c(l),_c(s));return l}},{key:"renderDotItem",value:function(a,i){var s;if(Ie.isValidElement(a))s=Ie.cloneElement(a,i);else if(lr(a))s=a(i);else{var l=i.key,d=fI(i,Iee),u=jr("recharts-line-dot",typeof a!="boolean"?a.className:"");s=Ie.createElement(gS,nf({key:l},d,{className:u}))}return s}}])}(N.PureComponent);$i(gh,"displayName","Line");$i(gh,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!kd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$i(gh,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,l=e.dataKey,d=e.bandSize,u=e.displayedData,f=e.offset,p=t.layout,m=u.map(function(x,v){var j=oi(x,l);return p==="horizontal"?{x:E4({axis:r,ticks:i,bandSize:d,entry:x,index:v}),y:pr(j)?null:a.scale(j),value:j,payload:x}:{x:pr(j)?null:r.scale(j),y:E4({axis:a,ticks:s,bandSize:d,entry:x,index:v}),value:j,payload:x}});return Za({points:m,layout:p},f)});function xd(e){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(e)}function Hee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gee(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,q8(a.key),a)}}function Kee(e,t,r){return t&&Gee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vee(e,t,r){return t=rg(t),Yee(e,$8()?Reflect.construct(t,r||[],rg(e).constructor):t.apply(e,r))}function Yee(e,t){if(t&&(xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xee(e)}function Xee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!e})()}function rg(e){return rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rg(e)}function Qee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W2(e,t)}function W2(e,t){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},W2(e,t)}function U8(e,t,r){return t=q8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q8(e){var t=Jee(e,"string");return xd(t)=="symbol"?t:t+""}function Jee(e,t){if(xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(xd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H2.apply(this,arguments)}function Zee(e){var t=e.xAxisId,r=bS(),a=jS(),i=A8(t);return i==null?null:Ie.createElement(Pd,H2({},i,{className:jr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return Us(l,!0)}}))}var yd=function(e){function t(){return Hee(this,t),Vee(this,t,arguments)}return Qee(t,e),Kee(t,[{key:"render",value:function(){return Ie.createElement(Zee,this.props)}}])}(Ie.Component);U8(yd,"displayName","XAxis");U8(yd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function ete(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,G8(a.key),a)}}function rte(e,t,r){return t&&tte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nte(e,t,r){return t=ng(t),ate(e,W8()?Reflect.construct(t,r||[],ng(e).constructor):t.apply(e,r))}function ate(e,t){if(t&&(vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ite(e)}function ite(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W8=function(){return!!e})()}function ng(e){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ng(e)}function ste(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},G2(e,t)}function H8(e,t,r){return t=G8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G8(e){var t=ote(e,"string");return vd(t)=="symbol"?t:t+""}function ote(e,t){if(vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(vd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K2.apply(this,arguments)}var lte=function(t){var r=t.yAxisId,a=bS(),i=jS(),s=E8(r);return s==null?null:Ie.createElement(Pd,K2({},s,{className:jr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:i},ticksGenerator:function(d){return Us(d,!0)}}))},bd=function(e){function t(){return ete(this,t),nte(this,t,arguments)}return ste(t,e),rte(t,[{key:"render",value:function(){return Ie.createElement(lte,this.props)}}])}(Ie.Component);H8(bd,"displayName","YAxis");H8(bd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function mI(e){return fte(e)||ute(e)||dte(e)||cte()}function cte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dte(e,t){if(e){if(typeof e=="string")return V2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V2(e,t)}}function ute(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fte(e){if(Array.isArray(e))return V2(e)}function V2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Y2=function(t,r,a,i,s){var l=Ci(t,SS),d=Ci(t,Qg),u=[].concat(mI(l),mI(d)),f=Ci(t,Zg),p="".concat(i,"Id"),m=i[0],x=r;if(u.length&&(x=u.reduce(function(b,y){if(y.props[p]===a&&ps(y.props,"extendDomain")&&St(y.props[m])){var C=y.props[m];return[Math.min(b[0],C),Math.max(b[1],C)]}return b},x)),f.length){var v="".concat(m,"1"),j="".concat(m,"2");x=f.reduce(function(b,y){if(y.props[p]===a&&ps(y.props,"extendDomain")&&St(y.props[v])&&St(y.props[j])){var C=y.props[v],E=y.props[j];return[Math.min(b[0],C,E),Math.max(b[1],C,E)]}return b},x)}return s&&s.length&&(x=s.reduce(function(b,y){return St(y)?[Math.min(b[0],y),Math.max(b[1],y)]:b},x)),x},hj={exports:{}},gI;function hte(){return gI||(gI=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function i(u,f,p){this.fn=u,this.context=f,this.once=p||!1}function s(u,f,p,m,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new i(p,m||u,x),j=r?r+f:f;return u._events[j]?u._events[j].fn?u._events[j]=[u._events[j],v]:u._events[j].push(v):(u._events[j]=v,u._eventsCount++),u}function l(u,f){--u._eventsCount===0?u._events=new a:delete u._events[f]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var f=[],p,m;if(this._eventsCount===0)return f;for(m in p=this._events)t.call(p,m)&&f.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},d.prototype.listeners=function(f){var p=r?r+f:f,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,v=m.length,j=new Array(v);x<v;x++)j[x]=m[x].fn;return j},d.prototype.listenerCount=function(f){var p=r?r+f:f,m=this._events[p];return m?m.fn?1:m.length:0},d.prototype.emit=function(f,p,m,x,v,j){var b=r?r+f:f;if(!this._events[b])return!1;var y=this._events[b],C=arguments.length,E,O;if(y.fn){switch(y.once&&this.removeListener(f,y.fn,void 0,!0),C){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,p),!0;case 3:return y.fn.call(y.context,p,m),!0;case 4:return y.fn.call(y.context,p,m,x),!0;case 5:return y.fn.call(y.context,p,m,x,v),!0;case 6:return y.fn.call(y.context,p,m,x,v,j),!0}for(O=1,E=new Array(C-1);O<C;O++)E[O-1]=arguments[O];y.fn.apply(y.context,E)}else{var S=y.length,T;for(O=0;O<S;O++)switch(y[O].once&&this.removeListener(f,y[O].fn,void 0,!0),C){case 1:y[O].fn.call(y[O].context);break;case 2:y[O].fn.call(y[O].context,p);break;case 3:y[O].fn.call(y[O].context,p,m);break;case 4:y[O].fn.call(y[O].context,p,m,x);break;default:if(!E)for(T=1,E=new Array(C-1);T<C;T++)E[T-1]=arguments[T];y[O].fn.apply(y[O].context,E)}}return!0},d.prototype.on=function(f,p,m){return s(this,f,p,m,!1)},d.prototype.once=function(f,p,m){return s(this,f,p,m,!0)},d.prototype.removeListener=function(f,p,m,x){var v=r?r+f:f;if(!this._events[v])return this;if(!p)return l(this,v),this;var j=this._events[v];if(j.fn)j.fn===p&&(!x||j.once)&&(!m||j.context===m)&&l(this,v);else{for(var b=0,y=[],C=j.length;b<C;b++)(j[b].fn!==p||x&&!j[b].once||m&&j[b].context!==m)&&y.push(j[b]);y.length?this._events[v]=y.length===1?y[0]:y:l(this,v)}return this},d.prototype.removeAllListeners=function(f){var p;return f?(p=r?r+f:f,this._events[p]&&l(this,p)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d}(hj)),hj.exports}var pte=hte();const mte=Gr(pte);var pj=new mte,mj="recharts.syncMouseEvents";function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function gte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,K8(a.key),a)}}function yte(e,t,r){return t&&xte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gj(e,t,r){return t=K8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K8(e){var t=vte(e,"string");return Kf(t)=="symbol"?t:t+""}function vte(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bte=function(){function e(){gte(this,e),gj(this,"activeIndex",0),gj(this,"coordinateList",[]),gj(this,"layout","horizontal")}return yte(e,[{key:"setDetails",value:function(r){var a,i=r.coordinateList,s=i===void 0?null:i,l=r.container,d=l===void 0?null:l,u=r.layout,f=u===void 0?null:u,p=r.offset,m=p===void 0?null:p,x=r.mouseHandlerCallback,v=x===void 0?null:x;this.coordinateList=(a=s??this.coordinateList)!==null&&a!==void 0?a:[],this.container=d??this.container,this.layout=f??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,l=i.y,d=i.height,u=this.coordinateList[this.activeIndex].coordinate,f=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=s+u+f,x=l+this.offset.top+d/2+p;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])}();function jte(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],i=e==null?void 0:e[1];if(a&&i&&St(a)&&St(i))return!0}return!1}function wte(e,t,r,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function V8(e){var t=e.cx,r=e.cy,a=e.radius,i=e.startAngle,s=e.endAngle,l=ea(t,r,a,i),d=ea(t,r,a,s);return{points:[l,d],cx:t,cy:r,radius:a,startAngle:i,endAngle:s}}function Ste(e,t,r){var a,i,s,l;if(e==="horizontal")a=t.x,s=a,i=r.top,l=r.top+r.height;else if(e==="vertical")i=t.y,l=i,a=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var d=t.cx,u=t.cy,f=t.innerRadius,p=t.outerRadius,m=t.angle,x=ea(d,u,f,m),v=ea(d,u,p,m);a=x.x,i=x.y,s=v.x,l=v.y}else return V8(t);return[{x:a,y:i},{x:s,y:l}]}function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function xI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function zp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(r),!0).forEach(function(a){Nte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nte(e,t,r){return t=Tte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tte(e){var t=Cte(e,"string");return Vf(t)=="symbol"?t:t+""}function Cte(e,t){if(Vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ate(e){var t,r,a=e.element,i=e.tooltipEventType,s=e.isActive,l=e.activeCoordinate,d=e.activePayload,u=e.offset,f=e.activeTooltipIndex,p=e.tooltipAxisBandSize,m=e.layout,x=e.chartName,v=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!v||!s||!l||x!=="ScatterChart"&&i!=="axis")return null;var j,b=v2;if(x==="ScatterChart")j=l,b=TQ;else if(x==="BarChart")j=wte(m,l,u,p),b=mS;else if(m==="radial"){var y=V8(l),C=y.cx,E=y.cy,O=y.radius,S=y.startAngle,T=y.endAngle;j={cx:C,cy:E,startAngle:S,endAngle:T,innerRadius:O,outerRadius:O},b=r8}else j={points:Ste(m,l,u)},b=v2;var k=zp(zp(zp(zp({stroke:"#ccc",pointerEvents:"none"},u),j),gr(v,!1)),{},{payload:d,payloadIndex:f,className:jr("recharts-tooltip-cursor",v.className)});return N.isValidElement(v)?N.cloneElement(v,k):N.createElement(b,k)}var Ete=["item"],Ote=["children","className","width","height","style","compact","title","desc"];function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lc.apply(this,arguments)}function yI(e,t){return Ite(e)||kte(e,t)||X8(e,t)||_te()}function _te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,i,s,l,d=[],u=!0,f=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(u=(a=s.call(r)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){f=!0,i=p}finally{try{if(!u&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(f)throw i}}return d}}function Ite(e){if(Array.isArray(e))return e}function vI(e,t){if(e==null)return{};var r=Dte(e,t),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Rte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Q8(a.key),a)}}function Mte(e,t,r){return t&&Pte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bte(e,t,r){return t=ag(t),Fte(e,Y8()?Reflect.construct(t,r||[],ag(e).constructor):t.apply(e,r))}function Fte(e,t){if(t&&(jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lte(e)}function Lte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y8=function(){return!!e})()}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ag(e)}function zte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X2(e,t)}function X2(e,t){return X2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},X2(e,t)}function wd(e){return qte(e)||Ute(e)||X8(e)||$te()}function $te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X8(e,t){if(e){if(typeof e=="string")return Q2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q2(e,t)}}function Ute(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qte(e){if(Array.isArray(e))return Q2(e)}function Q2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function bI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bI(Object(r),!0).forEach(function(a){Ht(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ht(e,t,r){return t=Q8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q8(e){var t=Wte(e,"string");return jd(t)=="symbol"?t:t+""}function Wte(e,t){if(jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(jd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hte={xAxis:["bottom","top"],yAxis:["left","right"]},Gte={width:"100%",height:"100%"},J8={x:0,y:0};function $p(e){return e}var Kte=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Vte=function(t,r,a,i){var s=r.find(function(p){return p&&p.index===a});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var l=s.coordinate,d=i.radius;return at(at(at({},i),ea(i.cx,i.cy,d,l)),{},{angle:l,radius:d})}var u=s.coordinate,f=i.angle;return at(at(at({},i),ea(i.cx,i.cy,u,f)),{},{angle:f,radius:u})}return J8},e0=function(t,r){var a=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,l=(a??[]).reduce(function(d,u){var f=u.props.data;return f&&f.length?[].concat(wd(d),wd(f)):d},[]);return l.length>0?l:t&&t.length&&St(i)&&St(s)?t.slice(i,s+1):[]};function Z8(e){return e==="number"?[0,"auto"]:void 0}var J2=function(t,r,a,i){var s=t.graphicalItems,l=t.tooltipAxis,d=e0(r,t);return a<0||!s||!s.length||a>=d.length?null:s.reduce(function(u,f){var p,m=(p=f.props.data)!==null&&p!==void 0?p:r;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var x;if(l.dataKey&&!l.allowDuplicatedCategory){var v=m===void 0?d:m;x=cm(v,l.dataKey,i)}else x=m&&m[a]||d[a];return x?[].concat(wd(u),[ZR(f,x)]):u},[])},jI=function(t,r,a,i){var s=i||{x:t.chartX,y:t.chartY},l=Kte(s,a),d=t.orderedTooltipTicks,u=t.tooltipAxis,f=t.tooltipTicks,p=lV(l,d,f,u);if(p>=0&&f){var m=f[p]&&f[p].value,x=J2(t,r,p,m),v=Vte(a,d,p,s);return{activeTooltipIndex:p,activeLabel:m,activePayload:x,activeCoordinate:v}}return null},Yte=function(t,r){var a=r.axes,i=r.graphicalItems,s=r.axisType,l=r.axisIdKey,d=r.stackGroups,u=r.dataStartIndex,f=r.dataEndIndex,p=t.layout,m=t.children,x=t.stackOffset,v=XR(p,s);return a.reduce(function(j,b){var y,C=b.type.defaultProps!==void 0?at(at({},b.type.defaultProps),b.props):b.props,E=C.type,O=C.dataKey,S=C.allowDataOverflow,T=C.allowDuplicatedCategory,k=C.scale,D=C.ticks,F=C.includeHidden,B=C[l];if(j[B])return j;var M=e0(t.data,{graphicalItems:i.filter(function(z){var ee,H=l in z.props?z.props[l]:(ee=z.type.defaultProps)===null||ee===void 0?void 0:ee[l];return H===B}),dataStartIndex:u,dataEndIndex:f}),L=M.length,A,U,P;jte(C.domain,S,E)&&(A=p2(C.domain,null,S),v&&(E==="number"||k!=="auto")&&(P=tf(M,O,"category")));var I=Z8(E);if(!A||A.length===0){var R,W=(R=C.domain)!==null&&R!==void 0?R:I;if(O){if(A=tf(M,O,E),E==="category"&&v){var Q=Zz(A);T&&Q?(U=A,A=Hm(0,L)):T||(A=I4(W,A,b).reduce(function(z,ee){return z.indexOf(ee)>=0?z:[].concat(wd(z),[ee])},[]))}else if(E==="category")T?A=A.filter(function(z){return z!==""&&!pr(z)}):A=I4(W,A,b).reduce(function(z,ee){return z.indexOf(ee)>=0||ee===""||pr(ee)?z:[].concat(wd(z),[ee])},[]);else if(E==="number"){var ge=hV(M,i.filter(function(z){var ee,H,re=l in z.props?z.props[l]:(ee=z.type.defaultProps)===null||ee===void 0?void 0:ee[l],le="hide"in z.props?z.props.hide:(H=z.type.defaultProps)===null||H===void 0?void 0:H.hide;return re===B&&(F||!le)}),O,s,p);ge&&(A=ge)}v&&(E==="number"||k!=="auto")&&(P=tf(M,O,"category"))}else v?A=Hm(0,L):d&&d[B]&&d[B].hasStack&&E==="number"?A=x==="expand"?[0,1]:JR(d[B].stackGroups,u,f):A=YR(M,i.filter(function(z){var ee=l in z.props?z.props[l]:z.type.defaultProps[l],H="hide"in z.props?z.props.hide:z.type.defaultProps.hide;return ee===B&&(F||!H)}),E,p,!0);if(E==="number")A=Y2(m,A,B,s,D),W&&(A=p2(W,A,S));else if(E==="category"&&W){var q=W,Y=A.every(function(z){return q.indexOf(z)>=0});Y&&(A=q)}}return at(at({},j),{},Ht({},B,at(at({},C),{},{axisType:s,domain:A,categoricalDomain:P,duplicateDomain:U,originalDomain:(y=C.domain)!==null&&y!==void 0?y:I,isCategorical:v,layout:p})))},{})},Xte=function(t,r){var a=r.graphicalItems,i=r.Axis,s=r.axisType,l=r.axisIdKey,d=r.stackGroups,u=r.dataStartIndex,f=r.dataEndIndex,p=t.layout,m=t.children,x=e0(t.data,{graphicalItems:a,dataStartIndex:u,dataEndIndex:f}),v=x.length,j=XR(p,s),b=-1;return a.reduce(function(y,C){var E=C.type.defaultProps!==void 0?at(at({},C.type.defaultProps),C.props):C.props,O=E[l],S=Z8("number");if(!y[O]){b++;var T;return j?T=Hm(0,v):d&&d[O]&&d[O].hasStack?(T=JR(d[O].stackGroups,u,f),T=Y2(m,T,O,s)):(T=p2(S,YR(x,a.filter(function(k){var D,F,B=l in k.props?k.props[l]:(D=k.type.defaultProps)===null||D===void 0?void 0:D[l],M="hide"in k.props?k.props.hide:(F=k.type.defaultProps)===null||F===void 0?void 0:F.hide;return B===O&&!M}),"number",p),i.defaultProps.allowDataOverflow),T=Y2(m,T,O,s)),at(at({},y),{},Ht({},O,at(at({axisType:s},i.defaultProps),{},{hide:!0,orientation:Ti(Hte,"".concat(s,".").concat(b%2),null),domain:T,originalDomain:S,isCategorical:j,layout:p})))}return y},{})},Qte=function(t,r){var a=r.axisType,i=a===void 0?"xAxis":a,s=r.AxisComp,l=r.graphicalItems,d=r.stackGroups,u=r.dataStartIndex,f=r.dataEndIndex,p=t.children,m="".concat(i,"Id"),x=Ci(p,s),v={};return x&&x.length?v=Yte(t,{axes:x,graphicalItems:l,axisType:i,axisIdKey:m,stackGroups:d,dataStartIndex:u,dataEndIndex:f}):l&&l.length&&(v=Xte(t,{Axis:s,graphicalItems:l,axisType:i,axisIdKey:m,stackGroups:d,dataStartIndex:u,dataEndIndex:f})),v},Jte=function(t){var r=Do(t),a=Us(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:Uw(a,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Mm(r,a)}},wI=function(t){var r=t.children,a=t.defaultShowTooltip,i=ri(r,dd),s=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(l=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!a}},Zte=function(t){return!t||!t.length?!1:t.some(function(r){var a=Hs(r&&r.type);return a&&a.indexOf("Bar")>=0})},SI=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ere=function(t,r){var a=t.props,i=t.graphicalItems,s=t.xAxisMap,l=s===void 0?{}:s,d=t.yAxisMap,u=d===void 0?{}:d,f=a.width,p=a.height,m=a.children,x=a.margin||{},v=ri(m,dd),j=ri(m,qc),b=Object.keys(u).reduce(function(T,k){var D=u[k],F=D.orientation;return!D.mirror&&!D.hide?at(at({},T),{},Ht({},F,T[F]+D.width)):T},{left:x.left||0,right:x.right||0}),y=Object.keys(l).reduce(function(T,k){var D=l[k],F=D.orientation;return!D.mirror&&!D.hide?at(at({},T),{},Ht({},F,Ti(T,"".concat(F))+D.height)):T},{top:x.top||0,bottom:x.bottom||0}),C=at(at({},y),b),E=C.bottom;v&&(C.bottom+=v.props.height||dd.defaultProps.height),j&&r&&(C=uV(C,i,a,r));var O=f-C.left-C.right,S=p-C.top-C.bottom;return at(at({brushBottom:E},C),{},{width:Math.max(O,0),height:Math.max(S,0)})},tre=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},e5=function(t){var r=t.chartName,a=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,l=t.validateTooltipEventTypes,d=l===void 0?["axis"]:l,u=t.axisComponents,f=t.legendContent,p=t.formatAxisMap,m=t.defaultProps,x=function(C,E){var O=E.graphicalItems,S=E.stackGroups,T=E.offset,k=E.updateId,D=E.dataStartIndex,F=E.dataEndIndex,B=C.barSize,M=C.layout,L=C.barGap,A=C.barCategoryGap,U=C.maxBarSize,P=SI(M),I=P.numericAxisName,R=P.cateAxisName,W=Zte(O),Q=[];return O.forEach(function(ge,q){var Y=e0(C.data,{graphicalItems:[ge],dataStartIndex:D,dataEndIndex:F}),z=ge.type.defaultProps!==void 0?at(at({},ge.type.defaultProps),ge.props):ge.props,ee=z.dataKey,H=z.maxBarSize,re=z["".concat(I,"Id")],le=z["".concat(R,"Id")],pe={},Se=u.reduce(function(X,se){var J=E["".concat(se.axisType,"Map")],Ne=z["".concat(se.axisType,"Id")];J&&J[Ne]||se.axisType==="zAxis"||Dl();var Ge=J[Ne];return at(at({},X),{},Ht(Ht({},se.axisType,Ge),"".concat(se.axisType,"Ticks"),Us(Ge)))},pe),K=Se[R],ue=Se["".concat(R,"Ticks")],ye=S&&S[re]&&S[re].hasStack&&TV(ge,S[re].stackGroups),fe=Hs(ge.type).indexOf("Bar")>=0,Xe=Mm(K,ue),Ce=[],Le=W&&cV({barSize:B,stackGroups:S,totalSize:tre(Se,R)});if(fe){var ne,Ae,Ve=pr(H)?U:H,te=(ne=(Ae=Mm(K,ue,!0))!==null&&Ae!==void 0?Ae:Ve)!==null&&ne!==void 0?ne:0;Ce=dV({barGap:L,barCategoryGap:A,bandSize:te!==Xe?te:Xe,sizeList:Le[le],maxBarSize:Ve}),te!==Xe&&(Ce=Ce.map(function(X){return at(at({},X),{},{position:at(at({},X.position),{},{offset:X.position.offset-te/2})})}))}var ce=ge&&ge.type&&ge.type.getComposedData;ce&&Q.push({props:at(at({},ce(at(at({},Se),{},{displayedData:Y,props:C,dataKey:ee,item:ge,bandSize:Xe,barPosition:Ce,offset:T,stackedData:ye,layout:M,dataStartIndex:D,dataEndIndex:F}))),{},Ht(Ht(Ht({key:ge.key||"item-".concat(q)},I,Se[I]),R,Se[R]),"animationId",k)),childIndex:f$(ge,C.children),item:ge})}),Q},v=function(C,E){var O=C.props,S=C.dataStartIndex,T=C.dataEndIndex,k=C.updateId;if(!HE({props:O}))return null;var D=O.children,F=O.layout,B=O.stackOffset,M=O.data,L=O.reverseStackOrder,A=SI(F),U=A.numericAxisName,P=A.cateAxisName,I=Ci(D,a),R=wV(M,I,"".concat(U,"Id"),"".concat(P,"Id"),B,L),W=u.reduce(function(z,ee){var H="".concat(ee.axisType,"Map");return at(at({},z),{},Ht({},H,Qte(O,at(at({},ee),{},{graphicalItems:I,stackGroups:ee.axisType===U&&R,dataStartIndex:S,dataEndIndex:T}))))},{}),Q=ere(at(at({},W),{},{props:O,graphicalItems:I}),E==null?void 0:E.legendBBox);Object.keys(W).forEach(function(z){W[z]=p(O,W[z],Q,z.replace("Map",""),r)});var ge=W["".concat(P,"Map")],q=Jte(ge),Y=x(O,at(at({},W),{},{dataStartIndex:S,dataEndIndex:T,updateId:k,graphicalItems:I,stackGroups:R,offset:Q}));return at(at({formattedGraphicalItems:Y,graphicalItems:I,offset:Q,stackGroups:R},q),W)},j=function(y){function C(E){var O,S,T;return Rte(this,C),T=Bte(this,C,[E]),Ht(T,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ht(T,"accessibilityManager",new bte),Ht(T,"handleLegendBBoxUpdate",function(k){if(k){var D=T.state,F=D.dataStartIndex,B=D.dataEndIndex,M=D.updateId;T.setState(at({legendBBox:k},v({props:T.props,dataStartIndex:F,dataEndIndex:B,updateId:M},at(at({},T.state),{},{legendBBox:k}))))}}),Ht(T,"handleReceiveSyncEvent",function(k,D,F){if(T.props.syncId===k){if(F===T.eventEmitterSymbol&&typeof T.props.syncMethod!="function")return;T.applySyncEvent(D)}}),Ht(T,"handleBrushChange",function(k){var D=k.startIndex,F=k.endIndex;if(D!==T.state.dataStartIndex||F!==T.state.dataEndIndex){var B=T.state.updateId;T.setState(function(){return at({dataStartIndex:D,dataEndIndex:F},v({props:T.props,dataStartIndex:D,dataEndIndex:F,updateId:B},T.state))}),T.triggerSyncEvent({dataStartIndex:D,dataEndIndex:F})}}),Ht(T,"handleMouseEnter",function(k){var D=T.getMouseInfo(k);if(D){var F=at(at({},D),{},{isTooltipActive:!0});T.setState(F),T.triggerSyncEvent(F);var B=T.props.onMouseEnter;lr(B)&&B(F,k)}}),Ht(T,"triggeredAfterMouseMove",function(k){var D=T.getMouseInfo(k),F=D?at(at({},D),{},{isTooltipActive:!0}):{isTooltipActive:!1};T.setState(F),T.triggerSyncEvent(F);var B=T.props.onMouseMove;lr(B)&&B(F,k)}),Ht(T,"handleItemMouseEnter",function(k){T.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Ht(T,"handleItemMouseLeave",function(){T.setState(function(){return{isTooltipActive:!1}})}),Ht(T,"handleMouseMove",function(k){k.persist(),T.throttleTriggeredAfterMouseMove(k)}),Ht(T,"handleMouseLeave",function(k){T.throttleTriggeredAfterMouseMove.cancel();var D={isTooltipActive:!1};T.setState(D),T.triggerSyncEvent(D);var F=T.props.onMouseLeave;lr(F)&&F(D,k)}),Ht(T,"handleOuterEvent",function(k){var D=u$(k),F=Ti(T.props,"".concat(D));if(D&&lr(F)){var B,M;/.*touch.*/i.test(D)?M=T.getMouseInfo(k.changedTouches[0]):M=T.getMouseInfo(k),F((B=M)!==null&&B!==void 0?B:{},k)}}),Ht(T,"handleClick",function(k){var D=T.getMouseInfo(k);if(D){var F=at(at({},D),{},{isTooltipActive:!0});T.setState(F),T.triggerSyncEvent(F);var B=T.props.onClick;lr(B)&&B(F,k)}}),Ht(T,"handleMouseDown",function(k){var D=T.props.onMouseDown;if(lr(D)){var F=T.getMouseInfo(k);D(F,k)}}),Ht(T,"handleMouseUp",function(k){var D=T.props.onMouseUp;if(lr(D)){var F=T.getMouseInfo(k);D(F,k)}}),Ht(T,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&T.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Ht(T,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&T.handleMouseDown(k.changedTouches[0])}),Ht(T,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&T.handleMouseUp(k.changedTouches[0])}),Ht(T,"handleDoubleClick",function(k){var D=T.props.onDoubleClick;if(lr(D)){var F=T.getMouseInfo(k);D(F,k)}}),Ht(T,"handleContextMenu",function(k){var D=T.props.onContextMenu;if(lr(D)){var F=T.getMouseInfo(k);D(F,k)}}),Ht(T,"triggerSyncEvent",function(k){T.props.syncId!==void 0&&pj.emit(mj,T.props.syncId,k,T.eventEmitterSymbol)}),Ht(T,"applySyncEvent",function(k){var D=T.props,F=D.layout,B=D.syncMethod,M=T.state.updateId,L=k.dataStartIndex,A=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)T.setState(at({dataStartIndex:L,dataEndIndex:A},v({props:T.props,dataStartIndex:L,dataEndIndex:A,updateId:M},T.state)));else if(k.activeTooltipIndex!==void 0){var U=k.chartX,P=k.chartY,I=k.activeTooltipIndex,R=T.state,W=R.offset,Q=R.tooltipTicks;if(!W)return;if(typeof B=="function")I=B(Q,k);else if(B==="value"){I=-1;for(var ge=0;ge<Q.length;ge++)if(Q[ge].value===k.activeLabel){I=ge;break}}var q=at(at({},W),{},{x:W.left,y:W.top}),Y=Math.min(U,q.x+q.width),z=Math.min(P,q.y+q.height),ee=Q[I]&&Q[I].value,H=J2(T.state,T.props.data,I),re=Q[I]?{x:F==="horizontal"?Q[I].coordinate:Y,y:F==="horizontal"?z:Q[I].coordinate}:J8;T.setState(at(at({},k),{},{activeLabel:ee,activeCoordinate:re,activePayload:H,activeTooltipIndex:I}))}else T.setState(k)}),Ht(T,"renderCursor",function(k){var D,F=T.state,B=F.isTooltipActive,M=F.activeCoordinate,L=F.activePayload,A=F.offset,U=F.activeTooltipIndex,P=F.tooltipAxisBandSize,I=T.getTooltipEventType(),R=(D=k.props.active)!==null&&D!==void 0?D:B,W=T.props.layout,Q=k.key||"_recharts-cursor";return Ie.createElement(Ate,{key:Q,activeCoordinate:M,activePayload:L,activeTooltipIndex:U,chartName:r,element:k,isActive:R,layout:W,offset:A,tooltipAxisBandSize:P,tooltipEventType:I})}),Ht(T,"renderPolarAxis",function(k,D,F){var B=Ti(k,"type.axisType"),M=Ti(T.state,"".concat(B,"Map")),L=k.type.defaultProps,A=L!==void 0?at(at({},L),k.props):k.props,U=M&&M[A["".concat(B,"Id")]];return N.cloneElement(k,at(at({},U),{},{className:jr(B,U.className),key:k.key||"".concat(D,"-").concat(F),ticks:Us(U,!0)}))}),Ht(T,"renderPolarGrid",function(k){var D=k.props,F=D.radialLines,B=D.polarAngles,M=D.polarRadius,L=T.state,A=L.radiusAxisMap,U=L.angleAxisMap,P=Do(A),I=Do(U),R=I.cx,W=I.cy,Q=I.innerRadius,ge=I.outerRadius;return N.cloneElement(k,{polarAngles:Array.isArray(B)?B:Us(I,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(M)?M:Us(P,!0).map(function(q){return q.coordinate}),cx:R,cy:W,innerRadius:Q,outerRadius:ge,key:k.key||"polar-grid",radialLines:F})}),Ht(T,"renderLegend",function(){var k=T.state.formattedGraphicalItems,D=T.props,F=D.children,B=D.width,M=D.height,L=T.props.margin||{},A=B-(L.left||0)-(L.right||0),U=KR({children:F,formattedGraphicalItems:k,legendWidth:A,legendContent:f});if(!U)return null;var P=U.item,I=vI(U,Ete);return N.cloneElement(P,at(at({},I),{},{chartWidth:B,chartHeight:M,margin:L,onBBoxUpdate:T.handleLegendBBoxUpdate}))}),Ht(T,"renderTooltip",function(){var k,D=T.props,F=D.children,B=D.accessibilityLayer,M=ri(F,Li);if(!M)return null;var L=T.state,A=L.isTooltipActive,U=L.activeCoordinate,P=L.activePayload,I=L.activeLabel,R=L.offset,W=(k=M.props.active)!==null&&k!==void 0?k:A;return N.cloneElement(M,{viewBox:at(at({},R),{},{x:R.left,y:R.top}),active:W,label:I,payload:W?P:[],coordinate:U,accessibilityLayer:B})}),Ht(T,"renderBrush",function(k){var D=T.props,F=D.margin,B=D.data,M=T.state,L=M.offset,A=M.dataStartIndex,U=M.dataEndIndex,P=M.updateId;return N.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Mp(T.handleBrushChange,k.props.onChange),data:B,x:St(k.props.x)?k.props.x:L.left,y:St(k.props.y)?k.props.y:L.top+L.height+L.brushBottom-(F.bottom||0),width:St(k.props.width)?k.props.width:L.width,startIndex:A,endIndex:U,updateId:"brush-".concat(P)})}),Ht(T,"renderReferenceElement",function(k,D,F){if(!k)return null;var B=T,M=B.clipPathId,L=T.state,A=L.xAxisMap,U=L.yAxisMap,P=L.offset,I=k.type.defaultProps||{},R=k.props,W=R.xAxisId,Q=W===void 0?I.xAxisId:W,ge=R.yAxisId,q=ge===void 0?I.yAxisId:ge;return N.cloneElement(k,{key:k.key||"".concat(D,"-").concat(F),xAxis:A[Q],yAxis:U[q],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:M})}),Ht(T,"renderActivePoints",function(k){var D=k.item,F=k.activePoint,B=k.basePoint,M=k.childIndex,L=k.isRange,A=[],U=D.props.key,P=D.item.type.defaultProps!==void 0?at(at({},D.item.type.defaultProps),D.item.props):D.item.props,I=P.activeDot,R=P.dataKey,W=at(at({index:M,dataKey:R,cx:F.x,cy:F.y,r:4,fill:pS(D.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},gr(I,!1)),dm(I));return A.push(C.renderActiveDot(I,W,"".concat(U,"-activePoint-").concat(M))),B?A.push(C.renderActiveDot(I,at(at({},W),{},{cx:B.x,cy:B.y}),"".concat(U,"-basePoint-").concat(M))):L&&A.push(null),A}),Ht(T,"renderGraphicChild",function(k,D,F){var B=T.filterFormatItem(k,D,F);if(!B)return null;var M=T.getTooltipEventType(),L=T.state,A=L.isTooltipActive,U=L.tooltipAxis,P=L.activeTooltipIndex,I=L.activeLabel,R=T.props.children,W=ri(R,Li),Q=B.props,ge=Q.points,q=Q.isRange,Y=Q.baseLine,z=B.item.type.defaultProps!==void 0?at(at({},B.item.type.defaultProps),B.item.props):B.item.props,ee=z.activeDot,H=z.hide,re=z.activeBar,le=z.activeShape,pe=!!(!H&&A&&W&&(ee||re||le)),Se={};M!=="axis"&&W&&W.props.trigger==="click"?Se={onClick:Mp(T.handleItemMouseEnter,k.props.onClick)}:M!=="axis"&&(Se={onMouseLeave:Mp(T.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Mp(T.handleItemMouseEnter,k.props.onMouseEnter)});var K=N.cloneElement(k,at(at({},B.props),Se));function ue(se){return typeof U.dataKey=="function"?U.dataKey(se.payload):null}if(pe)if(P>=0){var ye,fe;if(U.dataKey&&!U.allowDuplicatedCategory){var Xe=typeof U.dataKey=="function"?ue:"payload.".concat(U.dataKey.toString());ye=cm(ge,Xe,I),fe=q&&Y&&cm(Y,Xe,I)}else ye=ge==null?void 0:ge[P],fe=q&&Y&&Y[P];if(le||re){var Ce=k.props.activeIndex!==void 0?k.props.activeIndex:P;return[N.cloneElement(k,at(at(at({},B.props),Se),{},{activeIndex:Ce})),null,null]}if(!pr(ye))return[K].concat(wd(T.renderActivePoints({item:B,activePoint:ye,basePoint:fe,childIndex:P,isRange:q})))}else{var Le,ne=(Le=T.getItemByXY(T.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:K},Ae=ne.graphicalItem,Ve=Ae.item,te=Ve===void 0?k:Ve,ce=Ae.childIndex,X=at(at(at({},B.props),Se),{},{activeIndex:ce});return[N.cloneElement(te,X),null,null]}return q?[K,null,null]:[K,null]}),Ht(T,"renderCustomized",function(k,D,F){return N.cloneElement(k,at(at({key:"recharts-customized-".concat(F)},T.props),T.state))}),Ht(T,"renderMap",{CartesianGrid:{handler:$p,once:!0},ReferenceArea:{handler:T.renderReferenceElement},ReferenceLine:{handler:$p},ReferenceDot:{handler:T.renderReferenceElement},XAxis:{handler:$p},YAxis:{handler:$p},Brush:{handler:T.renderBrush,once:!0},Bar:{handler:T.renderGraphicChild},Line:{handler:T.renderGraphicChild},Area:{handler:T.renderGraphicChild},Radar:{handler:T.renderGraphicChild},RadialBar:{handler:T.renderGraphicChild},Scatter:{handler:T.renderGraphicChild},Pie:{handler:T.renderGraphicChild},Funnel:{handler:T.renderGraphicChild},Tooltip:{handler:T.renderCursor,once:!0},PolarGrid:{handler:T.renderPolarGrid,once:!0},PolarAngleAxis:{handler:T.renderPolarAxis},PolarRadiusAxis:{handler:T.renderPolarAxis},Customized:{handler:T.renderCustomized}}),T.clipPathId="".concat((O=E.id)!==null&&O!==void 0?O:ch("recharts"),"-clip"),T.throttleTriggeredAfterMouseMove=GD(T.triggeredAfterMouseMove,(S=E.throttleDelay)!==null&&S!==void 0?S:1e3/60),T.state={},T}return zte(C,y),Mte(C,[{key:"componentDidMount",value:function(){var O,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var O=this.props,S=O.children,T=O.data,k=O.height,D=O.layout,F=ri(S,Li);if(F){var B=F.props.defaultIndex;if(!(typeof B!="number"||B<0||B>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[B]&&this.state.tooltipTicks[B].value,L=J2(this.state,T,B,M),A=this.state.tooltipTicks[B].coordinate,U=(this.state.offset.top+k)/2,P=D==="horizontal",I=P?{x:A,y:U}:{y:A,x:U},R=this.state.formattedGraphicalItems.find(function(Q){var ge=Q.item;return ge.type.name==="Scatter"});R&&(I=at(at({},I),R.props.points[B].tooltipPosition),L=R.props.points[B].tooltipPayload);var W={activeTooltipIndex:B,isTooltipActive:!0,activeLabel:M,activePayload:L,activeCoordinate:I};this.setState(W),this.renderCursor(F),this.accessibilityManager.setIndex(B)}}}},{key:"getSnapshotBeforeUpdate",value:function(O,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==O.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==O.margin){var T,k;this.accessibilityManager.setDetails({offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(O){Mj([ri(O.children,Li)],[ri(this.props.children,Li)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var O=ri(this.props.children,Li);if(O&&typeof O.props.shared=="boolean"){var S=O.props.shared?"axis":"item";return d.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(O){if(!this.container)return null;var S=this.container,T=S.getBoundingClientRect(),k=Jq(T),D={chartX:Math.round(O.pageX-k.left),chartY:Math.round(O.pageY-k.top)},F=T.width/S.offsetWidth||1,B=this.inRange(D.chartX,D.chartY,F);if(!B)return null;var M=this.state,L=M.xAxisMap,A=M.yAxisMap,U=this.getTooltipEventType(),P=jI(this.state,this.props.data,this.props.layout,B);if(U!=="axis"&&L&&A){var I=Do(L).scale,R=Do(A).scale,W=I&&I.invert?I.invert(D.chartX):null,Q=R&&R.invert?R.invert(D.chartY):null;return at(at({},D),{},{xValue:W,yValue:Q},P)}return P?at(at({},D),P):null}},{key:"inRange",value:function(O,S){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,D=O/T,F=S/T;if(k==="horizontal"||k==="vertical"){var B=this.state.offset,M=D>=B.left&&D<=B.left+B.width&&F>=B.top&&F<=B.top+B.height;return M?{x:D,y:F}:null}var L=this.state,A=L.angleAxisMap,U=L.radiusAxisMap;if(A&&U){var P=Do(A);return P4({x:D,y:F},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var O=this.props.children,S=this.getTooltipEventType(),T=ri(O,Li),k={};T&&S==="axis"&&(T.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var D=dm(this.props,this.handleOuterEvent);return at(at({},D),k)}},{key:"addListener",value:function(){pj.on(mj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){pj.removeListener(mj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(O,S,T){for(var k=this.state.formattedGraphicalItems,D=0,F=k.length;D<F;D++){var B=k[D];if(B.item===O||B.props.key===O.key||S===Hs(B.item.type)&&T===B.childIndex)return B}return null}},{key:"renderClipPath",value:function(){var O=this.clipPathId,S=this.state.offset,T=S.left,k=S.top,D=S.height,F=S.width;return Ie.createElement("defs",null,Ie.createElement("clipPath",{id:O},Ie.createElement("rect",{x:T,y:k,height:D,width:F})))}},{key:"getXScales",value:function(){var O=this.state.xAxisMap;return O?Object.entries(O).reduce(function(S,T){var k=yI(T,2),D=k[0],F=k[1];return at(at({},S),{},Ht({},D,F.scale))},{}):null}},{key:"getYScales",value:function(){var O=this.state.yAxisMap;return O?Object.entries(O).reduce(function(S,T){var k=yI(T,2),D=k[0],F=k[1];return at(at({},S),{},Ht({},D,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(O){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[O])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(O){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[O])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(O){var S=this.state,T=S.formattedGraphicalItems,k=S.activeItem;if(T&&T.length)for(var D=0,F=T.length;D<F;D++){var B=T[D],M=B.props,L=B.item,A=L.type.defaultProps!==void 0?at(at({},L.type.defaultProps),L.props):L.props,U=Hs(L.type);if(U==="Bar"){var P=(M.data||[]).find(function(Q){return mQ(O,Q)});if(P)return{graphicalItem:B,payload:P}}else if(U==="RadialBar"){var I=(M.data||[]).find(function(Q){return P4(O,Q)});if(I)return{graphicalItem:B,payload:I}}else if(Kg(B,k)||Vg(B,k)||Uf(B,k)){var R=iJ({graphicalItem:B,activeTooltipItem:k,itemData:A.data}),W=A.activeIndex===void 0?R:A.activeIndex;return{graphicalItem:at(at({},B),{},{childIndex:W}),payload:Uf(B,k)?A.data[R]:B.props.data[R]}}}return null}},{key:"render",value:function(){var O=this;if(!HE(this))return null;var S=this.props,T=S.children,k=S.className,D=S.width,F=S.height,B=S.style,M=S.compact,L=S.title,A=S.desc,U=vI(S,Ote),P=gr(U,!1);if(M)return Ie.createElement(Zk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ie.createElement(Fj,Lc({},P,{width:D,height:F,title:L,desc:A}),this.renderClipPath(),KE(T,this.renderMap)));if(this.props.accessibilityLayer){var I,R;P.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,P.role=(R=this.props.role)!==null&&R!==void 0?R:"application",P.onKeyDown=function(Q){O.accessibilityManager.keyboardEvent(Q)},P.onFocus=function(){O.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return Ie.createElement(Zk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ie.createElement("div",Lc({className:jr("recharts-wrapper",k),style:at({position:"relative",cursor:"default",width:D,height:F},B)},W,{ref:function(ge){O.container=ge}}),Ie.createElement(Fj,Lc({},P,{width:D,height:F,title:L,desc:A,style:Gte}),this.renderClipPath(),KE(T,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);Ht(j,"displayName",r),Ht(j,"defaultProps",at({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Ht(j,"getDerivedStateFromProps",function(y,C){var E=y.dataKey,O=y.data,S=y.children,T=y.width,k=y.height,D=y.layout,F=y.stackOffset,B=y.margin,M=C.dataStartIndex,L=C.dataEndIndex;if(C.updateId===void 0){var A=wI(y);return at(at(at({},A),{},{updateId:0},v(at(at({props:y},A),{},{updateId:0}),C)),{},{prevDataKey:E,prevData:O,prevWidth:T,prevHeight:k,prevLayout:D,prevStackOffset:F,prevMargin:B,prevChildren:S})}if(E!==C.prevDataKey||O!==C.prevData||T!==C.prevWidth||k!==C.prevHeight||D!==C.prevLayout||F!==C.prevStackOffset||!Uc(B,C.prevMargin)){var U=wI(y),P={chartX:C.chartX,chartY:C.chartY,isTooltipActive:C.isTooltipActive},I=at(at({},jI(C,O,D)),{},{updateId:C.updateId+1}),R=at(at(at({},U),P),I);return at(at(at({},R),v(at({props:y},R),C)),{},{prevDataKey:E,prevData:O,prevWidth:T,prevHeight:k,prevLayout:D,prevStackOffset:F,prevMargin:B,prevChildren:S})}if(!Mj(S,C.prevChildren)){var W,Q,ge,q,Y=ri(S,dd),z=Y&&(W=(Q=Y.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&W!==void 0?W:M,ee=Y&&(ge=(q=Y.props)===null||q===void 0?void 0:q.endIndex)!==null&&ge!==void 0?ge:L,H=z!==M||ee!==L,re=!pr(O),le=re&&!H?C.updateId:C.updateId+1;return at(at({updateId:le},v(at(at({props:y},C),{},{updateId:le,dataStartIndex:z,dataEndIndex:ee}),C)),{},{prevChildren:S,dataStartIndex:z,dataEndIndex:ee})}return null}),Ht(j,"renderActiveDot",function(y,C,E){var O;return N.isValidElement(y)?O=N.cloneElement(y,C):lr(y)?O=y(C):O=Ie.createElement(gS,C),Ie.createElement(yn,{className:"recharts-active-dot",key:E},O)});var b=N.forwardRef(function(C,E){return Ie.createElement(j,Lc({},C,{ref:E}))});return b.displayName=j.displayName,b},rre=e5({chartName:"LineChart",GraphicalChild:gh,axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:bd}],formatAxisMap:v8}),nre=e5({chartName:"BarChart",GraphicalChild:Hl,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:bd}],formatAxisMap:v8});function t5(e,t){return function(){return e.apply(t,arguments)}}const{toString:are}=Object.prototype,{getPrototypeOf:CS}=Object,{iterator:t0,toStringTag:r5}=Symbol,r0=(e=>t=>{const r=are.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ji=e=>(e=e.toLowerCase(),t=>r0(t)===e),n0=e=>t=>typeof t===e,{isArray:Md}=Array,Yf=n0("undefined");function ire(e){return e!==null&&!Yf(e)&&e.constructor!==null&&!Yf(e.constructor)&&Ma(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const n5=Ji("ArrayBuffer");function sre(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&n5(e.buffer),t}const ore=n0("string"),Ma=n0("function"),a5=n0("number"),a0=e=>e!==null&&typeof e=="object",lre=e=>e===!0||e===!1,Zp=e=>{if(r0(e)!=="object")return!1;const t=CS(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(r5 in e)&&!(t0 in e)},cre=Ji("Date"),dre=Ji("File"),ure=Ji("Blob"),fre=Ji("FileList"),hre=e=>a0(e)&&Ma(e.pipe),pre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ma(e.append)&&((t=r0(e))==="formdata"||t==="object"&&Ma(e.toString)&&e.toString()==="[object FormData]"))},mre=Ji("URLSearchParams"),[gre,xre,yre,vre]=["ReadableStream","Request","Response","Headers"].map(Ji),bre=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xh(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,i;if(typeof e!="object"&&(e=[e]),Md(e))for(a=0,i=e.length;a<i;a++)t.call(null,e[a],a,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length;let d;for(a=0;a<l;a++)d=s[a],t.call(null,e[d],d,e)}}function i5(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,i;for(;a-- >0;)if(i=r[a],t===i.toLowerCase())return i;return null}const Nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,s5=e=>!Yf(e)&&e!==Nl;function Z2(){const{caseless:e}=s5(this)&&this||{},t={},r=(a,i)=>{const s=e&&i5(t,i)||i;Zp(t[s])&&Zp(a)?t[s]=Z2(t[s],a):Zp(a)?t[s]=Z2({},a):Md(a)?t[s]=a.slice():t[s]=a};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&xh(arguments[a],r);return t}const jre=(e,t,r,{allOwnKeys:a}={})=>(xh(t,(i,s)=>{r&&Ma(i)?e[s]=t5(i,r):e[s]=i},{allOwnKeys:a}),e),wre=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Sre=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Nre=(e,t,r,a)=>{let i,s,l;const d={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)l=i[s],(!a||a(l,e,t))&&!d[l]&&(t[l]=e[l],d[l]=!0);e=r!==!1&&CS(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Tre=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},Cre=e=>{if(!e)return null;if(Md(e))return e;let t=e.length;if(!a5(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Are=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&CS(Uint8Array)),Ere=(e,t)=>{const a=(e&&e[t0]).call(e);let i;for(;(i=a.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},Ore=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},_re=Ji("HTMLFormElement"),kre=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,i){return a.toUpperCase()+i}),NI=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ire=Ji("RegExp"),o5=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};xh(r,(i,s)=>{let l;(l=t(i,s,e))!==!1&&(a[s]=l||i)}),Object.defineProperties(e,a)},Dre=e=>{o5(e,(t,r)=>{if(Ma(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(Ma(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Rre=(e,t)=>{const r={},a=i=>{i.forEach(s=>{r[s]=!0})};return Md(e)?a(e):a(String(e).split(t)),r},Pre=()=>{},Mre=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Bre(e){return!!(e&&Ma(e.append)&&e[r5]==="FormData"&&e[t0])}const Fre=e=>{const t=new Array(10),r=(a,i)=>{if(a0(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[i]=a;const s=Md(a)?[]:{};return xh(a,(l,d)=>{const u=r(l,i+1);!Yf(u)&&(s[d]=u)}),t[i]=void 0,s}}return a};return r(e,0)},Lre=Ji("AsyncFunction"),zre=e=>e&&(a0(e)||Ma(e))&&Ma(e.then)&&Ma(e.catch),l5=((e,t)=>e?setImmediate:t?((r,a)=>(Nl.addEventListener("message",({source:i,data:s})=>{i===Nl&&s===r&&a.length&&a.shift()()},!1),i=>{a.push(i),Nl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ma(Nl.postMessage)),$re=typeof queueMicrotask<"u"?queueMicrotask.bind(Nl):typeof process<"u"&&process.nextTick||l5,Ure=e=>e!=null&&Ma(e[t0]),Je={isArray:Md,isArrayBuffer:n5,isBuffer:ire,isFormData:pre,isArrayBufferView:sre,isString:ore,isNumber:a5,isBoolean:lre,isObject:a0,isPlainObject:Zp,isReadableStream:gre,isRequest:xre,isResponse:yre,isHeaders:vre,isUndefined:Yf,isDate:cre,isFile:dre,isBlob:ure,isRegExp:Ire,isFunction:Ma,isStream:hre,isURLSearchParams:mre,isTypedArray:Are,isFileList:fre,forEach:xh,merge:Z2,extend:jre,trim:bre,stripBOM:wre,inherits:Sre,toFlatObject:Nre,kindOf:r0,kindOfTest:Ji,endsWith:Tre,toArray:Cre,forEachEntry:Ere,matchAll:Ore,isHTMLForm:_re,hasOwnProperty:NI,hasOwnProp:NI,reduceDescriptors:o5,freezeMethods:Dre,toObjectSet:Rre,toCamelCase:kre,noop:Pre,toFiniteNumber:Mre,findKey:i5,global:Nl,isContextDefined:s5,isSpecCompliantForm:Bre,toJSONObject:Fre,isAsyncFn:Lre,isThenable:zre,setImmediate:l5,asap:$re,isIterable:Ure};function nr(e,t,r,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),i&&(this.response=i,this.status=i.status?i.status:null)}Je.inherits(nr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Je.toJSONObject(this.config),code:this.code,status:this.status}}});const c5=nr.prototype,d5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{d5[e]={value:e}});Object.defineProperties(nr,d5);Object.defineProperty(c5,"isAxiosError",{value:!0});nr.from=(e,t,r,a,i,s)=>{const l=Object.create(c5);return Je.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError"),nr.call(l,e.message,t,r,a,i),l.cause=e,l.name=e.name,s&&Object.assign(l,s),l};const qre=null;function ew(e){return Je.isPlainObject(e)||Je.isArray(e)}function u5(e){return Je.endsWith(e,"[]")?e.slice(0,-2):e}function TI(e,t,r){return e?e.concat(t).map(function(i,s){return i=u5(i),!r&&s?"["+i+"]":i}).join(r?".":""):t}function Wre(e){return Je.isArray(e)&&!e.some(ew)}const Hre=Je.toFlatObject(Je,{},null,function(t){return/^is[A-Z]/.test(t)});function i0(e,t,r){if(!Je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Je.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,y){return!Je.isUndefined(y[b])});const a=r.metaTokens,i=r.visitor||p,s=r.dots,l=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&Je.isSpecCompliantForm(t);if(!Je.isFunction(i))throw new TypeError("visitor must be a function");function f(j){if(j===null)return"";if(Je.isDate(j))return j.toISOString();if(Je.isBoolean(j))return j.toString();if(!u&&Je.isBlob(j))throw new nr("Blob is not supported. Use a Buffer instead.");return Je.isArrayBuffer(j)||Je.isTypedArray(j)?u&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function p(j,b,y){let C=j;if(j&&!y&&typeof j=="object"){if(Je.endsWith(b,"{}"))b=a?b:b.slice(0,-2),j=JSON.stringify(j);else if(Je.isArray(j)&&Wre(j)||(Je.isFileList(j)||Je.endsWith(b,"[]"))&&(C=Je.toArray(j)))return b=u5(b),C.forEach(function(O,S){!(Je.isUndefined(O)||O===null)&&t.append(l===!0?TI([b],S,s):l===null?b:b+"[]",f(O))}),!1}return ew(j)?!0:(t.append(TI(y,b,s),f(j)),!1)}const m=[],x=Object.assign(Hre,{defaultVisitor:p,convertValue:f,isVisitable:ew});function v(j,b){if(!Je.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(j),Je.forEach(j,function(C,E){(!(Je.isUndefined(C)||C===null)&&i.call(t,C,Je.isString(E)?E.trim():E,b,x))===!0&&v(C,b?b.concat(E):[E])}),m.pop()}}if(!Je.isObject(e))throw new TypeError("data must be an object");return v(e),t}function CI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function AS(e,t){this._pairs=[],e&&i0(e,this,t)}const f5=AS.prototype;f5.append=function(t,r){this._pairs.push([t,r])};f5.toString=function(t){const r=t?function(a){return t.call(this,a,CI)}:CI;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Gre(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function h5(e,t,r){if(!t)return e;const a=r&&r.encode||Gre;Je.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(t,r):s=Je.isURLSearchParams(t)?t.toString():new AS(t,r).toString(a),s){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class AI{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Je.forEach(this.handlers,function(a){a!==null&&t(a)})}}const p5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kre=typeof URLSearchParams<"u"?URLSearchParams:AS,Vre=typeof FormData<"u"?FormData:null,Yre=typeof Blob<"u"?Blob:null,Xre={isBrowser:!0,classes:{URLSearchParams:Kre,FormData:Vre,Blob:Yre},protocols:["http","https","file","blob","url","data"]},ES=typeof window<"u"&&typeof document<"u",tw=typeof navigator=="object"&&navigator||void 0,Qre=ES&&(!tw||["ReactNative","NativeScript","NS"].indexOf(tw.product)<0),Jre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Zre=ES&&window.location.href||"http://localhost",ene=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ES,hasStandardBrowserEnv:Qre,hasStandardBrowserWebWorkerEnv:Jre,navigator:tw,origin:Zre},Symbol.toStringTag,{value:"Module"})),da={...ene,...Xre};function tne(e,t){return i0(e,new da.classes.URLSearchParams,Object.assign({visitor:function(r,a,i,s){return da.isNode&&Je.isBuffer(r)?(this.append(a,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function rne(e){return Je.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function nne(e){const t={},r=Object.keys(e);let a;const i=r.length;let s;for(a=0;a<i;a++)s=r[a],t[s]=e[s];return t}function m5(e){function t(r,a,i,s){let l=r[s++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),u=s>=r.length;return l=!l&&Je.isArray(i)?i.length:l,u?(Je.hasOwnProp(i,l)?i[l]=[i[l],a]:i[l]=a,!d):((!i[l]||!Je.isObject(i[l]))&&(i[l]=[]),t(r,a,i[l],s)&&Je.isArray(i[l])&&(i[l]=nne(i[l])),!d)}if(Je.isFormData(e)&&Je.isFunction(e.entries)){const r={};return Je.forEachEntry(e,(a,i)=>{t(rne(a),i,r,0)}),r}return null}function ane(e,t,r){if(Je.isString(e))try{return(t||JSON.parse)(e),Je.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const yh={transitional:p5,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",i=a.indexOf("application/json")>-1,s=Je.isObject(t);if(s&&Je.isHTMLForm(t)&&(t=new FormData(t)),Je.isFormData(t))return i?JSON.stringify(m5(t)):t;if(Je.isArrayBuffer(t)||Je.isBuffer(t)||Je.isStream(t)||Je.isFile(t)||Je.isBlob(t)||Je.isReadableStream(t))return t;if(Je.isArrayBufferView(t))return t.buffer;if(Je.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return tne(t,this.formSerializer).toString();if((d=Je.isFileList(t))||a.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return i0(d?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),ane(t)):t}],transformResponse:[function(t){const r=this.transitional||yh.transitional,a=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Je.isResponse(t)||Je.isReadableStream(t))return t;if(t&&Je.isString(t)&&(a&&!this.responseType||i)){const l=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(d){if(l)throw d.name==="SyntaxError"?nr.from(d,nr.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:da.classes.FormData,Blob:da.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Je.forEach(["delete","get","head","post","put","patch"],e=>{yh.headers[e]={}});const ine=Je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sne=e=>{const t={};let r,a,i;return e&&e.split(`
`).forEach(function(l){i=l.indexOf(":"),r=l.substring(0,i).trim().toLowerCase(),a=l.substring(i+1).trim(),!(!r||t[r]&&ine[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},EI=Symbol("internals");function Hu(e){return e&&String(e).trim().toLowerCase()}function em(e){return e===!1||e==null?e:Je.isArray(e)?e.map(em):String(e)}function one(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const lne=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function xj(e,t,r,a,i){if(Je.isFunction(a))return a.call(this,t,r);if(i&&(t=r),!!Je.isString(t)){if(Je.isString(a))return t.indexOf(a)!==-1;if(Je.isRegExp(a))return a.test(t)}}function cne(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function dne(e,t){const r=Je.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(i,s,l){return this[a].call(this,t,i,s,l)},configurable:!0})})}let Ba=class{constructor(t){t&&this.set(t)}set(t,r,a){const i=this;function s(d,u,f){const p=Hu(u);if(!p)throw new Error("header name must be a non-empty string");const m=Je.findKey(i,p);(!m||i[m]===void 0||f===!0||f===void 0&&i[m]!==!1)&&(i[m||u]=em(d))}const l=(d,u)=>Je.forEach(d,(f,p)=>s(f,p,u));if(Je.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(Je.isString(t)&&(t=t.trim())&&!lne(t))l(sne(t),r);else if(Je.isObject(t)&&Je.isIterable(t)){let d={},u,f;for(const p of t){if(!Je.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[f=p[0]]=(u=d[f])?Je.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}l(d,r)}else t!=null&&s(r,t,a);return this}get(t,r){if(t=Hu(t),t){const a=Je.findKey(this,t);if(a){const i=this[a];if(!r)return i;if(r===!0)return one(i);if(Je.isFunction(r))return r.call(this,i,a);if(Je.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Hu(t),t){const a=Je.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||xj(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let i=!1;function s(l){if(l=Hu(l),l){const d=Je.findKey(a,l);d&&(!r||xj(a,a[d],d,r))&&(delete a[d],i=!0)}}return Je.isArray(t)?t.forEach(s):s(t),i}clear(t){const r=Object.keys(this);let a=r.length,i=!1;for(;a--;){const s=r[a];(!t||xj(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const r=this,a={};return Je.forEach(this,(i,s)=>{const l=Je.findKey(a,s);if(l){r[l]=em(i),delete r[s];return}const d=t?cne(s):String(s).trim();d!==s&&delete r[s],r[d]=em(i),a[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Je.forEach(this,(a,i)=>{a!=null&&a!==!1&&(r[i]=t&&Je.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(i=>a.set(i)),a}static accessor(t){const a=(this[EI]=this[EI]={accessors:{}}).accessors,i=this.prototype;function s(l){const d=Hu(l);a[d]||(dne(i,l),a[d]=!0)}return Je.isArray(t)?t.forEach(s):s(t),this}};Ba.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Je.reduceDescriptors(Ba.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});Je.freezeMethods(Ba);function yj(e,t){const r=this||yh,a=t||r,i=Ba.from(a.headers);let s=a.data;return Je.forEach(e,function(d){s=d.call(r,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function g5(e){return!!(e&&e.__CANCEL__)}function Bd(e,t,r){nr.call(this,e??"canceled",nr.ERR_CANCELED,t,r),this.name="CanceledError"}Je.inherits(Bd,nr,{__CANCEL__:!0});function x5(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new nr("Request failed with status code "+r.status,[nr.ERR_BAD_REQUEST,nr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function une(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function fne(e,t){e=e||10;const r=new Array(e),a=new Array(e);let i=0,s=0,l;return t=t!==void 0?t:1e3,function(u){const f=Date.now(),p=a[s];l||(l=f),r[i]=u,a[i]=f;let m=s,x=0;for(;m!==i;)x+=r[m++],m=m%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),f-l<t)return;const v=p&&f-p;return v?Math.round(x*1e3/v):void 0}}function hne(e,t){let r=0,a=1e3/t,i,s;const l=(f,p=Date.now())=>{r=p,i=null,s&&(clearTimeout(s),s=null),e.apply(null,f)};return[(...f)=>{const p=Date.now(),m=p-r;m>=a?l(f,p):(i=f,s||(s=setTimeout(()=>{s=null,l(i)},a-m)))},()=>i&&l(i)]}const ig=(e,t,r=3)=>{let a=0;const i=fne(50,250);return hne(s=>{const l=s.loaded,d=s.lengthComputable?s.total:void 0,u=l-a,f=i(u),p=l<=d;a=l;const m={loaded:l,total:d,progress:d?l/d:void 0,bytes:u,rate:f||void 0,estimated:f&&d&&p?(d-l)/f:void 0,event:s,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(m)},r)},OI=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},_I=e=>(...t)=>Je.asap(()=>e(...t)),pne=da.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,da.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(da.origin),da.navigator&&/(msie|trident)/i.test(da.navigator.userAgent)):()=>!0,mne=da.hasStandardBrowserEnv?{write(e,t,r,a,i,s){const l=[e+"="+encodeURIComponent(t)];Je.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Je.isString(a)&&l.push("path="+a),Je.isString(i)&&l.push("domain="+i),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gne(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function xne(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function y5(e,t,r){let a=!gne(t);return e&&(a||r==!1)?xne(e,t):t}const kI=e=>e instanceof Ba?{...e}:e;function Pl(e,t){t=t||{};const r={};function a(f,p,m,x){return Je.isPlainObject(f)&&Je.isPlainObject(p)?Je.merge.call({caseless:x},f,p):Je.isPlainObject(p)?Je.merge({},p):Je.isArray(p)?p.slice():p}function i(f,p,m,x){if(Je.isUndefined(p)){if(!Je.isUndefined(f))return a(void 0,f,m,x)}else return a(f,p,m,x)}function s(f,p){if(!Je.isUndefined(p))return a(void 0,p)}function l(f,p){if(Je.isUndefined(p)){if(!Je.isUndefined(f))return a(void 0,f)}else return a(void 0,p)}function d(f,p,m){if(m in t)return a(f,p);if(m in e)return a(void 0,f)}const u={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(f,p,m)=>i(kI(f),kI(p),m,!0)};return Je.forEach(Object.keys(Object.assign({},e,t)),function(p){const m=u[p]||i,x=m(e[p],t[p],p);Je.isUndefined(x)&&m!==d||(r[p]=x)}),r}const v5=e=>{const t=Pl({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:s,headers:l,auth:d}=t;t.headers=l=Ba.from(l),t.url=h5(y5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(Je.isFormData(r)){if(da.hasStandardBrowserEnv||da.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[f,...p]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([f||"multipart/form-data",...p].join("; "))}}if(da.hasStandardBrowserEnv&&(a&&Je.isFunction(a)&&(a=a(t)),a||a!==!1&&pne(t.url))){const f=i&&s&&mne.read(s);f&&l.set(i,f)}return t},yne=typeof XMLHttpRequest<"u",vne=yne&&function(e){return new Promise(function(r,a){const i=v5(e);let s=i.data;const l=Ba.from(i.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:f}=i,p,m,x,v,j;function b(){v&&v(),j&&j(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function C(){if(!y)return;const O=Ba.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),T={data:!d||d==="text"||d==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:O,config:e,request:y};x5(function(D){r(D),b()},function(D){a(D),b()},T),y=null}"onloadend"in y?y.onloadend=C:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(C)},y.onabort=function(){y&&(a(new nr("Request aborted",nr.ECONNABORTED,e,y)),y=null)},y.onerror=function(){a(new nr("Network Error",nr.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const T=i.transitional||p5;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),a(new nr(S,T.clarifyTimeoutError?nr.ETIMEDOUT:nr.ECONNABORTED,e,y)),y=null},s===void 0&&l.setContentType(null),"setRequestHeader"in y&&Je.forEach(l.toJSON(),function(S,T){y.setRequestHeader(T,S)}),Je.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),d&&d!=="json"&&(y.responseType=i.responseType),f&&([x,j]=ig(f,!0),y.addEventListener("progress",x)),u&&y.upload&&([m,v]=ig(u),y.upload.addEventListener("progress",m),y.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(p=O=>{y&&(a(!O||O.type?new Bd(null,e,y):O),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const E=une(i.url);if(E&&da.protocols.indexOf(E)===-1){a(new nr("Unsupported protocol "+E+":",nr.ERR_BAD_REQUEST,e));return}y.send(s||null)})},bne=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,i;const s=function(f){if(!i){i=!0,d();const p=f instanceof Error?f:this.reason;a.abort(p instanceof nr?p:new Bd(p instanceof Error?p.message:p))}};let l=t&&setTimeout(()=>{l=null,s(new nr(`timeout ${t} of ms exceeded`,nr.ETIMEDOUT))},t);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),e=null)};e.forEach(f=>f.addEventListener("abort",s));const{signal:u}=a;return u.unsubscribe=()=>Je.asap(d),u}},jne=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,i;for(;a<r;)i=a+t,yield e.slice(a,i),a=i},wne=async function*(e,t){for await(const r of Sne(e))yield*jne(r,t)},Sne=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},II=(e,t,r,a)=>{const i=wne(e,t);let s=0,l,d=u=>{l||(l=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:f,value:p}=await i.next();if(f){d(),u.close();return}let m=p.byteLength;if(r){let x=s+=m;r(x)}u.enqueue(new Uint8Array(p))}catch(f){throw d(f),f}},cancel(u){return d(u),i.return()}},{highWaterMark:2})},s0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",b5=s0&&typeof ReadableStream=="function",Nne=s0&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),j5=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Tne=b5&&j5(()=>{let e=!1;const t=new Request(da.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DI=64*1024,rw=b5&&j5(()=>Je.isReadableStream(new Response("").body)),sg={stream:rw&&(e=>e.body)};s0&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!sg[t]&&(sg[t]=Je.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new nr(`Response type '${t}' is not supported`,nr.ERR_NOT_SUPPORT,a)})})})(new Response);const Cne=async e=>{if(e==null)return 0;if(Je.isBlob(e))return e.size;if(Je.isSpecCompliantForm(e))return(await new Request(da.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Je.isArrayBufferView(e)||Je.isArrayBuffer(e))return e.byteLength;if(Je.isURLSearchParams(e)&&(e=e+""),Je.isString(e))return(await Nne(e)).byteLength},Ane=async(e,t)=>{const r=Je.toFiniteNumber(e.getContentLength());return r??Cne(t)},Ene=s0&&(async e=>{let{url:t,method:r,data:a,signal:i,cancelToken:s,timeout:l,onDownloadProgress:d,onUploadProgress:u,responseType:f,headers:p,withCredentials:m="same-origin",fetchOptions:x}=v5(e);f=f?(f+"").toLowerCase():"text";let v=bne([i,s&&s.toAbortSignal()],l),j;const b=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let y;try{if(u&&Tne&&r!=="get"&&r!=="head"&&(y=await Ane(p,a))!==0){let T=new Request(t,{method:"POST",body:a,duplex:"half"}),k;if(Je.isFormData(a)&&(k=T.headers.get("content-type"))&&p.setContentType(k),T.body){const[D,F]=OI(y,ig(_I(u)));a=II(T.body,DI,D,F)}}Je.isString(m)||(m=m?"include":"omit");const C="credentials"in Request.prototype;j=new Request(t,{...x,signal:v,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:C?m:void 0});let E=await fetch(j,x);const O=rw&&(f==="stream"||f==="response");if(rw&&(d||O&&b)){const T={};["status","statusText","headers"].forEach(B=>{T[B]=E[B]});const k=Je.toFiniteNumber(E.headers.get("content-length")),[D,F]=d&&OI(k,ig(_I(d),!0))||[];E=new Response(II(E.body,DI,D,()=>{F&&F(),b&&b()}),T)}f=f||"text";let S=await sg[Je.findKey(sg,f)||"text"](E,e);return!O&&b&&b(),await new Promise((T,k)=>{x5(T,k,{data:S,headers:Ba.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:j})})}catch(C){throw b&&b(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new nr("Network Error",nr.ERR_NETWORK,e,j),{cause:C.cause||C}):nr.from(C,C&&C.code,e,j)}}),nw={http:qre,xhr:vne,fetch:Ene};Je.forEach(nw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const RI=e=>`- ${e}`,One=e=>Je.isFunction(e)||e===null||e===!1,w5={getAdapter:e=>{e=Je.isArray(e)?e:[e];const{length:t}=e;let r,a;const i={};for(let s=0;s<t;s++){r=e[s];let l;if(a=r,!One(r)&&(a=nw[(l=String(r)).toLowerCase()],a===void 0))throw new nr(`Unknown adapter '${l}'`);if(a)break;i[l||"#"+s]=a}if(!a){const s=Object.entries(i).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?s.length>1?`since :
`+s.map(RI).join(`
`):" "+RI(s[0]):"as no adapter specified";throw new nr("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:nw};function vj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bd(null,e)}function PI(e){return vj(e),e.headers=Ba.from(e.headers),e.data=yj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),w5.getAdapter(e.adapter||yh.adapter)(e).then(function(a){return vj(e),a.data=yj.call(e,e.transformResponse,a),a.headers=Ba.from(a.headers),a},function(a){return g5(a)||(vj(e),a&&a.response&&(a.response.data=yj.call(e,e.transformResponse,a.response),a.response.headers=Ba.from(a.response.headers))),Promise.reject(a)})}const S5="1.10.0",o0={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{o0[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const MI={};o0.transitional=function(t,r,a){function i(s,l){return"[Axios v"+S5+"] Transitional option '"+s+"'"+l+(a?". "+a:"")}return(s,l,d)=>{if(t===!1)throw new nr(i(l," has been removed"+(r?" in "+r:"")),nr.ERR_DEPRECATED);return r&&!MI[l]&&(MI[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,l,d):!0}};o0.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function _ne(e,t,r){if(typeof e!="object")throw new nr("options must be an object",nr.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let i=a.length;for(;i-- >0;){const s=a[i],l=t[s];if(l){const d=e[s],u=d===void 0||l(d,s,e);if(u!==!0)throw new nr("option "+s+" must be "+u,nr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new nr("Unknown option "+s,nr.ERR_BAD_OPTION)}}const tm={assertOptions:_ne,validators:o0},ss=tm.validators;let Al=class{constructor(t){this.defaults=t||{},this.interceptors={request:new AI,response:new AI}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{a.stack?s&&!String(a.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+s):a.stack=s}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Pl(this.defaults,r);const{transitional:a,paramsSerializer:i,headers:s}=r;a!==void 0&&tm.assertOptions(a,{silentJSONParsing:ss.transitional(ss.boolean),forcedJSONParsing:ss.transitional(ss.boolean),clarifyTimeoutError:ss.transitional(ss.boolean)},!1),i!=null&&(Je.isFunction(i)?r.paramsSerializer={serialize:i}:tm.assertOptions(i,{encode:ss.function,serialize:ss.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),tm.assertOptions(r,{baseUrl:ss.spelling("baseURL"),withXsrfToken:ss.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=s&&Je.merge(s.common,s[r.method]);s&&Je.forEach(["delete","get","head","post","put","patch","common"],j=>{delete s[j]}),r.headers=Ba.concat(l,s);const d=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(u=u&&b.synchronous,d.unshift(b.fulfilled,b.rejected))});const f=[];this.interceptors.response.forEach(function(b){f.push(b.fulfilled,b.rejected)});let p,m=0,x;if(!u){const j=[PI.bind(this),void 0];for(j.unshift.apply(j,d),j.push.apply(j,f),x=j.length,p=Promise.resolve(r);m<x;)p=p.then(j[m++],j[m++]);return p}x=d.length;let v=r;for(m=0;m<x;){const j=d[m++],b=d[m++];try{v=j(v)}catch(y){b.call(this,y);break}}try{p=PI.call(this,v)}catch(j){return Promise.reject(j)}for(m=0,x=f.length;m<x;)p=p.then(f[m++],f[m++]);return p}getUri(t){t=Pl(this.defaults,t);const r=y5(t.baseURL,t.url,t.allowAbsoluteUrls);return h5(r,t.params,t.paramsSerializer)}};Je.forEach(["delete","get","head","options"],function(t){Al.prototype[t]=function(r,a){return this.request(Pl(a||{},{method:t,url:r,data:(a||{}).data}))}});Je.forEach(["post","put","patch"],function(t){function r(a){return function(s,l,d){return this.request(Pl(d||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}Al.prototype[t]=r(),Al.prototype[t+"Form"]=r(!0)});let kne=class N5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const a=this;this.promise.then(i=>{if(!a._listeners)return;let s=a._listeners.length;for(;s-- >0;)a._listeners[s](i);a._listeners=null}),this.promise.then=i=>{let s;const l=new Promise(d=>{a.subscribe(d),s=d}).then(i);return l.cancel=function(){a.unsubscribe(s)},l},t(function(s,l,d){a.reason||(a.reason=new Bd(s,l,d),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new N5(function(i){t=i}),cancel:t}}};function Ine(e){return function(r){return e.apply(null,r)}}function Dne(e){return Je.isObject(e)&&e.isAxiosError===!0}const aw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(aw).forEach(([e,t])=>{aw[t]=e});function T5(e){const t=new Al(e),r=t5(Al.prototype.request,t);return Je.extend(r,Al.prototype,t,{allOwnKeys:!0}),Je.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return T5(Pl(e,i))},r}const Yt=T5(yh);Yt.Axios=Al;Yt.CanceledError=Bd;Yt.CancelToken=kne;Yt.isCancel=g5;Yt.VERSION=S5;Yt.toFormData=i0;Yt.AxiosError=nr;Yt.Cancel=Yt.CanceledError;Yt.all=function(t){return Promise.all(t)};Yt.spread=Ine;Yt.isAxiosError=Dne;Yt.mergeConfig=Pl;Yt.AxiosHeaders=Ba;Yt.formToJSON=e=>m5(Je.isHTMLForm(e)?new FormData(e):e);Yt.getAdapter=w5.getAdapter;Yt.HttpStatusCode=aw;Yt.default=Yt;const{Axios:Phe,AxiosError:Mhe,CanceledError:Bhe,isCancel:Fhe,CancelToken:Lhe,VERSION:zhe,all:$he,Cancel:Uhe,isAxiosError:qhe,spread:Whe,toFormData:Hhe,AxiosHeaders:Ghe,HttpStatusCode:Khe,formToJSON:Vhe,getAdapter:Yhe,mergeConfig:Xhe}=Yt,Gu=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Rne=()=>{const[e,t]=N.useState(!0),[r,a]=N.useState(""),[i,s]=N.useState("overview"),[l,d]=N.useState({totalOrders:0,totalRevenue:0,counterOrders:0,staffOrders:0,guestOrders:0,regularOrders:0,counterRevenue:0,staffRevenue:0,guestRevenue:0,regularRevenue:0,totalUsers:0,todayOrders:0,todayRevenue:0}),[u,f]=N.useState([]),[p,m]=N.useState([]),[x,v]=N.useState([]),[j,b]=N.useState([]),[y,C]=N.useState([]),[E,O]=N.useState([]),[S,T]=N.useState(""),[k,D]=N.useState("all"),[F,B]=N.useState("all"),[M,L]=N.useState("all"),[A,U]=N.useState("date"),[P,I]=N.useState("desc"),[R,W]=N.useState(1),[Q,ge]=N.useState(1),q=10,[Y,z]=N.useState(null),[ee,H]=N.useState(!1);N.useEffect(()=>{re()},[]),N.useEffect(()=>{Se()},[x,j,S,k,F,M,A,P,i]),N.useEffect(()=>{K()},[y,R]);const re=async()=>{var Ce;t(!0),a("");try{const[Le,ne,Ae,Ve]=await Promise.allSettled([Gu.get("/counter-order/orders"),Gu.get("/staff-order"),Gu.get("/user-auth"),Gu.get("/branch")]),te=await Gu.get("/order",{params:{limit:1e3,sortBy:"createdAt",sortOrder:"desc"}}),ce=Le.status==="fulfilled"?Le.value.data:{orders:[]},X=ne.status==="fulfilled"?ne.value.data:{orders:[]},se=Ae.status==="fulfilled"?Ae.value.data:[],J=Ve.status==="fulfilled"?Ve.value.data:[],Ne=((Ce=ce.orders)==null?void 0:Ce.map(Oe=>{var Qe,ht,Pt;return{id:Oe.id,type:"counter",orderId:((Qe=Oe.invoice)==null?void 0:Qe.invoiceNumber)||Oe.id,customer:Oe.customerName||"Unknown Customer",staff:((ht=Oe.userId)==null?void 0:ht.name)||"Unknown Counter User",date:new Date(Oe.createdAt),dateString:new Date(Oe.createdAt).toLocaleDateString(),branch:((Pt=Oe.branch)==null?void 0:Pt.name)||"Unknown Branch",amount:Oe.grandTotal||Oe.totalAmount||0,status:Oe.orderStatus||"pending",paymentStatus:Oe.paymentStatus||"pending",paymentMethod:Oe.paymentMethod||"cash",items:Oe.items||[],subtotal:Oe.subtotal||0,tax:Oe.tax||0,serviceCharge:Oe.serviceCharge||0,isGuestOrder:!0,originalOrder:Oe}}))||[],Ge=[],$e=(te.data.orders||te.data.data||[]).map(Oe=>{var Qe,ht;return{id:Oe._id,type:"online",orderId:Oe.orderNumber,customer:Oe.name,staff:((Qe=Oe.userId)==null?void 0:Qe.name)||"Online Order",date:new Date(Oe.createdAt),dateString:new Date(Oe.createdAt).toLocaleDateString(),branch:((ht=Oe.branchId)==null?void 0:ht.name)||"Online",amount:Oe.total||0,status:Oe.status||"pending",paymentStatus:Oe.paymentStatus||"completed",paymentMethod:Oe.paymentMethod||"online",items:Oe.items||[],subtotal:Oe.subtotal||0,tax:Oe.tax||0,serviceCharge:0,discount:Oe.discount||0,deliveryFee:Oe.deliveryFee||0,phone:Oe.phone||"",email:Oe.email||"",deliveryOption:Oe.deliveryOption||"delivery",deliveryAddress:Oe.deliveryAddress||"",specialInstructions:Oe.specialInstructions||"",isGuestOrder:!0,originalOrder:Oe}}),Ze=[...Ne,...Ge,...$e];v(Ze),b(Ze),le(Ze,se.users||se||[],null),pe(Ze)}catch(Le){console.error("Error fetching dashboard data:",Le),a("Failed to load dashboard data. Please refresh the page and try again.")}finally{t(!1)}},le=(Ce,Le,ne)=>{const Ae=new Date().toDateString(),Ve=Array.isArray(Ce)?Ce:[],te=Array.isArray(Le)?Le:[],ce=Ve.filter(Oe=>Oe.type==="counter"),X=Ve.filter(Oe=>Oe.type==="Staff Order"),se=Ve.filter(Oe=>Oe.type==="Guest Order"),J=Ve.filter(Oe=>Oe.type==="online"),Ne=Ve.filter(Oe=>Oe.date&&Oe.date.toDateString()===Ae),Ge=ce.length+X.length+se.length+J.length,tt=ce.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0)+X.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0)+se.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0)+J.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0),$e=Ne.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0),Ze={totalOrders:Ge,totalRevenue:tt,counterOrders:ce.length,staffOrders:X.length,guestOrders:se.length,regularOrders:J.length,counterRevenue:ce.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0),staffRevenue:X.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0),guestRevenue:se.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0),regularRevenue:J.reduce((Oe,Qe)=>Oe+(Qe.amount||0),0),totalUsers:te.length,todayOrders:Ne.length,todayRevenue:$e};d(Ze)},pe=Ce=>{const Le=Array.isArray(Ce)?Ce:[],ne={},Ae=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Le.forEach(ce=>{if(ce.date&&ce.date.getMonth){const X=Ae[ce.date.getMonth()];ne[X]||(ne[X]={month:X,revenue:0,orders:0}),ne[X].revenue+=ce.amount||0,ne[X].orders+=1}});const Ve=Object.values(ne);m(Ve);const te=[{name:"Counter Orders",revenue:Le.filter(ce=>ce.type==="counter").reduce((ce,X)=>ce+(X.amount||0),0),orders:Le.filter(ce=>ce.type==="counter").length},{name:"Staff Orders",revenue:Le.filter(ce=>ce.type==="Staff Order").reduce((ce,X)=>ce+(X.amount||0),0),orders:Le.filter(ce=>ce.type==="Staff Order").length},{name:"Guest Orders",revenue:Le.filter(ce=>ce.type==="Guest Order").reduce((ce,X)=>ce+(X.amount||0),0),orders:Le.filter(ce=>ce.type==="Guest Order").length},{name:"Online Orders",revenue:Le.filter(ce=>ce.type==="online").reduce((ce,X)=>ce+(X.amount||0),0),orders:Le.filter(ce=>ce.type==="online").length}];f(te)},Se=()=>{let Ce=i==="orders"?x:j;if(S.trim()){const Le=S.toLowerCase();Ce=Ce.filter(ne=>ne.orderId.toLowerCase().includes(Le)||ne.customer.toLowerCase().includes(Le)||ne.staff.toLowerCase().includes(Le)||ne.branch.toLowerCase().includes(Le))}if(F!=="all"&&(Ce=Ce.filter(Le=>Le.type===F)),M!=="all"&&(Ce=Ce.filter(Le=>Le.status===M)),k!=="all"){const Le=new Date,ne=new Date;switch(k){case"today":Ce=Ce.filter(Ae=>Ae.date.toDateString()===Le.toDateString());break;case"week":ne.setDate(Le.getDate()-7),Ce=Ce.filter(Ae=>Ae.date>=ne);break;case"month":ne.setMonth(Le.getMonth()-1),Ce=Ce.filter(Ae=>Ae.date>=ne);break}}Ce.sort((Le,ne)=>A==="date"?P==="asc"?Le.date-ne.date:ne.date-Le.date:A==="amount"?P==="asc"?Le.amount-ne.amount:ne.amount-Le.amount:0),C(Ce),ge(Math.ceil(Ce.length/q)),W(1)},K=()=>{const Ce=(R-1)*q,Le=Ce+q;O(y.slice(Ce,Le))},ue=Ce=>{A===Ce?I(P==="asc"?"desc":"asc"):(U(Ce),I("desc"))},ye=Ce=>{z(Ce),H(!0)},fe=Ce=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Ce),Xe=Ce=>{switch(Ce==null?void 0:Ce.toLowerCase()){case"card":return n.jsx(Na,{size:16});case"upi":return n.jsx(hf,{size:16});case"online":return n.jsx(Na,{size:16});default:return n.jsx(Ws,{size:16})}};return e?n.jsxs("div",{className:"dashboard-loading",children:[n.jsx(Ra,{size:32,className:"animate-spin"}),n.jsx("p",{children:"Loading dashboard..."})]}):n.jsxs("div",{className:"comprehensive-dashboard",children:[r&&n.jsx("div",{className:"error-banner",children:n.jsx("span",{children:r})}),n.jsx("div",{className:"dashboard-header",children:n.jsx("h1",{children:"Dashboard"})}),n.jsxs("div",{className:"tab-navigation",children:[n.jsx("button",{className:`tab-btn ${i==="overview"?"active":""}`,onClick:()=>s("overview"),children:"Overview"}),n.jsx("button",{className:`tab-btn ${i==="orders"?"active":""}`,onClick:()=>s("orders"),children:"All Orders"}),n.jsx("button",{className:`tab-btn ${i==="payments"?"active":""}`,onClick:()=>s("payments"),children:"All Payments"})]}),i==="overview"&&n.jsxs("div",{className:"overview-content",children:[n.jsxs("div",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-card primary",children:[n.jsx("div",{className:"stat-icon",children:n.jsx(H7,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:l.totalOrders.toLocaleString()}),n.jsx("p",{children:"Total Orders"}),n.jsx("div",{className:"stat-breakdown",children:n.jsxs("span",{children:["Today: ",l.todayOrders]})})]})]}),n.jsxs("div",{className:"stat-card success",children:[n.jsx("div",{className:"stat-icon",children:n.jsx(Ws,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:fe(l.totalRevenue)}),n.jsx("p",{children:"Total Revenue"}),n.jsx("div",{className:"stat-breakdown",children:n.jsxs("span",{children:["Today: ",fe(l.todayRevenue)]})})]})]}),n.jsxs("div",{className:"stat-card info",children:[n.jsx("div",{className:"stat-icon",children:n.jsx(Ls,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:l.totalUsers.toLocaleString()}),n.jsx("p",{children:"Total Users"})]})]})]}),n.jsxs("div",{className:"breakdown-grid",children:[n.jsxs("div",{className:"breakdown-card",children:[n.jsx("h3",{children:"Counter Orders"}),n.jsxs("div",{className:"breakdown-stats",children:[n.jsx("div",{className:"breakdown-number",children:l.counterOrders}),n.jsx("div",{className:"breakdown-revenue",children:fe(l.counterRevenue)})]})]}),n.jsxs("div",{className:"breakdown-card",children:[n.jsx("h3",{children:"Staff Orders"}),n.jsxs("div",{className:"breakdown-stats",children:[n.jsx("div",{className:"breakdown-number",children:l.staffOrders}),n.jsx("div",{className:"breakdown-revenue",children:fe(l.staffRevenue)})]})]}),n.jsxs("div",{className:"breakdown-card",children:[n.jsx("h3",{children:"Guest Orders"}),n.jsxs("div",{className:"breakdown-stats",children:[n.jsx("div",{className:"breakdown-number",children:l.guestOrders}),n.jsx("div",{className:"breakdown-revenue",children:fe(l.guestRevenue)})]})]}),n.jsxs("div",{className:"breakdown-card",children:[n.jsx("h3",{children:"Online Orders"}),n.jsxs("div",{className:"breakdown-stats",children:[n.jsx("div",{className:"breakdown-number",children:l.regularOrders}),n.jsx("div",{className:"breakdown-revenue",children:fe(l.regularRevenue)})]})]})]}),n.jsxs("div",{className:"charts-grid",children:[n.jsxs("div",{className:"chart-card",children:[n.jsx("div",{className:"chart-header",children:n.jsx("h3",{children:"Monthly Revenue Trend"})}),n.jsx("div",{className:"chart-container",children:n.jsx(m6,{width:"100%",height:300,children:n.jsxs(rre,{data:p,children:[n.jsx($2,{strokeDasharray:"3 3"}),n.jsx(yd,{dataKey:"month"}),n.jsx(bd,{}),n.jsx(Li,{formatter:Ce=>[fe(Ce),"Revenue"]}),n.jsx(gh,{type:"monotone",dataKey:"revenue",stroke:"#FF7E47",strokeWidth:2})]})})})]}),n.jsxs("div",{className:"chart-card",children:[n.jsx("div",{className:"chart-header",children:n.jsx("h3",{children:"Revenue by Type"})}),n.jsx("div",{className:"chart-container",children:n.jsx(m6,{width:"100%",height:300,children:n.jsxs(nre,{data:u,children:[n.jsx($2,{strokeDasharray:"3 3"}),n.jsx(yd,{dataKey:"name"}),n.jsx(bd,{}),n.jsx(Li,{formatter:Ce=>[fe(Ce),"Revenue"]}),n.jsx(Hl,{dataKey:"revenue",fill:"#FF7E47"})]})})})]})]})]}),(i==="orders"||i==="payments")&&n.jsxs("div",{className:"data-content",children:[n.jsxs("div",{className:"filters-section",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by order ID, customer, or branch...",className:"search-input",value:S,onChange:Ce=>T(Ce.target.value)})]}),n.jsxs("div",{className:"filter-controls",children:[n.jsxs("select",{className:"filter-select",value:F,onChange:Ce=>B(Ce.target.value),children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"counter",children:"Counter"}),n.jsx("option",{value:"Staff Order",children:"Staff"}),n.jsx("option",{value:"Guest Order",children:"Guest"}),n.jsx("option",{value:"online",children:"Online"})]}),n.jsxs("select",{className:"filter-select",value:M,onChange:Ce=>L(Ce.target.value),children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]}),n.jsxs("select",{className:"filter-select",value:k,onChange:Ce=>D(Ce.target.value),children:[n.jsx("option",{value:"all",children:"All Time"}),n.jsx("option",{value:"today",children:"Today"}),n.jsx("option",{value:"week",children:"This Week"}),n.jsx("option",{value:"month",children:"This Month"})]})]})]}),n.jsx("div",{className:"data-table-container",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Order ID"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Order By"}),n.jsx("th",{className:"sortable-header",onClick:()=>ue("date"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Date"}),A==="date"&&(P==="asc"?n.jsx($o,{size:16}):n.jsx(zo,{size:16}))]})}),n.jsx("th",{children:"Branch"}),n.jsx("th",{className:"sortable-header",onClick:()=>ue("amount"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Amount"}),A==="amount"&&(P==="asc"?n.jsx($o,{size:16}):n.jsx(zo,{size:16}))]})}),i==="orders"&&n.jsx("th",{children:"Status"}),i==="payments"&&n.jsx("th",{children:"Payment Method"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:E.length>0?E.map(Ce=>n.jsxs("tr",{children:[n.jsx("td",{children:Ce.orderId}),n.jsx("td",{children:Ce.type==="Staff Order"||Ce.type==="Guest Order"?Ce.type:Ce.type.charAt(0).toUpperCase()+Ce.type.slice(1)+" Order"}),n.jsx("td",{children:Ce.customer}),n.jsx("td",{children:Ce.dateString}),n.jsx("td",{children:Ce.branch}),n.jsxs("td",{children:["",Ce.amount.toFixed(2)]}),i==="orders"&&n.jsx("td",{children:n.jsx("span",{className:`status-badge ${Ce.status}`,children:Ce.status.charAt(0).toUpperCase()+Ce.status.slice(1)})}),i==="payments"&&n.jsx("td",{children:n.jsxs("div",{className:"payment-method",children:[Xe(Ce.paymentMethod),n.jsx("span",{children:Ce.paymentMethod.charAt(0).toUpperCase()+Ce.paymentMethod.slice(1)})]})}),n.jsx("td",{children:n.jsxs("button",{className:"action-btn view",onClick:()=>ye(Ce),children:[n.jsx(Xi,{size:16}),"View"]})})]},`${Ce.type}-${Ce.id}`)):n.jsx("tr",{children:n.jsxs("td",{colSpan:"8",className:"no-data",children:["No ",i," found matching your criteria"]})})})]})}),Q>1&&n.jsxs("div",{className:"pagination",children:[n.jsxs("button",{className:"pagination-btn",onClick:()=>W(Ce=>Math.max(Ce-1,1)),disabled:R===1,children:[n.jsx(ih,{size:16}),"Previous"]}),n.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.min(5,Q)},(Ce,Le)=>{let ne;return Q<=5||R<=3?ne=Le+1:R>=Q-2?ne=Q-4+Le:ne=R-2+Le,n.jsx("button",{className:`pagination-page ${R===ne?"active":""}`,onClick:()=>W(ne),children:ne},ne)})}),n.jsxs("button",{className:"pagination-btn",onClick:()=>W(Ce=>Math.min(Ce+1,Q)),disabled:R===Q,children:["Next",n.jsx(sh,{size:16})]})]})]}),ee&&Y&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{children:[Y.type==="Staff Order"||Y.type==="Guest Order"?Y.type:Y.type.charAt(0).toUpperCase()+Y.type.slice(1)," ",i==="orders"?"Order":"Payment"," Details"]}),n.jsx("button",{className:"modal-close",onClick:()=>H(!1),children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"details-grid",children:[n.jsxs("div",{className:"detail-section",children:[n.jsx("h4",{children:"Basic Information"}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Order ID:"}),n.jsx("span",{className:"detail-value",children:Y.orderId})]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Type:"}),n.jsx("span",{className:"detail-value",children:Y.type})]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Customer:"}),n.jsx("span",{className:"detail-value",children:Y.customer})]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Date:"}),n.jsx("span",{className:"detail-value",children:Y.date.toLocaleString()})]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Branch:"}),n.jsx("span",{className:"detail-value",children:Y.branch})]}),Y.tableNumber&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Table:"}),n.jsx("span",{className:"detail-value",children:Y.tableNumber})]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h4",{children:"Payment Information"}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Subtotal:"}),n.jsxs("span",{className:"detail-value",children:["",Y.subtotal.toFixed(2)]})]}),Y.discount>0&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Discount:"}),n.jsxs("span",{className:"detail-value",style:{color:"#22c55e"},children:["-",Y.discount.toFixed(2)]})]}),Y.tax>0&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Tax:"}),n.jsxs("span",{className:"detail-value",children:["",Y.tax.toFixed(2)]})]}),Y.type!=="online"&&Y.serviceCharge>0&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Service Charge:"}),n.jsxs("span",{className:"detail-value",children:["",Y.serviceCharge.toFixed(2)]})]}),Y.deliveryFee>0&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Delivery Fee:"}),n.jsxs("span",{className:"detail-value",children:["",Y.deliveryFee.toFixed(2)]})]}),n.jsxs("div",{className:"detail-row total",children:[n.jsx("span",{className:"detail-label",children:"Total Amount:"}),n.jsxs("span",{className:"detail-value",children:["",Y.amount.toFixed(2)]})]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Payment Method:"}),n.jsx("span",{className:"detail-value",children:n.jsxs("div",{className:"payment-method",children:[Xe(Y.paymentMethod),Y.paymentMethod]})})]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Payment Status:"}),n.jsx("span",{className:"detail-value",children:n.jsx("span",{className:`status-badge ${Y.paymentStatus}`,children:Y.paymentStatus})})]}),Y.type==="online"&&Y.phone&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Phone:"}),n.jsx("span",{className:"detail-value",children:Y.phone})]}),Y.type==="online"&&Y.email&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Email:"}),n.jsx("span",{className:"detail-value",children:Y.email})]}),Y.type==="online"&&Y.deliveryAddress&&n.jsxs("div",{className:"detail-row",children:[n.jsx("span",{className:"detail-label",children:"Delivery Address:"}),n.jsx("span",{className:"detail-value",children:Y.deliveryAddress})]})]})]}),Y.items&&Y.items.length>0&&n.jsxs("div",{className:"items-section",children:[n.jsx("h4",{children:"Order Items"}),n.jsxs("table",{className:"items-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:Y.items.map((Ce,Le)=>n.jsxs("tr",{children:[n.jsx("td",{children:Ce.name}),n.jsx("td",{children:Ce.quantity}),n.jsxs("td",{children:["",Ce.price.toFixed(2)]}),n.jsxs("td",{children:["",(Ce.quantity*Ce.price).toFixed(2)]})]},Le))})]})]})]}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-outline",onClick:()=>H(!1),children:"Close"})})]})}),n.jsx("style",{jsx:!0,children:`
        .comprehensive-dashboard {
          padding: 20px;
          max-width: 1400px;
          margin: 0 auto;
        }

        .dashboard-loading {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          height: 400px;
          gap: 16px;
        }

        .error-banner {
          background-color: #fee2e2;
          color: #dc2626;
          padding: 12px 16px;
          border-radius: 8px;
          margin-bottom: 20px;
        }

        .dashboard-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 24px;
        }

        .dashboard-header h1 {
          font-size: 28px;
          font-weight: 700;
          color: #1f2937;
          margin: 0;
        }

        .btn {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px 16px;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
        }

        .btn-outline {
          background: white;
          border: 1px solid #d1d5db;
          color: #374151;
        }

        .btn-outline:hover {
          background: #f9fafb;
        }

        .tab-navigation {
          display: flex;
          gap: 4px;
          margin-bottom: 24px;
          border-bottom: 1px solid #e5e7eb;
        }

        .tab-btn {
          padding: 12px 24px;
          background: none;
          border: none;
          font-weight: 500;
          color: #6b7280;
          cursor: pointer;
          border-bottom: 2px solid transparent;
          transition: all 0.2s;
        }

        .tab-btn.active {
          color: #ff7e47;
          border-bottom-color: #ff7e47;
        }

        .tab-btn:hover {
          color: #374151;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
          margin-bottom: 32px;
        }

        .stat-card {
          background: white;
          padding: 24px;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          display: flex;
          align-items: center;
          gap: 16px;
        }

        .stat-icon {
          width: 48px;
          height: 48px;
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
        }

        .stat-card.primary .stat-icon { background: #3b82f6; }
        .stat-card.success .stat-icon { background: #10b981; }
        .stat-card.info .stat-icon { background: #6366f1; }

        .stat-content h3 {
          font-size: 24px;
          font-weight: 700;
          margin: 0 0 4px 0;
          color: #1f2937;
        }

        .stat-content p {
          font-size: 14px;
          color: #6b7280;
          margin: 0 0 8px 0;
        }

        .stat-breakdown {
          font-size: 12px;
          color: #9ca3af;
        }

        .breakdown-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 16px;
          margin-bottom: 32px;
        }

        .breakdown-card {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          text-align: center;
        }

        .breakdown-card h3 {
          font-size: 16px;
          font-weight: 600;
          margin: 0 0 12px 0;
          color: #374151;
        }

        .breakdown-number {
          font-size: 24px;
          font-weight: 700;
          color: #1f2937;
        }

        .breakdown-revenue {
          font-size: 14px;
          color: #10b981;
          font-weight: 500;
        }

        .charts-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
          gap: 24px;
          margin-bottom: 32px;
        }

        .chart-card {
          background: white;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          overflow: hidden;
        }

        .chart-header {
          padding: 20px 24px 0 24px;
        }

        .chart-header h3 {
          font-size: 18px;
          font-weight: 600;
          margin: 0;
          color: #1f2937;
        }

        .chart-container {
          padding: 20px;
        }

        .filters-section {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          margin-bottom: 20px;
          display: flex;
          gap: 16px;
          flex-wrap: wrap;
          align-items: center;
        }

        .search-container {
          position: relative;
          flex: 1;
          min-width: 300px;
        }

        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #9ca3af;
        }

        .search-input {
          width: 100%;
          padding: 10px 12px 10px 40px;
          border: 1px solid #d1d5db;
          border-radius: 6px;
          font-size: 14px;
        }

        .filter-controls {
          display: flex;
          gap: 12px;
          flex-wrap: wrap;
        }

        .filter-select {
          padding: 8px 12px;
          border: 1px solid #d1d5db;
          border-radius: 6px;
          font-size: 14px;
          background: white;
        }

        .data-table-container {
          background: white;
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          margin-bottom: 20px;
        }

        .data-table {
          width: 100%;
          border-collapse: collapse;
        }

        .data-table th {
          background: #f9fafb;
          padding: 12px;
          text-align: left;
          font-weight: 600;
          color: #374151;
          border-bottom: 1px solid #e5e7eb;
        }

        .data-table td {
          padding: 12px;
          border-bottom: 1px solid #f3f4f6;
        }

        .sortable-header {
          cursor: pointer;
          user-select: none;
        }

        .sort-header {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .status-badge {
          display: inline-block;
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
        }

        .status-badge.pending { background: #fef3c7; color: #92400e; }
        .status-badge.processing { background: #dbeafe; color: #1e40af; }
        .status-badge.completed { background: #d1fae5; color: #065f46; }
        .status-badge.cancelled { background: #fee2e2; color: #991b1b; }

        .payment-method {
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .action-btn {
          display: flex;
          align-items: center;
          gap: 4px;
          padding: 6px 12px;
          background: #f3f4f6;
          border: none;
          border-radius: 4px;
          font-size: 12px;
          cursor: pointer;
          transition: background 0.2s;
        }

        .action-btn:hover {
          background: #e5e7eb;
        }

        .action-btn.view {
          background: #dbeafe;
          color: #1e40af;
        }

        .action-btn.view:hover {
          background: #bfdbfe;
        }

        .no-data {
          text-align: center;
          padding: 40px;
          color: #6b7280;
        }

        .pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 8px;
          margin-top: 20px;
        }

        .pagination-btn {
          display: flex;
          align-items: center;
          gap: 4px;
          padding: 8px 12px;
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 6px;
          cursor: pointer;
          transition: background 0.2s;
        }

        .pagination-btn:hover:not(:disabled) {
          background: #f9fafb;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-pages {
          display: flex;
          gap: 4px;
        }

        .pagination-page {
          padding: 8px 12px;
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.2s;
        }

        .pagination-page:hover {
          background: #f9fafb;
        }

        .pagination-page.active {
          background: #ff7e47;
          color: white;
          border-color: #ff7e47;
        }

        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        }

        .modal {
          background: white;
          border-radius: 12px;
          max-width: 800px;
          width: 90%;
          max-height: 90vh;
          overflow: hidden;
          display: flex;
          flex-direction: column;
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 20px 24px;
          border-bottom: 1px solid #e5e7eb;
        }

        .modal-header h3 {
          margin: 0;
          font-size: 18px;
          font-weight: 600;
        }

        .modal-close {
          background: none;
          border: none;
          font-size: 24px;
          cursor: pointer;
          color: #6b7280;
        }

        .modal-body {
          padding: 24px;
          overflow-y: auto;
        }

        .details-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 24px;
          margin-bottom: 24px;
        }

        .detail-section h4 {
          margin: 0 0 16px 0;
          font-size: 16px;
          font-weight: 600;
          color: #1f2937;
        }

        .detail-row {
          display: flex;
          margin-bottom: 8px;
        }

        .detail-row.total {
          font-weight: 600;
          border-top: 1px solid #e5e7eb;
          padding-top: 8px;
          margin-top: 8px;
        }

        .detail-label {
          width: 140px;
          color: #6b7280;
          font-weight: 500;
        }

        .detail-value {
          flex: 1;
          color: #1f2937;
        }

        .items-section {
          margin-top: 24px;
        }

        .items-section h4 {
          margin: 0 0 16px 0;
          font-size: 16px;
          font-weight: 600;
          color: #1f2937;
        }

        .items-table {
          width: 100%;
          border-collapse: collapse;
          border: 1px solid #e5e7eb;
          border-radius: 6px;
          overflow: hidden;
        }

        .items-table th {
          background: #f9fafb;
          padding: 12px;
          text-align: left;
          font-weight: 600;
          color: #374151;
        }

        .items-table td {
          padding: 12px;
          border-top: 1px solid #f3f4f6;
        }

        .modal-footer {
          padding: 16px 24px;
          border-top: 1px solid #e5e7eb;
          display: flex;
          justify-content: flex-end;
        }

        @media (max-width: 768px) {
          .comprehensive-dashboard {
            padding: 16px;
          }

          .dashboard-header {
            flex-direction: column;
            gap: 16px;
            align-items: flex-start;
          }

          .filters-section {
            flex-direction: column;
            align-items: stretch;
          }

          .search-container {
            min-width: auto;
          }

          .filter-controls {
            justify-content: stretch;
          }

          .filter-select {
            flex: 1;
          }

          .details-grid {
            grid-template-columns: 1fr;
          }

          .charts-grid {
            grid-template-columns: 1fr;
          }

          .data-table {
            font-size: 14px;
          }

          .data-table th,
          .data-table td {
            padding: 8px;
          }
        }

        .animate-spin {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
      `})]})},Pne=async e=>{const t=e.headers.get("content-type");if(!t||!t.includes("application/json")){const r=await e.text();throw new Error(`Expected JSON but received ${t||"unknown content type"}. Response: ${r.substring(0,200)}`)}try{return await e.json()}catch(r){throw new Error(`Failed to parse JSON: ${r.message}`)}},Mne=async(e,t={})=>{try{const r=await fetch(e,t);if(!r.ok){const a=r.headers.get("content-type");if(a&&a.includes("application/json")){const s=await r.json();throw console.error("Backend error response:",s),new Error(s.message||`HTTP ${r.status}: ${r.statusText}`)}const i=await r.text();throw console.error("Backend error text:",i),new Error(`HTTP ${r.status}: ${i.substring(0,200)}`)}return await Pne(r)}catch(r){throw r.message.includes("Failed to fetch")?new Error(`Network error: Unable to reach ${e}. Please check your connection.`):r}},Bne=()=>{const e="https://hotelvirat.com/api/v1/hotel",t="https://hotelvirat.com/api/v1/hotel";return console.log(" Using backends:",{primary:e,secondary:t,mode:"production"}),[e,t]},yr=async(e,t={},r=!1)=>{var l;const a=Bne(),[i]=a,s=t.method||"GET";(s==="POST"||s==="PUT")&&t.body&&!((l=t.headers)!=null&&l["Content-Type"])&&(t.body instanceof FormData||(t.headers={...t.headers,"Content-Type":"application/json"}));try{const d=`${i}${e}`;console.log(` ${s} ${d}`),console.log(` Endpoint: "${e}"`),console.log(` Primary URL: "${i}"`);const u=await Mne(d,t),f=u.menuItem||u.category||u.data||u;return console.log(` ${s} successful`),f}catch(d){throw console.error(` ${s} failed:`,d.message),d.message.includes("400")&&(console.error("400 Bad Request - likely validation error"),console.error("Full error:",d)),d}},Fne=()=>{var O;const[e,t]=N.useState([]),[r,a]=N.useState(!0),[i,s]=N.useState("all"),[l,d]=N.useState("all"),[u,f]=N.useState(null),[p,m]=N.useState(null);N.useEffect(()=>{JSON.parse(localStorage.getItem("user")||"{}");const S=localStorage.getItem("categoryAccess");console.log(" Orders Component Loaded - Build Version: 2026-01-05-v2"),console.log("User category access:",S),m(S),x();const T=setInterval(x,3e4);return()=>clearInterval(T)},[]);const x=async()=>{try{console.log(" Fetching orders from mobile app only...");const S=A=>{var R,W,Q;const U=((R=A.categoryName)==null?void 0:R.toLowerCase().trim())||"";if(U){if(U.includes("temple")||U.includes("meal"))return"temple";if(U.includes("self")||U.includes("service"))return"self-service";if(U.includes("restaurant"))return"restaurant"}const P=(A.orderId||A.orderNumber||A._id||"").toLowerCase();if(P.includes("-tm-")||P.includes("temple"))return"temple";if(P.includes("-ss-")||P.includes("counter"))return"self-service";if(P.includes("-res-"))return"restaurant";if(A.items&&Array.isArray(A.items)&&A.items.length>0){const ge={"692fe2788b36a58df247e06f":"restaurant","692fe2978b36a58df247e072":"self-service","692fe2ae8b36a58df247e075":"temple"},q=A.items.map(Y=>{var ee;const z=typeof Y.categoryId=="string"?Y.categoryId:((ee=Y.categoryId)==null?void 0:ee._id)||Y.categoryId;return ge[z]}).filter(Boolean);if(q.length>0){const Y={};return q.forEach(ee=>{Y[ee]=(Y[ee]||0)+1}),Object.keys(Y).reduce((ee,H)=>Y[ee]>Y[H]?ee:H)}}const I=((W=A.tableNumber)==null?void 0:W.toString().toLowerCase())||"";return I.includes("counter")||I.includes("self")?"self-service":(console.log(" No clear category found, defaulting to restaurant for order:",{orderId:A.orderId||A.orderNumber||A._id,categoryName:A.categoryName,hasItems:!!((Q=A.items)!=null&&Q.length),tableNumber:A.tableNumber}),"restaurant")},T=await yr("/order",{},!0).catch(A=>(console.log("Mobile app order endpoint failed:",A.message),[]));let k=[];const D=T;k=Array.isArray(D)?D:D.orders||[],console.log(` Mobile app orders found: ${k.length}`),k=k.map(A=>{var I,R;let U="Restaurant";const P=(A.orderId||A.orderNumber||A._id||"").toLowerCase();if(P.includes("-tm-")||P.includes("temple")?U="Temple Meals":P.includes("-ss-")||P.includes("counter")?U="Self Service":P.includes("-res-")&&(U="Restaurant"),A.items&&A.items.length>0){const W=A.items.map(Q=>Q.categoryId).filter(Boolean);if(W.length>0){const Q={};W.forEach(Y=>{Q[Y]=(Q[Y]||0)+1});const ge=Object.keys(Q).reduce((Y,z)=>Q[Y]>Q[z]?Y:z),q={"692fe2788b36a58df247e06f":"Restaurant","692fe2978b36a58df247e072":"Self Service","692fe2ae8b36a58df247e075":"Temple Meals"};q[ge]&&(U=q[ge])}}return{...A,customerName:A.name||A.customerName||"Mobile User",customerMobile:A.phone||A.customerMobile||A.customerPhone,customerPhone:A.phone||A.customerPhone||A.customerMobile,tableNumber:A.tableNumber||"Mobile Order",branchName:((I=A.branchId)==null?void 0:I.name)||A.branchName||"Hotel Virat",grandTotal:A.total||A.grandTotal||A.totalAmount,totalAmount:A.total||A.totalAmount||A.grandTotal,status:A.status||"pending",items:A.items||[],subtotal:A.subtotal||A.total||0,tax:A.tax||0,serviceCharge:A.serviceCharge||0,deliveryFee:A.deliveryFee||0,deliveryOption:A.deliveryOption||"delivery",deliveryAddress:A.deliveryAddress||"",paymentMethod:A.paymentMethod||"cash",specialInstructions:A.specialInstructions||"",couponCode:A.couponCode||"",discount:A.discount||0,categoryName:A.categoryName||U,orderType:S({...A,categoryName:A.categoryName||U})}}),console.log(" Mobile Orders by Type:",{restaurant:k.filter(A=>A.orderType==="restaurant").length,selfService:k.filter(A=>A.orderType==="self-service").length,temple:k.filter(A=>A.orderType==="temple").length});const F=k;console.log(` Total mobile app orders: ${F.length}`),console.log(" Final Order Type Distribution:",{restaurant:F.filter(A=>A.orderType==="restaurant").length,selfService:F.filter(A=>A.orderType==="self-service").length,temple:F.filter(A=>A.orderType==="temple").length,undefined:F.filter(A=>!A.orderType).length});const B=localStorage.getItem("categoryAccess");let M=F;B&&B!=="All"&&(M=F.filter(A=>A.categoryName===B),console.log(` Filtered ${F.length} orders to ${M.length} for category: ${B}`));const L=Array.isArray(M)?M.sort((A,U)=>{const P=new Date(A.createdAt||A.orderTime||A.updatedAt||0),I=new Date(U.createdAt||U.orderTime||U.updatedAt||0),R=I-P;return(M.indexOf(A)<3||M.indexOf(U)<3)&&console.log(" Sorting Debug:",{orderA:A.orderId||A.orderNumber||A._id,dateA:P.toISOString(),orderB:U.orderId||U.orderNumber||U._id,dateB:I.toISOString(),result:R>0?"B is newer":"A is newer"}),R}):[];console.log(" Final sorted orders (first 5):",L.slice(0,5).map(A=>({orderId:A.orderId||A.orderNumber||A._id,orderType:A.orderType,createdAt:A.createdAt,status:A.status}))),t(L),console.log(` Orders loaded successfully: ${L.length} orders`)}catch(S){console.error(" Error fetching orders:",S),t([])}finally{a(!1)}},v=async(S,T)=>{try{console.log(` Updating order ${S} status to ${T}`);const[k,D]=await Promise.allSettled([yr(`/staff-order/${S}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:T})}).catch(M=>(console.log("Staff order update failed:",M.message),null)),yr(`/order/${S}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:T})}).catch(M=>(console.log("Regular order update failed:",M.message),null))]),F=k.status==="fulfilled"&&k.value,B=D.status==="fulfilled"&&D.value;if(F||B)console.log(` Order ${S} status updated successfully`),await x(),f(null);else throw new Error("Failed to update order in both endpoints")}catch(k){console.error(" Error updating order:",k),alert("Failed to update order status. Please try again.")}},j=S=>{switch(S){case"temple":return"";case"self-service":return"";case"restaurant":return"";default:return""}},b=S=>{switch(S){case"temple":return"Temple Meals";case"self-service":return"Self Service";case"restaurant":return"Restaurant Order";default:return"Order"}},y=e.filter(S=>(e.indexOf(S)<5&&console.log(" Order Filter Debug:",{orderId:S.orderId||S.orderNumber||S._id,orderType:S.orderType,orderTypeTab:l,willShow:l==="all"||S.orderType===l}),l!=="all"&&S.orderType!==l?!1:i==="all"?!0:S.status===i)),C=S=>{switch(S){case"pending":return"#f59e0b";case"confirmed":return"#3b82f6";case"preparing":return"#8b5cf6";case"out for delivery":return"#06b6d4";case"delivered":return"#10b981";case"cancelled":return"#ef4444";default:return"#6b7280"}},E=S=>{switch(S){case"pending":return n.jsx(ds,{size:20});case"confirmed":return n.jsx(Bs,{size:20});case"preparing":return n.jsx(ds,{size:20});case"out for delivery":return n.jsx(ds,{size:20});case"delivered":return n.jsx(Bs,{size:20});case"cancelled":return n.jsx(Jp,{size:20});default:return n.jsx(ds,{size:20})}};return n.jsxs("div",{style:Ut.container,children:[n.jsxs("div",{style:Ut.header,children:[n.jsxs("div",{children:[n.jsx("h1",{style:Ut.title,children:"Mobile App Orders"}),n.jsx("p",{style:{margin:"5px 0 0",opacity:.7,fontSize:"14px"},children:"Orders placed from the Hotel Virat mobile app"}),p&&p!=="All"&&n.jsxs("p",{style:Ut.categoryBadge,children:["Showing: ",p," orders only"]})]}),n.jsx("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:n.jsx("button",{onClick:x,style:Ut.refreshBtn,children:"Refresh"})})]}),n.jsx("div",{style:Ut.orderTypeTabs,children:[{key:"all",label:"All Orders",icon:""},{key:"restaurant",label:"Restaurant Orders",icon:""},{key:"temple",label:"Temple Meals",icon:""},{key:"self-service",label:"Self Service",icon:""}].map(S=>{const T=e.filter(k=>S.key==="all"||k.orderType===S.key).length;return console.log(` Tab ${S.key} count: ${T}`),n.jsxs("button",{onClick:()=>{console.log(` Switching to tab: ${S.key}`),d(S.key)},style:{...Ut.orderTypeTab,...l===S.key?Ut.orderTypeTabActive:{}},children:[n.jsx("span",{style:{marginRight:"8px"},children:S.icon}),S.label,n.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",opacity:.8},children:["(",T,")"]})]},S.key)})}),n.jsx("div",{style:Ut.filterTabs,children:["all","pending","confirmed","preparing","out for delivery","delivered","cancelled"].map(S=>{const T=e.filter(D=>l==="all"||D.orderType===l),k=S==="all"?T.length:T.filter(D=>D.status===S).length;return n.jsxs("button",{onClick:()=>s(S),style:{...Ut.filterTab,...i===S?Ut.filterTabActive:{}},children:[S==="out for delivery"?"Out for Delivery":S.charAt(0).toUpperCase()+S.slice(1),n.jsxs("span",{style:{marginLeft:"6px"},children:["(",k,")"]})]},S)})}),r?n.jsx("div",{style:Ut.loading,children:"Loading orders..."}):y.length===0?n.jsx("div",{style:Ut.empty,children:"No orders found"}):n.jsx("div",{style:Ut.ordersList,children:y.map(S=>{var T;return n.jsxs("div",{style:Ut.orderCard,children:[n.jsxs("div",{style:Ut.orderHeader,children:[n.jsxs("div",{children:[n.jsxs("h3",{style:Ut.orderTitle,children:[j(S.orderType)," ",S.tableNumber==="Mobile Order"?"Mobile Order":`Table ${S.tableNumber}`]}),n.jsx("p",{style:Ut.orderTime,children:new Date(S.createdAt||S.orderTime||S.updatedAt).toLocaleString()}),n.jsx("p",{style:Ut.orderTypeLabel,children:b(S.orderType)})]}),n.jsxs("div",{style:{...Ut.statusBadge,backgroundColor:C(S.status)},children:[E(S.status),n.jsx("span",{children:S.status})]})]}),n.jsxs("div",{style:Ut.orderDetails,children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Customer:"})," ",S.customerName||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",S.customerMobile||S.customerPhone||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Branch:"})," ",S.branchName||"Hotel Virat"]}),S.deliveryOption&&n.jsxs("p",{children:[n.jsx("strong",{children:"Type:"})," ",S.deliveryOption==="delivery"?" Delivery":" Pickup"]}),S.deliveryAddress&&n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," ",S.deliveryAddress]}),S.paymentMethod&&n.jsxs("p",{children:[n.jsx("strong",{children:"Payment:"})," ",S.paymentMethod.toUpperCase()]}),S.categoryName&&n.jsxs("p",{children:[n.jsx("strong",{children:"Category:"})," ",S.categoryName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Items:"})," ",((T=S.items)==null?void 0:T.length)||0]}),S.couponCode&&n.jsxs("p",{children:[n.jsx("strong",{children:"Coupon:"})," ",S.couponCode," (-",S.discount||0,")"]}),n.jsxs("p",{style:Ut.orderTotal,children:[n.jsx("strong",{children:"Total:"})," ",(S.grandTotal||S.totalAmount||S.total||0).toFixed(2)]})]}),n.jsxs("div",{style:Ut.orderActions,children:[n.jsxs("button",{onClick:()=>f(S),style:Ut.viewBtn,children:[n.jsx(Xi,{size:16}),"View Details"]}),S.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>v(S._id,"delivered"),style:Ut.completeBtn,children:"Complete"}),n.jsx("button",{onClick:()=>v(S._id,"cancelled"),style:Ut.cancelBtn,children:"Cancel"})]})]})]},S._id)})}),u&&n.jsx("div",{style:Ut.modalOverlay,onClick:()=>f(null),children:n.jsxs("div",{style:Ut.modal,onClick:S=>S.stopPropagation(),children:[n.jsxs("div",{style:Ut.modalHeader,children:[n.jsx("h2",{children:"Order Details"}),n.jsx("button",{onClick:()=>f(null),style:Ut.closeBtn,children:""})]}),n.jsxs("div",{style:Ut.modalBody,children:[n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Order Type:"}),n.jsx("span",{children:u.tableNumber==="Mobile Order"?" Mobile App Order":` Table ${u.tableNumber}`})]}),n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Customer:"}),n.jsx("span",{children:u.customerName||"N/A"})]}),n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Phone:"}),n.jsx("span",{children:u.customerMobile||u.customerPhone||"N/A"})]}),n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Status:"}),n.jsx("span",{style:{color:C(u.status),fontWeight:"bold"},children:u.status})]}),u.deliveryOption&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Delivery Type:"}),n.jsx("span",{children:u.deliveryOption==="delivery"?" Delivery":" Pickup"})]}),u.deliveryAddress&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Delivery Address:"}),n.jsx("span",{children:u.deliveryAddress})]}),u.paymentMethod&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Payment Method:"}),n.jsx("span",{children:u.paymentMethod.toUpperCase()})]}),u.couponCode&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Coupon Applied:"}),n.jsx("span",{children:u.couponCode})]}),u.specialInstructions&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Special Instructions:"}),n.jsx("span",{children:u.specialInstructions})]}),u.notes&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Notes:"}),n.jsx("span",{children:u.notes})]}),n.jsx("h3",{style:Ut.itemsTitle,children:"Items:"}),(O=u.items)==null?void 0:O.map((S,T)=>n.jsxs("div",{style:Ut.itemRow,children:[n.jsxs("div",{children:[n.jsx("div",{style:Ut.itemName,children:S.name}),n.jsxs("div",{style:Ut.itemQty,children:[S.quantity||S.count||1,"  ",S.price]})]}),n.jsxs("div",{style:Ut.itemPrice,children:["",((S.price||0)*(S.quantity||S.count||1)).toFixed(2)]})]},T)),n.jsxs("div",{style:Ut.totalRow,children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["",(u.subtotal||u.totalAmount||u.total||0).toFixed(2)]})]}),u.discount>0&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Discount:"}),n.jsxs("span",{style:{color:"#10b981"},children:["-",u.discount.toFixed(2)]})]}),u.deliveryFee>0&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Delivery Fee:"}),n.jsxs("span",{children:["",u.deliveryFee.toFixed(2)]})]}),u.tax>0&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Tax (5%):"}),n.jsxs("span",{children:["",u.tax.toFixed(2)]})]}),u.serviceCharge>0&&n.jsxs("div",{style:Ut.detailRow,children:[n.jsx("span",{children:"Service Charge (10%):"}),n.jsxs("span",{children:["",u.serviceCharge.toFixed(2)]})]}),n.jsxs("div",{style:Ut.totalRow,children:[n.jsx("span",{children:"Grand Total:"}),n.jsxs("span",{children:["",(u.grandTotal||u.totalAmount||u.total||0).toFixed(2)]})]})]})]})})]})},Ut={container:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},title:{fontSize:"28px",fontWeight:"bold",margin:0},categoryBadge:{display:"inline-block",marginTop:"8px",padding:"6px 12px",backgroundColor:"#10b981",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"600"},refreshBtn:{padding:"10px 20px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},orderTypeTabs:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap",borderBottom:"2px solid #f3f4f6",paddingBottom:"16px"},orderTypeTab:{display:"flex",alignItems:"center",padding:"10px 16px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",whiteSpace:"nowrap",transition:"all 0.2s ease"},orderTypeTabActive:{backgroundColor:"#3b82f6",color:"white",borderColor:"#3b82f6"},orderTypeLabel:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},filterTabs:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},filterTab:{padding:"8px 16px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",whiteSpace:"nowrap"},filterTabActive:{backgroundColor:"#10b981",color:"white"},loading:{textAlign:"center",padding:"40px",color:"#6b7280"},empty:{textAlign:"center",padding:"40px",color:"#6b7280"},ordersList:{display:"grid",gap:"16px"},orderCard:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"20px"},orderHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},orderTitle:{fontSize:"20px",fontWeight:"bold",margin:"0 0 4px 0"},orderTime:{fontSize:"14px",color:"#6b7280",margin:0},statusBadge:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",color:"white",fontSize:"14px",fontWeight:"600"},orderDetails:{marginBottom:"16px",fontSize:"14px",lineHeight:"1.8"},orderTotal:{fontSize:"18px",color:"#10b981",marginTop:"8px"},orderActions:{display:"flex",gap:"8px",flexWrap:"wrap"},viewBtn:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},completeBtn:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},cancelBtn:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modal:{backgroundColor:"white",borderRadius:"12px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #e5e7eb"},closeBtn:{background:"none",border:"none",fontSize:"32px",cursor:"pointer",color:"#6b7280",lineHeight:1},modalBody:{padding:"20px",overflowY:"auto"},detailRow:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #f3f4f6"},itemsTitle:{marginTop:"20px",marginBottom:"12px",fontSize:"18px",fontWeight:"bold"},itemRow:{display:"flex",justifyContent:"space-between",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px",marginBottom:"8px"},itemName:{fontWeight:"600",marginBottom:"4px"},itemQty:{fontSize:"14px",color:"#6b7280"},itemPrice:{fontWeight:"bold",color:"#10b981"},totalRow:{display:"flex",justifyContent:"space-between",marginTop:"20px",padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"8px",fontSize:"20px",fontWeight:"bold",color:"#10b981"}},rm=e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","")||"https://hotelvirat.com";let r=e.toString().trim().replace(/\\/g,"/"),a;if(r.startsWith("/"))a=`${t}${r}`;else if(r.startsWith("uploads/"))a=`${t}/${r}`;else{const i=r.split("/").pop();a=`${t}/uploads/menu/${i}`}return a},Lne=e=>{if(!e)return null;if(e.startsWith("http://localhost"))return e.replace("https://hotelvirat.com","https://hotelvirat.com");if(e.startsWith("https://hotelvirat.com")||e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com";let r=e.toString().trim().replace(/\\/g,"/"),a;if(r.startsWith("/"))a=`${t}${r}`;else if(r.startsWith("uploads/"))a=`${t}/${r}`;else{const i=r.split("/").pop();a=`${t}/uploads/menu/${i}`}return a},zne=({product:e,onClose:t,onSave:r,branches:a,categories:i,selectedBranch:s})=>{var L,A,U;const l=!!e,d=["Small","Medium","Large"],[u,f]=N.useState({menuItemNumber:(e==null?void 0:e.menuItemNumber)||"",name:(e==null?void 0:e.name)||"",branchId:typeof(e==null?void 0:e.branchId)=="object"?((L=e==null?void 0:e.branchId)==null?void 0:L._id)||s:(e==null?void 0:e.branchId)||s,categoryId:typeof(e==null?void 0:e.categoryId)=="object"?((A=e==null?void 0:e.categoryId)==null?void 0:A._id)||"":(e==null?void 0:e.categoryId)||"",subcategoryId:typeof(e==null?void 0:e.subcategoryId)=="object"?((U=e==null?void 0:e.subcategoryId)==null?void 0:U._id)||"":(e==null?void 0:e.subcategoryId)||"",quantities:(e==null?void 0:e.quantities)||[],prices:(e==null?void 0:e.prices)||{},image:null,subscriptionEnabled:(e==null?void 0:e.subscriptionEnabled)||!1,subscriptionPlans:(e==null?void 0:e.subscriptionPlans)||[],subscriptionAmount:(e==null?void 0:e.subscriptionAmount)||0,subscriptionDiscount:(e==null?void 0:e.subscriptionDiscount)||0,subscriptionDuration:(e==null?void 0:e.subscriptionDuration)||"3days",subscription3DaysDiscount:(e==null?void 0:e.subscription3DaysDiscount)||5,subscription1WeekDiscount:(e==null?void 0:e.subscription1WeekDiscount)||10,subscription1MonthDiscount:(e==null?void 0:e.subscription1MonthDiscount)||15,subscription3DaysPrice:(e==null?void 0:e.subscription3DaysPrice)||100,subscription1WeekPrice:(e==null?void 0:e.subscription1WeekPrice)||250,subscription1MonthPrice:(e==null?void 0:e.subscription1MonthPrice)||500}),[p,m]=N.useState([]),[x,v]=N.useState([]),[j,b]=N.useState([]),[y,C]=N.useState(null),[E,O]=N.useState(!1),[S,T]=N.useState("");N.useEffect(()=>{(async()=>{try{const I=await yr("/subcategory");v(I||[])}catch(I){console.error("Error fetching subcategories:",I)}})()},[]),N.useEffect(()=>{var P,I,R;e&&f({name:e.name||"",branchId:typeof e.branchId=="object"?((P=e.branchId)==null?void 0:P._id)||s:e.branchId||s,categoryId:typeof e.categoryId=="object"?((I=e.categoryId)==null?void 0:I._id)||"":e.categoryId||"",subcategoryId:typeof e.subcategoryId=="object"?((R=e.subcategoryId)==null?void 0:R._id)||"":e.subcategoryId||"",quantities:e.quantities||[],prices:e.prices||{},image:null,subscriptionEnabled:e.subscriptionEnabled||!1,subscriptionPlans:e.subscriptionPlans||[],subscriptionAmount:e.subscriptionAmount||0,subscriptionDiscount:e.subscriptionDiscount||0,subscriptionDuration:e.subscriptionDuration||"3days",subscription3DaysDiscount:e.subscription3DaysDiscount||5,subscription1WeekDiscount:e.subscription1WeekDiscount||10,subscription1MonthDiscount:e.subscription1MonthDiscount||15,subscription3DaysPrice:e.subscription3DaysPrice||100,subscription1WeekPrice:e.subscription1WeekPrice||250,subscription1MonthPrice:e.subscription1MonthPrice||500})},[e,s]),N.useEffect(()=>{if(e!=null&&e.image){const P=rm(e.image);C(P)}else C(null)},[e]),N.useEffect(()=>{if(console.log(" Categories changed or branch changed:",{totalCategories:i.length,selectedBranchId:u.branchId,categories:i.map(P=>{var I;return{name:P.name,branchId:P.branchId,branchObjId:(I=P.branch)==null?void 0:I.id,_id:P._id}})}),i.length>0&&u.branchId){const P=i.filter(I=>{var Q;const R=I.branchId||((Q=I.branch)==null?void 0:Q.id),W=R===u.branchId;return console.log(`Category "${I.name}": branchId=${R}, matches=${W}`),W});console.log(` Filtered ${P.length} categories for branch ${u.branchId}`),m(P),u.categoryId&&(P.some(R=>R._id===u.categoryId)||f(R=>({...R,categoryId:""})))}else console.log(" No branch selected, showing all categories"),m(i)},[u.branchId,i]),N.useEffect(()=>{if(x.length>0&&u.categoryId){const P=x.filter(I=>{var W;return(((W=I.categoryId)==null?void 0:W._id)||I.categoryId)===u.categoryId});b(P),u.subcategoryId&&(P.some(R=>R._id===u.subcategoryId)||f(R=>({...R,subcategoryId:""})))}else b([]),f(P=>({...P,subcategoryId:""}))},[u.categoryId,x]);const k=P=>{const{name:I,value:R}=P.target;f({...u,[I]:R})},D=P=>{const I=P.target.value;f(R=>{const W=R.quantities.includes(I)?R.quantities.filter(ge=>ge!==I):[...R.quantities,I],Q={...R.prices};return W.includes(I)||delete Q[I],{...R,quantities:W,prices:Q}})},F=P=>{const{name:I,value:R}=P.target;f(W=>({...W,prices:{...W.prices,[I]:parseFloat(R)||""}}))},B=P=>{const I=P.target.files[0];if(I){if(I.size>5*1024*1024){T("Image size must be less than 5MB");return}if(!I.type.startsWith("image/")){T("Please select a valid image file");return}f(R=>({...R,image:I})),T("")}},M=async P=>{if(P.preventDefault(),O(!0),T(""),u.quantities.length===0){T("Please select at least one quantity"),O(!1);return}for(const I of u.quantities)if(!u.prices[I]||u.prices[I]<=0){T(`Please enter a valid price for ${I}`),O(!1);return}try{await r(u),t()}catch(I){T(I.message||"Failed to save product. Please try again.")}finally{O(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:[n.jsx(Ni,{size:20,style:{marginRight:"8px"}}),e?"Edit Item":"Add Item"]}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:M,children:[n.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[S&&n.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:S})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"branchId",children:"Branch *"}),n.jsxs("select",{id:"branchId",name:"branchId",className:"form-select",value:u.branchId,onChange:k,required:!0,disabled:l,style:l?{backgroundColor:"#f3f4f6",cursor:"not-allowed"}:{},children:[n.jsx("option",{value:"",children:"Select Branch"}),a.map(P=>n.jsx("option",{value:P._id,children:P.name},P._id))]}),l&&n.jsx("p",{style:{marginTop:"4px",fontSize:"12px",color:"#6b7280"},children:"Branch cannot be changed after creation"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"categoryId",children:"Category *"}),n.jsxs("select",{id:"categoryId",name:"categoryId",className:"form-select",value:u.categoryId,onChange:k,required:!0,children:[n.jsx("option",{value:"",children:"Select Category"}),p.map(P=>n.jsx("option",{value:P._id,children:P.name},P._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"subcategoryId",children:"Subcategory (Optional)"}),n.jsxs("select",{id:"subcategoryId",name:"subcategoryId",className:"form-select",value:u.subcategoryId,onChange:k,disabled:!u.categoryId,style:u.categoryId?{}:{backgroundColor:"#f3f4f6",cursor:"not-allowed"},children:[n.jsx("option",{value:"",children:"Select Subcategory (Optional)"}),j.map(P=>n.jsx("option",{value:P._id,children:P.name},P._id))]}),!u.categoryId&&n.jsx("p",{style:{marginTop:"4px",fontSize:"12px",color:"#6b7280"},children:"Please select a category first"})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Menu Item Number (Optional - for quick access)"}),n.jsx("input",{type:"number",min:"1",value:u.menuItemNumber||"",onChange:P=>f({...u,menuItemNumber:parseInt(P.target.value)||null}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:"Enter a unique number (e.g., 1, 2, 3...)"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"name",children:"Item Name *"}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:u.name,onChange:k,required:!0,placeholder:"Enter item name (e.g., Pizza, Sandwich, Pasta)"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Quantities *"}),n.jsx("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:d.map(P=>n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("input",{type:"checkbox",name:"quantities",value:P,checked:u.quantities.includes(P),onChange:D,style:{width:"16px",height:"16px"}}),n.jsx("span",{style:{fontSize:"14px",color:"#374151"},children:P})]},P))})]}),u.quantities.length>0&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Prices *"}),u.quantities.map(P=>n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("label",{style:{display:"block",fontSize:"14px",color:"#6b7280",marginBottom:"4px"},children:["Price for ",P]}),n.jsx("input",{type:"number",name:P,value:u.prices[P]||"",onChange:F,className:"form-input",required:!0,min:"0",step:"0.01",placeholder:`Enter price for ${P}`})]},P))]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Menu Item Image"}),(e==null?void 0:e.image)&&!u.image&&n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"Current Image:"}),n.jsx("img",{src:rm(e.image),alt:"Current menu item",style:{width:"100%",height:"192px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"},onError:P=>{console.error("Failed to load existing image:",rm(e.image)),P.target.style.display="none"}})]}),n.jsx("input",{type:"file",name:"image",onChange:B,accept:"image/*",className:"form-input",style:{padding:"8px"}}),u.image&&n.jsx("div",{style:{marginTop:"12px"},children:u.image instanceof File?n.jsxs("div",{children:[n.jsx("img",{src:URL.createObjectURL(u.image),alt:"Preview",style:{width:"100%",height:"192px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}),n.jsxs("p",{style:{marginTop:"8px",fontSize:"12px",color:"#10b981"},children:[" New image selected: ",u.image.name]})]}):n.jsx("p",{style:{marginTop:"8px",fontSize:"12px",color:"#10b981"},children:" Image selected"})}),n.jsx("p",{style:{marginTop:"4px",fontSize:"12px",color:"#6b7280"},children:e!=null&&e.image&&!u.image?"Upload a new image to replace the current one (optional)":"Upload an image for this menu item (JPEG, PNG, GIF, WEBP, AVIF up to 5MB)"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",name:"subscriptionEnabled",checked:u.subscriptionEnabled,onChange:P=>f({...u,subscriptionEnabled:P.target.checked}),style:{width:"18px",height:"18px",cursor:"pointer"}}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Enable Subscription for this item"})]}),n.jsx("p",{style:{marginTop:"4px",marginLeft:"26px",fontSize:"12px",color:"#6b7280"},children:"Allow customers to subscribe to this menu item for regular delivery"})]}),u.subscriptionEnabled&&n.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[n.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{children:""})," Subscription Configuration"]}),n.jsxs("div",{className:"form-group",style:{marginBottom:"16px"},children:[n.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px",display:"block"},children:"Subscription Pricing"}),n.jsxs("div",{style:{display:"grid",gap:"16px"},children:[n.jsxs("div",{style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[n.jsx("h5",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"3 Days Plan"}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Subscription Fee ()"}),n.jsx("input",{type:"number",min:"0",value:u.subscription3DaysPrice||"",onChange:P=>{const I=parseFloat(P.target.value)||0;f({...u,subscription3DaysPrice:I})},placeholder:"100",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),n.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"4px 0 0 0"},children:"Amount users pay to buy this subscription"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Discount Percentage (%)"}),n.jsx("input",{type:"number",min:"0",max:"50",value:u.subscription3DaysDiscount||"",onChange:P=>{const I=parseFloat(P.target.value)||0;f({...u,subscription3DaysDiscount:I})},placeholder:"5",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},step:"0.01"})]})]}),n.jsxs("div",{style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[n.jsx("h5",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"1 Week Plan"}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Subscription Fee ()"}),n.jsx("input",{type:"number",min:"0",value:u.subscription1WeekPrice||"",onChange:P=>{const I=parseFloat(P.target.value)||0;f({...u,subscription1WeekPrice:I})},placeholder:"250",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),n.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"4px 0 0 0"},children:"Amount users pay to buy this subscription"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Discount Percentage (%)"}),n.jsx("input",{type:"number",min:"0",max:"50",value:u.subscription1WeekDiscount||"",onChange:P=>{const I=parseFloat(P.target.value)||0;f({...u,subscription1WeekDiscount:I})},placeholder:"10",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},step:"0.01"})]})]}),n.jsxs("div",{style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[n.jsx("h5",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"1 Month Plan"}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Subscription Fee ()"}),n.jsx("input",{type:"number",min:"0",value:u.subscription1MonthPrice||"",onChange:P=>{const I=parseFloat(P.target.value)||0;f({...u,subscription1MonthPrice:I})},placeholder:"500",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),n.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"4px 0 0 0"},children:"Amount users pay to buy this subscription"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Discount Percentage (%)"}),n.jsx("input",{type:"number",min:"0",max:"50",value:u.subscription1MonthDiscount||"",onChange:P=>{const I=parseFloat(P.target.value)||0;f({...u,subscription1MonthDiscount:I})},placeholder:"15",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},step:"0.01"})]})]})]}),n.jsx("p",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:" Set discount percentages for each subscription plan"})]}),(u.subscription3DaysDiscount>0||u.subscription1WeekDiscount>0||u.subscription1MonthDiscount>0)&&n.jsxs("div",{style:{padding:"12px",backgroundColor:"#e0f2fe",borderRadius:"6px",border:"1px solid #0891b2"},children:[n.jsx("p",{style:{fontSize:"13px",color:"#0c4a6e",margin:0,marginBottom:"8px"},children:n.jsx("strong",{children:" Subscription Plans Preview:"})}),u.subscription3DaysDiscount>0&&n.jsxs("p",{style:{fontSize:"12px",color:"#0c4a6e",margin:"4px 0"},children:[" 3 Days: Pay ",u.subscription3DaysPrice||100,"  Get ",u.subscription3DaysDiscount,"% discount",Object.keys(u.prices).length>0&&n.jsxs("span",{style:{color:"#059669",fontWeight:"bold"},children:[" ","(",Math.round(Object.values(u.prices)[0]*(1-u.subscription3DaysDiscount/100)),")"]})]}),u.subscription1WeekDiscount>0&&n.jsxs("p",{style:{fontSize:"12px",color:"#0c4a6e",margin:"4px 0"},children:[" 1 Week: Pay ",u.subscription1WeekPrice||250,"  Get ",u.subscription1WeekDiscount,"% discount",Object.keys(u.prices).length>0&&n.jsxs("span",{style:{color:"#059669",fontWeight:"bold"},children:[" ","(",Math.round(Object.values(u.prices)[0]*(1-u.subscription1WeekDiscount/100)),")"]})]}),u.subscription1MonthDiscount>0&&n.jsxs("p",{style:{fontSize:"12px",color:"#0c4a6e",margin:"4px 0"},children:[" 1 Month: Pay ",u.subscription1MonthPrice||500,"  Get ",u.subscription1MonthDiscount,"% discount",Object.keys(u.prices).length>0&&n.jsxs("span",{style:{color:"#059669",fontWeight:"bold"},children:[" ","(",Math.round(Object.values(u.prices)[0]*(1-u.subscription1MonthDiscount/100)),")"]})]}),n.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"8px 0 0 0",fontStyle:"italic"},children:"* Users pay subscription fee upfront, then get discounted prices during subscription period"})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:E,style:{padding:"12px 24px",borderRadius:"8px"},children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E,style:{padding:"12px 24px",borderRadius:"8px",backgroundColor:"#6366f1"},children:E?"Saving...":e?"Update Item":"Add Item"})]})]})]})})},$ne=({product:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),[s,l]=N.useState(""),d=async()=>{i(!0),l("");try{await r(e._id),t()}catch(u){l(u.message||"Failed to delete product. Please try again.")}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Product"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("div",{className:"modal-body",children:[s&&n.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:s})]}),n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:d,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Une=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState(""),[p,m]=N.useState(""),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState(!1),[E,O]=N.useState(null),[S,T]=N.useState(!1),[k,D]=N.useState(null),[F,B]=N.useState([]),[M,L]=N.useState([]),[A,U]=N.useState(!0),[P,I]=N.useState(!0),[R,W]=N.useState(""),[Q,ge]=N.useState(""),[q,Y]=N.useState(""),[z,ee]=N.useState(!1),[H,re]=N.useState(null),[le,pe]=N.useState(null);N.useEffect(()=>{(async()=>{try{await Se(),await K(),await ue(),await ye()}catch(ce){console.error("Error loading data:",ce),W("Failed to load data. Please refresh the page and try again.")}})()},[]),N.useEffect(()=>{fe()},[e,p,x,j,u]),N.useEffect(()=>{if(x){const te=l.filter(ce=>{var se;return(((se=ce.categoryId)==null?void 0:se._id)||ce.categoryId)===x});L(te),j&&(te.some(X=>X._id===j)||b(""))}else L([]),b("")},[x,l]),N.useEffect(()=>{fe()},[e,p,x,u]);const Se=async()=>{try{const te=await yr("/branch",{},!0);a(te),te.length>0&&!p&&m(te[0]._id)}catch(te){console.error("Error fetching branches:",te),W("Failed to load branches. Please refresh the page and try again.")}},K=async()=>{I(!0);try{const te=await yr("/category",{},!0);s(te),te.length===0&&W("No categories found. Please add a category first.")}catch(te){console.error("Error fetching categories:",te),W("Failed to load categories. Please refresh the page and try again.")}finally{I(!1)}},ue=async()=>{try{const te=await yr("/subcategory",{},!0);d(te||[])}catch(te){console.error("Error fetching subcategories:",te)}},ye=async()=>{U(!0),W("");try{const te=await yr("/menu",{},!0);console.log("Fetched products:",te),te&&te.length>0&&(console.log("Full product object:",te[0]),console.log("All product keys:",Object.keys(te[0])),console.log("Product fields:",{itemName:te[0].itemName,name:te[0].name,image:te[0].image,price:te[0].price,quantities:te[0].quantities,prices:te[0].prices})),t(te)}catch(te){console.error("Error fetching products:",te),W("Failed to load products. Please refresh the page and try again.")}finally{U(!1)}},fe=()=>{let te=e;p&&(te=te.filter(ce=>!ce||!ce.branchId?!1:(typeof ce.branchId=="object"?ce.branchId._id:ce.branchId)===p)),x&&(te=te.filter(ce=>!ce||!ce.categoryId?!1:(typeof ce.categoryId=="object"?ce.categoryId._id:ce.categoryId)===x)),j&&(te=te.filter(ce=>!ce||!ce.subcategoryId?!1:(typeof ce.subcategoryId=="object"?ce.subcategoryId._id:ce.subcategoryId)===j)),u&&(te=te.filter(ce=>ce&&ce.name&&ce.name.toLowerCase().includes(u.toLowerCase())||ce&&ce.description&&ce.description.toLowerCase().includes(u.toLowerCase()))),B(te)},Xe=()=>{O(null),C(!0)},Ce=te=>{O(te),C(!0)},Le=te=>{D(te),T(!0)},ne=async te=>{try{const ce=new FormData;ce.append("itemName",te.name);const X=typeof te.branchId=="object"?te.branchId._id:te.branchId,se=typeof te.categoryId=="object"?te.categoryId._id:te.categoryId;if(console.log("Extracted IDs:",{branchId:X,categoryId:se}),console.log("Original formData:",{branchId:te.branchId,categoryId:te.categoryId}),ce.append("branchId",X),ce.append("categoryId",se),te.subcategoryId){const Ne=typeof te.subcategoryId=="object"?te.subcategoryId._id:te.subcategoryId;ce.append("subcategoryId",Ne)}ce.append("menuTypes",JSON.stringify(te.quantities)),ce.append("quantities",JSON.stringify(te.quantities)),ce.append("prices",JSON.stringify(te.prices)),ce.append("subscriptionEnabled",te.subscriptionEnabled),te.menuItemNumber&&te.menuItemNumber!==""&&te.menuItemNumber!=="0"&&ce.append("menuItemNumber",te.menuItemNumber),ce.append("subscriptionPlans",JSON.stringify(te.subscriptionPlans)),ce.append("subscriptionAmount",te.subscriptionAmount||0),ce.append("subscriptionDiscount",te.subscriptionDiscount||0),ce.append("subscriptionDuration",te.subscriptionDuration||"3days"),ce.append("subscription3DaysDiscount",te.subscription3DaysDiscount||0),ce.append("subscription1WeekDiscount",te.subscription1WeekDiscount||0),ce.append("subscription1MonthDiscount",te.subscription1MonthDiscount||0),ce.append("subscription3DaysPrice",te.subscription3DaysPrice||0),ce.append("subscription1WeekPrice",te.subscription1WeekPrice||0),ce.append("subscription1MonthPrice",te.subscription1MonthPrice||0),te.image&&te.image instanceof File?(console.log("Appending image to FormData:",te.image.name,te.image.size,"bytes"),ce.append("image",te.image)):console.log("No image to upload:",{hasImage:!!te.image,isFile:te.image instanceof File}),console.log("FormData entries being sent:");for(let[Ne,Ge]of ce.entries())console.log(`${Ne}:`,Ge);let J;return E?(console.log("Current product for update:",E),console.log("Current product ID:",E._id),console.log("Current product ID type:",typeof E._id),J=await yr(`/menu/${E._id}`,{method:"PUT",body:ce}),console.log("Product updated, response:",J),console.log("Image path in response:",J.image),await ye(),ge(`Item "${J.itemName||J.name}" updated successfully`)):(J=await yr("/menu",{method:"POST",body:ce}),console.log("Product created, response:",J),console.log("Image path in response:",J.image),await ye(),ge(`Item "${J.itemName||J.name}" created successfully`)),setTimeout(()=>{ge("")},3e3),J}catch(ce){throw console.error("Error saving product:",ce),new Error(ce.message||"Failed to save product")}},Ae=async te=>{var ce,X;try{await yr(`/menu/${te}`,{method:"DELETE"}),t(e.filter(se=>se._id!==te)),ge("Product deleted successfully"),setTimeout(()=>{ge("")},3e3)}catch(se){throw console.error("Error deleting product:",se),new Error(((X=(ce=se.response)==null?void 0:ce.data)==null?void 0:X.message)||"Failed to delete product")}},Ve=(te,ce)=>{if(ce&&ce.name)return ce.name;const X=i.find(se=>se._id===te);return X?X.name:"Unknown"};return n.jsxs("div",{className:"products-page",children:[Q&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:Q}),n.jsx("button",{onClick:()=>ge(""),children:n.jsx("span",{children:""})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Products"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:Xe,children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Product"})]})})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},children:[n.jsxs("button",{onClick:()=>m(""),style:{padding:"10px 20px",borderRadius:"25px",border:"none",backgroundColor:p===""?"#6366f1":"#e5e7eb",color:p===""?"white":"#374151",cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},children:["All Branches (",e.length,")"]}),r.map(te=>{const ce=e.filter(X=>X.branchId?(typeof X.branchId=="object"?X.branchId._id:X.branchId)===te._id:!1).length;return n.jsxs("button",{onClick:()=>m(te._id),style:{padding:"10px 20px",borderRadius:"25px",border:"none",backgroundColor:p===te._id?"#6366f1":"#e5e7eb",color:p===te._id?"white":"#374151",cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},children:[te.name," (",ce,")"]},te._id)})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Filter by Category:"}),n.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[n.jsxs("button",{onClick:()=>v(""),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:x===""?"#10b981":"#f3f4f6",color:x===""?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:["All Categories (",p?F.length:e.length,")"]}),i.filter(te=>{var X;return p?(te.branchId||((X=te.branch)==null?void 0:X.id))===p:!0}).map(te=>{const ce=(p?F:e).filter(X=>X.categoryId?(typeof X.categoryId=="object"?X.categoryId._id:X.categoryId)===te._id:!1).length;return n.jsxs("button",{onClick:()=>v(te._id),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:x===te._id?"#10b981":"#f3f4f6",color:x===te._id?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:[te.name," (",ce,")"]},te._id)})]})]}),x&&M.length>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Filter by Subcategory:"}),n.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[n.jsx("button",{onClick:()=>b(""),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:j===""?"#8b5cf6":"#f3f4f6",color:j===""?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"All Subcategories"}),M.map(te=>{const ce=F.filter(X=>X.subcategoryId?(typeof X.subcategoryId=="object"?X.subcategoryId._id:X.subcategoryId)===te._id:!1).length;return n.jsxs("button",{onClick:()=>b(te._id),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:j===te._id?"#8b5cf6":"#f3f4f6",color:j===te._id?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:[te.name," (",ce,")"]},te._id)})]})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search products...",className:"search-input",value:u,onChange:te=>f(te.target.value)})]})}),R&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:R})]}),A||P?n.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"Loading data..."})}):n.jsx("div",{className:"grid-container",children:F.length>0?F.map(te=>{var ce;return n.jsxs("div",{id:`product-${te._id}`,className:"grid-item",style:{border:le===te._id?"3px solid #10b981":void 0,boxShadow:le===te._id?"0 0 20px rgba(16, 185, 129, 0.3)":void 0,transform:le===te._id?"scale(1.02)":void 0,transition:"all 0.3s ease"},children:[n.jsxs("div",{className:"grid-item-image-container",style:{position:"relative"},children:[n.jsx("img",{src:rm(te.image)||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23f3f4f6' width='300' height='200'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='18' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",alt:te.name||te.itemName,className:"grid-item-image",onError:X=>{const se=Lne(te.image);se&&X.target.src!==se?X.target.src=se:(X.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23f3f4f6' width='300' height='200'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='16' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",X.target.onerror=null)}}),te.subscriptionEnabled&&n.jsxs("div",{style:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#10b981",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[n.jsx("span",{children:""}),n.jsx("span",{children:"SUBSCRIPTION"})]})]}),n.jsxs("div",{className:"grid-item-content",children:[n.jsxs("h3",{className:"grid-item-title",children:[te.menuItemNumber&&n.jsxs("span",{style:{display:"inline-block",backgroundColor:"#3b82f6",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",marginRight:"8px"},children:["#",te.menuItemNumber]}),te.name||te.itemName||((ce=te.categoryId)==null?void 0:ce.name)||"Unnamed Product"]}),n.jsx("p",{className:"grid-item-subtitle",children:Ve(te.categoryId,te.categoryId)}),te.quantities&&te.quantities.length>0?n.jsx("div",{style:{marginTop:"8px",marginBottom:"8px"},children:te.quantities.map(X=>{var se;return n.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px"},children:[n.jsxs("span",{style:{fontWeight:"500"},children:[X,":"]})," ",n.jsx("span",{style:{fontFamily:"Arial, sans-serif"},children:""}),(se=te.prices)!=null&&se[X]?Number(te.prices[X]).toFixed(2):"0.00"]},X)})}):te.description&&n.jsx("p",{style:{fontSize:"13px",color:"#6b7280",marginTop:"8px",marginBottom:"8px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:te.description}),n.jsxs("div",{className:"grid-item-footer",children:[n.jsx("span",{className:"grid-item-price",children:te.quantities&&te.quantities.length>0?`${te.quantities.length} size${te.quantities.length>1?"s":""}`:te.price&&te.price>0?`${Number(te.price).toFixed(2)}`:n.jsx("span",{style:{color:"#9ca3af",fontSize:"13px"},children:"Price not set"})}),n.jsxs("div",{className:"grid-item-actions",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>Ce(te),children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>Le(te),children:n.jsx(La,{size:14})})]})]})]})]},te._id)}):n.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0",gridColumn:"1 / -1"},children:n.jsxs("p",{children:["No products found. ",u?"Try different search terms.":"Add a new product to get started."]})})}),y&&n.jsx(zne,{product:E,onClose:()=>C(!1),onSave:ne,branches:r,categories:i,selectedBranch:p}),S&&n.jsx($ne,{product:k,onClose:()=>T(!1),onConfirm:Ae})]})},iw=(e,t=!1)=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return t?`${e}?t=${Date.now()}`:e;const a="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","");let i=e.replace(/\\/g,"/");i.startsWith("/")||(i=`/${i}`);const s=`${a}${i}`;return t?`${s}?t=${Date.now()}`:s},qne=({category:e,onClose:t,onSave:r,branches:a,selectedBranch:i})=>{var C;const s=(e==null?void 0:e.branchId)||((C=e==null?void 0:e.branch)==null?void 0:C.id)||i||(a.length>0?a[0]._id:""),[l,d]=N.useState({name:(e==null?void 0:e.name)||"",branchId:s,image:(e==null?void 0:e.image)||""}),[u,f]=N.useState(null),[p,m]=N.useState(!1),[x,v]=N.useState("");N.useEffect(()=>{if(e!=null&&e.image){const E=iw(e.image);f(E)}else f(null)},[e]);const j=E=>{const{name:O,value:S}=E.target;d({...l,[O]:S})},b=E=>{const O=E.target.files[0];if(O){const S=new FileReader;S.onloadend=()=>{f(S.result),d({...l,image:S.result})},S.readAsDataURL(O)}},y=async E=>{E.preventDefault(),m(!0),v("");try{await r(l),t()}catch(O){v(O.message||"Failed to save category. Please try again.")}finally{m(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:e?"Edit Category":"Add New Category"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"modal-body",children:[x&&n.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:x})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"branchId",children:"Branch"}),n.jsx("select",{id:"branchId",name:"branchId",className:"form-select",value:l.branchId,onChange:j,required:!0,disabled:!!e,children:a.map(E=>n.jsx("option",{value:E._id,children:E.name},E._id))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Category Image"}),n.jsxs("div",{className:"image-upload-container",children:[n.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:u?n.jsxs("div",{className:"image-preview-wrapper",children:[n.jsx("img",{src:u,alt:"Category preview",className:"image-preview"}),n.jsx("div",{className:"image-overlay",children:n.jsx("span",{children:"Change Image"})})]}):n.jsxs("div",{className:"image-upload-placeholder",children:[n.jsx(zl,{size:24}),n.jsx("span",{children:"Upload Category Image"})]})}),n.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:b,className:"image-upload-input"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"name",children:"Category Name"}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:l.name,onChange:j,required:!0})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:p,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Saving...":e?"Update Category":"Add Category"})]})]})]})})},BI=({category:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),[s,l]=N.useState(""),d=async()=>{i(!0),l("");try{await r(e._id),t()}catch(u){l(u.message||"Failed to delete category. Please try again.")}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Category"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("div",{className:"modal-body",children:[s&&n.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:s})]}),n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"? This will also delete all associated products."]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This RESERVED cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:d,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Wne=({subcategory:e,onClose:t,onSave:r,categories:a,branches:i})=>{var b,y;const[s,l]=N.useState({name:(e==null?void 0:e.name)||"",categoryId:((b=e==null?void 0:e.categoryId)==null?void 0:b._id)||(e==null?void 0:e.categoryId)||"",branchId:((y=e==null?void 0:e.branchId)==null?void 0:y._id)||(e==null?void 0:e.branchId)||"",description:(e==null?void 0:e.description)||""}),[d,u]=N.useState([]),[f,p]=N.useState(!1),[m,x]=N.useState("");N.useEffect(()=>{if(s.branchId){const C=a.filter(E=>{var S;return(E.branchId||((S=E.branch)==null?void 0:S.id))===s.branchId});u(C)}else u(a)},[s.branchId,a]);const v=C=>{const{name:E,value:O}=C.target;l({...s,[E]:O})},j=async C=>{C.preventDefault(),p(!0),x("");try{await r(s),t()}catch(E){x(E.message||"Failed to save subcategory")}finally{p(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:e?"Edit Subcategory":"Add New Subcategory"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{className:"modal-body",children:[m&&n.jsxs("div",{style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:m})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Branch *"}),n.jsxs("select",{name:"branchId",className:"form-select",value:s.branchId,onChange:v,required:!0,children:[n.jsx("option",{value:"",children:"Select Branch"}),i.map(C=>n.jsx("option",{value:C._id,children:C.name},C._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Category *"}),n.jsxs("select",{name:"categoryId",className:"form-select",value:s.categoryId,onChange:v,required:!0,disabled:!s.branchId,children:[n.jsx("option",{value:"",children:"Select Category"}),d.map(C=>n.jsx("option",{value:C._id,children:C.name},C._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Subcategory Name *"}),n.jsx("input",{type:"text",name:"name",className:"form-input",value:s.name,onChange:v,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{name:"description",className:"form-textarea",value:s.description,onChange:v,rows:"3"})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:f,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Saving...":e?"Update":"Create"})]})]})]})})},Hne=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState(""),[l,d]=N.useState(!1),[u,f]=N.useState(null),[p,m]=N.useState(!1),[x,v]=N.useState(null),[j,b]=N.useState(""),[y,C]=N.useState([]),[E,O]=N.useState(!0),[S,T]=N.useState(""),[k,D]=N.useState(""),[F,B]=N.useState([]),[M,L]=N.useState(!1),[A,U]=N.useState(null),[P,I]=N.useState(!1),[R,W]=N.useState(null),[Q,ge]=N.useState(""),[q,Y]=N.useState([]),[z,ee]=N.useState("");N.useEffect(()=>{H(),Xe()},[]),N.useEffect(()=>{re()},[j]),N.useEffect(()=>{le()},[e,j,i]),N.useEffect(()=>{Ce()},[F,Q,z]);const H=async()=>{try{const ce=await yr("/branch",{},!0);a(ce)}catch(ce){console.error("Error fetching branches:",ce),T("Failed to load branches. Please refresh the page and try again.")}},re=async()=>{O(!0),T("");try{const ce=j?`/category?branchId=${j}`:"/category",X=!j;console.log(` Fetching categories for branch: ${j||"All"}, endpoint: ${ce}, merge: ${X}`);const se=await yr(ce,{},X);console.log(` Received ${se.length} categories:`,se.map(J=>{var Ne;return{name:J.name,branchId:J.branchId||((Ne=J.branch)==null?void 0:Ne.id)}})),t(se)}catch(ce){console.error("Error fetching categories:",ce),T("Failed to load categories. Please refresh the page and try again.")}finally{O(!1)}},le=()=>{let ce=e;j&&(ce=ce.filter(X=>{var J;return(X.branchId||((J=X.branch)==null?void 0:J.id))===j})),i&&(ce=ce.filter(X=>X.name.toLowerCase().includes(i.toLowerCase()))),C(ce)},pe=()=>{f(null),d(!0)},Se=ce=>{f(ce),d(!0)},K=ce=>{v(ce),m(!0)},ue=async ce=>{try{const X=new FormData;X.append("name",ce.name),X.append("branchId",ce.branchId);const se=r.find(Ne=>Ne._id===ce.branchId);if(se&&(X.append("branchName",se.name),X.append("branchAddress",se.address||"")),ce.image&&ce.image.startsWith("data:image")){const Ge=await(await fetch(ce.image)).blob(),tt=new File([Ge],"category-image.jpg",{type:Ge.type});X.append("image",tt)}else ce.image&&!ce.image.startsWith("http")&&X.append("image",ce.image);let J;if(u){const Ne=await yr(`/category/${u._id}`,{method:"PUT",body:X});Ne._imageTimestamp=Date.now(),t(Ge=>Ge.map(tt=>tt._id===u._id?{...Ne,_imageTimestamp:Date.now()}:tt)),setTimeout(()=>{re()},500),D(`Category "${Ne.name}" updated successfully`)}else{const Ne=await yr("/category",{method:"POST",body:X});t([...e,Ne]),D(`Category "${Ne.name}" created successfully`)}return setTimeout(()=>{D("")},3e3),!0}catch(X){throw console.error("Error saving category:",X),new Error(X.message||"Failed to save category")}},ye=async ce=>{try{await yr(`/category/${ce}`,{method:"DELETE"}),t(e.filter(X=>X._id!==ce)),D("Category deleted successfully"),setTimeout(()=>{D("")},3e3)}catch(X){throw console.error("Error deleting category:",X),new Error(X.message||"Failed to delete category")}},fe=ce=>{var J,Ne;if((J=ce.branch)!=null&&J.name)return ce.branch.name;const X=ce.branchId||((Ne=ce.branch)==null?void 0:Ne.id),se=r.find(Ge=>Ge._id===X);return se?se.name:`Unknown Branch (${(X==null?void 0:X.substring(0,6))||"N/A"})`},Xe=async()=>{try{const ce=await yr("/subcategory",{},!0);B(ce)}catch(ce){console.error("Error fetching subcategories:",ce)}},Ce=()=>{let ce=F;Q&&(ce=ce.filter(X=>{var J;return(((J=X.categoryId)==null?void 0:J._id)||X.categoryId)===Q})),z&&(ce=ce.filter(X=>X.name.toLowerCase().includes(z.toLowerCase()))),Y(ce)},Le=()=>{U(null),L(!0)},ne=ce=>{U(ce),L(!0)},Ae=ce=>{W(ce),I(!0)},Ve=async ce=>{try{A?(await yr(`/subcategory/${A._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),D("Subcategory updated successfully")):(await yr("/subcategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),D("Subcategory created successfully")),Xe(),setTimeout(()=>D(""),3e3)}catch(X){throw console.error("Error saving subcategory:",X),new Error(X.message||"Failed to save subcategory")}},te=async ce=>{try{await yr(`/subcategory/${ce}`,{method:"DELETE"}),B(F.filter(X=>X._id!==ce)),D("Subcategory deleted successfully"),setTimeout(()=>D(""),3e3)}catch(X){throw console.error("Error deleting subcategory:",X),new Error(X.message||"Failed to delete subcategory")}};return n.jsxs("div",{className:"categories-page",children:[k&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:k}),n.jsx("button",{onClick:()=>D(""),children:n.jsx("span",{children:""})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Categories"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:pe,children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Category"})]})})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search categories...",className:"search-input",value:i,onChange:ce=>s(ce.target.value)})]}),n.jsxs("div",{className:"filter-buttons",children:[n.jsxs("div",{className:"filter-btn",children:[n.jsx(im,{size:16}),n.jsx("span",{children:"Branch:"})]}),n.jsxs("select",{className:"filter-select",value:j,onChange:ce=>b(ce.target.value),children:[n.jsx("option",{value:"",children:"All Branches"}),r.map(ce=>n.jsx("option",{value:ce._id,children:ce.name},ce._id))]})]})]}),S&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:S})]}),E?n.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"Loading categories..."})}):n.jsx("div",{className:"data-card",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Image"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:y.map(ce=>n.jsxs("tr",{children:[n.jsxs("td",{children:[ce.image?n.jsx("img",{src:iw(ce.image,!0),alt:ce.name,className:"category-image",onLoad:()=>{console.log(` Category image loaded: ${ce.name}`,iw(ce.image))},onError:X=>{const J="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","");let Ne=ce.image.replace(/\\/g,"/");Ne.startsWith("/")||(Ne=`/${Ne}`);const Ge=`${J}${Ne}?t=${Date.now()}`;console.log(` Primary image failed for ${ce.name}, trying fallback:`,Ge),X.target.dataset.fallbackAttempted?(console.error(` Both backends failed for ${ce.name}`),X.target.style.display="none",X.target.nextSibling.style.display="flex"):(X.target.dataset.fallbackAttempted="true",X.target.src=Ge)}}):null,n.jsx("div",{className:"category-image-placeholder",style:{display:ce.image?"none":"flex"},children:n.jsx(zl,{size:16})})]}),n.jsx("td",{children:ce.name}),n.jsx("td",{children:fe(ce)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>Se(ce),children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>K(ce),children:n.jsx(La,{size:14})})]})})]},ce._id))})]})}),y.length===0&&!E&&n.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"No categories found for this branch. Add a new category to get started."})}),l&&n.jsx(qne,{category:u,onClose:()=>d(!1),onSave:ue,branches:r,selectedBranch:j}),p&&n.jsx(BI,{category:x,onClose:()=>m(!1),onConfirm:ye}),n.jsxs("div",{style:{marginTop:"40px"},children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Subcategories"}),n.jsxs("button",{className:"btn btn-primary",onClick:Le,children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Subcategory"})]})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search subcategories...",className:"search-input",value:z,onChange:ce=>ee(ce.target.value)})]}),n.jsxs("div",{className:"filter-buttons",children:[n.jsxs("div",{className:"filter-btn",children:[n.jsx(im,{size:16}),n.jsx("span",{children:"Category:"})]}),n.jsxs("select",{className:"filter-select",value:Q,onChange:ce=>ge(ce.target.value),children:[n.jsx("option",{value:"",children:"All Categories"}),e.map(ce=>n.jsx("option",{value:ce._id,children:ce.name},ce._id))]})]})]}),n.jsx("div",{className:"data-card",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:q.length>0?q.map(ce=>{var X,se;return n.jsxs("tr",{children:[n.jsx("td",{children:ce.name}),n.jsx("td",{children:((X=ce.categoryId)==null?void 0:X.name)||"N/A"}),n.jsx("td",{children:((se=ce.branchId)==null?void 0:se.name)||"N/A"}),n.jsx("td",{children:ce.description||"-"}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>ne(ce),children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>Ae(ce),children:n.jsx(La,{size:14})})]})})]},ce._id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"40px",color:"#999"},children:"No subcategories found"})})})]})})]}),M&&n.jsx(Wne,{subcategory:A,onClose:()=>L(!1),onSave:Ve,categories:e,branches:r}),P&&n.jsx(BI,{category:R,onClose:()=>I(!1),onConfirm:te})]})};Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel"});const sw=e=>{if(!e)return null;if(e.startsWith("http"))return e;const r="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","");let a=e.toString().trim().replace(/\\/g,"/");if(a.startsWith("uploads/")){const d=`${r}/${a}`;return console.log(`Image URL: ${e} -> ${d}`),d}if(a.startsWith("/")){const d=`${r}${a}`;return console.log(`Image URL: ${e} -> ${d}`),d}const i=a.split("/"),s=i[i.length-1],l=`${r}/uploads/branch/${s}`;return console.log(`Image URL: ${e} -> ${l}`),l},Gne=({branch:e,onClose:t,onSave:r})=>{var y,C,E,O,S;const a=T=>{if(typeof T=="string"){const k=T.split(",").map(D=>D.trim());return k.length>=4?{street:k.slice(0,-3).join(", "),city:k[k.length-3],state:k[k.length-2],country:k[k.length-1]}:k.length===3?{street:k[0],city:k[1]||"",state:k[2]||"",country:""}:k.length===2?{street:k[0],city:k[1]||"",state:"",country:""}:{street:T,city:"",state:"",country:""}}return T||{street:"",city:"",state:"",country:""}},[i,s]=N.useState({name:(e==null?void 0:e.name)||"",gstNumber:(e==null?void 0:e.gstNumber)||"",address:a(e==null?void 0:e.address),contact:{phone:((y=e==null?void 0:e.contact)==null?void 0:y.phone)||"",email:((C=e==null?void 0:e.contact)==null?void 0:C.email)||""},openingHours:{mondayToFriday:((E=e==null?void 0:e.openingHours)==null?void 0:E.mondayToFriday)||"11:00 AM - 11:00 PM",saturday:((O=e==null?void 0:e.openingHours)==null?void 0:O.saturday)||"11:00 AM - 12:00 AM",sunday:((S=e==null?void 0:e.openingHours)==null?void 0:S.sunday)||"12:00 PM - 10:00 PM"},image:null}),[l,d]=N.useState(e!=null&&e.image?sw(e.image):null),[u,f]=N.useState(!1),[p,m]=N.useState("");N.useEffect(()=>{e!=null&&e.image&&d(sw(e.image))},[e]);const x=T=>{const{name:k,value:D}=T.target;if(k.startsWith("address.")){const F=k.split(".")[1];s({...i,address:{...i.address,[F]:D}})}else if(k.startsWith("contact.")){const F=k.split(".")[1];s({...i,contact:{...i.contact,[F]:D}})}else if(k.startsWith("openingHours.")){const F=k.split(".")[1];s({...i,openingHours:{...i.openingHours,[F]:D}})}else s({...i,[k]:D})},v=T=>{const k=T.target.files[0];if(k){if(k.size>5*1024*1024){m("File size must be less than 5MB");return}if(!k.type.startsWith("image/")){m("Please select a valid image file");return}m(""),s({...i,image:k});const D=new FileReader;D.onloadend=()=>{d(D.result)},D.readAsDataURL(k)}},j=()=>{s({...i,image:null}),d(null);const T=document.getElementById("image-upload");T&&(T.value="")},b=async T=>{T.preventDefault(),f(!0),m("");try{const k=new FormData;k.append("name",i.name),k.append("gstNumber",i.gstNumber);const D=[i.address.street,i.address.city,i.address.state,i.address.country].filter(Boolean).join(", ");k.append("address",D),k.append("contact",JSON.stringify(i.contact)),k.append("openingHours",JSON.stringify(i.openingHours)),i.image&&i.image instanceof File&&k.append("image",i.image),await r(k),t()}catch(k){m(k.message||"Failed to save branch. Please try again.")}finally{f(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:e?"Edit Branch":"Add New Branch"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:b,children:[n.jsxs("div",{className:"modal-body",children:[p&&n.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:p})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Branch Image"}),n.jsxs("div",{className:"image-upload-container",children:[l?n.jsxs("div",{className:"image-preview-wrapper",children:[n.jsx("img",{src:l||"/placeholder.svg",alt:"Branch preview",className:"image-preview",onError:T=>{console.error("Image failed to load:",l),T.target.style.display="none",T.target.nextSibling.style.display="flex"}}),n.jsxs("div",{className:"category-image-placeholder",style:{display:"none",width:"100%",height:"150px",fontSize:"14px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",borderRadius:"8px"},children:[n.jsx(zl,{size:24}),n.jsx("span",{children:"Image not found"})]}),n.jsx("div",{className:"image-overlay",children:n.jsx("button",{type:"button",onClick:j,style:{background:"rgba(220, 38, 38, 0.8)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:n.jsx(ha,{size:16})})})]}):n.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:n.jsxs("div",{className:"image-upload-placeholder",children:[n.jsx(Ro,{size:24}),n.jsx("span",{children:"Click to upload branch image"}),n.jsx("small",{style:{color:"#6b7280",marginTop:"4px"},children:"PNG, JPG up to 5MB"})]})}),n.jsx("input",{type:"file",id:"image-upload",className:"image-upload-input",accept:"image/*",onChange:v})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Basic Information"}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"name",children:["Branch Name ",n.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:i.name,onChange:x,placeholder:"Enter branch name",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"gstNumber",children:"GST Number"}),n.jsx("input",{type:"text",id:"gstNumber",name:"gstNumber",className:"form-input",value:i.gstNumber,onChange:x,placeholder:"Enter GST number"})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Address"}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"address.street",children:["Street Address ",n.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),n.jsx("textarea",{id:"address.street",name:"address.street",className:"form-textarea",value:i.address.street,onChange:x,placeholder:"Enter street address",required:!0,rows:"2"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"address.city",children:"City"}),n.jsx("input",{type:"text",id:"address.city",name:"address.city",className:"form-input",value:i.address.city,onChange:x,placeholder:"Enter city"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"address.state",children:"State"}),n.jsx("input",{type:"text",id:"address.state",name:"address.state",className:"form-input",value:i.address.state,onChange:x,placeholder:"Enter state"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"address.country",children:"Country"}),n.jsx("input",{type:"text",id:"address.country",name:"address.country",className:"form-input",value:i.address.country,onChange:x,placeholder:"Enter country"})]})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Contact Information"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"contact.phone",children:"Phone Number"}),n.jsx("input",{type:"tel",id:"contact.phone",name:"contact.phone",className:"form-input",value:i.contact.phone,onChange:x,placeholder:"Enter phone number"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"contact.email",children:"Email Address"}),n.jsx("input",{type:"email",id:"contact.email",name:"contact.email",className:"form-input",value:i.contact.email,onChange:x,placeholder:"Enter email address"})]})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Opening Hours"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"openingHours.mondayToFriday",children:"Monday - Friday"}),n.jsx("input",{type:"text",id:"openingHours.mondayToFriday",name:"openingHours.mondayToFriday",className:"form-input",value:i.openingHours.mondayToFriday,onChange:x,placeholder:"11:00 AM - 11:00 PM"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"openingHours.saturday",children:"Saturday"}),n.jsx("input",{type:"text",id:"openingHours.saturday",name:"openingHours.saturday",className:"form-input",value:i.openingHours.saturday,onChange:x,placeholder:"11:00 AM - 12:00 AM"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"openingHours.sunday",children:"Sunday"}),n.jsx("input",{type:"text",id:"openingHours.sunday",name:"openingHours.sunday",className:"form-input",value:i.openingHours.sunday,onChange:x,placeholder:"12:00 PM - 10:00 PM"})]})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":e?"Update Branch":"Add Branch"})]})]})]})})},Kne=({branch:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),[s,l]=N.useState(""),d=async()=>{i(!0),l("");try{await r(e._id),t()}catch(u){l(u.message||"Failed to delete branch. Please try again.")}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Branch"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("div",{className:"modal-body",children:[s&&n.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:s})]}),n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"? This will also delete all associated categories and products."]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:d,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Vne=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[i,s]=N.useState(!1),[l,d]=N.useState(null),[u,f]=N.useState(!1),[p,m]=N.useState(null),[x,v]=N.useState(!0),[j,b]=N.useState(""),[y,C]=N.useState("");N.useEffect(()=>{E()},[]);const E=async()=>{v(!0),b("");try{const B=await yr("/branch",{},!0);console.log("Fetched branches from BOTH backends:",B);const M=Array.isArray(B)?B:(B==null?void 0:B.branches)||[];t(M)}catch(B){console.error("Error fetching branches:",B),b("Failed to load branches. Please refresh the page and try again."),t([])}finally{v(!1)}},O=Array.isArray(e)?e.filter(B=>(B.name||"").toLowerCase().includes(r.toLowerCase())||(B.address||"").toLowerCase().includes(r.toLowerCase())):[],S=()=>{d(null),s(!0)},T=B=>{d(B),s(!0)},k=B=>{m(B),f(!0)},D=async B=>{try{let M;return l?(M=await yr(`/branch/${l._id}`,{method:"PUT",body:B}),t(L=>Array.isArray(L)?L.map(A=>A._id===l._id?M:A):[M]),C(`Branch "${M.name}" updated successfully`)):(M=await yr("/branch",{method:"POST",body:B}),t(L=>Array.isArray(L)?[...L,M]:[M]),C(`Branch "${M.name}" created successfully`)),setTimeout(()=>{C("")},3e3),!0}catch(M){console.error("Error saving branch:",M);let L="Failed to save branch";throw M.message&&(L=M.message),new Error(L)}},F=async B=>{try{const M=yr(`/branch/${B}`,{method:"DELETE"}).catch(A=>(console.warn("Branch endpoint delete failed:",A),null)),L=yr(`/hotel/${B}`,{method:"DELETE"}).catch(A=>(console.warn("Restaurant endpoint delete failed:",A),null));return await Promise.allSettled([M,L]),t(A=>Array.isArray(A)?A.filter(U=>U._id!==B):[]),C("Branch deleted successfully from all backends"),setTimeout(()=>{C("")},3e3),!0}catch(M){throw console.error("Error deleting branch:",M),new Error(M.message||"Failed to delete branch")}};return n.jsxs("div",{className:"branches-page",children:[y&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:y}),n.jsx("button",{onClick:()=>C(""),children:n.jsx("span",{children:""})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Branches"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:S,children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Branch"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search branches by name or address...",className:"search-input",value:r,onChange:B=>a(B.target.value)})]})}),j&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:j})]}),x?n.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"Loading branches..."})}):n.jsx("div",{className:"grid-container",children:O.length>0?O.filter(B=>B&&B._id).map((B,M)=>n.jsxs("div",{className:"grid-item",children:[n.jsx("div",{className:"grid-item-image-container",children:(()=>{const L=sw(B.image);return console.log("=== BRANCH DETAILS ==="),console.log(`Branch ID: ${B._id}`),console.log(`Branch Name: ${B.name}`),console.log(`Branch Address: ${B.address}`),console.log(`Branch Image Raw Path: ${B.image}`),console.log(`Branch Image Full URL: ${L}`),console.log(`Branch Created: ${B.createdAt}`),console.log("========================"),L?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:L||"/placeholder.svg",alt:B.name,className:"grid-item-image",onLoad:()=>console.log(`Image loaded successfully: ${L}`),onError:A=>{const P="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel",""),I=B.image.toString().trim().replace(/\\/g,"/").replace(/^\//,""),R=`${P}/${I}`;A.target.src!==R?(console.log(`Trying secondary backend: ${R}`),A.target.src=R):(console.error(`Image failed to load from both backends: ${L}`),A.target.style.display="none"),A.target.nextSibling&&(A.target.nextSibling.style.display="flex")}}),n.jsxs("div",{className:"category-image-placeholder",style:{display:"none",width:"100%",height:"200px",fontSize:"16px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[n.jsx(zl,{size:24}),n.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"Image failed to load"})]})]}):n.jsxs("div",{className:"category-image-placeholder",style:{display:"flex",width:"100%",height:"200px",fontSize:"16px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[n.jsx(ff,{size:24}),n.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"No Image"})]})})()}),n.jsxs("div",{className:"grid-item-content",children:[n.jsx("h3",{className:"grid-item-title",children:B.name}),n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px"},children:[n.jsx(ff,{size:16,style:{marginRight:"8px",color:"#6b7280",marginTop:"2px",flexShrink:0}}),n.jsx("p",{className:"grid-item-subtitle",style:{lineHeight:"1.4"},children:B.address})]}),n.jsx("div",{className:"grid-item-footer",children:n.jsxs("div",{className:"grid-item-actions",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>T(B),children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>k(B),children:n.jsx(La,{size:14})})]})})]})]},B._id||`branch-${M}`)):n.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0",gridColumn:"1 / -1"},children:n.jsxs("p",{children:["No branches found. ",r?"Try a different search term.":"Add a new branch to get started."]})})}),i&&n.jsx(Gne,{branch:l,onClose:()=>s(!1),onSave:D}),u&&n.jsx(Kne,{branch:p,onClose:()=>f(!1),onConfirm:F})]})},Yne=({user:e,onClose:t,onSave:r,isEditMode:a})=>{const[i,s]=N.useState({name:(e==null?void 0:e.name)||"",mobile:(e==null?void 0:e.mobile)||"",email:(e==null?void 0:e.email)||"",image:null}),[l,d]=N.useState(e!=null&&e.image?`${e.image.startsWith("http")?"":"https://hotelvirat.com/"}${e.image}`:null),[u,f]=N.useState(null),p=v=>{const{name:j,value:b}=v.target;s({...i,[j]:b}),f(null)},m=v=>{const j=v.target.files[0];if(j){s({...i,image:j});const b=new FileReader;b.onloadend=()=>d(b.result),b.readAsDataURL(j)}},x=async v=>{v.preventDefault(),f(null);const j=new FormData;j.append("name",i.name),j.append("mobile",i.mobile),a&&i.email&&j.append("email",i.email),i.image&&j.append("image",i.image);try{await r(j,e==null?void 0:e._id),t()}catch(b){f(b.message||"Failed to save user")}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:a?"Edit User":"Add New User"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:x,children:[n.jsxs("div",{className:"modal-body",children:[u&&n.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:u}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:i.name,onChange:p,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"mobile",children:["Mobile ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:i.mobile,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit mobile number"})]}),a&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),n.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:i.email,onChange:p})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Profile Image"}),n.jsxs("div",{className:"image-upload-container",children:[n.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:l?n.jsxs("div",{className:"image-preview-wrapper",children:[n.jsx("img",{src:l,alt:"User preview",className:"image-preview"}),n.jsx("div",{className:"image-overlay",children:n.jsx("span",{children:"Change Image"})})]}):n.jsxs("div",{className:"image-upload-placeholder",children:[n.jsx(zl,{size:24}),n.jsx("span",{children:"Upload Profile Image"})]})}),n.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:m,className:"image-upload-input"})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:a?"Update User":"Add User"})]})]})]})})},Xne=({user:e,onClose:t,onConfirm:r})=>n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete User"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:()=>{r(e._id),t()},children:"Delete"})]})]})}),Qne=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[i,s]=N.useState(!1),[l,d]=N.useState(null),[u,f]=N.useState(!1),[p,m]=N.useState(null),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState(!1),E=async()=>{C(!0);try{const M=await yr("/user-auth/all"),A=(Array.isArray(M)?M:[]).sort((U,P)=>new Date(P.createdAt)-new Date(U.createdAt));t(A)}catch(M){b(M.message),t([])}finally{C(!1)}};N.useEffect(()=>{E()},[]);const O=()=>{d(null),s(!0)},S=M=>{d(M),s(!0)},T=M=>{m(M),f(!0)},k=async(M,L)=>{try{const A=L?`/user-auth/${L}`:"/user-auth/";await yr(A,{method:L?"PUT":"POST",body:M}),v(`User ${L?"updated":"added"} successfully`),setTimeout(()=>v(""),3e3),await E()}catch(A){throw new Error(A.message)}},D=async M=>{try{await yr(`/user-auth/${M}`,{method:"DELETE"}),v("User deleted successfully"),setTimeout(()=>v(""),3e3),await E()}catch(L){b(L.message),setTimeout(()=>b(""),3e3)}},F=M=>{const L={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(M).toLocaleDateString(void 0,L)},B=Array.isArray(e)?e.filter(M=>M.name.toLowerCase().includes(r.toLowerCase())||M.mobile.includes(r)||M.email&&M.email.toLowerCase().includes(r.toLowerCase())):[];return n.jsxs("div",{className:"users-page",children:[x&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:x}),n.jsx("button",{onClick:()=>v(""),children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&n.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[n.jsx("span",{children:j}),n.jsx("button",{onClick:()=>b(""),style:{color:"#dc2626"},children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Users"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:O,disabled:y,children:[n.jsx(Ad,{size:16}),n.jsx("span",{children:"Add User"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search users...",className:"search-input",value:r,onChange:M=>a(M.target.value)})]})}),n.jsx("div",{className:"data-card",children:y?n.jsx("div",{className:"empty-state",children:"Loading users..."}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Mobile"}),n.jsx("th",{children:"Created At"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:B.map(M=>n.jsxs("tr",{children:[n.jsx("td",{children:M._id.slice(-6)}),n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[M.image?n.jsx("img",{src:`${M.image.startsWith("http")?"":"https://hotelvirat.com/"}${M.image}`,alt:M.name,className:"user-avatar"}):n.jsx("div",{className:"user-avatar-placeholder",children:M.name.charAt(0).toUpperCase()}),M.name]})}),n.jsx("td",{children:M.email?n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(Js,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),M.email]}):n.jsx("span",{style:{color:"#9ca3af"},children:"Not provided"})}),n.jsx("td",{children:n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(Ai,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),M.mobile]})}),n.jsx("td",{children:F(M.createdAt)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>S(M),disabled:y,children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>T(M),disabled:y,children:n.jsx(La,{size:14})})]})})]},M._id))})]})}),B.length===0&&!y&&n.jsx("div",{className:"empty-state",children:n.jsxs("p",{children:["No users found. ",r?"Try a different search.":"Add a new user to get started."]})}),i&&n.jsx(Yne,{user:l,onClose:()=>s(!1),onSave:k,isEditMode:!!l}),u&&n.jsx(Xne,{user:p,onClose:()=>f(!1),onConfirm:D})]})},Jne=({coupon:e,onClose:t,onSave:r})=>{const[a,i]=N.useState({code:(e==null?void 0:e.code)||"",description:(e==null?void 0:e.description)||"",discountType:(e==null?void 0:e.discountType)||"percentage",discountValue:(e==null?void 0:e.discountValue)||"",minOrderValue:(e==null?void 0:e.minOrderValue)||"",startDate:e!=null&&e.startDate?new Date(e.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:e!=null&&e.endDate?new Date(e.endDate).toISOString().split("T")[0]:"",usageLimit:(e==null?void 0:e.usageLimit)||"",image:null}),[s,l]=N.useState(e==null?void 0:e.image),[d,u]=N.useState(!1),[f,p]=N.useState(null),[m,x]=N.useState([]),[v,j]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const T=await fetch("https://hotelvirat.com/api/v1/hotel/coupon");if(T.ok){const k=await T.json();x(k.map(D=>D.code.toLowerCase()))}}catch(T){console.log("Could not fetch existing coupons:",T)}})()},[]);const b=S=>{const{name:T,value:k}=S.target;i({...a,[T]:["discountValue","minOrderValue","usageLimit"].includes(T)?k===""?"":Number.parseFloat(k):k})},y=S=>m.includes(S.toLowerCase()),C=()=>{const S=new Date().getFullYear(),T=new Date().getMonth()+1,k=new Date().getDate(),D=Date.now().toString().slice(-4),F=["WELCOME","SAVE","DISCOUNT","FIRST","NEWYEAR","HOTEL","VIRAT","SPECIAL","OFFER","DEAL"],B=[S.toString(),S.toString().slice(-2),`${T}${S.toString().slice(-2)}`,`${k}${T}`,D,Math.floor(Math.random()*1e3)+100,Math.floor(Math.random()*50)+10];for(let M=0;M<50;M++){const L=F[Math.floor(Math.random()*F.length)],A=B[Math.floor(Math.random()*B.length)],U=`${L}${A}`;if(!y(U))return U}return`UNIQUE${D}${Math.floor(Math.random()*100)}`},E=S=>{const T=S.target.files[0];if(T){i({...a,image:T});const k=new FileReader;k.onloadend=()=>{l(k.result)},k.readAsDataURL(T)}},O=async S=>{S.preventDefault(),u(!0),p(null);try{await r(a),t()}catch(T){p(T.message||"Failed to save coupon")}finally{u(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:e?"Edit Coupon":"Add New Coupon"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:O,children:[n.jsxs("div",{className:"modal-body",children:[f&&n.jsxs("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsxs("div",{children:[n.jsx("div",{children:f}),f.includes("already exists")&&n.jsx("div",{style:{marginTop:"5px",fontSize:"12px",color:"#991b1b"},children:" Try using a different code like: WELCOME2025, NEWYEAR25, DISCOUNT15, SAVE20, FIRST10"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"code",children:"Coupon Code"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"text",id:"code",name:"code",className:"form-input",value:a.code,onChange:b,required:!0,style:{flex:1,borderColor:a.code&&y(a.code)&&!e?"#ef4444":"#d1d5db"},placeholder:"Enter unique coupon code (e.g., WELCOME2025)"}),n.jsx("button",{type:"button",onClick:()=>{const S=C();i({...a,code:S})},style:{padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap",fontWeight:"500"},children:" Generate"})]}),a.code&&!e&&n.jsx("div",{style:{marginTop:"6px",fontSize:"12px"},children:y(a.code)?n.jsx("div",{style:{color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},children:" This code already exists! Try a different one."}):n.jsx("div",{style:{color:"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:" This code is available!"})}),n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"6px"},children:' Click "Generate" for a guaranteed unique code'}),m.length>0&&n.jsxs("details",{style:{marginTop:"8px"},children:[n.jsxs("summary",{style:{fontSize:"12px",color:"#6b7280",cursor:"pointer"},children:[" View existing coupon codes (",m.length," total)"]}),n.jsxs("div",{style:{marginTop:"4px",padding:"8px",backgroundColor:"#f9fafb",borderRadius:"4px",fontSize:"11px",maxHeight:"100px",overflowY:"auto"},children:[m.slice(0,20).map((S,T)=>n.jsx("span",{style:{display:"inline-block",margin:"2px",padding:"2px 6px",backgroundColor:"#e5e7eb",borderRadius:"3px",textTransform:"uppercase"},children:S},T)),m.length>20&&n.jsxs("div",{style:{marginTop:"4px",color:"#6b7280"},children:["... and ",m.length-20," more"]})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"description",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",className:"form-textarea",value:a.description,onChange:b,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Coupon Image"}),n.jsxs("div",{className:"image-upload-container",children:[n.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:s?n.jsxs("div",{className:"image-preview-wrapper",children:[n.jsx("img",{src:s||"/placeholder.svg",alt:"Coupon preview",className:"image-preview"}),n.jsx("div",{className:"image-overlay",children:n.jsx("span",{children:"Change Image"})})]}):n.jsxs("div",{className:"image-upload-placeholder",children:[n.jsx(zl,{size:24}),n.jsx("span",{children:"Upload Coupon Image"})]})}),n.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:E,className:"image-upload-input"})]})]}),n.jsxs("div",{className:"form-grid",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"discountType",children:"Discount Type"}),n.jsxs("select",{id:"discountType",name:"discountType",className:"form-select",value:a.discountType,onChange:b,required:!0,children:[n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"discountValue",children:a.discountType==="percentage"?"Discount Percentage":"Discount Amount ()"}),n.jsx("input",{type:"number",id:"discountValue",name:"discountValue",className:"form-input",value:a.discountValue,onChange:b,min:"0",step:a.discountType==="percentage"?"1":"0.01",required:!0})]})]}),n.jsx("div",{className:"form-grid",children:n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"minOrderValue",children:"Minimum Order Value ()"}),n.jsx("input",{type:"number",id:"minOrderValue",name:"minOrderValue",className:"form-input",value:a.minOrderValue,onChange:b,min:"0",step:"0.01",required:!0})]})}),n.jsxs("div",{className:"form-grid",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"startDate",children:"Valid From"}),n.jsx("input",{type:"date",id:"startDate",name:"startDate",className:"form-input",value:a.startDate,onChange:b,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"endDate",children:"Valid To"}),n.jsx("input",{type:"date",id:"endDate",name:"endDate",className:"form-input",value:a.endDate,onChange:b,required:!0})]})]}),n.jsx("div",{className:"form-grid",children:n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"usageLimit",children:"Usage Limit"}),n.jsx("input",{type:"number",id:"usageLimit",name:"usageLimit",className:"form-input",value:a.usageLimit,onChange:b,min:"1",step:"1",required:!0})]})})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Saving...":e?"Update Coupon":"Add Coupon"})]})]})]})})},Zne=({coupon:e,onClose:t,onConfirm:r,loading:a})=>n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Coupon"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete coupon ",n.jsx("strong",{children:e.code}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:()=>r(e._id),disabled:a,children:a?"Deleting...":"Delete"})]})]})}),eae=({message:e,onClose:t})=>(N.useEffect(()=>{const r=setTimeout(()=>{t()},3e3);return()=>clearTimeout(r)},[t]),n.jsxs("div",{className:"success-message",children:[e,n.jsx("button",{onClick:t,children:""})]})),tae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[i,s]=N.useState(!1),[l,d]=N.useState(null),[u,f]=N.useState(!1),[p,m]=N.useState(null),[x,v]=N.useState(!1),[j,b]=N.useState(null),[y,C]=N.useState(null),[E,O]=N.useState(!0),S=async()=>{O(!0);try{const U=await fetch("https://hotelvirat.com/api/v1/hotel/coupon");if(!U.ok)throw new Error("Failed to fetch coupons");const P=await U.json();let I=[];P.success&&Array.isArray(P.data)?I=P.data:Array.isArray(P)?I=P:P.message&&P.message.includes("routes working")&&(I=[]),t(I)}catch(A){b(A.message||"Failed to fetch coupons"),console.error("Error fetching Coupons:",A),t([])}finally{O(!1)}};N.useEffect(()=>{S()},[]);const T=()=>{d(null),s(!0)},k=A=>{d(A),s(!0)},D=A=>{m(A),f(!0)},F=async A=>{v(!0);try{const U=new FormData;U.append("code",A.code),U.append("description",A.description),U.append("discountType",A.discountType),U.append("discountValue",A.discountValue),U.append("minOrderValue",A.minOrderValue),U.append("startDate",A.startDate),U.append("endDate",A.endDate),U.append("usageLimit",A.usageLimit),U.append("isActive","true"),A.image&&U.append("image",A.image);let P;if(l?P=await fetch(`https://hotelvirat.com/api/v1/hotel/coupon/${l._id}`,{method:"PUT",body:U}):P=await fetch("https://hotelvirat.com/api/v1/hotel/coupon",{method:"POST",body:U}),!P.ok){const R=await P.json();throw new Error(R.message||"Failed to save coupon")}const I=await P.json();return await S(),C(l?"Coupon updated successfully":"Coupon created successfully"),I}catch(U){throw console.error("Error saving coupon:",U),U}finally{v(!1)}},B=async A=>{v(!0);try{const U=await fetch(`https://hotelvirat.com/api/v1/hotel/coupon/${A}`,{method:"DELETE"});if(!U.ok){const P=await U.json();throw new Error(P.message||"Failed to delete coupon")}await S(),C("Coupon deleted successfully")}catch(U){console.error("Error deleting coupon:",U),b(U.message||"Failed to delete coupon")}finally{v(!1),f(!1)}},M=(Array.isArray(e)?e:[]).filter(A=>A.code.toLowerCase().includes(r.toLowerCase())||A.description.toLowerCase().includes(r.toLowerCase())),L=A=>A?new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return n.jsxs("div",{className:"coupons-page",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Coupons"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:T,children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Coupon"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search coupons...",className:"search-input",value:r,onChange:A=>a(A.target.value)})]})}),j&&n.jsxs("div",{style:{padding:"15px",marginBottom:"20px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),j,n.jsx("button",{onClick:()=>b(null),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),E?n.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"Loading coupons..."})}):n.jsx("div",{className:"data-card",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Image"}),n.jsx("th",{children:"Code"}),n.jsx("th",{children:"Description"}),n.jsx("th",{children:"Discount"}),n.jsx("th",{children:"Min. Order"}),n.jsx("th",{children:"Validity"}),n.jsx("th",{children:"Usage"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:M.map(A=>n.jsxs("tr",{children:[n.jsx("td",{children:A.image?n.jsx("div",{className:"coupon-image-cell",children:n.jsx("img",{src:`${A.image}`,alt:A.code,className:"coupon-image",onError:U=>{U.target.onerror=null,U.target.src="https://via.placeholder.com/50"}})}):n.jsx("div",{className:"coupon-image-placeholder",children:n.jsx(zl,{size:16})})}),n.jsx("td",{children:n.jsx("span",{style:{fontWeight:"600",color:"#f97316"},children:A.code})}),n.jsx("td",{children:A.description}),n.jsx("td",{children:A.discountType==="percentage"?n.jsxs("span",{children:[A.discountValue,"%"]}):n.jsxs("span",{children:["",A.discountValue]})}),n.jsxs("td",{children:["",A.minOrderValue]}),n.jsx("td",{children:n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(an,{size:14,style:{marginRight:"4px",color:"#6b7280"}}),L(A.startDate)," - ",L(A.endDate)]})}),n.jsxs("td",{children:[A.usageCount," / ",A.usageLimit||"",n.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",marginTop:"4px"},children:n.jsx("div",{style:{width:`${A.usageLimit?A.usageCount/A.usageLimit*100:0}%`,height:"100%",backgroundColor:"#f97316",borderRadius:"2px"}})})]}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>k(A),children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>D(A),children:n.jsx(La,{size:14})})]})})]},A._id))})]})}),!E&&M.length===0&&n.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"No coupons found. Add a new coupon to get started."})}),i&&n.jsx(Jne,{coupon:l,onClose:()=>s(!1),onSave:F}),u&&n.jsx(Zne,{coupon:p,onClose:()=>f(!1),onConfirm:B,loading:x}),y&&n.jsx(eae,{message:y,onClose:()=>C(null)})]})},rae=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),nae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(!0),[i,s]=N.useState(""),[l,d]=N.useState(1),[u,f]=N.useState(1),[p,m]=N.useState(""),[x,v]=N.useState("date"),[j,b]=N.useState("desc"),[y,C]=N.useState(null),[E,O]=N.useState(!1),S=7;N.useEffect(()=>{(async()=>{a(!0),s("");try{const R={page:l,limit:S};p.trim()&&(R.search=p.trim());const W=await rae.get("/order",{params:R});let Q=[];W.data.success&&Array.isArray(W.data.data)?Q=W.data.data:W.data.orders&&Array.isArray(W.data.orders)?Q=W.data.orders:Array.isArray(W.data)?Q=W.data:(console.error(" Unexpected response format:",W.data),Q=[]);const ge=Q.map(Y=>({id:Y._id,orderId:Y.orderNumber,customer:Y.name,date:new Date(Y.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),amount:Y.total,method:Y.paymentMethod,items:Y.items,discount:Y.discount,tax:Y.tax,subtotal:Y.subtotal,deliveryFee:Y.deliveryFee}));t(ge);let q=1;W.data&&W.data.pagination&&W.data.pagination.totalPages?q=W.data.pagination.totalPages:q=Math.ceil(Q.length/S)||1,f(q)}catch(R){console.error("Error fetching payments:",R),s("Failed to load payments. Please try again."),t([]),f(1)}finally{a(!1)}})()},[l,p]);const D=[...e.filter(I=>{const R=p.toLowerCase();return I.orderId.toLowerCase().includes(R)||I.customer.toLowerCase().includes(R)})].sort((I,R)=>x==="date"?j==="asc"?new Date(I.date)-new Date(R.date):new Date(R.date)-new Date(I.date):x==="amount"?j==="asc"?I.amount-R.amount:R.amount-I.amount:0).slice(0,S),F=I=>{switch(I){case"card":return n.jsx(Na,{className:"h-5 w-5"});case"upi":return n.jsx(hf,{className:"h-5 w-5"});case"cash":return n.jsx("span",{className:"rupees-icon",children:""});default:return n.jsx(Na,{className:"h-5 w-5"})}},B=I=>{C(I),O(!0)},M=()=>{O(!1),C(null)},L=I=>{x===I?b(j==="asc"?"desc":"asc"):(v(I),b("desc"))},A=I=>{if(I==null)return"";const R=I.toString();return R.includes(",")||R.includes('"')||R.includes(`
`)?`"${R.replace(/"/g,'""')}"`:R},U=()=>{let R=["Order ID","Customer","Date","Subtotal","Discount","Tax","Delivery Fee","Total","Payment Method"].map(A).join(",")+`
`;e.forEach(Y=>{const z=[Y.orderId,Y.customer,Y.date,`${Y.subtotal.toFixed(2)}`,`${Y.discount.toFixed(2)}`,`${Y.tax.toFixed(2)}`,`${Y.deliveryFee.toFixed(2)}`,`${Y.amount.toFixed(2)}`,Y.method.charAt(0).toUpperCase()+Y.method.slice(1)];R+=z.map(A).join(",")+`
`});const W="\uFEFF",Q=new Blob([W+R],{type:"text/csv;charset=utf-8;"}),ge=window.URL.createObjectURL(Q),q=document.createElement("a");q.setAttribute("hidden",""),q.setAttribute("href",ge),q.setAttribute("download",`payments-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(q),q.click(),document.body.removeChild(q)},P=()=>{const I=[];if(u<=7)for(let R=1;R<=u;R++)I.push(R);else{I.push(1);let R=Math.max(2,l-2),W=Math.min(u-1,l+2);l<=4&&(W=5),l>=u-3&&(R=u-4),R>2&&I.push("...");for(let Q=R;Q<=W;Q++)I.push(Q);W<u-1&&I.push("..."),u>1&&I.push(u)}return I};return n.jsxs("div",{className:"payment-ui",children:[n.jsx("div",{className:"page-header",children:n.jsx("h1",{children:"Payments"})}),i&&n.jsx("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:n.jsx("span",{children:i})}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{className:"search-icon"}),n.jsx("input",{type:"text",className:"search-input",placeholder:"Search by order ID or customer name",value:p,onChange:I=>m(I.target.value)})]}),n.jsx("div",{className:"filter-buttons",children:n.jsxs("button",{className:"filter-btn",onClick:U,children:[n.jsx(Ca,{className:"h-4 w-4"}),n.jsx("span",{children:"Export"})]})})]}),n.jsx("div",{className:"data-card",children:n.jsx("div",{className:"card-body",children:r?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Loading payments..."})]}):D.length===0?n.jsx("div",{className:"empty-state",children:n.jsx("p",{children:"No payments found matching your search."})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Order ID"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{className:"sortable-header",onClick:()=>L("date"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Date"}),x==="date"&&(j==="asc"?n.jsx($o,{className:"h-4 w-4"}):n.jsx(zo,{className:"h-4 w-4"}))]})}),n.jsx("th",{className:"sortable-header",onClick:()=>L("amount"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Amount"}),x==="amount"&&(j==="asc"?n.jsx($o,{className:"h-4 w-4"}):n.jsx(zo,{className:"h-4 w-4"}))]})}),n.jsx("th",{children:"Payment Method"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:D.map(I=>n.jsxs("tr",{children:[n.jsx("td",{children:I.orderId}),n.jsx("td",{children:I.customer}),n.jsx("td",{children:I.date}),n.jsxs("td",{children:["",I.amount.toFixed(2)]}),n.jsx("td",{children:n.jsxs("div",{className:"payment-method",children:[F(I.method),n.jsx("span",{className:"payment-method-text",children:I.method.charAt(0).toUpperCase()+I.method.slice(1)})]})}),n.jsx("td",{children:n.jsx("div",{className:"action-buttons",children:n.jsx("button",{className:"action-btn view",onClick:()=>B(I),children:"View"})})})]},I.id))})]})})}),n.jsxs("div",{className:"pagination",children:[n.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:l===1,onClick:()=>d(I=>Math.max(I-1,1)),children:[n.jsx(ih,{className:"h-4 w-4"}),n.jsx("span",{children:"Previous"})]}),n.jsx("div",{className:"pagination-pages",children:P().map((I,R)=>I==="..."?n.jsx("span",{className:"pagination-ellipsis",children:"..."},R):n.jsx("button",{className:`pagination-page ${l===I?"active":""}`,onClick:()=>d(I),children:I},R))}),n.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:l===u,onClick:()=>d(I=>Math.min(I+1,u)),children:[n.jsx("span",{children:"Next"}),n.jsx(sh,{className:"h-4 w-4"})]})]}),E&&y&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{className:"modal-title",children:"Payment Details"}),n.jsx("button",{className:"modal-close",onClick:M,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"payment-details",children:[n.jsxs("div",{className:"payment-info-grid",children:[n.jsxs("div",{className:"payment-info-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Payment Information"}),n.jsxs("div",{className:"payment-info-content",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Order ID:"}),n.jsx("span",{className:"info-value",children:y.orderId})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Date:"}),n.jsx("span",{className:"info-value",children:y.date})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Subtotal:"}),n.jsxs("span",{className:"info-value",children:["",y.subtotal.toFixed(2)]})]}),y.discount>0&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Discount:"}),n.jsxs("span",{className:"info-value",style:{color:"#22c55e"},children:["-",y.discount.toFixed(2)]})]}),y.tax>0&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Tax:"}),n.jsxs("span",{className:"info-value",children:["",y.tax.toFixed(2)]})]}),y.deliveryFee>0&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Delivery Fee:"}),n.jsxs("span",{className:"info-value",children:["",y.deliveryFee.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Total Amount:"}),n.jsxs("span",{className:"info-value",children:["",y.amount.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Payment Method:"}),n.jsx("span",{className:"info-value",children:n.jsxs("div",{className:"payment-method",children:[F(y.method),n.jsx("span",{className:"payment-method-text",children:y.method.charAt(0).toUpperCase()+y.method.slice(1)})]})})]})]})]}),n.jsxs("div",{className:"payment-info-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Customer Information"}),n.jsx("div",{className:"payment-info-content",children:n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Name:"}),n.jsx("span",{className:"info-value",children:y.customer})]})})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Order Items"}),n.jsxs("table",{className:"order-items-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:y.items.map((I,R)=>n.jsxs("tr",{children:[n.jsx("td",{children:I.name}),n.jsx("td",{children:I.quantity}),n.jsxs("td",{children:["",I.price.toFixed(2)]}),n.jsxs("td",{children:["",(I.quantity*I.price).toFixed(2)]})]},R))}),n.jsxs("tfoot",{children:[n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Subtotal"}),n.jsxs("td",{className:"total-value",children:["",y.subtotal.toFixed(2)]})]}),y.discount>0&&n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Discount"}),n.jsxs("td",{className:"total-value",style:{color:"#22c55e"},children:["-",y.discount.toFixed(2)]})]}),y.tax>0&&n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Tax"}),n.jsxs("td",{className:"total-value",children:["",y.tax.toFixed(2)]})]}),y.deliveryFee>0&&n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Delivery Fee"}),n.jsxs("td",{className:"total-value",children:["",y.deliveryFee.toFixed(2)]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Total"}),n.jsxs("td",{className:"total-value",children:["",y.amount.toFixed(2)]})]})]})]})]})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-outline",onClick:M,children:"Close"})})]})}),n.jsx("style",{jsx:!0,children:`
        .loading-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
        }

        .loading-spinner {
          border: 4px solid rgba(0, 0, 0, 0.1);
          border-left-color: var(--primary-color);
          border-radius: 50%;
          width: 30px;
          height: 30px;
          animation: spin 1s linear infinite;
          margin-bottom: 10px;
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }

        .sortable-header {
          cursor: pointer;
        }

        .sort-header {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .payment-method {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .payment-method-text {
          font-size: 14px;
        }

        .rupees-icon {
          display: flex;
          align-items: center;
          font-size: 18px;
          line-height: 1;
        }

        .payment-details {
          padding: 10px 0;
        }

        .payment-info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }

        @media (max-width: 768px) {
          .payment-info-grid {
            grid-template-columns: 1fr;
          }
        }

        .payment-info-section {
          background-color: var(--bg-light);
          border-radius: var(--radius-md);
          overflow: hidden;
        }

        .payment-info-title {
          font-size: 16px;
          font-weight: 600;
          padding: 12px 16px;
          background-color: var(--bg-white);
          border-bottom: 1px solid var(--border-color);
        }

        .payment-info-content {
          padding: 16px;
        }

        .info-row {
          display: flex;
          margin-bottom: 10px;
        }

        .info-label {
          width: 140px;
          font-weight: 500;
          color: var(--text-light);
        }

        .info-value {
          flex: 1;
          font-weight: 500;
        }

        .order-items-section {
          margin-top: 20px;
        }

        .order-items-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }

        .order-items-table th {
          text-align: left;
          padding: 12px;
          background-color: var(--bg-light);
          font-weight: 500;
          color: var(--text-light);
        }

        .order-items-table td {
          padding: 12px;
          border-bottom: 1px solid var(--border-color);
        }

        .order-items-table tfoot td {
          padding: 12px;
          font-weight: 600;
        }

        .total-label {
          text-align: right;
          font-weight: 600;
        }

        .total-value {
          font-weight: 700;
          color: var(--primary-color);
        }

        .pagination-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4px;
          padding: 8px 16px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-page {
          padding: 8px 12px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-page.active {
          background-color: var(--primary-color);
          color: white;
          border-color: var(--primary-color);
        }

        .pagination-ellipsis {
          padding: 8px 12px;
          color: var(--text-light);
          display: inline-flex;
          align-items: center;
          justify-content: center;
        }
      `})]})},aae=()=>{const[e,t]=N.useState(null),[r,a]=N.useState(!1),[i,s]=N.useState({title:"",mobile:"",email:""}),[l,d]=N.useState(!1),[u,f]=N.useState(null),[p,m]=N.useState(null);N.useEffect(()=>{(async()=>{var b,y,C;d(!0);try{const E=await Yt.get("https://hotelvirat.com/api/v1/hotel/help-support");t(E.data),s({title:E.data.title,mobile:E.data.mobile,email:E.data.email})}catch(E){((b=E.response)==null?void 0:b.status)!==404&&f(((C=(y=E.response)==null?void 0:y.data)==null?void 0:C.message)||"Failed to fetch help and support information")}finally{d(!1)}})()},[]);const x=j=>{const{name:b,value:y}=j.target;s({...i,[b]:y})},v=async j=>{var b,y;j.preventDefault(),d(!0),f(null),m(null);try{let C;e!=null&&e._id?C=await Yt.put(`https://hotelvirat.com/api/v1/hotel/help-support/${e._id}`,i):C=await Yt.post("https://hotelvirat.com/api/v1/hotel/help-support",i),t(C.data.helpSupport),s({title:C.data.helpSupport.title,mobile:C.data.helpSupport.mobile,email:C.data.helpSupport.email}),a(!1),m("Help and support information saved successfully!"),setTimeout(()=>m(null),3e3)}catch(C){f(((y=(b=C.response)==null?void 0:b.data)==null?void 0:y.message)||"Failed to save help and support information")}finally{d(!1)}};return l&&!e?n.jsx("div",{className:"empty-state",children:"Loading..."}):u&&!e?n.jsx("div",{className:"empty-state",children:u}):n.jsxs("div",{className:"help-support-page",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Help & Support"}),!r&&n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>a(!0),children:[n.jsx(Aa,{size:16}),n.jsx("span",{children:"Edit Information"})]})})]}),p&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:p}),n.jsx("button",{onClick:()=>m(null),children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"card",children:r?n.jsx("form",{onSubmit:v,children:n.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[u&&n.jsxs("div",{className:"alert-message",children:[n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{children:u})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"title",children:"Title"}),n.jsx("input",{type:"text",id:"title",name:"title",className:"form-input",value:i.title,onChange:x,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"mobile",children:"Mobile Number"}),n.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:i.mobile,onChange:x,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"email",children:"Email Address"}),n.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:i.email,onChange:x,required:!0})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{s(e?{title:e.title,mobile:e.mobile,email:e.email}:{title:"",mobile:"",email:""}),a(!1),f(null)},disabled:l,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?n.jsx("span",{children:"Saving..."}):n.jsxs(n.Fragment,{children:[n.jsx(H3,{size:16}),n.jsx("span",{children:"Save Changes"})]})})]})]})}):n.jsx("div",{className:"card-body",style:{padding:"20px"},children:e?n.jsxs("div",{className:"contact-info-container",children:[n.jsx("div",{className:"contact-header",children:n.jsx("h3",{children:e.title})}),n.jsxs("div",{className:"contact-details",children:[n.jsxs("div",{className:"contact-item",children:[n.jsx("div",{className:"contact-icon",children:n.jsx(Ai,{size:20})}),n.jsxs("div",{className:"contact-content",children:[n.jsx("h4",{children:"Mobile Number"}),n.jsx("p",{children:e.mobile})]})]}),n.jsxs("div",{className:"contact-item",children:[n.jsx("div",{className:"contact-icon",children:n.jsx(Js,{size:20})}),n.jsxs("div",{className:"contact-content",children:[n.jsx("h4",{children:"Email Address"}),n.jsx("p",{children:e.email})]})]})]})]}):n.jsx("div",{className:"empty-state",children:"No help and support information available."})})})]})},iae=()=>{const[e,t]=N.useState(null),[r,a]=N.useState(!1),[i,s]=N.useState({description:"",mission:""}),[l,d]=N.useState(!1),[u,f]=N.useState(null),[p,m]=N.useState(null),x=async()=>{try{d(!0),f(null);const b=await fetch("https://hotelvirat.com/api/v1/hotel/about-us");if(b.ok){const y=await b.json(),C=y.data||y;C&&C._id?(t(C),s({description:C.description||"",mission:C.mission||""})):(t(null),s({description:"",mission:""}))}else if(b.status===404)t(null),s({description:"",mission:""}),f(null);else throw new Error("Failed to fetch About Us data")}catch(b){console.error("Fetch error:",b),f(b.message),t(null)}finally{d(!1)}};N.useEffect(()=>{x()},[]);const v=b=>{const{name:y,value:C}=b.target;s({...i,[y]:C})},j=async b=>{if(b.preventDefault(),d(!0),f(null),m(null),!i.description.trim()||!i.mission.trim()){f("Both description and mission are required"),d(!1);return}if(i.description.trim().length<10){f("Description must be at least 10 characters long"),d(!1);return}if(i.mission.trim().length<10){f("Mission must be at least 10 characters long"),d(!1);return}try{const y="https://hotelvirat.com/api/v1",C=e?`${y}/hotel/about-us/${e._id}`:`${y}/hotel/about-us`,E=e?"PUT":"POST";console.log(`Making ${E} request to:`,C);const O=await fetch(C,{method:E,headers:{"Content-Type":"application/json"},body:JSON.stringify({description:i.description.trim(),mission:i.mission.trim()})});if(!O.ok){const T=await O.json();throw new Error(T.message||(e?"Failed to update About Us information":"Failed to create About Us information"))}const S=await O.json();console.log("Submit result:",S),m(S.message||(e?"About Us information updated successfully!":"About Us information created successfully!")),a(!1),await x(),setTimeout(()=>m(null),5e3)}catch(y){console.error("Submit error:",y),f(y.message)}finally{d(!1)}};return l&&!e&&!r?n.jsx("div",{className:"empty-state",children:"Loading..."}):n.jsxs("div",{className:"about-us-page",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"About Us"}),!r&&n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:()=>a(!0),disabled:l,children:[n.jsx(Aa,{size:16}),n.jsx("span",{children:e?"Edit Information":"Add Information"})]})})]}),p&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:p}),n.jsx("button",{onClick:()=>m(null),children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),u&&!r&&n.jsxs("div",{className:"alert-message",style:{marginBottom:"16px"},children:[n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{children:u}),n.jsx("button",{onClick:()=>f(null),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer"},children:""})]}),n.jsx("div",{className:"card",children:r?n.jsx("form",{onSubmit:j,children:n.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[u&&n.jsxs("div",{className:"alert-message",style:{marginBottom:"16px"},children:[n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{children:u})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"description",children:"Description *"}),n.jsx("textarea",{id:"description",name:"description",className:"form-textarea",value:i.description,onChange:v,required:!0,rows:6,placeholder:"Enter a detailed description about your hotel...",minLength:10}),n.jsxs("small",{style:{color:"#666",fontSize:"12px",marginTop:"4px",display:"block"},children:[i.description.length," characters (minimum 10 required)"]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"mission",children:"Mission *"}),n.jsx("textarea",{id:"mission",name:"mission",className:"form-textarea",value:i.mission,onChange:v,required:!0,rows:4,placeholder:"Enter your hotel's mission statement...",minLength:10}),n.jsxs("small",{style:{color:"#666",fontSize:"12px",marginTop:"4px",display:"block"},children:[i.mission.length," characters (minimum 10 required)"]})]}),n.jsxs("div",{className:"form-actions",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{s(e?{description:e.description,mission:e.mission}:{description:"",mission:""}),a(!1),f(null),m(null)},disabled:l,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l||i.description.trim().length<10||i.mission.trim().length<10,children:l?n.jsx("span",{children:"Saving..."}):n.jsxs(n.Fragment,{children:[n.jsx(H3,{size:16}),n.jsx("span",{children:"Save Changes"})]})})]})]})}):e?n.jsx("div",{className:"card-body",style:{padding:"20px"},children:n.jsxs("div",{className:"about-info-container",children:[n.jsx("div",{className:"about-header",children:n.jsx("h3",{children:"About Hotel Virat"})}),n.jsxs("div",{className:"about-section",children:[n.jsx("h4",{children:"Description"}),n.jsx("p",{children:e.description})]}),n.jsxs("div",{className:"about-section",children:[n.jsxs("div",{className:"mission-header",children:[n.jsx(RA,{size:20,color:"#ff7e47"}),n.jsx("h4",{children:"Our Mission"})]}),n.jsx("p",{children:e.mission})]}),e.updatedAt&&n.jsx("div",{className:"about-meta",style:{marginTop:"20px",paddingTop:"15px",borderTop:"1px solid #eee"},children:n.jsxs("small",{style:{color:"#666",fontSize:"0.875rem"},children:["Last updated: ",new Date(e.updatedAt).toLocaleDateString()]})})]})}):n.jsx("div",{className:"card-body",style:{padding:"20px"},children:n.jsxs("div",{className:"empty-state",children:[n.jsx(RA,{size:48,color:"#ddd",style:{marginBottom:"16px"}}),n.jsx("h3",{style:{color:"#999",marginBottom:"8px"},children:"No About Us Information"}),n.jsx("p",{style:{color:"#999",margin:0},children:'No About Us information available. Click "Add Information" to create one.'})]})})})]})},sae=({term:e,onClose:t,onSave:r})=>{const[a,i]=N.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",category:(e==null?void 0:e.category)||"Terms of Service"}),s=d=>{const{name:u,value:f}=d.target;i({...a,[u]:f})},l=d=>{d.preventDefault(),r(a),t()};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:e?"Edit Policy":"Add New Policy"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:l,children:[n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"title",children:"Title"}),n.jsx("input",{type:"text",id:"title",name:"title",className:"form-input",value:a.title,onChange:s,required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"category",children:"Category"}),n.jsxs("select",{id:"category",name:"category",className:"form-select",value:a.category,onChange:s,required:!0,children:[n.jsx("option",{value:"Order Policy",children:"Order Policy"}),n.jsx("option",{value:"Delivery Policy",children:"Delivery Policy"}),n.jsx("option",{value:"Privacy Policy",children:"Privacy Policy"}),n.jsx("option",{value:"Terms of Service",children:"Terms of Service"}),n.jsx("option",{value:"Refund Policy",children:"Refund Policy"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"description",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",className:"form-textarea",value:a.description,onChange:s,required:!0,rows:8})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:e?"Update Policy":"Add Policy"})]})]})]})})},oae=({term:e,onClose:t,onConfirm:r})=>n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Policy"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsxs("strong",{children:['"',e.title,'"']}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:()=>{r(e._id),t()},children:"Delete"})]})]})}),lae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[i,s]=N.useState(""),[l,d]=N.useState(!1),[u,f]=N.useState(null),[p,m]=N.useState(!1),[x,v]=N.useState(null),[j,b]=N.useState(null),[y,C]=N.useState(!1),[E,O]=N.useState(null),S=async()=>{C(!0),O(null);try{const I=`https://hotelvirat.com/api/v1/hotel/terms${i?`?category=${i}`:""}`,R=await fetch(I);if(!R.ok)throw new Error("Failed to fetch terms");const W=await R.json();let Q=[];W.success&&Array.isArray(W.data)?Q=W.data:Array.isArray(W)?Q=W:W.message&&W.message.includes("routes working")&&(Q=[]),t(Q)}catch(P){O(P.message)}finally{C(!1)}};N.useEffect(()=>{S()},[i]);const T=e.filter(P=>P.title.toLowerCase().includes(r.toLowerCase())||P.description.toLowerCase().includes(r.toLowerCase())),k=()=>{f(null),d(!0)},D=P=>{f(P),d(!0)},F=P=>{v(P),m(!0)},B=async P=>{C(!0),O(null);try{const I="https://hotelvirat.com/api/v1/hotel",R=u?`${I}/terms/${u._id}`:`${I}/terms`;if(!(await fetch(R,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok)throw new Error(u?"Failed to update term":"Failed to create term");await S()}catch(I){O(I.message)}finally{C(!1)}},M=async P=>{C(!0),O(null);try{if(!(await fetch(`https://hotelvirat.com/api/v1/hotel/terms/${P}`,{method:"DELETE"})).ok)throw new Error("Failed to delete term");await S()}catch(I){O(I.message)}finally{C(!1)}},L=P=>{b(j===P?null:P)},A=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=P=>{switch(P){case"Terms of Service":return{bg:"#e0f2fe",text:"#0284c7"};case"Privacy Policy":return{bg:"#dcfce7",text:"#16a34a"};case"Refund Policy":return{bg:"#fef3c7",text:"#d97706"};case"Delivery Policy":return{bg:"#f3e8ff",text:"#7e22ce"};case"Order Policy":return{bg:"#fee2e2",text:"#dc2626"};default:return{bg:"#f1f5f9",text:"#64748b"}}};return n.jsxs("div",{className:"terms-policies-page",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Terms & Policies"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:k,disabled:y,children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Policy"})]})})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search policies...",className:"search-input",value:r,onChange:P=>a(P.target.value)})]}),n.jsx("div",{className:"filter-buttons",children:n.jsxs("select",{className:"filter-select",value:i,onChange:P=>s(P.target.value),disabled:y,children:[n.jsx("option",{value:"",children:"All Categories"}),n.jsx("option",{value:"Order Policy",children:"Order Policy"}),n.jsx("option",{value:"Delivery Policy",children:"Delivery Policy"}),n.jsx("option",{value:"Privacy Policy",children:"Privacy Policy"}),n.jsx("option",{value:"Terms of Service",children:"Terms of Service"}),n.jsx("option",{value:"Refund Policy",children:"Refund Policy"}),n.jsx("option",{value:"Other",children:"Other"})]})})]}),E&&n.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:E}),y?n.jsx("div",{className:"empty-state",children:"Loading..."}):n.jsx("div",{className:"terms-list",children:T.map(P=>{const I=U(P.category);return n.jsxs("div",{className:"terms-item",children:[n.jsxs("div",{className:"terms-header",onClick:()=>L(P._id),children:[n.jsxs("div",{className:"terms-title-section",children:[n.jsx("div",{className:"terms-icon",style:{backgroundColor:I.bg,color:I.text},children:n.jsx(Qc,{size:20})}),n.jsxs("div",{className:"terms-info",children:[n.jsx("h3",{className:"terms-title",children:P.title}),n.jsxs("div",{className:"terms-meta",children:[n.jsx("span",{className:"terms-category",style:{backgroundColor:I.bg,color:I.text},children:P.category}),n.jsxs("span",{className:"terms-date",children:["Last updated: ",A(P.updatedAt)]})]})]})]}),n.jsxs("div",{className:"terms-actions",children:[n.jsx("button",{className:"action-btn edit",onClick:R=>{R.stopPropagation(),D(P)},disabled:y,children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:R=>{R.stopPropagation(),F(P)},disabled:y,children:n.jsx(La,{size:14})})]})]}),j===P._id&&n.jsx("div",{className:"terms-content",children:n.jsx("p",{children:P.description})})]},P._id)})}),T.length===0&&!y&&n.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"No policies found. Add a new policy to get started."})}),l&&n.jsx(sae,{term:u,onClose:()=>d(!1),onSave:B}),p&&n.jsx(oae,{term:x,onClose:()=>m(!1),onConfirm:M})]})},Ml="/assets/logo4-BWe_iBAv.jpeg",cae=()=>{const[e,t]=N.useState("admin"),[r,a]=N.useState(""),[i,s]=N.useState(""),[l,d]=N.useState(""),[u,f]=N.useState(!1),[p,m]=N.useState(""),[x,v]=N.useState(!1),j=An(),b=async E=>{var S,T;E.preventDefault(),m(""),v(!0);const O="https://hotelvirat.com/api/v1/hotel";try{if(e==="admin"){const k=await Yt.post(`${O}/admin-auth/login`,{email:r,password:l}),{token:D}=k.data;localStorage.setItem("authToken",D),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userType","admin"),j("/")}else if(e==="category"){const k=await Yt.post(`${O}/category-access/login`,{username:i,password:l}),{token:D,user:F}=k.data;localStorage.setItem("authToken",D),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userType","category-staff"),localStorage.setItem("categoryStaffData",JSON.stringify(F)),j("/category-orders")}else if(e==="receptionist"){const k=await Yt.post(`${O}/receptionist-access/login`,{username:i,password:l}),{token:D,user:F}=k.data;localStorage.setItem("authToken",D),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userType","receptionist"),localStorage.setItem("receptionistData",JSON.stringify(F)),j("/receptionist-dashboard")}}catch(k){m(((T=(S=k.response)==null?void 0:S.data)==null?void 0:T.message)||"An error occurred during login"),v(!1)}},y=()=>{j("/privacy-policy")},C=()=>{j("/terms-conditions")};return n.jsx("div",{className:"login-container-centered",children:n.jsxs("div",{className:"login-card",children:[n.jsxs("div",{className:"login-header",children:[n.jsxs("div",{className:"login-logo",children:[n.jsx("img",{src:Ml,alt:"Hotel Virat Logo",className:"logo-image"}),n.jsx("h1",{children:"Hotel Virat"})]}),n.jsx("p",{children:"Sign in to your account"})]}),n.jsxs("div",{className:"login-type-toggle",style:{display:"flex",marginBottom:"20px",borderRadius:"8px",overflow:"hidden",border:"1px solid #e5e7eb"},children:[n.jsx("button",{type:"button",onClick:()=>{t("admin"),m("")},style:{flex:1,padding:"10px",border:"none",cursor:"pointer",backgroundColor:e==="admin"?"#4f46e5":"#f9fafb",color:e==="admin"?"white":"#374151",fontWeight:"500",transition:"all 0.2s",fontSize:"13px"},children:"Admin"}),n.jsx("button",{type:"button",onClick:()=>{t("category"),m("")},style:{flex:1,padding:"10px",border:"none",cursor:"pointer",backgroundColor:e==="category"?"#4f46e5":"#f9fafb",color:e==="category"?"white":"#374151",fontWeight:"500",transition:"all 0.2s",fontSize:"13px"},children:"Category"}),n.jsx("button",{type:"button",onClick:()=>{t("receptionist"),m("")},style:{flex:1,padding:"10px",border:"none",cursor:"pointer",backgroundColor:e==="receptionist"?"#4f46e5":"#f9fafb",color:e==="receptionist"?"white":"#374151",fontWeight:"500",transition:"all 0.2s",fontSize:"13px"},children:"Receptionist"})]}),p&&n.jsx("div",{className:"login-error",children:p}),n.jsxs("form",{className:"login-form",onSubmit:b,children:[e==="admin"?n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"email",children:"Email"}),n.jsxs("div",{className:"input-with-icon",children:[n.jsx("span",{className:"input-icon",children:n.jsx(Js,{size:16})}),n.jsx("input",{type:"email",id:"email",placeholder:"Enter your email address",value:r,onChange:E=>a(E.target.value),required:!0,style:{paddingLeft:"40px"}})]})]}):n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"username",children:"Username"}),n.jsxs("div",{className:"input-with-icon",children:[n.jsx("span",{className:"input-icon",children:n.jsx(Ol,{size:16})}),n.jsx("input",{type:"text",id:"username",placeholder:e==="category"?"Enter category staff username":"Enter receptionist username",value:i,onChange:E=>s(E.target.value),required:!0,style:{paddingLeft:"40px"}})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"password",children:"Password"}),n.jsxs("div",{className:"input-with-icon",children:[n.jsx("span",{className:"input-icon",children:n.jsx(A7,{size:16})}),n.jsx("input",{type:u?"text":"password",id:"password",placeholder:"Enter your password",value:l,onChange:E=>d(E.target.value),required:!0,style:{paddingLeft:"40px"}}),n.jsx("button",{type:"button",className:"password-toggle",onClick:()=>f(!u),tabIndex:"-1",children:u?n.jsx(jw,{size:18}):n.jsx(Xi,{size:18})})]})]}),n.jsx("button",{type:"submit",className:"login-button",disabled:x,children:x?"Signing in...":"Sign In"})]}),n.jsxs("div",{className:"login-footer-links",children:[n.jsx("button",{type:"button",className:"footer-link",onClick:y,children:"Privacy Policy"}),n.jsx("span",{className:"link-separator",children:"|"}),n.jsx("button",{type:"button",className:"footer-link",onClick:C,children:"Terms & Conditions"})]})]})})},dae=({staff:e,onClose:t,onSave:r,isEditMode:a})=>{const[i,s]=N.useState({name:(e==null?void 0:e.name)||"",mobile:(e==null?void 0:e.mobile)||""}),[l,d]=N.useState(null),[u,f]=N.useState(!1),p=x=>{const{name:v,value:j}=x.target;s({...i,[v]:j}),d(null)},m=async x=>{x.preventDefault(),d(null),f(!0);try{await r(i,e==null?void 0:e._id),t()}catch(v){d(v.message||"Failed to save staff user")}finally{f(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:a?"Edit Staff User":"Add New Staff User"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:m,children:[n.jsxs("div",{className:"modal-body",children:[l&&n.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:l}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:i.name,onChange:p,required:!0,disabled:u})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"mobile",children:["Mobile ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:i.mobile,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit mobile number",disabled:u})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":a?"Update Staff User":"Add Staff User"})]})]})]})})},uae=({staff:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),s=async()=>{i(!0);try{await r(e._id),t()}catch(l){console.error("Error deleting staff:",l)}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Staff User"}),n.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:s,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},fae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[i,s]=N.useState(!1),[l,d]=N.useState(null),[u,f]=N.useState(!1),[p,m]=N.useState(null),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState(!1),E="https://hotelvirat.com/api/v1/hotel/staff-auth",O=async()=>{C(!0),b("");try{const L=await fetch(`${E}/`);if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const A=await L.json();let U=[];if(A&&A.success&&Array.isArray(A.data))U=A.data;else if(Array.isArray(A))U=A;else if(A&&A.message&&A.message.includes("routes working"))console.log(" Server returning placeholder response:",A.message),U=[];else{console.error("Expected array but got:",A),t([]),b("Invalid data format received from server");return}t(U)}catch(L){console.error("Fetch error:",L),b(`Failed to fetch staff users: ${L.message}`),t([])}finally{C(!1)}};N.useEffect(()=>{O()},[]);const S=()=>{d(null),s(!0)},T=L=>{d(L),s(!0)},k=L=>{m(L),f(!0)},D=async(L,A)=>{try{const U=A?`${E}/${A}`:`${E}/register`,I=await fetch(U,{method:A?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)}),R=await I.json();if(!I.ok)throw new Error(R.message||"Failed to save staff user");v(`Staff user ${A?"updated":"added"} successfully`),setTimeout(()=>v(""),3e3),await O()}catch(U){throw new Error(U.message)}},F=async L=>{try{const A=await fetch(`${E}/${L}`,{method:"DELETE"}),U=await A.json();if(!A.ok)throw new Error(U.message||"Failed to delete staff user");v("Staff user deleted successfully"),setTimeout(()=>v(""),3e3),await O()}catch(A){b(A.message),setTimeout(()=>b(""),3e3)}},B=L=>{if(!L)return"N/A";const A={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(L).toLocaleDateString(void 0,A)},M=e.filter(L=>L.name.toLowerCase().includes(r.toLowerCase())||L.mobile.includes(r));return n.jsxs("div",{className:"staff-users-page",children:[x&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:x}),n.jsx("button",{onClick:()=>v(""),children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&n.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[n.jsx("span",{children:j}),n.jsx("button",{onClick:()=>b(""),style:{color:"#dc2626"},children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Staff Users"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:S,disabled:y,children:[n.jsx(Ad,{size:16}),n.jsx("span",{children:"Add Staff User"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search staff users...",className:"search-input",value:r,onChange:L=>a(L.target.value)})]})}),n.jsx("div",{className:"data-card",children:y?n.jsx("div",{className:"empty-state",children:"Loading staff users..."}):M.length===0?n.jsx("div",{className:"empty-state",children:n.jsxs("p",{children:["No staff users found. ",r?"Try a different search.":"Add a new staff user to get started."]})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Mobile"}),n.jsx("th",{children:"Created At"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:M.map(L=>n.jsxs("tr",{children:[n.jsx("td",{children:L._id.slice(-6)}),n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{className:"user-avatar-placeholder",children:L.name.charAt(0).toUpperCase()}),L.name]})}),n.jsx("td",{children:n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(Ai,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),L.mobile]})}),n.jsx("td",{children:B(L.createdAt)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>T(L),disabled:y,children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>k(L),disabled:y,children:n.jsx(La,{size:14})})]})})]},L._id))})]})}),i&&n.jsx(dae,{staff:l,onClose:()=>s(!1),onSave:D,isEditMode:!!l}),u&&n.jsx(uae,{staff:p,onClose:()=>f(!1),onConfirm:F})]})},hae=({counter:e,onClose:t,onSave:r,isEditMode:a})=>{const[i,s]=N.useState({name:(e==null?void 0:e.name)||"",mobile:(e==null?void 0:e.mobile)||""}),[l,d]=N.useState(null),[u,f]=N.useState(!1),p=x=>{const{name:v,value:j}=x.target;s({...i,[v]:j}),d(null)},m=async x=>{x.preventDefault(),d(null),f(!0);try{await r(i,e==null?void 0:e._id),t()}catch(v){d(v.message||"Failed to save counter user")}finally{f(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:a?"Edit Counter User":"Add New Counter User"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:m,children:[n.jsxs("div",{className:"modal-body",children:[l&&n.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:l}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:i.name,onChange:p,required:!0,disabled:u})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"mobile",children:["Mobile ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:i.mobile,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit mobile number",disabled:u})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":a?"Update Counter User":"Add Counter User"})]})]})]})})},pae=({counter:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),s=async()=>{i(!0);try{await r(e._id),t()}catch(l){console.error("Error deleting counter:",l)}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Counter User"}),n.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:s,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},mae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[i,s]=N.useState(!1),[l,d]=N.useState(null),[u,f]=N.useState(!1),[p,m]=N.useState(null),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState(!1),E="https://hotelvirat.com/api/v1/hotel/counter-auth",O=async()=>{C(!0),b("");try{const L=await fetch(`${E}/`);if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const A=await L.json();let U=[];if(A&&A.success&&Array.isArray(A.data))U=A.data;else if(Array.isArray(A))U=A;else if(A&&A.message&&A.message.includes("routes working"))console.log(" Server returning placeholder response:",A.message),U=[];else{console.error("Expected array but got:",A),t([]),b("Invalid data format received from server");return}t(U)}catch(L){console.error("Fetch error:",L),b(`Failed to fetch counter users: ${L.message}`),t([])}finally{C(!1)}};N.useEffect(()=>{O()},[]);const S=()=>{d(null),s(!0)},T=L=>{d(L),s(!0)},k=L=>{m(L),f(!0)},D=async(L,A)=>{try{const U=A?`${E}/${A}`:`${E}/register`,I=await fetch(U,{method:A?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)}),R=await I.json();if(!I.ok)throw new Error(R.message||"Failed to save counter user");v(`Counter user ${A?"updated":"added"} successfully`),setTimeout(()=>v(""),3e3),await O()}catch(U){throw new Error(U.message)}},F=async L=>{try{const A=await fetch(`${E}/${L}`,{method:"DELETE"}),U=await A.json();if(!A.ok)throw new Error(U.message||"Failed to delete counter user");v("Counter user deleted successfully"),setTimeout(()=>v(""),3e3),await O()}catch(A){b(A.message),setTimeout(()=>b(""),3e3)}},B=L=>{if(!L)return"N/A";const A={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(L).toLocaleDateString(void 0,A)},M=e.filter(L=>L.name.toLowerCase().includes(r.toLowerCase())||L.mobile.includes(r));return n.jsxs("div",{className:"counter-users-page",children:[x&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:x}),n.jsx("button",{onClick:()=>v(""),children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&n.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[n.jsx("span",{children:j}),n.jsx("button",{onClick:()=>b(""),style:{color:"#dc2626"},children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Counter Users"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:S,disabled:y,children:[n.jsx(Ad,{size:16}),n.jsx("span",{children:"Add Counter User"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search counter users...",className:"search-input",value:r,onChange:L=>a(L.target.value)})]})}),n.jsx("div",{className:"data-card",children:y?n.jsx("div",{className:"empty-state",children:"Loading counter users..."}):M.length===0?n.jsx("div",{className:"empty-state",children:n.jsxs("p",{children:["No counter users found."," ",r?"Try a different search.":"Add a new counter user to get started."]})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Mobile"}),n.jsx("th",{children:"Created At"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:M.map(L=>n.jsxs("tr",{children:[n.jsx("td",{children:L._id.slice(-6)}),n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{className:"user-avatar-placeholder",children:L.name.charAt(0).toUpperCase()}),L.name]})}),n.jsx("td",{children:n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(Ai,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),L.mobile]})}),n.jsx("td",{children:B(L.createdAt)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>T(L),disabled:y,children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>k(L),disabled:y,children:n.jsx(La,{size:14})})]})})]},L._id))})]})}),i&&n.jsx(hae,{counter:l,onClose:()=>s(!1),onSave:D,isEditMode:!!l}),u&&n.jsx(pae,{counter:p,onClose:()=>f(!1),onConfirm:F})]})},pl=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),gae=()=>{var $e,Ze,Oe,Qe,ht,Pt,Rt,Et;const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState([]),[p,m]=N.useState([]),[x,v]=N.useState(!0),[j,b]=N.useState(""),[y,C]=N.useState(!1),[E,O]=N.useState(!1),[S,T]=N.useState(null),[k,D]=N.useState({status:"",paymentStatus:"",paymentMethod:""}),[F,B]=N.useState(""),[M,L]=N.useState(!1),[A,U]=N.useState(""),[P,I]=N.useState("all"),[R,W]=N.useState("all"),[Q,ge]=N.useState("all"),[q,Y]=N.useState("all"),[z,ee]=N.useState("today"),[H,re]=N.useState(1),[le,pe]=N.useState(1),[Se,K]=N.useState(null),ue=7;N.useEffect(()=>{ye(),fe(),Xe()},[P,R,Q,q]),N.useEffect(()=>{const ie=setInterval(()=>{Xe()},3e4);return()=>clearInterval(ie)},[P,R,Q,q]);const ye=async()=>{try{const ie=await pl.get("/branch");d(ie.data)}catch(ie){console.error("Error fetching branches:",ie),b("Failed to load branches. Some filter options may not be available.")}},fe=async()=>{try{const ie=await pl.get("/staff-order/available-statuses");if(console.log("Available statuses API response:",ie.data),ie.data.success){const De=ie.data.orderStatuses||[],Ye=ie.data.paymentStatuses||[];console.log("Setting order statuses:",De),console.log("Setting payment statuses:",Ye),f(De),m(Ye)}}catch(ie){console.error("Error fetching available statuses:",ie),f(["pending","preparing","served","completed","cancelled"]),m(["pending","completed","failed","refunded"])}},Xe=async()=>{v(!0),b(""),t([]),s([]),a([]);try{const ie={};P!=="all"&&(ie.status=P),R!=="all"&&(ie.branchId=R),Q!=="all"&&(ie.paymentStatus=Q),q!=="all"&&(ie.orderType=q),A.trim()&&(ie.search=A.trim());const De={...ie,_t:Date.now()},Ye=await pl.get("/staff-order",{params:De});let Ft=[];if(Ye.data&&Ye.data.success&&Array.isArray(Ye.data.data))Ft=Ye.data.data;else if(Ye.data&&Ye.data.orders&&Array.isArray(Ye.data.orders))Ft=Ye.data.orders;else if(Array.isArray(Ye.data))Ft=Ye.data;else throw console.error(" Unexpected response format:",Ye.data),new Error("Invalid response format: orders array missing");const me=Ft.filter(ke=>!(ke.orderId||"").startsWith("COUNTER-")).map((ke,Pe)=>{var it,pt,Nt,_t,ot;return{id:ke._id||`temp-id-${Pe}`,orderId:ke.orderId||`UNKNOWN-${Pe}`,customer:ke.isGuestOrder?ke.customerName:((it=ke.userId)==null?void 0:it.name)||"Unknown Staff",customerType:ke.isGuestOrder?"Guest":"Staff",customerMobile:ke.isGuestOrder?ke.customerMobile:((pt=ke.userId)==null?void 0:pt.mobile)||"N/A",date:new Date(ke.orderTime||ke.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:ke.branchName||"Unknown Branch",branchId:((Nt=ke.branchId)==null?void 0:Nt._id)||null,tableNumber:ke.tableNumber||"N/A",peopleCount:ke.peopleCount||0,items:((_t=ke.items)==null?void 0:_t.length)||0,amount:`${((ot=ke.grandTotal)==null?void 0:ot.toFixed(2))||"0.00"}`,status:ke.status||"pending",paymentMethod:ke.paymentMethod||"cash",paymentStatus:ke.paymentStatus||"pending",subtotal:ke.subtotal||0,tax:ke.tax||0,serviceCharge:ke.serviceCharge||0,grandTotal:ke.grandTotal||0,originalOrder:ke,isGuestOrder:ke.isGuestOrder||!1}}).filter(ke=>ke.id);t(me),K(new Date)}catch(ie){console.error("Error fetching orders:",ie),b("Failed to load orders. Please refresh the page and try again.")}finally{v(!1)}};N.useEffect(()=>{const ie=e.filter(De=>{if(!A.trim())return!0;const Ye=De.orderId||"",Ft=De.tableNumber||"",me=De.customer||"",ke=De.customerMobile||"",Pe=A.trim().toLowerCase();return Ye.toLowerCase().includes(Pe)||Ft.toLowerCase().includes(Pe)||me.toLowerCase().includes(Pe)||ke.toLowerCase().includes(Pe)});s(ie),pe(Math.ceil(ie.length/ue)),re(1)},[e,A]),N.useEffect(()=>{const ie=(H-1)*ue,De=ie+ue,Ye=i.slice(ie,De);a(Ye)},[i,H]);const Ce=ie=>{console.log("Admin Panel: Opening view modal for order:",ie),console.log("Admin Panel: Order status:",ie.status),console.log("Admin Panel: Order payment status:",ie.paymentStatus),T(ie),C(!0)},Le=ie=>{T(ie),D({status:ie.status,paymentStatus:ie.paymentStatus,paymentMethod:ie.paymentMethod}),O(!0)},ne=ie=>{const{name:De,value:Ye}=ie.target;D({...k,[De]:Ye})},Ae=async(ie,De)=>{var Ye,Ft;L(!0);try{console.log(`Admin Panel: Quick updating order status to: ${De}`);const me=await pl.put(`/staff-order/${ie}/status`,{status:De});if(console.log("Admin Panel: Quick status update response:",me.data),me.data.success)console.log("Admin Panel: Status updated successfully, refreshing orders..."),await Xe(),T({...S,status:De}),B(`Order ${S.orderId} status updated: ${S.status}  ${De}`),setTimeout(()=>{B("")},3e3);else throw new Error(me.data.message||"Update failed")}catch(me){console.error("Error updating order status:",me);const ke=((Ft=(Ye=me.response)==null?void 0:Ye.data)==null?void 0:Ft.message)||me.message||"Failed to update order status";alert(`Update failed: ${ke}. Please try again.`)}finally{L(!1)}},Ve=async(ie,De)=>{var Ye,Ft;L(!0);try{console.log(`Admin Panel: Quick updating payment status to: ${De}`);const me=await pl.put(`/staff-order/${ie}/status`,{paymentStatus:De});if(console.log("Admin Panel: Quick payment update response:",me.data),me.data.success)console.log("Admin Panel: Payment status updated successfully, refreshing orders..."),await Xe(),T({...S,paymentStatus:De}),B(`Order ${S.orderId} payment status updated: ${S.paymentStatus}  ${De}`),setTimeout(()=>{B("")},3e3);else throw new Error(me.data.message||"Update failed")}catch(me){console.error("Error updating payment status:",me);const ke=((Ft=(Ye=me.response)==null?void 0:Ye.data)==null?void 0:Ft.message)||me.message||"Failed to update payment status";alert(`Update failed: ${ke}. Please try again.`)}finally{L(!1)}},te=async()=>{var ie,De;L(!0);try{if(console.log(`Admin Panel: Updating payment method for order ${S.orderId}`),console.log(`Admin Panel: Current Payment Method: ${S.paymentMethod}`),console.log(`Admin Panel: New Payment Method: ${k.paymentMethod}`),k.paymentMethod===S.paymentMethod){alert("No changes detected. Payment method is already set to this value."),L(!1);return}const Ye=await pl.put(`/staff-order/${S.id}/status`,{paymentMethod:k.paymentMethod});if(console.log("Admin Panel: Payment method update API response:",Ye.data),Ye.data.success)console.log("Admin Panel: Payment method updated successfully, refreshing orders..."),await Xe(),O(!1),B(`Order ${S.orderId} payment method updated: ${S.paymentMethod}  ${k.paymentMethod}`),setTimeout(()=>{B("")},5e3);else throw new Error(Ye.data.message||"Update failed")}catch(Ye){console.error("Error updating order:",Ye);const Ft=((De=(ie=Ye.response)==null?void 0:ie.data)==null?void 0:De.message)||Ye.message||"Failed to update order";alert(`Update failed: ${Ft}. Please try again.`)}finally{L(!1)}},ce=()=>{C(!1),T(null)},X=()=>{O(!1),T(null)},se=(ie,De)=>{ie==="status"?I(De):ie==="branch"?W(De):ie==="paymentStatus"?ge(De):ie==="orderType"&&Y(De),re(1)},J=ie=>{switch(ie==null?void 0:ie.toLowerCase()){case"card":return n.jsx(Na,{size:16});case"upi":return n.jsx(Ws,{size:16});case"cash":default:return n.jsx(Ws,{size:16})}},Ne=ie=>{switch(ie==null?void 0:ie.toLowerCase()){case"completed":return"completed";case"pending":return"pending";case"failed":return"cancelled";case"refunded":return"preparing";default:return"pending"}},Ge=()=>{let ie=`Order ID,Customer Name,Customer Type,Mobile Number,Date & Time,Branch,Table Number,People Count,Order Status,Payment Status,Payment Method,Subtotal,Tax (5%),Service Charge (10%),Grand Total,Items Count,Item Details
`;const De=new Date,Ye=De.toLocaleDateString("en-IN")+" "+De.toLocaleTimeString("en-IN"),Ft=i.length,me=i.reduce((mt,gt)=>mt+(gt.grandTotal||0),0),ke=i.filter(mt=>mt.paymentStatus==="completed"),Pe=ke.reduce((mt,gt)=>mt+(gt.grandTotal||0),0),it=me-Pe;ie+=`
"STAFF ORDERS EXPORT SUMMARY"
`,ie+=`"Export Date & Time:","${Ye}"
`,ie+=`"Total Orders:",${Ft}
`,ie+=`"Total Amount:",${me.toFixed(2)}
`,ie+=`"Paid Orders:",${ke.length}
`,ie+=`"Paid Amount:",${Pe.toFixed(2)}
`,ie+=`"Unpaid Orders:",${Ft-ke.length}
`,ie+=`"Unpaid Amount:",${it.toFixed(2)}
`,ie+=`"Collection Rate:",${me>0?(Pe/me*100).toFixed(1):0}
`,ie+=`
"DETAILED ORDER LIST"
`,ie+=`Order ID,Customer Name,Customer Type,Mobile Number,Date & Time,Branch,Table Number,People Count,Order Status,Payment Status,Payment Method,Subtotal,Tax (5%),Service Charge (10%),Grand Total,Items Count,Item Details
`,i.forEach(mt=>{var Gt,Fr,ir,Zr,ae,xe,de,he;const gt=((Fr=(Gt=mt.originalOrder)==null?void 0:Gt.items)==null?void 0:Fr.map(je=>`${je.name} (Qty: ${je.quantity}, Price: ${je.price.toFixed(2)})`).join("; "))||"No items",$t=new Date(((ir=mt.originalOrder)==null?void 0:ir.createdAt)||((Zr=mt.originalOrder)==null?void 0:Zr.orderTime)||Date.now()),Jt=$t.toLocaleDateString("en-IN")+" "+$t.toLocaleTimeString("en-IN");ie+=`"${mt.orderId}","${mt.customer}","${mt.customerType}","${mt.customerMobile}","${Jt}","${mt.branch}","${mt.tableNumber}",${mt.peopleCount},"${mt.status}","${mt.paymentStatus}","${mt.paymentMethod}",${((ae=mt.subtotal)==null?void 0:ae.toFixed(2))||"0.00"},${((xe=mt.tax)==null?void 0:xe.toFixed(2))||"0.00"},${((de=mt.serviceCharge)==null?void 0:de.toFixed(2))||"0.00"},${((he=mt.grandTotal)==null?void 0:he.toFixed(2))||"0.00"},${mt.items},"${gt}"
`}),ie+=`
"PAYMENT METHOD BREAKDOWN"
`;const pt={};i.forEach(mt=>{const gt=mt.paymentMethod||"cash";pt[gt]||(pt[gt]={count:0,amount:0}),pt[gt].count++,pt[gt].amount+=mt.grandTotal||0}),ie+=`Payment Method,Order Count,Total Amount
`,Object.entries(pt).forEach(([mt,gt])=>{ie+=`"${mt.charAt(0).toUpperCase()+mt.slice(1)}",${gt.count},${gt.amount.toFixed(2)}
`}),ie+=`
"BRANCH-WISE BREAKDOWN"
`;const Nt={};i.forEach(mt=>{const gt=mt.branch||"Unknown";Nt[gt]||(Nt[gt]={count:0,amount:0}),Nt[gt].count++,Nt[gt].amount+=mt.grandTotal||0}),ie+=`Branch Name,Order Count,Total Amount
`,Object.entries(Nt).forEach(([mt,gt])=>{ie+=`"${mt}",${gt.count},${gt.amount.toFixed(2)}
`});const _t=new Blob([ie],{type:"text/csv;charset=utf-8;"}),ot=window.URL.createObjectURL(_t),jt=document.createElement("a");jt.setAttribute("hidden",""),jt.setAttribute("href",ot),jt.setAttribute("download",`staff-orders-detailed-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(jt),jt.click(),document.body.removeChild(jt),window.URL.revokeObjectURL(ot)},tt=ie=>{var Ft,me,ke,Pe,it,pt,Nt,_t;const De=window.open("","_blank","width=302,height=600"),Ye=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Order ${ie.orderId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .order-info { margin-bottom: 10px; }
          .order-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${ie.branch}</div>
        </div>
        
        <div class="order-id">Order #${ie.orderId}</div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${ie.date}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Table:</span>
            <span>${ie.tableNumber}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Guests:</span>
            <span>${ie.peopleCount}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Customer:</span>
            <span>${ie.customer}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Type:</span>
            <span>${ie.customerType}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${ie.customerMobile}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${((me=(Ft=ie.originalOrder)==null?void 0:Ft.items)==null?void 0:me.map(ot=>`
            <div class="item-row">
              <div class="item-name">${ot.name}</div>
              <div class="item-details">
                <span>${ot.quantity} x ${ot.price.toFixed(2)}</span>
                <span>${(ot.price*ot.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((ke=ie.subtotal)==null?void 0:ke.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax (5%):</span>
            <span>${((Pe=ie.tax)==null?void 0:Pe.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service (10%):</span>
            <span>${((it=ie.serviceCharge)==null?void 0:it.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${((pt=ie.grandTotal)==null?void 0:pt.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Payment:</span>
            <span>${((Nt=ie.paymentMethod)==null?void 0:Nt.toUpperCase())||"CASH"}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Status:</span>
            <span>${((_t=ie.paymentStatus)==null?void 0:_t.toUpperCase())||"PENDING"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;De.document.write(Ye),De.document.close(),De.focus(),setTimeout(()=>{De.print()},300)};return n.jsxs("div",{className:"orders-page",children:[F&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:F}),n.jsx("button",{onClick:()=>B(""),children:n.jsx(ha,{size:16})})]}),n.jsxs("div",{className:"page-header",children:[n.jsxs("div",{className:"header-title-section",children:[n.jsx("h1",{children:"All Orders (Staff & Guest)"}),Se&&n.jsxs("p",{className:"last-updated",children:["Last updated: ",Se.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})," | Total orders: ",e.length," | API: Local (",pl.defaults.baseURL,")",n.jsx("br",{}),n.jsxs("small",{children:["Available Order Statuses: ",u.join(", ")," | Payment Statuses: ",p.join(", ")]})]})]}),n.jsxs("div",{className:"header-actions",children:[n.jsxs("button",{className:"btn btn-outline",onClick:Xe,disabled:x,children:[x?n.jsx(Ra,{size:16,className:"animate-spin"}):n.jsx(wr,{size:16}),n.jsx("span",{children:x?"Refreshing...":"Refresh Data"})]}),n.jsxs("button",{className:"btn btn-primary",onClick:()=>{t([]),s([]),a([]),Xe()},disabled:x,children:[n.jsx(fr,{size:16}),n.jsx("span",{children:"Force Refresh"})]}),n.jsxs("button",{className:"btn btn-outline",onClick:Ge,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:"Export to Excel"})]})]})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by order ID, table, customer name, or mobile...",className:"search-input",value:A,onChange:ie=>U(ie.target.value)})]}),n.jsxs("div",{className:"filter-buttons",children:[n.jsxs("select",{className:"filter-select",value:q,onChange:ie=>se("orderType",ie.target.value),children:[n.jsx("option",{value:"all",children:"All Orders"}),n.jsx("option",{value:"staff",children:"Staff Orders"}),n.jsx("option",{value:"guest",children:"Guest Orders"})]}),n.jsxs("select",{className:"filter-select",value:P,onChange:ie=>se("status",ie.target.value),children:[n.jsx("option",{value:"all",children:"All Status"}),u.map(ie=>n.jsx("option",{value:ie,children:ie.charAt(0).toUpperCase()+ie.slice(1)},ie))]}),n.jsxs("select",{className:"filter-select",value:Q,onChange:ie=>se("paymentStatus",ie.target.value),children:[n.jsx("option",{value:"all",children:"All Payment Status"}),p.map(ie=>n.jsx("option",{value:ie,children:ie.charAt(0).toUpperCase()+ie.slice(1)},ie))]}),n.jsxs("select",{className:"filter-select",value:R,onChange:ie=>se("branch",ie.target.value),children:[n.jsx("option",{value:"all",children:"All Branches"}),l.map(ie=>n.jsx("option",{value:ie._id,children:ie.name},ie._id))]})]})]}),j&&n.jsxs("div",{className:"error-container",children:[n.jsx(fr,{size:18}),n.jsx("span",{children:j})]}),n.jsxs("div",{className:"collection-stats-section",children:[n.jsxs("div",{className:"stats-header",children:[n.jsx("h2",{children:"Collection Statistics"}),n.jsxs("div",{className:"period-filters",children:[n.jsx("button",{className:`period-btn ${z==="today"?"active":""}`,onClick:()=>ee("today"),children:"Today"}),n.jsx("button",{className:`period-btn ${z==="week"?"active":""}`,onClick:()=>ee("week"),children:"This Week"}),n.jsx("button",{className:`period-btn ${z==="month"?"active":""}`,onClick:()=>ee("month"),children:"This Month"})]})]}),n.jsx("div",{className:"stats-cards",children:(()=>{const ie=new Date;let De;if(z==="today")De=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate());else if(z==="week"){const ot=ie.getDay(),jt=ot===0?6:ot-1;De=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()-jt)}else z==="month"&&(De=new Date(ie.getFullYear(),ie.getMonth(),1));const Ye=e.filter(ot=>{var gt,$t;const jt=new Date(((gt=ot.originalOrder)==null?void 0:gt.createdAt)||(($t=ot.originalOrder)==null?void 0:$t.orderTime)),mt=!ot.orderId.startsWith("COUNTER-");return jt>=De&&mt}),Ft=Ye.filter(ot=>ot.paymentStatus==="completed"),me=Ye.filter(ot=>ot.paymentStatus!=="completed"),ke=Ye.reduce((ot,jt)=>ot+(jt.grandTotal||0),0),Pe=Ye.length,it=Ft.reduce((ot,jt)=>ot+(jt.grandTotal||0),0),pt=Ft.length,Nt=me.reduce((ot,jt)=>ot+(jt.grandTotal||0),0),_t=me.length;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"stat-card total",children:[n.jsx("div",{className:"stat-icon",children:""}),n.jsxs("div",{className:"stat-content",children:[n.jsx("div",{className:"stat-label",children:"Total Orders"}),n.jsxs("div",{className:"stat-value",children:[Pe," orders"]}),n.jsxs("div",{className:"stat-count",children:["",ke.toFixed(2)]})]})]}),n.jsxs("div",{className:"stat-card paid",children:[n.jsx("div",{className:"stat-icon",children:""}),n.jsxs("div",{className:"stat-content",children:[n.jsx("div",{className:"stat-label",children:"Paid Orders"}),n.jsxs("div",{className:"stat-value",children:[pt," orders"]}),n.jsxs("div",{className:"stat-count",children:["",it.toFixed(2)]})]})]}),n.jsxs("div",{className:"stat-card unpaid",children:[n.jsx("div",{className:"stat-icon",children:""}),n.jsxs("div",{className:"stat-content",children:[n.jsx("div",{className:"stat-label",children:"Unpaid Orders"}),n.jsxs("div",{className:"stat-value",children:[_t," orders"]}),n.jsxs("div",{className:"stat-count",children:["",Nt.toFixed(2)]})]})]})]})})()})]}),n.jsx("div",{className:"data-card",children:x?n.jsxs("div",{className:"loading-container",children:[n.jsx(Ra,{size:24,className:"animate-spin"}),n.jsx("p",{children:"Loading orders..."})]}):n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Order ID"}),n.jsx("th",{children:"Order Status"}),n.jsx("th",{children:"Payment Status"}),n.jsx("th",{children:"Order By"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Mobile"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Table"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.length>0?r.map(ie=>n.jsxs("tr",{children:[n.jsx("td",{"data-label":"Order ID",children:ie.orderId}),n.jsx("td",{"data-label":"Order Status",children:n.jsx("div",{style:{display:"inline-block",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",textAlign:"center",minWidth:"80px",backgroundColor:ie.status==="completed"?"#d1fae5":ie.status==="preparing"?"#dbeafe":ie.status==="served"?"#e0e7ff":ie.status==="cancelled"?"#fee2e2":"#fef3c7",color:ie.status==="completed"?"#065f46":ie.status==="preparing"?"#1e40af":ie.status==="served"?"#5b21b6":ie.status==="cancelled"?"#991b1b":"#92400e",border:"1px solid "+(ie.status==="completed"?"#10b981":ie.status==="preparing"?"#3b82f6":ie.status==="served"?"#8b5cf6":ie.status==="cancelled"?"#ef4444":"#f59e0b")},children:ie.status?ie.status.charAt(0).toUpperCase()+ie.status.slice(1):"Pending"})}),n.jsx("td",{"data-label":"Payment Status",children:n.jsx("div",{style:{display:"inline-block",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",textAlign:"center",minWidth:"80px",backgroundColor:ie.paymentStatus==="completed"?"#d1fae5":ie.paymentStatus==="failed"?"#fee2e2":ie.paymentStatus==="refunded"?"#e0e7ff":"#fef3c7",color:ie.paymentStatus==="completed"?"#065f46":ie.paymentStatus==="failed"?"#991b1b":ie.paymentStatus==="refunded"?"#5b21b6":"#92400e",border:"1px solid "+(ie.paymentStatus==="completed"?"#10b981":ie.paymentStatus==="failed"?"#ef4444":ie.paymentStatus==="refunded"?"#8b5cf6":"#f59e0b")},children:ie.paymentStatus?ie.paymentStatus.charAt(0).toUpperCase()+ie.paymentStatus.slice(1):"Pending"})}),n.jsx("td",{"data-label":"Customer",children:ie.customer}),n.jsx("td",{"data-label":"Type",children:n.jsx("span",{className:`customer-type-badge ${ie.isGuestOrder?"guest":"staff"}`,children:ie.customerType})}),n.jsx("td",{"data-label":"Mobile",children:ie.customerMobile}),n.jsx("td",{"data-label":"Date",children:ie.date}),n.jsx("td",{"data-label":"Branch",children:ie.branch}),n.jsx("td",{"data-label":"Table",children:ie.tableNumber}),n.jsx("td",{"data-label":"Amount",children:ie.amount}),n.jsx("td",{"data-label":"Actions",children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>Ce(ie),children:"View"}),n.jsx("button",{className:"action-btn edit",onClick:()=>Le(ie),children:"Edit"}),n.jsx("button",{className:"action-btn print",onClick:()=>tt(ie),children:"Print"})]})})]},ie.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"11",className:"no-orders",children:"No orders found matching your criteria"})})})]})})}),le>0&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",onClick:()=>re(ie=>Math.max(ie-1,1)),disabled:H===1||x,children:"Previous"}),n.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,le)},(ie,De)=>{let Ye;return le<=5||H<=3?Ye=De+1:H>=le-2?Ye=le-4+De:Ye=H-2+De,n.jsx("button",{className:`pagination-page ${H===Ye?"active":""}`,onClick:()=>re(Ye),disabled:x,children:Ye},Ye)}),le>5&&H<le-2&&n.jsx("span",{className:"pagination-ellipsis",children:"..."}),le>5&&H<le-2&&n.jsx("button",{className:`pagination-page ${H===le?"active":""}`,onClick:()=>re(le),disabled:x,children:le})]}),n.jsx("button",{className:"pagination-btn",onClick:()=>re(ie=>Math.min(ie+1,le)),disabled:H===le||x,children:"Next"})]}),y&&S&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:[S.isGuestOrder?"Guest":"Staff"," Order Details ",S.orderId]}),n.jsx("button",{className:"modal-close",onClick:ce,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"order-details",children:[n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Order By"}),n.jsxs("div",{className:"order-detail-value",children:[S.customer,n.jsx("span",{className:`customer-type-badge ${S.isGuestOrder?"guest":"staff"}`,style:{marginLeft:"8px"},children:S.customerType})]})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Mobile Number"}),n.jsx("div",{className:"order-detail-value",children:S.customerMobile})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Date"}),n.jsx("div",{className:"order-detail-value",children:S.date})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Branch"}),n.jsx("div",{className:"order-detail-value",children:S.branch})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Table Number"}),n.jsx("div",{className:"order-detail-value",children:S.tableNumber})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Number of People"}),n.jsx("div",{className:"order-detail-value",children:n.jsxs("div",{className:"people-count",children:[n.jsx(Ls,{size:16}),S.peopleCount]})})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Order Status"}),n.jsx("div",{className:"order-detail-value",children:n.jsx("span",{className:`status-badge ${S.status||"pending"}`,children:S.status?S.status.charAt(0).toUpperCase()+S.status.slice(1):"Pending"})})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Payment Method"}),n.jsx("div",{className:"order-detail-value",children:n.jsxs("div",{className:"payment-method-display",children:[J(S.paymentMethod),n.jsx("span",{children:S.paymentMethod?S.paymentMethod.charAt(0).toUpperCase()+S.paymentMethod.slice(1):"Cash"})]})})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Payment Status"}),n.jsx("div",{className:"order-detail-value",children:n.jsx("span",{className:`status-badge ${Ne(S.paymentStatus)}`,children:S.paymentStatus?S.paymentStatus.charAt(0).toUpperCase()+S.paymentStatus.slice(1):"Pending"})})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Price Details"}),n.jsx("div",{className:"order-items-table",children:n.jsx("table",{className:"data-table",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Subtotal"}),n.jsxs("td",{style:{textAlign:"right"},children:["",(($e=S.subtotal)==null?void 0:$e.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Tax (5%)"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((Ze=S.tax)==null?void 0:Ze.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Service Charge (10%)"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((Oe=S.serviceCharge)==null?void 0:Oe.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{style:{fontWeight:"bold"},children:[n.jsx("td",{children:"Total Amount"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((Qe=S.grandTotal)==null?void 0:Qe.toFixed(2))||"0.00"]})]})]})})})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Order Items"}),n.jsx("div",{className:"order-items-table",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:((Pt=(ht=S.originalOrder)==null?void 0:ht.items)==null?void 0:Pt.length)>0?S.originalOrder.items.map((ie,De)=>n.jsxs("tr",{children:[n.jsx("td",{children:ie.name}),n.jsx("td",{children:ie.quantity}),n.jsxs("td",{children:["",ie.price.toFixed(2)]}),n.jsxs("td",{children:["",(ie.price*ie.quantity).toFixed(2)]})]},De)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:ce,children:"Close"}),n.jsxs("button",{className:"btn btn-print",onClick:()=>tt(S),children:[n.jsx(wi,{size:16}),"Print"]}),n.jsx("button",{className:"btn btn-primary",onClick:()=>{ce(),Le(S)},children:"Edit Order"})]})]})}),E&&S&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:["Edit ",S.isGuestOrder?"Guest":"Staff"," Order ",S.orderId]}),n.jsx("button",{className:"modal-close",onClick:X,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Order By"}),n.jsx("input",{type:"text",value:S.customer,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Customer Type"}),n.jsx("input",{type:"text",value:S.customerType,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Mobile Number"}),n.jsx("input",{type:"text",value:S.customerMobile,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Branch"}),n.jsx("input",{type:"text",value:S.branch,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Table Number"}),n.jsx("input",{type:"text",value:S.tableNumber,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Order Status"}),n.jsx("div",{className:"current-status-display",children:n.jsxs("span",{className:`status-badge ${(S==null?void 0:S.status)||"pending"}`,children:["Current: ",S!=null&&S.status?S.status.charAt(0).toUpperCase()+S.status.slice(1):"Pending"]})}),S.status!=="completed"&&S.status!=="cancelled"&&n.jsxs("div",{className:"status-progression-buttons",children:[S.status==="pending"&&n.jsx("button",{type:"button",className:"progression-btn preparing",onClick:()=>Ae(S.id,"preparing"),disabled:M,children:"Mark as Preparing"}),S.status==="preparing"&&n.jsx("button",{type:"button",className:"progression-btn served",onClick:()=>Ae(S.id,"served"),disabled:M,children:"Mark as Served"}),S.status==="served"&&n.jsx("button",{type:"button",className:"progression-btn completed",onClick:()=>Ae(S.id,"completed"),disabled:M,children:"Mark as Completed"}),(S.status==="pending"||S.status==="preparing")&&n.jsx("button",{type:"button",className:"progression-btn cancelled",onClick:()=>Ae(S.id,"cancelled"),disabled:M,children:"Cancel Order"})]}),(S.status==="completed"||S.status==="cancelled")&&n.jsx("div",{className:"status-final-message",children:n.jsxs("p",{children:["Order is ",S.status,". No further status changes allowed."]})})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Payment Status"}),n.jsx("div",{className:"current-status-display",children:n.jsxs("span",{className:`status-badge ${Ne(S==null?void 0:S.paymentStatus)}`,children:["Current: ",S!=null&&S.paymentStatus?S.paymentStatus.charAt(0).toUpperCase()+S.paymentStatus.slice(1):"Pending"]})}),S.paymentStatus!=="completed"&&S.paymentStatus!=="refunded"&&n.jsxs("div",{className:"status-progression-buttons",children:[S.paymentStatus==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",className:"progression-btn completed",onClick:()=>Ve(S.id,"completed"),disabled:M,children:"Mark as Paid"}),n.jsx("button",{type:"button",className:"progression-btn failed",onClick:()=>Ve(S.id,"failed"),disabled:M,children:"Mark as Failed"})]}),S.paymentStatus==="failed"&&n.jsx("button",{type:"button",className:"progression-btn completed",onClick:()=>Ve(S.id,"completed"),disabled:M,children:"Mark as Paid"})]}),(S.paymentStatus==="completed"||S.paymentStatus==="paid")&&n.jsx("div",{className:"status-progression-buttons",children:n.jsx("button",{type:"button",className:"progression-btn refunded",onClick:()=>Ve(S.id,"refunded"),disabled:M,children:"Mark as Refunded"})}),S.paymentStatus==="refunded"&&n.jsx("div",{className:"status-final-message",children:n.jsx("p",{children:"Payment has been refunded. No further payment changes allowed."})})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Payment Method"}),n.jsxs("select",{name:"paymentMethod",value:k.paymentMethod,onChange:ne,className:"form-select",children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"netbanking",children:"Net Banking"}),n.jsx("option",{value:"wallet",children:"Wallet"})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h4",{children:"Order Items"}),n.jsxs("div",{className:"alert-message",children:[n.jsx(fr,{size:16}),n.jsx("span",{children:"Use buttons above to update order and payment status progressively"})]})]}),n.jsx("div",{className:"order-items-table",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:((Et=(Rt=S.originalOrder)==null?void 0:Rt.items)==null?void 0:Et.length)>0?S.originalOrder.items.map((ie,De)=>n.jsxs("tr",{children:[n.jsx("td",{children:ie.name}),n.jsx("td",{children:ie.quantity}),n.jsxs("td",{children:["",ie.price.toFixed(2)]}),n.jsxs("td",{children:["",(ie.price*ie.quantity).toFixed(2)]})]},De)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:X,disabled:M,children:"Close"}),n.jsx("button",{className:"btn btn-primary",onClick:te,disabled:M,children:M?n.jsxs(n.Fragment,{children:[n.jsx(Ra,{size:16,className:"animate-spin"}),n.jsx("span",{children:"Updating..."})]}):"Update Payment Method"})]})]})}),n.jsx("style",{children:`
        /* Base Styles */
        .orders-page {
          padding: 20px;
          max-width: 100%;
          margin: 0 auto;
          background: #f8fafc;
          min-height: 100vh;
        }

        /* Success Message */
        .success-message {
          position: fixed;
          top: 20px;
          right: 20px;
          background: #10b981;
          color: white;
          padding: 12px 16px;
          border-radius: 8px;
          display: flex;
          align-items: center;
          gap: 8px;
          z-index: 1000;
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .success-message button {
          background: none;
          border: none;
          color: white;
          cursor: pointer;
          padding: 4px;
          border-radius: 4px;
        }

        .success-message button:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        /* Page Header */
        .page-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 24px;
          flex-wrap: wrap;
          gap: 16px;
        }

        .header-title-section h1 {
          font-size: 28px;
          font-weight: 700;
          color: #1f2937;
          margin: 0;
        }

        .last-updated {
          font-size: 12px;
          color: #6b7280;
          margin: 4px 0 0 0;
          font-style: italic;
        }

        .header-actions {
          display: flex;
          gap: 12px;
        }

        .btn {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 10px 16px;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s ease;
          border: none;
        }

        .btn-outline {
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
        }

        .btn-outline:hover {
          background: #f9fafb;
          border-color: #9ca3af;
        }

        .btn-primary {
          background: #d97706;
          color: white;
        }

        .btn-primary:hover {
          background: #d97706;
        }

        .btn-primary:disabled {
          background: #9ca3af;
          cursor: not-allowed;
        }

        .btn-print {
          background: #059669;
          color: white;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .btn-print:hover {
          background: #047857;
        }

        /* Filters Bar */
        .filters-bar {
          background: white;
          padding: 20px;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          margin-bottom: 24px;
          display: flex;
          flex-direction: column;
          gap: 16px;
        }

        .search-container {
          position: relative;
          flex: 1;
          min-width: 300px;
        }

        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #9ca3af;
          pointer-events: none;
        }

        .search-input {
          width: 100%;
          padding: 12px 12px 12px 40px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          outline: none;
          background: white;
        }

        .search-input:focus {
          border-color: #d97706;
          box-shadow: 0 0 0 3px rgba(221, 124, 2, 0.1);
        }

        .filter-buttons {
          display: flex;
          gap: 12px;
          flex-wrap: wrap;
        }

        .filter-select {
          padding: 10px 12px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          background: white;
          min-width: 150px;
          outline: none;
          cursor: pointer;
        }

        .filter-select:focus {
          border-color: #d97706;
          box-shadow: 0 0 0 3px rgba(221, 124, 2, 0.1);
        }

        /* Error Container */
        .error-container {
          margin: 20px 0;
          padding: 12px 16px;
          background: #fee2e2;
          color: #dc2626;
          border-radius: 8px;
          display: flex;
          align-items: center;
          gap: 8px;
          border: 1px solid #fecaca;
        }

        /* Collection Statistics */
        .collection-stats-section {
          background: white;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          padding: 24px;
          margin-bottom: 24px;
        }

        .stats-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
          flex-wrap: wrap;
          gap: 16px;
        }

        .stats-header h2 {
          font-size: 20px;
          font-weight: 600;
          color: #1f2937;
          margin: 0;
        }

        .period-filters {
          display: flex;
          gap: 8px;
          background: #f3f4f6;
          padding: 4px;
          border-radius: 8px;
        }

        .period-btn {
          padding: 8px 16px;
          border: none;
          background: transparent;
          color: #6b7280;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
          transition: all 0.2s ease;
        }

        .period-btn:hover {
          background: #e5e7eb;
          color: #374151;
        }

        .period-btn.active {
          background: #d97706;
          color: white;
        }

        .stats-cards {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
        }

        .stat-card {
          background: #f8fafc;
          border-radius: 12px;
          padding: 20px;
          display: flex;
          align-items: center;
          gap: 16px;
          border: 1px solid #e2e8f0;
          transition: all 0.2s ease;
        }

        .stat-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-card.cash {
          border-left: 4px solid #10b981;
        }

        .stat-card.online {
          border-left: 4px solid #3b82f6;
        }

        .stat-card.total {
          border-left: 4px solid #d97706;
        }

        .stat-card.paid {
          border-left: 4px solid #10b981;
        }

        .stat-card.unpaid {
          border-left: 4px solid #ef4444;
        }

        .stat-icon {
          font-size: 32px;
          line-height: 1;
        }

        .stat-content {
          flex: 1;
        }

        .stat-label {
          font-size: 14px;
          color: #6b7280;
          margin-bottom: 4px;
        }

        .stat-value {
          font-size: 24px;
          font-weight: 700;
          color: #1f2937;
          margin-bottom: 2px;
        }

        .stat-count {
          font-size: 12px;
          color: #9ca3af;
        }



        /* Data Card */
        .data-card {
          background: white;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          margin-bottom: 24px;
        }

        /* Loading Container */
        .loading-container {
          text-align: center;
          padding: 60px 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
          color: #6b7280;
        }

        /* Table Container with Horizontal Scroll */
        .table-container {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }

        /* Data Table */
        .data-table {
          width: 100%;
          border-collapse: collapse;
          min-width: 1000px; /* Reduced width to make status columns more visible */
        }

        .data-table th,
        .data-table td {
          padding: 12px 16px;
          text-align: left;
          border-bottom: 1px solid #e5e7eb;
          white-space: nowrap;
        }

        /* Priority columns - Status columns should be more visible */
        .data-table th:nth-child(2),
        .data-table th:nth-child(3),
        .data-table td:nth-child(2),
        .data-table td:nth-child(3) {
          background: #f8fafc;
          font-weight: 600;
          min-width: 120px;
        }

        .data-table th {
          background: #f9fafb;
          font-weight: 600;
          color: #374151;
          font-size: 14px;
          position: sticky;
          top: 0;
          z-index: 10;
        }

        .data-table td {
          font-size: 14px;
          color: #6b7280;
        }

        .data-table tr:hover {
          background: #f9fafb;
        }

        .no-orders {
          text-align: center;
          padding: 40px 20px;
          color: #9ca3af;
          font-style: italic;
        }

        /* Customer Type Badge */
        .customer-type-badge {
          display: inline-block;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          text-transform: uppercase;
        }

        .customer-type-badge.staff {
          background: rgba(59, 130, 246, 0.1);
          color: #3b82f6;
        }

        .customer-type-badge.guest {
          background: rgba(16, 185, 129, 0.1);
          color: #10b981;
        }

        /* People Count */
        .people-count {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        /* Status Badges */
        .status-badge {
          display: inline-block !important;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          text-transform: capitalize;
          min-width: 60px;
          text-align: center;
          border: 1px solid transparent;
        }

        .status-badge.pending {
          background: #fef3c7 !important;
          color: #92400e !important;
          border: 1px solid #f59e0b !important;
        }

        .status-badge.preparing {
          background: #dbeafe !important;
          color: #1e40af !important;
          border: 1px solid #3b82f6 !important;
        }

        .status-badge.served {
          background: #e0e7ff !important;
          color: #5b21b6 !important;
          border: 1px solid #8b5cf6 !important;
        }

        .status-badge.completed {
          background: #d1fae5 !important;
          color: #065f46 !important;
          border: 1px solid #10b981 !important;
        }

        .status-badge.cancelled {
          background: #fee2e2 !important;
          color: #991b1b !important;
          border: 1px solid #ef4444 !important;
        }

        /* Fallback for any status badge without specific class */
        .status-badge:not(.pending):not(.preparing):not(.served):not(.completed):not(.cancelled) {
          background: rgba(156, 163, 175, 0.2) !important;
          color: #374151 !important;
          border-color: #9ca3af;
        }

        /* Action Buttons */
        .action-buttons {
          display: flex;
          gap: 8px;
        }

        .action-btn {
          padding: 6px 12px;
          border-radius: 6px;
          font-size: 12px;
          font-weight: 500;
          cursor: pointer;
          border: none;
          transition: all 0.2s ease;
        }

        .action-btn.view {
          background: rgba(59, 130, 246, 0.1);
          color: #2563eb;
        }

        .action-btn.view:hover {
          background: rgba(59, 130, 246, 0.2);
        }

        .action-btn.edit {
          background: rgba(16, 185, 129, 0.1);
          color: #059669;
        }

        .action-btn.edit:hover {
          background: rgba(16, 185, 129, 0.2);
        }

        .action-btn.print {
          background: rgba(139, 92, 246, 0.1);
          color: #7c3aed;
        }

        .action-btn.print:hover {
          background: rgba(139, 92, 246, 0.2);
        }

        /* Pagination */
        .pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 8px;
          margin-top: 24px;
          flex-wrap: wrap;
        }

        .pagination-btn {
          padding: 8px 16px;
          border: 1px solid #d1d5db;
          background: white;
          color: #374151;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
          background: #f9fafb;
          border-color: #9ca3af;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-pages {
          display: flex;
          gap: 4px;
          align-items: center;
        }

        .pagination-page {
          width: 36px;
          height: 36px;
          border: 1px solid #d1d5db;
          background: white;
          color: #374151;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
        }

        .pagination-page:hover:not(:disabled) {
          background: #d97706;
          border-color: #d97706;
        }

        .pagination-page.active {
          background: #d97706;
          color: white;
          border-color: #d97706;
        }

        .pagination-page:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-ellipsis {
          padding: 0 8px;
          color: #9ca3af;
        }

        /* Modal Styles */
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 20px;
        }

        .modal {
          background: white;
          border-radius: 12px;
          max-width: 600px;
          width: 100%;
          max-height: 90vh;
          display: flex;
          flex-direction: column;
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 24px;
          border-bottom: 1px solid #e5e7eb;
        }

        .modal-title {
          font-size: 18px;
          font-weight: 600;
          color: #1f2937;
          margin: 0;
        }

        .modal-close {
          background: none;
          border: none;
          font-size: 24px;
          cursor: pointer;
          color: #6b7280;
          padding: 4px;
          border-radius: 4px;
          line-height: 1;
        }

        .modal-close:hover {
          color: #374151;
          background: #f3f4f6;
        }

        .modal-body {
          flex: 1;
          overflow-y: auto;
          padding: 24px;
        }

        .modal-footer {
          display: flex;
          justify-content: flex-end;
          gap: 12px;
          padding: 24px;
          border-top: 1px solid #e5e7eb;
        }

        /* Order Details */
        .order-details {
          margin-bottom: 24px;
        }

        .order-detail-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px 0;
          border-bottom: 1px solid #f3f4f6;
        }

        .order-detail-row:last-child {
          border-bottom: none;
        }

        .order-detail-label {
          font-weight: 500;
          color: #374151;
          min-width: 140px;
        }

        .order-detail-value {
          color: #6b7280;
          text-align: right;
          flex: 1;
        }

        .payment-method-display {
          display: flex;
          align-items: center;
          gap: 8px;
          justify-content: flex-end;
        }

        /* Order Items Section */
        .order-items-section {
          margin-bottom: 24px;
        }

        .order-items-section h4 {
          font-size: 16px;
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 16px;
        }

        .order-items-table {
          border: 1px solid #e5e7eb;
          border-radius: 8px;
          overflow: hidden;
        }

        .order-items-table .data-table {
          min-width: auto;
        }

        .order-items-table .data-table th,
        .order-items-table .data-table td {
          padding: 8px 12px;
        }

        /* Form Styles */
        .form-group {
          margin-bottom: 16px;
        }

        .form-label {
          display: block;
          font-size: 14px;
          font-weight: 500;
          color: #374151;
          margin-bottom: 6px;
        }

        .form-input,
        .form-select {
          width: 100%;
          padding: 10px 12px;
          border: 1px solid #d1d5db;
          border-radius: 6px;
          font-size: 14px;
          outline: none;
          background: white;
        }

        .form-input:focus,
        .form-select:focus {
          border-color: #d97706;
          box-shadow: 0 0 0 3px rgba(221, 124, 2, 0.1);
        }

        .form-input:disabled {
          background: #f9fafb;
          color: #6b7280;
          cursor: not-allowed;
        }

        /* Progressive Status Update Styles */
        .current-status-display {
          margin-bottom: 12px;
        }

        .status-progression-buttons {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-top: 8px;
        }

        .progression-btn {
          padding: 10px 16px;
          border: none;
          border-radius: 6px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
          text-align: left;
        }

        .progression-btn.preparing {
          background: #dbeafe;
          color: #1e40af;
          border: 1px solid #3b82f6;
        }

        .progression-btn.preparing:hover {
          background: #bfdbfe;
        }

        .progression-btn.served {
          background: #e0e7ff;
          color: #5b21b6;
          border: 1px solid #8b5cf6;
        }

        .progression-btn.served:hover {
          background: #c7d2fe;
        }

        .progression-btn.completed {
          background: #d1fae5;
          color: #065f46;
          border: 1px solid #10b981;
        }

        .progression-btn.completed:hover {
          background: #a7f3d0;
        }

        .progression-btn.cancelled {
          background: #fee2e2;
          color: #991b1b;
          border: 1px solid #ef4444;
        }

        .progression-btn.cancelled:hover {
          background: #fecaca;
        }

        .progression-btn.failed {
          background: #fee2e2;
          color: #991b1b;
          border: 1px solid #ef4444;
        }

        .progression-btn.failed:hover {
          background: #fecaca;
        }

        .progression-btn.refunded {
          background: #e0e7ff;
          color: #5b21b6;
          border: 1px solid #8b5cf6;
        }

        .progression-btn.refunded:hover {
          background: #c7d2fe;
        }

        .status-change-preview {
          margin-top: 8px;
          padding: 8px 12px;
          background: #f0f9ff;
          border: 1px solid #0ea5e9;
          border-radius: 4px;
          font-size: 12px;
          color: #0369a1;
        }

        .status-final-message {
          margin-top: 12px;
          padding: 12px;
          background: #f3f4f6;
          border: 1px solid #d1d5db;
          border-radius: 6px;
        }

        .status-final-message p {
          margin: 0;
          font-size: 13px;
          color: #6b7280;
          font-style: italic;
        }

        .section-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }

        .alert-message {
          display: flex;
          align-items: center;
          gap: 6px;
          font-size: 12px;
          color: #6b7280;
        }

        /* Animations */
        .animate-spin {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
          .orders-page {
            padding: 16px;
          }

          .page-header {
            flex-direction: column;
            align-items: flex-start;
          }

          .page-header h1 {
            font-size: 24px;
          }

          .filters-bar {
            padding: 16px;
          }

          .filter-buttons {
            flex-direction: column;
          }

          .filter-select {
            min-width: auto;
            width: 100%;
          }

          .search-container {
            min-width: auto;
          }

          .collection-stats-section {
            padding: 20px;
          }

          .stats-header {
            flex-direction: column;
            align-items: flex-start;
          }

          .stats-cards {
            grid-template-columns: 1fr;
          }
        }

        @media (max-width: 768px) {
          .orders-page {
            padding: 12px;
          }

          .page-header h1 {
            font-size: 20px;
          }

          .filters-bar {
            padding: 12px;
          }

          .collection-stats-section {
            padding: 16px;
          }

          .stats-header h2 {
            font-size: 18px;
          }

          .period-filters {
            width: 100%;
            justify-content: center;
          }

          .period-btn {
            flex: 1;
            text-align: center;
          }

          .stat-card {
            padding: 16px;
          }

          .stat-icon {
            font-size: 28px;
          }

          .stat-value {
            font-size: 20px;
          }

          /* Mobile Table Styles */
          .table-container {
            border-radius: 8px;
            overflow: hidden;
          }

          .data-table {
            min-width: 700px; /* Further reduced to prioritize status columns */
          }

          .data-table th,
          .data-table td {
            padding: 8px 12px;
            font-size: 13px;
          }

          .action-buttons {
            flex-direction: column;
            gap: 4px;
          }

          .action-btn {
            padding: 4px 8px;
            font-size: 11px;
          }

          /* Modal adjustments for mobile */
          .modal {
            margin: 10px;
            max-height: calc(100vh - 20px);
          }

          .modal-header,
          .modal-body,
          .modal-footer {
            padding: 16px;
          }

          .modal-title {
            font-size: 16px;
          }

          .order-detail-row {
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
          }

          .order-detail-value {
            text-align: left;
          }

          .payment-method-display {
            justify-content: flex-start;
          }

          /* Pagination adjustments */
          .pagination {
            gap: 4px;
          }

          .pagination-btn {
            padding: 6px 12px;
            font-size: 12px;
          }

          .pagination-page {
            width: 32px;
            height: 32px;
            font-size: 12px;
          }
        }

        @media (max-width: 480px) {
          .orders-page {
            padding: 8px;
          }

          .page-header {
            gap: 12px;
          }

          .page-header h1 {
            font-size: 18px;
          }

          .btn {
            padding: 8px 12px;
            font-size: 12px;
          }

          .filters-bar {
            padding: 8px;
            gap: 12px;
          }

          .collection-stats-section {
            padding: 12px;
          }

          .stats-header h2 {
            font-size: 16px;
          }

          .period-btn {
            padding: 6px 12px;
            font-size: 12px;
          }

          .stat-card {
            padding: 12px;
            gap: 12px;
          }

          .stat-icon {
            font-size: 24px;
          }

          .stat-value {
            font-size: 18px;
          }

          .stat-label {
            font-size: 13px;
          }

          .stat-count {
            font-size: 11px;
          }

          .search-input {
            padding: 10px 10px 10px 36px;
            font-size: 13px;
          }

          .filter-select {
            padding: 8px 10px;
            font-size: 13px;
          }

          .data-table {
            min-width: 600px; /* Further reduced for very small screens */
          }

          .data-table th,
          .data-table td {
            padding: 6px 8px;
            font-size: 12px;
          }

          .customer-type-badge,
          .status-badge {
            font-size: 10px;
            padding: 2px 6px;
          }

          .success-message {
            top: 10px;
            right: 10px;
            left: 10px;
            padding: 10px 12px;
            font-size: 13px;
          }
        }

        /* Custom Scrollbar for Table */
        .table-container::-webkit-scrollbar {
          height: 8px;
        }

        .table-container::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }

        /* Focus styles for accessibility */
        .data-table:focus-within {
          outline: 2px solid #d97706;
          outline-offset: 2px;
        }

        .action-btn:focus {
          outline: 2px solid #d97706;
          outline-offset: 2px;
        }

        .pagination-btn:focus,
        .pagination-page:focus {
          outline: 2px solid #d97706;
          outline-offset: 2px;
        }
      `})]})},kc=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),xae=()=>{var Ce,Le,ne,Ae,Ve,te,ce,X;const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState(!0),[p,m]=N.useState(""),[x,v]=N.useState(!1),[j,b]=N.useState(!1),[y,C]=N.useState(null),[E,O]=N.useState({orderStatus:"",paymentStatus:""}),[S,T]=N.useState(""),[k,D]=N.useState(!1),[F,B]=N.useState(""),[M,L]=N.useState("all"),[A,U]=N.useState("all"),[P,I]=N.useState("all"),[R,W]=N.useState("today"),[Q,ge]=N.useState(1),[q,Y]=N.useState(1),z=7;N.useEffect(()=>{ee(),H()},[M,A,P]);const ee=async()=>{try{const se=await kc.get("/branch");d(se.data)}catch(se){console.error("Error fetching branches:",se),m("Failed to load branches. Some filter options may not be available.")}},H=async()=>{f(!0),m(""),t([]),s([]),a([]);try{const[se,J]=await Promise.all([kc.get("/counter-order/orders").catch(()=>({data:{orders:[]}})),kc.get("/staff-order").catch(()=>({data:{orders:[]}}))]);let Ne=[],Ge=[];if(se.data.success&&Array.isArray(se.data.data)?Ge=se.data.data:se.data.orders&&Array.isArray(se.data.orders)?Ge=se.data.orders:Array.isArray(se.data)&&(Ge=se.data),Ge.length>0){const Ze=Ge.map((Oe,Qe)=>{var ht,Pt,Rt,Et,ie,De,Ye,Ft;return Oe.id||console.warn(`Counter order at index ${Qe} is missing id:`,Oe),Oe.customerName||console.warn(`Counter order at index ${Qe} is missing customerName:`,Oe),(ht=Oe.userId)!=null&&ht.name||console.warn(`Counter order at index ${Qe} is missing counter user name:`,Oe),{id:Oe.id||`temp-counter-id-${Qe}`,customerName:Oe.customerName||"Unknown Customer",phoneNumber:Oe.phoneNumber||"N/A",counterUser:((Pt=Oe.userId)==null?void 0:Pt.name)||"Unknown Counter User",counterUserId:((Rt=Oe.userId)==null?void 0:Rt.id)||null,date:new Date(Oe.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:((Et=Oe.branch)==null?void 0:Et.name)||"Unknown Branch",branchId:((ie=Oe.branch)==null?void 0:ie.id)||null,invoice:((De=Oe.invoice)==null?void 0:De.invoiceNumber)||"N/A",items:((Ye=Oe.items)==null?void 0:Ye.length)||0,itemNames:((Ft=Oe.items)==null?void 0:Ft.map(me=>me.name).join(", "))||"No items",subtotal:Oe.subtotal||Oe.totalAmount||0,tax:Oe.tax||0,serviceCharge:Oe.serviceCharge||0,grandTotal:Oe.grandTotal||Oe.totalAmount||0,amount:`${(Oe.grandTotal||Oe.totalAmount||0).toFixed(2)}`,totalAmount:Oe.totalAmount||0,orderStatus:Oe.orderStatus||"pending",paymentMethod:Oe.paymentMethod||"cash",paymentStatus:Oe.paymentStatus||"pending",cancellationReason:Oe.cancellationReason||"",cancelledAt:Oe.cancelledAt||null,originalOrder:Oe,orderSource:"counter"}}).filter(Oe=>Oe.id);Ne=[...Ne,...Ze]}let tt=[];if(J.data.success&&Array.isArray(J.data.data)?tt=J.data.data:J.data.orders&&Array.isArray(J.data.orders)?tt=J.data.orders:Array.isArray(J.data)&&(tt=J.data),tt.length>0){const Oe=tt.filter(Qe=>Qe.isGuestOrder&&Qe.categoryName&&(Qe.categoryName.toLowerCase().includes("self service")||Qe.categoryName.toLowerCase().includes("counter"))).map((Qe,ht)=>{var Pt,Rt;return{id:Qe._id||`temp-guest-id-${ht}`,customerName:Qe.customerName||"Unknown Customer",phoneNumber:Qe.customerMobile||"N/A",counterUser:"ViratCounter App",counterUserId:null,date:new Date(Qe.orderTime||Qe.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:Qe.branchName||"Unknown Branch",branchId:Qe.branchId||null,invoice:Qe.orderId||"N/A",items:((Pt=Qe.items)==null?void 0:Pt.length)||0,itemNames:((Rt=Qe.items)==null?void 0:Rt.map(Et=>Et.name).join(", "))||"No items",subtotal:Qe.subtotal||Qe.totalAmount||0,tax:Qe.tax||0,serviceCharge:Qe.serviceCharge||0,grandTotal:Qe.grandTotal||Qe.totalAmount||0,amount:`${(Qe.grandTotal||Qe.totalAmount||0).toFixed(2)}`,totalAmount:Qe.totalAmount||0,orderStatus:Qe.status||"pending",paymentMethod:Qe.paymentMethod||"cash",paymentStatus:Qe.paymentStatus||"pending",cancellationReason:Qe.cancellationReason||"",cancelledAt:Qe.cancelledAt||null,originalOrder:Qe,orderSource:"guest"}}).filter(Qe=>Qe.id);Ne=[...Ne,...Oe]}Ne.sort((Ze,Oe)=>new Date(Oe.originalOrder.createdAt||Oe.originalOrder.orderTime)-new Date(Ze.originalOrder.createdAt||Ze.originalOrder.orderTime));let $e=Ne;M!=="all"&&($e=$e.filter(Ze=>Ze.orderStatus===M)),A!=="all"&&($e=$e.filter(Ze=>Ze.paymentStatus===A)),P!=="all"&&($e=$e.filter(Ze=>Ze.branchId===P)),t($e)}catch(se){console.error("Error fetching orders:",se),m("Failed to load orders. Please refresh the page and try again.")}finally{f(!1)}};N.useEffect(()=>{const se=e.filter(J=>{if(!F.trim())return!0;const Ne=J.customerName||"",Ge=J.phoneNumber||"",tt=J.counterUser||"",$e=J.invoice||"",Ze=F.trim().toLowerCase();return console.log(`Searching for "${Ze}" in order:`,{customerName:Ne,phoneNumber:Ge,counterUser:tt,invoice:$e}),Ne.toLowerCase().includes(Ze)||Ge.toLowerCase().includes(Ze)||tt.toLowerCase().includes(Ze)||$e.toLowerCase().includes(Ze)});s(se),Y(Math.ceil(se.length/z)),ge(1)},[e,F]),N.useEffect(()=>{const se=(Q-1)*z,J=se+z,Ne=i.slice(se,J);a(Ne)},[i,Q]),N.useEffect(()=>{const se=setTimeout(()=>{},300);return()=>clearTimeout(se)},[F]);const re=se=>{C(se),v(!0)},le=se=>{C(se),O({orderStatus:se.orderStatus,paymentStatus:se.paymentStatus}),b(!0)},pe=se=>{const{name:J,value:Ne}=se.target;O({...E,[J]:Ne})},Se=async()=>{D(!0);try{const se=y.orderSource==="guest";if(se){const Ne={};E.orderStatus!==y.orderStatus&&(Ne.status=E.orderStatus),E.paymentStatus!==y.paymentStatus&&(Ne.paymentStatus=E.paymentStatus),Object.keys(Ne).length>0&&await kc.put(`/staff-order/${y.id}/status`,Ne)}else E.orderStatus!==y.orderStatus&&await kc.put(`/counter-order/orders/${y.id}/order-status`,{orderStatus:E.orderStatus}),E.paymentStatus!==y.paymentStatus&&await kc.put(`/counter-order/orders/${y.id}/payment-status`,{paymentStatus:E.paymentStatus});await H(),b(!1),T(` ${se?"ViratCounter":"Counter"} order status updated successfully`),setTimeout(()=>{T("")},2e3)}catch(se){console.error("Error updating order:",se),alert("Failed to update order. Please try again.")}finally{D(!1)}},K=()=>{v(!1),C(null)},ue=()=>{b(!1),C(null)},ye=(se,J)=>{se==="orderStatus"?L(J):se==="paymentStatus"?U(J):se==="branch"&&I(J),ge(1)},fe=se=>{switch(se==null?void 0:se.toLowerCase()){case"card":return n.jsx(Na,{size:16});case"upi":return n.jsx(Ws,{size:16});case"qr":return n.jsx(Ws,{size:16});case"cash":default:return n.jsx(Ws,{size:16})}},Xe=()=>{let se=`Order ID,Customer Name,Phone Number,Counter User,Date & Time,Branch,Invoice Number,Order Status,Payment Status,Payment Method,Subtotal,Tax,Service Charge,Grand Total,Items Count,Item Details
`;const J=new Date,Ne=J.toLocaleDateString("en-IN")+" "+J.toLocaleTimeString("en-IN"),Ge=i.length,tt=i.reduce((De,Ye)=>De+(Ye.grandTotal||0),0),$e=i.filter(De=>De.paymentStatus==="completed"),Ze=$e.reduce((De,Ye)=>De+(Ye.grandTotal||0),0),Oe=tt-Ze;se+=`
"COUNTER ORDERS EXPORT SUMMARY"
`,se+=`"Export Date & Time:","${Ne}"
`,se+=`"Total Orders:",${Ge}
`,se+=`"Total Amount:",${tt.toFixed(2)}
`,se+=`"Paid Orders:",${$e.length}
`,se+=`"Paid Amount:",${Ze.toFixed(2)}
`,se+=`"Unpaid Orders:",${Ge-$e.length}
`,se+=`"Unpaid Amount:",${Oe.toFixed(2)}
`,se+=`"Collection Rate:",${tt>0?(Ze/tt*100).toFixed(1):0}
`,se+=`
"DETAILED ORDER LIST"
`,se+=`Order ID,Customer Name,Phone Number,Counter User,Date & Time,Branch,Invoice Number,Order Status,Payment Status,Payment Method,Subtotal,Tax,Service Charge,Grand Total,Items Count,Item Details
`,i.forEach(De=>{var ke,Pe,it,pt,Nt,_t,ot,jt;const Ye=((Pe=(ke=De.originalOrder)==null?void 0:ke.items)==null?void 0:Pe.map(mt=>`${mt.name} (Qty: ${mt.quantity}, Price: ${mt.price.toFixed(2)})`).join("; "))||"No items",Ft=new Date(((it=De.originalOrder)==null?void 0:it.createdAt)||((pt=De.originalOrder)==null?void 0:pt.orderTime)||Date.now()),me=Ft.toLocaleDateString("en-IN")+" "+Ft.toLocaleTimeString("en-IN");se+=`"${De.invoice||De.id}","${De.customerName}","${De.phoneNumber}","${De.counterUser}","${me}","${De.branch}","${De.invoice}","${De.orderStatus}","${De.paymentStatus}","${De.paymentMethod}",${((Nt=De.subtotal)==null?void 0:Nt.toFixed(2))||"0.00"},${((_t=De.tax)==null?void 0:_t.toFixed(2))||"0.00"},${((ot=De.serviceCharge)==null?void 0:ot.toFixed(2))||"0.00"},${((jt=De.grandTotal)==null?void 0:jt.toFixed(2))||"0.00"},${De.items},"${Ye}"
`}),se+=`
"PAYMENT METHOD BREAKDOWN"
`;const Qe={};i.forEach(De=>{const Ye=De.paymentMethod||"cash";Qe[Ye]||(Qe[Ye]={count:0,amount:0}),Qe[Ye].count++,Qe[Ye].amount+=De.grandTotal||0}),se+=`Payment Method,Order Count,Total Amount
`,Object.entries(Qe).forEach(([De,Ye])=>{se+=`"${De.charAt(0).toUpperCase()+De.slice(1)}",${Ye.count},${Ye.amount.toFixed(2)}
`}),se+=`
"BRANCH-WISE BREAKDOWN"
`;const ht={};i.forEach(De=>{const Ye=De.branch||"Unknown";ht[Ye]||(ht[Ye]={count:0,amount:0}),ht[Ye].count++,ht[Ye].amount+=De.grandTotal||0}),se+=`Branch Name,Order Count,Total Amount
`,Object.entries(ht).forEach(([De,Ye])=>{se+=`"${De}",${Ye.count},${Ye.amount.toFixed(2)}
`}),se+=`
"COUNTER USER BREAKDOWN"
`;const Pt={};i.forEach(De=>{const Ye=De.counterUser||"Unknown";Pt[Ye]||(Pt[Ye]={count:0,amount:0}),Pt[Ye].count++,Pt[Ye].amount+=De.grandTotal||0}),se+=`Counter User,Order Count,Total Amount
`,Object.entries(Pt).forEach(([De,Ye])=>{se+=`"${De}",${Ye.count},${Ye.amount.toFixed(2)}
`});const Rt=new Blob([se],{type:"text/csv;charset=utf-8;"}),Et=window.URL.createObjectURL(Rt),ie=document.createElement("a");ie.setAttribute("hidden",""),ie.setAttribute("href",Et),ie.setAttribute("download",`counter-orders-detailed-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),window.URL.revokeObjectURL(Et)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"orders-page",children:[S&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:S}),n.jsx("button",{onClick:()=>T(""),children:n.jsx(ha,{size:16})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Counter Orders & ViratCounter App"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-outline",onClick:Xe,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:"Export to Excel"})]})})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by customer name, phone, counter user, or invoice...",className:"search-input",value:F,onChange:se=>B(se.target.value)})]}),n.jsxs("div",{className:"filter-buttons",children:[n.jsxs("select",{className:"filter-select",value:M,onChange:se=>ye("orderStatus",se.target.value),children:[n.jsx("option",{value:"all",children:"All Order Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]}),n.jsxs("select",{className:"filter-select",value:A,onChange:se=>ye("paymentStatus",se.target.value),children:[n.jsx("option",{value:"all",children:"All Payment Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"refunded",children:"Refunded"})]}),n.jsxs("select",{className:"filter-select",value:P,onChange:se=>ye("branch",se.target.value),children:[n.jsx("option",{value:"all",children:"All Branches"}),l.map(se=>n.jsx("option",{value:se._id,children:se.name},se._id))]})]})]}),p&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:p})]}),n.jsxs("div",{className:"collection-stats-section",children:[n.jsxs("div",{className:"stats-header",children:[n.jsx("h2",{children:"Collection Statistics"}),n.jsxs("div",{className:"period-filters",children:[n.jsx("button",{className:`period-btn ${R==="today"?"active":""}`,onClick:()=>W("today"),children:"Today"}),n.jsx("button",{className:`period-btn ${R==="week"?"active":""}`,onClick:()=>W("week"),children:"This Week"}),n.jsx("button",{className:`period-btn ${R==="month"?"active":""}`,onClick:()=>W("month"),children:"This Month"})]})]}),n.jsx("div",{className:"stats-cards",children:(()=>{const se=new Date;let J;if(R==="today")J=new Date(se.getFullYear(),se.getMonth(),se.getDate());else if(R==="week"){const Rt=se.getDay(),Et=Rt===0?6:Rt-1;J=new Date(se.getFullYear(),se.getMonth(),se.getDate()-Et)}else R==="month"&&(J=new Date(se.getFullYear(),se.getMonth(),1));const Ne=e.filter(Rt=>{var ie,De;return new Date(((ie=Rt.originalOrder)==null?void 0:ie.createdAt)||((De=Rt.originalOrder)==null?void 0:De.orderTime))>=J}),Ge=Ne.filter(Rt=>Rt.paymentStatus==="completed"),tt=Ne.filter(Rt=>Rt.paymentStatus!=="completed"),$e=Ne.reduce((Rt,Et)=>Rt+(Et.grandTotal||0),0),Ze=Ne.length,Oe=Ge.reduce((Rt,Et)=>Rt+(Et.grandTotal||0),0),Qe=Ge.length,ht=tt.reduce((Rt,Et)=>Rt+(Et.grandTotal||0),0),Pt=tt.length;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"stat-card total",children:[n.jsx("div",{className:"stat-icon",children:""}),n.jsxs("div",{className:"stat-content",children:[n.jsx("div",{className:"stat-label",children:"Total Orders"}),n.jsxs("div",{className:"stat-value",children:[Ze," orders"]}),n.jsxs("div",{className:"stat-count",children:["",$e.toFixed(2)]})]})]}),n.jsxs("div",{className:"stat-card paid",children:[n.jsx("div",{className:"stat-icon",children:""}),n.jsxs("div",{className:"stat-content",children:[n.jsx("div",{className:"stat-label",children:"Paid Orders"}),n.jsxs("div",{className:"stat-value",children:[Qe," orders"]}),n.jsxs("div",{className:"stat-count",children:["",Oe.toFixed(2)]})]})]}),n.jsxs("div",{className:"stat-card unpaid",children:[n.jsx("div",{className:"stat-icon",children:""}),n.jsxs("div",{className:"stat-content",children:[n.jsx("div",{className:"stat-label",children:"Unpaid Orders"}),n.jsxs("div",{className:"stat-value",children:[Pt," orders"]}),n.jsxs("div",{className:"stat-count",children:["",ht.toFixed(2)]})]})]})]})})()})]}),n.jsx("div",{className:"data-card",children:u?n.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[n.jsx(Ra,{size:24,className:"animate-spin"}),n.jsx("p",{children:"Loading counter orders..."})]}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Phone"}),n.jsx("th",{children:"User"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Invoice"}),n.jsx("th",{children:"Item Names"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.length>0?r.map(se=>n.jsxs("tr",{children:[n.jsx("td",{children:se.customerName}),n.jsx("td",{children:se.phoneNumber}),n.jsx("td",{children:se.counterUser}),n.jsx("td",{children:se.date}),n.jsx("td",{children:se.branch}),n.jsx("td",{children:se.invoice}),n.jsx("td",{children:se.itemNames}),n.jsx("td",{children:se.amount}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>re(se),children:"View"}),n.jsx("button",{className:"action-btn edit",onClick:()=>le(se),children:"Edit"})]})})]},se.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"no-orders",children:"No counter orders found matching your criteria"})})})]})}),q>0&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",onClick:()=>ge(se=>Math.max(se-1,1)),disabled:Q===1||u,children:"Previous"}),n.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,q)},(se,J)=>{let Ne;return q<=5||Q<=3?Ne=J+1:Q>=q-2?Ne=q-4+J:Ne=Q-2+J,n.jsx("button",{className:`pagination-page ${Q===Ne?"active":""}`,onClick:()=>ge(Ne),disabled:u,children:Ne},Ne)}),q>5&&Q<q-2&&n.jsx("span",{className:"pagination-ellipsis",children:"..."}),q>5&&Q<q-2&&n.jsx("button",{className:`pagination-page ${Q===q?"active":""}`,onClick:()=>ge(q),disabled:u,children:q})]}),n.jsx("button",{className:"pagination-btn",onClick:()=>ge(se=>Math.min(se+1,q)),disabled:Q===q||u,children:"Next"})]}),x&&y&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:["Counter Order Details - ",y.invoice]}),n.jsx("button",{className:"modal-close",onClick:K,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"order-details",children:[n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Customer Name"}),n.jsx("div",{className:"order-detail-value",children:y.customerName})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Phone Number"}),n.jsx("div",{className:"order-detail-value",children:y.phoneNumber})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Counter User"}),n.jsx("div",{className:"order-detail-value",children:y.counterUser})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Date"}),n.jsx("div",{className:"order-detail-value",children:y.date})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Branch"}),n.jsx("div",{className:"order-detail-value",children:y.branch})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Invoice Number"}),n.jsx("div",{className:"order-detail-value",children:y.invoice})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Payment Method"}),n.jsx("div",{className:"order-detail-value",children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[fe(y.paymentMethod),n.jsx("span",{children:y.paymentMethod?y.paymentMethod.charAt(0).toUpperCase()+y.paymentMethod.slice(1):"Cash"})]})})]}),y.cancellationReason&&n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Cancellation Reason"}),n.jsx("div",{className:"order-detail-value",children:y.cancellationReason})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Order Items"}),n.jsx("div",{className:"order-items-table",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:((Le=(Ce=y.originalOrder)==null?void 0:Ce.items)==null?void 0:Le.length)>0?y.originalOrder.items.map((se,J)=>n.jsxs("tr",{children:[n.jsx("td",{children:se.name}),n.jsx("td",{children:se.quantity}),n.jsxs("td",{children:["",se.price.toFixed(2)]}),n.jsxs("td",{children:["",(se.price*se.quantity).toFixed(2)]})]},J)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Order Summary"}),n.jsx("div",{className:"order-items-table",children:n.jsx("table",{className:"data-table",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Subtotal"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((ne=y.subtotal)==null?void 0:ne.toFixed(2))||"0.00"]})]}),y.tax>0&&n.jsxs("tr",{children:[n.jsx("td",{children:"Tax"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((Ae=y.tax)==null?void 0:Ae.toFixed(2))||"0.00"]})]}),y.serviceCharge>0&&n.jsxs("tr",{children:[n.jsx("td",{children:"Service Charge"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((Ve=y.serviceCharge)==null?void 0:Ve.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f8f9fa"},children:[n.jsx("td",{children:"Grand Total"}),n.jsxs("td",{style:{textAlign:"right",color:"#ff7e47"},children:["",((te=y.grandTotal)==null?void 0:te.toFixed(2))||"0.00"]})]})]})})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:K,children:"Close"}),n.jsx("button",{className:"btn btn-primary",onClick:()=>{K(),le(y)},children:"Edit Order"})]})]})}),j&&y&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:["Edit Counter Order - ",y.invoice]}),n.jsx("button",{className:"modal-close",onClick:ue,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Customer Name"}),n.jsx("input",{type:"text",value:y.customerName,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Phone Number"}),n.jsx("input",{type:"text",value:y.phoneNumber,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Counter User"}),n.jsx("input",{type:"text",value:y.counterUser,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Branch"}),n.jsx("input",{type:"text",value:y.branch,className:"form-input",disabled:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Order Status"}),n.jsxs("select",{name:"orderStatus",value:E.orderStatus,onChange:pe,className:"form-select",children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Payment Status"}),n.jsxs("select",{name:"paymentStatus",value:E.paymentStatus,onChange:pe,className:"form-select",children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"refunded",children:"Refunded"})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h4",{children:"Order Items"}),n.jsxs("div",{className:"alert-message",children:[n.jsx(fr,{size:16}),n.jsx("span",{children:"Only order status and payment status can be updated"})]})]}),n.jsx("div",{className:"order-items-table",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:((X=(ce=y.originalOrder)==null?void 0:ce.items)==null?void 0:X.length)>0?y.originalOrder.items.map((se,J)=>n.jsxs("tr",{children:[n.jsx("td",{children:se.name}),n.jsx("td",{children:se.quantity}),n.jsxs("td",{children:["",se.price.toFixed(2)]}),n.jsxs("td",{children:["",(se.price*se.quantity).toFixed(2)]})]},J)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:ue,disabled:k,children:"Cancel"}),n.jsx("button",{className:"btn btn-primary",onClick:Se,disabled:k,children:k?n.jsxs(n.Fragment,{children:[n.jsx(Ra,{size:16,className:"animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Changes"})]})]})})]}),n.jsx("style",{children:`
      /* Collection Statistics */
      .collection-stats-section {
        background: white;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        padding: 24px;
        margin-bottom: 24px;
      }

      .stats-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
        gap: 16px;
      }

      .stats-header h2 {
        font-size: 20px;
        font-weight: 600;
        color: #1f2937;
        margin: 0;
      }

      .period-filters {
        display: flex;
        gap: 8px;
        background: #f3f4f6;
        padding: 4px;
        border-radius: 8px;
      }

      .period-btn {
        padding: 8px 16px;
        border: none;
        background: transparent;
        color: #6b7280;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .period-btn:hover {
        background: #e5e7eb;
        color: #374151;
      }

      .period-btn.active {
        background: #d97706;
        color: white;
      }

      .stats-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
      }

      .stat-card {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 16px;
        border: 1px solid #e2e8f0;
        transition: all 0.2s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .stat-card.total {
        border-left: 4px solid #d97706;
      }

      .stat-card.paid {
        border-left: 4px solid #10b981;
      }

      .stat-card.unpaid {
        border-left: 4px solid #ef4444;
      }

      .stat-icon {
        font-size: 32px;
        line-height: 1;
      }

      .stat-content {
        flex: 1;
      }

      .stat-label {
        font-size: 14px;
        color: #6b7280;
        margin-bottom: 4px;
      }

      .stat-value {
        font-size: 24px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 2px;
      }

      .stat-count {
        font-size: 12px;
        color: #9ca3af;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .collection-stats-section {
          padding: 20px;
        }

        .stats-header {
          flex-direction: column;
          align-items: flex-start;
        }

        .stats-cards {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 768px) {
        .collection-stats-section {
          padding: 16px;
        }

        .stats-header h2 {
          font-size: 18px;
        }

        .period-filters {
          width: 100%;
          justify-content: center;
        }

        .period-btn {
          flex: 1;
          text-align: center;
        }

        .stat-card {
          padding: 16px;
        }

        .stat-icon {
          font-size: 28px;
        }

        .stat-value {
          font-size: 20px;
        }
      }

      @media (max-width: 480px) {
        .collection-stats-section {
          padding: 12px;
        }

        .stats-header h2 {
          font-size: 16px;
        }

        .period-btn {
          padding: 6px 12px;
          font-size: 12px;
        }

        .stat-card {
          padding: 12px;
          gap: 12px;
        }

        .stat-icon {
          font-size: 24px;
        }

        .stat-value {
          font-size: 18px;
        }

        .stat-label {
          font-size: 13px;
        }

        .stat-count {
          font-size: 11px;
        }
      }
    `})]})},Ic=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),yae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState([]),[p,m]=N.useState(!0),[x,v]=N.useState(""),[j,b]=N.useState(!1),[y,C]=N.useState(!1),[E,O]=N.useState(!1),[S,T]=N.useState(!1),[k,D]=N.useState(null),[F,B]=N.useState({branchId:"",categoryId:"",number:"",capacity:"",status:"available",image:null}),[M,L]=N.useState({branchId:"",categoryId:"",number:"",capacity:"",status:"available",image:null}),[A,U]=N.useState(""),[P,I]=N.useState(!1),[R,W]=N.useState(""),[Q,ge]=N.useState("all"),[q,Y]=N.useState("all"),[z,ee]=N.useState("all"),[H,re]=N.useState(1),[le,pe]=N.useState(1),Se=10,[K,ue]=N.useState(null),[ye,fe]=N.useState(null);N.useEffect(()=>{Xe(),Ce(),Le()},[Q,q,z]);const Xe=async()=>{try{const ie=await Ic.get("/branch");d(ie.data)}catch(ie){console.error("Error fetching branches:",ie),v("Failed to load branches. Some filter options may not be available.")}},Ce=async()=>{try{const ie=await Ic.get("/category");console.log("Categories API response:",ie.data),f(ie.data||[])}catch(ie){console.error("Error fetching categories:",ie),f([])}},Le=async()=>{m(!0),v(""),t([]),s([]),a([]);try{const ie={};q!=="all"&&(ie.branchId=q);const De=await Ic.get("/table",{params:ie});console.log("Full API response:",De),console.log("Response data:",De.data),console.log("Response data type:",typeof De.data),console.log("Response data keys:",Object.keys(De.data||{}));let Ye=[];if(De.data&&De.data.success&&Array.isArray(De.data.data))Ye=De.data.data;else if(Array.isArray(De.data))Ye=De.data;else throw console.error(" Unexpected response format:",De.data),new Error("Invalid response format: tables array missing");console.log("Extracted tablesData:",Ye),console.log("tablesData type:",typeof Ye),console.log("tablesData is array:",Array.isArray(Ye));const Ft=Ye.map((me,ke)=>{var Pe,it,pt,Nt;return{id:me._id||`temp-id-${ke}`,number:me.number||0,capacity:me.capacity||"",status:me.status||"available",branchId:((Pe=me.branchId)==null?void 0:Pe._id)||me.branchId||null,branchName:((it=me.branchId)==null?void 0:it.name)||"Unknown Branch",categoryId:((pt=me.categoryId)==null?void 0:pt._id)||me.categoryId||null,categoryName:((Nt=me.categoryId)==null?void 0:Nt.name)||"All Categories",image:me.image||null,qrCode:me.qrCode||null,createdAt:new Date(me.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),originalTable:me}}).filter(me=>me.id);t(Ft)}catch(ie){console.error("Error fetching tables:",ie),v("Failed to load tables. Please refresh the page and try again.")}finally{m(!1)}};N.useEffect(()=>{let ie=e;if(Q!=="all"&&(ie=ie.filter(De=>De.status===Q)),R.trim()){const De=R.trim().toLowerCase();ie=ie.filter(Ye=>{var Pe;const Ft=((Pe=Ye.number)==null?void 0:Pe.toString())||"",me=Ye.branchName||"",ke=Ye.status||"";return Ft.toLowerCase().includes(De)||me.toLowerCase().includes(De)||ke.toLowerCase().includes(De)})}s(ie),pe(Math.ceil(ie.length/Se)),re(1)},[e,R,Q]),N.useEffect(()=>{const ie=(H-1)*Se,De=ie+Se,Ye=i.slice(ie,De);a(Ye)},[i,H]);const ne=ie=>{D(ie),b(!0)},Ae=()=>{B({branchId:"",categoryId:"",number:"",status:"available",image:null}),ue(null),C(!0)},Ve=ie=>{D(ie),L({branchId:ie.branchId||"",categoryId:ie.categoryId||"",number:ie.number||"",capacity:ie.capacity||"",status:ie.status||"available",image:null}),fe(ie.image?`${ie.image}`:null),O(!0)},te=ie=>{D(ie),T(!0)},ce=ie=>{const{name:De,value:Ye}=ie.target;B({...F,[De]:Ye})},X=ie=>{const{name:De,value:Ye}=ie.target;L({...M,[De]:Ye})},se=ie=>{const De=ie.target.files[0];if(De){B({...F,image:De});const Ye=new FileReader;Ye.onload=Ft=>ue(Ft.target.result),Ye.readAsDataURL(De)}},J=ie=>{const De=ie.target.files[0];if(De){L({...M,image:De});const Ye=new FileReader;Ye.onload=Ft=>fe(Ft.target.result),Ye.readAsDataURL(De)}},Ne=async()=>{I(!0);try{if(!F.branchId||!F.number){alert("Please fill in all required fields");return}const ie=new FormData;ie.append("branchId",F.branchId),F.categoryId&&ie.append("categoryId",F.categoryId),ie.append("number",F.number),ie.append("status",F.status),F.image&&ie.append("image",F.image),await Ic.post("/table",ie,{headers:{"Content-Type":"multipart/form-data"}}),await Le(),C(!1),U("Table created successfully"),setTimeout(()=>{U("")},3e3)}catch(ie){console.error("Error creating table:",ie),alert("Failed to create table. Please try again.")}finally{I(!1)}},Ge=async()=>{I(!0);try{if(!M.branchId||!M.number){alert("Please fill in all required fields");return}const ie=new FormData;ie.append("branchId",M.branchId),M.categoryId&&ie.append("categoryId",M.categoryId),ie.append("number",M.number),ie.append("status",M.status),M.image&&ie.append("image",M.image),await Ic.put(`/table/${k.id}`,ie,{headers:{"Content-Type":"multipart/form-data"}}),await Le(),O(!1),U(`Table ${k.number} updated successfully`),setTimeout(()=>{U("")},3e3)}catch(ie){console.error("Error updating table:",ie),alert("Failed to update table. Please try again.")}finally{I(!1)}},tt=async()=>{I(!0);try{await Ic.delete(`/table/${k.id}`),await Le(),T(!1),U(`Table ${k.number} deleted successfully`),setTimeout(()=>{U("")},3e3)}catch(ie){console.error("Error deleting table:",ie),alert("Failed to delete table. Please try again.")}finally{I(!1)}},$e=()=>{b(!1),D(null)},Ze=()=>{C(!1),ue(null)},Oe=()=>{O(!1),D(null),fe(null)},Qe=()=>{T(!1),D(null)},ht=(ie,De)=>{ie==="status"?ge(De):ie==="branch"&&Y(De),re(1)},Pt=ie=>{let Ye=`https://hotelvirat.com/menu?branch=${ie.branchId}&name=${encodeURIComponent(ie.branchName)}&table=${ie.number}`;return ie.categoryId&&(Ye+=`&category=${ie.categoryId}&categoryName=${encodeURIComponent(ie.categoryName||"")}`),`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(Ye)}`},Rt=async ie=>{const De=Pt(ie);try{const Ft=await(await fetch(De)).blob(),me=window.URL.createObjectURL(Ft),ke=document.createElement("a");ke.href=me,ke.download=`table-${ie.number}-${ie.branchName}-qr.png`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),window.URL.revokeObjectURL(me)}catch(Ye){console.error("Error downloading QR code:",Ye),alert("Failed to download QR code")}},Et=()=>{let ie=`Table Number,Capacity,Branch,Status,Created At
`;i.forEach(me=>{const ke=me.capacity?`${me.capacity} people`:"Not set";ie+=`${me.number},"${ke}","${me.branchName}",${me.status},"${me.createdAt}"
`});const De=new Blob([ie],{type:"text/csv"}),Ye=window.URL.createObjectURL(De),Ft=document.createElement("a");Ft.setAttribute("hidden",""),Ft.setAttribute("href",Ye),Ft.setAttribute("download",`tables-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft)};return n.jsxs("div",{className:"tables-page",children:[A&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:A}),n.jsx("button",{onClick:()=>U(""),children:n.jsx(ha,{size:16})})]}),n.jsxs("div",{className:"page-header",style:{position:"relative",zIndex:100},children:[n.jsx("h1",{children:"Tables Management"}),n.jsxs("div",{className:"header-actions",style:{position:"relative",zIndex:101},children:[n.jsxs("button",{className:"btn btn-outline",onClick:Et,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{className:"btn btn-primary",onClick:Ae,style:{position:"relative",zIndex:102},children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Table"})]})]})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by table number, branch, or status...",className:"search-input",value:R,onChange:ie=>W(ie.target.value)})]}),n.jsxs("div",{className:"filter-buttons",children:[n.jsxs("select",{className:"filter-select",value:Q,onChange:ie=>ht("status",ie.target.value),children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"available",children:"Available"}),n.jsx("option",{value:"reserved",children:"Reserved"})]}),n.jsxs("select",{className:"filter-select",value:q,onChange:ie=>ht("branch",ie.target.value),children:[n.jsx("option",{value:"all",children:"All Branches"}),l.map(ie=>n.jsx("option",{value:ie._id,children:ie.name},ie._id))]})]})]}),x&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:x})]}),n.jsx("div",{className:"data-card",children:p?n.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[n.jsx(Ra,{size:24,className:"animate-spin"}),n.jsx("p",{children:"Loading tables..."})]}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Image"}),n.jsx("th",{children:"Table Number"}),n.jsx("th",{children:"Capacity"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Created At"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.length>0?r.map(ie=>n.jsxs("tr",{children:[n.jsx("td",{children:ie.image?n.jsx("img",{src:`${ie.image}`,alt:`Table ${ie.number}`,className:"table-image",style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"4px"}}):n.jsx("div",{className:"table-image-placeholder",style:{width:"50px",height:"50px",backgroundColor:"#f3f4f6",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af"},children:n.jsx(Dj,{size:20})})}),n.jsxs("td",{children:["Table ",ie.number]}),n.jsx("td",{children:ie.capacity?`${ie.capacity} people`:"Not set"}),n.jsx("td",{children:ie.branchName}),n.jsx("td",{children:ie.categoryName}),n.jsx("td",{children:ie.createdAt}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>ne(ie),children:"View"}),n.jsx("button",{className:"action-btn edit",onClick:()=>Ve(ie),children:"Edit"}),n.jsx("button",{className:"action-btn",onClick:()=>Rt(ie),style:{backgroundColor:"#8b5cf6",color:"white"},title:"Download QR Code",children:n.jsx(Fs,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>te(ie),children:"Delete"})]})})]},ie.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"7",className:"no-tables",children:"No tables found matching your criteria"})})})]})}),le>0&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",onClick:()=>re(ie=>Math.max(ie-1,1)),disabled:H===1||p,children:"Previous"}),n.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,le)},(ie,De)=>{let Ye;return le<=5||H<=3?Ye=De+1:H>=le-2?Ye=le-4+De:Ye=H-2+De,n.jsx("button",{className:`pagination-page ${H===Ye?"active":""}`,onClick:()=>re(Ye),disabled:p,children:Ye},Ye)}),le>5&&H<le-2&&n.jsx("span",{className:"pagination-ellipsis",children:"..."}),le>5&&H<le-2&&n.jsx("button",{className:`pagination-page ${H===le?"active":""}`,onClick:()=>re(le),disabled:p,children:le})]}),n.jsx("button",{className:"pagination-btn",onClick:()=>re(ie=>Math.min(ie+1,le)),disabled:H===le||p,children:"Next"})]}),j&&k&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:["Table Details - Table ",k.number]}),n.jsx("button",{className:"modal-close",onClick:$e,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"order-details",children:[n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Table Number"}),n.jsxs("div",{className:"order-detail-value",children:["Table ",k.number]})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Table Capacity"}),n.jsx("div",{className:"order-detail-value",children:k.capacity?`${k.capacity} people`:"Not set"})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Branch"}),n.jsx("div",{className:"order-detail-value",children:k.branchName})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Category"}),n.jsx("div",{className:"order-detail-value",children:k.categoryName})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Status"}),n.jsx("div",{className:"order-detail-value",children:n.jsx("span",{className:`status-badge ${k.status}`,children:k.status.charAt(0).toUpperCase()+k.status.slice(1)})})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Created At"}),n.jsx("div",{className:"order-detail-value",children:k.createdAt})]}),k.image&&n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Image"}),n.jsx("div",{className:"order-detail-value",children:n.jsx("img",{src:`${k.image}`,alt:`Table ${k.number}`,style:{width:"200px",height:"150px",objectFit:"cover",borderRadius:"8px"}})})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"QR Code"}),n.jsx("div",{className:"order-detail-value",children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[n.jsx("img",{src:Pt(k),alt:`QR Code for Table ${k.number}`,style:{width:"200px",height:"200px",border:"1px solid #e5e7eb",borderRadius:"8px"}}),n.jsxs("button",{className:"btn btn-outline",onClick:()=>Rt(k),style:{display:"flex",alignItems:"center",gap:"5px"},children:[n.jsx(Ca,{size:16}),"Download QR Code"]})]})})]})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:$e,children:"Close"}),n.jsx("button",{className:"btn btn-primary",onClick:()=>{$e(),Ve(k)},children:"Edit Table"})]})]})}),y&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Add New Table"}),n.jsx("button",{className:"modal-close",onClick:Ze,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-grid",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Branch *"}),n.jsxs("select",{name:"branchId",value:F.branchId,onChange:ce,className:"form-select",required:!0,children:[n.jsx("option",{value:"",children:"Select Branch"}),l.map(ie=>n.jsx("option",{value:ie._id,children:ie.name},ie._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Category (Optional)"}),n.jsxs("select",{name:"categoryId",value:F.categoryId,onChange:ce,className:"form-select",children:[n.jsx("option",{value:"",children:"All Categories (No Filter)"}),u.map(ie=>n.jsx("option",{value:ie._id,children:ie.name},ie._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Table Number *"}),n.jsx("input",{type:"text",name:"number",value:F.number,onChange:ce,className:"form-input",placeholder:"Enter table number (e.g., A1, B2, VIP1)",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Table Capacity *"}),n.jsx("input",{type:"number",name:"capacity",value:F.capacity,onChange:ce,className:"form-input",placeholder:"Number of people (e.g., 4, 6, 8)",min:"1",max:"20",required:!0})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{name:"status",value:F.status,onChange:ce,className:"form-select",children:[n.jsx("option",{value:"available",children:"Available"}),n.jsx("option",{value:"reserved",children:"Reserved"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Table Image"}),n.jsxs("div",{className:"image-upload-container",children:[n.jsx("label",{htmlFor:"add-image-upload",className:"image-upload-label",children:K?n.jsxs("div",{className:"image-preview-wrapper",children:[n.jsx("img",{src:K||"/placeholder.svg",alt:"Preview",className:"image-preview"}),n.jsxs("div",{className:"image-overlay",children:[n.jsx(Ro,{size:24}),n.jsx("span",{children:"Change Image"})]})]}):n.jsxs("div",{className:"image-upload-placeholder",children:[n.jsx(Ro,{size:24}),n.jsx("span",{children:"Click to upload table image"})]})}),n.jsx("input",{id:"add-image-upload",type:"file",accept:"image/*",onChange:se,className:"image-upload-input"})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:Ze,disabled:P,children:"Cancel"}),n.jsx("button",{className:"btn btn-primary",onClick:Ne,disabled:P,children:P?n.jsxs(n.Fragment,{children:[n.jsx(Ra,{size:16,className:"animate-spin"}),n.jsx("span",{children:"Creating..."})]}):"Create Table"})]})]})}),E&&k&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:["Edit Table - Table ",k.number]}),n.jsx("button",{className:"modal-close",onClick:Oe,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-grid",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Branch *"}),n.jsxs("select",{name:"branchId",value:M.branchId,onChange:X,className:"form-select",required:!0,children:[n.jsx("option",{value:"",children:"Select Branch"}),l.map(ie=>n.jsx("option",{value:ie._id,children:ie.name},ie._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Category (Optional)"}),n.jsxs("select",{name:"categoryId",value:M.categoryId,onChange:X,className:"form-select",children:[n.jsx("option",{value:"",children:"All Categories (No Filter)"}),u.map(ie=>n.jsx("option",{value:ie._id,children:ie.name},ie._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Table Number *"}),n.jsx("input",{type:"text",name:"number",value:M.number,onChange:X,className:"form-input",placeholder:"Enter table number (e.g., A1, B2, VIP1)",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Table Capacity *"}),n.jsx("input",{type:"number",name:"capacity",value:M.capacity,onChange:X,className:"form-input",placeholder:"Number of people (e.g., 4, 6, 8)",min:"1",max:"20",required:!0})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsxs("select",{name:"status",value:M.status,onChange:X,className:"form-select",children:[n.jsx("option",{value:"available",children:"Available"}),n.jsx("option",{value:"reserved",children:"Reserved"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Table Image"}),n.jsxs("div",{className:"image-upload-container",children:[n.jsx("label",{htmlFor:"edit-image-upload",className:"image-upload-label",children:ye?n.jsxs("div",{className:"image-preview-wrapper",children:[n.jsx("img",{src:ye||"/placeholder.svg",alt:"Preview",className:"image-preview"}),n.jsxs("div",{className:"image-overlay",children:[n.jsx(Ro,{size:24}),n.jsx("span",{children:"Change Image"})]})]}):n.jsxs("div",{className:"image-upload-placeholder",children:[n.jsx(Ro,{size:24}),n.jsx("span",{children:"Click to upload table image"})]})}),n.jsx("input",{id:"edit-image-upload",type:"file",accept:"image/*",onChange:J,className:"image-upload-input"})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:Oe,disabled:P,children:"Cancel"}),n.jsx("button",{className:"btn btn-primary",onClick:Ge,disabled:P,children:P?n.jsxs(n.Fragment,{children:[n.jsx(Ra,{size:16,className:"animate-spin"}),n.jsx("span",{children:"Saving..."})]}):"Save Changes"})]})]})}),S&&k&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Table"}),n.jsx("button",{className:"modal-close",onClick:Qe,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{style:{textAlign:"center",padding:"20px 0"},children:[n.jsx(fr,{size:48,color:"#dc2626",style:{marginBottom:"16px"}}),n.jsx("h4",{style:{marginBottom:"8px",color:"#dc2626"},children:"Are you sure?"}),n.jsxs("p",{style:{color:"#666",marginBottom:"16px"},children:["Do you want to delete Table ",k.number," from ",k.branchName,"?"]}),n.jsx("p",{style:{color:"#dc2626",fontSize:"14px"},children:"This action cannot be undone."})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:Qe,disabled:P,children:"Cancel"}),n.jsx("button",{className:"btn",onClick:tt,disabled:P,style:{backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:P?n.jsxs(n.Fragment,{children:[n.jsx(Ra,{size:16,className:"animate-spin"}),n.jsx("span",{children:"Deleting..."})]}):"Delete Table"})]})]})})]})},bj=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),vae=()=>{var Le,ne,Ae,Ve,te,ce,X,se;const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState(!0),[p,m]=N.useState(""),[x,v]=N.useState(null),[j,b]=N.useState(!1),[y,C]=N.useState(!1),[E,O]=N.useState(!1),[S,T]=N.useState(null),[k,D]=N.useState(""),[F,B]=N.useState(""),[M,L]=N.useState("all"),[A,U]=N.useState("all"),[P,I]=N.useState("all"),[R,W]=N.useState("all"),[Q,ge]=N.useState(1),[q,Y]=N.useState(1),z=10;N.useEffect(()=>{ee(),H(),re()},[M,A,P,R]);const ee=async()=>{try{const J=await bj.get("/branch");d(J.data)}catch(J){console.error("Error fetching branches:",J)}},H=async()=>{f(!0),m("");try{const J={};if(M!=="all"&&(J.paymentStatus=M),A!=="all"&&(J.paymentMethod=A),P!=="all"&&(J.branchId=P),R!=="all"){const $e=new Date,Ze=new Date;switch(R){case"today":Ze.setHours(0,0,0,0),J.startDate=Ze.toISOString(),J.endDate=$e.toISOString();break;case"week":Ze.setDate($e.getDate()-7),J.startDate=Ze.toISOString(),J.endDate=$e.toISOString();break;case"month":Ze.setMonth($e.getMonth()-1),J.startDate=Ze.toISOString(),J.endDate=$e.toISOString();break}}const Ne=await bj.get("/staff-invoice",{params:J});let Ge=[];Ne.data&&Ne.data.success&&Array.isArray(Ne.data.data)?Ge=Ne.data.data:Ne.data&&Ne.data.invoices&&Array.isArray(Ne.data.invoices)?Ge=Ne.data.invoices:Array.isArray(Ne.data)?Ge=Ne.data:Ne.data&&Ne.data.message&&Ne.data.message.includes("routes working")?Ge=[]:(console.error(" Unexpected response format:",Ne.data),console.error(" Response keys:",Object.keys(Ne.data||{})),console.error(" Response type:",typeof Ne.data),Ge=[]);const tt=Ge.map(($e,Ze)=>{var Oe,Qe,ht,Pt,Rt,Et,ie;return{id:$e._id||`temp-id-${Ze}`,invoiceId:$e.invoiceId||`UNKNOWN-${Ze}`,orderId:$e.orderId||"N/A",customer:((Oe=$e.userId)==null?void 0:Oe.name)||"Unknown Staff",customerMobile:((Qe=$e.userId)==null?void 0:Qe.mobile)||"N/A",date:new Date($e.invoiceDate||$e.createdAt||Date.now()).toLocaleDateString("en-IN"),time:new Date($e.invoiceDate||$e.createdAt||Date.now()).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),branch:$e.branchName||((ht=$e.branchId)==null?void 0:ht.name)||"Unknown Branch",branchId:((Pt=$e.branchId)==null?void 0:Pt._id)||$e.branchId||null,branchAddress:((Rt=$e.branchId)==null?void 0:Rt.address)||"Unknown Address",tableNumber:$e.tableNumber||((Et=$e.tableId)==null?void 0:Et.number)||"N/A",peopleCount:$e.peopleCount||0,items:((ie=$e.items)==null?void 0:ie.length)||0,subtotal:$e.subtotal||0,tax:$e.tax||0,serviceCharge:$e.serviceCharge||0,grandTotal:$e.grandTotal||0,amount:`${($e.grandTotal||0).toFixed(2)}`,paymentStatus:$e.paymentStatus||"completed",paymentMethod:$e.paymentMethod||"cash",notes:$e.notes||"",originalInvoice:$e}});t(tt)}catch(J){console.error("Error fetching staff invoices:",J),m("Failed to load staff invoices. Please refresh the page and try again.")}finally{f(!1)}},re=async()=>{try{const J={};if(P!=="all"&&(J.branchId=P),R!=="all"){const Ge=new Date,tt=new Date;switch(R){case"today":tt.setHours(0,0,0,0),J.startDate=tt.toISOString(),J.endDate=Ge.toISOString();break;case"week":tt.setDate(Ge.getDate()-7),J.startDate=tt.toISOString(),J.endDate=Ge.toISOString();break;case"month":tt.setMonth(Ge.getMonth()-1),J.startDate=tt.toISOString(),J.endDate=Ge.toISOString();break}}const Ne=await bj.get("/staff-invoice/statistics",{params:J});v(Ne.data.statistics)}catch(J){console.error("Error fetching statistics:",J)}};N.useEffect(()=>{const J=e.filter(Ne=>{if(!F.trim())return!0;const Ge=F.trim().toLowerCase();return Ne.invoiceId.toLowerCase().includes(Ge)||Ne.orderId.toLowerCase().includes(Ge)||Ne.customer.toLowerCase().includes(Ge)||Ne.tableNumber.toLowerCase().includes(Ge)});s(J),Y(Math.ceil(J.length/z)),ge(1)},[e,F]),N.useEffect(()=>{const J=(Q-1)*z,Ne=J+z,Ge=i.slice(J,Ne);a(Ge)},[i,Q]);const le=J=>{const Ne=document.createElement("canvas");return Ne.width=J.width,Ne.height=J.height,Ne.getContext("2d").drawImage(J,0,0),Ne.toDataURL("image/jpeg")},pe=J=>{const Ne=window.open("","_blank"),Ge=new Image;Ge.crossOrigin="anonymous",Ge.onload=()=>{var Ze,Oe;let tt="";try{tt=le(Ge)}catch(Qe){console.warn("Could not convert logo to base64:",Qe)}const $e=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${J.invoiceId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .logo { width: 80px; height: 80px; margin: 0 auto 15px; border-radius: 8px; display: block; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin: 10px 0; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${tt?`<img src="${tt}" alt="Hotel Virat Logo" class="logo">`:""}
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${J.branchAddress}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${J.invoiceId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${J.invoiceId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${J.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${J.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${J.time}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${J.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${J.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Staff & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Staff Name:</span>
                <span class="detail-value">${J.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${J.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${J.branch}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${J.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Status:</span>
                <span class="detail-value">${J.paymentStatus.toUpperCase()}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Oe=(Ze=J.originalInvoice)==null?void 0:Ze.items)==null?void 0:Oe.map(Qe=>`
                    <tr>
                      <td>${Qe.name}</td>
                      <td style="text-align: center;">${Qe.quantity}</td>
                      <td style="text-align: right;">${Qe.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(Qe.price*Qe.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${J.subtotal.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${J.tax.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${J.serviceCharge.toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${J.grandTotal.toFixed(2)}</span>
            </div>
          </div>

          ${J.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${J.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;Ne.document.write($e),Ne.document.close(),Ne.focus(),setTimeout(()=>{Ne.print()},500)},Ge.onerror=()=>{var $e,Ze;console.warn("Could not load logo image, generating PDF without logo");const tt=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${J.invoiceId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin-bottom: 10px; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${J.branchAddress}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${J.invoiceId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${J.invoiceId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${J.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${J.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${J.time}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${J.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${J.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Staff & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Staff Name:</span>
                <span class="detail-value">${J.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${J.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${J.branch}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${J.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Status:</span>
                <span class="detail-value">${J.paymentStatus.toUpperCase()}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ze=($e=J.originalInvoice)==null?void 0:$e.items)==null?void 0:Ze.map(Oe=>`
                    <tr>
                      <td>${Oe.name}</td>
                      <td style="text-align: center;">${Oe.quantity}</td>
                      <td style="text-align: right;">${Oe.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(Oe.price*Oe.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${J.subtotal.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${J.tax.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${J.serviceCharge.toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${J.grandTotal.toFixed(2)}</span>
            </div>
          </div>

          ${J.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${J.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;Ne.document.write(tt),Ne.document.close(),Ne.focus(),setTimeout(()=>{Ne.print()},500)},Ge.src=Ml},Se=J=>{var tt,$e,Ze,Oe,Qe,ht,Pt,Rt;const Ne=window.open("","_blank","width=302,height=600"),Ge=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Invoice ${J.invoiceId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .invoice-info { margin-bottom: 10px; }
          .invoice-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${J.branch}</div>
        </div>
        
        <div class="invoice-id">Invoice #${J.invoiceId}</div>
        <div style="text-align: center; font-size: 11px; margin-bottom: 8px;">Order: ${J.orderId}</div>
        
        <div class="invoice-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${J.date}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Time:</span>
            <span>${J.time}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Table:</span>
            <span>${J.tableNumber}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Guests:</span>
            <span>${J.peopleCount}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Staff:</span>
            <span>${J.customer}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${J.customerMobile}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${(($e=(tt=J.originalInvoice)==null?void 0:tt.items)==null?void 0:$e.map(Et=>`
            <div class="item-row">
              <div class="item-name">${Et.name}</div>
              <div class="item-details">
                <span>${Et.quantity} x ${Et.price.toFixed(2)}</span>
                <span>${(Et.price*Et.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((Ze=J.subtotal)==null?void 0:Ze.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax (5%):</span>
            <span>${((Oe=J.tax)==null?void 0:Oe.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service (10%):</span>
            <span>${((Qe=J.serviceCharge)==null?void 0:Qe.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${((ht=J.grandTotal)==null?void 0:ht.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="invoice-info">
          <div class="info-row">
            <span class="info-label">Payment:</span>
            <span>${((Pt=J.paymentMethod)==null?void 0:Pt.toUpperCase())||"CASH"}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Status:</span>
            <span>${((Rt=J.paymentStatus)==null?void 0:Rt.toUpperCase())||"PENDING"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;Ne.document.write(Ge),Ne.document.close(),Ne.focus(),setTimeout(()=>{Ne.print()},300)},K=J=>{T(J),b(!0)},ue=()=>{b(!1),T(null)},ye=()=>{C(!1)},fe=(J,Ne)=>{J==="paymentStatus"?L(Ne):J==="paymentMethod"?U(Ne):J==="branch"?I(Ne):J==="date"&&W(Ne),ge(1)},Xe=J=>{switch(J==null?void 0:J.toLowerCase()){case"card":return n.jsx(Na,{size:14});case"upi":return n.jsx(Ws,{size:14});case"cash":default:return n.jsx(Ws,{size:14})}},Ce=()=>{let J=`Invoice ID,Order ID,Staff,Date,Time,Branch,Table,People,Items,Amount,Payment Method,Payment Status
`;i.forEach($e=>{J+=`${$e.invoiceId},${$e.orderId},${$e.customer},"${$e.date}","${$e.time}","${$e.branch}",${$e.tableNumber},${$e.peopleCount},${$e.items},${$e.amount},${$e.paymentMethod},${$e.paymentStatus}
`});const Ne=new Blob([J],{type:"text/csv"}),Ge=window.URL.createObjectURL(Ne),tt=document.createElement("a");tt.setAttribute("hidden",""),tt.setAttribute("href",Ge),tt.setAttribute("download",`staff-invoices-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(tt),tt.click(),document.body.removeChild(tt)};return n.jsxs("div",{className:"orders-page",children:[k&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:k}),n.jsx("button",{onClick:()=>D(""),children:n.jsx(ha,{size:16})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Staff Invoices"}),n.jsxs("div",{className:"header-actions",children:[n.jsxs("button",{className:"btn btn-outline",onClick:()=>C(!0),children:[n.jsx($c,{size:16}),n.jsx("span",{children:"Statistics"})]}),n.jsxs("button",{className:"btn btn-outline",onClick:Ce,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:"Export CSV"})]}),n.jsxs("button",{className:"btn btn-outline",onClick:H,children:[n.jsx(fs,{size:16}),n.jsx("span",{children:"Refresh"})]})]})]}),x&&n.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(4, 1fr)",marginBottom:"24px"},children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container orange",children:n.jsx(Jc,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:x.totalInvoices||0}),n.jsx("p",{children:"Total Invoices"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container green",children:n.jsx(lm,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.totalRevenue||0).toFixed(0)]}),n.jsx("p",{children:"Total Revenue"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container blue",children:n.jsx($c,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.averageInvoiceValue||0).toFixed(0)]}),n.jsx("p",{children:"Average Value"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container purple",children:n.jsx(an,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:i.length}),n.jsx("p",{children:"Filtered Results"})]})]})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search invoices...",className:"search-input",value:F,onChange:J=>B(J.target.value)})]}),n.jsx("div",{className:"filter-buttons",children:n.jsxs("button",{className:"btn btn-outline",onClick:()=>O(!E),children:[n.jsx(im,{size:16}),n.jsx("span",{children:"Filters"})]})})]}),E&&n.jsx("div",{className:"card",style:{marginBottom:"20px",padding:"20px"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{className:"form-label",children:"Payment Status"}),n.jsxs("select",{className:"form-select",value:M,onChange:J=>fe("paymentStatus",J.target.value),children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"refunded",children:"Refunded"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"form-label",children:"Payment Method"}),n.jsxs("select",{className:"form-select",value:A,onChange:J=>fe("paymentMethod",J.target.value),children:[n.jsx("option",{value:"all",children:"All Methods"}),n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"card",children:"Card"}),n.jsx("option",{value:"upi",children:"UPI"}),n.jsx("option",{value:"netbanking",children:"Net Banking"}),n.jsx("option",{value:"wallet",children:"Wallet"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"form-label",children:"Branch"}),n.jsxs("select",{className:"form-select",value:P,onChange:J=>fe("branch",J.target.value),children:[n.jsx("option",{value:"all",children:"All Branches"}),l.map(J=>n.jsx("option",{value:J._id,children:J.name},J._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"form-label",children:"Date Range"}),n.jsxs("select",{className:"form-select",value:R,onChange:J=>fe("date",J.target.value),children:[n.jsx("option",{value:"all",children:"All Time"}),n.jsx("option",{value:"today",children:"Today"}),n.jsx("option",{value:"week",children:"Last 7 Days"}),n.jsx("option",{value:"month",children:"Last 30 Days"})]})]})]})}),p&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:p})]}),n.jsx("div",{className:"data-card",children:u?n.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[n.jsx(Ra,{size:24,className:"animate-spin"}),n.jsx("p",{children:"Loading staff invoices..."})]}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Invoice Details"}),n.jsx("th",{children:"Staff"}),n.jsx("th",{children:"Date & Time"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Table"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Payment"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.length>0?r.map(J=>{var Ne,Ge;return n.jsxs("tr",{children:[n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"500"},children:J.invoiceId}),n.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Order: ",J.orderId]})]}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"500"},children:J.customer}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:J.customerMobile})]}),n.jsxs("td",{children:[n.jsx("div",{children:J.date}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:J.time})]}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"500"},children:J.branch}),n.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Table ",J.tableNumber,"  ",J.peopleCount," Guests"]})]}),n.jsx("td",{children:J.tableNumber}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"600",color:"#666"},children:J.amount}),n.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[J.items," Items"]})]}),n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[Xe(J.paymentMethod),n.jsx("span",{style:{fontSize:"12px",textTransform:"capitalize"},children:J.paymentMethod})]})}),n.jsx("td",{children:n.jsx("span",{className:`status-badge ${J.paymentStatus}`,children:((Ne=J.paymentStatus)==null?void 0:Ne.charAt(0).toUpperCase())+((Ge=J.paymentStatus)==null?void 0:Ge.slice(1))})}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>K(J),title:"View Details",children:n.jsx(Xi,{size:14})}),n.jsx("button",{className:"action-btn edit",onClick:()=>pe(J),title:"Download PDF",children:n.jsx(Qc,{size:14})})]})})]},J.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"9",className:"no-orders",children:"No staff invoices found matching your criteria"})})})]})}),q>0&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",onClick:()=>ge(J=>Math.max(J-1,1)),disabled:Q===1||u,children:"Previous"}),n.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,q)},(J,Ne)=>{let Ge;return q<=5||Q<=3?Ge=Ne+1:Q>=q-2?Ge=q-4+Ne:Ge=Q-2+Ne,n.jsx("button",{className:`pagination-page ${Q===Ge?"active":""}`,onClick:()=>ge(Ge),disabled:u,children:Ge},Ge)}),q>5&&Q<q-2&&n.jsx("span",{className:"pagination-ellipsis",children:"..."}),q>5&&Q<q-2&&n.jsx("button",{className:`pagination-page ${Q===q?"active":""}`,onClick:()=>ge(q),disabled:u,children:q})]}),n.jsx("button",{className:"pagination-btn",onClick:()=>ge(J=>Math.min(J+1,q)),disabled:Q===q||u,children:"Next"})]}),j&&S&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"800px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:["Invoice Details - ",S.invoiceId]}),n.jsx("button",{className:"modal-close",onClick:ue,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[n.jsxs("div",{children:[n.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Invoice Information"}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Invoice ID"}),n.jsx("div",{className:"order-detail-value",children:S.invoiceId})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Order ID"}),n.jsx("div",{className:"order-detail-value",children:S.orderId})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Date & Time"}),n.jsxs("div",{className:"order-detail-value",children:[S.date," ",S.time]})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Table"}),n.jsx("div",{className:"order-detail-value",children:S.tableNumber})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Guests"}),n.jsx("div",{className:"order-detail-value",children:S.peopleCount})]})]}),n.jsxs("div",{children:[n.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Staff & Branch Details"}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Staff Name"}),n.jsx("div",{className:"order-detail-value",children:S.customer})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Mobile"}),n.jsx("div",{className:"order-detail-value",children:S.customerMobile})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Branch"}),n.jsx("div",{className:"order-detail-value",children:S.branch})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Payment Method"}),n.jsx("div",{className:"order-detail-value",children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Xe(S.paymentMethod),n.jsx("span",{style:{textTransform:"capitalize"},children:S.paymentMethod})]})})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Payment Status"}),n.jsx("div",{className:"order-detail-value",children:n.jsx("span",{className:`status-badge ${S.paymentStatus}`,children:((Le=S.paymentStatus)==null?void 0:Le.charAt(0).toUpperCase())+((ne=S.paymentStatus)==null?void 0:ne.slice(1))})})]})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Order Items"}),n.jsx("div",{className:"order-items-table",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:((Ve=(Ae=S.originalInvoice)==null?void 0:Ae.items)==null?void 0:Ve.length)>0?S.originalInvoice.items.map((J,Ne)=>n.jsxs("tr",{children:[n.jsx("td",{children:J.name}),n.jsx("td",{children:J.quantity}),n.jsxs("td",{children:["",J.price.toFixed(2)]}),n.jsxs("td",{children:["",(J.price*J.quantity).toFixed(2)]})]},Ne)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Bill Summary"}),n.jsx("div",{className:"order-items-table",children:n.jsx("table",{className:"data-table",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Subtotal"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((te=S.subtotal)==null?void 0:te.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Tax (5%)"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((ce=S.tax)==null?void 0:ce.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Service Charge (10%)"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((X=S.serviceCharge)==null?void 0:X.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f8f9fa"},children:[n.jsx("td",{children:"Grand Total"}),n.jsxs("td",{style:{textAlign:"right",color:"#ff7e47"},children:["",((se=S.grandTotal)==null?void 0:se.toFixed(2))||"0.00"]})]})]})})})]}),S.notes&&n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Notes"}),n.jsx("p",{style:{padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:S.notes})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:ue,children:"Close"}),n.jsxs("button",{className:"btn btn-print",onClick:()=>Se(S),children:[n.jsx(wi,{size:16}),"Print Receipt"]}),n.jsxs("button",{className:"btn btn-outline",onClick:()=>pe(S),children:[n.jsx(Qc,{size:16}),"Download PDF"]})]})]})}),y&&x&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Invoice Statistics"}),n.jsx("button",{className:"modal-close",onClick:ye,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"24px"},children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container orange",children:n.jsx(Jc,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:x.totalInvoices||0}),n.jsx("p",{children:"Total Invoices"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container green",children:n.jsx(lm,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.totalRevenue||0).toFixed(2)]}),n.jsx("p",{children:"Total Revenue"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container blue",children:n.jsx($c,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.averageInvoiceValue||0).toFixed(2)]}),n.jsx("p",{children:"Average Invoice Value"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container purple",children:n.jsx(an,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:R==="all"?"All Time":R==="today"?"Today":R==="week"?"Last 7 Days":"Last 30 Days"}),n.jsx("p",{children:"Time Period"})]})]})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-outline",onClick:ye,children:"Close"})})]})})]})},FI=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),bae=()=>{var Xe,Ce,Le,ne,Ae,Ve;const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState(!0),[p,m]=N.useState(""),[x,v]=N.useState(null),[j,b]=N.useState(!1),[y,C]=N.useState(!1),[E,O]=N.useState(!1),[S,T]=N.useState(null),[k,D]=N.useState(""),[F,B]=N.useState(""),[M,L]=N.useState("all"),[A,U]=N.useState("all"),[P,I]=N.useState(""),[R,W]=N.useState(1),[Q,ge]=N.useState(1),q=10;N.useEffect(()=>{Y(),ee()},[M,A,P]);const Y=async()=>{try{const te=await FI.get("/branch");d(te.data)}catch(te){console.error("Error fetching branches:",te)}},z=te=>{const ce=new Date(te),X=ce.getFullYear(),se=String(ce.getMonth()+1).padStart(2,"0"),J=String(ce.getDate()).padStart(2,"0");return`${X}-${se}-${J}`},ee=async()=>{f(!0),m("");try{const te={};if(M!=="all"&&(te.branchId=M),P.trim()&&(te.customerName=P.trim()),A!=="all"){const J=new Date,Ne=new Date;switch(A){case"today":te.startDate=z(J),te.endDate=z(J);break;case"week":Ne.setDate(J.getDate()-7),te.startDate=z(Ne),te.endDate=z(J);break;case"month":Ne.setMonth(J.getMonth()-1),te.startDate=z(Ne),te.endDate=z(J);break}}const ce=await FI.get("/counter-bill",{params:te});let X=[];if(ce.data&&ce.data.success&&Array.isArray(ce.data.data))X=ce.data.data;else if(ce.data&&ce.data.bills&&Array.isArray(ce.data.bills))X=ce.data.bills;else if(Array.isArray(ce.data))X=ce.data;else throw console.error(" Unexpected response format:",ce.data),new Error("Invalid response format");const se=X.map((J,Ne)=>{var Ge,tt,$e,Ze,Oe,Qe,ht,Pt,Rt;return{id:J.id||`temp-id-${Ne}`,billId:`CB-${((Ge=J.id)==null?void 0:Ge.slice(-6))||Ne}`,orderId:((tt=J.order)==null?void 0:tt.id)||"N/A",invoiceNumber:(($e=J.invoice)==null?void 0:$e.invoiceNumber)||"N/A",customer:J.customerName||"Unknown Customer",customerMobile:J.phoneNumber||"N/A",counterUser:((Ze=J.userId)==null?void 0:Ze.name)||"Unknown Counter",counterMobile:((Oe=J.userId)==null?void 0:Oe.mobile)||"N/A",date:J.date||new Date().toLocaleDateString("en-IN"),time:J.time||new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),branch:((Qe=J.branch)==null?void 0:Qe.name)||"Unknown Branch",branchId:((ht=J.branch)==null?void 0:ht.id)||null,branchAddress:((Pt=J.branch)==null?void 0:Pt.location)||"Unknown Address",items:((Rt=J.items)==null?void 0:Rt.length)||0,subtotal:J.subtotal||0,tax:J.tax||0,serviceCharge:J.serviceCharge||0,totalAmount:J.grandTotal||J.totalAmount||0,amount:`${(J.grandTotal||J.totalAmount||0).toFixed(2)}`,originalBill:J,createdAt:J.createdAt||new Date().toISOString()}});t(se),H(se)}catch(te){console.error("Error fetching counter bills:",te),m("Failed to load counter bills. Please refresh the page and try again.")}finally{f(!1)}},H=(te=e)=>{if(te.length===0){v({totalBills:0,totalRevenue:0,averageBillValue:0});return}const ce=te.length,X=te.reduce((J,Ne)=>J+Ne.totalAmount,0),se=X/ce;v({totalBills:ce,totalRevenue:X,averageBillValue:se})};N.useEffect(()=>{const te=e.filter(ce=>{if(!F.trim())return!0;const X=F.trim().toLowerCase();return ce.billId.toLowerCase().includes(X)||ce.orderId.toLowerCase().includes(X)||ce.customer.toLowerCase().includes(X)||ce.customerMobile.includes(F.trim())||ce.invoiceNumber.toLowerCase().includes(X)});s(te),ge(Math.ceil(te.length/q)),W(1)},[e,F]),N.useEffect(()=>{const te=(R-1)*q,ce=te+q,X=i.slice(te,ce);a(X)},[i,R]);const re=te=>{const ce=document.createElement("canvas");return ce.width=te.width,ce.height=te.height,ce.getContext("2d").drawImage(te,0,0),ce.toDataURL("image/jpeg")},le=te=>{const ce=window.open("","_blank"),X=new Image;X.crossOrigin="anonymous",X.onload=()=>{var Ne,Ge;let se="";try{se=re(X)}catch(tt){console.warn("Could not convert logo to base64:",tt)}const J=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Counter Bill ${te.billId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .logo { width: 80px; height: 80px; margin: 0 auto 15px; border-radius: 8px; display: block; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin: 10px 0; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .bill-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .bill-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${se?`<img src="${se}" alt="Hotel Virat Logo" class="logo">`:""}
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${te.branchAddress}</div>
            <div class="bill-title">Counter Bill</div>
            <div style="font-size: 14px; color: #666;">Bill No: ${te.billId}</div>
          </div>
          
          <div class="bill-details">
            <div class="detail-section">
              <h3>Bill Details</h3>
              <div class="detail-row">
                <span class="detail-label">Bill ID:</span>
                <span class="detail-value">${te.billId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${te.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Invoice No:</span>
                <span class="detail-value">${te.invoiceNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${te.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${te.time}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Counter Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${te.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Customer Mobile:</span>
                <span class="detail-value">${te.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Counter User:</span>
                <span class="detail-value">${te.counterUser}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${te.branch}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ge=(Ne=te.originalBill)==null?void 0:Ne.items)==null?void 0:Ge.map(tt=>`
                    <tr>
                      <td>${tt.name}</td>
                      <td style="text-align: center;">${tt.quantity}</td>
                      <td style="text-align: right;">${tt.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(tt.price*tt.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${te.subtotal.toFixed(2)}</span>
            </div>
            ${te.tax>0?`
            <div class="total-row">
              <span class="total-label">Tax:</span>
              <span>${te.tax.toFixed(2)}</span>
            </div>
            `:""}
            ${te.serviceCharge>0?`
            <div class="total-row">
              <span class="total-label">Service Charge:</span>
              <span>${te.serviceCharge.toFixed(2)}</span>
            </div>
            `:""}
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${te.totalAmount.toFixed(2)}</span>
            </div>
          </div>

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;ce.document.write(J),ce.document.close(),ce.focus(),setTimeout(()=>{ce.print()},500)},X.onerror=()=>{var J,Ne;console.warn("Could not load logo image, generating PDF without logo");const se=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Counter Bill ${te.billId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin-bottom: 10px; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .bill-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .bill-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${te.branchAddress}</div>
            <div class="bill-title">Counter Bill</div>
            <div style="font-size: 14px; color: #666;">Bill No: ${te.billId}</div>
          </div>
          
          <div class="bill-details">
            <div class="detail-section">
              <h3>Bill Details</h3>
              <div class="detail-row">
                <span class="detail-label">Bill ID:</span>
                <span class="detail-value">${te.billId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${te.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Invoice No:</span>
                <span class="detail-value">${te.invoiceNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${te.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${te.time}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Counter Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${te.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Customer Mobile:</span>
                <span class="detail-value">${te.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Counter User:</span>
                <span class="detail-value">${te.counterUser}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${te.branch}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ne=(J=te.originalBill)==null?void 0:J.items)==null?void 0:Ne.map(Ge=>`
                    <tr>
                      <td>${Ge.name}</td>
                      <td style="text-align: center;">${Ge.quantity}</td>
                      <td style="text-align: right;">${Ge.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(Ge.price*Ge.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${te.subtotal.toFixed(2)}</span>
            </div>
            ${te.tax>0?`
            <div class="total-row">
              <span class="total-label">Tax:</span>
              <span>${te.tax.toFixed(2)}</span>
            </div>
            `:""}
            ${te.serviceCharge>0?`
            <div class="total-row">
              <span class="total-label">Service Charge:</span>
              <span>${te.serviceCharge.toFixed(2)}</span>
            </div>
            `:""}
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${te.totalAmount.toFixed(2)}</span>
            </div>
          </div>

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;ce.document.write(se),ce.document.close(),ce.focus(),setTimeout(()=>{ce.print()},500)},X.src=Ml},pe=te=>{var se,J,Ne,Ge,tt,$e;const ce=window.open("","_blank","width=302,height=600"),X=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Bill ${te.billId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .bill-info { margin-bottom: 10px; }
          .bill-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${te.branch}</div>
        </div>
        
        <div class="bill-id">Bill #${te.billId}</div>
        <div style="text-align: center; font-size: 11px; margin-bottom: 8px;">Invoice: ${te.invoiceNumber}</div>
        
        <div class="bill-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${te.date}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Time:</span>
            <span>${te.time}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Customer:</span>
            <span>${te.customer}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${te.customerMobile}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Counter:</span>
            <span>${te.counterUser}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${((J=(se=te.originalBill)==null?void 0:se.items)==null?void 0:J.map(Ze=>`
            <div class="item-row">
              <div class="item-name">${Ze.name}</div>
              <div class="item-details">
                <span>${Ze.quantity} x ${Ze.price.toFixed(2)}</span>
                <span>${(Ze.price*Ze.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((Ne=te.subtotal)==null?void 0:Ne.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax:</span>
            <span>${((Ge=te.tax)==null?void 0:Ge.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service:</span>
            <span>${((tt=te.serviceCharge)==null?void 0:tt.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${(($e=te.totalAmount)==null?void 0:$e.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;ce.document.write(X),ce.document.close(),ce.focus(),setTimeout(()=>{ce.print()},300)},Se=te=>{T(te),b(!0)},K=()=>{b(!1),T(null)},ue=()=>{C(!1)},ye=(te,ce)=>{te==="branch"?L(ce):te==="date"?U(ce):te==="customer"&&I(ce),W(1)},fe=()=>{let te=`Bill ID,Order ID,Invoice No,Customer,Mobile,Counter User,Date,Time,Branch,Items,Subtotal,Tax,Service Charge,Total Amount
`;i.forEach(J=>{te+=`${J.billId},${J.orderId},${J.invoiceNumber},"${J.customer}",${J.customerMobile},"${J.counterUser}","${J.date}","${J.time}","${J.branch}",${J.items},${J.subtotal.toFixed(2)},${J.tax.toFixed(2)},${J.serviceCharge.toFixed(2)},${J.totalAmount.toFixed(2)}
`});const ce=new Blob([te],{type:"text/csv"}),X=window.URL.createObjectURL(ce),se=document.createElement("a");se.setAttribute("hidden",""),se.setAttribute("href",X),se.setAttribute("download",`counter-bills-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(se),se.click(),document.body.removeChild(se)};return n.jsxs("div",{className:"orders-page",children:[k&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:k}),n.jsx("button",{onClick:()=>D(""),children:n.jsx(ha,{size:16})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Counter Bills"}),n.jsxs("div",{className:"header-actions",children:[n.jsxs("button",{className:"btn btn-outline",onClick:()=>C(!0),children:[n.jsx($c,{size:16}),n.jsx("span",{children:"Statistics"})]}),n.jsxs("button",{className:"btn btn-outline",onClick:fe,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:"Export CSV"})]}),n.jsxs("button",{className:"btn btn-outline",onClick:ee,children:[n.jsx(fs,{size:16}),n.jsx("span",{children:"Refresh"})]})]})]}),x&&n.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(4, 1fr)",marginBottom:"24px"},children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container orange",children:n.jsx(Jc,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:x.totalBills||0}),n.jsx("p",{children:"Total Bills"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container green",children:n.jsx(lm,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.totalRevenue||0).toFixed(0)]}),n.jsx("p",{children:"Total Revenue"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container blue",children:n.jsx($c,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.averageBillValue||0).toFixed(0)]}),n.jsx("p",{children:"Average Bill Value"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container purple",children:n.jsx(an,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:i.length}),n.jsx("p",{children:"Filtered Results"})]})]})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search bills...",className:"search-input",value:F,onChange:te=>B(te.target.value)})]}),n.jsx("div",{className:"filter-buttons",children:n.jsxs("button",{className:"btn btn-outline",onClick:()=>O(!E),children:[n.jsx(im,{size:16}),n.jsx("span",{children:"Filters"})]})})]}),E&&n.jsx("div",{className:"card",style:{marginBottom:"20px",padding:"20px"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{className:"form-label",children:"Branch"}),n.jsxs("select",{className:"form-select",value:M,onChange:te=>ye("branch",te.target.value),children:[n.jsx("option",{value:"all",children:"All Branches"}),l.map(te=>n.jsx("option",{value:te._id,children:te.name},te._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"form-label",children:"Customer Name"}),n.jsx("input",{type:"text",className:"form-input",placeholder:"Filter by customer name",value:P,onChange:te=>ye("customer",te.target.value)})]})]})}),p&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:p})]}),n.jsx("div",{className:"data-card",children:u?n.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[n.jsx(Ra,{size:24,className:"animate-spin"}),n.jsx("p",{children:"Loading counter bills..."})]}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Bill Details"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Counter User"}),n.jsx("th",{children:"Date & Time"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Items"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.length>0?r.map(te=>n.jsxs("tr",{children:[n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"500"},children:te.billId}),n.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Order: ",te.orderId]}),n.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Invoice: ",te.invoiceNumber]})]}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"500"},children:te.customer}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:te.customerMobile})]}),n.jsxs("td",{children:[n.jsx("div",{style:{fontWeight:"500"},children:te.counterUser}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:te.counterMobile})]}),n.jsxs("td",{children:[n.jsx("div",{children:te.date}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:te.time})]}),n.jsx("td",{children:n.jsx("div",{style:{fontWeight:"500"},children:te.branch})}),n.jsx("td",{children:n.jsxs("div",{style:{fontWeight:"600",color:"#666"},children:[te.items," items"]})}),n.jsx("td",{children:n.jsx("div",{style:{fontWeight:"600",color:"#666"},children:te.amount})}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>Se(te),title:"View Details",children:n.jsx(Xi,{size:14})}),n.jsx("button",{className:"action-btn edit",onClick:()=>le(te),title:"Download PDF",children:n.jsx(Qc,{size:14})})]})})]},te.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"no-orders",children:"No counter bills found matching your criteria"})})})]})}),Q>0&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",onClick:()=>W(te=>Math.max(te-1,1)),disabled:R===1||u,children:"Previous"}),n.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,Q)},(te,ce)=>{let X;return Q<=5||R<=3?X=ce+1:R>=Q-2?X=Q-4+ce:X=R-2+ce,n.jsx("button",{className:`pagination-page ${R===X?"active":""}`,onClick:()=>W(X),disabled:u,children:X},X)}),Q>5&&R<Q-2&&n.jsx("span",{className:"pagination-ellipsis",children:"..."}),Q>5&&R<Q-2&&n.jsx("button",{className:`pagination-page ${R===Q?"active":""}`,onClick:()=>W(Q),disabled:u,children:Q})]}),n.jsx("button",{className:"pagination-btn",onClick:()=>W(te=>Math.min(te+1,Q)),disabled:R===Q||u,children:"Next"})]}),j&&S&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"800px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{className:"modal-title",children:["Bill Details - ",S.billId]}),n.jsx("button",{className:"modal-close",onClick:K,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[n.jsxs("div",{children:[n.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Bill Information"}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Bill ID"}),n.jsx("div",{className:"order-detail-value",children:S.billId})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Order ID"}),n.jsx("div",{className:"order-detail-value",children:S.orderId})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Invoice No"}),n.jsx("div",{className:"order-detail-value",children:S.invoiceNumber})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Date & Time"}),n.jsxs("div",{className:"order-detail-value",children:[S.date," ",S.time]})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Branch"}),n.jsx("div",{className:"order-detail-value",children:S.branch})]})]}),n.jsxs("div",{children:[n.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Customer & Counter Details"}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Customer Name"}),n.jsx("div",{className:"order-detail-value",children:S.customer})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Customer Mobile"}),n.jsx("div",{className:"order-detail-value",children:S.customerMobile})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Counter User"}),n.jsx("div",{className:"order-detail-value",children:S.counterUser})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Counter Mobile"}),n.jsx("div",{className:"order-detail-value",children:S.counterMobile})]})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Order Items"}),n.jsx("div",{className:"order-items-table",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:((Ce=(Xe=S.originalBill)==null?void 0:Xe.items)==null?void 0:Ce.length)>0?S.originalBill.items.map((te,ce)=>n.jsxs("tr",{children:[n.jsx("td",{children:te.name}),n.jsx("td",{children:te.quantity}),n.jsxs("td",{children:["",te.price.toFixed(2)]}),n.jsxs("td",{children:["",(te.price*te.quantity).toFixed(2)]})]},ce)):n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Bill Summary"}),n.jsx("div",{className:"order-items-table",children:n.jsx("table",{className:"data-table",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Subtotal"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((Le=S.subtotal)==null?void 0:Le.toFixed(2))||"0.00"]})]}),S.tax>0&&n.jsxs("tr",{children:[n.jsx("td",{children:"Tax"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((ne=S.tax)==null?void 0:ne.toFixed(2))||"0.00"]})]}),S.serviceCharge>0&&n.jsxs("tr",{children:[n.jsx("td",{children:"Service Charge"}),n.jsxs("td",{style:{textAlign:"right"},children:["",((Ae=S.serviceCharge)==null?void 0:Ae.toFixed(2))||"0.00"]})]}),n.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f8f9fa"},children:[n.jsx("td",{children:"Grand Total"}),n.jsxs("td",{style:{textAlign:"right",color:"#ff7e47"},children:["",((Ve=S.totalAmount)==null?void 0:Ve.toFixed(2))||"0.00"]})]})]})})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:K,children:"Close"}),n.jsxs("button",{className:"btn btn-print",onClick:()=>pe(S),children:[n.jsx(wi,{size:16}),"Print Receipt"]}),n.jsxs("button",{className:"btn btn-outline",onClick:()=>le(S),children:[n.jsx(Qc,{size:16}),"Download PDF"]})]})]})}),y&&x&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Counter Bills Statistics"}),n.jsx("button",{className:"modal-close",onClick:ue,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"24px"},children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container orange",children:n.jsx(Jc,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:x.totalBills||0}),n.jsx("p",{children:"Total Bills"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container green",children:n.jsx(lm,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.totalRevenue||0).toFixed(2)]}),n.jsx("p",{children:"Total Revenue"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container blue",children:n.jsx($c,{size:24})}),n.jsxs("div",{className:"stat-content",children:[n.jsxs("h3",{children:["",(x.averageBillValue||0).toFixed(2)]}),n.jsx("p",{children:"Average Bill Value"})]})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"icon-container purple",children:n.jsx(an,{size:20})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{children:A==="all"?"All Time":A==="today"?"Today":A==="week"?"Last 7 Days":"Last 30 Days"}),n.jsx("p",{children:"Time Period"})]})]})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-outline",onClick:ue,children:"Close"})})]})})]})},jae=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),wae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState(!0),[l,d]=N.useState(""),[u,f]=N.useState(""),[p,m]=N.useState("all"),[x,v]=N.useState("date"),[j,b]=N.useState("desc"),[y,C]=N.useState(1),[E,O]=N.useState(1),S=7,[T,k]=N.useState(null),[D,F]=N.useState(!1);N.useEffect(()=>{B()},[p]),N.useEffect(()=>{M()},[e,u,y,x,j]);const B=async()=>{s(!0),d("");try{const q={};p!=="all"&&(q.orderType=p);const Y=await jae.get("/staff-order",{params:q});let z=[];Y.data&&Y.data.success&&Array.isArray(Y.data.data)?z=Y.data.data:Y.data&&Y.data.orders&&Array.isArray(Y.data.orders)?z=Y.data.orders:Array.isArray(Y.data)?z=Y.data:Y.data&&Y.data.message&&Y.data.message.includes("routes working")?z=[]:(console.error(" Unexpected response format:",Y.data),console.error(" Response keys:",Object.keys(Y.data||{})),console.error(" Response type:",typeof Y.data),z=[]);const ee=z.map(H=>{var re,le;return{id:H._id,orderId:H.orderId||"",customer:H.isGuestOrder?H.customerName:((re=H.userId)==null?void 0:re.name)||"Unknown Staff",customerType:H.isGuestOrder?"Guest":"Staff",customerMobile:H.isGuestOrder?H.customerMobile:((le=H.userId)==null?void 0:le.mobile)||"N/A",date:new Date(H.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),rawDate:new Date(H.createdAt).getTime(),amount:H.grandTotal||0,method:H.paymentMethod||"cash",items:H.items||[],subtotal:H.subtotal||0,tax:H.tax||0,serviceCharge:H.serviceCharge||0,totalAmount:H.totalAmount||0,branchName:H.branchName||"Unknown Branch",tableNumber:H.tableNumber||"N/A",peopleCount:H.peopleCount||1,paymentStatus:H.paymentStatus||"pending",notes:H.notes||"",orderTime:H.orderTime||H.createdAt,isGuestOrder:H.isGuestOrder||!1}});t(ee)}catch(q){console.error("Error fetching payments:",q),d("Failed to load payments. Please try again."),t([])}finally{s(!1)}},M=()=>{let q=[...e];if(u.trim()){const re=u.toLowerCase();q=q.filter(le=>(le.orderId||"").toLowerCase().includes(re)||(le.customer||"").toLowerCase().includes(re)||(le.branchName||"").toLowerCase().includes(re)||(le.tableNumber||"").toLowerCase().includes(re)||(le.customerMobile||"").toLowerCase().includes(re))}q.sort((re,le)=>x==="date"?j==="asc"?re.rawDate-le.rawDate:le.rawDate-re.rawDate:x==="amount"?j==="asc"?re.amount-le.amount:le.amount-re.amount:0);const Y=Math.ceil(q.length/S);O(Y||1);const z=(y-1)*S,ee=z+S,H=q.slice(z,ee);a(H),y>Y&&Y>0&&C(Y)},L=q=>{x===q?b(j==="asc"?"desc":"asc"):(v(q),b("desc"))},A=(q,Y)=>{m(Y),C(1)},U=q=>{f(q.target.value),C(1)},P=q=>{switch(q){case"card":return n.jsx(Na,{className:"h-5 w-5"});case"upi":return n.jsx(hf,{className:"h-5 w-5"});case"cash":return n.jsx("span",{className:"rupees-icon",children:""});case"netbanking":return n.jsx(Na,{className:"h-5 w-5"});default:return n.jsx(Na,{className:"h-5 w-5"})}},I=q=>{k(q),F(!0)},R=()=>{F(!1),k(null)},W=q=>{if(q==null)return"";const Y=q.toString();return Y.includes(",")||Y.includes('"')||Y.includes(`
`)?`"${Y.replace(/"/g,'""')}"`:Y},Q=()=>{let Y=["Order ID","Customer","Customer Type","Mobile","Branch","Table","Date","Subtotal","Tax","Service Charge","Total","Payment Method","Payment Status"].map(W).join(",")+`
`,z=[...e];if(u.trim()){const pe=u.toLowerCase();z=z.filter(Se=>(Se.orderId||"").toLowerCase().includes(pe)||(Se.customer||"").toLowerCase().includes(pe)||(Se.branchName||"").toLowerCase().includes(pe)||(Se.tableNumber||"").toLowerCase().includes(pe)||(Se.customerMobile||"").toLowerCase().includes(pe))}z.forEach(pe=>{const Se=[pe.orderId,pe.customer,pe.customerType,pe.customerMobile,pe.branchName,pe.tableNumber,pe.date,`${pe.subtotal.toFixed(2)}`,`${pe.tax.toFixed(2)}`,`${pe.serviceCharge.toFixed(2)}`,`${pe.amount.toFixed(2)}`,pe.method.charAt(0).toUpperCase()+pe.method.slice(1),pe.paymentStatus.charAt(0).toUpperCase()+pe.paymentStatus.slice(1)];Y+=Se.map(W).join(",")+`
`});const ee="\uFEFF",H=new Blob([ee+Y],{type:"text/csv;charset=utf-8;"}),re=window.URL.createObjectURL(H),le=document.createElement("a");le.setAttribute("hidden",""),le.setAttribute("href",re),le.setAttribute("download",`all-orders-payments-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(le),le.click(),document.body.removeChild(le)},ge=()=>{const q=[];if(E<=5)for(let z=1;z<=E;z++)q.push(z);else{q.push(1);let z=Math.max(2,y-1),ee=Math.min(E-1,y+1);y<=3&&(z=2,ee=Math.min(4,E-1)),y>=E-2&&(z=Math.max(2,E-3),ee=E-1),z>2&&q.push("...");for(let H=z;H<=ee;H++)q.push(H);ee<E-1&&q.push("..."),q.push(E)}return q};return n.jsxs("div",{className:"payment-ui",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"All Orders Payment"}),n.jsx("div",{className:"refresh-button",onClick:B,title:"Refresh data",children:n.jsx(fs,{className:`h-5 w-5 ${i?"animate-spin":""}`})})]}),l&&n.jsx("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:n.jsx("span",{children:l})}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{className:"search-icon"}),n.jsx("input",{type:"text",className:"search-input",placeholder:"Search by order ID, customer name, branch, or table",value:u,onChange:U})]}),n.jsxs("div",{className:"filter-buttons",children:[n.jsxs("select",{className:"filter-select",value:p,onChange:q=>A("orderType",q.target.value),children:[n.jsx("option",{value:"all",children:"All Orders"}),n.jsx("option",{value:"staff",children:"Staff Orders"}),n.jsx("option",{value:"guest",children:"Guest Orders"})]}),n.jsxs("button",{className:"filter-btn",onClick:Q,children:[n.jsx(Ca,{className:"h-4 w-4"}),n.jsx("span",{children:"Export"})]})]})]}),n.jsx("div",{className:"data-card",children:n.jsx("div",{className:"card-body",children:i?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Loading payments..."})]}):r.length===0?n.jsx("div",{className:"empty-state",children:n.jsx("p",{children:"No payments found matching your search."})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pagination-info",children:["Showing ",(y-1)*S+1," to"," ",Math.min(y*S,e.length)," of ",e.length," entries"]}),n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Order ID"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Table"}),n.jsx("th",{className:"sortable-header",onClick:()=>L("date"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Date"}),x==="date"&&(j==="asc"?n.jsx($o,{className:"h-4 w-4"}):n.jsx(zo,{className:"h-4 w-4"}))]})}),n.jsx("th",{className:"sortable-header",onClick:()=>L("amount"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Amount"}),x==="amount"&&(j==="asc"?n.jsx($o,{className:"h-4 w-4"}):n.jsx(zo,{className:"h-4 w-4"}))]})}),n.jsx("th",{children:"Payment Method"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.map(q=>n.jsxs("tr",{children:[n.jsx("td",{children:q.orderId}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("div",{children:q.customer}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:q.customerMobile})]})}),n.jsx("td",{children:n.jsx("span",{className:`customer-type-badge ${q.isGuestOrder?"guest":"staff"}`,children:q.customerType})}),n.jsx("td",{children:q.branchName}),n.jsxs("td",{children:["Table ",q.tableNumber]}),n.jsx("td",{children:q.date}),n.jsxs("td",{children:["",q.amount.toFixed(2)]}),n.jsx("td",{children:n.jsxs("div",{className:"payment-method",children:[P(q.method),n.jsx("span",{className:"payment-method-text",children:q.method.charAt(0).toUpperCase()+q.method.slice(1)})]})}),n.jsx("td",{children:n.jsx("div",{className:"action-buttons",children:n.jsx("button",{className:"action-btn view",onClick:()=>I(q),children:"View"})})})]},q.id))})]})]})})}),n.jsxs("div",{className:"pagination-section",children:[n.jsxs("div",{className:"pagination-info",children:["Showing ",(y-1)*S+1," to"," ",Math.min(y*S,e.length)," of ",e.length," entries"]}),n.jsxs("div",{className:"pagination",children:[n.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:y===1,onClick:()=>C(q=>Math.max(q-1,1)),children:[n.jsx(ih,{className:"h-4 w-4"}),n.jsx("span",{children:"Previous"})]}),n.jsx("div",{className:"pagination-pages",children:ge().map((q,Y)=>q==="..."?n.jsx("span",{className:"pagination-ellipsis",children:"..."},Y):n.jsx("button",{className:`pagination-page ${y===q?"active":""}`,onClick:()=>C(q),children:q},Y))}),n.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:y===E,onClick:()=>C(q=>Math.min(q+1,E)),children:[n.jsx("span",{children:"Next"}),n.jsx(sh,{className:"h-4 w-4"})]})]})]}),D&&T&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h2",{className:"modal-title",children:[T.customerType," Order Payment Details"]}),n.jsx("button",{className:"modal-close",onClick:R,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"payment-details",children:[n.jsxs("div",{className:"payment-info-grid",children:[n.jsxs("div",{className:"payment-info-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Payment Information"}),n.jsxs("div",{className:"payment-info-content",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Order ID:"}),n.jsx("span",{className:"info-value",children:T.orderId})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Date:"}),n.jsx("span",{className:"info-value",children:T.date})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Branch:"}),n.jsx("span",{className:"info-value",children:T.branchName})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Table:"}),n.jsxs("span",{className:"info-value",children:["Table ",T.tableNumber]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Peoples:"}),n.jsx("span",{className:"info-value",children:n.jsxs("div",{className:"people-count",children:[n.jsx(Ls,{className:"h-4 w-4"}),T.peopleCount]})})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Subtotal:"}),n.jsxs("span",{className:"info-value",children:["",T.subtotal.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Tax (5%):"}),n.jsxs("span",{className:"info-value",children:["",T.tax.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Service Charge (10%):"}),n.jsxs("span",{className:"info-value",children:["",T.serviceCharge.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Total Amount:"}),n.jsxs("span",{className:"info-value",children:["",T.amount.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Payment Method:"}),n.jsx("span",{className:"info-value",children:n.jsxs("div",{className:"payment-method",children:[P(T.method),n.jsx("span",{className:"payment-method-text",children:T.method.charAt(0).toUpperCase()+T.method.slice(1)})]})})]})]})]}),n.jsxs("div",{className:"payment-info-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Customer Information"}),n.jsxs("div",{className:"payment-info-content",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Name:"}),n.jsx("span",{className:"info-value",children:T.customer})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Type:"}),n.jsx("span",{className:"info-value",children:n.jsx("span",{className:`customer-type-badge ${T.isGuestOrder?"guest":"staff"}`,children:T.customerType})})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Mobile:"}),n.jsx("span",{className:"info-value",children:T.customerMobile})]}),T.notes&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Notes:"}),n.jsx("span",{className:"info-value",children:T.notes})]})]})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Order Items"}),n.jsxs("table",{className:"order-items-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:T.items.map((q,Y)=>n.jsxs("tr",{children:[n.jsx("td",{children:q.name}),n.jsx("td",{children:q.quantity}),n.jsxs("td",{children:["",q.price.toFixed(2)]}),n.jsxs("td",{children:["",(q.quantity*q.price).toFixed(2)]})]},Y))}),n.jsxs("tfoot",{children:[n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Subtotal"}),n.jsxs("td",{className:"total-value",children:["",T.subtotal.toFixed(2)]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Tax (5%)"}),n.jsxs("td",{className:"total-value",children:["",T.tax.toFixed(2)]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Service Charge (10%)"}),n.jsxs("td",{className:"total-value",children:["",T.serviceCharge.toFixed(2)]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Total"}),n.jsxs("td",{className:"total-value",children:["",T.amount.toFixed(2)]})]})]})]})]})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-outline",onClick:R,children:"Close"})})]})}),n.jsx("style",{children:`
        .loading-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
        }

        .loading-spinner {
          border: 4px solid rgba(0, 0, 0, 0.1);
          border-left-color: var(--primary-color);
          border-radius: 50%;
          width: 30px;
          height: 30px;
          animation: spin 1s linear infinite;
          margin-bottom: 10px;
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }

        .page-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .refresh-button {
          cursor: pointer;
          padding: 8px;
          border-radius: 50%;
          transition: background-color 0.2s;
        }

        .refresh-button:hover {
          background-color: rgba(0, 0, 0, 0.05);
        }

        .animate-spin {
          animation: spin 1s linear infinite;
        }

        .pagination-info {
          margin-bottom: 10px;
          font-size: 14px;
          color: #666;
        }

        .sortable-header {
          cursor: pointer;
        }

        .sort-header {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .payment-method {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .payment-method-text {
          font-size: 14px;
        }

        .rupees-icon {
          display: flex;
          align-items: center;
          font-size: 18px;
          line-height: 1;
        }

        .customer-type-badge {
          display: inline-block;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          text-transform: uppercase;
        }

        .customer-type-badge.staff {
          background: rgba(59, 130, 246, 0.1);
          color: #3b82f6;
        }

        .customer-type-badge.guest {
          background: rgba(16, 185, 129, 0.1);
          color: #10b981;
        }

        .people-count {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .filter-select {
          padding: 10px 12px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          background: white;
          min-width: 150px;
          outline: none;
          cursor: pointer;
        }

        .filter-select:focus {
          border-color: #3b82f6;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .payment-details {
          padding: 10px 0;
        }

        .payment-info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }

        @media (max-width: 768px) {
          .payment-info-grid {
            grid-template-columns: 1fr;
          }
        }

        .payment-info-section {
          background-color: var(--bg-light);
          border-radius: var(--radius-md);
          overflow: hidden;
        }

        .payment-info-title {
          font-size: 16px;
          font-weight: 600;
          padding: 12px 16px;
          background-color: var(--bg-white);
          border-bottom: 1px solid var(--border-color);
        }

        .payment-info-content {
          padding: 16px;
        }

        .info-row {
          display: flex;
          margin-bottom: 10px;
        }

        .info-label {
          width: 140px;
          font-weight: 500;
          color: var(--text-light);
        }

        .info-value {
          flex: 1;
          font-weight: 500;
        }

        .order-items-section {
          margin-top: 20px;
        }

        .order-items-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }

        .order-items-table th {
          text-align: left;
          padding: 12px;
          background-color: var(--bg-light);
          font-weight: 500;
          color: var(--text-light);
        }

        .order-items-table td {
          padding: 12px;
          border-bottom: 1px solid var(--border-color);
        }

        .order-items-table tfoot td {
          padding: 12px;
          font-weight: 600;
        }

        .total-label {
          text-align: right;
          font-weight: 600;
        }

        .total-value {
          font-weight: 700;
          color: var(--primary-color);
        }

        .pagination-section {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
          margin-top: 24px;
        }

        .pagination-info {
          font-size: 14px;
          color: #666;
          text-align: center;
        }

        .pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 8px;
          flex-wrap: wrap;
        }

        .pagination-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4px;
          padding: 8px 16px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-page {
          padding: 8px 12px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-page.active {
          background-color: var(--primary-color);
          color: white;
          border-color: var(--primary-color);
        }

        .pagination-ellipsis {
          padding: 8px 12px;
          color: var(--text-light);
          display: inline-flex;
          align-items: center;
          justify-content: center;
        }

        .empty-state {
          text-align: center;
          padding: 40px 20px;
          color: #6b7280;
        }
      `})]})},Sae=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Nae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(!0),[i,s]=N.useState(""),[l,d]=N.useState(1),[u,f]=N.useState(1),[p,m]=N.useState(""),[x,v]=N.useState("date"),[j,b]=N.useState("desc"),[y,C]=N.useState(null),[E,O]=N.useState(!1),S=7;N.useEffect(()=>{(async()=>{a(!0),s("");try{const R={page:l,limit:S};p.trim()&&(R.search=p.trim());const W=await Sae.get("/counter-order/orders",{params:R});let Q=[];W.data.success&&Array.isArray(W.data.data)?Q=W.data.data:W.data.orders&&Array.isArray(W.data.orders)?Q=W.data.orders:Array.isArray(W.data)?Q=W.data:(console.error(" Unexpected response format:",W.data),Q=[]);const ge=Q.map(Y=>{var z,ee,H,re,le,pe;return{id:Y.id,orderId:((z=Y.invoice)==null?void 0:z.invoiceNumber)||Y.id,customer:Y.customerName||"Unknown Customer",customerMobile:Y.phoneNumber||"N/A",counterUser:((ee=Y.userId)==null?void 0:ee.name)||"Unknown Counter User",counterMobile:((H=Y.userId)==null?void 0:H.mobile)||"N/A",date:new Date(Y.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),subtotal:Y.subtotal||0,tax:Y.tax||0,serviceCharge:Y.serviceCharge||0,amount:Y.grandTotal||Y.totalAmount||0,method:Y.paymentMethod||"unknown",items:Y.items||[],branchName:((re=Y.branch)==null?void 0:re.name)||"Unknown Branch",branchLocation:((le=Y.branch)==null?void 0:le.location)||"Unknown Location",invoiceNumber:((pe=Y.invoice)==null?void 0:pe.invoiceNumber)||"N/A",orderTime:Y.createdAt}});t(ge);const q=W.data.count||Q.length;f(Math.ceil(q/S))}catch(R){console.error("Error fetching counter payments:",R),s("Failed to load counter payments. Please try again."),t([]),f(1)}finally{a(!1)}})()},[l,p]);const D=[...e.filter(I=>{const R=p.toLowerCase();return(I.orderId||"").toLowerCase().includes(R)||(I.customer||"").toLowerCase().includes(R)||(I.counterUser||"").toLowerCase().includes(R)||(I.branchName||"").toLowerCase().includes(R)||(I.customerMobile||"").toLowerCase().includes(R)})].sort((I,R)=>x==="date"?j==="asc"?new Date(I.date)-new Date(R.date):new Date(R.date)-new Date(I.date):x==="amount"?j==="asc"?I.amount-R.amount:R.amount-I.amount:0).slice(0,S),F=I=>{switch(I){case"card":return n.jsx(Na,{className:"h-5 w-5"});case"upi":return n.jsx(hf,{className:"h-5 w-5"});case"cash":return n.jsx("span",{className:"rupees-icon",children:""});case"qr":return n.jsx(hf,{className:"h-5 w-5"});default:return n.jsx(Na,{className:"h-5 w-5"})}},B=I=>{C(I),O(!0)},M=()=>{O(!1),C(null)},L=I=>{x===I?b(j==="asc"?"desc":"asc"):(v(I),b("desc"))},A=I=>{if(I==null)return"";const R=I.toString();return R.includes(",")||R.includes('"')||R.includes(`
`)?`"${R.replace(/"/g,'""')}"`:R},U=()=>{let R=["Order ID","Customer Name","Customer Mobile","Counter User","Branch","Date","Subtotal","Tax","Service Charge","Total Amount","Payment Method"].map(A).join(",")+`
`;e.forEach(Y=>{const z=[Y.orderId,Y.customer,Y.customerMobile,Y.counterUser,Y.branchName,Y.date,`${Y.subtotal.toFixed(2)}`,`${Y.tax.toFixed(2)}`,`${Y.serviceCharge.toFixed(2)}`,`${Y.amount.toFixed(2)}`,Y.method.charAt(0).toUpperCase()+Y.method.slice(1)];R+=z.map(A).join(",")+`
`});const W="\uFEFF",Q=new Blob([W+R],{type:"text/csv;charset=utf-8;"}),ge=window.URL.createObjectURL(Q),q=document.createElement("a");q.setAttribute("hidden",""),q.setAttribute("href",ge),q.setAttribute("download",`counter-payments-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(q),q.click(),document.body.removeChild(q)},P=()=>{const I=[];if(u<=7)for(let R=1;R<=u;R++)I.push(R);else{I.push(1);let R=Math.max(2,l-2),W=Math.min(u-1,l+2);l<=4&&(W=5),l>=u-3&&(R=u-4),R>2&&I.push("...");for(let Q=R;Q<=W;Q++)I.push(Q);W<u-1&&I.push("..."),u>1&&I.push(u)}return I};return n.jsxs("div",{className:"payment-ui",children:[n.jsx("div",{className:"page-header",children:n.jsx("h1",{children:"Counter Payments"})}),i&&n.jsx("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:n.jsx("span",{children:i})}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{className:"search-icon"}),n.jsx("input",{type:"text",className:"search-input",placeholder:"Search by order ID, customer name, counter user, or branch",value:p,onChange:I=>m(I.target.value)})]}),n.jsx("div",{className:"filter-buttons",children:n.jsxs("button",{className:"filter-btn",onClick:U,children:[n.jsx(Ca,{className:"h-4 w-4"}),n.jsx("span",{children:"Export"})]})})]}),n.jsx("div",{className:"data-card",children:n.jsx("div",{className:"card-body",children:r?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Loading counter payments..."})]}):D.length===0?n.jsx("div",{className:"empty-state",children:n.jsx("p",{children:"No counter payments found matching your search."})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Order ID"}),n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Counter User"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{className:"sortable-header",onClick:()=>L("date"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Date"}),x==="date"&&(j==="asc"?n.jsx($o,{className:"h-4 w-4"}):n.jsx(zo,{className:"h-4 w-4"}))]})}),n.jsx("th",{className:"sortable-header",onClick:()=>L("amount"),children:n.jsxs("div",{className:"sort-header",children:[n.jsx("span",{children:"Amount"}),x==="amount"&&(j==="asc"?n.jsx($o,{className:"h-4 w-4"}):n.jsx(zo,{className:"h-4 w-4"}))]})}),n.jsx("th",{children:"Payment Method"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:D.map(I=>n.jsxs("tr",{children:[n.jsx("td",{children:I.orderId}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("div",{children:I.customer}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:I.customerMobile})]})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("div",{children:I.counterUser}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:I.counterMobile})]})}),n.jsx("td",{children:I.branchName}),n.jsx("td",{children:I.date}),n.jsxs("td",{children:["",I.amount.toFixed(2)]}),n.jsx("td",{children:n.jsxs("div",{className:"payment-method",children:[F(I.method),n.jsx("span",{className:"payment-method-text",children:I.method.charAt(0).toUpperCase()+I.method.slice(1)})]})}),n.jsx("td",{children:n.jsx("div",{className:"action-buttons",children:n.jsx("button",{className:"action-btn view",onClick:()=>B(I),children:"View"})})})]},I.id))})]})})}),n.jsxs("div",{className:"pagination",children:[n.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:l===1,onClick:()=>d(I=>Math.max(I-1,1)),children:[n.jsx(ih,{className:"h-4 w-4"}),n.jsx("span",{children:"Previous"})]}),n.jsx("div",{className:"pagination-pages",children:P().map((I,R)=>I==="..."?n.jsx("span",{className:"pagination-ellipsis",children:"..."},R):n.jsx("button",{className:`pagination-page ${l===I?"active":""}`,onClick:()=>d(I),children:I},R))}),n.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:l===u,onClick:()=>d(I=>Math.min(I+1,u)),children:[n.jsx("span",{children:"Next"}),n.jsx(sh,{className:"h-4 w-4"})]})]}),E&&y&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{className:"modal-title",children:"Counter Payment Details"}),n.jsx("button",{className:"modal-close",onClick:M,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"payment-details",children:[n.jsxs("div",{className:"payment-info-grid",children:[n.jsxs("div",{className:"payment-info-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Payment Information"}),n.jsxs("div",{className:"payment-info-content",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Order ID:"}),n.jsx("span",{className:"info-value",children:y.orderId})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Invoice Number:"}),n.jsx("span",{className:"info-value",children:y.invoiceNumber})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Date:"}),n.jsx("span",{className:"info-value",children:y.date})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Branch:"}),n.jsx("span",{className:"info-value",children:y.branchName})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Subtotal:"}),n.jsxs("span",{className:"info-value",children:["",y.subtotal.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Tax:"}),n.jsxs("span",{className:"info-value",children:["",y.tax.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Service Charge:"}),n.jsxs("span",{className:"info-value",children:["",y.serviceCharge.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Total Amount:"}),n.jsxs("span",{className:"info-value",children:["",y.amount.toFixed(2)]})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Payment Method:"}),n.jsx("span",{className:"info-value",children:n.jsxs("div",{className:"payment-method",children:[F(y.method),n.jsx("span",{className:"payment-method-text",children:y.method.charAt(0).toUpperCase()+y.method.slice(1)})]})})]})]})]}),n.jsxs("div",{className:"payment-info-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Customer & Counter Information"}),n.jsxs("div",{className:"payment-info-content",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Customer Name:"}),n.jsx("span",{className:"info-value",children:y.customer})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Customer Mobile:"}),n.jsx("span",{className:"info-value",children:y.customerMobile})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Counter User:"}),n.jsx("span",{className:"info-value",children:y.counterUser})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Counter Mobile:"}),n.jsx("span",{className:"info-value",children:y.counterMobile})]}),n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:"Branch Location:"}),n.jsx("span",{className:"info-value",children:y.branchLocation})]})]})]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h3",{className:"payment-info-title",children:"Order Items"}),n.jsxs("table",{className:"order-items-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Item"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:y.items.map((I,R)=>n.jsxs("tr",{children:[n.jsx("td",{children:I.name}),n.jsx("td",{children:I.quantity}),n.jsxs("td",{children:["",I.price.toFixed(2)]}),n.jsxs("td",{children:["",(I.quantity*I.price).toFixed(2)]})]},R))}),n.jsxs("tfoot",{children:[n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Subtotal"}),n.jsxs("td",{className:"total-value",children:["",y.subtotal.toFixed(2)]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Tax"}),n.jsxs("td",{className:"total-value",children:["",y.tax.toFixed(2)]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Service Charge"}),n.jsxs("td",{className:"total-value",children:["",y.serviceCharge.toFixed(2)]})]}),n.jsxs("tr",{children:[n.jsx("td",{colSpan:"3",className:"total-label",children:"Total"}),n.jsxs("td",{className:"total-value",children:["",y.amount.toFixed(2)]})]})]})]})]})]})}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-outline",onClick:M,children:"Close"})})]})}),n.jsx("style",{children:`
        .loading-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
        }

        .loading-spinner {
          border: 4px solid rgba(0, 0, 0, 0.1);
          border-left-color: var(--primary-color);
          border-radius: 50%;
          width: 30px;
          height: 30px;
          animation: spin 1s linear infinite;
          margin-bottom: 10px;
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }

        .sortable-header {
          cursor: pointer;
        }

        .sort-header {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .payment-method {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .payment-method-text {
          font-size: 14px;
        }

        .rupees-icon {
          display: flex;
          align-items: center;
          font-size: 18px;
          line-height: 1;
        }

        .payment-details {
          padding: 10px 0;
        }

        .payment-info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }

        @media (max-width: 768px) {
          .payment-info-grid {
            grid-template-columns: 1fr;
          }
        }

        .payment-info-section {
          background-color: var(--bg-light);
          border-radius: var(--radius-md);
          overflow: hidden;
        }

        .payment-info-title {
          font-size: 16px;
          font-weight: 600;
          padding: 12px 16px;
          background-color: var(--bg-white);
          border-bottom: 1px solid var(--border-color);
        }

        .payment-info-content {
          padding: 16px;
        }

        .info-row {
          display: flex;
          margin-bottom: 10px;
        }

        .info-label {
          width: 140px;
          font-weight: 500;
          color: var(--text-light);
        }

        .info-value {
          flex: 1;
          font-weight: 500;
        }

        .order-items-section {
          margin-top: 20px;
        }

        .order-items-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }

        .order-items-table th {
          text-align: left;
          padding: 12px;
          background-color: var(--bg-light);
          font-weight: 500;
          color: var(--text-light);
        }

        .order-items-table td {
          padding: 12px;
          border-bottom: 1px solid var(--border-color);
        }

        .order-items-table tfoot td {
          padding: 12px;
          font-weight: 600;
        }

        .total-label {
          text-align: right;
          font-weight: 600;
        }

        .total-value {
          font-weight: 700;
          color: var(--primary-color);
        }

        .pagination-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4px;
          padding: 8px 16px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-page {
          padding: 8px 12px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-page.active {
          background-color: var(--primary-color);
          color: white;
          border-color: var(--primary-color);
        }

        .pagination-ellipsis {
          padding: 8px 12px;
          color: var(--text-light);
          display: inline-flex;
          align-items: center;
          justify-content: center;
        }
      `})]})},Tae=()=>{var Y;const[e,t]=N.useState([]),[r,a]=N.useState(!0),[i,s]=N.useState(null),[l,d]=N.useState(!1),[u,f]=N.useState(""),[p,m]=N.useState("all"),[x,v]=N.useState(1),[j,b]=N.useState(1),[y,C]=N.useState(!1),[E,O]=N.useState(null),[S,T]=N.useState(1),[k,D]=N.useState(0);N.useEffect(()=>{F()},[x,p,u]);const F=async()=>{try{a(!0);const z=new URLSearchParams({page:x,limit:10,status:p!=="all"?p:"",search:u}),ee=await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission?${z}`);if(!ee.ok)throw new Error(`HTTP error! status: ${ee.status}`);const H=await ee.json();H.success&&H.submissions?(t(H.submissions),b(H.totalPages)):H.success&&Array.isArray(H.data)?(t(H.data),b(Math.ceil(H.count/10))):H.message?(console.log(" Server returning placeholder response:",H.message),t([]),b(1)):(t([]),b(1))}catch{}finally{a(!1)}},B=async z=>{try{const H=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${z}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();H.success?(F(),alert("Submission approved successfully!")):alert("Error approving submission: "+H.message)}catch(ee){console.error("Error approving submission:",ee),alert("Error approving submission")}},M=async z=>{try{const H=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${z}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();H.success?(F(),alert("Submission rejected successfully!")):alert("Error rejecting submission: "+H.message)}catch(ee){console.error("Error rejecting submission:",ee),alert("Error rejecting submission")}},L=z=>{console.log("Selected submission:",z),s(z),d(!0)},A=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),U=z=>z.charAt(0).toUpperCase()+z.slice(1).replace(/_/g," "),P=z=>z?z.startsWith("http://")||z.startsWith("https://")?z:`https://hotelvirat.com/api/v1/${z}`:null,I=(z,ee)=>{O({uri:P(z),type:ee}),T(1),D(0),C(!0)},R=()=>{C(!1),O(null),T(1),D(0)},W=()=>{T(z=>Math.min(z+.25,3))},Q=()=>{T(z=>Math.max(z-.25,.5))},ge=()=>{D(z=>(z+90)%360)},q=z=>z.qrCodeUri||z.paymentImageUri||z.billImageUri;return n.jsxs("div",{children:[n.jsx("div",{className:"page-header",children:n.jsx("h1",{children:"Product Submissions"})}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{className:"search-icon",size:20}),n.jsx("input",{type:"text",placeholder:"Search by user phone or submission ID...",className:"search-input",value:u,onChange:z=>f(z.target.value)})]}),n.jsx("div",{className:"filter-buttons",children:n.jsxs("select",{className:"filter-select",value:p,onChange:z=>m(z.target.value),children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"submitted",children:"Pending"}),n.jsx("option",{value:"approved",children:"Approved"}),n.jsx("option",{value:"rejected",children:"Rejected"}),n.jsx("option",{value:"qr_uploaded",children:"QR Uploaded"}),n.jsx("option",{value:"payment_uploaded",children:"Payment Uploaded"}),n.jsx("option",{value:"bill_uploaded",children:"Bill Uploaded"}),n.jsx("option",{value:"completed",children:"Completed"})]})})]}),n.jsx("div",{className:"data-card",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Submission ID"}),n.jsx("th",{children:"User Phone"}),n.jsx("th",{children:"User Name"}),n.jsx("th",{children:"Products"}),n.jsx("th",{children:"Total Amount"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Date"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},children:"Loading submissions..."})}):e.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},children:"No submissions found"})}):e.map(z=>{var ee;return n.jsxs("tr",{children:[n.jsx("td",{children:z.submissionId}),n.jsx("td",{children:z.userPhone}),n.jsx("td",{children:((ee=z.userId)==null?void 0:ee.name)||"N/A"}),n.jsxs("td",{children:[z.products.length," items"]}),n.jsxs("td",{children:["",z.totalAmount]}),n.jsx("td",{children:U(z.status)}),n.jsx("td",{children:A(z.createdAt)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>L(z),children:n.jsx(Xi,{size:14})}),z.status==="submitted"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"action-btn edit",onClick:()=>B(z._id),children:n.jsx(ra,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>M(z._id),children:n.jsx(ha,{size:14})})]})]})})]},z._id)})})]})}),j>1&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",disabled:x===1,onClick:()=>v(x-1),children:"Previous"}),n.jsx("div",{className:"pagination-pages",children:Array.from({length:j},(z,ee)=>ee+1).map(z=>n.jsx("button",{className:`pagination-page ${x===z?"active":""}`,onClick:()=>v(z),children:z},z))}),n.jsx("button",{className:"pagination-btn",disabled:x===j,onClick:()=>v(x+1),children:"Next"})]}),l&&i&&n.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:n.jsxs("div",{className:"modal large-modal",onClick:z=>z.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{children:["Submission Details - ",i.submissionId]}),n.jsx("button",{className:"modal-close",onClick:()=>d(!1),children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"submission-info-grid",children:[n.jsxs("div",{className:"info-card",children:[n.jsx("h4",{children:"Basic Information"}),n.jsxs("div",{className:"order-details",children:[n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"Submission ID:"}),n.jsx("span",{className:"order-detail-value",children:i.submissionId})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"User Phone:"}),n.jsx("span",{className:"order-detail-value",children:i.userPhone})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"User Name:"}),n.jsx("span",{className:"order-detail-value",children:((Y=i.userId)==null?void 0:Y.name)||"N/A"})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"Status:"}),n.jsx("span",{children:U(i.status)})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"Total Amount:"}),n.jsxs("span",{className:"order-detail-value amount",children:["",i.totalAmount]})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"Date:"}),n.jsx("span",{className:"order-detail-value",children:A(i.createdAt)})]})]})]}),n.jsxs("div",{className:"info-card",children:[n.jsxs("h4",{children:["Products (",i.products.length," items)"]}),n.jsx("div",{className:"products-list",children:i.products.map((z,ee)=>n.jsxs("div",{className:"product-item",children:[n.jsx("div",{className:"product-name",children:z.name}),n.jsxs("div",{className:"product-details",children:[n.jsxs("span",{children:["",z.price,"  ",z.quantity," ",z.unit]}),n.jsxs("span",{className:"product-total",children:["",(z.price*z.quantity).toFixed(2)]})]})]},ee))})]})]}),q(i)&&n.jsxs("div",{className:"images-section",children:[n.jsx("h4",{children:"Uploaded Images"}),n.jsxs("div",{className:"images-grid",children:[i.qrCodeUri&&n.jsxs("div",{className:"image-item",children:[n.jsx("div",{className:"image-header",children:n.jsx("h5",{children:"QR Code"})}),n.jsxs("div",{className:"image-container",children:[n.jsx("img",{src:P(i.qrCodeUri)||"/placeholder.svg",alt:"QR Code",className:"modal-image",onClick:()=>I(i.qrCodeUri,"QR Code")}),n.jsx("div",{className:"image-overlay",children:n.jsx("button",{className:"view-full-btn",onClick:()=>I(i.qrCodeUri,"QR Code"),children:"View Full Size"})})]})]}),i.paymentImageUri&&n.jsxs("div",{className:"image-item",children:[n.jsx("div",{className:"image-header",children:n.jsx("h5",{children:"Payment Confirmation"})}),n.jsxs("div",{className:"image-container",children:[n.jsx("img",{src:P(i.paymentImageUri)||"/placeholder.svg",alt:"Payment",className:"modal-image",onClick:()=>I(i.paymentImageUri,"Payment Confirmation")}),n.jsx("div",{className:"image-overlay",children:n.jsx("button",{className:"view-full-btn",onClick:()=>I(i.paymentImageUri,"Payment Confirmation"),children:"View Full Size"})})]}),i.paymentUploadedAt&&n.jsxs("div",{className:"image-date",children:["Uploaded: ",A(i.paymentUploadedAt)]})]}),i.billImageUri&&n.jsxs("div",{className:"image-item",children:[n.jsx("div",{className:"image-header",children:n.jsx("h5",{children:"Bill Image"})}),n.jsxs("div",{className:"image-container",children:[n.jsx("img",{src:P(i.billImageUri)||"/placeholder.svg",alt:"Bill",className:"modal-image",onClick:()=>I(i.billImageUri,"Bill Image"),onError:z=>{console.log("Bill image failed to load:",i.billImageUri),z.target.style.display="none"}}),n.jsx("div",{className:"image-overlay",children:n.jsx("button",{className:"view-full-btn",onClick:()=>I(i.billImageUri,"Bill Image"),children:"View Full Size"})})]}),i.billUploadedAt&&n.jsxs("div",{className:"image-date",children:["Uploaded: ",A(i.billUploadedAt)]})]})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[i.status==="submitted"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"btn btn-primary",onClick:()=>{B(i._id),d(!1)},children:[n.jsx(ra,{size:16}),"Approve"]}),n.jsxs("button",{className:"btn btn-outline",onClick:()=>{M(i._id),d(!1)},children:[n.jsx(ha,{size:16}),"Reject"]})]}),n.jsx("button",{className:"btn btn-outline",onClick:()=>d(!1),children:"Close"})]})]})}),y&&E&&n.jsx("div",{className:"image-viewer-overlay",onClick:R,children:n.jsxs("div",{className:"image-viewer-modal",onClick:z=>z.stopPropagation(),children:[n.jsxs("div",{className:"image-viewer-header",children:[n.jsx("h3",{children:E.type}),n.jsxs("div",{className:"image-viewer-controls",children:[n.jsx("button",{className:"control-btn",onClick:Q,title:"Zoom Out",children:n.jsx(dz,{size:20})}),n.jsxs("span",{className:"zoom-level",children:[Math.round(S*100),"%"]}),n.jsx("button",{className:"control-btn",onClick:W,title:"Zoom In",children:n.jsx(lz,{size:20})}),n.jsx("button",{className:"control-btn",onClick:ge,title:"Rotate",children:n.jsx($7,{size:20})}),n.jsx("button",{className:"control-btn close-btn",onClick:R,children:""})]})]}),n.jsx("div",{className:"image-viewer-content",children:n.jsx("img",{src:E.uri||"/placeholder.svg",alt:E.type,className:"viewer-image",style:{transform:`scale(${S}) rotate(${k}deg)`,transition:"transform 0.3s ease"},onError:z=>{console.error("Image failed to load:",E.uri),z.target.src="/placeholder.svg?height=400&width=400"}})})]})}),n.jsx("style",{jsx:!0,children:`
        .large-modal {
          width: 90%;
          max-width: 1200px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .submission-info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 30px;
        }

        .info-card {
          background: #f8f9fa;
          padding: 20px;
          border-radius: 8px;
          border: 1px solid #e9ecef;
        }

        .info-card h4 {
          margin: 0 0 15px 0;
          color: #333;
          font-size: 16px;
          font-weight: 600;
          border-bottom: 2px solid #007bff;
          padding-bottom: 8px;
        }

        .products-list {
          max-height: 200px;
          overflow-y: auto;
        }

        .product-item {
          padding: 10px 0;
          border-bottom: 1px solid #e9ecef;
        }

        .product-item:last-child {
          border-bottom: none;
        }

        .product-name {
          font-weight: 600;
          color: #333;
          margin-bottom: 4px;
        }

        .product-details {
          display: flex;
          justify-content: space-between;
          font-size: 14px;
          color: #666;
        }

        .product-total {
          font-weight: 600;
          color: #28a745;
        }

        .amount {
          font-weight: 700;
          color: #28a745;
          font-size: 18px;
        }

        .images-section {
          margin-top: 30px;
          padding-top: 20px;
          border-top: 2px solid #e9ecef;
        }

        .images-section h4 {
          margin: 0 0 20px 0;
          color: #333;
          font-size: 18px;
          font-weight: 600;
        }

        .images-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 25px;
        }

        .image-item {
          background: white;
          border: 1px solid #e9ecef;
          border-radius: 12px;
          overflow: hidden;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          transition: transform 0.2s, box-shadow 0.2s;
        }

        .image-item:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .image-header {
          padding: 15px;
          background: #f8f9fa;
          border-bottom: 1px solid #e9ecef;
        }

        .image-header h5 {
          margin: 0;
          color: #333;
          font-weight: 600;
          font-size: 16px;
        }

        .image-container {
          position: relative;
          height: 250px;
          overflow: hidden;
        }

        .modal-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
          cursor: pointer;
          transition: transform 0.3s;
        }

        .image-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0,0,0,0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 0;
          transition: opacity 0.3s;
        }

        .image-container:hover .image-overlay {
          opacity: 1;
        }

        .image-container:hover .modal-image {
          transform: scale(1.05);
        }

        .view-full-btn {
          background: #007bff;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 6px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s;
        }

        .view-full-btn:hover {
          background: #0056b3;
        }

        .image-date {
          padding: 10px 15px;
          font-size: 12px;
          color: #666;
          background: #f8f9fa;
          border-top: 1px solid #e9ecef;
        }

        /* Image Viewer Styles */
        .image-viewer-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.95);
          z-index: 10000;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .image-viewer-modal {
          width: 95%;
          height: 95%;
          background: white;
          border-radius: 12px;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .image-viewer-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 15px 20px;
          background: #f8f9fa;
          border-bottom: 1px solid #e9ecef;
        }

        .image-viewer-header h3 {
          margin: 0;
          color: #333;
          font-size: 18px;
          font-weight: 600;
        }

        .image-viewer-controls {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .control-btn {
          background: #007bff;
          color: white;
          border: none;
          padding: 8px 12px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          transition: background 0.2s;
          display: flex;
          align-items: center;
          gap: 5px;
        }

        .control-btn:hover {
          background: #0056b3;
        }

        .close-btn {
          background: #dc3545;
          font-size: 20px;
          font-weight: bold;
          padding: 8px 12px;
        }

        .close-btn:hover {
          background: #c82333;
        }

        .zoom-level {
          color: #666;
          font-size: 14px;
          font-weight: 600;
          min-width: 50px;
          text-align: center;
        }

        .image-viewer-content {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          background: #f8f9fa;
        }

        .viewer-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          cursor: grab;
        }

        .viewer-image:active {
          cursor: grabbing;
        }

        @media (max-width: 768px) {
          .large-modal {
            width: 95%;
            margin: 20px auto;
          }

          .submission-info-grid {
            grid-template-columns: 1fr;
          }

          .images-grid {
            grid-template-columns: 1fr;
          }

          .image-viewer-controls {
            flex-wrap: wrap;
            gap: 5px;
          }

          .control-btn {
            padding: 6px 10px;
            font-size: 12px;
          }
        }
      `})]})},Cae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(!0),[i,s]=N.useState(null),[l,d]=N.useState(!1),[u,f]=N.useState(""),[p,m]=N.useState(1),[x,v]=N.useState(1),[j,b]=N.useState(null),[y,C]=N.useState(null);N.useEffect(()=>{E()},[p,u]);const E=async()=>{try{a(!0);const B=new URLSearchParams({page:p,limit:10,search:u,status:"qr_uploaded"}),M=await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission?${B}`);if(!M.ok)throw new Error(`HTTP error! status: ${M.status}`);const L=await M.json();if(L.success){let A=[];Array.isArray(L.data)?A=L.data:Array.isArray(L.submissions)&&(A=L.submissions),t(A),v(L.totalPages||1)}else console.error("API returned error:",L.message),t([])}catch(B){console.error("Error fetching QR uploads:",B),t([]),v(1)}finally{a(!1)}},O=async(B,M,L)=>{try{C(L);const A=await fetch(B);if(!A.ok)throw new Error("Failed to fetch image");const U=await A.blob(),P=window.URL.createObjectURL(U),I=document.createElement("a");I.href=P,I.download=M,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(P)}catch(A){console.error("Error downloading image:",A),alert("Error downloading image. Please try again.")}finally{C(null)}},S=async(B,M)=>{try{b(B);const L=new FormData;L.append("paymentImage",M);const U=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${B}/upload-payment-image`,{method:"POST",body:L})).json();U.success?(E(),alert("Payment Successful! Payment image uploaded successfully!")):alert("Error uploading image: "+U.message)}catch(L){console.error("Error uploading image:",L),alert("Error uploading image")}finally{b(null)}},T=async B=>{try{const L=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${B}/complete`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();L.success?(E(),alert("Order marked as completed!")):alert("Error completing order: "+L.message)}catch(M){console.error("Error completing order:",M),alert("Error completing order")}},k=B=>{s(B),d(!0)},D=B=>new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=B=>B.paymentStatus==="successful"&&B.paymentImageUri?n.jsxs("span",{className:"payment-success-badge",children:[n.jsx(Bs,{size:16}),"Payment Successful"]}):n.jsx("span",{className:"payment-pending-badge",children:"Payment Pending"});return n.jsxs("div",{children:[n.jsx("div",{className:"page-header",children:n.jsx("h1",{children:"QR Code Uploads"})}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{className:"search-icon",size:20}),n.jsx("input",{type:"text",placeholder:"Search by user phone or submission ID...",className:"search-input",value:u,onChange:B=>f(B.target.value)})]})}),n.jsx("div",{className:"data-card",children:n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Submission ID"}),n.jsx("th",{children:"User Phone"}),n.jsx("th",{children:"User Name"}),n.jsx("th",{children:"Total Amount"}),n.jsx("th",{children:"QR Upload Date"}),n.jsx("th",{children:"QR Image"}),n.jsx("th",{children:"Payment Status"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},children:"Loading QR uploads..."})}):e.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},children:"No QR uploads found"})}):e.map(B=>{var M;return n.jsxs("tr",{children:[n.jsx("td",{children:B.submissionId}),n.jsx("td",{children:B.userPhone}),n.jsx("td",{children:((M=B.userId)==null?void 0:M.name)||"N/A"}),n.jsxs("td",{children:["",B.totalAmount]}),n.jsx("td",{children:D(B.updatedAt)}),n.jsx("td",{children:B.qrCodeUri?n.jsx("img",{src:`${B.qrCodeUri}`,alt:"QR Code",className:"thumbnail-image",style:{cursor:"pointer",maxWidth:"50px",maxHeight:"50px"},onClick:()=>window.open(`${B.qrCodeUri}`,"_blank")}):n.jsx("div",{className:"image-placeholder",children:"No QR"})}),n.jsx("td",{children:F(B)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>k(B),children:n.jsx(Xi,{size:14})}),!B.paymentImageUri&&n.jsxs("label",{className:"action-btn edit",style:{cursor:"pointer"},children:[n.jsx(Ro,{size:14}),n.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:L=>{L.target.files[0]&&S(B._id,L.target.files[0])},disabled:j===B._id})]}),B.paymentImageUri&&B.status!=="completed"&&n.jsx("button",{className:"action-btn view",onClick:()=>T(B._id),children:n.jsx(ra,{size:14})})]})})]},B._id)})})]})}),x>1&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",disabled:p===1,onClick:()=>m(p-1),children:"Previous"}),n.jsx("div",{className:"pagination-pages",children:Array.from({length:x},(B,M)=>M+1).map(B=>n.jsx("button",{className:`pagination-page ${p===B?"active":""}`,onClick:()=>m(B),children:B},B))}),n.jsx("button",{className:"pagination-btn",disabled:p===x,onClick:()=>m(p+1),children:"Next"})]}),l&&i&&n.jsx("div",{className:"modal-overlay",onClick:()=>d(!1),children:n.jsxs("div",{className:"modal",onClick:B=>B.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:"QR Upload Details"}),n.jsx("button",{className:"modal-close",onClick:()=>d(!1),children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"order-details",children:[n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"Submission ID:"}),n.jsxs("span",{className:"order-detail-value",children:["#",i.submissionId]})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"User Phone:"}),n.jsx("span",{className:"order-detail-value",children:i.userPhone})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"Total Amount:"}),n.jsxs("span",{className:"order-detail-value",children:["",i.totalAmount]})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"QR Upload Date:"}),n.jsx("span",{className:"order-detail-value",children:D(i.updatedAt)})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("span",{className:"order-detail-label",children:"Payment Status:"}),n.jsx("span",{className:"order-detail-value",children:F(i)})]})]}),i.qrCodeUri&&n.jsxs("div",{style:{marginTop:"20px"},children:[n.jsx("div",{className:"modal-image-header",children:n.jsx("h4",{children:"QR Code Image"})}),n.jsx("img",{src:`${i.qrCodeUri}`,alt:"QR Code",style:{maxWidth:"100%",height:"auto",borderRadius:"8px"}})]}),i.paymentImageUri&&n.jsxs("div",{style:{marginTop:"20px"},children:[n.jsxs("div",{className:"modal-image-header",children:[n.jsx("h4",{children:"Payment Image"}),n.jsx("button",{className:"download-btn-large",onClick:()=>O(`https://hotelvirat.com/api/v1/${i.paymentImageUri}`,`Payment_${i.submissionId}.jpg`,`modal_payment_${i._id}`),disabled:y===`modal_payment_${i._id}`,children:y===`modal_payment_${i._id}`?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"spinner"}),"Downloading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ca,{size:16}),"Download Payment"]})})]}),n.jsx("img",{src:`${i.paymentImageUri}`,alt:"Payment",style:{maxWidth:"100%",height:"auto",borderRadius:"8px"}}),n.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#d4edda",borderRadius:"5px",color:"#155724"},children:[n.jsx(Bs,{size:16,style:{marginRight:"8px"}}),"Payment Successful - Image uploaded on"," ",D(i.paymentUploadedAt||i.updatedAt)]})]}),n.jsxs("div",{className:"order-items-section",children:[n.jsx("h4",{children:"Products"}),n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Product Name"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Unit"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:i.products.map((B,M)=>n.jsxs("tr",{children:[n.jsx("td",{children:B.name}),n.jsxs("td",{children:["",B.price]}),n.jsx("td",{children:B.quantity}),n.jsx("td",{children:B.unit}),n.jsxs("td",{children:["",(B.price*B.quantity).toFixed(2)]})]},M))})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[!i.paymentImageUri&&n.jsxs("label",{className:"btn btn-primary",style:{cursor:"pointer"},children:[n.jsx(Ro,{size:16}),"Upload Payment Image",n.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:B=>{B.target.files[0]&&(S(i._id,B.target.files[0]),d(!1))}})]}),i.paymentImageUri&&i.status!=="completed"&&n.jsxs("button",{className:"btn btn-primary",onClick:()=>{T(i._id),d(!1)},children:[n.jsx(ra,{size:16}),"Mark as Completed"]}),n.jsx("button",{className:"btn btn-outline",onClick:()=>d(!1),children:"Close"})]})]})}),n.jsx("style",{jsx:!0,children:`
        .payment-success-badge {
          display: inline-flex;
          align-items: center;
          gap: 4px;
          background-color: #d4edda;
          color: #155724;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 600;
        }
        
        .payment-pending-badge {
          display: inline-flex;
          align-items: center;
          background-color: #fff3cd;
          color: #856404;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 600;
        }
        
        .thumbnail-image {
          border-radius: 4px;
          border: 1px solid #ddd;
        }
        
        .image-placeholder {
          padding: 8px;
          background-color: #f8f9fa;
          border-radius: 4px;
          text-align: center;
          font-size: 12px;
          color: #6c757d;
        }

        .download-btn-large {
          background: #ff8c00;
          color: white;
          border: none;
          border-radius: 6px;
          padding: 8px 12px;
          display: flex;
          align-items: center;
          gap: 6px;
          cursor: pointer;
          font-size: 14px;
          transition: all 0.2s ease;
          margin-bottom: 10px;
        }

        .download-btn-large:hover:not(:disabled) {
          background: #e67e00;
        }

        .download-btn-large:disabled {
          background: #6c757d;
          cursor: not-allowed;
        }

        .modal-image-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
        }

        .modal-image-header h4 {
          margin: 0;
        }

        .spinner {
          width: 12px;
          height: 12px;
          border: 2px solid #ffffff;
          border-top: 2px solid transparent;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},Aae=({user:e,onClose:t,onSave:r,isEditMode:a})=>{const[i,s]=N.useState({name:(e==null?void 0:e.name)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||""}),[l,d]=N.useState(null),[u,f]=N.useState(!1),p=x=>{const{name:v,value:j}=x.target;s({...i,[v]:j}),d(null)},m=async x=>{x.preventDefault(),d(null),f(!0);try{await r(i,e==null?void 0:e.phoneNumber),t()}catch(v){d(v.message||"Failed to save purchase user")}finally{f(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:a?"Edit Purchase User":"Add New Purchase User"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:m,children:[n.jsxs("div",{className:"modal-body",children:[l&&n.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:l}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:i.name,onChange:p,required:!0,disabled:u})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"phoneNumber",children:["Phone Number ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"phoneNumber",name:"phoneNumber",className:"form-input",value:i.phoneNumber,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit phone number",disabled:u})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":a?"Update Purchase User":"Add Purchase User"})]})]})]})})},Eae=({user:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),s=async()=>{i(!0);try{await r(e.phoneNumber),t()}catch(l){console.error("Error deleting purchase user:",l)}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Purchase User"}),n.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:s,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Oae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState(""),[i,s]=N.useState(!1),[l,d]=N.useState(null),[u,f]=N.useState(!1),[p,m]=N.useState(null),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState(!1),E="https://hotelvirat.com/api/v1/hotel/purchase-user-auth",O=async()=>{C(!0),b("");try{const L=await fetch(`${E}/all`);if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const A=await L.json();let U=[];if(A&&A.success&&Array.isArray(A.data))U=A.data;else if(A&&A.success&&Array.isArray(A.users))U=A.users;else if(Array.isArray(A))U=A;else if(A&&A.message&&A.message.includes("routes working"))console.log(" Server returning placeholder response:",A.message),U=[];else{console.error("Expected array but got:",A),t([]),b("Invalid data format received from server");return}t(U)}catch(L){console.error("Fetch error:",L),b(`Failed to fetch purchase users: ${L.message}`),t([])}finally{C(!1)}};N.useEffect(()=>{O()},[]);const S=()=>{d(null),s(!0)},T=L=>{d(L),s(!0)},k=L=>{m(L),f(!0)},D=async(L,A)=>{try{const U=A?`${E}/${A}`:`${E}/register`,P=A?"PUT":"POST",I=A?{name:L.name,...L.phoneNumber!==A&&{newPhoneNumber:L.phoneNumber}}:L,R=await fetch(U,{method:P,headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}),W=await R.json();if(!R.ok)throw new Error(W.message||"Failed to save purchase user");v(`Purchase user ${A?"updated":"added"} successfully`),setTimeout(()=>v(""),3e3),await O()}catch(U){throw new Error(U.message)}},F=async L=>{try{const A=await fetch(`${E}/${L}`,{method:"DELETE"}),U=await A.json();if(!A.ok)throw new Error(U.message||"Failed to delete purchase user");v("Purchase user deleted successfully"),setTimeout(()=>v(""),3e3),await O()}catch(A){b(A.message),setTimeout(()=>b(""),3e3)}},B=L=>{if(!L)return"N/A";const A={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(L).toLocaleDateString(void 0,A)},M=e.filter(L=>L.name.toLowerCase().includes(r.toLowerCase())||L.phoneNumber.includes(r));return n.jsxs("div",{className:"purchase-users-page",children:[x&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:x}),n.jsx("button",{onClick:()=>v(""),children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&n.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[n.jsx("span",{children:j}),n.jsx("button",{onClick:()=>b(""),style:{color:"#dc2626"},children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Purchase Users"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:S,disabled:y,children:[n.jsx(Ad,{size:16}),n.jsx("span",{children:"Add Purchase User"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search purchase users...",className:"search-input",value:r,onChange:L=>a(L.target.value)})]})}),n.jsx("div",{className:"data-card",children:y?n.jsx("div",{className:"empty-state",children:"Loading purchase users..."}):M.length===0?n.jsx("div",{className:"empty-state",children:n.jsxs("p",{children:["No purchase users found. ",r?"Try a different search.":"Add a new purchase user to get started."]})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"ID"}),n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Phone Number"}),n.jsx("th",{children:"Created At"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:M.map(L=>n.jsxs("tr",{children:[n.jsx("td",{children:L._id.slice(-6)}),n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{className:"user-avatar-placeholder",children:L.name.charAt(0).toUpperCase()}),L.name]})}),n.jsx("td",{children:n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(Ai,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),L.phoneNumber]})}),n.jsx("td",{children:B(L.createdAt)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>T(L),disabled:y,children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>k(L),disabled:y,children:n.jsx(La,{size:14})})]})})]},L._id))})]})}),i&&n.jsx(Aae,{user:l,onClose:()=>s(!1),onSave:D,isEditMode:!!l}),u&&n.jsx(Eae,{user:p,onClose:()=>f(!1),onConfirm:F})]})},LI=(e,t=200)=>`https://api.qrserver.com/v1/create-qr-code/?size=${t}x${t}&data=${encodeURIComponent(e)}`,ow={baseURL:"https://hotelvirat.com/api/v1/hotel",get:async e=>{try{const t=await fetch(`${ow.baseURL}${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error(`API Error for ${e}:`,t),t}}},OS="qr_table_codes",_ae=e=>{try{localStorage.setItem(OS,JSON.stringify({codes:e,timestamp:Date.now()}))}catch(t){console.error("Error saving QR codes to localStorage:",t)}},kae=()=>{try{const e=localStorage.getItem(OS);if(e){const t=JSON.parse(e);if(Date.now()-t.timestamp<24*60*60*1e3&&t.codes)return t.codes}}catch(e){console.error("Error loading QR codes from localStorage:",e)}return[]},Iae=()=>{try{localStorage.removeItem(OS)}catch(e){console.error("Error clearing QR codes from localStorage:",e)}},Dae=()=>{var L;const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState(""),[l,d]=N.useState([]),[u,f]=N.useState(!0),[p,m]=N.useState(!1),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState("all");N.useEffect(()=>{E(),O();const A=kae();A.length>0&&d(A)},[]),N.useEffect(()=>{l.length>0&&_ae(l)},[l]);const E=async()=>{try{f(!0),v("");const A=await ow.get("/branch");t(A),A.length>0&&s(A[0]._id)}catch(A){console.error("Error fetching branches:",A),v("Failed to load branches. Please check your internet connection.")}finally{f(!1)}},O=async()=>{try{const A=await ow.get("/table");let U=[];if(A.data&&A.data.success&&Array.isArray(A.data.data))U=A.data.data;else if(Array.isArray(A.data))U=A.data;else throw console.error(" Unexpected response format:",A.data),new Error("Invalid response format: tables array missing");const P=U.map(I=>{var R,W;return{id:I._id,number:I.number,status:I.status,branchId:((R=I.branchId)==null?void 0:R._id)||I.branchId,branchName:((W=I.branchId)==null?void 0:W.name)||"Unknown Branch",image:I.image,createdAt:new Date(I.createdAt).toLocaleString()}});a(P)}catch(A){console.error("Error fetching tables:",A),v("Failed to load tables.")}},S=async()=>{if(i){m(!0);try{const A=i==="all"?e:e.filter(P=>P._id===i),U=[];for(const P of A){if(l.filter(W=>W.branchId===P._id).length>0){console.log(`QR codes already exist for branch: ${P.name}`);continue}const R=r.filter(W=>W.branchId===P._id);if(R.length===0){const W=`${window.location.origin}/public-menu?branch=${P._id}&name=${encodeURIComponent(P.name)}&table=1`;U.push({id:`${P._id}-default`,branchId:P._id,branchName:P.name,tableNumber:1,url:W,qrCode:LI(W,300),generatedAt:new Date().toISOString()})}else R.forEach(W=>{const Q=`${window.location.origin}/public-menu?branch=${P._id}&name=${encodeURIComponent(P.name)}&table=${W.number}`;U.push({id:`${P._id}-${W.number}`,branchId:P._id,branchName:P.name,tableNumber:W.number,tableId:W.id,url:Q,qrCode:LI(Q,300),generatedAt:new Date().toISOString()})})}U.length>0&&d(P=>[...P,...U])}catch(A){console.error("Error generating QR codes:",A),v("Failed to generate QR codes.")}finally{m(!1)}}},T=()=>{window.confirm("Are you sure you want to clear all generated QR codes? This action cannot be undone.")&&(d([]),Iae())},k=async A=>{try{const P=await(await fetch(A.qrCode)).blob(),I=window.URL.createObjectURL(P),R=document.createElement("a");R.href=I,R.download=`${A.branchName.replace(/\s+/g,"-")}-table-${A.tableNumber}-qr.png`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(I)}catch(U){console.error("Error downloading QR code:",U),alert("Failed to download QR code. Please try again.")}},D=An(),F=A=>{try{const U=new URL(A.url),P=`${U.pathname}${U.search}`;D(P)}catch(U){console.error("Invalid URL in previewMenu:",U),alert("Failed to preview menu. Invalid URL.")}},B=l.filter(A=>{const U=!j||A.branchName.toLowerCase().includes(j.toLowerCase())||A.tableNumber.toString().includes(j),P=y==="all"||A.branchId===y;return U&&P}),M=e.filter(A=>l.some(U=>U.branchId===A._id));return u?n.jsx("div",{style:Zt.loadingContainer,children:n.jsxs("div",{style:Zt.loadingContent,children:[n.jsx("div",{style:Zt.spinner}),n.jsx("p",{children:"Loading branches..."})]})}):x&&!e.length?n.jsx("div",{style:Zt.errorContainer,children:n.jsxs("div",{style:Zt.errorContent,children:[n.jsx(Fs,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("h3",{children:"Error Loading Data"}),n.jsx("p",{children:x}),n.jsx("button",{onClick:E,style:Zt.retryButton,children:"Retry"})]})}):n.jsxs("div",{style:Zt.adminContainer,children:[n.jsxs("div",{style:Zt.adminContent,children:[n.jsxs("div",{style:Zt.adminHeader,children:[n.jsxs("div",{style:Zt.adminHeaderTitle,children:[n.jsx("div",{style:Zt.logoContainer,children:n.jsx(Fs,{size:24,color:"#ff7e47"})}),n.jsxs("div",{children:[n.jsx("h1",{style:Zt.adminTitle,children:"Table QR Menu Generator"}),n.jsx("p",{style:Zt.adminSubtitle,children:"Generate unique QR codes for each table"})]})]}),n.jsxs("div",{style:Zt.controlsContainer,children:[n.jsxs("div",{style:Zt.branchSelectContainer,children:[n.jsx("label",{style:Zt.label,children:"Select Branch"}),n.jsxs("select",{value:i,onChange:A=>s(A.target.value),style:Zt.branchSelect,children:[n.jsx("option",{value:"",children:"Choose a branch..."}),n.jsx("option",{value:"all",children:"All Branches"}),e.map(A=>n.jsx("option",{value:A._id,children:A.name},A._id))]})]}),n.jsxs("div",{style:Zt.buttonGroup,children:[n.jsxs("button",{onClick:S,disabled:p||!i,style:{...Zt.generateButton,opacity:p||!i?.7:1,cursor:p||!i?"not-allowed":"pointer"},children:[n.jsx(Fs,{size:16}),p?"Generating...":"Generate QR Codes"]}),l.length>0&&n.jsxs("button",{onClick:T,style:Zt.clearButton,children:[n.jsx(La,{size:16}),"Clear All"]})]})]})]}),l.length>0&&n.jsx("div",{style:Zt.statusCard,children:n.jsxs("div",{style:Zt.statusContent,children:[n.jsxs("div",{style:Zt.statusInfo,children:[n.jsx(Fs,{size:20,color:"#ff7e47"}),n.jsxs("span",{children:[n.jsx("strong",{children:l.length})," QR code",l.length!==1?"s":""," generated for tables",((L=l[0])==null?void 0:L.generatedAt)&&n.jsxs("span",{style:Zt.statusTime,children:["  Generated on ",new Date(l[0].generatedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),n.jsxs("div",{style:Zt.statusNote,children:["Branches with QR codes: ",M.map(A=>A.name).join(", ")]})]})}),l.length>0&&n.jsxs("div",{style:Zt.filtersBar,children:[n.jsxs("div",{style:Zt.searchContainer,children:[n.jsx(wr,{size:18,style:Zt.searchIcon}),n.jsx("input",{type:"text",placeholder:"Search QR codes...",style:Zt.searchInput,value:j,onChange:A=>b(A.target.value)})]}),n.jsx("div",{style:Zt.filterButtons,children:n.jsxs("select",{style:Zt.filterSelect,value:y,onChange:A=>C(A.target.value),children:[n.jsx("option",{value:"all",children:"All Branches"}),M.map(A=>n.jsx("option",{value:A._id,children:A.name},A._id))]})})]}),l.length>0&&n.jsx("div",{style:Zt.qrCodesGrid,children:B.map(A=>n.jsxs("div",{style:Zt.qrCodeCard,children:[n.jsxs("h3",{style:Zt.qrCodeTitle,children:[A.branchName," - Table ",A.tableNumber]}),n.jsx("div",{style:Zt.qrCodeImageContainer,children:n.jsx("img",{src:A.qrCode||"/placeholder.svg",alt:`QR Code for ${A.branchName} Table ${A.tableNumber}`,style:Zt.qrCodeImage})}),n.jsxs("div",{style:Zt.qrCodeActions,children:[n.jsxs("button",{onClick:()=>k(A),style:Zt.downloadButton,children:[n.jsx(Ca,{size:14}),"Download"]}),n.jsxs("button",{onClick:()=>F(A),style:Zt.previewButton,children:[n.jsx(Xi,{size:14}),"Preview"]})]}),n.jsx("div",{style:Zt.urlDisplay,children:A.url})]},A.id))}),n.jsxs("div",{style:Zt.instructionsCard,children:[n.jsx("h3",{style:Zt.instructionsTitle,children:"How to use:"}),n.jsxs("ol",{style:Zt.instructionsList,children:[n.jsx("li",{children:'Select a branch or choose "All Branches" to generate QR codes'}),n.jsx("li",{children:'Click "Generate QR Codes" to create unique QR codes for each table'}),n.jsx("li",{children:"QR codes are preserved when switching between branches - no need to regenerate"}),n.jsx("li",{children:"Each QR code will show the specific table number when scanned"}),n.jsx("li",{children:"Download the QR code images and print them"}),n.jsx("li",{children:"Place each QR code on its corresponding table"}),n.jsx("li",{children:"When customers scan the QR code, they'll see the menu with the table number displayed"}),n.jsx("li",{children:'Use "Preview" to see how the menu will look to customers'})]})]})]}),n.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},Zt={loadingContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa"},loadingContent:{textAlign:"center"},spinner:{width:"40px",height:"40px",border:"4px solid #ff7e47",borderTop:"4px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"},errorContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa"},errorContent:{textAlign:"center",padding:"40px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},retryButton:{padding:"12px 24px",backgroundColor:"#ff7e47",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",marginTop:"16px"},adminContainer:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Inter, sans-serif",padding:"24px"},adminContent:{maxWidth:"1200px",margin:"0 auto"},adminHeader:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},adminHeaderTitle:{display:"flex",alignItems:"center",marginBottom:"20px"},logoContainer:{width:"50px",height:"50px",backgroundColor:"rgba(255, 126, 71, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},adminTitle:{fontSize:"28px",fontWeight:"700",color:"#333",margin:0},adminSubtitle:{color:"#666",margin:0,fontSize:"16px"},controlsContainer:{display:"flex",gap:"16px",alignItems:"end",flexWrap:"wrap"},branchSelectContainer:{flex:"1",minWidth:"200px"},label:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},branchSelect:{width:"100%",padding:"12px 16px",border:"1px solid #e5e5e5",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},buttonGroup:{display:"flex",gap:"12px",alignItems:"center"},generateButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#ff7e47",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},clearButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},statusCard:{backgroundColor:"white",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 126, 71, 0.2)"},statusContent:{display:"flex",flexDirection:"column",gap:"8px"},statusInfo:{display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",color:"#333"},statusTime:{color:"#666",fontSize:"14px",fontWeight:"normal"},statusNote:{fontSize:"14px",color:"#666",fontStyle:"italic"},filtersBar:{display:"flex",gap:"16px",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",backgroundColor:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},searchContainer:{position:"relative",flex:"1",minWidth:"200px"},searchIcon:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af",pointerEvents:"none"},searchInput:{width:"100%",padding:"10px 10px 10px 40px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"},filterButtons:{display:"flex",gap:"12px"},filterSelect:{padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",backgroundColor:"white",minWidth:"120px"},qrCodesGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px",marginBottom:"24px"},qrCodeCard:{backgroundColor:"white",borderRadius:"12px",padding:"24px",textAlign:"center",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},qrCodeTitle:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",color:"#333"},qrCodeImageContainer:{marginBottom:"20px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"8px"},qrCodeImage:{width:"250px",height:"250px",border:"1px solid #e5e5e5",borderRadius:"8px"},qrCodeActions:{display:"flex",gap:"12px",justifyContent:"center",marginBottom:"16px"},downloadButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#ff7e47",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},previewButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"white",color:"#ff7e47",border:"1px solid #ff7e47",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},urlDisplay:{padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"6px",fontSize:"12px",color:"#666",wordBreak:"break-all"},instructionsCard:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",marginTop:"24px"},instructionsTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#333"},instructionsList:{color:"#666",lineHeight:"1.6",paddingLeft:"20px"}},zI=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState(""),[l,d]=N.useState(""),[u,f]=N.useState(!0),[p,m]=N.useState(""),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState(""),[E,O]=N.useState(""),[S,T]=N.useState(""),[k,D]=N.useState(""),[F,B]=N.useState(""),[M,L]=N.useState([]),[A,U]=N.useState(!1),[P,I]=N.useState(!1),[R,W]=N.useState(!1),[Q,ge]=N.useState(null),[q,Y]=N.useState({name:"",mobile:"",peopleCount:1}),[z,ee]=N.useState(!1),H={baseURL:"https://hotelvirat.com/api/v1/hotel",get:async X=>{try{const se=await fetch(`${H.baseURL}${X}`);if(!se.ok)throw new Error(`HTTP error! status: ${se.status}`);return await se.json()}catch(se){throw console.error(`API Error for ${X}:`,se),se}},post:async(X,se)=>{try{const J=await fetch(`${H.baseURL}${X}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!J.ok)throw new Error(`HTTP error! status: ${J.status}`);return await J.json()}catch(J){throw console.error(`API Error for ${X}:`,J),J}}},re=async(X,se)=>{try{console.log("Checking table status for branch:",X,"table:",se);const J=await H.get(`/table?branchId=${X}`);let Ne=[];if(J.data&&J.data.success&&Array.isArray(J.data.data))Ne=J.data.data;else if(Array.isArray(J.data))Ne=J.data;else{console.error(" Unexpected response format:",J.data);return}const Ge=Ne.find(tt=>tt.number.toString()===se.toString());if(Ge){if(console.log("Found table:",Ge),T(Ge._id),O(Ge.status),Ge.categoryId){const tt=typeof Ge.categoryId=="object"?Ge.categoryId._id:Ge.categoryId,$e=typeof Ge.categoryId=="object"?Ge.categoryId.name:"";D(tt),B($e),console.log("Table category:",tt,$e)}return{status:Ge.status,categoryId:Ge.categoryId}}else return console.log("Table not found, assuming available"),O("available"),{status:"available",categoryId:null}}catch(J){return console.error("Error checking table status:",J),O("available"),{status:"available",categoryId:null}}},le=X=>typeof X.categoryId=="object"&&X.categoryId!==null?X.categoryId._id||X.categoryId.id:X.categoryId,pe=X=>{if(typeof X.categoryId=="object"&&X.categoryId!==null)return X.categoryId.name||"Unknown Category";const se=X.categoryId,J=r.find(Ne=>Ne._id===se);return J?J.name:"Unknown Category"},Se=X=>{if(E==="reserved"){alert("This table is currently reserved. Please contact staff for assistance.");return}L(se=>se.find(Ne=>Ne._id===X._id)?se.map(Ne=>Ne._id===X._id?{...Ne,quantity:Ne.quantity+1}:Ne):[...se,{...X,quantity:1}])},K=X=>{L(se=>{const J=se.find(Ne=>Ne._id===X);return J&&J.quantity>1?se.map(Ne=>Ne._id===X?{...Ne,quantity:Ne.quantity-1}:Ne):se.filter(Ne=>Ne._id!==X)})},ue=()=>M.reduce((X,se)=>X+se.quantity,0),ye=()=>{const X=M.reduce((se,J)=>se+(J.price||0)*(J.quantity||0),0);return isNaN(X)?0:X},fe=X=>{const se=M.find(J=>J._id===X);return se?se.quantity:0},Xe=X=>{const se=document.createElement("canvas");return se.width=X.width,se.height=X.height,se.getContext("2d").drawImage(X,0,0),se.toDataURL("image/jpeg")},Ce=X=>{const se=window.open("","_blank"),J=new Image;J.crossOrigin="anonymous",J.onload=()=>{var tt;let Ne="";try{Ne=Xe(J)}catch($e){console.warn("Could not convert logo to base64:",$e)}const Ge=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${X.orderId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .logo { width: 80px; height: 80px; margin: 0 auto 15px; border-radius: 8px; display: block; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin: 10px 0; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${Ne?`<img src="${Ne}" alt="Hotel Virat Logo" class="logo">`:""}
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${X.branchName}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${X.orderId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${X.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${X.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${new Date(X.orderTime).toLocaleDateString("en-IN")}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${new Date(X.orderTime).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${X.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${X.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${X.customerName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${X.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${X.branchName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${X.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order Type:</span>
                <span class="detail-value">GUEST ORDER</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((tt=X.items)==null?void 0:tt.map($e=>`
                  <tr>
                    <td>${$e.name}</td>
                    <td style="text-align: center;">${$e.quantity}</td>
                    <td style="text-align: right;">${($e.price||0).toFixed(2)}</td>
                    <td style="text-align: right;">${(($e.price||0)*$e.quantity).toFixed(2)}</td>
                  </tr>
                `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${(X.subtotal||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${(X.tax||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${(X.serviceCharge||0).toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${(X.grandTotal||0).toFixed(2)}</span>
            </div>
          </div>

          ${X.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${X.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;se.document.write(Ge),se.document.close(),se.focus(),setTimeout(()=>{se.print()},500)},J.onerror=()=>{var Ge;console.warn("Could not load logo image, generating PDF without logo");const Ne=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${X.orderId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin-bottom: 10px; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${X.branchName}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${X.orderId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${X.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${X.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${new Date(X.orderTime).toLocaleDateString("en-IN")}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${new Date(X.orderTime).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${X.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${X.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${X.customerName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${X.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${X.branchName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${X.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order Type:</span>
                <span class="detail-value">GUEST ORDER</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ge=X.items)==null?void 0:Ge.map(tt=>`
                  <tr>
                    <td>${tt.name}</td>
                    <td style="text-align: center;">${tt.quantity}</td>
                    <td style="text-align: right;">${(tt.price||0).toFixed(2)}</td>
                    <td style="text-align: right;">${((tt.price||0)*tt.quantity).toFixed(2)}</td>
                  </tr>
                `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${(X.subtotal||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${(X.tax||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${(X.serviceCharge||0).toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${(X.grandTotal||0).toFixed(2)}</span>
            </div>
          </div>

          ${X.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${X.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;se.document.write(Ne),se.document.close(),se.focus(),setTimeout(()=>{se.print()},500)},J.src=Ml},Le=X=>{var Ne,Ge,tt,$e,Ze,Oe;const se=window.open("","_blank","width=302,height=600"),J=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Order ${X.orderId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .order-info { margin-bottom: 10px; }
          .order-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${X.branchName||j}</div>
        </div>
        
        <div class="order-id">Order #${X.orderId}</div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${new Date().toLocaleDateString("en-IN")}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Time:</span>
            <span>${new Date().toLocaleTimeString("en-IN")}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Table:</span>
            <span>${X.tableNumber||y}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Guests:</span>
            <span>${X.peopleCount}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Customer:</span>
            <span>${X.customerName}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${X.customerMobile}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${((Ne=X.items)==null?void 0:Ne.map(Qe=>`
            <div class="item-row">
              <div class="item-name">${Qe.name}</div>
              <div class="item-details">
                <span>${Qe.quantity} x ${(Qe.price||0).toFixed(2)}</span>
                <span>${((Qe.price||0)*Qe.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((Ge=X.subtotal)==null?void 0:Ge.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax (5%):</span>
            <span>${((tt=X.tax)==null?void 0:tt.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service (10%):</span>
            <span>${(($e=X.serviceCharge)==null?void 0:$e.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${((Ze=X.grandTotal)==null?void 0:Ze.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Payment:</span>
            <span>${((Oe=X.paymentMethod)==null?void 0:Oe.toUpperCase())||"CASH"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;se.document.write(J),se.document.close(),se.focus(),setTimeout(()=>{se.print()},300)},ne=async()=>{if(E==="reserved"){alert("This table is currently reserved. Please contact staff for assistance.");return}if(!q.name.trim()||!q.mobile.trim()){alert("Please fill in your name and mobile number");return}if(q.mobile.length!==10){alert("Please enter a valid 10-digit mobile number");return}if(M.length===0){alert("Your cart is empty");return}ee(!0);try{const X=ye(),se=X*.05,J=X*.1,Ne=X+se+J,Ge={customerName:q.name.trim(),customerMobile:q.mobile.trim(),branchId:x,branchName:j,categoryId:k||null,categoryName:F||"",tableId:S||null,tableNumber:y,peopleCount:Number.parseInt(q.peopleCount),items:M.map($e=>({menuItemId:$e._id,name:$e.name,price:$e.price,quantity:$e.quantity,image:$e.image||"",description:$e.description||"",categoryId:$e.categoryId||k||null})),subtotal:X,tax:se,serviceCharge:J,totalAmount:X,grandTotal:Ne,paymentMethod:"cash",orderTime:new Date().toISOString(),notes:`Guest order from Table ${y}${F?` - ${F}`:""}`,isGuestOrder:!0};console.log("Placing guest order:",Ge);const tt=await H.post("/staff-order/create-guest-order-no-stock",Ge);if(tt.success)ge(Ge),W(!0),L([]),I(!1),U(!1),Y({name:"",mobile:"",peopleCount:1}),setTimeout(()=>{W(!1),ge(null)},1e4);else throw new Error(tt.message||"Failed to place order")}catch(X){console.error("Error placing order:",X),alert("Failed to place order. Please try again.")}finally{ee(!1)}},Ae=()=>{Q&&Ce(Q)},Ve=()=>{Q&&Le(Q)},te=e.filter(X=>{const se=!i||i===""||le(X)===i,J=!l||X.name.toLowerCase().includes(l.toLowerCase())||X.description&&X.description.toLowerCase().includes(l.toLowerCase());return se&&J});N.useEffect(()=>{const X=new URLSearchParams(window.location.search),se=X.get("branch"),J=X.get("name"),Ne=X.get("table"),Ge=X.get("category"),tt=X.get("categoryName");se&&Ne?(v(se),b(decodeURIComponent(J||"")),C(Ne),re(se,Ne).then($e=>{console.log("Table status:",$e.status);let Ze=Ge;!Ze&&$e.categoryId&&(Ze=typeof $e.categoryId=="object"?$e.categoryId._id:$e.categoryId),tt&&B(decodeURIComponent(tt)),ce(se,Ze)})):(m("Invalid QR code - missing branch or table information"),f(!1))},[]);const ce=async(X,se=null)=>{try{f(!0),m("");const[J,Ne]=await Promise.all([H.get(`/menu?branchId=${X}`),H.get(`/category?branchId=${X}`)]),Ge=Oe=>{if(Oe.price&&typeof Oe.price=="number")return Oe.price;if(Oe.prices&&typeof Oe.prices=="object"){const Qe=Object.values(Oe.prices);if(Qe.length>0){const ht=parseFloat(Qe[0]);if(!isNaN(ht))return ht}}return 0};let tt=J.filter(Oe=>Oe.isActive!==!1).map(Oe=>({...Oe,price:Ge(Oe)}));if(se){console.log("Filtering products by table category:",se),tt=tt.filter(Qe=>(typeof Qe.categoryId=="object"&&Qe.categoryId!==null?Qe.categoryId._id||Qe.categoryId.id:Qe.categoryId)===se);const Oe=Ne.find(Qe=>Qe._id===se);Oe&&B(Oe.name)}const $e=[...new Set(tt.map(Oe=>typeof Oe.categoryId=="object"&&Oe.categoryId!==null?Oe.categoryId._id||Oe.categoryId.id:Oe.categoryId).filter(Boolean))],Ze=Ne.filter(Oe=>$e.includes(Oe._id));t(tt),a(Ze),tt.length===0&&m(se?"No menu items found for this category. Please contact staff.":"No menu items available for this branch.")}catch(J){console.error("Error fetching menu:",J),m("Failed to load menu. Please try again.")}finally{f(!1)}};return u?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"loading-screen",children:n.jsxs("div",{className:"loading-content",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Loading menu..."})]})}),n.jsx("style",{jsx:!0,children:`
          .loading-screen {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9fafb;
          }
          .loading-content {
            text-align: center;
          }
          .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f97316;
            border-top: 3px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
          }
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]}):p?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"error-screen",children:n.jsxs("div",{className:"error-content",children:[n.jsx(Fs,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("h3",{children:"Oops! Something went wrong"}),n.jsx("p",{children:p}),n.jsx("button",{onClick:()=>ce(x,k),className:"retry-btn",children:"Try Again"})]})}),n.jsx("style",{jsx:!0,children:`
          .error-screen {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9fafb;
            padding: 20px;
          }
          .error-content {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
          }
          .retry-btn {
            background: #f97316;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 16px;
            font-size: 14px;
            font-weight: 500;
          }
          .retry-btn:hover {
            background: #ea580c;
          }
        `})]}):E==="reserved"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"reserved-screen",children:n.jsxs("div",{className:"reserved-content",children:[n.jsx(fr,{size:64,color:"#f59e0b",style:{marginBottom:"24px"}}),n.jsx("h2",{children:"Table Currently Reserved"}),n.jsxs("p",{children:["Table ",y," at ",j," is currently reserved."]}),n.jsx("p",{children:"Please contact our staff for assistance or try scanning a different table's QR code."}),n.jsxs("div",{className:"contact-info",children:[n.jsx("p",{children:n.jsx("strong",{children:"Need Help?"})}),n.jsx("p",{children:"Please approach our staff members who will be happy to assist you with seating and ordering."})]})]})}),n.jsx("style",{jsx:!0,children:`
          .reserved-screen {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9fafb;
            padding: 20px;
          }
          .reserved-content {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            border: 2px solid #f59e0b;
          }
          .reserved-content h2 {
            color: #f59e0b;
            margin-bottom: 16px;
            font-size: 24px;
          }
          .reserved-content p {
            color: #666;
            margin-bottom: 12px;
            line-height: 1.5;
          }
          .contact-info {
            margin-top: 24px;
            padding: 20px;
            background: #fef3c7;
            border-radius: 8px;
            border: 1px solid #f59e0b;
          }
          .contact-info p {
            margin-bottom: 8px;
          }
          .contact-info p:last-child {
            margin-bottom: 0;
          }
        `})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"menu-app",children:[R&&n.jsx("div",{className:"success-overlay",children:n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:48,color:"#10b981"}),n.jsx("h3",{children:"Order Placed Successfully!"}),Q&&n.jsxs("div",{className:"invoice-section",children:[n.jsx("p",{className:"invoice-text",children:"Print receipt or download invoice:"}),n.jsxs("div",{className:"invoice-buttons",children:[n.jsxs("button",{className:"print-receipt-btn",onClick:Ve,children:[n.jsx(wi,{size:20}),"Print Receipt"]}),n.jsxs("button",{className:"download-invoice-btn",onClick:Ae,children:[n.jsx(Ca,{size:20}),"Download PDF"]})]})]}),n.jsx("button",{className:"close-success-btn",onClick:()=>{W(!1),ge(null)},children:"Close"})]})}),n.jsx("header",{className:"header",children:n.jsxs("div",{className:"header-container",children:[n.jsxs("div",{className:"restaurant-info",children:[n.jsx("div",{className:"logo",children:n.jsx(Fs,{size:20})}),n.jsxs("div",{className:"restaurant-details",children:[n.jsx("h1",{className:"restaurant-name",children:j||"Restaurant"}),n.jsxs("p",{className:"restaurant-tagline",children:["Table ",y,F&&`  ${F}`,"  ","Delicious food, delivered fresh",E&&n.jsxs("span",{className:`table-status ${E}`,children:["  ",E==="available"?"Available":"Reserved"]})]})]})]}),n.jsxs("div",{className:"search-section",children:[n.jsxs("div",{className:"search-box",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search menu items...",value:l,onChange:X=>d(X.target.value),className:"search-input"})]}),n.jsxs("select",{value:i,onChange:X=>s(X.target.value),className:"category-dropdown",children:[n.jsx("option",{value:"",children:"All Categories"}),r.map(X=>n.jsx("option",{value:X._id,children:X.name},X._id))]})]})]})}),M.length>0&&E==="available"&&n.jsxs("button",{className:"floating-cart",onClick:()=>U(!0),children:[n.jsx(om,{size:24}),n.jsx("span",{className:"cart-count",children:ue()})]}),n.jsx("main",{className:"main-content",children:n.jsxs("div",{className:"content-container",children:[n.jsx("div",{className:"table-info-banner",children:n.jsxs("div",{className:"table-info-content",children:[n.jsx(Fs,{size:24,color:"#ff7e47"}),n.jsxs("div",{className:"table-info-text",children:[n.jsxs("h3",{className:"table-info-title",children:["Table ",y]}),n.jsxs("p",{className:"table-info-subtitle",children:[j,E&&n.jsx("span",{className:`status-badge ${E}`,children:E==="available"?"Available":"Reserved"})]})]})]})}),n.jsx("div",{className:"results-info",children:n.jsxs("p",{children:[te.length," item",te.length!==1?"s":""," found",i&&r.find(X=>X._id===i)&&` in ${r.find(X=>X._id===i).name}`,l&&` for "${l}"`]})}),te.length>0?n.jsx("div",{className:"menu-grid",children:te.map(X=>n.jsxs("div",{className:"menu-card",children:[n.jsx("div",{className:"card-image",children:n.jsx("img",{src:X.image||"/placeholder.svg",alt:X.name,onError:se=>{se.target.src="/placeholder.svg?height=200&width=300"}})}),n.jsxs("div",{className:"card-content",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{className:"product-name",children:X.name}),n.jsxs("span",{className:"product-price",children:["",(X.price||0).toFixed(2)]})]}),n.jsx("div",{className:"category-tag",children:pe(X)}),X.description&&n.jsx("p",{className:"product-description",children:X.description}),E==="available"&&n.jsx("div",{className:"cart-controls",children:fe(X._id)===0?n.jsxs("button",{className:"add-to-cart-btn",onClick:()=>Se(X),children:[n.jsx(Ni,{size:16}),"Add to Cart"]}):n.jsxs("div",{className:"quantity-controls",children:[n.jsx("button",{className:"quantity-btn",onClick:()=>K(X._id),children:n.jsx(MA,{size:16})}),n.jsx("span",{className:"quantity",children:fe(X._id)}),n.jsx("button",{className:"quantity-btn",onClick:()=>Se(X),children:n.jsx(Ni,{size:16})})]})}),E==="reserved"&&n.jsxs("div",{className:"reserved-message",children:[n.jsx(fr,{size:16}),n.jsx("span",{children:"Table Reserved - Contact Staff"})]})]})]},X._id))}):n.jsxs("div",{className:"empty-state",children:[n.jsx(Fs,{size:48,style:{opacity:.3,marginBottom:"16px"}}),n.jsx("h3",{children:"No items found"}),n.jsx("p",{children:l||i?"Try adjusting your search or filter criteria":"No menu items available for this branch"}),(l||i)&&n.jsx("button",{onClick:()=>{d(""),s("")},className:"clear-filters",children:"Clear Filters"})]})]})}),A&&E==="available"&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"cart-modal",children:[n.jsxs("div",{className:"cart-header",children:[n.jsx("h3",{children:"Your Order"}),n.jsx("button",{className:"close-btn",onClick:()=>U(!1),children:n.jsx(ha,{size:24})})]}),n.jsx("div",{className:"cart-content",children:M.length===0?n.jsxs("div",{className:"empty-cart",children:[n.jsx(om,{size:48,style:{opacity:.3}}),n.jsx("p",{children:"Your cart is empty"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"cart-items",children:M.map(X=>n.jsxs("div",{className:"cart-item",children:[n.jsx("img",{src:X.image||"/placeholder.svg",alt:X.name,className:"cart-item-image"}),n.jsxs("div",{className:"cart-item-details",children:[n.jsx("h4",{children:X.name}),n.jsxs("p",{children:["",(X.price||0).toFixed(2)," each"]})]}),n.jsxs("div",{className:"cart-item-controls",children:[n.jsx("button",{onClick:()=>K(X._id),children:n.jsx(MA,{size:16})}),n.jsx("span",{children:X.quantity}),n.jsx("button",{onClick:()=>Se(X),children:n.jsx(Ni,{size:16})})]}),n.jsxs("div",{className:"cart-item-total",children:["",((X.price||0)*X.quantity).toFixed(2)]})]},X._id))}),n.jsxs("div",{className:"cart-summary",children:[n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["",ye().toFixed(2)]})]}),n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Tax (5%):"}),n.jsxs("span",{children:["",(ye()*.05).toFixed(2)]})]}),n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Service Charge (10%):"}),n.jsxs("span",{children:["",(ye()*.1).toFixed(2)]})]}),n.jsxs("div",{className:"summary-row total",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["",(ye()*1.15).toFixed(2)]})]})]})]})}),M.length>0&&n.jsx("div",{className:"cart-footer",children:n.jsx("button",{className:"checkout-btn",onClick:()=>{U(!1),I(!0)},children:"Proceed to Checkout"})})]})}),P&&E==="available"&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"checkout-modal",children:[n.jsxs("div",{className:"checkout-header",children:[n.jsx("h3",{children:"Order Details"}),n.jsx("button",{className:"close-btn",onClick:()=>I(!1),children:n.jsx(ha,{size:24})})]}),n.jsxs("div",{className:"checkout-content",children:[n.jsxs("div",{className:"customer-details",children:[n.jsx("h4",{children:"Customer Information"}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:[n.jsx(Ol,{size:16}),"Full Name *"]}),n.jsx("input",{type:"text",value:q.name,onChange:X=>Y({...q,name:X.target.value}),placeholder:"Enter your full name",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:[n.jsx(Ai,{size:16}),"Mobile Number *"]}),n.jsx("input",{type:"tel",value:q.mobile,onChange:X=>Y({...q,mobile:X.target.value}),placeholder:"Enter 10-digit mobile number",maxLength:"10",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{children:[n.jsx(Ls,{size:16}),"Number of People"]}),n.jsx("select",{value:q.peopleCount,onChange:X=>Y({...q,peopleCount:X.target.value}),children:[1,2,3,4,5,6,7,8,9,10].map(X=>n.jsx("option",{value:X,children:X},X))})]})]}),n.jsxs("div",{className:"order-summary",children:[n.jsx("h4",{children:"Order Summary"}),n.jsx("div",{className:"summary-items",children:M.map(X=>n.jsxs("div",{className:"summary-item",children:[n.jsxs("span",{children:[X.name," x ",X.quantity]}),n.jsxs("span",{children:["",((X.price||0)*X.quantity).toFixed(2)]})]},X._id))}),n.jsxs("div",{className:"summary-totals",children:[n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["",ye().toFixed(2)]})]}),n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Tax (5%):"}),n.jsxs("span",{children:["",(ye()*.05).toFixed(2)]})]}),n.jsxs("div",{className:"summary-row",children:[n.jsx("span",{children:"Service Charge (10%):"}),n.jsxs("span",{children:["",(ye()*.1).toFixed(2)]})]}),n.jsxs("div",{className:"summary-row total",children:[n.jsx("span",{children:"Total Amount:"}),n.jsxs("span",{children:["",(ye()*1.15).toFixed(2)]})]})]})]}),n.jsx("div",{className:"payment-info",children:n.jsxs("div",{className:"payment-method",children:[n.jsx(Na,{size:16}),n.jsx("span",{children:"Payment: Cash (Pay at table)"})]})})]}),n.jsx("div",{className:"checkout-footer",children:n.jsx("button",{className:"place-order-btn",onClick:ne,disabled:z||!q.name.trim()||!q.mobile.trim(),children:z?"Placing Order...":"Place Order"})})]})})]}),n.jsx("style",{jsx:!0,global:!0,children:`
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        html,
        body {
          height: 100%;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background: #f9fafb;
          overflow-x: hidden;
        }

        .menu-app {
          display: flex;
          flex-direction: column;
          height: 100vh;
          position: relative;
        }

        /* Success Overlay */
        .success-overlay {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          width: 100vw !important;
          height: 100vh !important;
          background: rgba(0, 0, 0, 0.8) !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          z-index: 9999 !important;
          padding: 20px !important;
          box-sizing: border-box !important;
        }

        .success-message {
          position: relative !important;
          background: white !important;
          padding: 40px !important;
          border-radius: 16px !important;
          text-align: center !important;
          width: 100% !important;
          max-width: 420px !important;
          min-width: 300px !important;
          margin: 0 auto !important;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
          border: 2px solid #10b981 !important;
          transform: scale(1) !important;
          animation: successSlideIn 0.3s ease-out !important;
        }

        @keyframes successSlideIn {
          0% {
            opacity: 0;
            transform: scale(0.9) translateY(-20px);
          }
          100% {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }

        .success-message h3 {
          color: #10b981 !important;
          margin: 16px 0 8px !important;
          font-size: 24px !important;
          font-weight: 700 !important;
        }

        .success-message p {
          color: #666 !important;
          line-height: 1.5 !important;
          margin-bottom: 20px !important;
          font-size: 16px !important;
        }

        .invoice-section {
          margin: 20px 0 !important;
          padding: 20px !important;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%) !important;
          border-radius: 12px !important;
          border: 1px solid #e9ecef !important;
        }

        .invoice-text {
          color: #495057 !important;
          font-size: 14px !important;
          margin-bottom: 12px !important;
          font-weight: 500 !important;
        }

        .invoice-buttons {
          display: flex !important;
          gap: 10px !important;
          width: 100% !important;
        }

        .print-receipt-btn {
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          gap: 8px !important;
          flex: 1 !important;
          padding: 14px 16px !important;
          background: linear-gradient(135deg, #059669 0%, #047857 100%) !important;
          color: white !important;
          border: none !important;
          border-radius: 10px !important;
          font-size: 14px !important;
          font-weight: 600 !important;
          cursor: pointer !important;
          transition: all 0.2s ease !important;
          box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3) !important;
        }

        .print-receipt-btn:hover {
          background: linear-gradient(135deg, #047857 0%, #065f46 100%) !important;
          transform: translateY(-1px) !important;
          box-shadow: 0 6px 16px rgba(5, 150, 105, 0.4) !important;
        }

        .download-invoice-btn {
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          gap: 8px !important;
          flex: 1 !important;
          padding: 14px 16px !important;
          background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important;
          color: white !important;
          border: none !important;
          border-radius: 10px !important;
          font-size: 14px !important;
          font-weight: 600 !important;
          cursor: pointer !important;
          transition: all 0.2s ease !important;
          box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3) !important;
        }

        .download-invoice-btn:hover {
          background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%) !important;
          transform: translateY(-1px) !important;
          box-shadow: 0 6px 16px rgba(249, 115, 22, 0.4) !important;
        }

        .close-success-btn {
          margin-top: 20px !important;
          padding: 12px 24px !important;
          background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%) !important;
          color: white !important;
          border: none !important;
          border-radius: 8px !important;
          cursor: pointer !important;
          font-size: 14px !important;
          font-weight: 500 !important;
          transition: all 0.2s ease !important;
        }

        .close-success-btn:hover {
          background: linear-gradient(135deg, #4b5563 0%, #374151 100%) !important;
          transform: translateY(-1px) !important;
        }

        /* Mobile Responsive for Success Message */
        @media (max-width: 640px) {
          .success-overlay {
            padding: 15px !important;
          }
          
          .success-message {
            padding: 30px 20px !important;
            max-width: 95vw !important;
            min-width: 280px !important;
          }
          
          .success-message h3 {
            font-size: 20px !important;
          }
          
          .success-message p {
            font-size: 14px !important;
          }
          
          .download-invoice-btn {
            padding: 12px 16px !important;
            font-size: 13px !important;
          }
        }

        /* Tablet Responsive for Success Message */
        @media (min-width: 641px) and (max-width: 1024px) {
          .success-message {
            max-width: 400px !important;
            padding: 35px !important;
          }
        }

        /* Header - Fixed */
        .header {
          background: white;
          border-bottom: 1px solid #e5e7eb;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          flex-shrink: 0;
          z-index: 10;
        }

        .header-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
        }

        .restaurant-info {
          display: flex;
          align-items: center;
          margin-bottom: 20px;
        }

        .logo {
          width: 40px;
          height: 40px;
          background: rgba(249, 115, 22, 0.1);
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 12px;
          color: #f97316;
        }

        .restaurant-name {
          font-size: 24px;
          font-weight: 700;
          color: #111827;
          margin-bottom: 4px;
        }

        .restaurant-tagline {
          color: #6b7280;
          font-size: 14px;
        }

        /* NEW: Table status styling */
        .table-status.available {
          color: #10b981;
          font-weight: 600;
        }

        .table-status.reserved {
          color: #f59e0b;
          font-weight: 600;
        }

        .status-badge {
          display: inline-block;
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 600;
          margin-left: 8px;
        }

        .status-badge.available {
          background: rgba(16, 185, 129, 0.1);
          color: #10b981;
        }

        .status-badge.reserved {
          background: rgba(245, 158, 11, 0.1);
          color: #f59e0b;
        }

        .search-section {
          display: flex;
          gap: 16px;
          align-items: center;
        }

        .search-box {
          position: relative;
          flex: 1;
        }

        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #9ca3af;
          pointer-events: none;
        }

        .search-input {
          width: 100%;
          padding: 12px 12px 12px 40px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          outline: none;
          background: white;
        }

        .search-input:focus {
          border-color: #f97316;
          box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        .category-dropdown {
          padding: 12px 16px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          background: white;
          min-width: 150px;
          outline: none;
          cursor: pointer;
        }

        .category-dropdown:focus {
          border-color: #f97316;
          box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        /* Floating Cart Button */
        .floating-cart {
          position: fixed;
          bottom: 20px;
          right: 20px;
          width: 60px;
          height: 60px;
          background: #f97316;
          color: white;
          border: none;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
          cursor: pointer;
          z-index: 100;
          transition: transform 0.2s ease;
        }

        .floating-cart:hover {
          transform: scale(1.1);
        }

        .cart-count {
          position: absolute;
          top: -5px;
          right: -5px;
          background: #dc2626;
          color: white;
          border-radius: 50%;
          width: 24px;
          height: 24px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
        }

        /* Main Content - Scrollable */
        .main-content {
          flex: 1;
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
        }

        .content-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
        }

        /* Table Info Banner */
        .table-info-banner {
          background: rgba(255, 126, 71, 0.1);
          border: 1px solid rgba(255, 126, 71, 0.2);
          border-radius: 12px;
          padding: 16px 20px;
          margin-bottom: 24px;
        }

        .table-info-content {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .table-info-text {
          display: flex;
          flex-direction: column;
        }

        .table-info-title {
          font-size: 18px;
          font-weight: 600;
          color: #ff7e47;
          margin: 0;
        }

        .table-info-subtitle {
          font-size: 14px;
          color: #666;
          margin: 0;
        }

        .results-info {
          text-align: center;
          margin-bottom: 30px;
          color: #6b7280;
          font-size: 14px;
          font-weight: 500;
        }

        /* Menu Grid */
        .menu-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
          gap: 20px;
          margin-bottom: 40px;
        }

        .menu-card {
          background: white;
          border-radius: 12px;
          overflow: hidden;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .menu-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .card-image {
          width: 100%;
          height: 200px;
          overflow: hidden;
        }

        .card-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: transform 0.3s ease;
        }

        .menu-card:hover .card-image img {
          transform: scale(1.05);
        }

        .card-content {
          padding: 16px;
        }

        .card-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          margin-bottom: 8px;
          gap: 10px;
        }

        .product-name {
          font-size: 16px;
          font-weight: 600;
          color: #111827;
          flex: 1;
          line-height: 1.3;
        }

        .product-price {
          font-size: 16px;
          font-weight: 700;
          color: #f97316;
          flex-shrink: 0;
        }

        .category-tag {
          display: inline-block;
          background: rgba(249, 115, 22, 0.1);
          color: #f97316;
          font-size: 11px;
          padding: 4px 8px;
          border-radius: 12px;
          font-weight: 500;
          margin-bottom: 8px;
        }

        .product-description {
          font-size: 13px;
          color: #6b7280;
          line-height: 1.4;
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
          margin-bottom: 12px;
        }

        /* Cart Controls */
        .cart-controls {
          margin-top: 12px;
        }

        .add-to-cart-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          width: 100%;
          padding: 10px;
          background: #f97316;
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          transition: background 0.2s ease;
        }

        .add-to-cart-btn:hover {
          background: #ea580c;
        }

        .quantity-controls {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 12px;
        }

        .quantity-btn {
          width: 32px;
          height: 32px;
          border: 1px solid #d1d5db;
          background: white;
          border-radius: 6px;
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .quantity-btn:hover {
          background: #f97316;
          color: white;
          border-color: #f97316;
        }

        .quantity {
          font-weight: 600;
          font-size: 16px;
          min-width: 30px;
          text-align: center;
        }

        /* NEW: Reserved message styling */
        .reserved-message {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          margin-top: 12px;
          padding: 10px;
          background: rgba(245, 158, 11, 0.1);
          color: #f59e0b;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 500;
        }

        /* Modal Styles */
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 20px;
        }

        .cart-modal, .checkout-modal {
          background: white;
          border-radius: 12px;
          max-width: 500px;
          width: 100%;
          max-height: 90vh;
          display: flex;
          flex-direction: column;
        }

        .cart-header, .checkout-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 20px;
          border-bottom: 1px solid #e5e7eb;
        }

        .cart-header h3, .checkout-header h3 {
          font-size: 20px;
          font-weight: 600;
          color: #111827;
        }

        .close-btn {
          background: none;
          border: none;
          cursor: pointer;
          color: #6b7280;
          padding: 4px;
        }

        .close-btn:hover {
          color: #111827;
        }

        .cart-content, .checkout-content {
          flex: 1;
          overflow-y: auto;
          padding: 20px;
        }

        .empty-cart {
          text-align: center;
          padding: 40px 20px;
          color: #6b7280;
        }

        .cart-items {
          margin-bottom: 20px;
        }

        .cart-item {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 0;
          border-bottom: 1px solid #f3f4f6;
        }

        .cart-item:last-child {
          border-bottom: none;
        }

        .cart-item-image {
          width: 50px;
          height: 50px;
          object-fit: cover;
          border-radius: 6px;
        }

        .cart-item-details {
          flex: 1;
        }

        .cart-item-details h4 {
          font-size: 14px;
          font-weight: 600;
          color: #111827;
          margin-bottom: 4px;
        }

        .cart-item-details p {
          font-size: 12px;
          color: #6b7280;
        }

        .cart-item-controls {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .cart-item-controls button {
          width: 28px;
          height: 28px;
          border: 1px solid #d1d5db;
          background: white;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
        }

        .cart-item-controls button:hover {
          background: #f97316;
          color: white;
          border-color: #f97316;
        }

        .cart-item-controls span {
          font-weight: 600;
          min-width: 20px;
          text-align: center;
        }

        .cart-item-total {
          font-weight: 600;
          color: #f97316;
          min-width: 60px;
          text-align: right;
        }

        .cart-summary, .summary-totals {
          border-top: 1px solid #e5e7eb;
          padding-top: 16px;
        }

        .summary-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 8px;
          font-size: 14px;
        }

        .summary-row.total {
          font-weight: 700;
          font-size: 16px;
          color: #111827;
          border-top: 1px solid #e5e7eb;
          padding-top: 8px;
          margin-top: 8px;
        }

        .cart-footer, .checkout-footer {
          padding: 20px;
          border-top: 1px solid #e5e7eb;
        }

        .checkout-btn, .place-order-btn {
          width: 100%;
          padding: 14px;
          background: #f97316;
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s ease;
        }

        .checkout-btn:hover, .place-order-btn:hover {
          background: #ea580c;
        }

        .place-order-btn:disabled {
          background: #d1d5db;
          cursor: not-allowed;
        }

        /* Checkout Specific Styles */
        .customer-details, .order-summary, .payment-info {
          margin-bottom: 24px;
        }

        .customer-details h4, .order-summary h4 {
          font-size: 16px;
          font-weight: 600;
          color: #111827;
          margin-bottom: 16px;
        }

        .form-group {
          margin-bottom: 16px;
        }

        .form-group label {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 14px;
          font-weight: 500;
          color: #374151;
          margin-bottom: 6px;
        }

        .form-group input, .form-group select {
          width: 100%;
          padding: 10px 12px;
          border: 1px solid #d1d5db;
          border-radius: 6px;
          font-size: 14px;
          outline: none;
        }

        .form-group input:focus, .form-group select:focus {
          border-color: #f97316;
          box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        .summary-items {
          margin-bottom: 16px;
        }

        .summary-item {
          display: flex;
          justify-content: space-between;
          margin-bottom: 8px;
          font-size: 14px;
        }

        .payment-method {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 12px;
          background: #f3f4f6;
          border-radius: 6px;
          font-size: 14px;
          color: #374151;
        }

        /* Empty State */
        .empty-state {
          text-align: center;
          padding: 60px 20px;
          color: #6b7280;
        }

        .empty-state h3 {
          color: #111827;
          margin-bottom: 8px;
          font-size: 18px;
        }

        .empty-state p {
          margin-bottom: 20px;
        }

        .clear-filters {
          background: #f97316;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
        }

        .clear-filters:hover {
          background: #ea580c;
        }

        /* Footer */
       .footer {
  padding: 16px;
  background-color: #f8f8f8; /* Light background for contrast */
  text-align: center;
  border-top: 1px solid #ddd; /* Optional: visual separation */
  width: 100%;
  box-sizing: border-box;
  position: relative; /* Ensure footer respects parent container */
  z-index: 10; /* Ensure footer is above most elements but below modals */
}

.footer-sub {
  font-size: 0.875rem; /* Smaller font size for mobile */
  color: #666;
  margin-top: 8px;
}

/* Ensure the parent container has enough padding to keep footer visible */
.scrollable-content { /* Adjust class name based on your actual container */
  padding-bottom: 80px; /* Enough space for footer and floating button */
  min-height: 100vh; /* Ensure content takes full viewport height */
  box-sizing: border-box;
}

        /* Mobile Responsive */
        @media (max-width: 640px) {
          .header-container {
            padding: 16px;
          }

          .restaurant-name {
            font-size: 20px;
          }

          .search-section {
            flex-direction: column;
            gap: 12px;
          }

          .category-dropdown {
            width: 100%;
            min-width: auto;
          }

          .content-container {
            padding: 16px;
          }

          .menu-grid {
            grid-template-columns: 1fr;
            gap: 16px;
          }

          .card-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
          }

          .floating-cart {
            bottom: 80px;
          }

          .cart-modal, .checkout-modal {
            margin: 10px;
            max-height: calc(100vh - 20px);
          }

          .success-message {
            margin: 10px;
            padding: 30px 20px;
          }

          .download-invoice-btn {
            padding: 10px 16px;
            font-size: 13px;
          }
        }

        /* Tablet */
        @media (min-width: 641px) and (max-width: 1024px) {
          .menu-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        /* Large Desktop */
        @media (min-width: 1200px) {
          .menu-grid {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        /* Custom Scrollbar */
        .main-content::-webkit-scrollbar, .cart-content::-webkit-scrollbar, .checkout-content::-webkit-scrollbar {
          width: 8px;
        }

        .main-content::-webkit-scrollbar-track, .cart-content::-webkit-scrollbar-track, .checkout-content::-webkit-scrollbar-track {
          background: #f1f5f9;
        }

        .main-content::-webkit-scrollbar-thumb, .cart-content::-webkit-scrollbar-thumb, .checkout-content::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 4px;
        }

        .main-content::-webkit-scrollbar-thumb:hover, .cart-content::-webkit-scrollbar-thumb:hover, .checkout-content::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `})]})},Rae=()=>{const e=An(),t=()=>{e("/login")};return n.jsx("div",{className:"privacy-container",children:n.jsxs("div",{className:"privacy-policy-card",children:[n.jsx("div",{className:"privacy-header",children:n.jsx("button",{type:"button",className:"back-to-login",onClick:t,children:" Back to Login"})}),n.jsxs("div",{className:"privacy-content",children:[n.jsx("h2",{style:{textAlign:"center"},children:n.jsx("b",{children:"PRIVACY POLICY"})}),n.jsx("p",{children:"Effective date: 2025-06-26"}),n.jsxs("p",{children:["1. ",n.jsx("b",{children:"Introduction"})]}),n.jsxs("p",{children:["Welcome to ",n.jsx("b",{children:" Hotel Virat"}),"."]}),n.jsxs("p",{children:[n.jsx("b",{children:"Hotel Virat"}),' ("us", "we", or "our") operates ',n.jsx("b",{children:"https://hotelvirat.com"})," (hereinafter referred to as"," ",n.jsx("b",{children:'"Service"'}),")."]}),n.jsxs("p",{children:["Our Privacy Policy governs your visit to ",n.jsx("b",{children:"https://hotelvirat.com"}),", and explains how we collect, safeguard and disclose information that results from your use of our Service."]}),n.jsx("p",{children:"We use your data to provide and improve Service. By using Service, you agree to the collection and use of information in accordance with this policy. Unless otherwise defined in this Privacy Policy, the terms used in this Privacy Policy have the same meanings as in our Terms and Conditions."}),n.jsxs("p",{children:["Our Terms and Conditions (",n.jsx("b",{children:'"Terms"'}),") govern all use of our Service and together with the Privacy Policy constitutes your agreement with us (",n.jsx("b",{children:'"agreement"'}),")."]}),n.jsxs("p",{children:["2. ",n.jsx("b",{children:"Definitions"})]}),n.jsxs("p",{children:[n.jsx("b",{children:"SERVICE"})," means the https://hotelvirat.comwebsite operated by Hotel Virat."]}),n.jsxs("p",{children:[n.jsx("b",{children:"PERSONAL DATA"})," means data about a living individual who can be identified from those data (or from those and other information either in our possession or likely to come into our possession)."]}),n.jsxs("p",{children:[n.jsx("b",{children:"USAGE DATA"})," is data collected automatically either generated by the use of Service or from Service infrastructure itself (for example, the duration of a page visit)."]}),n.jsxs("p",{children:[n.jsx("b",{children:"COOKIES"})," are small files stored on your device (computer or mobile device)."]}),n.jsxs("p",{children:[n.jsx("b",{children:"DATA CONTROLLER"})," means a natural or legal person who (either alone or jointly or in common with other persons) determines the purposes for which and the manner in which any personal data are, or are to be, processed. For the purpose of this Privacy Policy, we are a Data Controller of your data."]}),n.jsxs("p",{children:[n.jsx("b",{children:"DATA PROCESSORS (OR SERVICE PROVIDERS)"})," means any natural or legal person who processes the data on behalf of the Data Controller. We may use the services of various Service Providers in order to process your data more effectively."]}),n.jsxs("p",{children:[n.jsx("b",{children:"DATA SUBJECT"})," is any living individual who is the subject of Personal Data."]}),n.jsxs("p",{children:[n.jsx("b",{children:"THE USER"})," is the individual using our Service. The User corresponds to the Data Subject, who is the subject of Personal Data."]}),n.jsxs("p",{children:["3. ",n.jsx("b",{children:"Information Collection and Use"})]}),n.jsx("p",{children:"We collect several different types of information for various purposes to provide and improve our Service to you."}),n.jsxs("p",{children:["4. ",n.jsx("b",{children:"Types of Data Collected"})]}),n.jsx("p",{children:n.jsx("b",{children:"Personal Data"})}),n.jsxs("p",{children:["While using our Service, we may ask you to provide us with certain personally identifiable information that can be used to contact or identify you (",n.jsx("b",{children:'"Personal Data"'}),"). Personally identifiable information may include, but is not limited to:"]}),n.jsx("p",{children:"0.1. Email address"}),n.jsx("p",{children:"0.2. First name and last name"}),n.jsx("p",{children:"0.3. Phone number"}),n.jsx("p",{children:"0.4. Address, Country, State, Province, ZIP/Postal code, City"}),n.jsx("p",{children:"0.5. Cookies and Usage Data"}),n.jsx("p",{children:"We may use your Personal Data to contact you with newsletters, marketing or promotional materials and other information that may be of interest to you. You may opt out of receiving any, or all, of these communications from us by following the unsubscribe link."}),n.jsx("p",{children:n.jsx("b",{children:"Usage Data"})}),n.jsxs("p",{children:["We may also collect information that your browser sends whenever you visit our Service or when you access Service by or through any device (",n.jsx("b",{children:'"Usage Data"'}),")."]}),n.jsx("p",{children:"This Usage Data may include information such as your computer's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that you visit, the time and date of your visit, the time spent on those pages, unique device identifiers and other diagnostic data."}),n.jsx("p",{children:"When you access Service with a device, this Usage Data may include information such as the type of device you use, your device unique ID, the IP address of your device, your device operating system, the type of Internet browser you use, unique device identifiers and other diagnostic data."}),n.jsx("p",{children:n.jsx("b",{children:"Tracking Cookies Data"})}),n.jsx("p",{children:"We use cookies and similar tracking technologies to track the activity on our Service and we hold certain information."}),n.jsx("p",{children:"Cookies are files with a small amount of data which may include an anonymous unique identifier. Cookies are sent to your browser from a website and stored on your device. Other tracking technologies are also used such as beacons, tags and scripts to collect and track information and to improve and analyze our Service."}),n.jsx("p",{children:"You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our Service."}),n.jsx("p",{children:"Examples of Cookies we use:"}),n.jsxs("p",{children:["0.1. ",n.jsx("b",{children:"Session Cookies:"})," We use Session Cookies to operate our Service."]}),n.jsxs("p",{children:["0.2. ",n.jsx("b",{children:"Preference Cookies:"})," We use Preference Cookies to remember your preferences and various settings."]}),n.jsxs("p",{children:["0.3. ",n.jsx("b",{children:"Security Cookies:"})," We use Security Cookies for security purposes."]}),n.jsxs("p",{children:["0.4. ",n.jsx("b",{children:"Advertising Cookies:"})," Advertising Cookies are used to serve you with advertisements that may be relevant to you and your interests."]}),n.jsx("p",{children:n.jsx("b",{children:"Other Data"})}),n.jsxs("p",{children:["While using our Service, we may also collect the following information: sex, age, date of birth, place of birth, passport details, citizenship, registration at place of residence and actual address, telephone number (work, mobile), details of documents on education, qualification, professional training, employment agreements"," ",", information on bonuses and compensation, information on marital status, family members, social security (or other taxpayer identification) number, office location and other data."]}),n.jsxs("p",{children:["5. ",n.jsx("b",{children:"Use of Data"})]}),n.jsx("p",{children:"Hotel Virat uses the collected data for various purposes:"}),n.jsx("p",{children:"0.1. to provide and maintain our Service;"}),n.jsx("p",{children:"0.2. to notify you about changes to our Service;"}),n.jsx("p",{children:"0.3. to allow you to participate in interactive features of our Service when you choose to do so;"}),n.jsx("p",{children:"0.4. to provide customer support;"}),n.jsx("p",{children:"0.5. to gather analysis or valuable information so that we can improve our Service;"}),n.jsx("p",{children:"0.6. to monitor the usage of our Service;"}),n.jsx("p",{children:"0.7. to detect, prevent and address technical issues;"}),n.jsx("p",{children:"0.8. to fulfil any other purpose for which you provide it;"}),n.jsx("p",{children:"0.9. to carry out our obligations and enforce our rights arising from any contracts entered into between you and us, including for billing and collection;"}),n.jsx("p",{children:"0.10. to provide you with notices about your account and/or subscription, including expiration and renewal notices, email-instructions, etc.;"}),n.jsx("p",{children:"0.11. to provide you with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless you have opted not to receive such information;"}),n.jsx("p",{children:"0.12. in any other way we may describe when you provide the information;"}),n.jsx("p",{children:"0.13. for any other purpose with your consent."}),n.jsxs("p",{children:["6. ",n.jsx("b",{children:"Retention of Data"})]}),n.jsx("p",{children:"We will retain your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use your Personal Data to the extent necessary to comply with our legal obligations (for example, if we are required to retain your data to comply with applicable laws), resolve disputes, and enforce our legal agreements and policies."}),n.jsx("p",{children:"We will also retain Usage Data for internal analysis purposes. Usage Data is generally retained for a shorter period, except when this data is used to strengthen the security or to improve the functionality of our Service, or we are legally obligated to retain this data for longer time periods."}),n.jsxs("p",{children:["7. ",n.jsx("b",{children:"Transfer of Data"})]}),n.jsx("p",{children:"Your information, including Personal Data, may be transferred to  and maintained on  computers located outside of your state, province, country or other governmental jurisdiction where the data protection laws may differ from those of your jurisdiction."}),n.jsx("p",{children:"If you are located outside India and choose to provide information to us, please note that we transfer the data, including Personal Data, to India and process it there."}),n.jsx("p",{children:"Your consent to this Privacy Policy followed by your submission of such information represents your agreement to that transfer."}),n.jsx("p",{children:"Hotel Virat will take all the steps reasonably necessary to ensure that your data is treated securely and in accordance with this Privacy Policy and no transfer of your Personal Data will take place to an organisation or a country unless there are adequate controls in place including the security of your data and other personal information."}),n.jsxs("p",{children:["8. ",n.jsx("b",{children:"Disclosure of Data"})]}),n.jsx("p",{children:"We may disclose personal information that we collect, or you provide:"}),n.jsxs("p",{children:["0.1. ",n.jsx("b",{children:"Business Transaction."})]}),n.jsx("p",{children:"If we or our subsidiaries are involved in a merger, acquisition or asset sale, your Personal Data may be transferred."}),n.jsxs("p",{children:["0.2. ",n.jsx("b",{children:"Other cases. We may disclose your information also:"})]}),n.jsx("p",{children:"0.2.1. to our subsidiaries and affiliates;"}),n.jsx("p",{children:"0.2.2. to contractors, service providers, and other third parties we use to support our business;"}),n.jsx("p",{children:"0.2.3. to fulfill the purpose for which you provide it;"}),n.jsx("p",{children:"0.2.4. for the purpose of including your company's logo on our website;"}),n.jsx("p",{children:"0.2.5. for any other purpose disclosed by us when you provide the information;"}),n.jsx("p",{children:"0.2.6. with your consent in any other cases;"}),n.jsx("p",{children:"0.2.7. if we believe disclosure is necessary or appropriate to protect the rights, property, or safety of the Company, our customers, or others."}),n.jsxs("p",{children:["9. ",n.jsx("b",{children:"Security of Data"})]}),n.jsx("p",{children:"The security of your data is important to us but remember that no method of transmission over the Internet or method of electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your Personal Data, we cannot guarantee its absolute security."}),n.jsxs("p",{children:["10. ",n.jsx("b",{children:"Your Data Protection Rights Under General Data Protection Regulation (GDPR)"})]}),n.jsx("p",{children:"If you are a resident of the European Union (EU) and European Economic Area (EEA), you have certain data protection rights, covered by GDPR."}),n.jsx("p",{children:"We aim to take reasonable steps to allow you to correct, amend, delete, or limit the use of your Personal Data."}),n.jsxs("p",{children:[" ","If you wish to be informed what Personal Data we hold about you and if you want it to be removed from our systems, please email us at ",n.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]}),n.jsx("p",{children:"In certain circumstances, you have the following data protection rights:"}),n.jsx("p",{children:"0.1. the right to access, update or to delete the information we have on you;"}),n.jsx("p",{children:"0.2. the right of rectification. You have the right to have your information rectified if that information is inaccurate or incomplete;"}),n.jsx("p",{children:"0.3. the right to object. You have the right to object to our processing of your Personal Data;"}),n.jsx("p",{children:"0.4. the right of restriction. You have the right to request that we restrict the processing of your personal information;"}),n.jsx("p",{children:"0.5. the right to data portability. You have the right to be provided with a copy of your Personal Data in a structured, machine-readable and commonly used format;"}),n.jsx("p",{children:"0.6. the right to withdraw consent. You also have the right to withdraw your consent at any time where we rely on your consent to process your personal information;"}),n.jsx("p",{children:"Please note that we may ask you to verify your identity before responding to such requests. Please note, we may not able to provide Service without some necessary data."}),n.jsx("p",{children:"You have the right to complain to a Data Protection Authority about our collection and use of your Personal Data. For more information, please contact your local data protection authority in the European Economic Area (EEA)."}),n.jsxs("p",{children:["11. ",n.jsx("b",{children:"Your Data Protection Rights under the California Privacy Protection Act (CalOPPA)"})]}),n.jsx("p",{children:"CalOPPA is the first state law in the nation to require commercial websites and online services to post a privacy policy. The law's reach stretches well beyond California to require a person or company in the United States (and conceivable the world) that operates websites collecting personally identifiable information from California consumers to post a conspicuous privacy policy on its website stating exactly the information being collected and those individuals with whom it is being shared, and to comply with this policy."}),n.jsx("p",{children:"According to CalOPPA we agree to the following:"}),n.jsx("p",{children:"0.1. users can visit our site anonymously;"}),n.jsx("p",{children:'0.2. our Privacy Policy link includes the word "Privacy", and can easily be found on the home page of our website;'}),n.jsx("p",{children:"0.3. users will be notified of any privacy policy changes on our Privacy Policy Page;"}),n.jsxs("p",{children:["0.4. users are able to change their personal information by emailing us at ",n.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]}),n.jsx("p",{children:'Our Policy on "Do Not Track" Signals:'}),n.jsx("p",{children:"We honor Do Not Track signals and do not track, plant cookies, or use advertising when a Do Not Track browser mechanism is in place. Do Not Track is a preference you can set in your web browser to inform websites that you do not want to be tracked."}),n.jsx("p",{children:"You can enable or disable Do Not Track by visiting the Preferences or Settings page of your web browser."}),n.jsxs("p",{children:["12. ",n.jsx("b",{children:"Your Data Protection Rights under the California Consumer Privacy Act (CCPA)"})]}),n.jsx("p",{children:"If you are a California resident, you are entitled to learn what data we collect about you, ask to delete your data and not to sell (share) it. To exercise your data protection rights, you can make certain requests and ask us:"}),n.jsx("p",{children:n.jsx("b",{children:"0.1. What personal information we have about you. If you make this request, we will return to you:"})}),n.jsx("p",{children:"0.0.1. The categories of personal information we have collected about you."}),n.jsx("p",{children:"0.0.2. The categories of sources from which we collect your personal information."}),n.jsx("p",{children:"0.0.3. The business or commercial purpose for collecting or selling your personal information."}),n.jsx("p",{children:"0.0.4. The categories of third parties with whom we share personal information."}),n.jsx("p",{children:"0.0.5. The specific pieces of personal information we have collected about you."}),n.jsx("p",{children:"0.0.6. A list of categories of personal information that we have sold, along with the category of any other company we sold it to. If we have not sold your personal information, we will inform you of that fact."}),n.jsx("p",{children:"0.0.7. A list of categories of personal information that we have disclosed for a business purpose, along with the category of any other company we shared it with."}),n.jsx("p",{children:"Please note, you are entitled to ask us to provide you with this information up to two times in a rolling twelve-month period. When you make this request, the information provided may be limited to the personal information we collected about you in the previous 12 months."}),n.jsx("p",{children:n.jsx("b",{children:"0.2. To delete your personal information. If you make this request, we will delete the personal information we hold about you as of the date of your request from our records and direct any service providers to do the same. In some cases, deletion may be accomplished through de-identification of the information. If you choose to delete your personal information, you may not be able to use certain functions that require your personal information to operate."})}),n.jsx("p",{children:n.jsx("b",{children:`0.3. To stop selling your personal information. We don't sell or rent your personal information to any third parties for any purpose. We do not sell your personal information for monetary consideration. However, under some circumstances, a transfer of personal information to a third party, or within our family of companies, without monetary consideration may be considered a "sale" under California law. You are the only owner of your Personal Data and can request disclosure or deletion at any time.`})}),n.jsx("p",{children:"If you submit a request to stop selling your personal information, we will stop making such transfers."}),n.jsx("p",{children:"Please note, if you ask us to delete or stop selling your data, it may impact your experience with us, and you may not be able to participate in certain programs or membership services which require the usage of your personal information to function. But in no circumstances, we will discriminate against you for exercising your rights."}),n.jsxs("p",{children:["To exercise your California data protection rights described above, please send your request(s) by email:"," ",n.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]}),n.jsx("p",{children:"Your data protection rights, described above, are covered by the CCPA, short for the California Consumer Privacy Act. To find out more, visit the official California Legislative Information website. The CCPA took effect on 01/01/2020."}),n.jsxs("p",{children:["13. ",n.jsx("b",{children:"Service Providers"})]}),n.jsxs("p",{children:["We may employ third party companies and individuals to facilitate our Service (",n.jsx("b",{children:'"Service Providers"'}),"), provide Service on our behalf, perform Service-related services or assist us in analysing how our Service is used."]}),n.jsx("p",{children:"These third parties have access to your Personal Data only to perform these tasks on our behalf and are obligated not to disclose or use it for any other purpose."}),n.jsxs("p",{children:["14. ",n.jsx("b",{children:"Analytics"})]}),n.jsx("p",{children:"We may use third-party Service Providers to monitor and analyze the use of our Service."}),n.jsxs("p",{children:["15. ",n.jsx("b",{children:"CI/CD tools"})]}),n.jsx("p",{children:"We may use third-party Service Providers to automate the development process of our Service."}),n.jsxs("p",{children:["16. ",n.jsx("b",{children:"Behavioral Remarketing"})]}),n.jsx("p",{children:"We may use remarketing services to advertise on third party websites to you after you visited our Service. We and our third-party vendors use cookies to inform, optimise and serve ads based on your past visits to our Service."}),n.jsxs("p",{children:["17. ",n.jsx("b",{children:"Payments"})]}),n.jsx("p",{children:"We may provide paid products and/or services within Service. In that case, we use third-party services for payment processing (e.g. payment processors)."}),n.jsx("p",{children:"We will not store or collect your payment card details. That information is provided directly to our third-party payment processors whose use of your personal information is governed by their Privacy Policy. These payment processors adhere to the standards set by PCI-DSS as managed by the PCI Security Standards Council, which is a joint effort of brands like Visa, Mastercard, American Express and Discover. PCI-DSS requirements help ensure the secure handling of payment information."}),n.jsxs("p",{children:["18. ",n.jsx("b",{children:"Links to Other Sites"})]}),n.jsx("p",{children:"Our Service may contain links to other sites that are not operated by us. If you click a third party link, you will be directed to that third party's site. We strongly advise you to review the Privacy Policy of every site you visit."}),n.jsx("p",{children:"We have no control over and assume no responsibility for the content, privacy policies or practices of any third party sites or services."}),n.jsxs("p",{children:["19. ",n.jsx("b",{children:"Children's Privacy"})]}),n.jsxs("p",{children:["Our Services are not intended for use by children under the age of 18 (",n.jsx("b",{children:'"Child"'})," or ",n.jsx("b",{children:'"Children"'}),")."]}),n.jsx("p",{children:"We do not knowingly collect personally identifiable information from Children under 18. If you become aware that a Child has provided us with Personal Data, please contact us. If we become aware that we have collected Personal Data from Children without verification of parental consent, we take steps to remove that information from our servers."}),n.jsxs("p",{children:["20. ",n.jsx("b",{children:"Changes to This Privacy Policy"})]}),n.jsx("p",{children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page."}),n.jsx("p",{children:'We will let you know via email and/or a prominent notice on our Service, prior to the change becoming effective and update "effective date" at the top of this Privacy Policy.'}),n.jsx("p",{children:"You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page."}),n.jsxs("p",{children:["21. ",n.jsx("b",{children:"Contact Us"})]}),n.jsxs("p",{children:["If you have any questions about this Privacy Policy, please contact us by email:"," ",n.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]})]})]})})},Pae=()=>{const e=An(),t=()=>{e("/login")};return n.jsx("div",{className:"privacy-container",children:n.jsxs("div",{className:"privacy-policy-card",children:[n.jsx("div",{className:"privacy-header",children:n.jsx("button",{type:"button",className:"back-to-login",onClick:t,children:" Back to Login"})}),n.jsxs("div",{className:"privacy-content",children:[n.jsx("h2",{style:{textAlign:"center"},children:n.jsx("b",{children:"TERMS AND CONDITIONS"})}),n.jsx("p",{children:"Last updated: 2025-06-26"}),n.jsxs("p",{children:["1. ",n.jsx("b",{children:"Introduction"})]}),n.jsxs("p",{children:["Welcome to ",n.jsx("b",{children:"Hotel Virat"}),' ("Company", "we", "our", "us")!']}),n.jsxs("p",{children:['These Terms of Service ("Terms", "Terms of Service") govern your use of our website located at'," ",n.jsx("b",{children:"https://hotelvirat.com"}),' (together or individually "Service") operated by ',n.jsx("b",{children:"Hotel Virat"}),"."]}),n.jsx("p",{children:"Our Privacy Policy also governs your use of our Service and explains how we collect, safeguard and disclose information that results from your use of our web pages."}),n.jsx("p",{children:'Your agreement with us includes these Terms and our Privacy Policy ("Agreements"). You acknowledge that you have read and understood Agreements, and agree to be bound of them.'}),n.jsxs("p",{children:["If you do not agree with (or cannot comply with) Agreements, then you may not use the Service, but please let us know by emailing at ",n.jsx("b",{children:"infohotelvirat@gmail.com"})," so we can try to find a solution. These Terms apply to all visitors, users and others who wish to access or use Service."]}),n.jsxs("p",{children:["2. ",n.jsx("b",{children:"Communications"})]}),n.jsx("p",{children:"By using our Service, you agree to subscribe to newsletters, marketing or promotional materials and other information we may send. However, you may opt out of receiving any, or all, of these communications from us by following the unsubscribe link or by emailing at infohotelvirat@gmail.com."}),n.jsxs("p",{children:["3. ",n.jsx("b",{children:"Purchases"})]}),n.jsx("p",{children:'If you wish to purchase any product or service made available through Service ("Purchase"), you may be asked to supply certain information relevant to your Purchase including but not limited to, your credit or debit card number, the expiration date of your card, your billing address, and your shipping information.'}),n.jsx("p",{children:"You represent and warrant that: (i) you have the legal right to use any card(s) or other payment method(s) in connection with any Purchase; and that (ii) the information you supply to us is true, correct and complete."}),n.jsx("p",{children:"We may employ the use of third party services for the purpose of facilitating payment and the completion of Purchases. By submitting your information, you grant us the right to provide the information to these third parties subject to our Privacy Policy."}),n.jsx("p",{children:"We reserve the right to refuse or cancel your order at any time for reasons including but not limited to: product or service availability, errors in the description or price of the product or service, error in your order or other reasons."}),n.jsx("p",{children:"We reserve the right to refuse or cancel your order if fraud or an unauthorized or illegal transaction is suspected."}),n.jsxs("p",{children:["4. ",n.jsx("b",{children:"Contests, Sweepstakes and Promotions"})]}),n.jsx("p",{children:'Any contests, sweepstakes or other promotions (collectively, "Promotions") made available through Service may be governed by rules that are separate from these Terms of Service. If you participate in any Promotions, please review the applicable rules as well as our Privacy Policy. If the rules for a Promotion conflict with these Terms of Service, Promotion rules will apply.'}),n.jsxs("p",{children:["5. ",n.jsx("b",{children:"Refunds"})]}),n.jsxs("p",{children:[n.jsx("b",{children:"NO REFUND POLICY:"})," All payments made for products, services, orders, reservations, events, and any other transactions through Hotel Virat are ",n.jsx("b",{children:"strictly non-refundable"}),". We do not issue refunds for any contracts, purchases, or services under any circumstances. Please review your order details carefully before confirming payment as all sales are final."]}),n.jsxs("p",{children:["6. ",n.jsx("b",{children:"Content"})]}),n.jsx("p",{children:"Content found on or through this Service are the property of Hotel Virat or used with permission. You may not distribute, modify, transmit, reuse, download, repost, copy, or use said Content, whether in whole or in part, for commercial purposes or for personal gain, without express advance written permission from us."}),n.jsxs("p",{children:["7. ",n.jsx("b",{children:"Prohibited Uses"})]}),n.jsx("p",{children:"You may use Service only for lawful purposes and in accordance with Terms. You agree not to use Service:"}),n.jsx("p",{children:"0.1. In any way that violates any applicable national or international law or regulation."}),n.jsx("p",{children:"0.2. For the purpose of exploiting, harming, or attempting to exploit or harm minors in any way by exposing them to inappropriate content or otherwise."}),n.jsx("p",{children:'0.3. To transmit, or procure the sending of, any advertising or promotional material, including any "junk mail", "chain letter," "spam," or any other similar solicitation.'}),n.jsx("p",{children:"0.4. To impersonate or attempt to impersonate Company, a Company employee, another user, or any other person or entity."}),n.jsx("p",{children:"0.5. In any way that infringes upon the rights of others, or in any way is illegal, threatening, fraudulent, or harmful, or in connection with any unlawful, illegal, fraudulent, or harmful purpose or activity."}),n.jsx("p",{children:"0.6. To engage in any other conduct that restricts or inhibits anyone's use or enjoyment of Service, or which, as determined by us, may harm or offend Company or users of Service or expose them to liability."}),n.jsx("p",{children:"Additionally, you agree not to:"}),n.jsx("p",{children:"0.1. Use Service in any manner that could disable, overburden, damage, or impair Service or interfere with any other party's use of Service, including their ability to engage in real time activities through Service."}),n.jsx("p",{children:"0.2. Use any robot, spider, or other automatic device, process, or means to access Service for any purpose, including monitoring or copying any of the material on Service."}),n.jsx("p",{children:"0.3. Use any manual process to monitor or copy any of the material on Service or for any other unauthorized purpose without our prior written consent."}),n.jsx("p",{children:"0.4. Use any device, software, or routine that interferes with the proper working of Service."}),n.jsx("p",{children:"0.5. Introduce any viruses, trojan horses, worms, logic bombs, or other material which is malicious or technologically harmful."}),n.jsx("p",{children:"0.6. Attempt to gain unauthorized access to, interfere with, damage, or disrupt any parts of Service, the server on which Service is stored, or any server, computer, or database connected to Service."}),n.jsx("p",{children:"0.7. Attack Service via a denial-of-service attack or a distributed denial-of-service attack."}),n.jsx("p",{children:"0.8. Take any action that may damage or falsify Company rating."}),n.jsx("p",{children:"0.9. Otherwise attempt to interfere with the proper working of Service."}),n.jsxs("p",{children:["8. ",n.jsx("b",{children:"Analytics"})]}),n.jsx("p",{children:"We may use third-party Service Providers to monitor and analyze the use of our Service."}),n.jsxs("p",{children:["9. ",n.jsx("b",{children:"No Use By Minors"})]}),n.jsx("p",{children:"Service is intended only for access and use by individuals at least eighteen (18) years old. By accessing or using Service, you warrant and represent that you are at least eighteen (18) years of age and with the full authority, right, and capacity to enter into this agreement and abide by all of the terms and conditions of Terms. If you are not at least eighteen (18) years old, you are prohibited from both the access and usage of Service."}),n.jsxs("p",{children:["10. ",n.jsx("b",{children:"Accounts"})]}),n.jsx("p",{children:"When you create an account with us, you guarantee that you are above the age of 18, and that the information you provide us is accurate, complete, and current at all times. Inaccurate, incomplete, or obsolete information may result in the immediate termination of your account on Service."}),n.jsx("p",{children:"You are responsible for maintaining the confidentiality of your account and password, including but not limited to the restriction of access to your computer and/or account. You agree to accept responsibility for any and all activities or actions that occur under your account and/or password, whether your password is with our Service or a third-party service. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."}),n.jsx("p",{children:"You may not use as a username the name of another person or entity or that is not lawfully available for use, a name or trademark that is subject to any rights of another person or entity other than you, without appropriate authorization. You may not use as a username any name that is offensive, vulgar or obscene."}),n.jsx("p",{children:"We reserve the right to refuse service, terminate accounts, remove or edit content, or cancel orders in our sole discretion."}),n.jsxs("p",{children:["11. ",n.jsx("b",{children:"Intellectual Property"})]}),n.jsx("p",{children:"Service and its original content (excluding Content provided by users), features and functionality are and will remain the exclusive property of Hotel Virat and its licensors. Service is protected by copyright, trademark, and other laws of and foreign countries. Our trademarks may not be used in connection with any product or service without the prior written consent of Hotel Virat."}),n.jsxs("p",{children:["12. ",n.jsx("b",{children:"Copyright Policy"})]}),n.jsx("p",{children:'We respect the intellectual property rights of others. It is our policy to respond to any claim that Content posted on Service infringes on the copyright or other intellectual property rights ("Infringement") of any person or entity.'}),n.jsx("p",{children:'If you are a copyright owner, or authorized on behalf of one, and you believe that the copyrighted work has been copied in a way that constitutes copyright infringement, please submit your claim via email to infohotelvirat@gmail.com, with the subject line: "Copyright Infringement" and include in your claim a detailed description of the alleged Infringement as detailed below, under "DMCA Notice and Procedure for Copyright Infringement Claims"'}),n.jsx("p",{children:"You may be held accountable for damages (including costs and attorneys' fees) for misrepresentation or bad-faith claims on the infringement of any Content found on and/or through Service on your copyright."}),n.jsxs("p",{children:["13. ",n.jsx("b",{children:"DMCA Notice and Procedure for Copyright Infringement Claims"})]}),n.jsx("p",{children:"You may submit a notification pursuant to the Digital Millennium Copyright Act (DMCA) by providing our Copyright Agent with the following information in writing (see 17 U.S.C 512(c)(3) for further detail):"}),n.jsx("p",{children:"0.1. an electronic or physical signature of the person authorized to act on behalf of the owner of the copyright's interest;"}),n.jsx("p",{children:"0.2. a description of the copyrighted work that you claim has been infringed, including the URL (i.e., web page address) of the location where the copyrighted work exists or a copy of the copyrighted work;"}),n.jsx("p",{children:"0.3. identification of the URL or other specific location on Service where the material that you claim is infringing is located;"}),n.jsx("p",{children:"0.4. your address, telephone number, and email address;"}),n.jsx("p",{children:"0.5. a statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law;"}),n.jsx("p",{children:"0.6. a statement by you, made under penalty of perjury, that the above information in your notice is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf."}),n.jsx("p",{children:"You can contact our Copyright Agent via email at infohotelvirat@gmail.com."}),n.jsxs("p",{children:["14. ",n.jsx("b",{children:"Error Reporting and Feedback"})]}),n.jsx("p",{children:'You may provide us either directly at infohotelvirat@gmail.com or via third party sites and tools with information and feedback concerning errors, suggestions for improvements, ideas, problems, complaints, and other matters related to our Service ("Feedback"). You acknowledge and agree that: (i) you shall not retain, acquire or assert any intellectual property right or other right, title or interest in or to the Feedback; (ii) Company may have development ideas similar to the Feedback; (iii) Feedback does not contain confidential information or proprietary information from you or any third party; and (iv) Company is not under any obligation of confidentiality with respect to the Feedback. In the event the transfer of the ownership to the Feedback is not possible due to applicable mandatory laws, you grant Company and its affiliates an exclusive, transferable, irrevocable, free-of-charge, sub-licensable, unlimited and perpetual right to use (including copy, modify, create derivative works, publish, distribute and commercialize) Feedback in any manner and for any purpose.'}),n.jsxs("p",{children:["15. ",n.jsx("b",{children:"Links To Other Web Sites"})]}),n.jsx("p",{children:"Our Service may contain links to third party web sites or services that are not owned or controlled by Hotel Virat."}),n.jsx("p",{children:"Hotel Virat has no control over, and assumes no responsibility for the content, privacy policies, or practices of any third party web sites or services. We do not warrant the offerings of any of these entities/individuals or their websites."}),n.jsx("p",{children:"YOU ACKNOWLEDGE AND AGREE THAT COMPANY SHALL NOT BE RESPONSIBLE OR LIABLE, DIRECTLY OR INDIRECTLY, FOR ANY DAMAGE OR LOSS CAUSED OR ALLEGED TO BE CAUSED BY OR IN CONNECTION WITH USE OF OR RELIANCE ON ANY SUCH CONTENT, GOODS OR SERVICES AVAILABLE ON OR THROUGH ANY SUCH THIRD PARTY WEB SITES OR SERVICES."}),n.jsx("p",{children:"WE STRONGLY ADVISE YOU TO READ THE TERMS OF SERVICE AND PRIVACY POLICIES OF ANY THIRD PARTY WEB SITES OR SERVICES THAT YOU VISIT."}),n.jsxs("p",{children:["16. ",n.jsx("b",{children:"Disclaimer Of Warranty"})]}),n.jsx("p",{children:'THESE SERVICES ARE PROVIDED BY COMPANY ON AN "AS IS" AND "AS AVAILABLE" BASIS. COMPANY MAKES NO REPRESENTATIONS OR WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, AS TO THE OPERATION OF THEIR SERVICES, OR THE INFORMATION, CONTENT OR MATERIALS INCLUDED THEREIN. YOU EXPRESSLY AGREE THAT YOUR USE OF THESE SERVICES, THEIR CONTENT, AND ANY SERVICES OR ITEMS OBTAINED FROM US IS AT YOUR SOLE RISK.'}),n.jsx("p",{children:"NEITHER COMPANY NOR ANY PERSON ASSOCIATED WITH COMPANY MAKES ANY WARRANTY OR REPRESENTATION WITH RESPECT TO THE COMPLETENESS, SECURITY, RELIABILITY, QUALITY, ACCURACY, OR AVAILABILITY OF THE SERVICES. WITHOUT LIMITING THE FOREGOING, NEITHER COMPANY NOR ANYONE ASSOCIATED WITH COMPANY REPRESENTS OR WARRANTS THAT THE SERVICES, THEIR CONTENT, OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE SERVICES WILL BE ACCURATE, RELIABLE, ERROR-FREE, OR UNINTERRUPTED, THAT DEFECTS WILL BE CORRECTED, THAT THE SERVICES OR THE SERVER THAT MAKES IT AVAILABLE ARE FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS OR THAT THE SERVICES OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE SERVICES WILL OTHERWISE MEET YOUR NEEDS OR EXPECTATIONS."}),n.jsx("p",{children:"COMPANY HEREBY DISCLAIMS ALL WARRANTIES OF ANY KIND, WHETHER EXPRESS OR IMPLIED, STATUTORY, OR OTHERWISE, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT, AND FITNESS FOR PARTICULAR PURPOSE."}),n.jsx("p",{children:"THE FOREGOING DOES NOT AFFECT ANY WARRANTIES WHICH CANNOT BE EXCLUDED OR LIMITED UNDER APPLICABLE LAW."}),n.jsxs("p",{children:["17. ",n.jsx("b",{children:"Limitation Of Liability"})]}),n.jsx("p",{children:"EXCEPT AS PROHIBITED BY LAW, YOU WILL HOLD US AND OUR OFFICERS, DIRECTORS, EMPLOYEES, AND AGENTS HARMLESS FOR ANY INDIRECT, PUNITIVE, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGE, HOWEVER IT ARISES (INCLUDING ATTORNEYS' FEES AND ALL RELATED COSTS AND EXPENSES OF LITIGATION AND ARBITRATION, OR AT TRIAL OR ON APPEAL, IF ANY, WHETHER OR NOT LITIGATION OR ARBITRATION IS INSTITUTED), WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE, OR OTHER TORTIOUS ACTION, OR ARISING OUT OF OR IN CONNECTION WITH THIS AGREEMENT, INCLUDING WITHOUT LIMITATION ANY CLAIM FOR PERSONAL INJURY OR PROPERTY DAMAGE, ARISING FROM THIS AGREEMENT AND ANY VIOLATION BY YOU OF ANY FEDERAL, STATE, OR LOCAL LAWS, STATUTES, RULES, OR REGULATIONS, EVEN IF COMPANY HAS BEEN PREVIOUSLY ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. EXCEPT AS PROHIBITED BY LAW, IF THERE IS LIABILITY FOUND ON THE PART OF COMPANY, IT WILL BE LIMITED TO THE AMOUNT PAID FOR THE PRODUCTS AND/OR SERVICES, AND UNDER NO CIRCUMSTANCES WILL THERE BE CONSEQUENTIAL OR PUNITIVE DAMAGES. SOME STATES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF PUNITIVE, INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE PRIOR LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU."}),n.jsxs("p",{children:["18. ",n.jsx("b",{children:"Termination"})]}),n.jsx("p",{children:"We may terminate or suspend your account and bar access to Service immediately, without prior notice or liability, under our sole discretion, for any reason whatsoever and without limitation, including but not limited to a breach of Terms."}),n.jsx("p",{children:"If you wish to terminate your account, you may simply discontinue using Service."}),n.jsx("p",{children:"All provisions of Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity and limitations of liability."}),n.jsxs("p",{children:["19. ",n.jsx("b",{children:"Governing Law"})]}),n.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of India, which governing law applies to agreement without regard to its conflict of law provisions."}),n.jsx("p",{children:"Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights. If any provision of these Terms is held to be invalid or unenforceable by a court, the remaining provisions of these Terms will remain in effect. These Terms constitute the entire agreement between us regarding our Service and supersede and replace any prior agreements we might have had between us regarding Service."}),n.jsxs("p",{children:["20. ",n.jsx("b",{children:"Changes To Service"})]}),n.jsx("p",{children:"We reserve the right to withdraw or amend our Service, and any service or material we provide via Service, in our sole discretion without notice. We will not be liable if for any reason all or any part of Service is unavailable at any time or for any period. From time to time, we may restrict access to some parts of Service, or the entire Service, to users, including registered users."}),n.jsxs("p",{children:["21. ",n.jsx("b",{children:"Amendments To Terms"})]}),n.jsx("p",{children:"We may amend Terms at any time by posting the amended terms on this site. It is your responsibility to review these Terms periodically."}),n.jsx("p",{children:"Your continued use of the Platform following the posting of revised Terms means that you accept and agree to the changes. You are expected to check this page frequently so you are aware of any changes, as they are binding on you."}),n.jsx("p",{children:"By continuing to access or use our Service after any revisions become effective, you agree to be bound by the revised terms. If you do not agree to the new terms, you are no longer authorized to use Service."}),n.jsxs("p",{children:["22. ",n.jsx("b",{children:"Waiver And Severability"})]}),n.jsx("p",{children:"No waiver by Company of any term or condition set forth in Terms shall be deemed a further or continuing waiver of such term or condition or a waiver of any other term or condition, and any failure of Company to assert a right or provision under Terms shall not constitute a waiver of such right or provision."}),n.jsx("p",{children:"If any provision of Terms is held by a court or other tribunal of competent jurisdiction to be invalid, illegal or unenforceable for any reason, such provision shall be eliminated or limited to the minimum extent such that the remaining provisions of Terms will continue in full force and effect."}),n.jsxs("p",{children:["23. ",n.jsx("b",{children:"Acknowledgement"})]}),n.jsx("p",{children:"BY USING SERVICE OR OTHER SERVICES PROVIDED BY US, YOU ACKNOWLEDGE THAT YOU HAVE READ THESE TERMS OF SERVICE AND AGREE TO BE BOUND BY THEM."}),n.jsxs("p",{children:["24. ",n.jsx("b",{children:"Contact Us"})]}),n.jsxs("p",{children:["Please send your feedback, comments, requests for technical support by email:"," ",n.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]})]})]})})},Mae=()=>{var B,M,L;const[e,t]=N.useState([]),[r,a]=N.useState(!0),[i,s]=N.useState(null),[l,d]=N.useState(""),[u,f]=N.useState([]),[p,m]=N.useState({status:"",subscriptionType:"",search:""}),[x,v]=N.useState(null),[j,b]=N.useState(!1),[y,C]=N.useState("");N.useEffect(()=>{(async()=>{try{const P=await(await fetch("https://hotelvirat.com/api/v1/hotel/branch")).json();f(P),P.length>0&&d(P[0]._id)}catch(U){console.error("Error fetching branches:",U)}})()},[]),N.useEffect(()=>{l&&E()},[l,p]);const E=async()=>{a(!0);try{let A=`https://hotelvirat.com/api/v1/hotel/subscription?branchId=${l}`;p.status&&(A+=`&status=${p.status}`),p.subscriptionType&&(A+=`&subscriptionType=${p.subscriptionType}`);const P=await(await fetch(A)).json();if(P.success){let I=P.data;p.search&&(I=I.filter(R=>{var W,Q,ge,q;return((Q=(W=R.userId)==null?void 0:W.name)==null?void 0:Q.toLowerCase().includes(p.search.toLowerCase()))||((q=(ge=R.productId)==null?void 0:ge.name)==null?void 0:q.toLowerCase().includes(p.search.toLowerCase()))})),t(I)}else s(P.message)}catch(A){console.error("Error fetching subscriptions:",A),s("Failed to fetch subscriptions")}finally{a(!1)}},O=async(A,U,P={})=>{try{const R=await(await fetch(`https://hotelvirat.com/api/v1/hotel/subscription/${A}/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).json();R.success?(E(),b(!1),v(null)):alert(R.message)}catch(I){console.error(`Error ${U}ing subscription:`,I),alert(`Failed to ${U} subscription`)}},S=A=>{switch(A){case"active":return"#4CAF50";case"paused":return"#FF9800";case"cancelled":return"#F44336";case"expired":return"#9E9E9E";default:return"#666"}},T=A=>{switch(A){case"weekly":return"#2196F3";case"monthly":return"#9C27B0";case"yearly":return"#FF5722";default:return"#666"}},k=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=(A,U)=>{v(A),C(U),b(!0)},F=()=>{b(!1),v(null),C("")};return r?n.jsx("div",{className:"subscription-container",children:n.jsxs("div",{className:"loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Loading subscriptions..."})]})}):n.jsxs("div",{className:"subscription-container",children:[n.jsx("div",{className:"subscription-header",children:n.jsx("h1",{children:"Subscription Management"})}),n.jsxs("div",{className:"branch-selector",children:[n.jsx("label",{htmlFor:"branch-select",children:"Select Branch:"}),n.jsx("select",{id:"branch-select",value:l,onChange:A=>d(A.target.value),className:"branch-select",children:u.map(A=>n.jsx("option",{value:A._id,children:A.name},A._id))})]}),n.jsxs("div",{className:"filters",children:[n.jsx("div",{className:"filter-group",children:n.jsx("input",{type:"text",placeholder:"Search by customer or product...",value:p.search,onChange:A=>m({...p,search:A.target.value}),className:"search-input"})}),n.jsx("div",{className:"filter-group",children:n.jsxs("select",{value:p.status,onChange:A=>m({...p,status:A.target.value}),className:"filter-select",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"paused",children:"Paused"}),n.jsx("option",{value:"cancelled",children:"Cancelled"}),n.jsx("option",{value:"expired",children:"Expired"})]})}),n.jsx("div",{className:"filter-group",children:n.jsxs("select",{value:p.subscriptionType,onChange:A=>m({...p,subscriptionType:A.target.value}),className:"filter-select",children:[n.jsx("option",{value:"",children:"All Types"}),n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"yearly",children:"Yearly"})]})})]}),n.jsxs("div",{className:"subscriptions-table-container",children:[n.jsxs("table",{className:"subscriptions-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Product"}),n.jsx("th",{children:"Type"}),n.jsx("th",{children:"Quantity"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Next Delivery"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(A=>{var U,P,I,R,W;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"customer-info",children:[n.jsx("strong",{children:(U=A.userId)==null?void 0:U.name}),n.jsx("span",{children:(P=A.userId)==null?void 0:P.mobile})]})}),n.jsx("td",{children:n.jsxs("div",{className:"product-info",children:[n.jsx("img",{src:((I=A.productId)==null?void 0:I.image)||"/placeholder-product.jpg",alt:(R=A.productId)==null?void 0:R.name,className:"product-image"}),n.jsx("span",{children:(W=A.productId)==null?void 0:W.name})]})}),n.jsx("td",{children:n.jsx("span",{className:"subscription-type",style:{backgroundColor:T(A.subscriptionType)},children:A.subscriptionType})}),n.jsx("td",{children:A.quantity}),n.jsxs("td",{children:["",A.totalPrice]}),n.jsx("td",{children:n.jsx("span",{className:"status-badge",style:{backgroundColor:S(A.status)},children:A.status})}),n.jsx("td",{children:k(A.nextDeliveryDate)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"btn-view",onClick:()=>D(A,"view"),children:"View"}),A.status==="active"&&n.jsx("button",{className:"btn-pause",onClick:()=>D(A,"pause"),children:"Pause"}),A.status==="paused"&&n.jsx("button",{className:"btn-resume",onClick:()=>O(A._id,"resume"),children:"Resume"}),A.status!=="cancelled"&&n.jsx("button",{className:"btn-cancel",onClick:()=>D(A,"cancel"),children:"Cancel"})]})})]},A._id)})})]}),e.length===0&&n.jsx("div",{className:"no-subscriptions",children:n.jsx("p",{children:"No subscriptions found for the selected criteria."})})]}),j&&x&&n.jsx("div",{className:"modal-overlay",onClick:F,children:n.jsxs("div",{className:"modal-content",onClick:A=>A.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h2",{children:[y==="view"&&"Subscription Details",y==="pause"&&"Pause Subscription",y==="cancel"&&"Cancel Subscription"]}),n.jsx("button",{className:"close-btn",onClick:F,children:""})]}),n.jsxs("div",{className:"modal-body",children:[y==="view"&&n.jsxs("div",{className:"subscription-details",children:[n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Customer:"})," ",(B=x.userId)==null?void 0:B.name]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Product:"})," ",(M=x.productId)==null?void 0:M.name]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Type:"})," ",x.subscriptionType]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Quantity:"})," ",x.quantity]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Price:"})," ",x.totalPrice]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Status:"})," ",x.status]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Start Date:"})," ",k(x.startDate)]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"End Date:"})," ",k(x.endDate)]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Next Delivery:"})," ",k(x.nextDeliveryDate)]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Delivery Address:"})," ",x.deliveryAddress]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Delivery Days:"})," ",(L=x.deliveryDays)==null?void 0:L.join(", ")]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Delivery Time:"})," ",x.deliveryTime]})]}),y==="pause"&&n.jsxs("div",{className:"pause-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"pause-reason",children:"Reason for pausing:"}),n.jsx("textarea",{id:"pause-reason",placeholder:"Enter reason for pausing subscription...",rows:"3"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"pause-end-date",children:"Pause until (optional):"}),n.jsx("input",{type:"date",id:"pause-end-date"})]}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{className:"btn-confirm",onClick:()=>{const A=document.getElementById("pause-reason").value,U=document.getElementById("pause-end-date").value;O(x._id,"pause",{pauseReason:A,pauseEndDate:U})},children:"Pause Subscription"}),n.jsx("button",{className:"btn-cancel",onClick:F,children:"Cancel"})]})]}),y==="cancel"&&n.jsxs("div",{className:"cancel-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"cancel-reason",children:"Reason for cancellation:"}),n.jsx("textarea",{id:"cancel-reason",placeholder:"Enter reason for cancelling subscription...",rows:"3"})]}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{className:"btn-confirm",onClick:()=>{const A=document.getElementById("cancel-reason").value;O(x._id,"cancel",{cancellationReason:A})},children:"Cancel Subscription"}),n.jsx("button",{className:"btn-cancel",onClick:F,children:"Keep Subscription"})]})]})]})]})})]})},Bae=()=>{var L,A,U;const[e,t]=N.useState([]),[r,a]=N.useState(!0),[i,s]=N.useState(null),[l,d]=N.useState(""),[u,f]=N.useState([]),[p,m]=N.useState({status:"",planType:"",search:""}),[x,v]=N.useState(null),[j,b]=N.useState(!1),[y,C]=N.useState(""),[E,O]=N.useState({scheduledDate:"",status:"scheduled",deliveryPerson:{name:"",phone:"",id:""},deliveryNotes:"",rating:null,feedback:""});N.useEffect(()=>{(async()=>{try{const R=await(await fetch("https://hotelvirat.com/api/v1/hotel/branch")).json();f(R),R.length>0&&d(R[0]._id)}catch(I){console.error("Error fetching branches:",I)}})()},[]),N.useEffect(()=>{l&&S()},[l,p]);const S=async()=>{a(!0);try{let P=`https://hotelvirat.com/api/v1/hotel/subscription-order?branchId=${l}`;p.status&&(P+=`&status=${p.status}`),p.planType&&(P+=`&planType=${p.planType}`);const R=await(await fetch(P)).json();if(R.success){let W=R.data;p.search&&(W=W.filter(Q=>{var ge,q,Y,z;return((q=(ge=Q.userId)==null?void 0:ge.name)==null?void 0:q.toLowerCase().includes(p.search.toLowerCase()))||((z=(Y=Q.productId)==null?void 0:Y.name)==null?void 0:z.toLowerCase().includes(p.search.toLowerCase()))})),t(W)}else s(R.message)}catch(P){console.error("Error fetching subscription orders:",P),s("Failed to fetch subscription orders")}finally{a(!1)}},T=P=>{switch(P){case"active":return"#4CAF50";case"paused":return"#FF9800";case"cancelled":return"#F44336";case"completed":return"#9E9E9E";default:return"#666"}},k=P=>{switch(P){case"daily":return"#2196F3";case"weekly":return"#9C27B0";case"monthly":return"#FF5722";case"yearly":return"#4CAF50";default:return"#666"}},D=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=(P,I)=>{v(P),C(I),b(!0)},B=()=>{b(!1),v(null),C(""),O({scheduledDate:"",status:"scheduled",deliveryPerson:{name:"",phone:"",id:""},deliveryNotes:"",rating:null,feedback:""})},M=async()=>{try{const I=await(await fetch(`https://hotelvirat.com/api/v1/hotel/subscription-order/${x._id}/delivery`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();I.success?(alert("Delivery status updated successfully!"),S(),B()):alert("Error updating delivery status: "+I.message)}catch(P){console.error("Error updating delivery status:",P),alert("Error updating delivery status")}};return r?n.jsx("div",{className:"subscription-management-container",children:n.jsxs("div",{className:"loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Loading subscription orders..."})]})}):n.jsxs("div",{className:"subscription-management-container",children:[n.jsx("div",{className:"subscription-management-header",children:n.jsx("h1",{children:"Subscription Order Management"})}),n.jsxs("div",{className:"branch-selector",children:[n.jsx("label",{htmlFor:"branch-select",children:"Select Branch:"}),n.jsx("select",{id:"branch-select",value:l,onChange:P=>d(P.target.value),className:"branch-select",children:u.map(P=>n.jsx("option",{value:P._id,children:P.name},P._id))})]}),n.jsxs("div",{className:"filters",children:[n.jsx("div",{className:"filter-group",children:n.jsx("input",{type:"text",placeholder:"Search by customer or product...",value:p.search,onChange:P=>m({...p,search:P.target.value}),className:"search-input"})}),n.jsx("div",{className:"filter-group",children:n.jsxs("select",{value:p.status,onChange:P=>m({...p,status:P.target.value}),className:"filter-select",children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"paused",children:"Paused"}),n.jsx("option",{value:"cancelled",children:"Cancelled"}),n.jsx("option",{value:"completed",children:"Completed"})]})}),n.jsx("div",{className:"filter-group",children:n.jsxs("select",{value:p.planType,onChange:P=>m({...p,planType:P.target.value}),className:"filter-select",children:[n.jsx("option",{value:"",children:"All Plans"}),n.jsx("option",{value:"daily",children:"Daily"}),n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"yearly",children:"Yearly"})]})})]}),n.jsxs("div",{className:"subscription-orders-table-container",children:[n.jsxs("table",{className:"subscription-orders-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer"}),n.jsx("th",{children:"Product"}),n.jsx("th",{children:"Plan"}),n.jsx("th",{children:"Price"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Next Delivery"}),n.jsx("th",{children:"Cycles"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(P=>{var I,R,W,Q,ge;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"customer-info",children:[n.jsx("strong",{children:(I=P.userId)==null?void 0:I.name}),n.jsx("span",{children:(R=P.userId)==null?void 0:R.mobile})]})}),n.jsx("td",{children:n.jsxs("div",{className:"product-info",children:[n.jsx("img",{src:((W=P.productId)==null?void 0:W.image)||"/placeholder-product.jpg",alt:(Q=P.productId)==null?void 0:Q.name,className:"product-image"}),n.jsx("span",{children:(ge=P.productId)==null?void 0:ge.name})]})}),n.jsx("td",{children:n.jsx("span",{className:"plan-type",style:{backgroundColor:k(P.planType)},children:P.planType})}),n.jsxs("td",{children:["",P.price]}),n.jsx("td",{children:n.jsx("span",{className:"status-badge",style:{backgroundColor:T(P.status)},children:P.status})}),n.jsx("td",{children:D(P.nextDeliveryDate)}),n.jsxs("td",{children:[P.completedCycles,"/",P.totalCycles||""]}),n.jsx("td",{children:n.jsx("div",{className:"action-buttons",children:n.jsx("button",{className:"btn-view",onClick:()=>F(P,"view"),children:"View"})})})]},P._id)})})]}),e.length===0&&n.jsx("div",{className:"no-subscriptions",children:n.jsx("p",{children:"No subscription orders found for the selected criteria."})})]}),j&&x&&n.jsx("div",{className:"modal-overlay",onClick:B,children:n.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:"Subscription Order Details"}),n.jsx("button",{className:"close-btn",onClick:B,children:""})]}),n.jsxs("div",{className:"modal-body",children:[y==="view"&&n.jsxs("div",{className:"subscription-details",children:[n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Customer:"})," ",(L=x.userId)==null?void 0:L.name]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Product:"})," ",(A=x.productId)==null?void 0:A.name]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Plan Type:"})," ",x.planType]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Price:"})," ",x.price]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Status:"})," ",x.status]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Start Date:"})," ",D(x.startDate)]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Delivery Address:"})," ",x.deliveryAddress]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Delivery Days:"})," ",(U=x.deliveryDays)==null?void 0:U.join(", ")]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Delivery Time:"})," ",x.deliveryTime]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Payment Method:"})," ",x.paymentMethod]}),x.deliveryTracking&&x.deliveryTracking.length>0&&n.jsxs("div",{className:"delivery-tracking-section",children:[n.jsx("h4",{children:"Recent Deliveries"}),x.deliveryTracking.slice(0,3).map((P,I)=>n.jsxs("div",{className:"delivery-item",children:[n.jsxs("div",{className:"delivery-status",children:[n.jsx("span",{className:`status-badge ${P.status}`,children:P.status.replace("_"," ").toUpperCase()}),n.jsx("span",{className:"delivery-date",children:D(P.scheduledDate)})]}),P.deliveryPerson&&n.jsxs("div",{className:"delivery-person",children:["By: ",P.deliveryPerson.name]}),P.deliveryNotes&&n.jsx("div",{className:"delivery-notes",children:P.deliveryNotes})]},I))]}),n.jsx("div",{className:"modal-actions",children:n.jsx("button",{className:"btn-update-delivery",onClick:()=>{C("delivery"),O({scheduledDate:new Date().toISOString().split("T")[0],status:"scheduled",deliveryPerson:{name:"",phone:"",id:""},deliveryNotes:"",rating:null,feedback:""})},children:"Update Delivery Status"})})]}),y==="delivery"&&n.jsxs("div",{className:"delivery-form",children:[n.jsx("h3",{children:"Update Delivery Status"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"scheduledDate",children:"Scheduled Date:"}),n.jsx("input",{type:"date",id:"scheduledDate",value:E.scheduledDate,onChange:P=>O({...E,scheduledDate:P.target.value}),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"status",children:"Delivery Status:"}),n.jsxs("select",{id:"status",value:E.status,onChange:P=>O({...E,status:P.target.value}),required:!0,children:[n.jsx("option",{value:"scheduled",children:"Scheduled"}),n.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),n.jsx("option",{value:"delivered",children:"Delivered"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"rescheduled",children:"Rescheduled"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"deliveryPersonName",children:"Delivery Person Name:"}),n.jsx("input",{type:"text",id:"deliveryPersonName",value:E.deliveryPerson.name,onChange:P=>O({...E,deliveryPerson:{...E.deliveryPerson,name:P.target.value}}),placeholder:"Enter delivery person name"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"deliveryPersonPhone",children:"Delivery Person Phone:"}),n.jsx("input",{type:"tel",id:"deliveryPersonPhone",value:E.deliveryPerson.phone,onChange:P=>O({...E,deliveryPerson:{...E.deliveryPerson,phone:P.target.value}}),placeholder:"Enter phone number"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"deliveryNotes",children:"Delivery Notes:"}),n.jsx("textarea",{id:"deliveryNotes",value:E.deliveryNotes,onChange:P=>O({...E,deliveryNotes:P.target.value}),placeholder:"Enter delivery notes",rows:"3"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"rating",children:"Customer Rating (1-5):"}),n.jsxs("select",{id:"rating",value:E.rating||"",onChange:P=>O({...E,rating:P.target.value?parseInt(P.target.value):null}),children:[n.jsx("option",{value:"",children:"No rating"}),n.jsx("option",{value:"1",children:"1 Star"}),n.jsx("option",{value:"2",children:"2 Stars"}),n.jsx("option",{value:"3",children:"3 Stars"}),n.jsx("option",{value:"4",children:"4 Stars"}),n.jsx("option",{value:"5",children:"5 Stars"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"feedback",children:"Customer Feedback:"}),n.jsx("textarea",{id:"feedback",value:E.feedback,onChange:P=>O({...E,feedback:P.target.value}),placeholder:"Enter customer feedback",rows:"3"})]}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{className:"btn-confirm",onClick:M,children:"Update Delivery"}),n.jsx("button",{className:"btn-cancel",onClick:()=>C("view"),children:"Cancel"})]})]})]})]})})]})},Fae=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState(""),[u,f]=N.useState(!0),[p,m]=N.useState(!1),[x,v]=N.useState(""),[j,b]=N.useState(null),[y,C]=N.useState({productId:"",description:"",image:null,isActive:!0});N.useEffect(()=>{(async()=>{try{const P=await(await fetch("https://hotelvirat.com/api/v1/hotel/branch")).json();a(P),P.length>0&&d(P[0])}catch(U){console.error("Error fetching branches:",U)}})()},[]);const E=async()=>{try{const A=`https://hotelvirat.com/api/v1/hotel/menu?t=${Date.now()}`,U=await fetch(A,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}});if(!U.ok)throw new Error(`HTTP error! status: ${U.status}`);const P=await U.json();Array.isArray(P)?s(P):s([])}catch(A){console.error("Error fetching products:",A),s([])}};N.useEffect(()=>{E()},[]);const O=async()=>{if(!(!l||!l._id))try{console.log(" Fetching meals for branch:",l._id);const A=`https://hotelvirat.com/api/v1/hotel/meal-of-the-day/branch/${l._id}`;console.log(" API URL:",A);const U=await fetch(A);if(console.log(" Response status:",U.status),console.log(" Response ok:",U.ok),!U.ok)throw new Error(`HTTP error! status: ${U.status}`);const P=await U.json();console.log(" API response:",P),P.success&&Array.isArray(P.data)?(console.log(" Setting meals:",P.data.length,"items"),t(P.data)):(console.error(" Invalid API response:",P),t([]))}catch(A){console.error(" Error fetching meals:",A),t([])}};N.useEffect(()=>{l&&l._id&&O()},[l]);const S=async A=>{if(A.preventDefault(),!y.productId||!l){alert("Please select a product and branch");return}try{const U={productId:y.productId,branchId:l._id,description:y.description||"",isActive:y.isActive};if(y.image&&y.image instanceof File){const P=new FormData;P.append("image",y.image),Object.keys(U).forEach(I=>{P.append(I,U[I])}),await fetch("https://hotelvirat.com/api/v1/hotel/meal-of-the-day",{method:"POST",body:P})}else await fetch("https://hotelvirat.com/api/v1/hotel/meal-of-the-day",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});O(),C({productId:"",description:"",image:null,isActive:!0})}catch(U){console.error("Error saving meal:",U)}},T=async A=>{if(window.confirm("Are you sure you want to delete this meal?"))try{await fetch(`https://hotelvirat.com/api/v1/hotel/meal-of-the-day/${A}`,{method:"DELETE"}),O()}catch(U){console.error("Error deleting meal:",U)}},k=async(A,U)=>{try{(await fetch(`https://hotelvirat.com/api/v1/hotel/meal-of-the-day/${A}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!U})})).ok&&O()}catch(P){console.error("Error updating meal status:",P)}},D=A=>{const U=A.target.files[0];U&&C({...y,image:U})},F=A=>{const{name:U,value:P,type:I,checked:R}=A.target;C(W=>({...W,[U]:I==="checkbox"?R:P}))},B=A=>{const U=A.target.value,P=r.find(I=>I._id===U);d(P)},M=A=>{const U=i.find(P=>P._id===A);return U?U.name:"Unknown Product"},L=A=>{const U=i.find(P=>P._id===A);return U?U.price:0};return n.jsxs("div",{className:"meal-of-the-day-container",children:[n.jsxs("div",{className:"header",children:[n.jsx("h2",{children:" Meal of the Day Management"}),n.jsx("p",{children:"Create and manage daily special meals for each branch with beautiful presentation"})]}),n.jsxs("div",{className:"branch-selection",children:[n.jsx("label",{htmlFor:"branchSelect",children:" Select Branch"}),n.jsxs("select",{id:"branchSelect",value:l?l._id:"",onChange:B,className:"form-control",children:[n.jsx("option",{value:"",children:"Choose a branch to manage meals..."}),r.map(A=>n.jsx("option",{value:A._id,children:A.name},A._id))]})]}),l&&n.jsxs("div",{className:"add-meal-form",children:[n.jsx("h3",{children:" Add New Meal of the Day"}),n.jsxs("form",{onSubmit:S,children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"productId",children:" Select Product *"}),n.jsxs("select",{id:"productId",name:"productId",value:y.productId,onChange:F,className:"form-control",required:!0,children:[n.jsx("option",{value:"",children:"Choose a product from the menu..."}),i.length===0?n.jsx("option",{value:"",disabled:!0,children:"No products available"}):i.map(A=>n.jsxs("option",{value:A._id,children:[A.name," - ",A.price]},A._id))]}),i.length===0&&n.jsx("small",{className:"text-muted",children:" No products found. Please add products to the menu first."})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"description",children:" Description"}),n.jsx("textarea",{id:"description",name:"description",value:y.description,onChange:F,className:"form-control",rows:"3",placeholder:"Describe this special meal... (optional)"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"image",children:" Custom Image (Optional)"}),n.jsx("input",{type:"file",id:"image",name:"image",onChange:D,className:"form-control",accept:"image/*"}),n.jsx("small",{className:"text-muted",children:" If no custom image is provided, the product's default image will be used."})]}),n.jsx("div",{className:"form-group",children:n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:F})," Active (Show this meal to customers)"]})}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:" Add Meal of the Day"})]})]}),l&&n.jsxs("div",{className:"meals-list",children:[n.jsxs("h3",{children:[" Current Meals for ",l.name]}),!e||e.length===0?n.jsx("p",{children:" No meals of the day set for this branch yet. Add your first special meal above!"}):n.jsx("div",{className:"meals-grid",children:Array.isArray(e)&&e.map(A=>n.jsxs("div",{className:"meal-card",children:[n.jsxs("div",{className:"meal-image",children:[A.image?n.jsx("img",{src:A.image,alt:M(A.productId),className:"img-fluid"}):n.jsx("div",{className:"no-image",children:" No Image Available"}),n.jsx("div",{className:`status-badge ${A.isActive?"active":"inactive"}`,children:A.isActive?" Active":" Inactive"})]}),n.jsxs("div",{className:"meal-info",children:[n.jsx("h4",{children:M(A.productId)}),n.jsxs("p",{className:"price",children:["",L(A.productId)]}),A.description&&n.jsx("p",{className:"description",children:A.description}),n.jsxs("div",{className:"meal-actions",children:[n.jsx("button",{className:`btn btn-sm ${A.isActive?"btn-secondary":"btn-success"}`,onClick:()=>k(A._id,A.isActive),children:A.isActive?" Deactivate":" Activate"}),n.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>T(A._id),children:" Delete"})]})]})]},A._id))})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var og={};og.version="0.18.5";var C5=1252,Lae=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],A5=function(e){Lae.indexOf(e)!=-1&&(C5=e)};function zae(){A5(1252)}var Xf=function(e){A5(e)};function $ae(){Xf(1200),zae()}var Up=function(t){return String.fromCharCode(t)},$I=function(t){return String.fromCharCode(t)},lg,Mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Qf(e){for(var t="",r=0,a=0,i=0,s=0,l=0,d=0,u=0,f=0;f<e.length;)r=e.charCodeAt(f++),s=r>>2,a=e.charCodeAt(f++),l=(r&3)<<4|a>>4,i=e.charCodeAt(f++),d=(a&15)<<2|i>>6,u=i&63,isNaN(a)?d=u=64:isNaN(i)&&(u=64),t+=Mo.charAt(s)+Mo.charAt(l)+Mo.charAt(d)+Mo.charAt(u);return t}function no(e){var t="",r=0,a=0,i=0,s=0,l=0,d=0,u=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var f=0;f<e.length;)s=Mo.indexOf(e.charAt(f++)),l=Mo.indexOf(e.charAt(f++)),r=s<<2|l>>4,t+=String.fromCharCode(r),d=Mo.indexOf(e.charAt(f++)),a=(l&15)<<4|d>>2,d!==64&&(t+=String.fromCharCode(a)),u=Mo.indexOf(e.charAt(f++)),i=(d&3)<<6|u,u!==64&&(t+=String.fromCharCode(i));return t}var Tr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),lo=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Bl(e){return Tr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function UI(e){return Tr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Wi=function(t){return Tr?lo(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function l0(e){if(typeof ArrayBuffer>"u")return Wi(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function vh(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Uae(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Jn=Tr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:lo(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function qae(e){for(var t=[],r=0,a=e.length+250,i=Bl(e.length+255),s=0;s<e.length;++s){var l=e.charCodeAt(s);if(l<128)i[r++]=l;else if(l<2048)i[r++]=192|l>>6&31,i[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var d=e.charCodeAt(++s)&1023;i[r++]=240|l>>8&7,i[r++]=128|l>>2&63,i[r++]=128|d>>6&15|(l&3)<<4,i[r++]=128|d&63}else i[r++]=224|l>>12&15,i[r++]=128|l>>6&63,i[r++]=128|l&63;r>a&&(t.push(i.slice(0,r)),r=0,i=Bl(65535),a=65530)}return t.push(i.slice(0,r)),Jn(t)}var af=/\u0000/g,qp=/[\u0001-\u0006]/g;function Gc(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Gi(e,t){var r=""+e;return r.length>=t?r:hn("0",t-r.length)+r}function _S(e,t){var r=""+e;return r.length>=t?r:hn(" ",t-r.length)+r}function cg(e,t){var r=""+e;return r.length>=t?r:r+hn(" ",t-r.length)}function Wae(e,t){var r=""+Math.round(e);return r.length>=t?r:hn("0",t-r.length)+r}function Hae(e,t){var r=""+e;return r.length>=t?r:hn("0",t-r.length)+r}var qI=Math.pow(2,32);function Dc(e,t){if(e>qI||e<-qI)return Wae(e,t);var r=Math.round(e);return Hae(r,t)}function dg(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var WI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],jj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Gae(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var pn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},HI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Kae={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ug(e,t,r){for(var a=e<0?-1:1,i=e*a,s=0,l=1,d=0,u=1,f=0,p=0,m=Math.floor(i);f<t&&(m=Math.floor(i),d=m*l+s,p=m*f+u,!(i-m<5e-8));)i=1/(i-m),s=l,l=d,u=f,f=p;if(p>t&&(f>t?(p=u,d=s):(p=f,d=l)),!r)return[0,a*d,p];var x=Math.floor(a*d/p);return[x,a*d-x*p,p]}function Wp(e,t,r){if(e>2958465||e<0)return null;var a=e|0,i=Math.floor(86400*(e-a)),s=0,l=[],d={D:a,T:i,u:86400*(e-a)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),t&&t.date1904&&(a+=1462),d.u>.9999&&(d.u=0,++i==86400&&(d.T=i=0,++a,++d.D)),a===60)l=r?[1317,10,29]:[1900,2,29],s=3;else if(a===0)l=r?[1317,8,29]:[1900,1,0],s=6;else{a>60&&--a;var u=new Date(1900,0,1);u.setDate(u.getDate()+a-1),l=[u.getFullYear(),u.getMonth()+1,u.getDate()],s=u.getDay(),a<60&&(s=(s+6)%7),r&&(s=eie(u,l))}return d.y=l[0],d.m=l[1],d.d=l[2],d.S=i%60,i=Math.floor(i/60),d.M=i%60,i=Math.floor(i/60),d.H=i,d.q=s,d}var E5=new Date(1899,11,31,0,0,0),Vae=E5.getTime(),Yae=new Date(1900,2,1,0,0,0);function O5(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Yae&&(r+=24*60*60*1e3),(r-(Vae+(e.getTimezoneOffset()-E5.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function kS(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Xae(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Qae(e){var t=e<0?12:11,r=kS(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Jae(e){var t=kS(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Zae(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Qae(e):t===10?r=e.toFixed(10).substr(0,12):r=Jae(e),kS(Xae(r.toUpperCase()))}function lw(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Zae(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Uo(14,O5(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function eie(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function tie(e,t,r,a){var i="",s=0,l=0,d=r.y,u,f=0;switch(e){case 98:d=r.y+543;case 121:switch(t.length){case 1:case 2:u=d%100,f=2;break;default:u=d%1e4,f=4;break}break;case 109:switch(t.length){case 1:case 2:u=r.m,f=t.length;break;case 3:return jj[r.m-1][1];case 5:return jj[r.m-1][0];default:return jj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:u=r.d,f=t.length;break;case 3:return WI[r.q][0];default:return WI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:u=1+(r.H+11)%12,f=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:u=r.H,f=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:u=r.M,f=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Gi(r.S,t.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,s=Math.round(l*(r.S+r.u)),s>=60*l&&(s=0),t==="s"?s===0?"0":""+s/l:(i=Gi(s,2+a),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":u=r.D*24+r.H;break;case"[m]":case"[mm]":u=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":u=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}f=t.length===3?1:2;break;case 101:u=d,f=1;break}var p=f>0?Gi(u,f):"";return p}function Bo(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var _5=/%/g;function rie(e,t,r){var a=t.replace(_5,""),i=t.length-a.length;return Vs(e,a,r*Math.pow(10,2*i))+hn("%",i)}function nie(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Vs(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function k5(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+k5(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(t/Math.pow(10,s)).toPrecision(a+1+(i+s)%i),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+s):r+="E+"+(l-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,u,f,p){return u+f+p.substr(0,(i+s)%i)+"."+p.substr(s)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var I5=/# (\?+)( ?)\/( ?)(\d+)/;function aie(e,t,r){var a=parseInt(e[4],10),i=Math.round(t*a),s=Math.floor(i/a),l=i-s*a,d=a;return r+(s===0?"":""+s)+" "+(l===0?hn(" ",e[1].length+1+e[4].length):_S(l,e[1].length)+e[2]+"/"+e[3]+Gi(d,e[4].length))}function iie(e,t,r){return r+(t===0?"":""+t)+hn(" ",e[1].length+2+e[4].length)}var D5=/^#*0*\.([0#]+)/,R5=/\).*[0#]/,P5=/\(###\) ###\\?-####/;function ja(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function GI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function KI(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function sie(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function oie(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function vi(e,t,r){if(e.charCodeAt(0)===40&&!t.match(R5)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?vi("n",a,r):"("+vi("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return nie(e,t,r);if(t.indexOf("%")!==-1)return rie(e,t,r);if(t.indexOf("E")!==-1)return k5(t,r);if(t.charCodeAt(0)===36)return"$"+vi(e,t.substr(t.charAt(1)==" "?2:1),r);var i,s,l,d,u=Math.abs(r),f=r<0?"-":"";if(t.match(/^00+$/))return f+Dc(u,t.length);if(t.match(/^[#?]+$/))return i=Dc(r,0),i==="0"&&(i=""),i.length>t.length?i:ja(t.substr(0,t.length-i.length))+i;if(s=t.match(I5))return aie(s,u,f);if(t.match(/^#+0+$/))return f+Dc(u,t.length-t.indexOf("0"));if(s=t.match(D5))return i=GI(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ja(s[1])).replace(/\.$/,"."+ja(s[1])).replace(/\.(\d*)$/,function(j,b){return"."+b+hn("0",ja(s[1]).length-b.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return f+GI(u,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return f+Bo(Dc(u,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+vi(e,t,-r):Bo(""+(Math.floor(r)+sie(r,s[1].length)))+"."+Gi(KI(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return vi(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Gc(vi(e,t.replace(/[\\-]/g,""),r)),l=0,Gc(Gc(t.replace(/\\/g,"")).replace(/[0#]/g,function(j){return l<i.length?i.charAt(l++):j==="0"?"0":""}));if(t.match(P5))return i=vi(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var p="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(s[4].length,7),d=ug(u,Math.pow(10,l)-1,!1),i=""+f,p=Vs("n",s[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),i+=p+s[2]+"/"+s[3],p=cg(d[2],l),p.length<s[4].length&&(p=ja(s[4].substr(s[4].length-p.length))+p),i+=p,i;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(s[1].length,s[4].length),7),d=ug(u,Math.pow(10,l)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?_S(d[1],l)+s[2]+"/"+s[3]+cg(d[2],l):hn(" ",2*l+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=Dc(r,0),t.length<=i.length?i:ja(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),l=i.indexOf(".");var m=t.indexOf(".")-l,x=t.length-i.length-m;return ja(t.substr(0,m)+i+t.substr(t.length-x))}if(s=t.match(/^00,000\.([#0]*0)$/))return l=KI(r,s[1].length),r<0?"-"+vi(e,t,-r):Bo(oie(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(j){return"00,"+(j.length<3?Gi(0,3-j.length):"")+j})+"."+Gi(l,s[1].length);switch(t){case"###,##0.00":return vi(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var v=Bo(Dc(u,0));return v!=="0"?f+v:"";case"###,###.00":return vi(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return vi(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function lie(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Vs(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function cie(e,t,r){var a=t.replace(_5,""),i=t.length-a.length;return Vs(e,a,r*Math.pow(10,2*i))+hn("%",i)}function M5(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+M5(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),r=(t/Math.pow(10,s)).toPrecision(a+1+(i+s)%i),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+s):r+="E+"+(l-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,u,f,p){return u+f+p.substr(0,(i+s)%i)+"."+p.substr(s)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function os(e,t,r){if(e.charCodeAt(0)===40&&!t.match(R5)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?os("n",a,r):"("+os("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return lie(e,t,r);if(t.indexOf("%")!==-1)return cie(e,t,r);if(t.indexOf("E")!==-1)return M5(t,r);if(t.charCodeAt(0)===36)return"$"+os(e,t.substr(t.charAt(1)==" "?2:1),r);var i,s,l,d,u=Math.abs(r),f=r<0?"-":"";if(t.match(/^00+$/))return f+Gi(u,t.length);if(t.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>t.length?i:ja(t.substr(0,t.length-i.length))+i;if(s=t.match(I5))return iie(s,u,f);if(t.match(/^#+0+$/))return f+Gi(u,t.length-t.indexOf("0"));if(s=t.match(D5))return i=(""+r).replace(/^([^\.]+)$/,"$1."+ja(s[1])).replace(/\.$/,"."+ja(s[1])),i=i.replace(/\.(\d*)$/,function(j,b){return"."+b+hn("0",ja(s[1]).length-b.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return f+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return f+Bo(""+u);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+os(e,t,-r):Bo(""+r)+"."+hn("0",s[1].length);if(s=t.match(/^#,#*,#0/))return os(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Gc(os(e,t.replace(/[\\-]/g,""),r)),l=0,Gc(Gc(t.replace(/\\/g,"")).replace(/[0#]/g,function(j){return l<i.length?i.charAt(l++):j==="0"?"0":""}));if(t.match(P5))return i=os(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var p="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(s[4].length,7),d=ug(u,Math.pow(10,l)-1,!1),i=""+f,p=Vs("n",s[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),i+=p+s[2]+"/"+s[3],p=cg(d[2],l),p.length<s[4].length&&(p=ja(s[4].substr(s[4].length-p.length))+p),i+=p,i;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(s[1].length,s[4].length),7),d=ug(u,Math.pow(10,l)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?_S(d[1],l)+s[2]+"/"+s[3]+cg(d[2],l):hn(" ",2*l+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:ja(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),l=i.indexOf(".");var m=t.indexOf(".")-l,x=t.length-i.length-m;return ja(t.substr(0,m)+i+t.substr(t.length-x))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+os(e,t,-r):Bo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(j){return"00,"+(j.length<3?Gi(0,3-j.length):"")+j})+"."+Gi(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var v=Bo(""+u);return v!=="0"?f+v:"";default:if(t.match(/\.[0#?]*$/))return os(e,t.slice(0,t.lastIndexOf(".")),r)+ja(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Vs(e,t,r){return(r|0)===r?os(e,t,r):vi(e,t,r)}function die(e){for(var t=[],r=!1,a=0,i=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(i,a-i),i=a+1}if(t[t.length]=e.substr(i),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var B5=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function F5(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":dg(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(B5))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function uie(e,t,r,a){for(var i=[],s="",l=0,d="",u="t",f,p,m,x="H";l<e.length;)switch(d=e.charAt(l)){case"G":if(!dg(e,l))throw new Error("unrecognized character "+d+" in "+e);i[i.length]={t:"G",v:"General"},l+=7;break;case'"':for(s="";(m=e.charCodeAt(++l))!==34&&l<e.length;)s+=String.fromCharCode(m);i[i.length]={t:"t",v:s},++l;break;case"\\":var v=e.charAt(++l),j=v==="("||v===")"?v:"t";i[i.length]={t:j,v},++l;break;case"_":i[i.length]={t:"t",v:" "},l+=2;break;case"@":i[i.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(f==null&&(f=Wp(t,r,e.charAt(l+1)==="2"),f==null))return"";i[i.length]={t:"X",v:e.substr(l,2)},u=d,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||f==null&&(f=Wp(t,r),f==null))return"";for(s=d;++l<e.length&&e.charAt(l).toLowerCase()===d;)s+=d;d==="m"&&u.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=x),i[i.length]={t:d,v:s},u=d;break;case"A":case"a":case"":var b={t:d,v:d};if(f==null&&(f=Wp(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(f!=null&&(b.v=f.H>=12?"P":"A"),b.t="T",x="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(f!=null&&(b.v=f.H>=12?"PM":"AM"),b.t="T",l+=5,x="h"):e.substr(l,5).toUpperCase()==="/"?(f!=null&&(b.v=f.H>=12?"":""),b.t="T",l+=5,x="h"):(b.t="t",++l),f==null&&b.t==="T")return"";i[i.length]=b,u=d;break;case"[":for(s=d;e.charAt(l++)!=="]"&&l<e.length;)s+=e.charAt(l);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(B5)){if(f==null&&(f=Wp(t,r),f==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},u=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",F5(e)||(i[i.length]={t:"t",v:s}));break;case".":if(f!=null){for(s=d;++l<e.length&&(d=e.charAt(l))==="0";)s+=d;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=d;++l<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(l))>-1;)s+=d;i[i.length]={t:"n",v:s};break;case"?":for(s=d;e.charAt(++l)===d;)s+=d;i[i.length]={t:d,v:s},u=d;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":i[i.length]={t:a===1?"t":d,v:d},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=d;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)s+=e.charAt(l);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:d,v:d},++l;break;case"$":i[i.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+e);i[i.length]={t:"t",v:d},++l;break}var y=0,C=0,E;for(l=i.length-1,u="t";l>=0;--l)switch(i[l].t){case"h":case"H":i[l].t=x,u="h",y<1&&(y=1);break;case"s":(E=i[l].v.match(/\.0+$/))&&(C=Math.max(C,E[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":u=i[l].t;break;case"m":u==="s"&&(i[l].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&i[l].v.match(/[Hh]/)&&(y=1),y<2&&i[l].v.match(/[Mm]/)&&(y=2),y<3&&i[l].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M);break}var O="",S;for(l=0;l<i.length;++l)switch(i[l].t){case"t":case"T":case" ":case"D":break;case"X":i[l].v="",i[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[l].v=tie(i[l].t.charCodeAt(0),i[l].v,f,C),i[l].t="t";break;case"n":case"?":for(S=l+1;i[S]!=null&&((d=i[S].t)==="?"||d==="D"||(d===" "||d==="t")&&i[S+1]!=null&&(i[S+1].t==="?"||i[S+1].t==="t"&&i[S+1].v==="/")||i[l].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(i[S].v==="/"||i[S].v===" "&&i[S+1]!=null&&i[S+1].t=="?"));)i[l].v+=i[S].v,i[S]={v:"",t:";"},++S;O+=i[l].v,l=S-1;break;case"G":i[l].t="t",i[l].v=lw(t,r);break}var T="",k,D;if(O.length>0){O.charCodeAt(0)==40?(k=t<0&&O.charCodeAt(0)===45?-t:t,D=Vs("n",O,k)):(k=t<0&&a>1?-t:t,D=Vs("n",O,k),k<0&&i[0]&&i[0].t=="t"&&(D=D.substr(1),i[0].v="-"+i[0].v)),S=D.length-1;var F=i.length;for(l=0;l<i.length;++l)if(i[l]!=null&&i[l].t!="t"&&i[l].v.indexOf(".")>-1){F=l;break}var B=i.length;if(F===i.length&&D.indexOf("E")===-1){for(l=i.length-1;l>=0;--l)i[l]==null||"n?".indexOf(i[l].t)===-1||(S>=i[l].v.length-1?(S-=i[l].v.length,i[l].v=D.substr(S+1,i[l].v.length)):S<0?i[l].v="":(i[l].v=D.substr(0,S+1),S=-1),i[l].t="t",B=l);S>=0&&B<i.length&&(i[B].v=D.substr(0,S+1)+i[B].v)}else if(F!==i.length&&D.indexOf("E")===-1){for(S=D.indexOf(".")-1,l=F;l>=0;--l)if(!(i[l]==null||"n?".indexOf(i[l].t)===-1)){for(p=i[l].v.indexOf(".")>-1&&l===F?i[l].v.indexOf(".")-1:i[l].v.length-1,T=i[l].v.substr(p+1);p>=0;--p)S>=0&&(i[l].v.charAt(p)==="0"||i[l].v.charAt(p)==="#")&&(T=D.charAt(S--)+T);i[l].v=T,i[l].t="t",B=l}for(S>=0&&B<i.length&&(i[B].v=D.substr(0,S+1)+i[B].v),S=D.indexOf(".")+1,l=F;l<i.length;++l)if(!(i[l]==null||"n?(".indexOf(i[l].t)===-1&&l!==F)){for(p=i[l].v.indexOf(".")>-1&&l===F?i[l].v.indexOf(".")+1:0,T=i[l].v.substr(0,p);p<i[l].v.length;++p)S<D.length&&(T+=D.charAt(S++));i[l].v=T,i[l].t="t",B=l}}}for(l=0;l<i.length;++l)i[l]!=null&&"n?".indexOf(i[l].t)>-1&&(k=a>1&&t<0&&l>0&&i[l-1].v==="-"?-t:t,i[l].v=Vs(i[l].t,i[l].v,k),i[l].t="t");var M="";for(l=0;l!==i.length;++l)i[l]!=null&&(M+=i[l].v);return M}var VI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function YI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function fie(e,t){var r=die(e),a=r.length,i=r[a-1].indexOf("@");if(a<4&&i>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(VI),d=r[1].match(VI);return YI(t,l)?[a,r[0]]:YI(t,d)?[a,r[1]]:[a,r[l!=null&&d!=null?2:1]]}return[a,s]}function Uo(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:pn)[e],a==null&&(a=r.table&&r.table[HI[e]]||pn[HI[e]]),a==null&&(a=Kae[e]||"General");break}if(dg(a,0))return lw(t,r);t instanceof Date&&(t=O5(t,r.date1904));var i=fie(a,t);if(dg(i[1]))return lw(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return uie(i[1],t,r,i[0])}function L5(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(pn[r]==null){t<0&&(t=r);continue}if(pn[r]==e){t=r;break}}t<0&&(t=391)}return pn[t]=e,t}function c0(e){for(var t=0;t!=392;++t)e[t]!==void 0&&L5(e[t],t)}function d0(){pn=Gae()}var z5=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function hie(e){var t=typeof e=="number"?pn[e]:e;return t=t.replace(z5,"(\\d+)"),new RegExp("^"+t+"$")}function pie(e,t,r){var a=-1,i=-1,s=-1,l=-1,d=-1,u=-1;(t.match(z5)||[]).forEach(function(m,x){var v=parseInt(r[x+1],10);switch(m.toLowerCase().charAt(0)){case"y":a=v;break;case"d":s=v;break;case"h":l=v;break;case"s":u=v;break;case"m":l>=0?d=v:i=v;break}}),u>=0&&d==-1&&i>=0&&(d=i,i=-1);var f=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);f.length==7&&(f="0"+f),f.length==8&&(f="20"+f);var p=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return l==-1&&d==-1&&u==-1?f:a==-1&&i==-1&&s==-1?p:f+"T"+p}var mie=function(){var e={};e.version="1.2.0";function t(){for(var D=0,F=new Array(256),B=0;B!=256;++B)D=B,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,F[B]=D;return typeof Int32Array<"u"?new Int32Array(F):F}var r=t();function a(D){var F=0,B=0,M=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)L[M]=D[M];for(M=0;M!=256;++M)for(B=D[M],F=256+M;F<4096;F+=256)B=L[F]=B>>>8^D[B&255];var A=[];for(M=1;M!=16;++M)A[M-1]=typeof Int32Array<"u"?L.subarray(M*256,M*256+256):L.slice(M*256,M*256+256);return A}var i=a(r),s=i[0],l=i[1],d=i[2],u=i[3],f=i[4],p=i[5],m=i[6],x=i[7],v=i[8],j=i[9],b=i[10],y=i[11],C=i[12],E=i[13],O=i[14];function S(D,F){for(var B=F^-1,M=0,L=D.length;M<L;)B=B>>>8^r[(B^D.charCodeAt(M++))&255];return~B}function T(D,F){for(var B=F^-1,M=D.length-15,L=0;L<M;)B=O[D[L++]^B&255]^E[D[L++]^B>>8&255]^C[D[L++]^B>>16&255]^y[D[L++]^B>>>24]^b[D[L++]]^j[D[L++]]^v[D[L++]]^x[D[L++]]^m[D[L++]]^p[D[L++]]^f[D[L++]]^u[D[L++]]^d[D[L++]]^l[D[L++]]^s[D[L++]]^r[D[L++]];for(M+=15;L<M;)B=B>>>8^r[(B^D[L++])&255];return~B}function k(D,F){for(var B=F^-1,M=0,L=D.length,A=0,U=0;M<L;)A=D.charCodeAt(M++),A<128?B=B>>>8^r[(B^A)&255]:A<2048?(B=B>>>8^r[(B^(192|A>>6&31))&255],B=B>>>8^r[(B^(128|A&63))&255]):A>=55296&&A<57344?(A=(A&1023)+64,U=D.charCodeAt(M++)&1023,B=B>>>8^r[(B^(240|A>>8&7))&255],B=B>>>8^r[(B^(128|A>>2&63))&255],B=B>>>8^r[(B^(128|U>>6&15|(A&3)<<4))&255],B=B>>>8^r[(B^(128|U&63))&255]):(B=B>>>8^r[(B^(224|A>>12&15))&255],B=B>>>8^r[(B^(128|A>>6&63))&255],B=B>>>8^r[(B^(128|A&63))&255]);return~B}return e.table=r,e.bstr=S,e.buf=T,e.str=k,e}(),Hr=function(){var t={};t.version="1.2.1";function r(ae,xe){for(var de=ae.split("/"),he=xe.split("/"),je=0,we=0,ze=Math.min(de.length,he.length);je<ze;++je){if(we=de[je].length-he[je].length)return we;if(de[je]!=he[je])return de[je]<he[je]?-1:1}return de.length-he.length}function a(ae){if(ae.charAt(ae.length-1)=="/")return ae.slice(0,-1).indexOf("/")===-1?ae:a(ae.slice(0,-1));var xe=ae.lastIndexOf("/");return xe===-1?ae:ae.slice(0,xe+1)}function i(ae){if(ae.charAt(ae.length-1)=="/")return i(ae.slice(0,-1));var xe=ae.lastIndexOf("/");return xe===-1?ae:ae.slice(xe+1)}function s(ae,xe){typeof xe=="string"&&(xe=new Date(xe));var de=xe.getHours();de=de<<6|xe.getMinutes(),de=de<<5|xe.getSeconds()>>>1,ae.write_shift(2,de);var he=xe.getFullYear()-1980;he=he<<4|xe.getMonth()+1,he=he<<5|xe.getDate(),ae.write_shift(2,he)}function l(ae){var xe=ae.read_shift(2)&65535,de=ae.read_shift(2)&65535,he=new Date,je=de&31;de>>>=5;var we=de&15;de>>>=4,he.setMilliseconds(0),he.setFullYear(de+1980),he.setMonth(we-1),he.setDate(je);var ze=xe&31;xe>>>=5;var et=xe&63;return xe>>>=6,he.setHours(xe),he.setMinutes(et),he.setSeconds(ze<<1),he}function d(ae){ni(ae,0);for(var xe={},de=0;ae.l<=ae.length-4;){var he=ae.read_shift(2),je=ae.read_shift(2),we=ae.l+je,ze={};switch(he){case 21589:de=ae.read_shift(1),de&1&&(ze.mtime=ae.read_shift(4)),je>5&&(de&2&&(ze.atime=ae.read_shift(4)),de&4&&(ze.ctime=ae.read_shift(4))),ze.mtime&&(ze.mt=new Date(ze.mtime*1e3));break}ae.l=we,xe[he]=ze}return xe}var u;function f(){return u||(u={})}function p(ae,xe){if(ae[0]==80&&ae[1]==75)return ke(ae,xe);if((ae[0]|32)==109&&(ae[1]|32)==105)return gt(ae,xe);if(ae.length<512)throw new Error("CFB file size "+ae.length+" < 512");var de=3,he=512,je=0,we=0,ze=0,et=0,Me=0,We=[],qe=ae.slice(0,512);ni(qe,0);var ft=m(qe);switch(de=ft[0],de){case 3:he=512;break;case 4:he=4096;break;case 0:if(ft[1]==0)return ke(ae,xe);default:throw new Error("Major Version: Expected 3 or 4 saw "+de)}he!==512&&(qe=ae.slice(0,he),ni(qe,28));var yt=ae.slice(0,he);x(qe,de);var At=qe.read_shift(4,"i");if(de===3&&At!==0)throw new Error("# Directory Sectors: Expected 0 saw "+At);qe.l+=4,ze=qe.read_shift(4,"i"),qe.l+=4,qe.chk("00100000","Mini Stream Cutoff Size: "),et=qe.read_shift(4,"i"),je=qe.read_shift(4,"i"),Me=qe.read_shift(4,"i"),we=qe.read_shift(4,"i");for(var xt=-1,Tt=0;Tt<109&&(xt=qe.read_shift(4,"i"),!(xt<0));++Tt)We[Tt]=xt;var Vt=v(ae,he);y(Me,we,Vt,he,We);var Cr=E(Vt,ze,We,he);Cr[ze].name="!Directory",je>0&&et!==U&&(Cr[et].name="!MiniFAT"),Cr[We[0]].name="!FAT",Cr.fat_addrs=We,Cr.ssz=he;var Ar={},Lr=[],ki=[],Zi=[];O(ze,Cr,Vt,Lr,je,Ar,ki,et),j(ki,Zi,Lr),Lr.shift();var Ea={FileIndex:ki,FullPaths:Zi};return xe&&xe.raw&&(Ea.raw={header:yt,sectors:Vt}),Ea}function m(ae){if(ae[ae.l]==80&&ae[ae.l+1]==75)return[0,0];ae.chk(P,"Header Signature: "),ae.l+=16;var xe=ae.read_shift(2,"u");return[ae.read_shift(2,"u"),xe]}function x(ae,xe){var de=9;switch(ae.l+=2,de=ae.read_shift(2)){case 9:if(xe!=3)throw new Error("Sector Shift: Expected 9 saw "+de);break;case 12:if(xe!=4)throw new Error("Sector Shift: Expected 12 saw "+de);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+de)}ae.chk("0600","Mini Sector Shift: "),ae.chk("000000000000","Reserved: ")}function v(ae,xe){for(var de=Math.ceil(ae.length/xe)-1,he=[],je=1;je<de;++je)he[je-1]=ae.slice(je*xe,(je+1)*xe);return he[de-1]=ae.slice(de*xe),he}function j(ae,xe,de){for(var he=0,je=0,we=0,ze=0,et=0,Me=de.length,We=[],qe=[];he<Me;++he)We[he]=qe[he]=he,xe[he]=de[he];for(;et<qe.length;++et)he=qe[et],je=ae[he].L,we=ae[he].R,ze=ae[he].C,We[he]===he&&(je!==-1&&We[je]!==je&&(We[he]=We[je]),we!==-1&&We[we]!==we&&(We[he]=We[we])),ze!==-1&&(We[ze]=he),je!==-1&&he!=We[he]&&(We[je]=We[he],qe.lastIndexOf(je)<et&&qe.push(je)),we!==-1&&he!=We[he]&&(We[we]=We[he],qe.lastIndexOf(we)<et&&qe.push(we));for(he=1;he<Me;++he)We[he]===he&&(we!==-1&&We[we]!==we?We[he]=We[we]:je!==-1&&We[je]!==je&&(We[he]=We[je]));for(he=1;he<Me;++he)if(ae[he].type!==0){if(et=he,et!=We[et])do et=We[et],xe[he]=xe[et]+"/"+xe[he];while(et!==0&&We[et]!==-1&&et!=We[et]);We[he]=-1}for(xe[0]+="/",he=1;he<Me;++he)ae[he].type!==2&&(xe[he]+="/")}function b(ae,xe,de){for(var he=ae.start,je=ae.size,we=[],ze=he;de&&je>0&&ze>=0;)we.push(xe.slice(ze*A,ze*A+A)),je-=A,ze=vl(de,ze*4);return we.length===0?rt(0):Jn(we).slice(0,ae.size)}function y(ae,xe,de,he,je){var we=U;if(ae===U){if(xe!==0)throw new Error("DIFAT chain shorter than expected")}else if(ae!==-1){var ze=de[ae],et=(he>>>2)-1;if(!ze)return;for(var Me=0;Me<et&&(we=vl(ze,Me*4))!==U;++Me)je.push(we);y(vl(ze,he-4),xe-1,de,he,je)}}function C(ae,xe,de,he,je){var we=[],ze=[];je||(je=[]);var et=he-1,Me=0,We=0;for(Me=xe;Me>=0;){je[Me]=!0,we[we.length]=Me,ze.push(ae[Me]);var qe=de[Math.floor(Me*4/he)];if(We=Me*4&et,he<4+We)throw new Error("FAT boundary crossed: "+Me+" 4 "+he);if(!ae[qe])break;Me=vl(ae[qe],We)}return{nodes:we,data:n3([ze])}}function E(ae,xe,de,he){var je=ae.length,we=[],ze=[],et=[],Me=[],We=he-1,qe=0,ft=0,yt=0,At=0;for(qe=0;qe<je;++qe)if(et=[],yt=qe+xe,yt>=je&&(yt-=je),!ze[yt]){Me=[];var xt=[];for(ft=yt;ft>=0;){xt[ft]=!0,ze[ft]=!0,et[et.length]=ft,Me.push(ae[ft]);var Tt=de[Math.floor(ft*4/he)];if(At=ft*4&We,he<4+At)throw new Error("FAT boundary crossed: "+ft+" 4 "+he);if(!ae[Tt]||(ft=vl(ae[Tt],At),xt[ft]))break}we[yt]={nodes:et,data:n3([Me])}}return we}function O(ae,xe,de,he,je,we,ze,et){for(var Me=0,We=he.length?2:0,qe=xe[ae].data,ft=0,yt=0,At;ft<qe.length;ft+=128){var xt=qe.slice(ft,ft+128);ni(xt,64),yt=xt.read_shift(2),At=MS(xt,0,yt-We),he.push(At);var Tt={name:At,type:xt.read_shift(1),color:xt.read_shift(1),L:xt.read_shift(4,"i"),R:xt.read_shift(4,"i"),C:xt.read_shift(4,"i"),clsid:xt.read_shift(16),state:xt.read_shift(4,"i"),start:0,size:0},Vt=xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2);Vt!==0&&(Tt.ct=S(xt,xt.l-8));var Cr=xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2);Cr!==0&&(Tt.mt=S(xt,xt.l-8)),Tt.start=xt.read_shift(4,"i"),Tt.size=xt.read_shift(4,"i"),Tt.size<0&&Tt.start<0&&(Tt.size=Tt.type=0,Tt.start=U,Tt.name=""),Tt.type===5?(Me=Tt.start,je>0&&Me!==U&&(xe[Me].name="!StreamData")):Tt.size>=4096?(Tt.storage="fat",xe[Tt.start]===void 0&&(xe[Tt.start]=C(de,Tt.start,xe.fat_addrs,xe.ssz)),xe[Tt.start].name=Tt.name,Tt.content=xe[Tt.start].data.slice(0,Tt.size)):(Tt.storage="minifat",Tt.size<0?Tt.size=0:Me!==U&&Tt.start!==U&&xe[Me]&&(Tt.content=b(Tt,xe[Me].data,(xe[et]||{}).data))),Tt.content&&ni(Tt.content,0),we[At]=Tt,ze.push(Tt)}}function S(ae,xe){return new Date((ii(ae,xe+4)/1e7*Math.pow(2,32)+ii(ae,xe)/1e7-11644473600)*1e3)}function T(ae,xe){return f(),p(u.readFileSync(ae),xe)}function k(ae,xe){var de=xe&&xe.type;switch(de||Tr&&Buffer.isBuffer(ae)&&(de="buffer"),de||"base64"){case"file":return T(ae,xe);case"base64":return p(Wi(no(ae)),xe);case"binary":return p(Wi(ae),xe)}return p(ae,xe)}function D(ae,xe){var de=xe||{},he=de.root||"Root Entry";if(ae.FullPaths||(ae.FullPaths=[]),ae.FileIndex||(ae.FileIndex=[]),ae.FullPaths.length!==ae.FileIndex.length)throw new Error("inconsistent CFB structure");ae.FullPaths.length===0&&(ae.FullPaths[0]=he+"/",ae.FileIndex[0]={name:he,type:5}),de.CLSID&&(ae.FileIndex[0].clsid=de.CLSID),F(ae)}function F(ae){var xe="Sh33tJ5";if(!Hr.find(ae,"/"+xe)){var de=rt(4);de[0]=55,de[1]=de[3]=50,de[2]=54,ae.FileIndex.push({name:xe,type:2,content:de,size:4,L:69,R:69,C:69}),ae.FullPaths.push(ae.FullPaths[0]+xe),B(ae)}}function B(ae,xe){D(ae);for(var de=!1,he=!1,je=ae.FullPaths.length-1;je>=0;--je){var we=ae.FileIndex[je];switch(we.type){case 0:he?de=!0:(ae.FileIndex.pop(),ae.FullPaths.pop());break;case 1:case 2:case 5:he=!0,isNaN(we.R*we.L*we.C)&&(de=!0),we.R>-1&&we.L>-1&&we.R==we.L&&(de=!0);break;default:de=!0;break}}if(!(!de&&!xe)){var ze=new Date(1987,1,19),et=0,Me=Object.create?Object.create(null):{},We=[];for(je=0;je<ae.FullPaths.length;++je)Me[ae.FullPaths[je]]=!0,ae.FileIndex[je].type!==0&&We.push([ae.FullPaths[je],ae.FileIndex[je]]);for(je=0;je<We.length;++je){var qe=a(We[je][0]);he=Me[qe],he||(We.push([qe,{name:i(qe).replace("/",""),type:1,clsid:R,ct:ze,mt:ze,content:null}]),Me[qe]=!0)}for(We.sort(function(At,xt){return r(At[0],xt[0])}),ae.FullPaths=[],ae.FileIndex=[],je=0;je<We.length;++je)ae.FullPaths[je]=We[je][0],ae.FileIndex[je]=We[je][1];for(je=0;je<We.length;++je){var ft=ae.FileIndex[je],yt=ae.FullPaths[je];if(ft.name=i(yt).replace("/",""),ft.L=ft.R=ft.C=-(ft.color=1),ft.size=ft.content?ft.content.length:0,ft.start=0,ft.clsid=ft.clsid||R,je===0)ft.C=We.length>1?1:-1,ft.size=0,ft.type=5;else if(yt.slice(-1)=="/"){for(et=je+1;et<We.length&&a(ae.FullPaths[et])!=yt;++et);for(ft.C=et>=We.length?-1:et,et=je+1;et<We.length&&a(ae.FullPaths[et])!=a(yt);++et);ft.R=et>=We.length?-1:et,ft.type=1}else a(ae.FullPaths[je+1]||"")==a(yt)&&(ft.R=je+1),ft.type=2}}}function M(ae,xe){var de=xe||{};if(de.fileType=="mad")return $t(ae,de);switch(B(ae),de.fileType){case"zip":return it(ae,de)}var he=function(At){for(var xt=0,Tt=0,Vt=0;Vt<At.FileIndex.length;++Vt){var Cr=At.FileIndex[Vt];if(Cr.content){var Ar=Cr.content.length;Ar>0&&(Ar<4096?xt+=Ar+63>>6:Tt+=Ar+511>>9)}}for(var Lr=At.FullPaths.length+3>>2,ki=xt+7>>3,Zi=xt+127>>7,Ea=ki+Tt+Lr+Zi,ma=Ea+127>>7,vs=ma<=109?0:Math.ceil((ma-109)/127);Ea+ma+vs+127>>7>ma;)vs=++ma<=109?0:Math.ceil((ma-109)/127);var ga=[1,vs,ma,Zi,Lr,Tt,xt,0];return At.FileIndex[0].size=xt<<6,ga[7]=(At.FileIndex[0].start=ga[0]+ga[1]+ga[2]+ga[3]+ga[4]+ga[5])+(ga[6]+7>>3),ga}(ae),je=rt(he[7]<<9),we=0,ze=0;{for(we=0;we<8;++we)je.write_shift(1,I[we]);for(we=0;we<8;++we)je.write_shift(2,0);for(je.write_shift(2,62),je.write_shift(2,3),je.write_shift(2,65534),je.write_shift(2,9),je.write_shift(2,6),we=0;we<3;++we)je.write_shift(2,0);for(je.write_shift(4,0),je.write_shift(4,he[2]),je.write_shift(4,he[0]+he[1]+he[2]+he[3]-1),je.write_shift(4,0),je.write_shift(4,4096),je.write_shift(4,he[3]?he[0]+he[1]+he[2]-1:U),je.write_shift(4,he[3]),je.write_shift(-4,he[1]?he[0]-1:U),je.write_shift(4,he[1]),we=0;we<109;++we)je.write_shift(-4,we<he[2]?he[1]+we:-1)}if(he[1])for(ze=0;ze<he[1];++ze){for(;we<236+ze*127;++we)je.write_shift(-4,we<he[2]?he[1]+we:-1);je.write_shift(-4,ze===he[1]-1?U:ze+1)}var et=function(At){for(ze+=At;we<ze-1;++we)je.write_shift(-4,we+1);At&&(++we,je.write_shift(-4,U))};for(ze=we=0,ze+=he[1];we<ze;++we)je.write_shift(-4,W.DIFSECT);for(ze+=he[2];we<ze;++we)je.write_shift(-4,W.FATSECT);et(he[3]),et(he[4]);for(var Me=0,We=0,qe=ae.FileIndex[0];Me<ae.FileIndex.length;++Me)qe=ae.FileIndex[Me],qe.content&&(We=qe.content.length,!(We<4096)&&(qe.start=ze,et(We+511>>9)));for(et(he[6]+7>>3);je.l&511;)je.write_shift(-4,W.ENDOFCHAIN);for(ze=we=0,Me=0;Me<ae.FileIndex.length;++Me)qe=ae.FileIndex[Me],qe.content&&(We=qe.content.length,!(!We||We>=4096)&&(qe.start=ze,et(We+63>>6)));for(;je.l&511;)je.write_shift(-4,W.ENDOFCHAIN);for(we=0;we<he[4]<<2;++we){var ft=ae.FullPaths[we];if(!ft||ft.length===0){for(Me=0;Me<17;++Me)je.write_shift(4,0);for(Me=0;Me<3;++Me)je.write_shift(4,-1);for(Me=0;Me<12;++Me)je.write_shift(4,0);continue}qe=ae.FileIndex[we],we===0&&(qe.start=qe.size?qe.start-1:U);var yt=we===0&&de.root||qe.name;if(We=2*(yt.length+1),je.write_shift(64,yt,"utf16le"),je.write_shift(2,We),je.write_shift(1,qe.type),je.write_shift(1,qe.color),je.write_shift(-4,qe.L),je.write_shift(-4,qe.R),je.write_shift(-4,qe.C),qe.clsid)je.write_shift(16,qe.clsid,"hex");else for(Me=0;Me<4;++Me)je.write_shift(4,0);je.write_shift(4,qe.state||0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,qe.start),je.write_shift(4,qe.size),je.write_shift(4,0)}for(we=1;we<ae.FileIndex.length;++we)if(qe=ae.FileIndex[we],qe.size>=4096)if(je.l=qe.start+1<<9,Tr&&Buffer.isBuffer(qe.content))qe.content.copy(je,je.l,0,qe.size),je.l+=qe.size+511&-512;else{for(Me=0;Me<qe.size;++Me)je.write_shift(1,qe.content[Me]);for(;Me&511;++Me)je.write_shift(1,0)}for(we=1;we<ae.FileIndex.length;++we)if(qe=ae.FileIndex[we],qe.size>0&&qe.size<4096)if(Tr&&Buffer.isBuffer(qe.content))qe.content.copy(je,je.l,0,qe.size),je.l+=qe.size+63&-64;else{for(Me=0;Me<qe.size;++Me)je.write_shift(1,qe.content[Me]);for(;Me&63;++Me)je.write_shift(1,0)}if(Tr)je.l=je.length;else for(;je.l<je.length;)je.write_shift(1,0);return je}function L(ae,xe){var de=ae.FullPaths.map(function(Me){return Me.toUpperCase()}),he=de.map(function(Me){var We=Me.split("/");return We[We.length-(Me.slice(-1)=="/"?2:1)]}),je=!1;xe.charCodeAt(0)===47?(je=!0,xe=de[0].slice(0,-1)+xe):je=xe.indexOf("/")!==-1;var we=xe.toUpperCase(),ze=je===!0?de.indexOf(we):he.indexOf(we);if(ze!==-1)return ae.FileIndex[ze];var et=!we.match(qp);for(we=we.replace(af,""),et&&(we=we.replace(qp,"!")),ze=0;ze<de.length;++ze)if((et?de[ze].replace(qp,"!"):de[ze]).replace(af,"")==we||(et?he[ze].replace(qp,"!"):he[ze]).replace(af,"")==we)return ae.FileIndex[ze];return null}var A=64,U=-2,P="d0cf11e0a1b11ae1",I=[208,207,17,224,161,177,26,225],R="00000000000000000000000000000000",W={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:P,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:R,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(ae,xe,de){f();var he=M(ae,de);u.writeFileSync(xe,he)}function ge(ae){for(var xe=new Array(ae.length),de=0;de<ae.length;++de)xe[de]=String.fromCharCode(ae[de]);return xe.join("")}function q(ae,xe){var de=M(ae,xe);switch(xe&&xe.type||"buffer"){case"file":return f(),u.writeFileSync(xe.filename,de),de;case"binary":return typeof de=="string"?de:ge(de);case"base64":return Qf(typeof de=="string"?de:ge(de));case"buffer":if(Tr)return Buffer.isBuffer(de)?de:lo(de);case"array":return typeof de=="string"?Wi(de):de}return de}var Y;function z(ae){try{var xe=ae.InflateRaw,de=new xe;if(de._processChunk(new Uint8Array([3,0]),de._finishFlushFlag),de.bytesRead)Y=ae;else throw new Error("zlib does not expose bytesRead")}catch(he){console.error("cannot use native zlib: "+(he.message||he))}}function ee(ae,xe){if(!Y)return Ft(ae,xe);var de=Y.InflateRaw,he=new de,je=he._processChunk(ae.slice(ae.l),he._finishFlushFlag);return ae.l+=he.bytesRead,je}function H(ae){return Y?Y.deflateRawSync(ae):Qe(ae)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Se(ae){var xe=(ae<<1|ae<<11)&139536|(ae<<5|ae<<15)&558144;return(xe>>16|xe>>8|xe)&255}for(var K=typeof Uint8Array<"u",ue=K?new Uint8Array(256):[],ye=0;ye<256;++ye)ue[ye]=Se(ye);function fe(ae,xe){var de=ue[ae&255];return xe<=8?de>>>8-xe:(de=de<<8|ue[ae>>8&255],xe<=16?de>>>16-xe:(de=de<<8|ue[ae>>16&255],de>>>24-xe))}function Xe(ae,xe){var de=xe&7,he=xe>>>3;return(ae[he]|(de<=6?0:ae[he+1]<<8))>>>de&3}function Ce(ae,xe){var de=xe&7,he=xe>>>3;return(ae[he]|(de<=5?0:ae[he+1]<<8))>>>de&7}function Le(ae,xe){var de=xe&7,he=xe>>>3;return(ae[he]|(de<=4?0:ae[he+1]<<8))>>>de&15}function ne(ae,xe){var de=xe&7,he=xe>>>3;return(ae[he]|(de<=3?0:ae[he+1]<<8))>>>de&31}function Ae(ae,xe){var de=xe&7,he=xe>>>3;return(ae[he]|(de<=1?0:ae[he+1]<<8))>>>de&127}function Ve(ae,xe,de){var he=xe&7,je=xe>>>3,we=(1<<de)-1,ze=ae[je]>>>he;return de<8-he||(ze|=ae[je+1]<<8-he,de<16-he)||(ze|=ae[je+2]<<16-he,de<24-he)||(ze|=ae[je+3]<<24-he),ze&we}function te(ae,xe,de){var he=xe&7,je=xe>>>3;return he<=5?ae[je]|=(de&7)<<he:(ae[je]|=de<<he&255,ae[je+1]=(de&7)>>8-he),xe+3}function ce(ae,xe,de){var he=xe&7,je=xe>>>3;return de=(de&1)<<he,ae[je]|=de,xe+1}function X(ae,xe,de){var he=xe&7,je=xe>>>3;return de<<=he,ae[je]|=de&255,de>>>=8,ae[je+1]=de,xe+8}function se(ae,xe,de){var he=xe&7,je=xe>>>3;return de<<=he,ae[je]|=de&255,de>>>=8,ae[je+1]=de&255,ae[je+2]=de>>>8,xe+16}function J(ae,xe){var de=ae.length,he=2*de>xe?2*de:xe+5,je=0;if(de>=xe)return ae;if(Tr){var we=UI(he);if(ae.copy)ae.copy(we);else for(;je<ae.length;++je)we[je]=ae[je];return we}else if(K){var ze=new Uint8Array(he);if(ze.set)ze.set(ae);else for(;je<de;++je)ze[je]=ae[je];return ze}return ae.length=he,ae}function Ne(ae){for(var xe=new Array(ae),de=0;de<ae;++de)xe[de]=0;return xe}function Ge(ae,xe,de){var he=1,je=0,we=0,ze=0,et=0,Me=ae.length,We=K?new Uint16Array(32):Ne(32);for(we=0;we<32;++we)We[we]=0;for(we=Me;we<de;++we)ae[we]=0;Me=ae.length;var qe=K?new Uint16Array(Me):Ne(Me);for(we=0;we<Me;++we)We[je=ae[we]]++,he<je&&(he=je),qe[we]=0;for(We[0]=0,we=1;we<=he;++we)We[we+16]=et=et+We[we-1]<<1;for(we=0;we<Me;++we)et=ae[we],et!=0&&(qe[we]=We[et+16]++);var ft=0;for(we=0;we<Me;++we)if(ft=ae[we],ft!=0)for(et=fe(qe[we],he)>>he-ft,ze=(1<<he+4-ft)-1;ze>=0;--ze)xe[et|ze<<ft]=ft&15|we<<4;return he}var tt=K?new Uint16Array(512):Ne(512),$e=K?new Uint16Array(32):Ne(32);if(!K){for(var Ze=0;Ze<512;++Ze)tt[Ze]=0;for(Ze=0;Ze<32;++Ze)$e[Ze]=0}(function(){for(var ae=[],xe=0;xe<32;xe++)ae.push(5);Ge(ae,$e,32);var de=[];for(xe=0;xe<=143;xe++)de.push(8);for(;xe<=255;xe++)de.push(9);for(;xe<=279;xe++)de.push(7);for(;xe<=287;xe++)de.push(8);Ge(de,tt,288)})();var Oe=function(){for(var xe=K?new Uint8Array(32768):[],de=0,he=0;de<pe.length-1;++de)for(;he<pe[de+1];++he)xe[he]=de;for(;he<32768;++he)xe[he]=29;var je=K?new Uint8Array(259):[];for(de=0,he=0;de<le.length-1;++de)for(;he<le[de+1];++he)je[he]=de;function we(et,Me){for(var We=0;We<et.length;){var qe=Math.min(65535,et.length-We),ft=We+qe==et.length;for(Me.write_shift(1,+ft),Me.write_shift(2,qe),Me.write_shift(2,~qe&65535);qe-- >0;)Me[Me.l++]=et[We++]}return Me.l}function ze(et,Me){for(var We=0,qe=0,ft=K?new Uint16Array(32768):[];qe<et.length;){var yt=Math.min(65535,et.length-qe);if(yt<10){for(We=te(Me,We,+(qe+yt==et.length)),We&7&&(We+=8-(We&7)),Me.l=We/8|0,Me.write_shift(2,yt),Me.write_shift(2,~yt&65535);yt-- >0;)Me[Me.l++]=et[qe++];We=Me.l*8;continue}We=te(Me,We,+(qe+yt==et.length)+2);for(var At=0;yt-- >0;){var xt=et[qe];At=(At<<5^xt)&32767;var Tt=-1,Vt=0;if((Tt=ft[At])&&(Tt|=qe&-32768,Tt>qe&&(Tt-=32768),Tt<qe))for(;et[Tt+Vt]==et[qe+Vt]&&Vt<250;)++Vt;if(Vt>2){xt=je[Vt],xt<=22?We=X(Me,We,ue[xt+1]>>1)-1:(X(Me,We,3),We+=5,X(Me,We,ue[xt-23]>>5),We+=3);var Cr=xt<8?0:xt-4>>2;Cr>0&&(se(Me,We,Vt-le[xt]),We+=Cr),xt=xe[qe-Tt],We=X(Me,We,ue[xt]>>3),We-=3;var Ar=xt<4?0:xt-2>>1;Ar>0&&(se(Me,We,qe-Tt-pe[xt]),We+=Ar);for(var Lr=0;Lr<Vt;++Lr)ft[At]=qe&32767,At=(At<<5^et[qe])&32767,++qe;yt-=Vt-1}else xt<=143?xt=xt+48:We=ce(Me,We,1),We=X(Me,We,ue[xt]),ft[At]=qe&32767,++qe}We=X(Me,We,0)-1}return Me.l=(We+7)/8|0,Me.l}return function(Me,We){return Me.length<8?we(Me,We):ze(Me,We)}}();function Qe(ae){var xe=rt(50+Math.floor(ae.length*1.1)),de=Oe(ae,xe);return xe.slice(0,de)}var ht=K?new Uint16Array(32768):Ne(32768),Pt=K?new Uint16Array(32768):Ne(32768),Rt=K?new Uint16Array(128):Ne(128),Et=1,ie=1;function De(ae,xe){var de=ne(ae,xe)+257;xe+=5;var he=ne(ae,xe)+1;xe+=5;var je=Le(ae,xe)+4;xe+=4;for(var we=0,ze=K?new Uint8Array(19):Ne(19),et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Me=1,We=K?new Uint8Array(8):Ne(8),qe=K?new Uint8Array(8):Ne(8),ft=ze.length,yt=0;yt<je;++yt)ze[re[yt]]=we=Ce(ae,xe),Me<we&&(Me=we),We[we]++,xe+=3;var At=0;for(We[0]=0,yt=1;yt<=Me;++yt)qe[yt]=At=At+We[yt-1]<<1;for(yt=0;yt<ft;++yt)(At=ze[yt])!=0&&(et[yt]=qe[At]++);var xt=0;for(yt=0;yt<ft;++yt)if(xt=ze[yt],xt!=0){At=ue[et[yt]]>>8-xt;for(var Tt=(1<<7-xt)-1;Tt>=0;--Tt)Rt[At|Tt<<xt]=xt&7|yt<<3}var Vt=[];for(Me=1;Vt.length<de+he;)switch(At=Rt[Ae(ae,xe)],xe+=At&7,At>>>=3){case 16:for(we=3+Xe(ae,xe),xe+=2,At=Vt[Vt.length-1];we-- >0;)Vt.push(At);break;case 17:for(we=3+Ce(ae,xe),xe+=3;we-- >0;)Vt.push(0);break;case 18:for(we=11+Ae(ae,xe),xe+=7;we-- >0;)Vt.push(0);break;default:Vt.push(At),Me<At&&(Me=At);break}var Cr=Vt.slice(0,de),Ar=Vt.slice(de);for(yt=de;yt<286;++yt)Cr[yt]=0;for(yt=he;yt<30;++yt)Ar[yt]=0;return Et=Ge(Cr,ht,286),ie=Ge(Ar,Pt,30),xe}function Ye(ae,xe){if(ae[0]==3&&!(ae[1]&3))return[Bl(xe),2];for(var de=0,he=0,je=UI(xe||1<<18),we=0,ze=je.length>>>0,et=0,Me=0;(he&1)==0;){if(he=Ce(ae,de),de+=3,he>>>1)he>>1==1?(et=9,Me=5):(de=De(ae,de),et=Et,Me=ie);else{de&7&&(de+=8-(de&7));var We=ae[de>>>3]|ae[(de>>>3)+1]<<8;if(de+=32,We>0)for(!xe&&ze<we+We&&(je=J(je,we+We),ze=je.length);We-- >0;)je[we++]=ae[de>>>3],de+=8;continue}for(;;){!xe&&ze<we+32767&&(je=J(je,we+32767),ze=je.length);var qe=Ve(ae,de,et),ft=he>>>1==1?tt[qe]:ht[qe];if(de+=ft&15,ft>>>=4,(ft>>>8&255)===0)je[we++]=ft;else{if(ft==256)break;ft-=257;var yt=ft<8?0:ft-4>>2;yt>5&&(yt=0);var At=we+le[ft];yt>0&&(At+=Ve(ae,de,yt),de+=yt),qe=Ve(ae,de,Me),ft=he>>>1==1?$e[qe]:Pt[qe],de+=ft&15,ft>>>=4;var xt=ft<4?0:ft-2>>1,Tt=pe[ft];for(xt>0&&(Tt+=Ve(ae,de,xt),de+=xt),!xe&&ze<At&&(je=J(je,At+100),ze=je.length);we<At;)je[we]=je[we-Tt],++we}}}return xe?[je,de+7>>>3]:[je.slice(0,we),de+7>>>3]}function Ft(ae,xe){var de=ae.slice(ae.l||0),he=Ye(de,xe);return ae.l+=he[1],he[0]}function me(ae,xe){if(ae)typeof console<"u"&&console.error(xe);else throw new Error(xe)}function ke(ae,xe){var de=ae;ni(de,0);var he=[],je=[],we={FileIndex:he,FullPaths:je};D(we,{root:xe.root});for(var ze=de.length-4;(de[ze]!=80||de[ze+1]!=75||de[ze+2]!=5||de[ze+3]!=6)&&ze>=0;)--ze;de.l=ze+4,de.l+=4;var et=de.read_shift(2);de.l+=6;var Me=de.read_shift(4);for(de.l=Me,ze=0;ze<et;++ze){de.l+=20;var We=de.read_shift(4),qe=de.read_shift(4),ft=de.read_shift(2),yt=de.read_shift(2),At=de.read_shift(2);de.l+=8;var xt=de.read_shift(4),Tt=d(de.slice(de.l+ft,de.l+ft+yt));de.l+=ft+yt+At;var Vt=de.l;de.l=xt+4,Pe(de,We,qe,we,Tt),de.l=Vt}return we}function Pe(ae,xe,de,he,je){ae.l+=2;var we=ae.read_shift(2),ze=ae.read_shift(2),et=l(ae);if(we&8257)throw new Error("Unsupported ZIP encryption");for(var Me=ae.read_shift(4),We=ae.read_shift(4),qe=ae.read_shift(4),ft=ae.read_shift(2),yt=ae.read_shift(2),At="",xt=0;xt<ft;++xt)At+=String.fromCharCode(ae[ae.l++]);if(yt){var Tt=d(ae.slice(ae.l,ae.l+yt));(Tt[21589]||{}).mt&&(et=Tt[21589].mt),((je||{})[21589]||{}).mt&&(et=je[21589].mt)}ae.l+=yt;var Vt=ae.slice(ae.l,ae.l+We);switch(ze){case 8:Vt=ee(ae,qe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ze)}var Cr=!1;we&8&&(Me=ae.read_shift(4),Me==134695760&&(Me=ae.read_shift(4),Cr=!0),We=ae.read_shift(4),qe=ae.read_shift(4)),We!=xe&&me(Cr,"Bad compressed size: "+xe+" != "+We),qe!=de&&me(Cr,"Bad uncompressed size: "+de+" != "+qe),Gt(he,At,Vt,{unsafe:!0,mt:et})}function it(ae,xe){var de=xe||{},he=[],je=[],we=rt(1),ze=de.compression?8:0,et=0,Me=0,We=0,qe=0,ft=0,yt=ae.FullPaths[0],At=yt,xt=ae.FileIndex[0],Tt=[],Vt=0;for(Me=1;Me<ae.FullPaths.length;++Me)if(At=ae.FullPaths[Me].slice(yt.length),xt=ae.FileIndex[Me],!(!xt.size||!xt.content||At=="Sh33tJ5")){var Cr=qe,Ar=rt(At.length);for(We=0;We<At.length;++We)Ar.write_shift(1,At.charCodeAt(We)&127);Ar=Ar.slice(0,Ar.l),Tt[ft]=mie.buf(xt.content,0);var Lr=xt.content;ze==8&&(Lr=H(Lr)),we=rt(30),we.write_shift(4,67324752),we.write_shift(2,20),we.write_shift(2,et),we.write_shift(2,ze),xt.mt?s(we,xt.mt):we.write_shift(4,0),we.write_shift(-4,Tt[ft]),we.write_shift(4,Lr.length),we.write_shift(4,xt.content.length),we.write_shift(2,Ar.length),we.write_shift(2,0),qe+=we.length,he.push(we),qe+=Ar.length,he.push(Ar),qe+=Lr.length,he.push(Lr),we=rt(46),we.write_shift(4,33639248),we.write_shift(2,0),we.write_shift(2,20),we.write_shift(2,et),we.write_shift(2,ze),we.write_shift(4,0),we.write_shift(-4,Tt[ft]),we.write_shift(4,Lr.length),we.write_shift(4,xt.content.length),we.write_shift(2,Ar.length),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(4,0),we.write_shift(4,Cr),Vt+=we.l,je.push(we),Vt+=Ar.length,je.push(Ar),++ft}return we=rt(22),we.write_shift(4,101010256),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(2,ft),we.write_shift(2,ft),we.write_shift(4,Vt),we.write_shift(4,qe),we.write_shift(2,0),Jn([Jn(he),Jn(je),we])}var pt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Nt(ae,xe){if(ae.ctype)return ae.ctype;var de=ae.name||"",he=de.match(/\.([^\.]+)$/);return he&&pt[he[1]]||xe&&(he=(de=xe).match(/[\.\\]([^\.\\])+$/),he&&pt[he[1]])?pt[he[1]]:"application/octet-stream"}function _t(ae){for(var xe=Qf(ae),de=[],he=0;he<xe.length;he+=76)de.push(xe.slice(he,he+76));return de.join(`\r
`)+`\r
`}function ot(ae){var xe=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(We){var qe=We.charCodeAt(0).toString(16).toUpperCase();return"="+(qe.length==1?"0"+qe:qe)});xe=xe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),xe.charAt(0)==`
`&&(xe="=0D"+xe.slice(1)),xe=xe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var de=[],he=xe.split(`\r
`),je=0;je<he.length;++je){var we=he[je];if(we.length==0){de.push("");continue}for(var ze=0;ze<we.length;){var et=76,Me=we.slice(ze,ze+et);Me.charAt(et-1)=="="?et--:Me.charAt(et-2)=="="?et-=2:Me.charAt(et-3)=="="&&(et-=3),Me=we.slice(ze,ze+et),ze+=et,ze<we.length&&(Me+="="),de.push(Me)}}return de.join(`\r
`)}function jt(ae){for(var xe=[],de=0;de<ae.length;++de){for(var he=ae[de];de<=ae.length&&he.charAt(he.length-1)=="=";)he=he.slice(0,he.length-1)+ae[++de];xe.push(he)}for(var je=0;je<xe.length;++je)xe[je]=xe[je].replace(/[=][0-9A-Fa-f]{2}/g,function(we){return String.fromCharCode(parseInt(we.slice(1),16))});return Wi(xe.join(`\r
`))}function mt(ae,xe,de){for(var he="",je="",we="",ze,et=0;et<10;++et){var Me=xe[et];if(!Me||Me.match(/^\s*$/))break;var We=Me.match(/^(.*?):\s*([^\s].*)$/);if(We)switch(We[1].toLowerCase()){case"content-location":he=We[2].trim();break;case"content-type":we=We[2].trim();break;case"content-transfer-encoding":je=We[2].trim();break}}switch(++et,je.toLowerCase()){case"base64":ze=Wi(no(xe.slice(et).join("")));break;case"quoted-printable":ze=jt(xe.slice(et));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+je)}var qe=Gt(ae,he.slice(de.length),ze,{unsafe:!0});we&&(qe.ctype=we)}function gt(ae,xe){if(ge(ae.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var de=xe&&xe.root||"",he=(Tr&&Buffer.isBuffer(ae)?ae.toString("binary"):ge(ae)).split(`\r
`),je=0,we="";for(je=0;je<he.length;++je)if(we=he[je],!!/^Content-Location:/i.test(we)&&(we=we.slice(we.indexOf("file")),de||(de=we.slice(0,we.lastIndexOf("/")+1)),we.slice(0,de.length)!=de))for(;de.length>0&&(de=de.slice(0,de.length-1),de=de.slice(0,de.lastIndexOf("/")+1),we.slice(0,de.length)!=de););var ze=(he[1]||"").match(/boundary="(.*?)"/);if(!ze)throw new Error("MAD cannot find boundary");var et="--"+(ze[1]||""),Me=[],We=[],qe={FileIndex:Me,FullPaths:We};D(qe);var ft,yt=0;for(je=0;je<he.length;++je){var At=he[je];At!==et&&At!==et+"--"||(yt++&&mt(qe,he.slice(ft,je),de),ft=je)}return qe}function $t(ae,xe){var de=xe||{},he=de.boundary||"SheetJS";he="------="+he;for(var je=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+he.slice(2)+'"',"","",""],we=ae.FullPaths[0],ze=we,et=ae.FileIndex[0],Me=1;Me<ae.FullPaths.length;++Me)if(ze=ae.FullPaths[Me].slice(we.length),et=ae.FileIndex[Me],!(!et.size||!et.content||ze=="Sh33tJ5")){ze=ze.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Vt){return"_x"+Vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Vt){return"_u"+Vt.charCodeAt(0).toString(16)+"_"});for(var We=et.content,qe=Tr&&Buffer.isBuffer(We)?We.toString("binary"):ge(We),ft=0,yt=Math.min(1024,qe.length),At=0,xt=0;xt<=yt;++xt)(At=qe.charCodeAt(xt))>=32&&At<128&&++ft;var Tt=ft>=yt*4/5;je.push(he),je.push("Content-Location: "+(de.root||"file:///C:/SheetJS/")+ze),je.push("Content-Transfer-Encoding: "+(Tt?"quoted-printable":"base64")),je.push("Content-Type: "+Nt(et,ze)),je.push(""),je.push(Tt?ot(qe):_t(qe))}return je.push(he+`--\r
`),je.join(`\r
`)}function Jt(ae){var xe={};return D(xe,ae),xe}function Gt(ae,xe,de,he){var je=he&&he.unsafe;je||D(ae);var we=!je&&Hr.find(ae,xe);if(!we){var ze=ae.FullPaths[0];xe.slice(0,ze.length)==ze?ze=xe:(ze.slice(-1)!="/"&&(ze+="/"),ze=(ze+xe).replace("//","/")),we={name:i(xe),type:2},ae.FileIndex.push(we),ae.FullPaths.push(ze),je||Hr.utils.cfb_gc(ae)}return we.content=de,we.size=de?de.length:0,he&&(he.CLSID&&(we.clsid=he.CLSID),he.mt&&(we.mt=he.mt),he.ct&&(we.ct=he.ct)),we}function Fr(ae,xe){D(ae);var de=Hr.find(ae,xe);if(de){for(var he=0;he<ae.FileIndex.length;++he)if(ae.FileIndex[he]==de)return ae.FileIndex.splice(he,1),ae.FullPaths.splice(he,1),!0}return!1}function ir(ae,xe,de){D(ae);var he=Hr.find(ae,xe);if(he){for(var je=0;je<ae.FileIndex.length;++je)if(ae.FileIndex[je]==he)return ae.FileIndex[je].name=i(de),ae.FullPaths[je]=de,!0}return!1}function Zr(ae){B(ae,!0)}return t.find=L,t.read=k,t.parse=p,t.write=q,t.writeFile=Q,t.utils={cfb_new:Jt,cfb_add:Gt,cfb_del:Fr,cfb_mov:ir,cfb_gc:Zr,ReadShift:of,CheckField:aP,prep_blob:ni,bconcat:Jn,use_zlib:z,_deflateRaw:Qe,_inflateRaw:Ft,consts:W},t}();function gie(e){return typeof e=="string"?l0(e):Array.isArray(e)?Uae(e):e}function bh(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=l0(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Zf(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var i=new Blob([gie(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(typeof saveAs<"u")return saveAs(i,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=s,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(e);return d.open("w"),d.encoding="binary",Array.isArray(t)&&(t=vh(t)),d.write(t),d.close(),t}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+e)}function na(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function XI(e,t){for(var r=[],a=na(e),i=0;i!==a.length;++i)r[e[a[i]][t]]==null&&(r[e[a[i]][t]]=a[i]);return r}function IS(e){for(var t=[],r=na(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function u0(e){for(var t=[],r=na(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function xie(e){for(var t=[],r=na(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var fg=new Date(1899,11,30,0,0,0);function za(e,t){var r=e.getTime(),a=fg.getTime()+(e.getTimezoneOffset()-fg.getTimezoneOffset())*6e4;return(r-a)/(24*60*60*1e3)}var $5=new Date,yie=fg.getTime()+($5.getTimezoneOffset()-fg.getTimezoneOffset())*6e4,QI=$5.getTimezoneOffset();function U5(e){var t=new Date;return t.setTime(e*24*60*60*1e3+yie),t.getTimezoneOffset()!==QI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-QI)*6e4),t}var JI=new Date("2017-02-19T19:06:09.000Z"),q5=isNaN(JI.getFullYear())?new Date("2/19/17"):JI,vie=q5.getFullYear()==2017;function Ta(e,t){var r=new Date(e);if(vie)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(q5.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function f0(e,t){if(Tr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var a=[],i=0;i!=e.length;++i)a.push(String.fromCharCode(e[i]));return a.join("")}function $a(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=$a(e[r]));return t}function hn(e,t){for(var r="";r.length<t;)r+=e;return r}function Ys(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(i,s){return r=-r,s}),!isNaN(t=Number(a)))?t/r:t}var bie=["january","february","march","april","may","june","july","august","september","october","november","december"];function Jf(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),i=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&bie.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return a<0||a>8099?r:(i>0||s>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function sr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return Tr?a=lo(r):a=qae(r),Hr.utils.cfb_add(e,t,a)}Hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function DS(){return Hr.utils.cfb_new()}var En=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,jie={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},RS=IS(jie),PS=/[&<>'"]/g,wie=/[\u0000-\u0008\u000b-\u001f]/g;function Mr(e){var t=e+"";return t.replace(PS,function(r){return RS[r]}).replace(wie,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function ZI(e){return Mr(e).replace(/ /g,"_x0020_")}var W5=/[\u0000-\u001f]/g;function Sie(e){var t=e+"";return t.replace(PS,function(r){return RS[r]}).replace(/\n/g,"<br/>").replace(W5,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Nie(e){var t=e+"";return t.replace(PS,function(r){return RS[r]}).replace(W5,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function Tie(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Cie(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function wj(e){for(var t="",r=0,a=0,i=0,s=0,l=0,d=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(i=e.charCodeAt(r++),a>191&&a<224){l=(a&31)<<6,l|=i&63,t+=String.fromCharCode(l);continue}if(s=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63);continue}l=e.charCodeAt(r++),d=((a&7)<<18|(i&63)<<12|(s&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(d>>>10&1023)),t+=String.fromCharCode(56320+(d&1023))}return t}function e3(e){var t=Bl(2*e.length),r,a,i=1,s=0,l=0,d;for(a=0;a<e.length;a+=i)i=1,(d=e.charCodeAt(a))<128?r=d:d<224?(r=(d&31)*64+(e.charCodeAt(a+1)&63),i=2):d<240?(r=(d&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),i=3):(i=4,r=(d&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[s++]=l&255,t[s++]=l>>>8,l=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function t3(e){return lo(e,"binary").toString("utf8")}var Hp="foo bar baz",sf=Tr&&(t3(Hp)==wj(Hp)&&t3||e3(Hp)==wj(Hp)&&e3)||wj,Zf=Tr?function(e){return lo(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,i=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,i=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},Aie=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<e.length;++i)a=a.replace(e[i][0],e[i][1]);return a}}(),H5=/(^\s|\s$|\n)/;function Zn(e,t){return"<"+e+(t.match(H5)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function eh(e){return na(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function vt(e,t,r){return"<"+e+(r!=null?eh(r):"")+(t!=null?(t.match(H5)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function cw(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Eie(e,t){switch(typeof e){case"string":var r=vt("vt:lpwstr",Mr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return vt((e|0)==e?"vt:i4":"vt:r8",Mr(String(e)));case"boolean":return vt("vt:bool",e?"true":"false")}if(e instanceof Date)return vt("vt:filetime",cw(e));throw new Error("Unable to serialize "+e)}var $n={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Fd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ai={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Oie(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,s=5;s>=0;--s)i=i*256+e[t+s];return a==2047?i==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,i+=Math.pow(2,52)),r*Math.pow(2,a-52)*i)}function _ie(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,l=a?-t:t;isFinite(l)?l==0?i=s=0:(i=Math.floor(Math.log(l)/Math.LN2),s=l*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var d=0;d<=5;++d,s/=256)e[r+d]=s&255;e[r+6]=(i&15)<<4|s&15,e[r+7]=i>>4|a}var r3=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var i=0,s=e[0][a].length;i<s;i+=r)t.push.apply(t,e[0][a].slice(i,i+r));return t},n3=Tr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:lo(t)})):r3(e)}:r3,a3=function(e,t,r){for(var a=[],i=t;i<r;i+=2)a.push(String.fromCharCode(Ju(e,i)));return a.join("").replace(af,"")},MS=Tr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(af,""):a3(e,t,r)}:a3,i3=function(e,t,r){for(var a=[],i=t;i<t+r;++i)a.push(("0"+e[i].toString(16)).slice(-2));return a.join("")},G5=Tr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):i3(e,t,r)}:i3,s3=function(e,t,r){for(var a=[],i=t;i<r;i++)a.push(String.fromCharCode(Mc(e,i)));return a.join("")},jh=Tr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):s3(t,r,a)}:s3,K5=function(e,t){var r=ii(e,t);return r>0?jh(e,t+4,t+4+r-1):""},V5=K5,Y5=function(e,t){var r=ii(e,t);return r>0?jh(e,t+4,t+4+r-1):""},X5=Y5,Q5=function(e,t){var r=2*ii(e,t);return r>0?jh(e,t+4,t+4+r-1):""},J5=Q5,Z5=function(t,r){var a=ii(t,r);return a>0?MS(t,r+4,r+4+a):""},eP=Z5,tP=function(e,t){var r=ii(e,t);return r>0?jh(e,t+4,t+4+r):""},rP=tP,nP=function(e,t){return Oie(e,t)},hg=nP,BS=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Tr&&(V5=function(t,r){if(!Buffer.isBuffer(t))return K5(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},X5=function(t,r){if(!Buffer.isBuffer(t))return Y5(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},J5=function(t,r){if(!Buffer.isBuffer(t))return Q5(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},eP=function(t,r){if(!Buffer.isBuffer(t))return Z5(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},rP=function(t,r){if(!Buffer.isBuffer(t))return tP(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},hg=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):nP(t,r)},BS=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Mc=function(e,t){return e[t]},Ju=function(e,t){return e[t+1]*256+e[t]},kie=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ii=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},vl=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Iie=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function of(e,t){var r="",a,i,s=[],l,d,u,f;switch(t){case"dbcs":if(f=this.l,Tr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(u=0;u<e;++u)r+=String.fromCharCode(Ju(this,f)),f+=2;e*=2;break;case"utf8":r=jh(this,this.l,this.l+e);break;case"utf16le":e*=2,r=MS(this,this.l,this.l+e);break;case"wstr":return of.call(this,e,"dbcs");case"lpstr-ansi":r=V5(this,this.l),e=4+ii(this,this.l);break;case"lpstr-cp":r=X5(this,this.l),e=4+ii(this,this.l);break;case"lpwstr":r=J5(this,this.l),e=4+2*ii(this,this.l);break;case"lpp4":e=4+ii(this,this.l),r=eP(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ii(this,this.l),r=rP(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=Mc(this,this.l+e++))!==0;)s.push(Up(l));r=s.join("");break;case"_wstr":for(e=0,r="";(l=Ju(this,this.l+e))!==0;)s.push(Up(l)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",f=this.l,u=0;u<e;++u){if(this.lens&&this.lens.indexOf(f)!==-1)return l=Mc(this,f),this.l=f+1,d=of.call(this,e-u,l?"dbcs-cont":"sbcs-cont"),s.join("")+d;s.push(Up(Ju(this,f))),f+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",f=this.l,u=0;u!=e;++u){if(this.lens&&this.lens.indexOf(f)!==-1)return l=Mc(this,f),this.l=f+1,d=of.call(this,e-u,l?"dbcs-cont":"sbcs-cont"),s.join("")+d;s.push(Up(Mc(this,f))),f+=1}r=s.join("");break;default:switch(e){case 1:return a=Mc(this,this.l),this.l++,a;case 2:return a=(t==="i"?kie:Ju)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?vl:Iie)(this,this.l),this.l+=4,a):(i=ii(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=hg(this,this.l):i=hg([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:r=G5(this,this.l,e);break}}return this.l+=e,r}var Die=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Rie=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Pie=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Mie(e,t,r){var a=0,i=0;if(r==="dbcs"){for(i=0;i!=t.length;++i)Pie(this,t.charCodeAt(i),this.l+2*i);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;a=t.length}else if(r==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var l=t.charCodeAt(i);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,Die(this,t,this.l);break;case 8:if(a=8,r==="f"){_ie(this,t,this.l);break}case 16:break;case-4:a=4,Rie(this,t,this.l);break}return this.l+=a,this}function aP(e,t){var r=G5(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ni(e,t){e.l=t,e.read_shift=of,e.chk=aP,e.write_shift=Mie}function gs(e,t){e.l+=t}function rt(e){var t=Bl(e);return ni(t,0),t}function Fa(){var e=[],t=Tr?256:2048,r=function(f){var p=rt(f);return ni(p,0),p},a=r(t),i=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},s=function(f){return a&&f<a.length-a.l?a:(i(),a=r(Math.max(f+1,t)))},l=function(){return i(),Jn(e)},d=function(f){i(),a=f,a.l==null&&(a.l=a.length),s(t)};return{next:s,push:d,end:l,_bufs:e}}function ut(e,t,r,a){var i=+t,s;if(!isNaN(i)){a||(a=Oue[i].p||(r||[]).length||0),s=1+(i>=128?1:0)+1,a>=128&&++s,a>=16384&&++s,a>=2097152&&++s;var l=e.next(s);i<=127?l.write_shift(1,i):(l.write_shift(1,(i&127)+128),l.write_shift(1,i>>7));for(var d=0;d!=4;++d)if(a>=128)l.write_shift(1,(a&127)+128),a>>=7;else{l.write_shift(1,a);break}a>0&&BS(r)&&e.push(r)}}function lf(e,t,r){var a=$a(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function o3(e,t,r){var a=$a(e);return a.s=lf(a.s,t.s,r),a.e=lf(a.e,t.s,r),a}function cf(e,t){if(e.cRel&&e.c<0)for(e=$a(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=$a(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Br(e);return!e.cRel&&e.cRel!=null&&(r=Lie(r)),!e.rRel&&e.rRel!=null&&(r=Bie(r)),r}function Sj(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ua(e.s.c)+":"+(e.e.cRel?"":"$")+ua(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ta(e.s.r)+":"+(e.e.rRel?"":"$")+ta(e.e.r):cf(e.s,t.biff)+":"+cf(e.e,t.biff)}function FS(e){return parseInt(Fie(e),10)-1}function ta(e){return""+(e+1)}function Bie(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Fie(e){return e.replace(/\$(\d+)$/,"$1")}function LS(e){for(var t=zie(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function ua(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Lie(e){return e.replace(/^([A-Z])/,"$$$1")}function zie(e){return e.replace(/^\$([A-Z])/,"$1")}function $ie(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Un(e){for(var t=0,r=0,a=0;a<e.length;++a){var i=e.charCodeAt(a);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function Br(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function li(e){var t=e.indexOf(":");return t==-1?{s:Un(e),e:Un(e)}:{s:Un(e.slice(0,t)),e:Un(e.slice(t+1))}}function Cn(e,t){return typeof t>"u"||typeof t=="number"?Cn(e.s,e.e):(typeof e!="string"&&(e=Br(e)),typeof t!="string"&&(t=Br(t)),e==t?e:e+":"+t)}function tn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,i=0,s=e.length;for(r=0;a<s&&!((i=e.charCodeAt(a)-64)<1||i>26);++a)r=26*r+i;for(t.s.c=--r,r=0;a<s&&!((i=e.charCodeAt(a)-48)<0||i>9);++a)r=10*r+i;if(t.s.r=--r,a===s||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=s&&!((i=e.charCodeAt(a)-64)<1||i>26);++a)r=26*r+i;for(t.e.c=--r,r=0;a!=s&&!((i=e.charCodeAt(a)-48)<0||i>9);++a)r=10*r+i;return t.e.r=--r,t}function l3(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Uo(e.z,r?za(t):t)}catch{}try{return e.w=Uo((e.XF||{}).numFmtId||(r?14:0),r?za(t):t)}catch{return""+t}}function ao(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?wh[e.v]||e.v:t==null?l3(e,e.v):l3(e,t))}function Gl(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function iP(e,t,r){var a=r||{},i=e?Array.isArray(e):a.dense,s=e||(i?[]:{}),l=0,d=0;if(s&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var u=typeof a.origin=="string"?Un(a.origin):a.origin;l=u.r,d=u.c}s["!ref"]||(s["!ref"]="A1:A1")}var f={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var p=tn(s["!ref"]);f.s.c=p.s.c,f.s.r=p.s.r,f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),l==-1&&(f.e.r=l=p.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=t[m].length;++x)if(!(typeof t[m][x]>"u")){var v={v:t[m][x]},j=l+m,b=d+x;if(f.s.r>j&&(f.s.r=j),f.s.c>b&&(f.s.c=b),f.e.r<j&&(f.e.r=j),f.e.c<b&&(f.e.c=b),t[m][x]&&typeof t[m][x]=="object"&&!Array.isArray(t[m][x])&&!(t[m][x]instanceof Date))v=t[m][x];else if(Array.isArray(v.v)&&(v.f=t[m][x][1],v.v=v.v[0]),v.v===null)if(v.f)v.t="n";else if(a.nullError)v.t="e",v.v=0;else if(a.sheetStubs)v.t="z";else continue;else typeof v.v=="number"?v.t="n":typeof v.v=="boolean"?v.t="b":v.v instanceof Date?(v.z=a.dateNF||pn[14],a.cellDates?(v.t="d",v.w=Uo(v.z,za(v.v))):(v.t="n",v.v=za(v.v),v.w=Uo(v.z,v.v))):v.t="s";if(i)s[j]||(s[j]=[]),s[j][b]&&s[j][b].z&&(v.z=s[j][b].z),s[j][b]=v;else{var y=Br({c:b,r:j});s[y]&&s[y].z&&(v.z=s[y].z),s[y]=v}}}return f.s.c<1e7&&(s["!ref"]=Cn(f)),s}function Ld(e,t){return iP(null,e,t)}function Uie(e){return e.read_shift(4,"i")}function Ki(e,t){return t||(t=rt(4)),t.write_shift(4,e),t}function fa(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function qn(e,t){var r=!1;return t==null&&(r=!0,t=rt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function qie(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Wie(e,t){return t||(t=rt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function zS(e,t){var r=e.l,a=e.read_shift(1),i=fa(e),s=[],l={t:i,h:i};if((a&1)!==0){for(var d=e.read_shift(4),u=0;u!=d;++u)s.push(qie(e));l.r=s}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}function Hie(e,t){var r=!1;return t==null&&(r=!0,t=rt(15+4*e.t.length)),t.write_shift(1,0),qn(e.t,t),r?t.slice(0,t.l):t}var Gie=zS;function Kie(e,t){var r=!1;return t==null&&(r=!0,t=rt(23+4*e.t.length)),t.write_shift(1,1),qn(e.t,t),t.write_shift(4,1),Wie({},t),r?t.slice(0,t.l):t}function _i(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Kl(e,t){return t==null&&(t=rt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Vl(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Yl(e,t){return t==null&&(t=rt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Vie=fa,sP=qn;function $S(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function pg(e,t){var r=!1;return t==null&&(r=!0,t=rt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Yie=fa,dw=$S,US=pg;function oP(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var i=a===0?hg([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):vl(t,0)>>2;return r?i/100:i}function lP(e,t){t==null&&(t=rt(4));var r=0,a=0,i=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?i:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function cP(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Xie(e,t){return t||(t=rt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Xl=cP,zd=Xie;function $d(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Fl(e,t){return(t||rt(8)).write_shift(8,e,"f")}function Qie(e){var t={},r=e.read_shift(1),a=r>>>1,i=e.read_shift(1),s=e.read_shift(2,"i"),l=e.read_shift(1),d=e.read_shift(1),u=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=i;var f=sse[i];f&&(t.rgb=v3(f));break;case 2:t.rgb=v3([l,d,u]);break;case 3:t.theme=i;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function mg(e,t){if(t||(t=rt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Jie(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Zie(e,t){t||(t=rt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var dP=2,ti=3,Gp=11,gg=19,Kp=64,ese=65,tse=71,rse=4108,nse=4126,Qn=80,c3={1:{n:"CodePage",t:dP},2:{n:"Category",t:Qn},3:{n:"PresentationFormat",t:Qn},4:{n:"ByteCount",t:ti},5:{n:"LineCount",t:ti},6:{n:"ParagraphCount",t:ti},7:{n:"SlideCount",t:ti},8:{n:"NoteCount",t:ti},9:{n:"HiddenCount",t:ti},10:{n:"MultimediaClipCount",t:ti},11:{n:"ScaleCrop",t:Gp},12:{n:"HeadingPairs",t:rse},13:{n:"TitlesOfParts",t:nse},14:{n:"Manager",t:Qn},15:{n:"Company",t:Qn},16:{n:"LinksUpToDate",t:Gp},17:{n:"CharacterCount",t:ti},19:{n:"SharedDoc",t:Gp},22:{n:"HyperlinksChanged",t:Gp},23:{n:"AppVersion",t:ti,p:"version"},24:{n:"DigSig",t:ese},26:{n:"ContentType",t:Qn},27:{n:"ContentStatus",t:Qn},28:{n:"Language",t:Qn},29:{n:"Version",t:Qn},255:{},2147483648:{n:"Locale",t:gg},2147483651:{n:"Behavior",t:gg},1919054434:{}},d3={1:{n:"CodePage",t:dP},2:{n:"Title",t:Qn},3:{n:"Subject",t:Qn},4:{n:"Author",t:Qn},5:{n:"Keywords",t:Qn},6:{n:"Comments",t:Qn},7:{n:"Template",t:Qn},8:{n:"LastAuthor",t:Qn},9:{n:"RevNumber",t:Qn},10:{n:"EditTime",t:Kp},11:{n:"LastPrinted",t:Kp},12:{n:"CreatedDate",t:Kp},13:{n:"ModifiedDate",t:Kp},14:{n:"PageCount",t:ti},15:{n:"WordCount",t:ti},16:{n:"CharCount",t:ti},17:{n:"Thumbnail",t:tse},18:{n:"Application",t:Qn},19:{n:"DocSecurity",t:ti},255:{},2147483648:{n:"Locale",t:gg},2147483651:{n:"Behavior",t:gg},1919054434:{}};function ase(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var ise=ase([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),sse=$a(ise),wh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ose={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Vp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function uP(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function fP(e,t){var r=xie(ose),a=[],i;a[a.length]=En,a[a.length]=vt("Types",null,{xmlns:$n.CT,"xmlns:xsd":$n.xsd,"xmlns:xsi":$n.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return vt("Default",null,{Extension:u[0],ContentType:u[1]})}));var s=function(u){e[u]&&e[u].length>0&&(i=e[u][0],a[a.length]=vt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Vp[u][t.bookType]||Vp[u].xlsx}))},l=function(u){(e[u]||[]).forEach(function(f){a[a.length]=vt("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:Vp[u][t.bookType]||Vp[u].xlsx})})},d=function(u){(e[u]||[]).forEach(function(f){a[a.length]=vt("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:r[u][0]})})};return s("workbooks"),l("sheets"),l("charts"),d("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),l("metadata"),d("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var br={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function hP(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Kc(e){var t=[En,vt("Relationships",null,{xmlns:$n.RELS})];return na(e["!id"]).forEach(function(r){t[t.length]=vt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Pr(e,t,r,a,i,s){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=a,i.Target=r,[br.HLINK,br.XPATH,br.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function lse(e){var t=[En];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function u3(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function cse(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function dse(e){var t=[En];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(u3(e[r][0],e[r][1])),t.push(cse("",e[r][0]));return t.push(u3("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function pP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+og.version+"</meta:generator></office:meta></office:document-meta>"}var El=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Nj(e,t,r,a,i){i[e]!=null||t==null||t===""||(i[e]=t,t=Mr(t),a[a.length]=r?vt(e,t,r):Zn(e,t))}function mP(e,t){var r=t||{},a=[En,vt("cp:coreProperties",null,{"xmlns:cp":$n.CORE_PROPS,"xmlns:dc":$n.dc,"xmlns:dcterms":$n.dcterms,"xmlns:dcmitype":$n.dcmitype,"xmlns:xsi":$n.xsi})],i={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&Nj("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:cw(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,i),e.ModifiedDate!=null&&Nj("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:cw(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,i));for(var s=0;s!=El.length;++s){var l=El[s],d=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:e?e[l[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&Nj(l[0],d,null,a,i)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var Vc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],gP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function xP(e){var t=[],r=vt;return e||(e={}),e.Application="SheetJS",t[t.length]=En,t[t.length]=vt("Properties",null,{xmlns:$n.EXT_PROPS,"xmlns:vt":$n.vt}),Vc.forEach(function(a){if(e[a[1]]!==void 0){var i;switch(a[2]){case"string":i=Mr(String(e[a[1]]));break;case"bool":i=e[a[1]]?"true":"false";break}i!==void 0&&(t[t.length]=r(a[0],i))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Mr(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function yP(e){var t=[En,vt("Properties",null,{xmlns:$n.CUST_PROPS,"xmlns:vt":$n.vt})];if(!e)return t.join("");var r=1;return na(e).forEach(function(i){++r,t[t.length]=vt("property",Eie(e[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Mr(i)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var f3={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function use(e,t){var r=[];return na(f3).map(function(a){for(var i=0;i<El.length;++i)if(El[i][1]==a)return El[i];for(i=0;i<Vc.length;++i)if(Vc[i][1]==a)return Vc[i];throw a}).forEach(function(a){if(e[a[1]]!=null){var i=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(Zn(f3[a[1]]||a[1],i))}}),vt("DocumentProperties",r.join(""),{xmlns:ai.o})}function fse(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",i=[];return e&&na(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var l=0;l<El.length;++l)if(s==El[l][1])return;for(l=0;l<Vc.length;++l)if(s==Vc[l][1])return;for(l=0;l<r.length;++l)if(s==r[l])return;var d=e[s],u="string";typeof d=="number"?(u="float",d=String(d)):d===!0||d===!1?(u="boolean",d=d?"1":"0"):d=String(d),i.push(vt(ZI(s),d,{"dt:dt":u}))}}),t&&na(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var l=t[s],d="string";typeof l=="number"?(d="float",l=String(l)):l===!0||l===!1?(d="boolean",l=l?"1":"0"):l instanceof Date?(d="dateTime.tz",l=l.toISOString()):l=String(l),i.push(vt(ZI(s),l,{"dt:dt":d}))}}),"<"+a+' xmlns="'+ai.o+'">'+i.join("")+"</"+a+">"}function hse(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),i=(r-a)/Math.pow(2,32);a*=1e7,i*=1e7;var s=a/Math.pow(2,32)|0;s>0&&(a=a%Math.pow(2,32),i+=s);var l=rt(8);return l.write_shift(4,a),l.write_shift(4,i),l}function h3(e,t){var r=rt(4),a=rt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=rt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=hse(t);break;case 31:case 80:for(a=rt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Jn([r,a])}var vP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function pse(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function p3(e,t,r){var a=rt(8),i=[],s=[],l=8,d=0,u=rt(8),f=rt(8);if(u.write_shift(4,2),u.write_shift(4,1200),f.write_shift(4,1),s.push(u),i.push(f),l+=8+u.length,!t){f=rt(8),f.write_shift(4,0),i.unshift(f);var p=[rt(4)];for(p[0].write_shift(4,e.length),d=0;d<e.length;++d){var m=e[d][0];for(u=rt(8+2*(m.length+1)+(m.length%2?0:2)),u.write_shift(4,d+2),u.write_shift(4,m.length+1),u.write_shift(0,m,"dbcs");u.l!=u.length;)u.write_shift(1,0);p.push(u)}u=Jn(p),s.unshift(u),l+=8+u.length}for(d=0;d<e.length;++d)if(!(t&&!t[e[d][0]])&&!(vP.indexOf(e[d][0])>-1||gP.indexOf(e[d][0])>-1)&&e[d][1]!=null){var x=e[d][1],v=0;if(t){v=+t[e[d][0]];var j=r[v];if(j.p=="version"&&typeof x=="string"){var b=x.split(".");x=(+b[0]<<16)+(+b[1]||0)}u=h3(j.t,x)}else{var y=pse(x);y==-1&&(y=31,x=String(x)),u=h3(y,x)}s.push(u),f=rt(8),f.write_shift(4,t?v:2+d),i.push(f),l+=8+u.length}var C=8*(s.length+1);for(d=0;d<s.length;++d)i[d].write_shift(4,C),C+=s[d].length;return a.write_shift(4,l),a.write_shift(4,s.length),Jn([a].concat(i).concat(s))}function m3(e,t,r,a,i,s){var l=rt(i?68:48),d=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,Hr.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,i?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,i?68:48);var u=p3(e,r,a);if(d.push(u),i){var f=p3(i,null,null);l.write_shift(16,s,"hex"),l.write_shift(4,68+u.length),d.push(f)}return Jn(d)}function mse(e,t){t||(t=rt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function gse(e,t){return e.read_shift(t)===1}function wa(e,t){return t||(t=rt(2)),t.write_shift(2,+!!e),t}function bP(e){return e.read_shift(2,"u")}function bi(e,t){return t||(t=rt(2)),t.write_shift(2,e),t}function jP(e,t,r){return r||(r=rt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function wP(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var l=a?e.read_shift(a,i):"";return l}function xse(e){var t=e.t||"",r=rt(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=rt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var i=[r,a];return Jn(i)}function yse(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function vse(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):yse(e,a,r)}function bse(e,t,r){if(r.biff>5)return vse(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function SP(e,t,r){return r||(r=rt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function g3(e,t){t||(t=rt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function jse(e){var t=rt(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var i=a.indexOf("#"),s=i>-1?31:23;switch(a.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)t.write_shift(4,l[r]);if(s==28)a=a.slice(1),g3(a,t);else if(s&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));var d=i>-1?a.slice(0,i):a;for(t.write_shift(4,2*(d.length+1)),r=0;r<d.length;++r)t.write_shift(2,d.charCodeAt(r));t.write_shift(2,0),s&8&&g3(i>-1?a.slice(i+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));for(var u=0;a.slice(u*3,u*3+3)=="../"||a.slice(u*3,u*3+3)=="..\\";)++u;for(t.write_shift(2,u),t.write_shift(4,a.length-3*u+1),r=0;r<a.length-3*u;++r)t.write_shift(1,a.charCodeAt(r+3*u)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Ll(e,t,r,a){return a||(a=rt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function wse(e,t,r){var a=r.biff>8?4:2,i=e.read_shift(a),s=e.read_shift(a,"i"),l=e.read_shift(a,"i");return[i,s,l]}function Sse(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);return{s:{c:a,r:t},e:{c:i,r}}}function NP(e,t){return t||(t=rt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function qS(e,t,r){var a=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,i=8;break;case"biff4":a=4,i=6;break;case"biff3":a=3,i=6;break;case"biff2":a=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=rt(i);return s.write_shift(2,a),s.write_shift(2,t),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Nse(e,t){var r=!t||t.biff==8,a=rt(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Tse(e,t){var r=!t||t.biff>=8?2:1,a=rt(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=a.slice(0,a.l);return i.l=a.l,i}function Cse(e,t){var r=rt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],i=0;i<e.length;++i)a[i]=xse(e[i]);var s=Jn([r].concat(a));return s.parts=[r.length].concat(a.map(function(l){return l.length})),s}function Ase(){var e=rt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Ese(e){var t=rt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Ose(e,t){var r=e.name||"Arial",a=t&&t.biff==5,i=a?15+r.length:16+2*r.length,s=rt(i);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),a||s.write_shift(1,1),s.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),s}function _se(e,t,r,a){var i=rt(10);return Ll(e,t,a,i),i.write_shift(4,r),i}function kse(e,t,r,a,i){var s=!i||i.biff==8,l=rt(8+ +s+(1+s)*r.length);return Ll(e,t,a,l),l.write_shift(2,r.length),s&&l.write_shift(1,1),l.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),l}function Ise(e,t,r,a){var i=r&&r.biff==5;a||(a=rt(i?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(i?1:2,t.length),i||a.write_shift(1,1),a.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var s=a.length>a.l?a.slice(0,a.l):a;return s.l==null&&(s.l=s.length),s}function Dse(e,t){var r=t.biff==8||!t.biff?4:2,a=rt(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function x3(e,t,r,a){var i=r&&r.biff==5;a||(a=rt(i?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&i&&(s|=1024),a.write_shift(4,s),a.write_shift(4,0),i||a.write_shift(4,0),a.write_shift(2,0),a}function Rse(e){var t=rt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Pse(e,t,r,a,i,s){var l=rt(8);return Ll(e,t,a,l),jP(r,s,l),l}function Mse(e,t,r,a){var i=rt(14);return Ll(e,t,a,i),Fl(r,i),i}function Bse(e,t,r){if(r.biff<8)return Fse(e,t,r);for(var a=[],i=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)a.push(wse(e,r.biff>8?12:6,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return a}function Fse(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=wP(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function Lse(e){var t=rt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)NP(e[r],t);return t}function zse(e){var t=rt(24),r=Un(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(a[i],16));return Jn([t,jse(e[1])])}function $se(e){var t=e[1].Tooltip,r=rt(10+2*(t.length+1));r.write_shift(2,2048);var a=Un(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var i=0;i<t.length;++i)r.write_shift(2,t.charCodeAt(i));return r.write_shift(2,0),r}function Use(e){return e||(e=rt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function qse(e,t,r){if(!r.cellStyles)return gs(e,t);var a=r&&r.biff>=12?4:2,i=e.read_shift(a),s=e.read_shift(a),l=e.read_shift(a),d=e.read_shift(a),u=e.read_shift(2);a==2&&(e.l+=2);var f={s:i,e:s,w:l,ixfe:d,flags:u};return(r.biff>=5||!r.biff)&&(f.level=u>>8&7),f}function Wse(e,t){var r=rt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function Hse(e){for(var t=rt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function Gse(e,t,r){var a=rt(15);return Nh(a,e,t),a.write_shift(8,r,"f"),a}function Kse(e,t,r){var a=rt(9);return Nh(a,e,t),a.write_shift(2,r),a}var Vse=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=IS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(d,u){var f=[],p=Bl(1);switch(u.type){case"base64":p=Wi(no(d));break;case"binary":p=Wi(d);break;case"buffer":case"array":p=d;break}ni(p,0);var m=p.read_shift(1),x=!!(m&136),v=!1,j=!1;switch(m){case 2:break;case 3:break;case 48:v=!0,x=!0;break;case 49:v=!0,x=!0;break;case 131:break;case 139:break;case 140:j=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var b=0,y=521;m==2&&(b=p.read_shift(2)),p.l+=3,m!=2&&(b=p.read_shift(4)),b>1048576&&(b=1e6),m!=2&&(y=p.read_shift(2));var C=p.read_shift(2),E=u.codepage||1252;m!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(E=e[p[p.l]]),p.l+=1,p.l+=2),j&&(p.l+=36);for(var O=[],S={},T=Math.min(p.length,m==2?521:y-10-(v?264:0)),k=j?32:11;p.l<T&&p[p.l]!=13;)switch(S={},S.name=lg.utils.decode(E,p.slice(p.l,p.l+k)).replace(/[\u0000\r\n].*$/g,""),p.l+=k,S.type=String.fromCharCode(p.read_shift(1)),m!=2&&!j&&(S.offset=p.read_shift(4)),S.len=p.read_shift(1),m==2&&(S.offset=p.read_shift(2)),S.dec=p.read_shift(1),S.name.length&&O.push(S),m!=2&&(p.l+=j?13:14),S.type){case"B":(!v||S.len!=8)&&u.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(p[p.l]!==13&&(p.l=y-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=y;var D=0,F=0;for(f[0]=[],F=0;F!=O.length;++F)f[0][F]=O[F].name;for(;b-- >0;){if(p[p.l]===42){p.l+=C;continue}for(++p.l,f[++D]=[],F=0,F=0;F!=O.length;++F){var B=p.slice(p.l,p.l+O[F].len);p.l+=O[F].len,ni(B,0);var M=lg.utils.decode(E,B);switch(O[F].type){case"C":M.trim().length&&(f[D][F]=M.replace(/\s+$/,""));break;case"D":M.length===8?f[D][F]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):f[D][F]=M;break;case"F":f[D][F]=parseFloat(M.trim());break;case"+":case"I":f[D][F]=j?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":f[D][F]=!0;break;case"N":case"F":f[D][F]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));f[D][F]="##MEMO##"+(j?parseInt(M.trim(),10):B.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(f[D][F]=+M||0);break;case"@":f[D][F]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":f[D][F]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":f[D][F]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":f[D][F]=-B.read_shift(-8,"f");break;case"B":if(v&&O[F].len==8){f[D][F]=B.read_shift(8,"f");break}case"G":case"P":B.l+=O[F].len;break;case"0":if(O[F].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[F].type)}}}if(m!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return u&&u.sheetRows&&(f=f.slice(0,u.sheetRows)),u.DBF=O,f}function a(d,u){var f=u||{};f.dateNF||(f.dateNF="yyyymmdd");var p=Ld(r(d,f),f);return p["!cols"]=f.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete f.DBF,p}function i(d,u){try{return Gl(a(d,u),u)}catch(f){if(u&&u.WTF)throw f}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function l(d,u){var f=u||{};if(+f.codepage>=0&&Xf(+f.codepage),f.type=="string")throw new Error("Cannot write DBF to JS string");var p=Fa(),m=jg(d,{header:1,raw:!0,cellDates:!0}),x=m[0],v=m.slice(1),j=d["!cols"]||[],b=0,y=0,C=0,E=1;for(b=0;b<x.length;++b){if(((j[b]||{}).DBF||{}).name){x[b]=j[b].DBF.name,++C;continue}if(x[b]!=null){if(++C,typeof x[b]=="number"&&(x[b]=x[b].toString(10)),typeof x[b]!="string")throw new Error("DBF Invalid column name "+x[b]+" |"+typeof x[b]+"|");if(x.indexOf(x[b])!==b){for(y=0;y<1024;++y)if(x.indexOf(x[b]+"_"+y)==-1){x[b]+="_"+y;break}}}}var O=tn(d["!ref"]),S=[],T=[],k=[];for(b=0;b<=O.e.c-O.s.c;++b){var D="",F="",B=0,M=[];for(y=0;y<v.length;++y)v[y][b]!=null&&M.push(v[y][b]);if(M.length==0||x[b]==null){S[b]="?";continue}for(y=0;y<M.length;++y){switch(typeof M[y]){case"number":F="B";break;case"string":F="C";break;case"boolean":F="L";break;case"object":F=M[y]instanceof Date?"D":"C";break;default:F="C"}B=Math.max(B,String(M[y]).length),D=D&&D!=F?"C":F}B>250&&(B=250),F=((j[b]||{}).DBF||{}).type,F=="C"&&j[b].DBF.len>B&&(B=j[b].DBF.len),D=="B"&&F=="N"&&(D="N",k[b]=j[b].DBF.dec,B=j[b].DBF.len),T[b]=D=="C"||F=="N"?B:s[D]||0,E+=T[b],S[b]=D}var L=p.next(32);for(L.write_shift(4,318902576),L.write_shift(4,v.length),L.write_shift(2,296+32*C),L.write_shift(2,E),b=0;b<4;++b)L.write_shift(4,0);for(L.write_shift(4,0|(+t[C5]||3)<<8),b=0,y=0;b<x.length;++b)if(x[b]!=null){var A=p.next(32),U=(x[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);A.write_shift(1,U,"sbcs"),A.write_shift(1,S[b]=="?"?"C":S[b],"sbcs"),A.write_shift(4,y),A.write_shift(1,T[b]||s[S[b]]||0),A.write_shift(1,k[b]||0),A.write_shift(1,2),A.write_shift(4,0),A.write_shift(1,0),A.write_shift(4,0),A.write_shift(4,0),y+=T[b]||s[S[b]]||0}var P=p.next(264);for(P.write_shift(4,13),b=0;b<65;++b)P.write_shift(4,0);for(b=0;b<v.length;++b){var I=p.next(E);for(I.write_shift(1,0),y=0;y<x.length;++y)if(x[y]!=null)switch(S[y]){case"L":I.write_shift(1,v[b][y]==null?63:v[b][y]?84:70);break;case"B":I.write_shift(8,v[b][y]||0,"f");break;case"N":var R="0";for(typeof v[b][y]=="number"&&(R=v[b][y].toFixed(k[y]||0)),C=0;C<T[y]-R.length;++C)I.write_shift(1,32);I.write_shift(1,R,"sbcs");break;case"D":v[b][y]?(I.write_shift(4,("0000"+v[b][y].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(v[b][y].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+v[b][y].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var W=String(v[b][y]!=null?v[b][y]:"").slice(0,T[y]);for(I.write_shift(1,W,"sbcs"),C=0;C<T[y]-W.length;++C)I.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:i,to_sheet:a,from_sheet:l}}(),Yse=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+na(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(x,v){var j=e[v];return typeof j=="number"?$I(j):j},a=function(x,v,j){var b=v.charCodeAt(0)-32<<4|j.charCodeAt(0)-48;return b==59?x:$I(b)};e["|"]=254;function i(x,v){switch(v.type){case"base64":return s(no(x),v);case"binary":return s(x,v);case"buffer":return s(Tr&&Buffer.isBuffer(x)?x.toString("binary"):vh(x),v);case"array":return s(f0(x),v)}throw new Error("Unrecognized type "+v.type)}function s(x,v){var j=x.split(/[\n\r]+/),b=-1,y=-1,C=0,E=0,O=[],S=[],T=null,k={},D=[],F=[],B=[],M=0,L;for(+v.codepage>=0&&Xf(+v.codepage);C!==j.length;++C){M=0;var A=j[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),U=A.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),P=U[0],I;if(A.length>0)switch(P){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&S.push(A.slice(3).replace(/;;/g,";"));break;case"C":var R=!1,W=!1,Q=!1,ge=!1,q=-1,Y=-1;for(E=1;E<U.length;++E)switch(U[E].charAt(0)){case"A":break;case"X":y=parseInt(U[E].slice(1))-1,W=!0;break;case"Y":for(b=parseInt(U[E].slice(1))-1,W||(y=0),L=O.length;L<=b;++L)O[L]=[];break;case"K":I=U[E].slice(1),I.charAt(0)==='"'?I=I.slice(1,I.length-1):I==="TRUE"?I=!0:I==="FALSE"?I=!1:isNaN(Ys(I))?isNaN(Jf(I).getDate())||(I=Ta(I)):(I=Ys(I),T!==null&&F5(T)&&(I=U5(I))),R=!0;break;case"E":ge=!0;var z=Koe(U[E].slice(1),{r:b,c:y});O[b][y]=[O[b][y],z];break;case"S":Q=!0,O[b][y]=[O[b][y],"S5S"];break;case"G":break;case"R":q=parseInt(U[E].slice(1))-1;break;case"C":Y=parseInt(U[E].slice(1))-1;break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+A)}if(R&&(O[b][y]&&O[b][y].length==2?O[b][y][0]=I:O[b][y]=I,T=null),Q){if(ge)throw new Error("SYLK shared formula cannot have own formula");var ee=q>-1&&O[q][Y];if(!ee||!ee[1])throw new Error("SYLK shared formula cannot find base");O[b][y][1]=Voe(ee[1],{r:b-q,c:y-Y})}break;case"F":var H=0;for(E=1;E<U.length;++E)switch(U[E].charAt(0)){case"X":y=parseInt(U[E].slice(1))-1,++H;break;case"Y":for(b=parseInt(U[E].slice(1))-1,L=O.length;L<=b;++L)O[L]=[];break;case"M":M=parseInt(U[E].slice(1))/20;break;case"F":break;case"G":break;case"P":T=S[parseInt(U[E].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=U[E].slice(1).split(" "),L=parseInt(B[0],10);L<=parseInt(B[1],10);++L)M=parseInt(B[2],10),F[L-1]=M===0?{hidden:!0}:{wch:M},WS(F[L-1]);break;case"C":y=parseInt(U[E].slice(1))-1,F[y]||(F[y]={});break;case"R":b=parseInt(U[E].slice(1))-1,D[b]||(D[b]={}),M>0?(D[b].hpt=M,D[b].hpx=OP(M)):M===0&&(D[b].hidden=!0);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+A)}H<1&&(T=null);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+A)}}return D.length>0&&(k["!rows"]=D),F.length>0&&(k["!cols"]=F),v&&v.sheetRows&&(O=O.slice(0,v.sheetRows)),[O,k]}function l(x,v){var j=i(x,v),b=j[0],y=j[1],C=Ld(b,v);return na(y).forEach(function(E){C[E]=y[E]}),C}function d(x,v){return Gl(l(x,v),v)}function u(x,v,j,b){var y="C;Y"+(j+1)+";X"+(b+1)+";K";switch(x.t){case"n":y+=x.v||0,x.f&&!x.F&&(y+=";E"+GS(x.f,{r:j,c:b}));break;case"b":y+=x.v?"TRUE":"FALSE";break;case"e":y+=x.w||x.v;break;case"d":y+='"'+(x.w||x.v)+'"';break;case"s":y+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function f(x,v){v.forEach(function(j,b){var y="F;W"+(b+1)+" "+(b+1)+" ";j.hidden?y+="0":(typeof j.width=="number"&&!j.wpx&&(j.wpx=xg(j.width)),typeof j.wpx=="number"&&!j.wch&&(j.wch=yg(j.wpx)),typeof j.wch=="number"&&(y+=Math.round(j.wch))),y.charAt(y.length-1)!=" "&&x.push(y)})}function p(x,v){v.forEach(function(j,b){var y="F;";j.hidden?y+="M0;":j.hpt?y+="M"+20*j.hpt+";":j.hpx&&(y+="M"+20*vg(j.hpx)+";"),y.length>2&&x.push(y+"R"+(b+1))})}function m(x,v){var j=["ID;PWXL;N;E"],b=[],y=tn(x["!ref"]),C,E=Array.isArray(x),O=`\r
`;j.push("P;PGeneral"),j.push("F;P0;DG0G8;M255"),x["!cols"]&&f(j,x["!cols"]),x["!rows"]&&p(j,x["!rows"]),j.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var S=y.s.r;S<=y.e.r;++S)for(var T=y.s.c;T<=y.e.c;++T){var k=Br({r:S,c:T});C=E?(x[S]||[])[T]:x[k],!(!C||C.v==null&&(!C.f||C.F))&&b.push(u(C,x,S,T))}return j.join(O)+O+b.join(O)+O+"E"+O}return{to_workbook:d,to_sheet:l,from_sheet:m}}(),Xse=function(){function e(s,l){switch(l.type){case"base64":return t(no(s),l);case"binary":return t(s,l);case"buffer":return t(Tr&&Buffer.isBuffer(s)?s.toString("binary"):vh(s),l);case"array":return t(f0(s),l)}throw new Error("Unrecognized type "+l.type)}function t(s,l){for(var d=s.split(`
`),u=-1,f=-1,p=0,m=[];p!==d.length;++p){if(d[p].trim()==="BOT"){m[++u]=[],f=0;continue}if(!(u<0)){var x=d[p].trim().split(","),v=x[0],j=x[1];++p;for(var b=d[p]||"";(b.match(/["]/g)||[]).length&1&&p<d.length-1;)b+=`
`+d[++p];switch(b=b.trim(),+v){case-1:if(b==="BOT"){m[++u]=[],f=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?m[u][f]=!0:b==="FALSE"?m[u][f]=!1:isNaN(Ys(j))?isNaN(Jf(j).getDate())?m[u][f]=j:m[u][f]=Ta(j):m[u][f]=Ys(j),++f;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),m[u][f++]=b!==""?b:null;break}if(b==="EOD")break}}return l&&l.sheetRows&&(m=m.slice(0,l.sheetRows)),m}function r(s,l){return Ld(e(s,l),l)}function a(s,l){return Gl(r(s,l),l)}var i=function(){var s=function(u,f,p,m,x){u.push(f),u.push(p+","+m),u.push('"'+x.replace(/"/g,'""')+'"')},l=function(u,f,p,m){u.push(f+","+p),u.push(f==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(u){var f=[],p=tn(u["!ref"]),m,x=Array.isArray(u);s(f,"TABLE",0,1,"sheetjs"),s(f,"VECTORS",0,p.e.r-p.s.r+1,""),s(f,"TUPLES",0,p.e.c-p.s.c+1,""),s(f,"DATA",0,0,"");for(var v=p.s.r;v<=p.e.r;++v){l(f,-1,0,"BOT");for(var j=p.s.c;j<=p.e.c;++j){var b=Br({r:v,c:j});if(m=x?(u[v]||[])[j]:u[b],!m){l(f,1,0,"");continue}switch(m.t){case"n":var y=m.w;!y&&m.v!=null&&(y=m.v),y==null?m.f&&!m.F?l(f,1,0,"="+m.f):l(f,1,0,""):l(f,0,y,"V");break;case"b":l(f,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":l(f,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=Uo(m.z||pn[14],za(Ta(m.v)))),l(f,0,m.w,"V");break;default:l(f,1,0,"")}}}l(f,-1,0,"EOD");var C=`\r
`,E=f.join(C);return E}}();return{to_workbook:a,to_sheet:r,from_sheet:i}}(),TP=function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,x){for(var v=m.split(`
`),j=-1,b=-1,y=0,C=[];y!==v.length;++y){var E=v[y].trim().split(":");if(E[0]==="cell"){var O=Un(E[1]);if(C.length<=O.r)for(j=C.length;j<=O.r;++j)C[j]||(C[j]=[]);switch(j=O.r,b=O.c,E[2]){case"t":C[j][b]=e(E[3]);break;case"v":C[j][b]=+E[3];break;case"vtf":var S=E[E.length-1];case"vtc":switch(E[3]){case"nl":C[j][b]=!!+E[4];break;default:C[j][b]=+E[4];break}E[2]=="vtf"&&(C[j][b]=[C[j][b],S])}}}return x&&x.sheetRows&&(C=C.slice(0,x.sheetRows)),C}function a(m,x){return Ld(r(m,x),x)}function i(m,x){return Gl(a(m,x),x)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function f(m){if(!m||!m["!ref"])return"";for(var x=[],v=[],j,b="",y=li(m["!ref"]),C=Array.isArray(m),E=y.s.r;E<=y.e.r;++E)for(var O=y.s.c;O<=y.e.c;++O)if(b=Br({r:E,c:O}),j=C?(m[E]||[])[O]:m[b],!(!j||j.v==null||j.t==="z")){switch(v=["cell",b,"t"],j.t){case"s":case"str":v.push(t(j.v));break;case"n":j.f?(v[2]="vtf",v[3]="n",v[4]=j.v,v[5]=t(j.f)):(v[2]="v",v[3]=j.v);break;case"b":v[2]="vt"+(j.f?"f":"c"),v[3]="nl",v[4]=j.v?"1":"0",v[5]=t(j.f||(j.v?"TRUE":"FALSE"));break;case"d":var S=za(Ta(j.v));v[2]="vtc",v[3]="nd",v[4]=""+S,v[5]=j.w||Uo(j.z||pn[14],S);break;case"e":continue}x.push(v.join(":"))}return x.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function p(m){return[s,l,d,l,f(m),u].join(`
`)}return{to_workbook:i,to_sheet:a,from_sheet:p}}(),Qse=function(){function e(p,m,x,v,j){j.raw?m[x][v]=p:p===""||(p==="TRUE"?m[x][v]=!0:p==="FALSE"?m[x][v]=!1:isNaN(Ys(p))?isNaN(Jf(p).getDate())?m[x][v]=p:m[x][v]=Ta(p):m[x][v]=Ys(p))}function t(p,m){var x=m||{},v=[];if(!p||p.length===0)return v;for(var j=p.split(/[\r\n]/),b=j.length-1;b>=0&&j[b].length===0;)--b;for(var y=10,C=0,E=0;E<=b;++E)C=j[E].indexOf(" "),C==-1?C=j[E].length:C++,y=Math.max(y,C);for(E=0;E<=b;++E){v[E]=[];var O=0;for(e(j[E].slice(0,y).trim(),v,E,O,x),O=1;O<=(j[E].length-y)/10+1;++O)e(j[E].slice(y+(O-1)*10,y+O*10).trim(),v,E,O,x)}return x.sheetRows&&(v=v.slice(0,x.sheetRows)),v}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function i(p){for(var m={},x=!1,v=0,j=0;v<p.length;++v)(j=p.charCodeAt(v))==34?x=!x:!x&&j in r&&(m[j]=(m[j]||0)+1);j=[];for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&j.push([m[v],v]);if(!j.length){m=a;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&j.push([m[v],v])}return j.sort(function(b,y){return b[0]-y[0]||a[b[1]]-a[y[1]]}),r[j.pop()[1]]||44}function s(p,m){var x=m||{},v="",j=x.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(v=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(v=p.charAt(4),p=p.slice(6)):v=i(p.slice(0,1024)):x&&x.FS?v=x.FS:v=i(p.slice(0,1024));var y=0,C=0,E=0,O=0,S=0,T=v.charCodeAt(0),k=!1,D=0,F=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var B=x.dateNF!=null?hie(x.dateNF):null;function M(){var L=p.slice(O,S),A={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)A.t="z";else if(x.raw)A.t="s",A.v=L;else if(L.trim().length===0)A.t="s",A.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(A.t="s",A.v=L.slice(2,-1).replace(/""/g,'"')):Yoe(L)?(A.t="n",A.f=L.slice(1)):(A.t="s",A.v=L);else if(L=="TRUE")A.t="b",A.v=!0;else if(L=="FALSE")A.t="b",A.v=!1;else if(!isNaN(E=Ys(L)))A.t="n",x.cellText!==!1&&(A.w=L),A.v=E;else if(!isNaN(Jf(L).getDate())||B&&L.match(B)){A.z=x.dateNF||pn[14];var U=0;B&&L.match(B)&&(L=pie(L,x.dateNF,L.match(B)||[]),U=1),x.cellDates?(A.t="d",A.v=Ta(L,U)):(A.t="n",A.v=za(Ta(L,U))),x.cellText!==!1&&(A.w=Uo(A.z,A.v instanceof Date?za(A.v):A.v)),x.cellNF||delete A.z}else A.t="s",A.v=L;if(A.t=="z"||(x.dense?(j[y]||(j[y]=[]),j[y][C]=A):j[Br({c:C,r:y})]=A),O=S+1,F=p.charCodeAt(O),b.e.c<C&&(b.e.c=C),b.e.r<y&&(b.e.r=y),D==T)++C;else if(C=0,++y,x.sheetRows&&x.sheetRows<=y)return!0}e:for(;S<p.length;++S)switch(D=p.charCodeAt(S)){case 34:F===34&&(k=!k);break;case T:case 10:case 13:if(!k&&M())break e;break}return S-O>0&&M(),j["!ref"]=Cn(b),j}function l(p,m){return!(m&&m.PRN)||m.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?s(p,m):Ld(t(p,m),m)}function d(p,m){var x="",v=m.type=="string"?[0,0,0,0]:cfe(p,m);switch(m.type){case"base64":x=no(p);break;case"binary":x=p;break;case"buffer":m.codepage==65001?x=p.toString("utf8"):m.codepage&&typeof lg<"u"||(x=Tr&&Buffer.isBuffer(p)?p.toString("binary"):vh(p));break;case"array":x=f0(p);break;case"string":x=p;break;default:throw new Error("Unrecognized type "+m.type)}return v[0]==239&&v[1]==187&&v[2]==191?x=sf(x.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?x=sf(x):m.type=="binary"&&typeof lg<"u",x.slice(0,19)=="socialcalc:version:"?TP.to_sheet(m.type=="string"?x:sf(x),m):l(x,m)}function u(p,m){return Gl(d(p,m),m)}function f(p){for(var m=[],x=tn(p["!ref"]),v,j=Array.isArray(p),b=x.s.r;b<=x.e.r;++b){for(var y=[],C=x.s.c;C<=x.e.c;++C){var E=Br({r:b,c:C});if(v=j?(p[b]||[])[C]:p[E],!v||v.v==null){y.push("          ");continue}for(var O=(v.w||(ao(v),v.w)||"").slice(0,10);O.length<10;)O+=" ";y.push(O+(C===0?" ":""))}m.push(y.join(""))}return m.join(`
`)}return{to_workbook:u,to_sheet:d,from_sheet:f}}(),y3=function(){function e(z,ee,H){if(z){ni(z,z.l||0);for(var re=H.Enum||q;z.l<z.length;){var le=z.read_shift(2),pe=re[le]||re[65535],Se=z.read_shift(2),K=z.l+Se,ue=pe.f&&pe.f(z,Se,H);if(z.l=K,ee(ue,pe,le))return}}}function t(z,ee){switch(ee.type){case"base64":return r(Wi(no(z)),ee);case"binary":return r(Wi(z),ee);case"buffer":case"array":return r(z,ee)}throw"Unsupported type "+ee.type}function r(z,ee){if(!z)return z;var H=ee||{},re=H.dense?[]:{},le="Sheet1",pe="",Se=0,K={},ue=[],ye=[],fe={s:{r:0,c:0},e:{r:0,c:0}},Xe=H.sheetRows||0;if(z[2]==0&&(z[3]==8||z[3]==9)&&z.length>=16&&z[14]==5&&z[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(z[2]==2)H.Enum=q,e(z,function(Ae,Ve,te){switch(te){case 0:H.vers=Ae,Ae>=4096&&(H.qpro=!0);break;case 6:fe=Ae;break;case 204:Ae&&(pe=Ae);break;case 222:pe=Ae;break;case 15:case 51:H.qpro||(Ae[1].v=Ae[1].v.slice(1));case 13:case 14:case 16:te==14&&(Ae[2]&112)==112&&(Ae[2]&15)>1&&(Ae[2]&15)<15&&(Ae[1].z=H.dateNF||pn[14],H.cellDates&&(Ae[1].t="d",Ae[1].v=U5(Ae[1].v))),H.qpro&&Ae[3]>Se&&(re["!ref"]=Cn(fe),K[le]=re,ue.push(le),re=H.dense?[]:{},fe={s:{r:0,c:0},e:{r:0,c:0}},Se=Ae[3],le=pe||"Sheet"+(Se+1),pe="");var ce=H.dense?(re[Ae[0].r]||[])[Ae[0].c]:re[Br(Ae[0])];if(ce){ce.t=Ae[1].t,ce.v=Ae[1].v,Ae[1].z!=null&&(ce.z=Ae[1].z),Ae[1].f!=null&&(ce.f=Ae[1].f);break}H.dense?(re[Ae[0].r]||(re[Ae[0].r]=[]),re[Ae[0].r][Ae[0].c]=Ae[1]):re[Br(Ae[0])]=Ae[1];break}},H);else if(z[2]==26||z[2]==14)H.Enum=Y,z[2]==14&&(H.qpro=!0,z.l=0),e(z,function(Ae,Ve,te){switch(te){case 204:le=Ae;break;case 22:Ae[1].v=Ae[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ae[3]>Se&&(re["!ref"]=Cn(fe),K[le]=re,ue.push(le),re=H.dense?[]:{},fe={s:{r:0,c:0},e:{r:0,c:0}},Se=Ae[3],le="Sheet"+(Se+1)),Xe>0&&Ae[0].r>=Xe)break;H.dense?(re[Ae[0].r]||(re[Ae[0].r]=[]),re[Ae[0].r][Ae[0].c]=Ae[1]):re[Br(Ae[0])]=Ae[1],fe.e.c<Ae[0].c&&(fe.e.c=Ae[0].c),fe.e.r<Ae[0].r&&(fe.e.r=Ae[0].r);break;case 27:Ae[14e3]&&(ye[Ae[14e3][0]]=Ae[14e3][1]);break;case 1537:ye[Ae[0]]=Ae[1],Ae[0]==Se&&(le=Ae[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+z[2]);if(re["!ref"]=Cn(fe),K[pe||le]=re,ue.push(pe||le),!ye.length)return{SheetNames:ue,Sheets:K};for(var Ce={},Le=[],ne=0;ne<ye.length;++ne)K[ue[ne]]?(Le.push(ye[ne]||ue[ne]),Ce[ye[ne]]=K[ye[ne]]||K[ue[ne]]):(Le.push(ye[ne]),Ce[ye[ne]]={"!ref":"A1"});return{SheetNames:Le,Sheets:Ce}}function a(z,ee){var H=ee||{};if(+H.codepage>=0&&Xf(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Fa(),le=tn(z["!ref"]),pe=Array.isArray(z),Se=[];bt(re,0,s(1030)),bt(re,6,u(le));for(var K=Math.min(le.e.r,8191),ue=le.s.r;ue<=K;++ue)for(var ye=ta(ue),fe=le.s.c;fe<=le.e.c;++fe){ue===le.s.r&&(Se[fe]=ua(fe));var Xe=Se[fe]+ye,Ce=pe?(z[ue]||[])[fe]:z[Xe];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")(Ce.v|0)==Ce.v&&Ce.v>=-32768&&Ce.v<=32767?bt(re,13,v(ue,fe,Ce.v)):bt(re,14,b(ue,fe,Ce.v));else{var Le=ao(Ce);bt(re,15,m(ue,fe,Le.slice(0,239)))}}return bt(re,1),re.end()}function i(z,ee){var H=ee||{};if(+H.codepage>=0&&Xf(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Fa();bt(re,0,l(z));for(var le=0,pe=0;le<z.SheetNames.length;++le)(z.Sheets[z.SheetNames[le]]||{})["!ref"]&&bt(re,27,ge(z.SheetNames[le],pe++));var Se=0;for(le=0;le<z.SheetNames.length;++le){var K=z.Sheets[z.SheetNames[le]];if(!(!K||!K["!ref"])){for(var ue=tn(K["!ref"]),ye=Array.isArray(K),fe=[],Xe=Math.min(ue.e.r,8191),Ce=ue.s.r;Ce<=Xe;++Ce)for(var Le=ta(Ce),ne=ue.s.c;ne<=ue.e.c;++ne){Ce===ue.s.r&&(fe[ne]=ua(ne));var Ae=fe[ne]+Le,Ve=ye?(K[Ce]||[])[ne]:K[Ae];if(!(!Ve||Ve.t=="z"))if(Ve.t=="n")bt(re,23,M(Ce,ne,Se,Ve.v));else{var te=ao(Ve);bt(re,22,D(Ce,ne,Se,te.slice(0,239)))}}++Se}}return bt(re,1),re.end()}function s(z){var ee=rt(2);return ee.write_shift(2,z),ee}function l(z){var ee=rt(26);ee.write_shift(2,4096),ee.write_shift(2,4),ee.write_shift(4,0);for(var H=0,re=0,le=0,pe=0;pe<z.SheetNames.length;++pe){var Se=z.SheetNames[pe],K=z.Sheets[Se];if(!(!K||!K["!ref"])){++le;var ue=li(K["!ref"]);H<ue.e.r&&(H=ue.e.r),re<ue.e.c&&(re=ue.e.c)}}return H>8191&&(H=8191),ee.write_shift(2,H),ee.write_shift(1,le),ee.write_shift(1,re),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(1,1),ee.write_shift(1,2),ee.write_shift(4,0),ee.write_shift(4,0),ee}function d(z,ee,H){var re={s:{c:0,r:0},e:{c:0,r:0}};return ee==8&&H.qpro?(re.s.c=z.read_shift(1),z.l++,re.s.r=z.read_shift(2),re.e.c=z.read_shift(1),z.l++,re.e.r=z.read_shift(2),re):(re.s.c=z.read_shift(2),re.s.r=z.read_shift(2),ee==12&&H.qpro&&(z.l+=2),re.e.c=z.read_shift(2),re.e.r=z.read_shift(2),ee==12&&H.qpro&&(z.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function u(z){var ee=rt(8);return ee.write_shift(2,z.s.c),ee.write_shift(2,z.s.r),ee.write_shift(2,z.e.c),ee.write_shift(2,z.e.r),ee}function f(z,ee,H){var re=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(re[0].c=z.read_shift(1),re[3]=z.read_shift(1),re[0].r=z.read_shift(2),z.l+=2):(re[2]=z.read_shift(1),re[0].c=z.read_shift(2),re[0].r=z.read_shift(2)),re}function p(z,ee,H){var re=z.l+ee,le=f(z,ee,H);if(le[1].t="s",H.vers==20768){z.l++;var pe=z.read_shift(1);return le[1].v=z.read_shift(pe,"utf8"),le}return H.qpro&&z.l++,le[1].v=z.read_shift(re-z.l,"cstr"),le}function m(z,ee,H){var re=rt(7+H.length);re.write_shift(1,255),re.write_shift(2,ee),re.write_shift(2,z),re.write_shift(1,39);for(var le=0;le<re.length;++le){var pe=H.charCodeAt(le);re.write_shift(1,pe>=128?95:pe)}return re.write_shift(1,0),re}function x(z,ee,H){var re=f(z,ee,H);return re[1].v=z.read_shift(2,"i"),re}function v(z,ee,H){var re=rt(7);return re.write_shift(1,255),re.write_shift(2,ee),re.write_shift(2,z),re.write_shift(2,H,"i"),re}function j(z,ee,H){var re=f(z,ee,H);return re[1].v=z.read_shift(8,"f"),re}function b(z,ee,H){var re=rt(13);return re.write_shift(1,255),re.write_shift(2,ee),re.write_shift(2,z),re.write_shift(8,H,"f"),re}function y(z,ee,H){var re=z.l+ee,le=f(z,ee,H);if(le[1].v=z.read_shift(8,"f"),H.qpro)z.l=re;else{var pe=z.read_shift(2);S(z.slice(z.l,z.l+pe),le),z.l+=pe}return le}function C(z,ee,H){var re=ee&32768;return ee&=-32769,ee=(re?z:0)+(ee>=8192?ee-16384:ee),(re?"":"$")+(H?ua(ee):ta(ee))}var E={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(z,ee){ni(z,0);for(var H=[],re=0,le="",pe="",Se="",K="";z.l<z.length;){var ue=z[z.l++];switch(ue){case 0:H.push(z.read_shift(8,"f"));break;case 1:pe=C(ee[0].c,z.read_shift(2),!0),le=C(ee[0].r,z.read_shift(2),!1),H.push(pe+le);break;case 2:{var ye=C(ee[0].c,z.read_shift(2),!0),fe=C(ee[0].r,z.read_shift(2),!1);pe=C(ee[0].c,z.read_shift(2),!0),le=C(ee[0].r,z.read_shift(2),!1),H.push(ye+fe+":"+pe+le)}break;case 3:if(z.l<z.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(z.read_shift(2));break;case 6:{for(var Xe="";ue=z[z.l++];)Xe+=String.fromCharCode(ue);H.push('"'+Xe.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:K=H.pop(),Se=H.pop(),H.push(["AND","OR"][ue-20]+"("+Se+","+K+")");break;default:if(ue<32&&O[ue])K=H.pop(),Se=H.pop(),H.push(Se+O[ue]+K);else if(E[ue]){if(re=E[ue][1],re==69&&(re=z[z.l++]),re>H.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+H.join("|")+"|");return}var Ce=H.slice(-re);H.length-=re,H.push(E[ue][0]+"("+Ce.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}H.length==1?ee[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function T(z){var ee=[{c:0,r:0},{t:"n",v:0},0];return ee[0].r=z.read_shift(2),ee[3]=z[z.l++],ee[0].c=z[z.l++],ee}function k(z,ee){var H=T(z);return H[1].t="s",H[1].v=z.read_shift(ee-4,"cstr"),H}function D(z,ee,H,re){var le=rt(6+re.length);le.write_shift(2,z),le.write_shift(1,H),le.write_shift(1,ee),le.write_shift(1,39);for(var pe=0;pe<re.length;++pe){var Se=re.charCodeAt(pe);le.write_shift(1,Se>=128?95:Se)}return le.write_shift(1,0),le}function F(z,ee){var H=T(z);H[1].v=z.read_shift(2);var re=H[1].v>>1;if(H[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return H[1].v=re,H}function B(z,ee){var H=T(z),re=z.read_shift(4),le=z.read_shift(4),pe=z.read_shift(2);if(pe==65535)return re===0&&le===3221225472?(H[1].t="e",H[1].v=15):re===0&&le===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var Se=pe&32768;return pe=(pe&32767)-16446,H[1].v=(1-Se*2)*(le*Math.pow(2,pe+32)+re*Math.pow(2,pe)),H}function M(z,ee,H,re){var le=rt(14);if(le.write_shift(2,z),le.write_shift(1,H),le.write_shift(1,ee),re==0)return le.write_shift(4,0),le.write_shift(4,0),le.write_shift(2,65535),le;var pe=0,Se=0,K=0,ue=0;return re<0&&(pe=1,re=-re),Se=Math.log2(re)|0,re/=Math.pow(2,Se-31),ue=re>>>0,(ue&2147483648)==0&&(re/=2,++Se,ue=re>>>0),re-=ue,ue|=2147483648,ue>>>=0,re*=Math.pow(2,32),K=re>>>0,le.write_shift(4,K),le.write_shift(4,ue),Se+=16383+(pe?32768:0),le.write_shift(2,Se),le}function L(z,ee){var H=B(z);return z.l+=ee-14,H}function A(z,ee){var H=T(z),re=z.read_shift(4);return H[1].v=re>>6,H}function U(z,ee){var H=T(z),re=z.read_shift(8,"f");return H[1].v=re,H}function P(z,ee){var H=U(z);return z.l+=ee-10,H}function I(z,ee){return z[z.l+ee-1]==0?z.read_shift(ee,"cstr"):""}function R(z,ee){var H=z[z.l++];H>ee-1&&(H=ee-1);for(var re="";re.length<H;)re+=String.fromCharCode(z[z.l++]);return re}function W(z,ee,H){if(!(!H.qpro||ee<21)){var re=z.read_shift(1);z.l+=17,z.l+=1,z.l+=2;var le=z.read_shift(ee-21,"cstr");return[re,le]}}function Q(z,ee){for(var H={},re=z.l+ee;z.l<re;){var le=z.read_shift(2);if(le==14e3){for(H[le]=[0,""],H[le][0]=z.read_shift(2);z[z.l];)H[le][1]+=String.fromCharCode(z[z.l]),z.l++;z.l++}}return H}function ge(z,ee){var H=rt(5+z.length);H.write_shift(2,14e3),H.write_shift(2,ee);for(var re=0;re<z.length;++re){var le=z.charCodeAt(re);H[H.l++]=le>127?95:le}return H[H.l++]=0,H}var q={0:{n:"BOF",f:bP},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:j},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:I},222:{n:"SHEETNAMELP",f:R},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:F},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:A},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:P},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:I},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:W},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:i,to_workbook:t}}(),Jse=/^\s|\s$|[\t\n\r]/;function CP(e,t){if(!t.bookSST)return"";var r=[En];r[r.length]=vt("sst",null,{xmlns:Fd[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var i=e[a],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Jse)&&(s+=' xml:space="preserve"'),s+=">"+Mr(i.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Zse(e){return[e.read_shift(4),e.read_shift(4)]}function eoe(e,t){return t||(t=rt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var toe=Hie;function roe(e){var t=Fa();ut(t,159,eoe(e));for(var r=0;r<e.length;++r)ut(t,19,toe(e[r]));return ut(t,160),t.end()}function noe(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function AP(e){var t=0,r,a=noe(e),i=a.length+1,s,l,d,u,f;for(r=Bl(i),r[0]=a.length,s=1;s!=i;++s)r[s]=a[s-1];for(s=i-1;s>=0;--s)l=r[s],d=(t&16384)===0?0:1,u=t<<1&32767,f=d|u,t=f^l;return t^52811}var aoe=function(){function e(i,s){switch(s.type){case"base64":return t(no(i),s);case"binary":return t(i,s);case"buffer":return t(Tr&&Buffer.isBuffer(i)?i.toString("binary"):vh(i),s);case"array":return t(f0(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){var l=s||{},d=l.dense?[]:{},u=i.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var f={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(p,m){Array.isArray(d)&&(d[m]=[]);for(var x=/\\\w+\b/g,v=0,j,b=-1;j=x.exec(p);){switch(j[0]){case"\\cell":var y=p.slice(v,x.lastIndex-j[0].length);if(y[0]==" "&&(y=y.slice(1)),++b,y.length){var C={v:y,t:"s"};Array.isArray(d)?d[m][b]=C:d[Br({r:m,c:b})]=C}break}v=x.lastIndex}b>f.e.c&&(f.e.c=b)}),d["!ref"]=Cn(f),d}function r(i,s){return Gl(e(i,s),s)}function a(i){for(var s=["{\\rtf1\\ansi"],l=tn(i["!ref"]),d,u=Array.isArray(i),f=l.s.r;f<=l.e.r;++f){s.push("\\trowd\\trautofit1");for(var p=l.s.c;p<=l.e.c;++p)s.push("\\cellx"+(p+1));for(s.push("\\pard\\intbl"),p=l.s.c;p<=l.e.c;++p){var m=Br({r:f,c:p});d=u?(i[f]||[])[p]:i[m],!(!d||d.v==null&&(!d.f||d.F))&&(s.push(" "+(d.w||(ao(d),d.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}}();function v3(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var ioe=6,Xs=ioe;function xg(e){return Math.floor((e+Math.round(128/Xs)/256)*Xs)}function yg(e){return Math.floor((e-5)/Xs*100+.5)/100}function uw(e){return Math.round((e*Xs+5)/Xs*256)/256}function WS(e){e.width?(e.wpx=xg(e.width),e.wch=yg(e.wpx),e.MDW=Xs):e.wpx?(e.wch=yg(e.wpx),e.width=uw(e.wch),e.MDW=Xs):typeof e.wch=="number"&&(e.width=uw(e.wch),e.wpx=xg(e.width),e.MDW=Xs),e.customWidth&&delete e.customWidth}var soe=96,EP=soe;function vg(e){return e*96/EP}function OP(e){return e*EP/96}function ooe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=vt("numFmt",null,{numFmtId:a,formatCode:Mr(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=vt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function loe(e){var t=[];return t[t.length]=vt("cellXfs",null),e.forEach(function(r){t[t.length]=vt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=vt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function _P(e,t){var r=[En,vt("styleSheet",null,{xmlns:Fd[0],"xmlns:vt":$n.vt})],a;return e.SSF&&(a=ooe(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=loe(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function coe(e,t){var r=e.read_shift(2),a=fa(e);return[r,a]}function doe(e,t,r){r||(r=rt(6+4*t.length)),r.write_shift(2,e),qn(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function uoe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var i=Jie(e);i.fItalic&&(a.italic=1),i.fCondense&&(a.condense=1),i.fExtend&&(a.extend=1),i.fShadow&&(a.shadow=1),i.fOutline&&(a.outline=1),i.fStrikeout&&(a.strike=1);var s=e.read_shift(2);switch(s===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(a.underline=l);var d=e.read_shift(1);d>0&&(a.family=d);var u=e.read_shift(1);switch(u>0&&(a.charset=u),e.l++,a.color=Qie(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=fa(e),a}function foe(e,t){t||(t=rt(25+4*32)),t.write_shift(2,e.sz*20),Zie(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),mg(e.color,t);var a=0;return a=2,t.write_shift(1,a),qn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var hoe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Tj,poe=gs;function b3(e,t){t||(t=rt(4*3+8*7+16*1)),Tj||(Tj=IS(hoe));var r=Tj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(mg({auto:1},t),mg({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function moe(e,t){var r=e.l+t,a=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:i}}function kP(e,t,r){r||(r=rt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ku(e,t){return t||(t=rt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var goe=gs;function xoe(e,t){return t||(t=rt(51)),t.write_shift(1,0),Ku(null,t),Ku(null,t),Ku(null,t),Ku(null,t),Ku(null,t),t.length>t.l?t.slice(0,t.l):t}function yoe(e,t){return t||(t=rt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),pg(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function voe(e,t,r){var a=rt(2052);return a.write_shift(4,e),pg(t,a),pg(r,a),a.length>a.l?a.slice(0,a.l):a}function boe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var i=a[0];i<=a[1];++i)t[i]!=null&&++r}),r!=0&&(ut(e,615,Ki(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var i=a[0];i<=a[1];++i)t[i]!=null&&ut(e,44,doe(i,t[i]))}),ut(e,616))}}function joe(e){var t=1;ut(e,611,Ki(t)),ut(e,43,foe({sz:12,color:{theme:1},name:"Calibri",family:2})),ut(e,612)}function woe(e){var t=2;ut(e,603,Ki(t)),ut(e,45,b3({patternType:"none"})),ut(e,45,b3({patternType:"gray125"})),ut(e,604)}function Soe(e){var t=1;ut(e,613,Ki(t)),ut(e,46,xoe()),ut(e,614)}function Noe(e){var t=1;ut(e,626,Ki(t)),ut(e,47,kP({numFmtId:0},65535)),ut(e,627)}function Toe(e,t){ut(e,617,Ki(t.length)),t.forEach(function(r){ut(e,47,kP(r,0))}),ut(e,618)}function Coe(e){var t=1;ut(e,619,Ki(t)),ut(e,48,yoe({xfId:0,name:"Normal"})),ut(e,620)}function Aoe(e){var t=0;ut(e,505,Ki(t)),ut(e,506)}function Eoe(e){var t=0;ut(e,508,voe(t,"TableStyleMedium9","PivotStyleMedium4")),ut(e,509)}function Ooe(e,t){var r=Fa();return ut(r,278),boe(r,e.SSF),joe(r),woe(r),Soe(r),Noe(r),Toe(r,t.cellXfs),Coe(r),Aoe(r),Eoe(r),ut(r,279),r.end()}function IP(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[En];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function _oe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:fa(e)}}function koe(e){var t=rt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),qn(e.name,t),t.slice(0,t.l)}function Ioe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Doe(e){var t=rt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Roe(e,t){var r=rt(8+2*t.length);return r.write_shift(4,e),qn(t,r),r.slice(0,r.l)}function Poe(e){return e.l+=4,e.read_shift(4)!=0}function Moe(e,t){var r=rt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Boe(){var e=Fa();return ut(e,332),ut(e,334,Ki(1)),ut(e,335,koe({name:"XLDAPR",version:12e4,flags:3496657072})),ut(e,336),ut(e,339,Roe(1,"XLDAPR")),ut(e,52),ut(e,35,Ki(514)),ut(e,4096,Ki(0)),ut(e,4097,bi(1)),ut(e,36),ut(e,53),ut(e,340),ut(e,337,Moe(1)),ut(e,51,Doe([[1,0]])),ut(e,338),ut(e,333),e.end()}function DP(){var e=[En];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Foe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Br(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}var zc=1024;function RP(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[vt("xml",null,{"xmlns:v":ai.v,"xmlns:o":ai.o,"xmlns:x":ai.x,"xmlns:mv":ai.mv}).replace(/\/>/,">"),vt("o:shapelayout",vt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),vt("v:shapetype",[vt("v:stroke",null,{joinstyle:"miter"}),vt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];zc<e*1e3;)zc+=1e3;return t.forEach(function(s){var l=Un(s[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var u=d.type=="gradient"?vt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,f=vt("v:fill",u,d),p={on:"t",obscured:"t"};++zc,i=i.concat(["<v:shape"+eh({id:"_x0000_s"+zc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",f,vt("v:shadow",null,p),vt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Zn("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),Zn("x:AutoFill","False"),Zn("x:Row",String(l.r)),Zn("x:Column",String(l.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function PP(e){var t=[En,vt("comments",null,{xmlns:Fd[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(i){var s=Mr(i.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),t.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var i=0,s=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?i=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(u){u.a&&(i=r.indexOf(Mr(u.a))),s.push(u.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+i+'"><text>'),s.length<=1)t.push(Zn("t",Mr(s[0]||"")));else{for(var l=`Comment:
    `+s[0]+`
`,d=1;d<s.length;++d)l+=`Reply:
    `+s[d]+`
`;t.push(Zn("t",Mr(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Loe(e,t,r){var a=[En,vt("ThreadedComments",null,{xmlns:$n.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(i){var s="";(i[1]||[]).forEach(function(l,d){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var u={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};d==0?s=u.id:u.parentId=s,l.ID=u.id,l.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),a.push(vt("threadedComment",Zn("text",l.t||""),u))})}),a.push("</ThreadedComments>"),a.join("")}function zoe(e){var t=[En,vt("personList",null,{xmlns:$n.TCMNT,"xmlns:x":Fd[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(vt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function $oe(e){var t={};t.iauthor=e.read_shift(4);var r=Xl(e);return t.rfx=r.s,t.ref=Br(r.s),e.l+=16,t}function Uoe(e,t){return t==null&&(t=rt(36)),t.write_shift(4,e[1].iauthor),zd(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var qoe=fa;function Woe(e){return qn(e.slice(0,54))}function Hoe(e){var t=Fa(),r=[];return ut(t,628),ut(t,630),e.forEach(function(a){a[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),ut(t,632,Woe(i.a)))})}),ut(t,631),ut(t,633),e.forEach(function(a){a[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var s={s:Un(a[0]),e:Un(a[0])};ut(t,635,Uoe([s,i])),i.t&&i.t.length>0&&ut(t,637,Kie(i)),ut(t,636),delete i.iauthor})}),ut(t,634),ut(t,629),t.end()}function Goe(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Hr.utils.cfb_add(e,i,t.FileIndex[a].content)}})}var MP=["xlsb","xlsm","xlam","biff8","xla"],Koe=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,i,s,l){var d=!1,u=!1;s.length==0?u=!0:s.charAt(0)=="["&&(u=!0,s=s.slice(1,-1)),l.length==0?d=!0:l.charAt(0)=="["&&(d=!0,l=l.slice(1,-1));var f=s.length>0?parseInt(s,10)|0:0,p=l.length>0?parseInt(l,10)|0:0;return d?p+=t.c:--p,u?f+=t.r:--f,i+(d?"":"$")+ua(p)+(u?"":"$")+ta(f)}return function(i,s){return t=s,i.replace(e,r)}}(),HS=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,GS=function(){return function(t,r){return t.replace(HS,function(a,i,s,l,d,u){var f=LS(l)-(s?0:r.c),p=FS(u)-(d?0:r.r),m=p==0?"":d?p+1:"["+p+"]",x=f==0?"":s?f+1:"["+f+"]";return i+"R"+m+"C"+x})}}();function Voe(e,t){return e.replace(HS,function(r,a,i,s,l,d){return a+(i=="$"?i+s:ua(LS(s)+t.c))+(l=="$"?l+d:ta(FS(d)+t.r))})}function Yoe(e){return e.length!=1}function Sn(e){e.l+=1}function qo(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function BP(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return FP(e);r.biff==12&&(a=4)}var i=e.read_shift(a),s=e.read_shift(a),l=qo(e),d=qo(e);return{s:{r:i,c:l[0],cRel:l[1],rRel:l[2]},e:{r:s,c:d[0],cRel:d[1],rRel:d[2]}}}function FP(e){var t=qo(e),r=qo(e),a=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function Xoe(e,t,r){if(r.biff<8)return FP(e);var a=e.read_shift(r.biff==12?4:2),i=e.read_shift(r.biff==12?4:2),s=qo(e),l=qo(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function LP(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Qoe(e);var a=e.read_shift(r&&r.biff==12?4:2),i=qo(e);return{r:a,c:i[0],cRel:i[1],rRel:i[2]}}function Qoe(e){var t=qo(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Joe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Zoe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return ele(e);var i=e.read_shift(a>=12?4:2),s=e.read_shift(2),l=(s&16384)>>14,d=(s&32768)>>15;if(s&=16383,d==1)for(;i>524287;)i-=1048576;if(l==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:l,rRel:d}}function ele(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),i==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:i,rRel:a}}function tle(e,t,r){var a=(e[e.l++]&96)>>5,i=BP(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,i]}function rle(e,t,r){var a=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var l=BP(e,s,r);return[a,i,l]}function nle(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function ale(e,t,r){var a=(e[e.l++]&96)>>5,i=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[a,i]}function ile(e,t,r){var a=(e[e.l++]&96)>>5,i=Xoe(e,t-1,r);return[a,i]}function sle(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function j3(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function ole(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),i=[],s=0;s<=a;++s)i.push(e.read_shift(r&&r.biff==2?1:2));return i}function lle(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function cle(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function dle(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function ule(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function zP(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function fle(e){return e.read_shift(2),zP(e)}function hle(e){return e.read_shift(2),zP(e)}function ple(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=LP(e,0,r);return[a,i]}function mle(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=Zoe(e,0,r);return[a,i]}function gle(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=LP(e,0,r);return[a,i,s]}function xle(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[xce[i],qP[i],a]}function yle(e,t,r){var a=e[e.l++],i=e.read_shift(1),s=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:vle(e);return[i,(s[0]===0?qP:gce)[s[1]]]}function vle(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function ble(e,t,r){e.l+=r&&r.biff==2?3:4}function jle(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),i=e.read_shift(r&&r.biff==2?1:2);return[a,i]}function wle(e){return e.l++,wh[e.read_shift(1)]}function Sle(e){return e.l++,e.read_shift(2)}function Nle(e){return e.l++,e.read_shift(1)!==0}function Tle(e){return e.l++,$d(e)}function Cle(e,t,r){return e.l++,wP(e,t-1,r)}function Ale(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=gse(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=wh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=$d(e);break;case 2:r[1]=bse(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Ele(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),i=[],s=0;s!=a;++s)i.push((r.biff==12?Xl:Sse)(e));return i}function Ole(e,t,r){var a=0,i=0;r.biff==12?(a=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--i==0&&(i=256));for(var s=0,l=[];s!=a&&(l[s]=[]);++s)for(var d=0;d!=i;++d)l[s][d]=Ale(e,r.biff);return l}function _le(e,t,r){var a=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,s=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,s]}function kle(e,t,r){if(r.biff==5)return Ile(e);var a=e.read_shift(1)>>>5&3,i=e.read_shift(2),s=e.read_shift(4);return[a,i,s]}function Ile(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function Dle(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var i=e.read_shift(r&&r.biff==2?1:2);return[a,i]}function Rle(e,t,r){var a=e.read_shift(1)>>>5&3,i=e.read_shift(r&&r.biff==2?1:2);return[a,i]}function Ple(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function Mle(e,t,r){var a=(e[e.l++]&96)>>5,i=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[a,i]}var Ble=gs,Fle=gs,Lle=gs;function Sh(e,t,r){return e.l+=2,[Joe(e)]}function KS(e){return e.l+=6,[]}var zle=Sh,$le=KS,Ule=KS,qle=Sh;function $P(e){return e.l+=2,[bP(e),e.read_shift(2)&1]}var Wle=Sh,Hle=$P,Gle=KS,Kle=Sh,Vle=Sh,Yle=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Xle(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2),l=Yle[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:a,c:i,C:s}}function Qle(e){return e.l+=2,[e.read_shift(4)]}function Jle(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Zle(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function ece(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function tce(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function rce(e){return e.l+=4,[0,0]}var w3={1:{n:"PtgExp",f:jle},2:{n:"PtgTbl",f:Lle},3:{n:"PtgAdd",f:Sn},4:{n:"PtgSub",f:Sn},5:{n:"PtgMul",f:Sn},6:{n:"PtgDiv",f:Sn},7:{n:"PtgPower",f:Sn},8:{n:"PtgConcat",f:Sn},9:{n:"PtgLt",f:Sn},10:{n:"PtgLe",f:Sn},11:{n:"PtgEq",f:Sn},12:{n:"PtgGe",f:Sn},13:{n:"PtgGt",f:Sn},14:{n:"PtgNe",f:Sn},15:{n:"PtgIsect",f:Sn},16:{n:"PtgUnion",f:Sn},17:{n:"PtgRange",f:Sn},18:{n:"PtgUplus",f:Sn},19:{n:"PtgUminus",f:Sn},20:{n:"PtgPercent",f:Sn},21:{n:"PtgParen",f:Sn},22:{n:"PtgMissArg",f:Sn},23:{n:"PtgStr",f:Cle},26:{n:"PtgSheet",f:Jle},27:{n:"PtgEndSheet",f:Zle},28:{n:"PtgErr",f:wle},29:{n:"PtgBool",f:Nle},30:{n:"PtgInt",f:Sle},31:{n:"PtgNum",f:Tle},32:{n:"PtgArray",f:sle},33:{n:"PtgFunc",f:xle},34:{n:"PtgFuncVar",f:yle},35:{n:"PtgName",f:_le},36:{n:"PtgRef",f:ple},37:{n:"PtgArea",f:tle},38:{n:"PtgMemArea",f:Dle},39:{n:"PtgMemErr",f:Ble},40:{n:"PtgMemNoMem",f:Fle},41:{n:"PtgMemFunc",f:Rle},42:{n:"PtgRefErr",f:Ple},43:{n:"PtgAreaErr",f:nle},44:{n:"PtgRefN",f:mle},45:{n:"PtgAreaN",f:ile},46:{n:"PtgMemAreaN",f:ece},47:{n:"PtgMemNoMemN",f:tce},57:{n:"PtgNameX",f:kle},58:{n:"PtgRef3d",f:gle},59:{n:"PtgArea3d",f:rle},60:{n:"PtgRefErr3d",f:Mle},61:{n:"PtgAreaErr3d",f:ale},255:{}},nce={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ace={1:{n:"PtgElfLel",f:$P},2:{n:"PtgElfRw",f:Kle},3:{n:"PtgElfCol",f:zle},6:{n:"PtgElfRwV",f:Vle},7:{n:"PtgElfColV",f:qle},10:{n:"PtgElfRadical",f:Wle},11:{n:"PtgElfRadicalS",f:Gle},13:{n:"PtgElfColS",f:$le},15:{n:"PtgElfColSV",f:Ule},16:{n:"PtgElfRadicalLel",f:Hle},25:{n:"PtgList",f:Xle},29:{n:"PtgSxName",f:Qle},255:{}},ice={0:{n:"PtgAttrNoop",f:rce},1:{n:"PtgAttrSemi",f:ule},2:{n:"PtgAttrIf",f:cle},4:{n:"PtgAttrChoose",f:ole},8:{n:"PtgAttrGoto",f:lle},16:{n:"PtgAttrSum",f:ble},32:{n:"PtgAttrBaxcel",f:j3},33:{n:"PtgAttrBaxcel",f:j3},64:{n:"PtgAttrSpace",f:fle},65:{n:"PtgAttrSpaceSemi",f:hle},128:{n:"PtgAttrIfError",f:dle},255:{}};function sce(e,t,r,a){if(a.biff<8)return gs(e,t);for(var i=e.l+t,s=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=Ole(e,0,a),s.push(r[l][1]);break;case"PtgMemArea":r[l][2]=Ele(e,r[l][1],a),s.push(r[l][2]);break;case"PtgExp":a&&a.biff==12&&(r[l][1][1]=e.read_shift(4),s.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=i-e.l,t!==0&&s.push(gs(e,t)),s}function oce(e,t,r){for(var a=e.l+t,i,s,l=[];a!=e.l;)t=a-e.l,s=e[e.l],i=w3[s]||w3[nce[s]],(s===24||s===25)&&(i=(s===24?ace:ice)[e[e.l+1]]),!i||!i.f?gs(e,t):l.push([i.n,i.f(e,t,r)]);return l}function lce(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],i=[],s=0;s<a.length;++s){var l=a[s];if(l)switch(l[0]){case 2:i.push('"'+l[1].replace(/"/g,'""')+'"');break;default:i.push(l[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var cce={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dce(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function UP(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[a[0]][0]){case 357:return i=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?i:i+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return i=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?i:i+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[a[0]][0][3]?(i=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?i:i+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function S3(e,t,r){var a=UP(e,t,r);return a=="#REF"?a:dce(a,r)}function Sd(e,t,r,a,i){var s=i&&i.biff||8,l={s:{c:0,r:0}},d=[],u,f,p,m=0,x=0,v,j="";if(!e[0]||!e[0][0])return"";for(var b=-1,y="",C=0,E=e[0].length;C<E;++C){var O=e[0][C];switch(O[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=d.pop(),f=d.pop(),b>=0){switch(e[0][b][1][0]){case 0:y=hn(" ",e[0][b][1][1]);break;case 1:y=hn("\r",e[0][b][1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}f=f+y,b=-1}d.push(f+cce[O[0]]+u);break;case"PtgIsect":u=d.pop(),f=d.pop(),d.push(f+" "+u);break;case"PtgUnion":u=d.pop(),f=d.pop(),d.push(f+","+u);break;case"PtgRange":u=d.pop(),f=d.pop(),d.push(f+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=lf(O[1][1],l,i),d.push(cf(p,s));break;case"PtgRefN":p=r?lf(O[1][1],r,i):O[1][1],d.push(cf(p,s));break;case"PtgRef3d":m=O[1][1],p=lf(O[1][2],l,i),j=S3(a,m,i),d.push(j+"!"+cf(p,s));break;case"PtgFunc":case"PtgFuncVar":var S=O[1][0],T=O[1][1];S||(S=0),S&=127;var k=S==0?[]:d.slice(-S);d.length-=S,T==="User"&&(T=k.shift()),d.push(T+"("+k.join(",")+")");break;case"PtgBool":d.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(O[1]);break;case"PtgNum":d.push(String(O[1]));break;case"PtgStr":d.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(O[1]);break;case"PtgAreaN":v=o3(O[1][1],r?{s:r}:l,i),d.push(Sj(v,i));break;case"PtgArea":v=o3(O[1][1],l,i),d.push(Sj(v,i));break;case"PtgArea3d":m=O[1][1],v=O[1][2],j=S3(a,m,i),d.push(j+"!"+Sj(v,i));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=O[1][2];var D=(a.names||[])[x-1]||(a[0]||[])[x],F=D?D.Name:"SH33TJSNAME"+String(x);F&&F.slice(0,6)=="_xlfn."&&!i.xlfn&&(F=F.slice(6)),d.push(F);break;case"PtgNameX":var B=O[1][1];x=O[1][2];var M;if(i.biff<=5)B<0&&(B=-B),a[B]&&(M=a[B][x]);else{var L="";if(((a[B]||[])[0]||[])[0]==14849||(((a[B]||[])[0]||[])[0]==1025?a[B][x]&&a[B][x].itab>0&&(L=a.SheetNames[a[B][x].itab-1]+"!"):L=a.SheetNames[x-1]+"!"),a[B]&&a[B][x])L+=a[B][x].Name;else if(a[0]&&a[0][x])L+=a[0][x].Name;else{var A=(UP(a,B,i)||"").split(";;");A[x-1]?L=A[x-1]:L+="SH33TJSERRX"}d.push(L);break}M||(M={Name:"SH33TJSERRY"}),d.push(M.Name);break;case"PtgParen":var U="(",P=")";if(b>=0){switch(y="",e[0][b][1][0]){case 2:U=hn(" ",e[0][b][1][1])+U;break;case 3:U=hn("\r",e[0][b][1][1])+U;break;case 4:P=hn(" ",e[0][b][1][1])+P;break;case 5:P=hn("\r",e[0][b][1][1])+P;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}b=-1}d.push(U+d.pop()+P);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":p={c:O[1][1],r:O[1][0]};var I={c:r.c,r:r.r};if(a.sharedf[Br(p)]){var R=a.sharedf[Br(p)];d.push(Sd(R,l,I,a,i))}else{var W=!1;for(u=0;u!=a.arrayf.length;++u)if(f=a.arrayf[u],!(p.c<f[0].s.c||p.c>f[0].e.c)&&!(p.r<f[0].s.r||p.r>f[0].e.r)){d.push(Sd(f[1],l,I,a,i)),W=!0;break}W||d.push(O[1])}break;case"PtgArray":d.push("{"+lce(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&b>=0&&Q.indexOf(e[0][C][0])==-1){O=e[0][b];var ge=!0;switch(O[1][0]){case 4:ge=!1;case 0:y=hn(" ",O[1][1]);break;case 5:ge=!1;case 1:y=hn("\r",O[1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}d.push((ge?y:"")+d.pop()+(ge?"":y)),b=-1}}if(d.length>1&&i.WTF)throw new Error("bad formula stack");return d[0]}function uce(e){if(e==null){var t=rt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Fl(e);return Fl(0)}function fce(e,t,r,a,i){var s=Ll(t,r,i),l=uce(e.v),d=rt(6),u=33;d.write_shift(2,u),d.write_shift(4,0);for(var f=rt(e.bf.length),p=0;p<e.bf.length;++p)f[p]=e.bf[p];var m=Jn([s,l,d,f]);return m}function h0(e,t,r){var a=e.read_shift(4),i=oce(e,a,r),s=e.read_shift(4),l=s>0?sce(e,s,i,r):null;return[i,l]}var hce=h0,p0=h0,pce=h0,mce=h0,gce={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},qP={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},xce={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function yce(e){var t="of:="+e.replace(HS,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function vce(e){return e.replace(/\./,"!")}var df=typeof Map<"u";function VS(e,t,r){var a=0,i=e.length;if(r){if(df?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=df?r.get(t):r[t];a<s.length;++a)if(e[s[a]].t===t)return e.Count++,s[a]}}else for(;a<i;++a)if(e[a].t===t)return e.Count++,a;return e[i]={t},e.Count++,e.Unique++,r&&(df?(r.has(t)||r.set(t,[]),r.get(t).push(i)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(i))),i}function m0(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(Xs=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=yg(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=uw(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function WP(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Xo(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],i=60,s=e.length;if(a==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){L5(t.z,i),r.ssf[i]=t.z,r.revssf[t.z]=a=i;break}}for(i=0;i!=s;++i)if(e[i].numFmtId===a)return i;return e[s]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function bce(e,t,r){if(e&&e["!ref"]){var a=tn(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function jce(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Cn(e[r])+'"/>';return t+"</mergeCells>"}function wce(e,t,r,a,i){var s=!1,l={},d=null;if(a.bookType!=="xlsx"&&t.vbaraw){var u=t.SheetNames[r];try{t.Workbook&&(u=t.Workbook.Sheets[r].CodeName||u)}catch{}s=!0,l.codeName=Zf(Mr(u))}if(e&&e["!outline"]){var f={summaryBelow:1,summaryRight:1};e["!outline"].above&&(f.summaryBelow=0),e["!outline"].left&&(f.summaryRight=0),d=(d||"")+vt("outlinePr",null,f)}!s&&!d||(i[i.length]=vt("sheetPr",d,l))}var Sce=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Nce=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Tce(e){var t={sheet:1};return Sce.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Nce.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=AP(e.password).toString(16).toUpperCase()),vt("sheetProtection",null,t)}function Cce(e){return WP(e),vt("pageMargins",null,e)}function Ace(e,t){for(var r=["<cols>"],a,i=0;i!=t.length;++i)(a=t[i])&&(r[r.length]=vt("col",null,m0(i,a)));return r[r.length]="</cols>",r.join("")}function Ece(e,t,r,a){var i=typeof e.ref=="string"?e.ref:Cn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,l=li(i);l.s.r==l.e.r&&(l.e.r=li(t["!ref"]).e.r,i=Cn(l));for(var d=0;d<s.length;++d){var u=s[d];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+r.SheetNames[a]+"'!"+i;break}}return d==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),vt("autoFilter",null,{ref:i})}function Oce(e,t,r,a){var i={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),vt("sheetViews",vt("sheetView",null,i),{})}function _ce(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var i="",s=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=wh[e.v];break;case"d":a&&a.cellDates?i=Ta(e.v,-1).toISOString():(e=$a(e),e.t="n",i=""+(e.v=za(Ta(e.v)))),typeof e.z>"u"&&(e.z=pn[14]);break;default:i=e.v;break}var d=Zn("v",Mr(i)),u={r:t},f=Xo(a.cellXfs,e,a);switch(f!==0&&(u.s=f),e.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){d=Zn("v",""+VS(a.Strings,e.v,a.revStrings)),u.t="s";break}u.t="str";break}if(e.t!=s&&(e.t=s,e.v=l),typeof e.f=="string"&&e.f){var p=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;d=vt("f",Mr(e.f),p)+(e.v!=null?d:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(u.cm=1),vt("c",d,u)}function kce(e,t,r,a){var i=[],s=[],l=tn(e["!ref"]),d="",u,f="",p=[],m=0,x=0,v=e["!rows"],j=Array.isArray(e),b={r:f},y,C=-1;for(x=l.s.c;x<=l.e.c;++x)p[x]=ua(x);for(m=l.s.r;m<=l.e.r;++m){for(s=[],f=ta(m),x=l.s.c;x<=l.e.c;++x){u=p[x]+f;var E=j?(e[m]||[])[x]:e[u];E!==void 0&&(d=_ce(E,u,e,t))!=null&&s.push(d)}(s.length>0||v&&v[m])&&(b={r:f},v&&v[m]&&(y=v[m],y.hidden&&(b.hidden=1),C=-1,y.hpx?C=vg(y.hpx):y.hpt&&(C=y.hpt),C>-1&&(b.ht=C,b.customHeight=1),y.level&&(b.outlineLevel=y.level)),i[i.length]=vt("row",s.join(""),b))}if(v)for(;m<v.length;++m)v&&v[m]&&(b={r:m+1},y=v[m],y.hidden&&(b.hidden=1),C=-1,y.hpx?C=vg(y.hpx):y.hpt&&(C=y.hpt),C>-1&&(b.ht=C,b.customHeight=1),y.level&&(b.outlineLevel=y.level),i[i.length]=vt("row","",b));return i.join("")}function HP(e,t,r,a){var i=[En,vt("worksheet",null,{xmlns:Fd[0],"xmlns:r":$n.r})],s=r.SheetNames[e],l=0,d="",u=r.Sheets[s];u==null&&(u={});var f=u["!ref"]||"A1",p=tn(f);if(p.e.c>16383||p.e.r>1048575){if(t.WTF)throw new Error("Range "+f+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),f=Cn(p)}a||(a={}),u["!comments"]=[];var m=[];wce(u,r,e,t,i),i[i.length]=vt("dimension",null,{ref:f}),i[i.length]=Oce(u,t,e,r),t.sheetFormat&&(i[i.length]=vt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(i[i.length]=Ace(u,u["!cols"])),i[l=i.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(d=kce(u,t),d.length>0&&(i[i.length]=d)),i.length>l+1&&(i[i.length]="</sheetData>",i[l]=i[l].replace("/>",">")),u["!protect"]&&(i[i.length]=Tce(u["!protect"])),u["!autofilter"]!=null&&(i[i.length]=Ece(u["!autofilter"],u,r,e)),u["!merges"]!=null&&u["!merges"].length>0&&(i[i.length]=jce(u["!merges"]));var x=-1,v,j=-1;return u["!links"].length>0&&(i[i.length]="<hyperlinks>",u["!links"].forEach(function(b){b[1].Target&&(v={ref:b[0]},b[1].Target.charAt(0)!="#"&&(j=Pr(a,-1,Mr(b[1].Target).replace(/#.*$/,""),br.HLINK),v["r:id"]="rId"+j),(x=b[1].Target.indexOf("#"))>-1&&(v.location=Mr(b[1].Target.slice(x+1))),b[1].Tooltip&&(v.tooltip=Mr(b[1].Tooltip)),i[i.length]=vt("hyperlink",null,v))}),i[i.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(i[i.length]=Cce(u["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(i[i.length]=Zn("ignoredErrors",vt("ignoredError",null,{numberStoredAsText:1,sqref:f}))),m.length>0&&(j=Pr(a,-1,"../drawings/drawing"+(e+1)+".xml",br.DRAW),i[i.length]=vt("drawing",null,{"r:id":"rId"+j}),u["!drawing"]=m),u["!comments"].length>0&&(j=Pr(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",br.VML),i[i.length]=vt("legacyDrawing",null,{"r:id":"rId"+j}),u["!legacy"]=j),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Ice(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=a,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=i/20),r}function Dce(e,t,r){var a=rt(145),i=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var s=320;i.hpx?s=vg(i.hpx)*20:i.hpt&&(s=i.hpt*20),a.write_shift(2,s),a.write_shift(1,0);var l=0;i.level&&(l|=i.level),i.hidden&&(l|=16),(i.hpx||i.hpt)&&(l|=32),a.write_shift(1,l),a.write_shift(1,0);var d=0,u=a.l;a.l+=4;for(var f={r:e,c:0},p=0;p<16;++p)if(!(t.s.c>p+1<<10||t.e.c<p<<10)){for(var m=-1,x=-1,v=p<<10;v<p+1<<10;++v){f.c=v;var j=Array.isArray(r)?(r[f.r]||[])[f.c]:r[Br(f)];j&&(m<0&&(m=v),x=v)}m<0||(++d,a.write_shift(4,m),a.write_shift(4,x))}var b=a.l;return a.l=u,a.write_shift(4,d),a.l=b,a.length>a.l?a.slice(0,a.l):a}function Rce(e,t,r,a){var i=Dce(a,r,t);(i.length>17||(t["!rows"]||[])[a])&&ut(e,0,i)}var Pce=Xl,Mce=zd;function Bce(){}function Fce(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Vie(e),r}function Lce(e,t,r){r==null&&(r=rt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var i=1;i<3;++i)r.write_shift(1,0);return mg({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),sP(e,r),r.slice(0,r.l)}function zce(e){var t=_i(e);return[t]}function $ce(e,t,r){return r==null&&(r=rt(8)),Kl(t,r)}function Uce(e){var t=Vl(e);return[t]}function qce(e,t,r){return r==null&&(r=rt(4)),Yl(t,r)}function Wce(e){var t=_i(e),r=e.read_shift(1);return[t,r,"b"]}function Hce(e,t,r){return r==null&&(r=rt(9)),Kl(t,r),r.write_shift(1,e.v?1:0),r}function Gce(e){var t=Vl(e),r=e.read_shift(1);return[t,r,"b"]}function Kce(e,t,r){return r==null&&(r=rt(5)),Yl(t,r),r.write_shift(1,e.v?1:0),r}function Vce(e){var t=_i(e),r=e.read_shift(1);return[t,r,"e"]}function Yce(e,t,r){return r==null&&(r=rt(9)),Kl(t,r),r.write_shift(1,e.v),r}function Xce(e){var t=Vl(e),r=e.read_shift(1);return[t,r,"e"]}function Qce(e,t,r){return r==null&&(r=rt(8)),Yl(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Jce(e){var t=_i(e),r=e.read_shift(4);return[t,r,"s"]}function Zce(e,t,r){return r==null&&(r=rt(12)),Kl(t,r),r.write_shift(4,t.v),r}function ede(e){var t=Vl(e),r=e.read_shift(4);return[t,r,"s"]}function tde(e,t,r){return r==null&&(r=rt(8)),Yl(t,r),r.write_shift(4,t.v),r}function rde(e){var t=_i(e),r=$d(e);return[t,r,"n"]}function nde(e,t,r){return r==null&&(r=rt(16)),Kl(t,r),Fl(e.v,r),r}function ade(e){var t=Vl(e),r=$d(e);return[t,r,"n"]}function ide(e,t,r){return r==null&&(r=rt(12)),Yl(t,r),Fl(e.v,r),r}function sde(e){var t=_i(e),r=oP(e);return[t,r,"n"]}function ode(e,t,r){return r==null&&(r=rt(12)),Kl(t,r),lP(e.v,r),r}function lde(e){var t=Vl(e),r=oP(e);return[t,r,"n"]}function cde(e,t,r){return r==null&&(r=rt(8)),Yl(t,r),lP(e.v,r),r}function dde(e){var t=_i(e),r=zS(e);return[t,r,"is"]}function ude(e){var t=_i(e),r=fa(e);return[t,r,"str"]}function fde(e,t,r){return r==null&&(r=rt(12+4*e.v.length)),Kl(t,r),qn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function hde(e){var t=Vl(e),r=fa(e);return[t,r,"str"]}function pde(e,t,r){return r==null&&(r=rt(8+4*e.v.length)),Yl(t,r),qn(e.v,r),r.length>r.l?r.slice(0,r.l):r}function mde(e,t,r){var a=e.l+t,i=_i(e);i.r=r["!row"];var s=e.read_shift(1),l=[i,s,"b"];if(r.cellFormula){e.l+=2;var d=p0(e,a-e.l,r);l[3]=Sd(d,null,i,r.supbooks,r)}else e.l=a;return l}function gde(e,t,r){var a=e.l+t,i=_i(e);i.r=r["!row"];var s=e.read_shift(1),l=[i,s,"e"];if(r.cellFormula){e.l+=2;var d=p0(e,a-e.l,r);l[3]=Sd(d,null,i,r.supbooks,r)}else e.l=a;return l}function xde(e,t,r){var a=e.l+t,i=_i(e);i.r=r["!row"];var s=$d(e),l=[i,s,"n"];if(r.cellFormula){e.l+=2;var d=p0(e,a-e.l,r);l[3]=Sd(d,null,i,r.supbooks,r)}else e.l=a;return l}function yde(e,t,r){var a=e.l+t,i=_i(e);i.r=r["!row"];var s=fa(e),l=[i,s,"str"];if(r.cellFormula){e.l+=2;var d=p0(e,a-e.l,r);l[3]=Sd(d,null,i,r.supbooks,r)}else e.l=a;return l}var vde=Xl,bde=zd;function jde(e,t){return t==null&&(t=rt(4)),t.write_shift(4,e),t}function wde(e,t){var r=e.l+t,a=Xl(e),i=$S(e),s=fa(e),l=fa(e),d=fa(e);e.l=r;var u={rfx:a,relId:i,loc:s,display:d};return l&&(u.Tooltip=l),u}function Sde(e,t){var r=rt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));zd({s:Un(e[0]),e:Un(e[0])},r),US("rId"+t,r);var a=e[1].Target.indexOf("#"),i=a==-1?"":e[1].Target.slice(a+1);return qn(i||"",r),qn(e[1].Tooltip||"",r),qn("",r),r.slice(0,r.l)}function Nde(){}function Tde(e,t,r){var a=e.l+t,i=cP(e),s=e.read_shift(1),l=[i];if(l[2]=s,r.cellFormula){var d=hce(e,a-e.l,r);l[1]=d}else e.l=a;return l}function Cde(e,t,r){var a=e.l+t,i=Xl(e),s=[i];if(r.cellFormula){var l=mce(e,a-e.l,r);s[1]=l,e.l=a}else e.l=a;return s}function Ade(e,t,r){r==null&&(r=rt(18));var a=m0(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var i=0;return t.hidden&&(i|=1),typeof a.width=="number"&&(i|=2),t.level&&(i|=t.level<<8),r.write_shift(2,i),r}var GP=["left","right","top","bottom","header","footer"];function Ede(e){var t={};return GP.forEach(function(r){t[r]=$d(e)}),t}function Ode(e,t){return t==null&&(t=rt(6*8)),WP(e),GP.forEach(function(r){Fl(e[r],t)}),t}function _de(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function kde(e,t,r){r==null&&(r=rt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Ide(e){var t=rt(24);return t.write_shift(4,4),t.write_shift(4,1),zd(e,t),t}function Dde(e,t){return t==null&&(t=rt(16*4+2)),t.write_shift(2,e.password?AP(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Rde(){}function Pde(){}function Mde(e,t,r,a,i,s,l){if(t.v===void 0)return!1;var d="";switch(t.t){case"b":d=t.v?"1":"0";break;case"d":t=$a(t),t.z=t.z||pn[14],t.v=za(Ta(t.v)),t.t="n";break;case"n":case"e":d=""+t.v;break;default:d=t.v;break}var u={r,c:a};switch(u.s=Xo(i.cellXfs,t,i),t.l&&s["!links"].push([Br(u),t.l]),t.c&&s["!comments"].push([Br(u),t.c]),t.t){case"s":case"str":return i.bookSST?(d=VS(i.Strings,t.v,i.revStrings),u.t="s",u.v=d,l?ut(e,18,tde(t,u)):ut(e,7,Zce(t,u))):(u.t="str",l?ut(e,17,pde(t,u)):ut(e,6,fde(t,u))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?ut(e,13,cde(t,u)):ut(e,2,ode(t,u)):l?ut(e,16,ide(t,u)):ut(e,5,nde(t,u)),!0;case"b":return u.t="b",l?ut(e,15,Kce(t,u)):ut(e,4,Hce(t,u)),!0;case"e":return u.t="e",l?ut(e,14,Qce(t,u)):ut(e,3,Yce(t,u)),!0}return l?ut(e,12,qce(t,u)):ut(e,1,$ce(t,u)),!0}function Bde(e,t,r,a){var i=tn(t["!ref"]||"A1"),s,l="",d=[];ut(e,145);var u=Array.isArray(t),f=i.e.r;t["!rows"]&&(f=Math.max(i.e.r,t["!rows"].length-1));for(var p=i.s.r;p<=f;++p){l=ta(p),Rce(e,t,i,p);var m=!1;if(p<=i.e.r)for(var x=i.s.c;x<=i.e.c;++x){p===i.s.r&&(d[x]=ua(x)),s=d[x]+l;var v=u?(t[p]||[])[x]:t[s];if(!v){m=!1;continue}m=Mde(e,v,p,x,a,t,m)}}ut(e,146)}function Fde(e,t){!t||!t["!merges"]||(ut(e,177,jde(t["!merges"].length)),t["!merges"].forEach(function(r){ut(e,176,bde(r))}),ut(e,178))}function Lde(e,t){!t||!t["!cols"]||(ut(e,390),t["!cols"].forEach(function(r,a){r&&ut(e,60,Ade(a,r))}),ut(e,391))}function zde(e,t){!t||!t["!ref"]||(ut(e,648),ut(e,649,Ide(tn(t["!ref"]))),ut(e,650))}function $de(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var i=Pr(r,-1,a[1].Target.replace(/#.*$/,""),br.HLINK);ut(e,494,Sde(a,i))}}),delete t["!links"]}function Ude(e,t,r,a){if(t["!comments"].length>0){var i=Pr(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",br.VML);ut(e,551,US("rId"+i)),t["!legacy"]=i}}function qde(e,t,r,a){if(t["!autofilter"]){var i=t["!autofilter"],s=typeof i.ref=="string"?i.ref:Cn(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,d=li(s);d.s.r==d.e.r&&(d.e.r=li(t["!ref"]).e.r,s=Cn(d));for(var u=0;u<l.length;++u){var f=l[u];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==a){f.Ref="'"+r.SheetNames[a]+"'!"+s;break}}u==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),ut(e,161,zd(tn(s))),ut(e,162)}}function Wde(e,t,r){ut(e,133),ut(e,137,kde(t,r)),ut(e,138),ut(e,134)}function Hde(e,t){t["!protect"]&&ut(e,535,Dde(t["!protect"]))}function Gde(e,t,r,a){var i=Fa(),s=r.SheetNames[e],l=r.Sheets[s]||{},d=s;try{r&&r.Workbook&&(d=r.Workbook.Sheets[e].CodeName||d)}catch{}var u=tn(l["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],ut(i,129),(r.vbaraw||l["!outline"])&&ut(i,147,Lce(d,l["!outline"])),ut(i,148,Mce(u)),Wde(i,l,r.Workbook),Lde(i,l),Bde(i,l,e,t),Hde(i,l),qde(i,l,r,e),Fde(i,l),$de(i,l,a),l["!margins"]&&ut(i,476,Ode(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&zde(i,l),Ude(i,l,e,a),ut(i,130),i.end()}function Kde(e,t){e.l+=10;var r=fa(e);return{name:r}}var Vde=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Yde(e){return!e.Workbook||!e.Workbook.WBProps?"false":Cie(e.Workbook.WBProps.date1904)?"true":"false"}var Xde="][*?/\\".split("");function KP(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Xde.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Qde(e,t,r){e.forEach(function(a,i){KP(a);for(var s=0;s<i;++s)if(a==e[s])throw new Error("Duplicate Sheet Name: "+a);if(r){var l=t&&t[i]&&t[i].CodeName||a;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function Jde(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Qde(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)bce(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function VP(e){var t=[En];t[t.length]=vt("workbook",null,{xmlns:Fd[0],"xmlns:r":$n.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Vde.forEach(function(d){e.Workbook.WBProps[d[0]]!=null&&e.Workbook.WBProps[d[0]]!=d[1]&&(a[d[0]]=e.Workbook.WBProps[d[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=vt("workbookPr",null,a);var i=e.Workbook&&e.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var l={name:Mr(e.SheetNames[s].slice(0,31))};if(l.sheetId=""+(s+1),l["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=vt("sheet",null,l)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(d){var u={name:d.Name};d.Comment&&(u.comment=d.Comment),d.Sheet!=null&&(u.localSheetId=""+d.Sheet),d.Hidden&&(u.hidden="1"),d.Ref&&(t[t.length]=vt("definedName",Mr(d.Ref),u))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Zde(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=dw(e),r.name=fa(e),r}function eue(e,t){return t||(t=rt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),US(e.strRelID,t),qn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function tue(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?fa(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function rue(e,t){t||(t=rt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),sP(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function nue(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),s=Yie(e),l=pce(e,0,r),d=$S(e);e.l=a;var u={Name:s,Ptg:l};return i<268435455&&(u.Sheet=i),d&&(u.Comment=d),u}function aue(e,t){ut(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,i={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};ut(e,156,eue(i))}ut(e,144)}function iue(e,t){t||(t=rt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return qn("SheetJS",t),qn(og.version,t),qn(og.version,t),qn("7262",t),t.length>t.l?t.slice(0,t.l):t}function sue(e,t){t||(t=rt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function oue(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,i=-1,s=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&i==-1?i=a:r[a].Hidden==1&&s==-1&&(s=a);s>i||(ut(e,135),ut(e,158,sue(i)),ut(e,136))}}function lue(e,t){var r=Fa();return ut(r,131),ut(r,128,iue()),ut(r,153,rue(e.Workbook&&e.Workbook.WBProps||null)),oue(r,e),aue(r,e),ut(r,132),r.end()}function cue(e,t,r){return(t.slice(-4)===".bin"?lue:VP)(e)}function due(e,t,r,a,i){return(t.slice(-4)===".bin"?Gde:HP)(e,r,a,i)}function uue(e,t,r){return(t.slice(-4)===".bin"?Ooe:_P)(e,r)}function fue(e,t,r){return(t.slice(-4)===".bin"?roe:CP)(e,r)}function hue(e,t,r){return(t.slice(-4)===".bin"?Hoe:PP)(e)}function pue(e){return(e.slice(-4)===".bin"?Boe:DP)()}function mue(e,t){var r=[];return e.Props&&r.push(use(e.Props,t)),e.Custprops&&r.push(fse(e.Props,e.Custprops)),r.join("")}function gue(){return""}function xue(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,i){var s=[];s.push(vt("NumberFormat",null,{"ss:Format":Mr(pn[a.numFmtId])}));var l={"ss:ID":"s"+(21+i)};r.push(vt("Style",s.join(""),l))}),vt("Styles",r.join(""))}function YP(e){return vt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+GS(e.Ref,{r:0,c:0})})}function yue(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var i=t[a];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(YP(i)))}return vt("Names",r.join(""))}function vue(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var i=a.Workbook.Names,s=[],l=0;l<i.length;++l){var d=i[l];d.Sheet==r&&(d.Name.match(/^_xlfn\./)||s.push(YP(d)))}return s.join("")}function bue(e,t,r,a){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(vt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(vt("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(vt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)i.push(vt("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(a.Workbook.Sheets[s]&&!a.Workbook.Sheets[s].Hidden);++s);s==r&&i.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(Zn("ProtectContents","True")),e["!protect"].objects&&i.push(Zn("ProtectObjects","True")),e["!protect"].scenarios&&i.push(Zn("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?i.push(Zn("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&i.push(Zn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&i.push("<"+l[1]+"/>")})),i.length==0?"":vt("WorksheetOptions",i.join(""),{xmlns:ai.x})}function jue(e){return e.map(function(t){var r=Tie(t.t||""),a=vt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return vt("Comment",a,{"ss:Author":t.a})}).join("")}function wue(e,t,r,a,i,s,l){if(!e||e.v==null&&e.f==null)return"";var d={};if(e.f&&(d["ss:Formula"]="="+Mr(GS(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var u=Un(e.F.slice(t.length+1));d["ss:ArrayRange"]="RC:R"+(u.r==l.r?"":"["+(u.r-l.r)+"]")+"C"+(u.c==l.c?"":"["+(u.c-l.c)+"]")}if(e.l&&e.l.Target&&(d["ss:HRef"]=Mr(e.l.Target),e.l.Tooltip&&(d["x:HRefScreenTip"]=Mr(e.l.Tooltip))),r["!merges"])for(var f=r["!merges"],p=0;p!=f.length;++p)f[p].s.c!=l.c||f[p].s.r!=l.r||(f[p].e.c>f[p].s.c&&(d["ss:MergeAcross"]=f[p].e.c-f[p].s.c),f[p].e.r>f[p].s.r&&(d["ss:MergeDown"]=f[p].e.r-f[p].s.r));var m="",x="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":m="Number",x=String(e.v);break;case"b":m="Boolean",x=e.v?"1":"0";break;case"e":m="Error",x=wh[e.v];break;case"d":m="DateTime",x=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||pn[14]);break;case"s":m="String",x=Nie(e.v||"");break}var v=Xo(a.cellXfs,e,a);d["ss:StyleID"]="s"+(21+v),d["ss:Index"]=l.c+1;var j=e.v!=null?x:"",b=e.t=="z"?"":'<Data ss:Type="'+m+'">'+j+"</Data>";return(e.c||[]).length>0&&(b+=jue(e.c)),vt("Cell",b,d)}function Sue(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=OP(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Nue(e,t,r,a){if(!e["!ref"])return"";var i=tn(e["!ref"]),s=e["!merges"]||[],l=0,d=[];e["!cols"]&&e["!cols"].forEach(function(y,C){WS(y);var E=!!y.width,O=m0(C,y),S={"ss:Index":C+1};E&&(S["ss:Width"]=xg(O.width)),y.hidden&&(S["ss:Hidden"]="1"),d.push(vt("Column",null,S))});for(var u=Array.isArray(e),f=i.s.r;f<=i.e.r;++f){for(var p=[Sue(f,(e["!rows"]||[])[f])],m=i.s.c;m<=i.e.c;++m){var x=!1;for(l=0;l!=s.length;++l)if(!(s[l].s.c>m)&&!(s[l].s.r>f)&&!(s[l].e.c<m)&&!(s[l].e.r<f)){(s[l].s.c!=m||s[l].s.r!=f)&&(x=!0);break}if(!x){var v={r:f,c:m},j=Br(v),b=u?(e[f]||[])[m]:e[j];p.push(wue(b,j,e,t,r,a,v))}}p.push("</Row>"),p.length>2&&d.push(p.join(""))}return d.join("")}function Tue(e,t,r){var a=[],i=r.SheetNames[e],s=r.Sheets[i],l=s?vue(s,t,e,r):"";return l.length>0&&a.push("<Names>"+l+"</Names>"),l=s?Nue(s,t,e,r):"",l.length>0&&a.push("<Table>"+l+"</Table>"),a.push(bue(s,t,e,r)),a.join("")}function Cue(e,t){t||(t={}),e.SSF||(e.SSF=$a(pn)),e.SSF&&(d0(),c0(e.SSF),t.revssf=u0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Xo(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(mue(e,t)),r.push(gue()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(vt("Worksheet",Tue(a,t,e),{"ss:Name":Mr(e.SheetNames[a])}));return r[2]=xue(e,t),r[3]=yue(e),En+vt("Workbook",r.join(""),{xmlns:ai.ss,"xmlns:o":ai.o,"xmlns:x":ai.x,"xmlns:ss":ai.ss,"xmlns:dt":ai.dt,"xmlns:html":ai.html})}var Cj={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Aue(e,t){var r=[],a=[],i=[],s=0,l,d=XI(c3,"n"),u=XI(d3,"n");if(e.Props)for(l=na(e.Props),s=0;s<l.length;++s)(Object.prototype.hasOwnProperty.call(d,l[s])?r:Object.prototype.hasOwnProperty.call(u,l[s])?a:i).push([l[s],e.Props[l[s]]]);if(e.Custprops)for(l=na(e.Custprops),s=0;s<l.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},l[s])||(Object.prototype.hasOwnProperty.call(d,l[s])?r:Object.prototype.hasOwnProperty.call(u,l[s])?a:i).push([l[s],e.Custprops[l[s]]]);var f=[];for(s=0;s<i.length;++s)vP.indexOf(i[s][0])>-1||gP.indexOf(i[s][0])>-1||i[s][1]!=null&&f.push(i[s]);a.length&&Hr.utils.cfb_add(t,"/SummaryInformation",m3(a,Cj.SI,u,d3)),(r.length||f.length)&&Hr.utils.cfb_add(t,"/DocumentSummaryInformation",m3(r,Cj.DSI,d,c3,f.length?f:null,Cj.UDI))}function Eue(e,t){var r=t||{},a=Hr.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Hr.utils.cfb_add(a,i,XP(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Aue(e,a),r.biff==8&&e.vbaraw&&Goe(a,Hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var Oue={0:{f:Ice},1:{f:zce},2:{f:sde},3:{f:Vce},4:{f:Wce},5:{f:rde},6:{f:ude},7:{f:Jce},8:{f:yde},9:{f:xde},10:{f:mde},11:{f:gde},12:{f:Uce},13:{f:lde},14:{f:Xce},15:{f:Gce},16:{f:ade},17:{f:hde},18:{f:ede},19:{f:zS},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:nue},40:{},42:{},43:{f:uoe},44:{f:coe},45:{f:poe},46:{f:goe},47:{f:moe},48:{},49:{f:Uie},50:{},51:{f:Ioe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:qse},62:{f:dde},63:{f:Foe},64:{f:Rde},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:gs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_de},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Fce},148:{f:Pce,p:16},151:{f:Nde},152:{},153:{f:tue},154:{},155:{},156:{f:Zde},157:{},158:{},159:{T:1,f:Zse},160:{T:-1},161:{T:1,f:Xl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:vde},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:_oe},336:{T:-1},337:{f:Poe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:dw},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Bse},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Tde},427:{f:Cde},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Ede},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Bce},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wde},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:dw},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:qoe},633:{T:1},634:{T:-1},635:{T:1,f:$oe},636:{T:-1},637:{f:Gie},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Kde},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Pde},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function bt(e,t,r,a){var i=t;if(!isNaN(i)){var s=a||(r||[]).length||0,l=e.next(4);l.write_shift(2,i),l.write_shift(2,s),s>0&&BS(r)&&e.push(r)}}function _ue(e,t,r,a){var i=(r||[]).length||0;if(i<=8224)return bt(e,t,r,i);var s=t;if(!isNaN(s)){for(var l=r.parts||[],d=0,u=0,f=0;f+(l[d]||8224)<=8224;)f+=l[d]||8224,d++;var p=e.next(4);for(p.write_shift(2,s),p.write_shift(2,f),e.push(r.slice(u,u+f)),u+=f;u<i;){for(p=e.next(4),p.write_shift(2,60),f=0;f+(l[d]||8224)<=8224;)f+=l[d]||8224,d++;p.write_shift(2,f),e.push(r.slice(u,u+f)),u+=f}}}function Nh(e,t,r){return e||(e=rt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function kue(e,t,r,a){var i=rt(9);return Nh(i,e,t),jP(r,a||"b",i),i}function Iue(e,t,r){var a=rt(8+2*r.length);return Nh(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function Due(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var i=t.t=="d"?za(Ta(t.v)):t.v;i==(i|0)&&i>=0&&i<65536?bt(e,2,Kse(r,a,i)):bt(e,3,Gse(r,a,i));return;case"b":case"e":bt(e,5,kue(r,a,t.v,t.t));return;case"s":case"str":bt(e,4,Iue(r,a,(t.v||"").slice(0,255)));return}bt(e,1,Nh(null,r,a))}function Rue(e,t,r,a){var i=Array.isArray(t),s=tn(t["!ref"]||"A1"),l,d="",u=[];if(s.e.c>255||s.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),l=Cn(s)}for(var f=s.s.r;f<=s.e.r;++f){d=ta(f);for(var p=s.s.c;p<=s.e.c;++p){f===s.s.r&&(u[p]=ua(p)),l=u[p]+d;var m=i?(t[f]||[])[p]:t[l];m&&Due(e,m,f,p)}}}function Pue(e,t){for(var r=t||{},a=Fa(),i=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(i=s);if(i==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return bt(a,r.biff==4?1033:r.biff==3?521:9,qS(e,16,r)),Rue(a,e.Sheets[e.SheetNames[i]],i,r),bt(a,10),a.end()}function Mue(e,t,r){bt(e,49,Ose({sz:12,name:"Arial"},r))}function Bue(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var i=a[0];i<=a[1];++i)t[i]!=null&&bt(e,1054,Ise(i,t[i],r))})}function Fue(e,t){var r=rt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),bt(e,2151,r),r=rt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),NP(tn(t["!ref"]||"A1"),r),r.write_shift(4,4),bt(e,2152,r)}function Lue(e,t){for(var r=0;r<16;++r)bt(e,224,x3({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){bt(e,224,x3(a,0,t))})}function zue(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];bt(e,440,zse(a)),a[1].Tooltip&&bt(e,2048,$se(a))}delete t["!links"]}function $ue(e,t){if(t){var r=0;t.forEach(function(a,i){++r<=256&&a&&bt(e,125,Wse(m0(i,a),i))})}}function Uue(e,t,r,a,i){var s=16+Xo(i.cellXfs,t,i);if(t.v==null&&!t.bf){bt(e,513,Ll(r,a,s));return}if(t.bf)bt(e,6,fce(t,r,a,i,s));else switch(t.t){case"d":case"n":var l=t.t=="d"?za(Ta(t.v)):t.v;bt(e,515,Mse(r,a,l,s));break;case"b":case"e":bt(e,517,Pse(r,a,t.v,s,i,t.t));break;case"s":case"str":if(i.bookSST){var d=VS(i.Strings,t.v,i.revStrings);bt(e,253,_se(r,a,d,s))}else bt(e,516,kse(r,a,(t.v||"").slice(0,255),s,i));break;default:bt(e,513,Ll(r,a,s))}}function que(e,t,r){var a=Fa(),i=r.SheetNames[e],s=r.Sheets[i]||{},l=(r||{}).Workbook||{},d=(l.Sheets||[])[e]||{},u=Array.isArray(s),f=t.biff==8,p,m="",x=[],v=tn(s["!ref"]||"A1"),j=f?65536:16384;if(v.e.c>255||v.e.r>=j){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");v.e.c=Math.min(v.e.c,255),v.e.r=Math.min(v.e.c,j-1)}bt(a,2057,qS(r,16,t)),bt(a,13,bi(1)),bt(a,12,bi(100)),bt(a,15,wa(!0)),bt(a,17,wa(!1)),bt(a,16,Fl(.001)),bt(a,95,wa(!0)),bt(a,42,wa(!1)),bt(a,43,wa(!1)),bt(a,130,bi(1)),bt(a,128,Rse()),bt(a,131,wa(!1)),bt(a,132,wa(!1)),f&&$ue(a,s["!cols"]),bt(a,512,Dse(v,t)),f&&(s["!links"]=[]);for(var b=v.s.r;b<=v.e.r;++b){m=ta(b);for(var y=v.s.c;y<=v.e.c;++y){b===v.s.r&&(x[y]=ua(y)),p=x[y]+m;var C=u?(s[b]||[])[y]:s[p];C&&(Uue(a,C,b,y,t),f&&C.l&&s["!links"].push([p,C.l]))}}var E=d.CodeName||d.name||i;return f&&bt(a,574,Ese((l.Views||[])[0])),f&&(s["!merges"]||[]).length&&bt(a,229,Lse(s["!merges"])),f&&zue(a,s),bt(a,442,SP(E)),f&&Fue(a,s),bt(a,10),a.end()}function Wue(e,t,r){var a=Fa(),i=(e||{}).Workbook||{},s=i.Sheets||[],l=i.WBProps||{},d=r.biff==8,u=r.biff==5;if(bt(a,2057,qS(e,5,r)),r.bookType=="xla"&&bt(a,135),bt(a,225,d?bi(1200):null),bt(a,193,mse(2)),u&&bt(a,191),u&&bt(a,192),bt(a,226),bt(a,92,Nse("SheetJS",r)),bt(a,66,bi(d?1200:1252)),d&&bt(a,353,bi(0)),d&&bt(a,448),bt(a,317,Hse(e.SheetNames.length)),d&&e.vbaraw&&bt(a,211),d&&e.vbaraw){var f=l.CodeName||"ThisWorkbook";bt(a,442,SP(f))}bt(a,156,bi(17)),bt(a,25,wa(!1)),bt(a,18,wa(!1)),bt(a,19,bi(0)),d&&bt(a,431,wa(!1)),d&&bt(a,444,bi(0)),bt(a,61,Ase()),bt(a,64,wa(!1)),bt(a,141,bi(0)),bt(a,34,wa(Yde(e)=="true")),bt(a,14,wa(!0)),d&&bt(a,439,wa(!1)),bt(a,218,bi(0)),Mue(a,e,r),Bue(a,e.SSF,r),Lue(a,r),d&&bt(a,352,wa(!1));var p=a.end(),m=Fa();d&&bt(m,140,Use()),d&&r.Strings&&_ue(m,252,Cse(r.Strings)),bt(m,10);var x=m.end(),v=Fa(),j=0,b=0;for(b=0;b<e.SheetNames.length;++b)j+=(d?12:11)+(d?2:1)*e.SheetNames[b].length;var y=p.length+j+x.length;for(b=0;b<e.SheetNames.length;++b){var C=s[b]||{};bt(v,133,Tse({pos:y,hs:C.Hidden||0,dt:0,name:e.SheetNames[b]},r)),y+=t[b].length}var E=v.end();if(j!=E.length)throw new Error("BS8 "+j+" != "+E.length);var O=[];return p.length&&O.push(p),E.length&&O.push(E),x.length&&O.push(x),Jn(O)}function Hue(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=$a(pn)),e&&e.SSF&&(d0(),c0(e.SSF),r.revssf=u0(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,YS(r),r.cellXfs=[],Xo(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)a[a.length]=que(i,r,e);return a.unshift(Wue(e,a,r)),Jn(a)}function XP(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var i=li(a["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return Hue(e,t);case 4:case 3:case 2:return Pue(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Gue(e,t,r,a){for(var i=e["!merges"]||[],s=[],l=t.s.c;l<=t.e.c;++l){for(var d=0,u=0,f=0;f<i.length;++f)if(!(i[f].s.r>r||i[f].s.c>l)&&!(i[f].e.r<r||i[f].e.c<l)){if(i[f].s.r<r||i[f].s.c<l){d=-1;break}d=i[f].e.r-i[f].s.r+1,u=i[f].e.c-i[f].s.c+1;break}if(!(d<0)){var p=Br({r,c:l}),m=a.dense?(e[r]||[])[l]:e[p],x=m&&m.v!=null&&(m.h||Sie(m.w||(ao(m),m.w)||""))||"",v={};d>1&&(v.rowspan=d),u>1&&(v.colspan=u),a.editable?x='<span contenteditable="true">'+x+"</span>":m&&(v["data-t"]=m&&m.t||"z",m.v!=null&&(v["data-v"]=m.v),m.z!=null&&(v["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+m.l.Target+'">'+x+"</a>")),v.id=(a.id||"sjs")+"-"+p,s.push(vt("td",x,v))}}var j="<tr>";return j+s.join("")+"</tr>"}var Kue='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Vue="</body></html>";function Yue(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function QP(e,t){var r=t||{},a=r.header!=null?r.header:Kue,i=r.footer!=null?r.footer:Vue,s=[a],l=li(e["!ref"]);r.dense=Array.isArray(e),s.push(Yue(e,l,r));for(var d=l.s.r;d<=l.e.r;++d)s.push(Gue(e,l,d,r));return s.push("</table>"+i),s.join("")}function JP(e,t,r){var a=r||{},i=0,s=0;if(a.origin!=null)if(typeof a.origin=="number")i=a.origin;else{var l=typeof a.origin=="string"?Un(a.origin):a.origin;i=l.r,s=l.c}var d=t.getElementsByTagName("tr"),u=Math.min(a.sheetRows||1e7,d.length),f={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var p=li(e["!ref"]);f.s.r=Math.min(f.s.r,p.s.r),f.s.c=Math.min(f.s.c,p.s.c),f.e.r=Math.max(f.e.r,p.e.r),f.e.c=Math.max(f.e.c,p.e.c),i==-1&&(f.e.r=i=p.e.r+1)}var m=[],x=0,v=e["!rows"]||(e["!rows"]=[]),j=0,b=0,y=0,C=0,E=0,O=0;for(e["!cols"]||(e["!cols"]=[]);j<d.length&&b<u;++j){var S=d[j];if(N3(S)){if(a.display)continue;v[b]={hidden:!0}}var T=S.children;for(y=C=0;y<T.length;++y){var k=T[y];if(!(a.display&&N3(k))){var D=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):Aie(k.innerHTML),F=k.getAttribute("data-z")||k.getAttribute("z");for(x=0;x<m.length;++x){var B=m[x];B.s.c==C+s&&B.s.r<b+i&&b+i<=B.e.r&&(C=B.e.c+1-s,x=-1)}O=+k.getAttribute("colspan")||1,((E=+k.getAttribute("rowspan")||1)>1||O>1)&&m.push({s:{r:b+i,c:C+s},e:{r:b+i+(E||1)-1,c:C+s+(O||1)-1}});var M={t:"s",v:D},L=k.getAttribute("data-t")||k.getAttribute("t")||"";D!=null&&(D.length==0?M.t=L||"z":a.raw||D.trim().length==0||L=="s"||(D==="TRUE"?M={t:"b",v:!0}:D==="FALSE"?M={t:"b",v:!1}:isNaN(Ys(D))?isNaN(Jf(D).getDate())||(M={t:"d",v:Ta(D)},a.cellDates||(M={t:"n",v:za(M.v)}),M.z=a.dateNF||pn[14]):M={t:"n",v:Ys(D)})),M.z===void 0&&F!=null&&(M.z=F);var A="",U=k.getElementsByTagName("A");if(U&&U.length)for(var P=0;P<U.length&&!(U[P].hasAttribute("href")&&(A=U[P].getAttribute("href"),A.charAt(0)!="#"));++P);A&&A.charAt(0)!="#"&&(M.l={Target:A}),a.dense?(e[b+i]||(e[b+i]=[]),e[b+i][C+s]=M):e[Br({c:C+s,r:b+i})]=M,f.e.c<C+s&&(f.e.c=C+s),C+=O}}++b}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),f.e.r=Math.max(f.e.r,b-1+i),e["!ref"]=Cn(f),b>=u&&(e["!fullref"]=Cn((f.e.r=d.length-j+b-1+i,f))),e}function ZP(e,t){var r=t||{},a=r.dense?[]:{};return JP(a,e,t)}function Xue(e,t){return Gl(ZP(e,t),t)}function N3(e){var t="",r=Que(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Que(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Jue=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+eh({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return En+t}}(),T3=function(){var e=function(s){return Mr(s).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(s,l,d){var u=[];u.push('      <table:table table:name="'+Mr(l.SheetNames[d])+`" table:style-name="ta1">
`);var f=0,p=0,m=li(s["!ref"]||"A1"),x=s["!merges"]||[],v=0,j=Array.isArray(s);if(s["!cols"])for(p=0;p<=m.e.c;++p)u.push("        <table:table-column"+(s["!cols"][p]?' table:style-name="co'+s["!cols"][p].ods+'"':"")+`></table:table-column>
`);var b="",y=s["!rows"]||[];for(f=0;f<m.s.r;++f)b=y[f]?' table:style-name="ro'+y[f].ods+'"':"",u.push("        <table:table-row"+b+`></table:table-row>
`);for(;f<=m.e.r;++f){for(b=y[f]?' table:style-name="ro'+y[f].ods+'"':"",u.push("        <table:table-row"+b+`>
`),p=0;p<m.s.c;++p)u.push(t);for(;p<=m.e.c;++p){var C=!1,E={},O="";for(v=0;v!=x.length;++v)if(!(x[v].s.c>p)&&!(x[v].s.r>f)&&!(x[v].e.c<p)&&!(x[v].e.r<f)){(x[v].s.c!=p||x[v].s.r!=f)&&(C=!0),E["table:number-columns-spanned"]=x[v].e.c-x[v].s.c+1,E["table:number-rows-spanned"]=x[v].e.r-x[v].s.r+1;break}if(C){u.push(r);continue}var S=Br({r:f,c:p}),T=j?(s[f]||[])[p]:s[S];if(T&&T.f&&(E["table:formula"]=Mr(yce(T.f)),T.F&&T.F.slice(0,S.length)==S)){var k=li(T.F);E["table:number-matrix-columns-spanned"]=k.e.c-k.s.c+1,E["table:number-matrix-rows-spanned"]=k.e.r-k.s.r+1}if(!T){u.push(t);continue}switch(T.t){case"b":O=T.v?"TRUE":"FALSE",E["office:value-type"]="boolean",E["office:boolean-value"]=T.v?"true":"false";break;case"n":O=T.w||String(T.v||0),E["office:value-type"]="float",E["office:value"]=T.v||0;break;case"s":case"str":O=T.v==null?"":T.v,E["office:value-type"]="string";break;case"d":O=T.w||Ta(T.v).toISOString(),E["office:value-type"]="date",E["office:date-value"]=Ta(T.v).toISOString(),E["table:style-name"]="ce1";break;default:u.push(t);continue}var D=e(O);if(T.l&&T.l.Target){var F=T.l.Target;F=F.charAt(0)=="#"?"#"+vce(F.slice(1)):F,F.charAt(0)!="#"&&!F.match(/^\w+:/)&&(F="../"+F),D=vt("text:a",D,{"xlink:href":F.replace(/&/g,"&amp;")})}u.push("          "+vt("table:table-cell",vt("text:p",D,{}),E)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},i=function(s,l){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var d=0;l.SheetNames.map(function(f){return l.Sheets[f]}).forEach(function(f){if(f&&f["!cols"]){for(var p=0;p<f["!cols"].length;++p)if(f["!cols"][p]){var m=f["!cols"][p];if(m.width==null&&m.wpx==null&&m.wch==null)continue;WS(m),m.ods=d;var x=f["!cols"][p].wpx+"px";s.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),s.push(`  </style:style>
`),++d}}});var u=0;l.SheetNames.map(function(f){return l.Sheets[f]}).forEach(function(f){if(f&&f["!rows"]){for(var p=0;p<f["!rows"].length;++p)if(f["!rows"][p]){f["!rows"][p].ods=u;var m=f["!rows"][p].hpx+"px";s.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),s.push(`  </style:style>
`),++u}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(l,d){var u=[En],f=eh({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=eh({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(u.push("<office:document"+f+p+`>
`),u.push(pP().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+f+`>
`),i(u,l),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var m=0;m!=l.SheetNames.length;++m)u.push(a(l.Sheets[l.SheetNames[m]],l,m));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),d.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function eM(e,t){if(t.bookType=="fods")return T3(e,t);var r=DS(),a="",i=[],s=[];return a="mimetype",sr(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",sr(r,a,T3(e,t)),i.push([a,"text/xml"]),s.push([a,"ContentFile"]),a="styles.xml",sr(r,a,Jue(e,t)),i.push([a,"text/xml"]),s.push([a,"StylesFile"]),a="meta.xml",sr(r,a,En+pP()),i.push([a,"text/xml"]),s.push([a,"MetadataFile"]),a="manifest.rdf",sr(r,a,dse(s)),i.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",sr(r,a,lse(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function bg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Zue(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Wi(Zf(e))}function efe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function Wo(e){var t=e.reduce(function(i,s){return i+s.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(i){r.set(i,a),a+=i.length}),r}function tfe(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var s=0;i>=1;++s,i/=256)e[t+s]=i&255;e[t+15]|=r>=0?0:128}function th(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Rr(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Yc(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Dn(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],i=th(e,r),s=i&7;i=Math.floor(i/8);var l=0,d;if(i==0)break;switch(s){case 0:{for(var u=r[0];e[r[0]++]>=128;);d=e.slice(u,r[0])}break;case 5:l=4,d=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,d=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=th(e,r),d=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(a))}var f={data:d,type:s};t[i]==null?t[i]=[f]:t[i].push(f)}return t}function Vn(e){var t=[];return e.forEach(function(r,a){r.forEach(function(i){i.data&&(t.push(Rr(a*8+i.type)),i.type==2&&t.push(Rr(i.data.length)),t.push(i.data))})}),Wo(t)}function Mi(e){for(var t,r=[],a=[0];a[0]<e.length;){var i=th(e,a),s=Dn(e.slice(a[0],a[0]+i));a[0]+=i;var l={id:Yc(s[1][0].data),messages:[]};s[2].forEach(function(d){var u=Dn(d.data),f=Yc(u[3][0].data);l.messages.push({meta:u,data:e.slice(a[0],a[0]+f)}),a[0]+=f}),(t=s[3])!=null&&t[0]&&(l.merge=Yc(s[3][0].data)>>>0>0),r.push(l)}return r}function Rc(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Rr(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Rr(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(l){i.push(l.data),l.meta[3]=[{type:0,data:Rr(l.data.length)}],a[2].push({data:Vn(l.meta),type:2})});var s=Vn(a);t.push(Rr(s.length)),t.push(s),i.forEach(function(l){return t.push(l)})}),Wo(t)}function rfe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=th(t,r),i=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var d=l-59;l=t[r[0]],d>1&&(l|=t[r[0]+1]<<8),d>2&&(l|=t[r[0]+2]<<16),d>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=d}i.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var u=0,f=0;if(s==1?(f=(t[r[0]]>>2&7)+4,u=(t[r[0]++]&224)<<3,u|=t[r[0]++]):(f=(t[r[0]++]>>2)+1,s==2?(u=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(u=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[Wo(i)],u==0)throw new Error("Invalid offset 0");if(u>i[0].length)throw new Error("Invalid offset beyond length");if(f>=u)for(i.push(i[0].slice(-u)),f-=u;f>=i[i.length-1].length;)i.push(i[i.length-1]),f-=i[i.length-1].length;i.push(i[0].slice(-u,-u+f))}}var p=Wo(i);if(p.length!=a)throw new Error("Unexpected length: ".concat(p.length," != ").concat(a));return p}function Bi(e){for(var t=[],r=0;r<e.length;){var a=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(rfe(a,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Wo(t)}function Pc(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),i=new Uint8Array(4);t.push(i);var s=Rr(a),l=s.length;t.push(s),a<=60?(l++,t.push(new Uint8Array([a-1<<2]))):a<=256?(l+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(l+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(l+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(l+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),l+=a,i[0]=0,i[1]=l&255,i[2]=l>>8&255,i[3]=l>>16&255,r+=a}return Wo(t)}function Aj(e,t){var r=new Uint8Array(32),a=bg(r),i=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,tfe(r,i,e.v),s|=1,i+=16;break;case"b":r[1]=6,a.setFloat64(i,e.v?1:0,!0),s|=2,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(i,t.indexOf(e.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,s,!0),r.slice(0,i)}function Ej(e,t){var r=new Uint8Array(32),a=bg(r),i=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(i,e.v,!0),s|=32,i+=8;break;case"b":r[2]=6,a.setFloat64(i,e.v?1:0,!0),s|=32,i+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(i,t.indexOf(e.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,s,!0),r.slice(0,i)}function ko(e){var t=Dn(e);return th(t[1][0].data)}function nfe(e,t,r){var a,i,s,l;if(!((a=e[6])!=null&&a[0])||!((i=e[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var d=((l=(s=e[8])==null?void 0:s[0])==null?void 0:l.data)&&Yc(e[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var u=0,f=bg(e[7][0].data),p=0,m=[],x=bg(e[4][0].data),v=0,j=[],b=0;b<t.length;++b){if(t[b]==null){f.setUint16(b*2,65535,!0),x.setUint16(b*2,65535);continue}f.setUint16(b*2,p,!0),x.setUint16(b*2,v,!0);var y,C;switch(typeof t[b]){case"string":y=Aj({t:"s",v:t[b]},r),C=Ej({t:"s",v:t[b]},r);break;case"number":y=Aj({t:"n",v:t[b]},r),C=Ej({t:"n",v:t[b]},r);break;case"boolean":y=Aj({t:"b",v:t[b]},r),C=Ej({t:"b",v:t[b]},r);break;default:throw new Error("Unsupported value "+t[b])}m.push(y),p+=y.length,j.push(C),v+=C.length,++u}for(e[2][0].data=Rr(u);b<e[7][0].data.length/2;++b)f.setUint16(b*2,65535,!0),x.setUint16(b*2,65535,!0);return e[6][0].data=Wo(m),e[3][0].data=Wo(j),u}function afe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=li(r["!ref"]);a.s.r=a.s.c=0;var i=!1;a.e.c>9&&(i=!0,a.e.c=9),a.e.r>49&&(i=!0,a.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Cn(a)));var s=jg(r,{range:a,header:1}),l=["~Sh33tJ5~"];s.forEach(function(ee){return ee.forEach(function(H){typeof H=="string"&&l.push(H)})});var d={},u=[],f=Hr.read(t.numbers,{type:"base64"});f.FileIndex.map(function(ee,H){return[ee,f.FullPaths[H]]}).forEach(function(ee){var H=ee[0],re=ee[1];if(H.type==2&&H.name.match(/\.iwa/)){var le=H.content,pe=Bi(le),Se=Mi(pe);Se.forEach(function(K){u.push(K.id),d[K.id]={deps:[],location:re,type:Yc(K.messages[0].meta[1][0].data)}})}}),u.sort(function(ee,H){return ee-H});var p=u.filter(function(ee){return ee>1}).map(function(ee){return[ee,Rr(ee)]});f.FileIndex.map(function(ee,H){return[ee,f.FullPaths[H]]}).forEach(function(ee){var H=ee[0];if(ee[1],!!H.name.match(/\.iwa/)){var re=Mi(Bi(H.content));re.forEach(function(le){le.messages.forEach(function(pe){p.forEach(function(Se){le.messages.some(function(K){return Yc(K.meta[1][0].data)!=11006&&efe(K.data,Se[1])})&&d[Se[0]].deps.push(le.id)})})})}});for(var m=Hr.find(f,d[1].location),x=Mi(Bi(m.content)),v,j=0;j<x.length;++j){var b=x[j];b.id==1&&(v=b)}var y=ko(Dn(v.messages[0].data)[1][0].data);for(m=Hr.find(f,d[y].location),x=Mi(Bi(m.content)),j=0;j<x.length;++j)b=x[j],b.id==y&&(v=b);for(y=ko(Dn(v.messages[0].data)[2][0].data),m=Hr.find(f,d[y].location),x=Mi(Bi(m.content)),j=0;j<x.length;++j)b=x[j],b.id==y&&(v=b);for(y=ko(Dn(v.messages[0].data)[2][0].data),m=Hr.find(f,d[y].location),x=Mi(Bi(m.content)),j=0;j<x.length;++j)b=x[j],b.id==y&&(v=b);var C=Dn(v.messages[0].data);{C[6][0].data=Rr(a.e.r+1),C[7][0].data=Rr(a.e.c+1);var E=ko(C[46][0].data),O=Hr.find(f,d[E].location),S=Mi(Bi(O.content));{for(var T=0;T<S.length&&S[T].id!=E;++T);if(S[T].id!=E)throw"Bad ColumnRowUIDMapArchive";var k=Dn(S[T].messages[0].data);k[1]=[],k[2]=[],k[3]=[];for(var D=0;D<=a.e.c;++D){var F=[];F[1]=F[2]=[{type:0,data:Rr(D+420690)}],k[1].push({type:2,data:Vn(F)}),k[2].push({type:0,data:Rr(D)}),k[3].push({type:0,data:Rr(D)})}k[4]=[],k[5]=[],k[6]=[];for(var B=0;B<=a.e.r;++B)F=[],F[1]=F[2]=[{type:0,data:Rr(B+726270)}],k[4].push({type:2,data:Vn(F)}),k[5].push({type:0,data:Rr(B)}),k[6].push({type:0,data:Rr(B)});S[T].messages[0].data=Vn(k)}O.content=Pc(Rc(S)),O.size=O.content.length,delete C[46];var M=Dn(C[4][0].data);{M[7][0].data=Rr(a.e.r+1);var L=Dn(M[1][0].data),A=ko(L[2][0].data);O=Hr.find(f,d[A].location),S=Mi(Bi(O.content));{if(S[0].id!=A)throw"Bad HeaderStorageBucket";var U=Dn(S[0].messages[0].data);for(B=0;B<s.length;++B){var P=Dn(U[2][0].data);P[1][0].data=Rr(B),P[4][0].data=Rr(s[B].length),U[2][B]={type:U[2][0].type,data:Vn(P)}}S[0].messages[0].data=Vn(U)}O.content=Pc(Rc(S)),O.size=O.content.length;var I=ko(M[2][0].data);O=Hr.find(f,d[I].location),S=Mi(Bi(O.content));{if(S[0].id!=I)throw"Bad HeaderStorageBucket";for(U=Dn(S[0].messages[0].data),D=0;D<=a.e.c;++D)P=Dn(U[2][0].data),P[1][0].data=Rr(D),P[4][0].data=Rr(a.e.r+1),U[2][D]={type:U[2][0].type,data:Vn(P)};S[0].messages[0].data=Vn(U)}O.content=Pc(Rc(S)),O.size=O.content.length;var R=ko(M[4][0].data);(function(){for(var ee=Hr.find(f,d[R].location),H=Mi(Bi(ee.content)),re,le=0;le<H.length;++le){var pe=H[le];pe.id==R&&(re=pe)}var Se=Dn(re.messages[0].data);{Se[3]=[];var K=[];l.forEach(function(fe,Xe){K[1]=[{type:0,data:Rr(Xe)}],K[2]=[{type:0,data:Rr(1)}],K[3]=[{type:2,data:Zue(fe)}],Se[3].push({type:2,data:Vn(K)})})}re.messages[0].data=Vn(Se);var ue=Rc(H),ye=Pc(ue);ee.content=ye,ee.size=ee.content.length})();var W=Dn(M[3][0].data);{var Q=W[1][0];delete W[2];var ge=Dn(Q.data);{var q=ko(ge[2][0].data);(function(){for(var ee=Hr.find(f,d[q].location),H=Mi(Bi(ee.content)),re,le=0;le<H.length;++le){var pe=H[le];pe.id==q&&(re=pe)}var Se=Dn(re.messages[0].data);{delete Se[6],delete W[7];var K=new Uint8Array(Se[5][0].data);Se[5]=[];for(var ue=0,ye=0;ye<=a.e.r;++ye){var fe=Dn(K);ue+=nfe(fe,s[ye],l),fe[1][0].data=Rr(ye),Se[5].push({data:Vn(fe),type:2})}Se[1]=[{type:0,data:Rr(a.e.c+1)}],Se[2]=[{type:0,data:Rr(a.e.r+1)}],Se[3]=[{type:0,data:Rr(ue)}],Se[4]=[{type:0,data:Rr(a.e.r+1)}]}re.messages[0].data=Vn(Se);var Xe=Rc(H),Ce=Pc(Xe);ee.content=Ce,ee.size=ee.content.length})()}Q.data=Vn(ge)}M[3][0].data=Vn(W)}C[4][0].data=Vn(M)}v.messages[0].data=Vn(C);var Y=Rc(x),z=Pc(Y);return m.content=z,m.size=m.content.length,f}function ife(e){return function(r){for(var a=0;a!=e.length;++a){var i=e[a];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function YS(e){ife([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function sfe(e,t){return t.bookType=="ods"?eM(e,t):t.bookType=="numbers"?afe(e,t):t.bookType=="xlsb"?ofe(e,t):lfe(e,t)}function ofe(e,t){zc=1024,e&&!e.SSF&&(e.SSF=$a(pn)),e&&e.SSF&&(d0(),c0(e.SSF),t.revssf=u0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,df?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=MP.indexOf(t.bookType)>-1,i=uP();YS(t=t||{});var s=DS(),l="",d=0;if(t.cellXfs=[],Xo(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",sr(s,l,mP(e.Props,t)),i.coreprops.push(l),Pr(t.rels,2,l,br.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],f=0;f<e.SheetNames.length;++f)(e.Workbook.Sheets[f]||{}).Hidden!=2&&u.push(e.SheetNames[f]);e.Props.SheetNames=u}for(e.Props.Worksheets=e.Props.SheetNames.length,sr(s,l,xP(e.Props)),i.extprops.push(l),Pr(t.rels,3,l,br.EXT_PROPS),e.Custprops!==e.Props&&na(e.Custprops||{}).length>0&&(l="docProps/custom.xml",sr(s,l,yP(e.Custprops)),i.custprops.push(l),Pr(t.rels,4,l,br.CUST_PROPS)),d=1;d<=e.SheetNames.length;++d){var p={"!id":{}},m=e.Sheets[e.SheetNames[d-1]],x=(m||{})["!type"]||"sheet";switch(x){case"chart":default:l="xl/worksheets/sheet"+d+"."+r,sr(s,l,due(d-1,l,t,e,p)),i.sheets.push(l),Pr(t.wbrels,-1,"worksheets/sheet"+d+"."+r,br.WS[0])}if(m){var v=m["!comments"],j=!1,b="";v&&v.length>0&&(b="xl/comments"+d+"."+r,sr(s,b,hue(v,b)),i.comments.push(b),Pr(p,-1,"../comments"+d+"."+r,br.CMNT),j=!0),m["!legacy"]&&j&&sr(s,"xl/drawings/vmlDrawing"+d+".vml",RP(d,m["!comments"])),delete m["!comments"],delete m["!legacy"]}p["!id"].rId1&&sr(s,hP(l),Kc(p))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,sr(s,l,fue(t.Strings,l,t)),i.strs.push(l),Pr(t.wbrels,-1,"sharedStrings."+r,br.SST)),l="xl/workbook."+r,sr(s,l,cue(e,l)),i.workbooks.push(l),Pr(t.rels,1,l,br.WB),l="xl/theme/theme1.xml",sr(s,l,IP(e.Themes,t)),i.themes.push(l),Pr(t.wbrels,-1,"theme/theme1.xml",br.THEME),l="xl/styles."+r,sr(s,l,uue(e,l,t)),i.styles.push(l),Pr(t.wbrels,-1,"styles."+r,br.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",sr(s,l,e.vbaraw),i.vba.push(l),Pr(t.wbrels,-1,"vbaProject.bin",br.VBA)),l="xl/metadata."+r,sr(s,l,pue(l)),i.metadata.push(l),Pr(t.wbrels,-1,"metadata."+r,br.XLMETA),sr(s,"[Content_Types].xml",fP(i,t)),sr(s,"_rels/.rels",Kc(t.rels)),sr(s,"xl/_rels/workbook."+r+".rels",Kc(t.wbrels)),delete t.revssf,delete t.ssf,s}function lfe(e,t){zc=1024,e&&!e.SSF&&(e.SSF=$a(pn)),e&&e.SSF&&(d0(),c0(e.SSF),t.revssf=u0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,df?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=MP.indexOf(t.bookType)>-1,i=uP();YS(t=t||{});var s=DS(),l="",d=0;if(t.cellXfs=[],Xo(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",sr(s,l,mP(e.Props,t)),i.coreprops.push(l),Pr(t.rels,2,l,br.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],f=0;f<e.SheetNames.length;++f)(e.Workbook.Sheets[f]||{}).Hidden!=2&&u.push(e.SheetNames[f]);e.Props.SheetNames=u}e.Props.Worksheets=e.Props.SheetNames.length,sr(s,l,xP(e.Props)),i.extprops.push(l),Pr(t.rels,3,l,br.EXT_PROPS),e.Custprops!==e.Props&&na(e.Custprops||{}).length>0&&(l="docProps/custom.xml",sr(s,l,yP(e.Custprops)),i.custprops.push(l),Pr(t.rels,4,l,br.CUST_PROPS));var p=["SheetJ5"];for(t.tcid=0,d=1;d<=e.SheetNames.length;++d){var m={"!id":{}},x=e.Sheets[e.SheetNames[d-1]],v=(x||{})["!type"]||"sheet";switch(v){case"chart":default:l="xl/worksheets/sheet"+d+"."+r,sr(s,l,HP(d-1,t,e,m)),i.sheets.push(l),Pr(t.wbrels,-1,"worksheets/sheet"+d+"."+r,br.WS[0])}if(x){var j=x["!comments"],b=!1,y="";if(j&&j.length>0){var C=!1;j.forEach(function(E){E[1].forEach(function(O){O.T==!0&&(C=!0)})}),C&&(y="xl/threadedComments/threadedComment"+d+"."+r,sr(s,y,Loe(j,p,t)),i.threadedcomments.push(y),Pr(m,-1,"../threadedComments/threadedComment"+d+"."+r,br.TCMNT)),y="xl/comments"+d+"."+r,sr(s,y,PP(j)),i.comments.push(y),Pr(m,-1,"../comments"+d+"."+r,br.CMNT),b=!0}x["!legacy"]&&b&&sr(s,"xl/drawings/vmlDrawing"+d+".vml",RP(d,x["!comments"])),delete x["!comments"],delete x["!legacy"]}m["!id"].rId1&&sr(s,hP(l),Kc(m))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,sr(s,l,CP(t.Strings,t)),i.strs.push(l),Pr(t.wbrels,-1,"sharedStrings."+r,br.SST)),l="xl/workbook."+r,sr(s,l,VP(e)),i.workbooks.push(l),Pr(t.rels,1,l,br.WB),l="xl/theme/theme1.xml",sr(s,l,IP(e.Themes,t)),i.themes.push(l),Pr(t.wbrels,-1,"theme/theme1.xml",br.THEME),l="xl/styles."+r,sr(s,l,_P(e,t)),i.styles.push(l),Pr(t.wbrels,-1,"styles."+r,br.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",sr(s,l,e.vbaraw),i.vba.push(l),Pr(t.wbrels,-1,"vbaProject.bin",br.VBA)),l="xl/metadata."+r,sr(s,l,DP()),i.metadata.push(l),Pr(t.wbrels,-1,"metadata."+r,br.XLMETA),p.length>1&&(l="xl/persons/person.xml",sr(s,l,zoe(p)),i.people.push(l),Pr(t.wbrels,-1,"persons/person.xml",br.PEOPLE)),sr(s,"[Content_Types].xml",fP(i,t)),sr(s,"_rels/.rels",Kc(t.rels)),sr(s,"xl/_rels/workbook."+r+".rels",Kc(t.wbrels)),delete t.revssf,delete t.ssf,s}function cfe(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=no(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function tM(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return bh(t.file,Hr.write(e,{type:Tr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Hr.write(e,t)}function dfe(e,t){var r=$a(t||{}),a=sfe(e,r);return ufe(a,r)}function ufe(e,t){var r={},a=Tr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?Hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(t.type=="binary"||t.type=="base64")return i;i=new Uint8Array(l0(i))}return t.password&&typeof encrypt_agile<"u"?tM(encrypt_agile(i,t.password),t):t.type==="file"?bh(t.file,i):t.type=="string"?sf(i):i}function ffe(e,t){var r=t||{},a=Eue(e,r);return tM(a,r)}function ls(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return Qf(Zf(a));case"binary":return Zf(a);case"string":return e;case"file":return bh(t.file,a,"utf8");case"buffer":return Tr?lo(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ls(a,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function hfe(e,t){switch(t.type){case"base64":return Qf(e);case"binary":return e;case"string":return e;case"file":return bh(t.file,e,"binary");case"buffer":return Tr?lo(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Yp(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?Qf(r):t.type=="string"?sf(r):r;case"file":return bh(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function rM(e,t){$ae(),Jde(e);var r=$a(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=rM(e,r);return r.type="array",l0(a)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=e.SheetNames.indexOf(r.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ls(Cue(e,r),r);case"slk":case"sylk":return ls(Yse.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"htm":case"html":return ls(QP(e.Sheets[e.SheetNames[i]],r),r);case"txt":return hfe(aM(e.Sheets[e.SheetNames[i]],r),r);case"csv":return ls(XS(e.Sheets[e.SheetNames[i]],r),r,"\uFEFF");case"dif":return ls(Xse.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"dbf":return Yp(Vse.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"prn":return ls(Qse.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"rtf":return ls(aoe.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"eth":return ls(TP.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"fods":return ls(eM(e,r),r);case"wk1":return Yp(y3.sheet_to_wk1(e.Sheets[e.SheetNames[i]],r),r);case"wk3":return Yp(y3.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Yp(XP(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),ffe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return dfe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function pfe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function nM(e,t,r){var a={};return a.type="file",a.file=t,pfe(a),rM(e,a)}function mfe(e,t,r,a,i,s,l,d){var u=ta(r),f=d.defval,p=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),m=!0,x=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:r,enumerable:!1})}catch{x.__rowNum__=r}else x.__rowNum__=r;if(!l||e[r])for(var v=t.s.c;v<=t.e.c;++v){var j=l?e[r][v]:e[a[v]+u];if(j===void 0||j.t===void 0){if(f===void 0)continue;s[v]!=null&&(x[s[v]]=f);continue}var b=j.v;switch(j.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+j.t)}if(s[v]!=null){if(b==null)if(j.t=="e"&&b===null)x[s[v]]=null;else if(f!==void 0)x[s[v]]=f;else if(p&&b===null)x[s[v]]=null;else continue;else x[s[v]]=p&&(j.t!=="n"||j.t==="n"&&d.rawNumbers!==!1)?b:ao(j,b,d);b!=null&&(m=!1)}}return{row:x,isempty:m}}function jg(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,i=1,s=[],l=0,d="",u={s:{r:0,c:0},e:{r:0,c:0}},f=t||{},p=f.range!=null?f.range:e["!ref"];switch(f.header===1?a=1:f.header==="A"?a=2:Array.isArray(f.header)?a=3:f.header==null&&(a=0),typeof p){case"string":u=tn(p);break;case"number":u=tn(e["!ref"]),u.s.r=p;break;default:u=p}a>0&&(i=0);var m=ta(u.s.r),x=[],v=[],j=0,b=0,y=Array.isArray(e),C=u.s.r,E=0,O={};y&&!e[C]&&(e[C]=[]);var S=f.skipHidden&&e["!cols"]||[],T=f.skipHidden&&e["!rows"]||[];for(E=u.s.c;E<=u.e.c;++E)if(!(S[E]||{}).hidden)switch(x[E]=ua(E),r=y?e[C][E]:e[x[E]+m],a){case 1:s[E]=E-u.s.c;break;case 2:s[E]=x[E];break;case 3:s[E]=f.header[E-u.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),d=l=ao(r,null,f),b=O[l]||0,!b)O[l]=1;else{do d=l+"_"+b++;while(O[d]);O[l]=b,O[d]=1}s[E]=d}for(C=u.s.r+i;C<=u.e.r;++C)if(!(T[C]||{}).hidden){var k=mfe(e,u,C,x,a,s,y,f);(k.isempty===!1||(a===1?f.blankrows!==!1:f.blankrows))&&(v[j++]=k.row)}return v.length=j,v}var C3=/"/g;function gfe(e,t,r,a,i,s,l,d){for(var u=!0,f=[],p="",m=ta(r),x=t.s.c;x<=t.e.c;++x)if(a[x]){var v=d.dense?(e[r]||[])[x]:e[a[x]+m];if(v==null)p="";else if(v.v!=null){u=!1,p=""+(d.rawNumbers&&v.t=="n"?v.v:ao(v,null,d));for(var j=0,b=0;j!==p.length;++j)if((b=p.charCodeAt(j))===i||b===s||b===34||d.forceQuotes){p='"'+p.replace(C3,'""')+'"';break}p=="ID"&&(p='"ID"')}else v.f!=null&&!v.F?(u=!1,p="="+v.f,p.indexOf(",")>=0&&(p='"'+p.replace(C3,'""')+'"')):p="";f.push(p)}return d.blankrows===!1&&u?null:f.join(l)}function XS(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var i=tn(e["!ref"]),s=a.FS!==void 0?a.FS:",",l=s.charCodeAt(0),d=a.RS!==void 0?a.RS:`
`,u=d.charCodeAt(0),f=new RegExp((s=="|"?"\\|":s)+"+$"),p="",m=[];a.dense=Array.isArray(e);for(var x=a.skipHidden&&e["!cols"]||[],v=a.skipHidden&&e["!rows"]||[],j=i.s.c;j<=i.e.c;++j)(x[j]||{}).hidden||(m[j]=ua(j));for(var b=0,y=i.s.r;y<=i.e.r;++y)(v[y]||{}).hidden||(p=gfe(e,i,y,m,l,u,s,a),p!=null&&(a.strip&&(p=p.replace(f,"")),(p||a.blankrows!==!1)&&r.push((b++?d:"")+p)));return delete a.dense,r.join("")}function aM(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=XS(e,t);return r}function xfe(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var i=tn(e["!ref"]),s="",l=[],d,u=[],f=Array.isArray(e);for(d=i.s.c;d<=i.e.c;++d)l[d]=ua(d);for(var p=i.s.r;p<=i.e.r;++p)for(s=ta(p),d=i.s.c;d<=i.e.c;++d)if(t=l[d]+s,r=f?(e[p]||[])[d]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}u[u.length]=t+"="+a}return u}function iM(e,t,r){var a=r||{},i=+!a.skipHeader,s=e||{},l=0,d=0;if(s&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var u=typeof a.origin=="string"?Un(a.origin):a.origin;l=u.r,d=u.c}var f,p={s:{c:0,r:0},e:{c:d,r:l+t.length-1+i}};if(s["!ref"]){var m=tn(s["!ref"]);p.e.c=Math.max(p.e.c,m.e.c),p.e.r=Math.max(p.e.r,m.e.r),l==-1&&(l=m.e.r+1,p.e.r=l+t.length-1+i)}else l==-1&&(l=0,p.e.r=t.length-1+i);var x=a.header||[],v=0;t.forEach(function(b,y){na(b).forEach(function(C){(v=x.indexOf(C))==-1&&(x[v=x.length]=C);var E=b[C],O="z",S="",T=Br({c:d+v,r:l+y+i});f=rh(s,T),E&&typeof E=="object"&&!(E instanceof Date)?s[T]=E:(typeof E=="number"?O="n":typeof E=="boolean"?O="b":typeof E=="string"?O="s":E instanceof Date?(O="d",a.cellDates||(O="n",E=za(E)),S=a.dateNF||pn[14]):E===null&&a.nullError&&(O="e",E=0),f?(f.t=O,f.v=E,delete f.w,delete f.R,S&&(f.z=S)):s[T]=f={t:O,v:E},S&&(f.z=S))})}),p.e.c=Math.max(p.e.c,d+x.length-1);var j=ta(l);if(i)for(v=0;v<x.length;++v)s[ua(v+d)+j]={t:"s",v:x[v]};return s["!ref"]=Cn(p),s}function yfe(e,t){return iM(null,e,t)}function rh(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Un(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?rh(e,Br(t)):rh(e,Br({r:t,c:r||0}))}function vfe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function bfe(){return{SheetNames:[],Sheets:{}}}function jfe(e,t,r,a){var i=1;if(!r)for(;i<=65535&&e.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var l=s&&s[1]||r;for(++i;i<=65535&&e.SheetNames.indexOf(r=l+i)!=-1;++i);}if(KP(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function wfe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=vfe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function Sfe(e,t){return e.z=t,e}function sM(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Nfe(e,t,r){return sM(e,"#"+t,r)}function Tfe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Cfe(e,t,r,a){for(var i=typeof t!="string"?t:tn(t),s=typeof t=="string"?t:Cn(t),l=i.s.r;l<=i.e.r;++l)for(var d=i.s.c;d<=i.e.c;++d){var u=rh(e,l,d);u.t="n",u.F=s,delete u.v,l==i.s.r&&d==i.s.c&&(u.f=r,a&&(u.D=!0))}return e}var Xc={encode_col:ua,encode_row:ta,encode_cell:Br,encode_range:Cn,decode_col:LS,decode_row:FS,split_cell:$ie,decode_cell:Un,decode_range:li,format_cell:ao,sheet_add_aoa:iP,sheet_add_json:iM,sheet_add_dom:JP,aoa_to_sheet:Ld,json_to_sheet:yfe,table_to_sheet:ZP,table_to_book:Xue,sheet_to_csv:XS,sheet_to_txt:aM,sheet_to_json:jg,sheet_to_html:QP,sheet_to_formulae:xfe,sheet_to_row_object_array:jg,sheet_get_cell:rh,book_new:bfe,book_append_sheet:jfe,book_set_sheet_visibility:wfe,cell_set_number_format:Sfe,cell_set_hyperlink:sM,cell_set_internal_link:Nfe,cell_add_comment:Tfe,sheet_set_array_formula:Cfe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const ml="https://hotelvirat.com/api/v1/hotel",oM=e=>{if(!e)return null;if(e.startsWith("http"))return e;const t="https://hotelvirat.com";let r=e.replace(/\\/g,"/");r.startsWith("/")&&(r=r.substring(1));const a=`${t}/${r}`;return console.log("Image URL:",e,"->",a),a},lM=[{key:"tv",label:"TV"},{key:"ac",label:"AC"},{key:"wifi",label:"WiFi"},{key:"minibar",label:"Mini Bar"},{key:"roomService",label:"Room Service"},{key:"balcony",label:"Balcony"},{key:"bathtub",label:"Bathtub"},{key:"shower",label:"Shower"},{key:"hairDryer",label:"Hair Dryer"},{key:"safe",label:"Safe"},{key:"telephone",label:"Telephone"},{key:"coffeeMaker",label:"Coffee Maker"},{key:"iron",label:"Iron"},{key:"workspace",label:"Workspace"},{key:"parking",label:"Parking"}],Afe=["Single","Double","Suite","Deluxe","Family","Presidential"],Efe=["First Floor","Second Floor"],Ofe=({room:e,branches:t,onClose:r,onSave:a})=>{var O;const[i,s]=N.useState({branchId:((O=e==null?void 0:e.branchId)==null?void 0:O._id)||(e==null?void 0:e.branchId)||"",floor:(e==null?void 0:e.floor)||"First Floor",roomType:(e==null?void 0:e.roomType)||"Single",price:(e==null?void 0:e.price)||"",description:(e==null?void 0:e.description)||"",roomNumber:(e==null?void 0:e.roomNumber)||"",amenities:(e==null?void 0:e.amenities)||{},capacity:(e==null?void 0:e.capacity)||{adults:2,children:0},isAvailable:(e==null?void 0:e.isAvailable)!==!1}),[l,d]=N.useState([]),[u,f]=N.useState((e==null?void 0:e.images)||[]),[p,m]=N.useState(!1),[x,v]=N.useState(""),j=S=>{const{name:T,value:k,type:D,checked:F}=S.target;if(T.startsWith("amenities.")){const B=T.split(".")[1];s(M=>({...M,amenities:{...M.amenities,[B]:F}}))}else if(T.startsWith("capacity.")){const B=T.split(".")[1];s(M=>({...M,capacity:{...M.capacity,[B]:Number(k)}}))}else s(B=>({...B,[T]:D==="checkbox"?F:k}))},b=S=>{const T=Array.from(S.target.files);if(u.length+l.length+T.length>5){v("Maximum 5 images allowed");return}v(""),d(D=>[...D,...T])},y=S=>{d(T=>T.filter((k,D)=>D!==S))},C=S=>{f(T=>T.filter((k,D)=>D!==S))},E=async S=>{S.preventDefault(),m(!0),v("");try{const T=new FormData;T.append("branchId",i.branchId),T.append("floor",i.floor),T.append("roomType",i.roomType),T.append("price",i.price),T.append("description",i.description),T.append("roomNumber",i.roomNumber),T.append("amenities",JSON.stringify(i.amenities)),T.append("capacity",JSON.stringify(i.capacity)),T.append("isAvailable",i.isAvailable),T.append("existingImages",JSON.stringify(u)),l.forEach(k=>T.append("images",k)),await a(T),r()}catch(T){v(T.message||"Failed to save room")}finally{m(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"700px",maxHeight:"90vh",overflow:"auto"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:e?"Edit Room":"Add New Room"}),n.jsx("button",{className:"modal-close",onClick:r,children:""})]}),n.jsxs("form",{onSubmit:E,children:[n.jsxs("div",{className:"modal-body",children:[x&&n.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{children:x})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Room Images (Max 5)"}),n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"10px"},children:[u.map((S,T)=>n.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[n.jsx("img",{src:oM(S),alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}),n.jsx("button",{type:"button",onClick:()=>C(T),style:{position:"absolute",top:"-5px",right:"-5px",background:"#dc2626",border:"none",borderRadius:"50%",width:"24px",height:"24px",color:"white",cursor:"pointer"},children:n.jsx(ha,{size:14})})]},`existing-${T}`)),l.map((S,T)=>n.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[n.jsx("img",{src:URL.createObjectURL(S),alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}),n.jsx("button",{type:"button",onClick:()=>y(T),style:{position:"absolute",top:"-5px",right:"-5px",background:"#dc2626",border:"none",borderRadius:"50%",width:"24px",height:"24px",color:"white",cursor:"pointer"},children:n.jsx(ha,{size:14})})]},`new-${T}`)),u.length+l.length<5&&n.jsxs("label",{style:{width:"100px",height:"100px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:[n.jsx(Ro,{size:20}),n.jsx("span",{style:{fontSize:"12px"},children:"Add"}),n.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:b,style:{display:"none"}})]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Branch ",n.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),n.jsxs("select",{name:"branchId",className:"form-input",value:i.branchId,onChange:j,required:!0,children:[n.jsx("option",{value:"",children:"Select Branch"}),t.map(S=>n.jsx("option",{value:S._id,children:S.name},S._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Floor ",n.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),n.jsx("select",{name:"floor",className:"form-input",value:i.floor,onChange:j,required:!0,children:Efe.map(S=>n.jsx("option",{value:S,children:S},S))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Room Type"}),n.jsx("select",{name:"roomType",className:"form-input",value:i.roomType,onChange:j,children:Afe.map(S=>n.jsx("option",{value:S,children:S},S))})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Basic Price (without GST) ",n.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),n.jsx("input",{type:"number",name:"price",className:"form-input",value:i.price,onChange:j,required:!0,placeholder:"Enter price without GST"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Room Number"}),n.jsx("input",{type:"text",name:"roomNumber",className:"form-input",value:i.roomNumber,onChange:j})]}),n.jsx("div",{className:"form-group",children:n.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("input",{type:"checkbox",name:"isAvailable",checked:i.isAvailable,onChange:j}),"Available"]})})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{name:"description",className:"form-textarea",value:i.description,onChange:j,rows:"2"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Adults Capacity"}),n.jsx("input",{type:"number",name:"capacity.adults",className:"form-input",value:i.capacity.adults,onChange:j,min:"1"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Children Capacity"}),n.jsx("input",{type:"number",name:"capacity.children",className:"form-input",value:i.capacity.children,onChange:j,min:"0"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Amenities"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:lM.map(S=>n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",name:`amenities.${S.key}`,checked:i.amenities[S.key]||!1,onChange:j}),S.label]},S.key))})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:r,disabled:p,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Saving...":e?"Update Room":"Add Room"})]})]})]})})},_fe=({room:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),s=async()=>{i(!0);try{await r(e._id),t()}catch(l){console.error(l)}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Room"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsxs("strong",{children:[e.floor," - Room #",e.roomNumber||"N/A"]}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{className:"btn",style:{backgroundColor:"#dc2626",color:"white"},onClick:s,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},kfe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState(""),[l,d]=N.useState(""),[u,f]=N.useState(!1),[p,m]=N.useState(null),[x,v]=N.useState(!1),[j,b]=N.useState(null),[y,C]=N.useState(!0),[E,O]=N.useState(""),[S,T]=N.useState(""),[k,D]=N.useState({}),[F,B]=N.useState([]),[M,L]=N.useState(!1);N.useEffect(()=>{Q(),ge(),I()},[]);const A=async H=>{try{const re=await Yt.get(`${ml}/room-booking`),le=Array.isArray(re.data)?re.data:[],pe={};le.forEach(Se=>{var K;if(Se.status!=="cancelled"&&Se.status!=="checked-out"){const ue=((K=Se.roomId)==null?void 0:K._id)||Se.roomId;ue&&(pe[ue]=Se)}}),D(pe)}catch(re){console.error("Error fetching room bookings:",re)}},U=H=>H?new Date(H).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"",P=H=>H?new Date(H).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"",I=async()=>{try{console.log(" Fetching all bookings for export...");const re=(await Yt.get(`${ml}/room-booking`)).data||[];console.log(" Fetched bookings for export:",re.length),B(re)}catch(H){console.error("Error fetching all bookings:",H),O("Failed to load booking data for export"),setTimeout(()=>O(""),3e3),B([])}},R=(H,re=32e3)=>{if(!H)return"";const le=String(H);return le.length<=re?le:le.substring(0,re)+"..."},W=()=>{if(!M){L(!0);try{let H=[];F.length===0?H=[{"S.No":"No bookings found","Booking Date":"","Room Number":"","Room Type":"",Floor:"",Branch:"","Guest Name":"","Guest Phone":"","Guest Email":"","Guest GSTIN":"","Check-in Date":"","Check-in Time":"","Check-out Date":"","Check-out Time":"",Nights:"","Base Amount ()":"","GST Type":"","CGST ()":"","SGST ()":"","IGST ()":"","Total GST ()":"","Total Amount ()":"","Amount Paid ()":"","Balance Due ()":"",Status:"","Payment Status":""}]:H=F.map((ye,fe)=>{var Ae,Ve,te,ce,X,se;const Xe=(ye.cgst||0)+(ye.sgst||0)+(ye.igst||0),Ce=ye.totalPrice||0,Le=ye.amountPaid||0,ne=Ce-Le;return{"S.No":fe+1,"Booking Date":R(P(ye.createdAt)),"Room Number":R(((Ae=ye.roomId)==null?void 0:Ae.roomNumber)||"N/A"),"Room Type":R(((Ve=ye.roomId)==null?void 0:Ve.roomType)||"N/A"),Floor:R(((te=ye.roomId)==null?void 0:te.floor)||"N/A"),Branch:R(((ce=ye.branchId)==null?void 0:ce.name)||"N/A"),"Guest Name":R(ye.userName||""),"Guest Phone":R(ye.userPhone||""),"Guest Email":R(ye.userEmail||""),"Guest GSTIN":R(ye.guestGstNumber||""),"Check-in Date":R(P(ye.checkInDate)),"Check-in Time":R(ye.checkInTime||""),"Check-out Date":R(P(ye.checkOutDate)),"Check-out Time":R(ye.checkOutTime||""),Nights:ye.nights||1,"Base Amount ()":(ye.baseAmount||0).toFixed(2),"GST Type":R(ye.gstType==="gst"?"CGST+SGST (5%)":ye.gstType==="igst"?"IGST (5%)":"No GST"),"CGST ()":(ye.cgst||0).toFixed(2),"SGST ()":(ye.sgst||0).toFixed(2),"IGST ()":(ye.igst||0).toFixed(2),"Total GST ()":Xe.toFixed(2),"Total Amount ()":Ce.toFixed(2),"Amount Paid ()":Le.toFixed(2),"Balance Due ()":ne.toFixed(2),Status:R(((X=ye.status)==null?void 0:X.toUpperCase())||""),"Payment Status":R(((se=ye.paymentStatus)==null?void 0:se.toUpperCase())||"")}});const re=Xc.json_to_sheet(H),le=Xc.book_new();Xc.book_append_sheet(le,re,"Room Bookings");const pe=[{wch:5},{wch:12},{wch:12},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:25},{wch:18},{wch:12},{wch:12},{wch:12},{wch:12},{wch:8},{wch:15},{wch:15},{wch:12},{wch:12},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15},{wch:12},{wch:15}];re["!cols"]=pe;const Se=new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-"),K=F.length===0?`Room_Bookings_Empty_${Se}.xlsx`:`Room_Bookings_${Se}.xlsx`;nM(le,K);const ue=F.length===0?"Empty Excel template exported successfully!":`Excel exported successfully! (${F.length} bookings)`;T(ue),setTimeout(()=>T(""),3e3)}catch(H){console.error("Error exporting to Excel:",H),O(`Failed to export Excel: ${H.message}`),setTimeout(()=>O(""),5e3)}finally{L(!1)}}},Q=async()=>{try{const H=await Yt.get(`${ml}/branch`);a(H.data)}catch(H){console.error("Error fetching branches:",H)}},ge=async()=>{C(!0);try{const H=await Yt.get(`${ml}/room`),re=Array.isArray(H.data)?H.data:[];t(re),re.length>0&&A(re)}catch{O("Failed to load rooms"),t([])}finally{C(!1)}},q=Array.isArray(e)?e.filter(H=>{var pe,Se,K,ue;const re=((pe=H.floor)==null?void 0:pe.toLowerCase().includes(i.toLowerCase()))||((Se=H.roomNumber)==null?void 0:Se.toLowerCase().includes(i.toLowerCase()))||((K=H.roomType)==null?void 0:K.toLowerCase().includes(i.toLowerCase())),le=!l||((ue=H.branchId)==null?void 0:ue._id)===l||H.branchId===l;return re&&le}):[],Y=async H=>{var re,le;try{const pe={headers:{"Content-Type":"multipart/form-data"}};let Se;p?(Se=await Yt.put(`${ml}/room/${p._id}`,H,pe),t(Array.isArray(e)?e.map(K=>K._id===p._id?Se.data:K):[Se.data]),T("Room updated successfully")):(Se=await Yt.post(`${ml}/room`,H,pe),t(Array.isArray(e)?[...e,Se.data]:[Se.data]),T("Room created successfully")),setTimeout(()=>T(""),3e3)}catch(pe){throw new Error(((le=(re=pe.response)==null?void 0:re.data)==null?void 0:le.message)||"Failed to save room")}},z=async H=>{try{await Yt.delete(`${ml}/room/${H}`),t(Array.isArray(e)?e.filter(re=>re._id!==H):[]),T("Room deleted successfully"),setTimeout(()=>T(""),3e3)}catch{throw new Error("Failed to delete room")}},ee=H=>H?lM.filter(re=>H[re.key]).map(re=>re.label):[];return n.jsxs("div",{className:"rooms-page",children:[S&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:S}),n.jsx("button",{onClick:()=>T(""),children:n.jsx("span",{children:""})})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Rooms"}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsxs("button",{className:"btn",onClick:H=>{H.preventDefault(),H.stopPropagation(),W()},disabled:M,style:{backgroundColor:"#059669",color:"white",display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:M?"not-allowed":"pointer",opacity:M?.6:1},title:F.length===0?"Click to export empty template":`Export ${F.length} bookings to Excel`,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:M?"Exporting...":`Export Excel (${F.length})`})]}),n.jsxs("button",{className:"btn btn-primary",onClick:()=>{m(null),f(!0)},children:[n.jsx(Ni,{size:16}),n.jsx("span",{children:"Add Room"})]})]})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search rooms...",className:"search-input",value:i,onChange:H=>s(H.target.value)})]}),n.jsxs("select",{className:"form-input",style:{width:"200px"},value:l,onChange:H=>d(H.target.value),children:[n.jsx("option",{value:"",children:"All Branches"}),r.map(H=>n.jsx("option",{value:H._id,children:H.name},H._id))]})]}),E&&n.jsxs("div",{style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:E})]}),y?n.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"Loading rooms..."})}):n.jsx("div",{className:"grid-container",children:q.length>0?q.map(H=>{var re,le,pe,Se,K,ue,ye;return n.jsxs("div",{className:"grid-item",children:[n.jsx("div",{className:"grid-item-image-container",style:{position:"relative"},children:((re=H.images)==null?void 0:re.length)>0?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:oM(H.images[0]),alt:H.floor,className:"grid-item-image",onError:fe=>{console.log("Image failed to load:",fe.target.src),fe.target.style.display="none",fe.target.nextSibling.style.display="flex"}}),n.jsxs("div",{style:{display:"none",width:"100%",height:"200px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[n.jsx(cs,{size:24}),n.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"Image Not Found"})]})]}):n.jsxs("div",{style:{display:"flex",width:"100%",height:"200px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[n.jsx(cs,{size:24}),n.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"No Image"})]})}),n.jsxs("div",{className:"grid-item-content",children:[n.jsxs("h3",{className:"grid-item-title",children:[H.floor," - Room #",H.roomNumber||"N/A"]}),n.jsx("p",{style:{fontSize:"14px",color:"#6b7280"},children:((le=H.branchId)==null?void 0:le.name)||"No Branch"}),n.jsxs("p",{style:{fontSize:"14px",color:"#6b7280"},children:["Type: ",H.roomType]}),n.jsxs("p",{style:{fontSize:"16px",fontWeight:"600",color:"#059669"},children:["",H.price," ",n.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontWeight:"normal"},children:"(Basic)"})]}),k[H._id]?n.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#fef3c7",borderRadius:"6px",borderLeft:"3px solid #f59e0b"},children:[n.jsx("p",{style:{fontSize:"12px",fontWeight:"600",color:"#92400e",marginBottom:"4px"},children:" BOOKED"}),n.jsxs("p",{style:{fontSize:"12px",color:"#78350f"},children:[n.jsx("strong",{children:"Guest:"})," ",k[H._id].userName]}),n.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[n.jsx("strong",{children:"Phone:"})," ",k[H._id].userPhone||"N/A"]}),n.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[n.jsx("strong",{children:"Check-in:"})," ",U(k[H._id].checkInDate)," at ",k[H._id].checkInTime]}),n.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[n.jsx("strong",{children:"Check-out:"})," ",U(k[H._id].checkOutDate)," at ",k[H._id].checkOutTime]}),n.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[n.jsx("strong",{children:"Base:"})," ",(pe=k[H._id].baseAmount)==null?void 0:pe.toFixed(2)," (",k[H._id].nights," nights)"]}),k[H._id].gstType&&k[H._id].gstType!=="none"&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[n.jsx("strong",{children:"GST:"})," ",k[H._id].gstType==="gst"?`CGST ${(Se=k[H._id].cgst)==null?void 0:Se.toFixed(2)} + SGST ${(K=k[H._id].sgst)==null?void 0:K.toFixed(2)}`:`IGST ${(ue=k[H._id].igst)==null?void 0:ue.toFixed(2)}`]}),k[H._id].guestGstNumber&&n.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[n.jsx("strong",{children:"Guest GSTIN:"})," ",k[H._id].guestGstNumber]})]}),n.jsxs("p",{style:{fontSize:"11px",color:"#78350f",fontWeight:"600"},children:[n.jsx("strong",{children:"Total:"})," ",(ye=k[H._id].totalPrice)==null?void 0:ye.toFixed(2)]}),n.jsxs("p",{style:{fontSize:"10px",color:"#92400e",marginTop:"4px"},children:["Status: ",n.jsx("span",{style:{textTransform:"uppercase",fontWeight:"600"},children:k[H._id].status})]})]}):n.jsx("p",{style:{fontSize:"12px",color:H.isAvailable?"#059669":"#dc2626",marginTop:"8px"},children:H.isAvailable?" Available":"Not Available"}),n.jsxs("div",{style:{marginTop:"8px",display:"flex",flexWrap:"wrap",gap:"4px"},children:[ee(H.amenities).slice(0,4).map(fe=>n.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#e5e7eb",borderRadius:"4px"},children:fe},fe)),ee(H.amenities).length>4&&n.jsxs("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#e5e7eb",borderRadius:"4px"},children:["+",ee(H.amenities).length-4]})]})]}),n.jsxs("div",{className:"grid-item-actions",style:{display:"flex",gap:"8px",padding:"12px",borderTop:"1px solid #e5e7eb"},children:[n.jsxs("button",{className:"btn-icon",onClick:()=>{m(H),f(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:fe=>fe.target.style.backgroundColor="#2563eb",onMouseLeave:fe=>fe.target.style.backgroundColor="#3b82f6",children:[n.jsx(Aa,{size:16}),n.jsx("span",{children:"Edit"})]}),n.jsxs("button",{className:"btn-icon-danger",onClick:()=>{b(H),v(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:fe=>fe.target.style.backgroundColor="#dc2626",onMouseLeave:fe=>fe.target.style.backgroundColor="#ef4444",children:[n.jsx(La,{size:16}),n.jsx("span",{children:"Delete"})]})]})]},H._id)}):n.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px"},children:[n.jsx(cs,{size:48,style:{color:"#9ca3af",marginBottom:"16px"}}),n.jsx("p",{style:{color:"#6b7280"},children:"No rooms found"})]})}),u&&n.jsx(Ofe,{room:p,branches:r,onClose:()=>f(!1),onSave:Y}),x&&j&&n.jsx(_fe,{room:j,onClose:()=>v(!1),onConfirm:z})]})},Ife="https://hotelvirat.com/api/v1/hotel",Vu=Yt.create({baseURL:Ife,headers:{"Content-Type":"application/json"}}),Dfe=()=>{var H,re,le,pe,Se,K,ue,ye,fe,Xe,Ce,Le;const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState(!0),[u,f]=N.useState(""),[p,m]=N.useState(""),[x,v]=N.useState(""),[j,b]=N.useState(""),[y,C]=N.useState(""),[E,O]=N.useState(""),[S,T]=N.useState(!1),[k,D]=N.useState(null),[F,B]=N.useState(!1),[M,L]=N.useState(null);N.useEffect(()=>{A(),U(),P()},[]);const A=async()=>{d(!0),f("");try{const ne=await Vu.get("/room-booking");let Ae=ne.data;ne.data.bookings?Ae=ne.data.bookings:ne.data.data&&(Ae=ne.data.data);const Ve=Array.isArray(Ae)?Ae:[];t(Ve)}catch(ne){console.error("Error fetching bookings:",ne),f("Failed to load bookings"),t([])}finally{d(!1)}},U=async()=>{try{const ne=await Vu.get("/room");let Ae=ne.data;ne.data.rooms?Ae=ne.data.rooms:ne.data.data&&(Ae=ne.data.data);const Ve=Array.isArray(Ae)?Ae:[];a(Ve)}catch(ne){console.error("Error fetching rooms:",ne),a([])}},P=async()=>{try{const ne=await Vu.get("/branch");let Ae=ne.data;ne.data.branches?Ae=ne.data.branches:ne.data.data&&(Ae=ne.data.data);const Ve=Array.isArray(Ae)?Ae:[];s(Ve)}catch(ne){console.error("Error fetching branches:",ne),s([])}},I=async(ne,Ae)=>{try{const Ve=await Vu.get(`/room-booking/slots/${ne}?date=${Ae}`);D(Ve.data),T(!0)}catch(Ve){console.error("Error fetching time slots:",Ve),alert("Failed to load time slots")}},R=async(ne,Ae)=>{try{await Vu.put(`/room-booking/${ne}/status`,{status:Ae}),A(),alert(`Booking ${Ae} successfully`)}catch(Ve){console.error("Error updating booking status:",Ve),alert("Failed to update booking status")}},W=ne=>{L(ne),B(!0)},Q=ne=>ne?new Date(ne).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",ge=ne=>{if(!ne)return"N/A";const[Ae,Ve]=ne.split(":"),te=parseInt(Ae),ce=te>=12?"PM":"AM";return`${te===0?12:te>12?te-12:te}:${Ve} ${ce}`},q=ne=>{switch(ne){case"confirmed":return{color:"#2563eb",backgroundColor:"#dbeafe"};case"checked-in":return{color:"#059669",backgroundColor:"#d1fae5"};case"checked-out":return{color:"#6b7280",backgroundColor:"#f3f4f6"};case"cancelled":return{color:"#dc2626",backgroundColor:"#fee2e2"};case"cancel-requested":return{color:"#d97706",backgroundColor:"#fef3c7"};default:return{color:"#6b7280",backgroundColor:"#f3f4f6"}}},Y=ne=>ne.gstOption==="withoutGST"?"Without GST":ne.gstOption==="withGST"?`With GST (CGST: ${ne.cgst||0}, SGST: ${ne.sgst||0})`:ne.gstOption==="withIGST"?`With IGST (${ne.igst||0})`:"N/A",z=Array.isArray(e)?e.filter(ne=>{var se,J,Ne,Ge,tt,$e,Ze,Oe;const Ae=((se=ne.userName)==null?void 0:se.toLowerCase().includes(p.toLowerCase()))||((J=ne.userPhone)==null?void 0:J.includes(p))||((Ge=(Ne=ne.roomId)==null?void 0:Ne.roomNumber)==null?void 0:Ge.toString().includes(p))||(($e=(tt=ne.roomId)==null?void 0:tt.floor)==null?void 0:$e.toLowerCase().includes(p.toLowerCase())),Ve=!x||((Ze=ne.branchId)==null?void 0:Ze._id)===x,te=!j||ne.status===j,ce=!y||((Oe=ne.roomId)==null?void 0:Oe._id)===y,X=!E||(ne.checkInDate?new Date(ne.checkInDate).toISOString().split("T")[0]===E:!1);return Ae&&Ve&&te&&ce&&X}):[],ee=()=>{const ne=[];for(let Ae=0;Ae<24;Ae++){const Ve=`${Ae.toString().padStart(2,"0")}:00`,te=Ae===0?"12:00 AM":Ae<12?`${Ae}:00 AM`:Ae===12?"12:00 PM":`${Ae-12}:00 PM`;ne.push({value:Ve,display:te})}return ne};return n.jsxs("div",{style:{padding:"24px",backgroundColor:"#f9fafb",minHeight:"100vh"},children:[n.jsxs("div",{style:{maxWidth:"1280px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsx("h1",{style:{fontSize:"30px",fontWeight:"bold",color:"#111827",margin:0},children:"Room Bookings"}),n.jsxs("button",{onClick:A,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:ne=>ne.target.style.backgroundColor="#1d4ed8",onMouseOut:ne=>ne.target.style.backgroundColor="#2563eb",children:[n.jsx(fs,{size:20}),"Refresh"]})]}),n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",padding:"24px",marginBottom:"24px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[n.jsxs("div",{style:{position:"relative"},children:[n.jsx(wr,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"},size:20}),n.jsx("input",{type:"text",placeholder:"Search by name, phone, room...",value:p,onChange:ne=>m(ne.target.value),style:{width:"100%",paddingLeft:"40px",paddingRight:"16px",paddingTop:"8px",paddingBottom:"8px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},onFocus:ne=>{ne.target.style.borderColor="#3b82f6",ne.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:ne=>{ne.target.style.borderColor="#d1d5db",ne.target.style.boxShadow="none"}})]}),n.jsxs("select",{value:x,onChange:ne=>v(ne.target.value),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",backgroundColor:"white"},children:[n.jsx("option",{value:"",children:"All Branches"}),Array.isArray(i)?i.map(ne=>n.jsx("option",{value:ne._id,children:ne.name},ne._id)):[]]}),n.jsxs("select",{value:j,onChange:ne=>b(ne.target.value),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",backgroundColor:"white"},children:[n.jsx("option",{value:"",children:"All Status"}),n.jsx("option",{value:"confirmed",children:"Confirmed"}),n.jsx("option",{value:"checked-in",children:"Checked In"}),n.jsx("option",{value:"checked-out",children:"Checked Out"}),n.jsx("option",{value:"cancelled",children:"Cancelled"}),n.jsx("option",{value:"cancel-requested",children:"Cancel Requested"})]}),n.jsxs("select",{value:y,onChange:ne=>C(ne.target.value),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",backgroundColor:"white"},children:[n.jsx("option",{value:"",children:"All Rooms"}),Array.isArray(r)?r.map(ne=>n.jsxs("option",{value:ne._id,children:[ne.floor," - Room ",ne.roomNumber||"N/A"]},ne._id)):[]]}),n.jsx("input",{type:"date",value:E,onChange:ne=>O(ne.target.value),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none"}})]}),y&&E&&n.jsx("div",{style:{marginTop:"16px"},children:n.jsxs("button",{onClick:()=>I(y,E),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:ne=>ne.target.style.backgroundColor="#047857",onMouseOut:ne=>ne.target.style.backgroundColor="#059669",children:[n.jsx(ds,{size:20}),"View Time Slots for Selected Room & Date"]})})]}),u&&n.jsxs("div",{style:{backgroundColor:"#fef2f2",border:"1px solid #fca5a5",color:"#dc2626",padding:"12px 16px",borderRadius:"8px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:20}),u]}),l?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"48px 0"},children:n.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid #e5e7eb",borderTop:"3px solid #2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):n.jsx(n.Fragment,{children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:[n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{style:{backgroundColor:"#f9fafb"},children:n.jsxs("tr",{children:[n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Guest"}),n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Room"}),n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Check-in"}),n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Check-out"}),n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"GST Details"}),n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Amount"}),n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Status"}),n.jsx("th",{style:{padding:"12px 24px",textAlign:"left",fontSize:"12px",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),n.jsx("tbody",{style:{backgroundColor:"white"},children:z.map((ne,Ae)=>{var Ve,te,ce,X;return n.jsxs("tr",{style:{borderTop:Ae>0?"1px solid #e5e7eb":"none"},children:[n.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{style:{flexShrink:0,width:"40px",height:"40px"},children:n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#dbeafe",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Ol,{style:{width:"20px",height:"20px",color:"#2563eb"}})})}),n.jsxs("div",{style:{marginLeft:"16px"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:"#111827"},children:ne.userName}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Ai,{size:12}),ne.userPhone]}),ne.userEmail&&n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Js,{size:12}),ne.userEmail]}),(()=>{let se=ne.guestGstNumber;if(ne.guestGstNumber&&ne.guestGstNumber.startsWith("DOCS:"))try{const J=ne.guestGstNumber.substring(5);se=JSON.parse(J).gst||""}catch{se=""}return se?n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("span",{style:{fontSize:"12px"},children:"GST:"}),se]}):null})()]})]})}),n.jsxs("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:[n.jsxs("div",{style:{fontSize:"14px",fontWeight:"500",color:"#111827"},children:[(Ve=ne.roomId)==null?void 0:Ve.floor," - Room ",((te=ne.roomId)==null?void 0:te.roomNumber)||"N/A"]}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ff,{size:12}),(ce=ne.branchId)==null?void 0:ce.name]}),n.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:(X=ne.roomId)==null?void 0:X.roomType})]}),n.jsxs("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:[n.jsxs("div",{style:{fontSize:"14px",color:"#111827",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(an,{size:12}),Q(ne.checkInDate)]}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ds,{size:12}),ge(ne.checkInTime)]})]}),n.jsxs("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:[n.jsxs("div",{style:{fontSize:"14px",color:"#111827",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(an,{size:12}),Q(ne.checkOutDate)]}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ds,{size:12}),ge(ne.checkOutTime)]})]}),n.jsxs("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#111827"},children:Y(ne)}),ne.gstAmount>0&&n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["GST: ",ne.gstAmount]})]}),n.jsxs("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:[n.jsxs("div",{style:{fontSize:"14px",fontWeight:"500",color:"#111827",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Ij,{size:12}),"",ne.totalPrice]}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:["Base: ",ne.baseAmount]}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[ne.nights," night(s)"]})]}),n.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap"},children:n.jsx("span",{style:{display:"inline-flex",padding:"4px 8px",fontSize:"12px",fontWeight:"600",borderRadius:"9999px",...q(ne.status)},children:ne.status})}),n.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"500"},children:n.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[n.jsx("button",{onClick:()=>W(ne),style:{color:"#3b82f6",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",padding:"4px",borderRadius:"4px"},title:"View Details",onMouseOver:se=>se.target.style.backgroundColor="#eff6ff",onMouseOut:se=>se.target.style.backgroundColor="transparent",children:n.jsx(Xi,{size:16})}),ne.status==="confirmed"&&n.jsx("button",{onClick:()=>R(ne._id,"checked-in"),style:{color:"#059669",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",padding:"4px",borderRadius:"4px"},title:"Check In",onMouseOver:se=>se.target.style.backgroundColor="#f0fdf4",onMouseOut:se=>se.target.style.backgroundColor="transparent",children:n.jsx(Bs,{size:16})}),ne.status==="checked-in"&&n.jsx("button",{onClick:()=>R(ne._id,"checked-out"),style:{color:"#2563eb",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",padding:"4px",borderRadius:"4px"},title:"Check Out",onMouseOver:se=>se.target.style.backgroundColor="#eff6ff",onMouseOut:se=>se.target.style.backgroundColor="transparent",children:n.jsx(Bs,{size:16})}),(ne.status==="confirmed"||ne.status==="checked-in")&&n.jsx("button",{onClick:()=>R(ne._id,"cancelled"),style:{color:"#dc2626",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",padding:"4px",borderRadius:"4px"},title:"Cancel",onMouseOver:se=>se.target.style.backgroundColor="#fef2f2",onMouseOut:se=>se.target.style.backgroundColor="transparent",children:n.jsx(Jp,{size:16})}),ne.status==="cancel-requested"&&n.jsx("button",{onClick:()=>R(ne._id,"cancelled"),style:{color:"#d97706",backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",padding:"4px",borderRadius:"4px"},title:"Approve Cancellation",onMouseOver:se=>se.target.style.backgroundColor="#fffbeb",onMouseOut:se=>se.target.style.backgroundColor="transparent",children:n.jsx(Bs,{size:16})})]})})]},ne._id)})})]})}),z.length===0&&n.jsx("div",{style:{textAlign:"center",padding:"48px 0"},children:n.jsx("div",{style:{color:"#6b7280"},children:"No bookings found"})})]})}),F&&M&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"0",maxWidth:"800px",width:"90%",margin:"16px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"24px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f8fafc",borderRadius:"12px 12px 0 0"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",margin:0,color:"#1f2937"},children:"Booking Details"}),n.jsxs("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0"},children:["Booking ID: ",M._id]})]}),n.jsx("button",{onClick:()=>B(!1),style:{color:"#6b7280",backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s"},onMouseOver:ne=>{ne.target.style.backgroundColor="#f3f4f6",ne.target.style.color="#374151"},onMouseOut:ne=>{ne.target.style.backgroundColor="transparent",ne.target.style.color="#6b7280"},children:n.jsx(Jp,{size:24})})]}),n.jsxs("div",{style:{padding:"24px"},children:[n.jsx("div",{style:{marginBottom:"24px",textAlign:"center"},children:n.jsx("span",{style:{display:"inline-flex",padding:"8px 16px",fontSize:"14px",fontWeight:"600",borderRadius:"20px",textTransform:"capitalize",...q(M.status)},children:M.status})}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(Ol,{size:20,color:"#3b82f6"}),"Guest Information"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Name"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:M.userName||"N/A"})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Phone"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(Ai,{size:16,color:"#10b981"}),M.userPhone||"N/A"]})]}),M.userEmail&&n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Email"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(Js,{size:16,color:"#3b82f6"}),M.userEmail]})]}),(()=>{let ne=M.guestGstNumber;if(M.guestGstNumber&&M.guestGstNumber.startsWith("DOCS:"))try{const Ae=M.guestGstNumber.substring(5);ne=JSON.parse(Ae).gst||""}catch{ne=""}return ne?n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"GST Number"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:ne})]}):null})()]})]}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(ff,{size:20,color:"#10b981"}),"Room Information"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#166534",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Room Number"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#166534"},children:((H=M.roomId)==null?void 0:H.roomNumber)||"N/A"})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Floor"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:((re=M.roomId)==null?void 0:re.floor)||"N/A"})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Room Type"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:((le=M.roomId)==null?void 0:le.roomType)||"N/A"})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Branch"}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:((pe=M.branchId)==null?void 0:pe.name)||"N/A"})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Room Price"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",((Se=M.roomId)==null?void 0:Se.price)||0,"/night"]})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Capacity"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:[((ue=(K=M.roomId)==null?void 0:K.capacity)==null?void 0:ue.adults)||2," Adults",((fe=(ye=M.roomId)==null?void 0:ye.capacity)==null?void 0:fe.children)>0&&`, ${M.roomId.capacity.children} Children`]})]})]})]}),((Xe=M.roomId)==null?void 0:Xe.amenities)&&n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:" Room Amenities"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"8px"},children:Object.entries(M.roomId.amenities).map(([ne,Ae])=>Ae&&n.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#f0fdf4",borderRadius:"6px",border:"1px solid #bbf7d0",fontSize:"14px",color:"#166534",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{style:{fontSize:"12px"},children:""}),ne.charAt(0).toUpperCase()+ne.slice(1).replace(/([A-Z])/g," $1")]},ne))})]}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(an,{size:20,color:"#f59e0b"}),"Stay Information"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[n.jsxs("div",{style:{padding:"16px",backgroundColor:"#fefbf3",borderRadius:"8px",border:"1px solid #fed7aa"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#92400e",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Check-in"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#92400e",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(an,{size:16}),Q(M.checkInDate)]}),n.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginTop:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(ds,{size:14}),ge(M.checkInTime)]}),M.actualCheckInTime&&n.jsxs("div",{style:{fontSize:"12px",color:"#059669",marginTop:"8px",padding:"6px 8px",backgroundColor:"#dcfce7",borderRadius:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(Bs,{size:12}),n.jsxs("span",{children:[n.jsx("strong",{children:"Actual Check-in:"})," ",new Date(M.actualCheckInTime).toLocaleString()]})]})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#fefbf3",borderRadius:"8px",border:"1px solid #fed7aa"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#92400e",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Check-out"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#92400e",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(an,{size:16}),Q(M.checkOutDate)]}),n.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginTop:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(ds,{size:14}),ge(M.checkOutTime)]}),M.actualCheckOutTime&&n.jsxs("div",{style:{fontSize:"12px",color:"#059669",marginTop:"8px",padding:"6px 8px",backgroundColor:"#dcfce7",borderRadius:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(Bs,{size:12}),n.jsxs("span",{children:[n.jsx("strong",{children:"Actual Check-out:"})," ",new Date(M.actualCheckOutTime).toLocaleString()]})]})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Duration"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:[M.nights||1," night(s)"]})]})]})]}),n.jsxs("div",{style:{marginBottom:"32px"},children:[n.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(Ij,{size:20,color:"#059669"}),"Payment Information"]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#166534",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Total Amount"}),n.jsxs("div",{style:{fontSize:"20px",fontWeight:"600",color:"#166534"},children:["",M.totalPrice||0]})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Base Amount"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",M.baseAmount||0]})]}),M.gstAmount>0&&n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"GST Amount"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:["",M.gstAmount]})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"GST Details"}),n.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:"#1f2937"},children:Y(M)})]})]})]}),(M.specialRequests||M.notes||M.createdAt||M.documents)&&n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#1f2937"},children:"Additional Information"}),n.jsxs("div",{style:{display:"grid",gap:"16px"},children:[M.guestGstNumber&&M.guestGstNumber.startsWith("DOCS:")?(()=>{try{const ne=M.guestGstNumber.substring(5),Ve=JSON.parse(ne).documents;return n.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[n.jsx("div",{style:{fontSize:"16px",color:"#334155",marginBottom:"16px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:" Identity Documents"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px"},children:[Ve.panCard&&n.jsxs("div",{style:{padding:"16px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dbeafe",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:""}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"PAN Card"}),n.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:Ve.panCard.name})]})]}),Ve.panCard.data&&Ve.panCard.type.startsWith("image/")&&n.jsx("div",{style:{marginBottom:"12px"},children:n.jsx("img",{src:Ve.panCard.data,alt:"PAN Card",style:{width:"100%",maxHeight:"200px",objectFit:"contain",borderRadius:"6px",border:"1px solid #e2e8f0"}})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"12px",color:"#6b7280"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"500"},children:"Size: "}),(Ve.panCard.size/1024/1024).toFixed(2)," MB"]}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"500"},children:"Type: "}),Ve.panCard.type]})]}),n.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",borderRadius:"6px",backgroundColor:"#f0fdf4",color:"#059669",fontSize:"12px",fontWeight:"500",textAlign:"center"},children:" Document Available"})]}),Ve.aadhaarCard&&n.jsxs("div",{style:{padding:"16px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[n.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dbeafe",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:""}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:"Aadhaar Card"}),n.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:Ve.aadhaarCard.name})]})]}),Ve.aadhaarCard.data&&Ve.aadhaarCard.type.startsWith("image/")&&n.jsx("div",{style:{marginBottom:"12px"},children:n.jsx("img",{src:Ve.aadhaarCard.data,alt:"Aadhaar Card",style:{width:"100%",maxHeight:"200px",objectFit:"contain",borderRadius:"6px",border:"1px solid #e2e8f0"}})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"12px",color:"#6b7280"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"500"},children:"Size: "}),(Ve.aadhaarCard.size/1024/1024).toFixed(2)," MB"]}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"500"},children:"Type: "}),Ve.aadhaarCard.type]})]}),n.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",borderRadius:"6px",backgroundColor:"#f0fdf4",color:"#059669",fontSize:"12px",fontWeight:"500",textAlign:"center"},children:" Document Available"})]})]})]})}catch(ne){return n.jsxs("div",{style:{padding:"16px",backgroundColor:"#fee2e2",borderRadius:"8px",color:"#dc2626"},children:["Error parsing document data: ",ne.message]})}})():n.jsx("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:n.jsx("div",{style:{fontSize:"14px",color:"#6b7280",textAlign:"center",fontStyle:"italic"},children:" No identity documents were uploaded for this booking"})}),M.specialRequests&&n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Special Requests"}),n.jsx("div",{style:{fontSize:"14px",color:"#1f2937"},children:M.specialRequests})]}),M.notes&&n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Notes"}),n.jsx("div",{style:{fontSize:"14px",color:"#1f2937"},children:M.notes})]}),M.createdAt&&n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"4px"},children:"Booking Created"}),n.jsx("div",{style:{fontSize:"14px",color:"#1f2937"},children:new Date(M.createdAt).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),n.jsx("div",{style:{padding:"24px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f8fafc",borderRadius:"0 0 12px 12px",display:"flex",justifyContent:"flex-end",gap:"12px"},children:n.jsx("button",{onClick:()=>B(!1),style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:ne=>ne.target.style.backgroundColor="#4b5563",onMouseOut:ne=>ne.target.style.backgroundColor="#6b7280",children:"Close"})})]})}),S&&k&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",maxWidth:"672px",width:"100%",margin:"16px",maxHeight:"80vh",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsxs("h3",{style:{fontSize:"18px",fontWeight:"600",margin:0},children:["Time Slots for ",E]}),n.jsx("button",{onClick:()=>T(!1),style:{color:"#6b7280",backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px"},onMouseOver:ne=>ne.target.style.color="#374151",onMouseOut:ne=>ne.target.style.color="#6b7280",children:n.jsx(Jp,{size:24})})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("p",{style:{fontSize:"14px",color:"#4b5563",margin:"4px 0"},children:["Room: ",Array.isArray(r)?(Ce=r.find(ne=>ne._id===y))==null?void 0:Ce.floor:"N/A"," - Room ",Array.isArray(r)?(Le=r.find(ne=>ne._id===y))==null?void 0:Le.roomNumber:"N/A"]}),n.jsxs("p",{style:{fontSize:"14px",color:"#4b5563",margin:"4px 0"},children:["Available Slots: ",k.availableSlots," / 24"]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:ee().map(ne=>{const Ae=k.bookedSlots.includes(ne.value);return n.jsxs("div",{style:{padding:"8px",textAlign:"center",borderRadius:"4px",fontSize:"14px",backgroundColor:Ae?"#fef2f2":"#f0fdf4",color:Ae?"#991b1b":"#166534",border:`1px solid ${Ae?"#fca5a5":"#bbf7d0"}`},children:[n.jsx("div",{style:{fontWeight:"500"},children:ne.display}),n.jsx("div",{style:{fontSize:"12px"},children:Ae?"Booked":"Available"})]},ne.value)})})]})})]}),n.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},Rfe="https://hotelvirat.com/api/v1/hotel",Pfe=Yt.create({baseURL:Rfe,headers:{"Content-Type":"application/json"}}),Mfe=()=>{const[e,t]=N.useState({totalCash:0,totalOnline:0,totalCollected:0,totalPending:0,bookingCount:0}),[r,a]=N.useState([]),[i,s]=N.useState(!0),[l,d]=N.useState(""),[u,f]=N.useState(""),[p,m]=N.useState(new Date().toISOString().split("T")[0]),[x,v]=N.useState(new Date().toISOString().split("T")[0]);N.useEffect(()=>{j()},[p,x]);const j=async()=>{s(!0),d("");try{const D=await Pfe.get(`/room-booking/payment-summary?startDate=${p}&endDate=${x}`);t(D.data.summary),a(D.data.bookings)}catch(D){console.error("Error fetching payment summary:",D),d("Failed to load payment data")}finally{s(!1)}},b=D=>D?new Date(D).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",y=D=>D?new Date(D).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",C=Array.isArray(r)?r.filter(D=>{var B,M,L;const F=u.toLowerCase();return((B=D.guestName)==null?void 0:B.toLowerCase().includes(F))||((M=D.roomNumber)==null?void 0:M.toLowerCase().includes(F))||((L=D.branchName)==null?void 0:L.toLowerCase().includes(F))}):[],E=()=>{const D=C.map(M=>({Room:M.roomNumber,"Guest Name":M.guestName,Branch:M.branchName,"Check-in":b(M.checkInDate),"Check-out":b(M.checkOutDate),"Total Amount":M.totalPrice,"Cash Paid":M.cashAmount,"Online Paid":M.onlineAmount,"Total Paid":M.amountPaid,Balance:M.totalPrice-M.amountPaid,Status:M.paymentStatus,"Booking Date":y(M.createdAt)})),F=Xc.json_to_sheet(D),B=Xc.book_new();Xc.book_append_sheet(B,F,"Room Payments"),nM(B,`room-payments-${p}-to-${x}.xlsx`)},O=()=>{const D=new Date().toISOString().split("T")[0];m(D),v(D)},S=()=>{const D=new Date,F=new Date(D);F.setDate(D.getDate()-D.getDay()),m(F.toISOString().split("T")[0]),v(D.toISOString().split("T")[0])},T=()=>{const D=new Date,F=new Date(D.getFullYear(),D.getMonth(),1);m(F.toISOString().split("T")[0]),v(D.toISOString().split("T")[0])},k=()=>{const D=new Date,F=new Date(D.getFullYear(),0,1);m(F.toISOString().split("T")[0]),v(D.toISOString().split("T")[0])};return n.jsxs("div",{className:"page-container",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Room Payment Collections"}),n.jsxs("div",{className:"header-actions",children:[n.jsxs("button",{className:"btn btn-outline",onClick:j,children:[n.jsx(fs,{size:16}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{className:"btn btn-primary",onClick:E,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:"Export"})]})]})]}),n.jsx("div",{className:"filters-bar",style:{marginBottom:"20px"},children:n.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(an,{size:18}),n.jsx("input",{type:"date",value:p,onChange:D=>m(D.target.value),className:"filter-select"}),n.jsx("span",{children:"to"}),n.jsx("input",{type:"date",value:x,onChange:D=>v(D.target.value),className:"filter-select"})]}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{className:"btn btn-outline btn-sm",onClick:O,children:"Today"}),n.jsx("button",{className:"btn btn-outline btn-sm",onClick:S,children:"This Week"}),n.jsx("button",{className:"btn btn-outline btn-sm",onClick:T,children:"This Month"}),n.jsx("button",{className:"btn btn-outline btn-sm",onClick:k,children:"This Year"})]})]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[n.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"20px",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[n.jsx(XL,{size:24,color:"#16a34a"}),n.jsx("span",{style:{color:"#166534",fontWeight:"500"},children:"Cash Collection"})]}),n.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#16a34a"},children:["",e.totalCash.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),n.jsxs("div",{style:{backgroundColor:"#eff6ff",padding:"20px",borderRadius:"12px",border:"1px solid #bfdbfe"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[n.jsx(Na,{size:24,color:"#2563eb"}),n.jsx("span",{style:{color:"#1e40af",fontWeight:"500"},children:"Online Collection"})]}),n.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#2563eb"},children:["",e.totalOnline.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),n.jsxs("div",{style:{backgroundColor:"#faf5ff",padding:"20px",borderRadius:"12px",border:"1px solid #e9d5ff"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[n.jsx(Ij,{size:24,color:"#9333ea"}),n.jsx("span",{style:{color:"#6b21a8",fontWeight:"500"},children:"Total Collected"})]}),n.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#9333ea"},children:["",e.totalCollected.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),n.jsxs("div",{style:{backgroundColor:"#fef2f2",padding:"20px",borderRadius:"12px",border:"1px solid #fecaca"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[n.jsx(fr,{size:24,color:"#dc2626"}),n.jsx("span",{style:{color:"#991b1b",fontWeight:"500"},children:"Pending Amount"})]}),n.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#dc2626"},children:["",e.totalPending.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by guest name, room number...",className:"search-input",value:u,onChange:D=>f(D.target.value)})]}),n.jsxs("div",{style:{color:"#6b7280",fontSize:"14px"},children:[C.length," booking(s) found"]})]}),l&&n.jsxs("div",{style:{padding:"15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(fr,{size:18}),l]}),n.jsx("div",{className:"data-card",children:i?n.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[n.jsx(fs,{size:24,className:"animate-spin"}),n.jsx("p",{children:"Loading payment data..."})]}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Room"}),n.jsx("th",{children:"Guest"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Check-in"}),n.jsx("th",{children:"Total"}),n.jsx("th",{children:" Cash"}),n.jsx("th",{children:" Online"}),n.jsx("th",{children:"Balance"})]})}),n.jsx("tbody",{children:C.length>0?C.map(D=>{var B,M,L;const F=D.totalPrice-D.amountPaid;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:D.roomNumber})}),n.jsx("td",{children:D.guestName}),n.jsx("td",{children:D.branchName}),n.jsx("td",{children:b(D.checkInDate)}),n.jsxs("td",{children:["",(B=D.totalPrice)==null?void 0:B.toFixed(2)]}),n.jsxs("td",{style:{color:"#16a34a",fontWeight:"500"},children:["",(M=D.cashAmount)==null?void 0:M.toFixed(2)]}),n.jsxs("td",{style:{color:"#2563eb",fontWeight:"500"},children:["",(L=D.onlineAmount)==null?void 0:L.toFixed(2)]}),n.jsx("td",{style:{color:F>0?"#dc2626":"#16a34a",fontWeight:"500"},children:F>0?`${F.toFixed(2)}`:" Paid"})]},D._id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"No bookings found for the selected date range"})})})]})})]})},Bfe=({user:e,onClose:t,onSave:r,categories:a,isEditMode:i})=>{var b,y;const[s,l]=N.useState({name:(e==null?void 0:e.name)||"",username:(e==null?void 0:e.username)||"",password:"",categoryId:((b=e==null?void 0:e.categoryId)==null?void 0:b._id)||(e==null?void 0:e.categoryId)||"",categoryName:(e==null?void 0:e.categoryName)||"",branchId:((y=e==null?void 0:e.branchId)==null?void 0:y._id)||(e==null?void 0:e.branchId)||"",branchName:(e==null?void 0:e.branchName)||"",isActive:(e==null?void 0:e.isActive)!==!1}),[d,u]=N.useState(!1),[f,p]=N.useState(null),[m,x]=N.useState(!1),v=C=>{var k,D;const{name:E,value:O,type:S,checked:T}=C.target;if(E==="categoryId"){const F=a.find(B=>B._id===O);l({...s,categoryId:O,categoryName:(F==null?void 0:F.name)||"",branchId:(F==null?void 0:F.branchId)||((k=F==null?void 0:F.branch)==null?void 0:k._id)||"",branchName:((D=F==null?void 0:F.branch)==null?void 0:D.name)||""})}else l({...s,[E]:S==="checkbox"?T:O});p(null)},j=async C=>{C.preventDefault(),p(null),x(!0);try{if(!s.categoryId)throw new Error("Please select a category");if(!i&&!s.password)throw new Error("Password is required");await r(s,e==null?void 0:e._id),t()}catch(E){p(E.message||"Failed to save category access user")}finally{x(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:i?"Edit Category Access":"Add Category Access"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{className:"modal-body",children:[f&&n.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:f}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"categoryId",children:["Category ",n.jsx("span",{className:"required",children:"*"})]}),n.jsxs("select",{id:"categoryId",name:"categoryId",className:"form-select",value:s.categoryId,onChange:v,required:!0,disabled:m,children:[n.jsx("option",{value:"",children:"Select Category"}),a.map(C=>{var E;return n.jsxs("option",{value:C._id,children:[C.name," ",(E=C.branch)!=null&&E.name?`(${C.branch.name})`:""]},C._id)})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"name",children:["Staff Name ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:v,required:!0,disabled:m,placeholder:"Enter staff name"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"username",children:["Username ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"username",name:"username",className:"form-input",value:s.username,onChange:v,required:!0,disabled:m,placeholder:"Enter username for login"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"password",children:["Password ",!i&&n.jsx("span",{className:"required",children:"*"})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{type:d?"text":"password",id:"password",name:"password",className:"form-input",value:s.password,onChange:v,required:!i,disabled:m,placeholder:i?"Leave blank to keep current":"Enter password",style:{paddingRight:"40px"}}),n.jsx("button",{type:"button",onClick:()=>u(!d),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:d?n.jsx(jw,{size:18}):n.jsx(Xi,{size:18})})]})]}),i&&n.jsx("div",{className:"form-group",children:n.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:s.isActive,onChange:v,disabled:m}),"Active"]})})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:m,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Saving...":i?"Update":"Add Access"})]})]})]})})},Ffe=({user:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),s=async()=>{i(!0);try{await r(e._id),t()}catch(l){console.error("Error deleting:",l)}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Category Access"}),n.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete access for ",n.jsx("strong",{children:e.name}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:s,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Lfe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState(""),[l,d]=N.useState(!1),[u,f]=N.useState(null),[p,m]=N.useState(!1),[x,v]=N.useState(null),[j,b]=N.useState(""),[y,C]=N.useState(""),[E,O]=N.useState(!1),S="https://hotelvirat.com/api/v1/hotel/category-access",T="https://hotelvirat.com/api/v1/hotel/category",k=async()=>{try{const I=await fetch(T);if(!I.ok)throw new Error("Failed to fetch categories");const R=await I.json();let W=[];R&&R.success&&Array.isArray(R.data)?W=R.data:Array.isArray(R)&&(W=R),a(W)}catch(I){console.error("Error fetching categories:",I)}},D=async()=>{O(!0),C("");try{const I=await fetch(S);if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const R=await I.json();let W=[];R&&R.success&&Array.isArray(R.data)?W=R.data:Array.isArray(R)?W=R:R&&R.message&&R.message.includes("routes working")?(console.log(" Server returning placeholder response:",R.message),W=[]):(console.error("Expected array but got:",R),W=[]),t(W)}catch(I){console.error("Fetch error:",I),C(`Failed to fetch category access users: ${I.message}`),t([])}finally{O(!1)}};N.useEffect(()=>{k(),D()},[]);const F=()=>{f(null),d(!0)},B=I=>{f(I),d(!0)},M=I=>{v(I),m(!0)},L=async(I,R)=>{try{const W=R?`${S}/${R}`:S,Q=R?"PUT":"POST",ge={...I};R&&!ge.password&&delete ge.password;const q=await fetch(W,{method:Q,headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)}),Y=await q.json();if(!q.ok)throw new Error(Y.message||"Failed to save");b(`Category access ${R?"updated":"added"} successfully`),setTimeout(()=>b(""),3e3),await D()}catch(W){throw new Error(W.message)}},A=async I=>{try{const R=await fetch(`${S}/${I}`,{method:"DELETE"}),W=await R.json();if(!R.ok)throw new Error(W.message||"Failed to delete");b("Category access deleted successfully"),setTimeout(()=>b(""),3e3),await D()}catch(R){C(R.message),setTimeout(()=>C(""),3e3)}},U=I=>I?new Date(I).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"N/A",P=e.filter(I=>{var R,W,Q;return((R=I.name)==null?void 0:R.toLowerCase().includes(i.toLowerCase()))||((W=I.username)==null?void 0:W.toLowerCase().includes(i.toLowerCase()))||((Q=I.categoryName)==null?void 0:Q.toLowerCase().includes(i.toLowerCase()))});return n.jsxs("div",{className:"category-access-page",children:[j&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:j}),n.jsx("button",{onClick:()=>b(""),children:""})]}),y&&n.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[n.jsx("span",{children:y}),n.jsx("button",{onClick:()=>C(""),style:{color:"#dc2626"},children:""})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Category Access"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:F,disabled:E,children:[n.jsx(Ad,{size:16}),n.jsx("span",{children:"Add Category Access"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by name, username or category...",className:"search-input",value:i,onChange:I=>s(I.target.value)})]})}),n.jsx("div",{className:"data-card",children:E?n.jsx("div",{className:"empty-state",children:"Loading..."}):P.length===0?n.jsx("div",{className:"empty-state",children:n.jsxs("p",{children:["No category access users found. ",i?"Try a different search.":"Add a new user to get started."]})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Username"}),n.jsx("th",{children:"Category"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:P.map(I=>{var R,W;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{className:"user-avatar-placeholder",children:(R=I.name)==null?void 0:R.charAt(0).toUpperCase()}),I.name]})}),n.jsx("td",{children:n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(W3,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),I.username]})}),n.jsx("td",{children:I.categoryName||((W=I.categoryId)==null?void 0:W.name)||"N/A"}),n.jsx("td",{children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",backgroundColor:I.isActive?"#dcfce7":"#fee2e2",color:I.isActive?"#166534":"#dc2626"},children:I.isActive?"Active":"Inactive"})}),n.jsx("td",{children:U(I.createdAt)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>B(I),disabled:E,children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>M(I),disabled:E,children:n.jsx(La,{size:14})})]})})]},I._id)})})]})}),l&&n.jsx(Bfe,{user:u,onClose:()=>d(!1),onSave:L,categories:r,isEditMode:!!u}),p&&n.jsx(Ffe,{user:x,onClose:()=>m(!1),onConfirm:A})]})},zfe=()=>{const e=An(),[t,r]=N.useState(null),[a,i]=N.useState([]),[s,l]=N.useState([]),[d,u]=N.useState(!0),[f,p]=N.useState(""),[m,x]=N.useState(""),[v,j]=N.useState(""),[b,y]=N.useState("all"),[C,E]=N.useState(!1),[O,S]=N.useState(null);N.useEffect(()=>{const I=localStorage.getItem("userType"),R=localStorage.getItem("categoryStaffData");if(I!=="category-staff"||!R){e("/login");return}const W=JSON.parse(R);console.log(" CategoryOrders - Staff Data:",W),console.log(" CategoryOrders - Category Name:",`"${W.categoryName}"`),console.log(" CategoryOrders - Category ID:",W.categoryId),r(W)},[e]),N.useEffect(()=>{t&&k()},[t,b]);const T=I=>{var z,ee,H,re,le;const R=((z=I.categoryName)==null?void 0:z.toLowerCase())||"",W=((ee=I.branchName)==null?void 0:ee.toLowerCase())||"",Q=((H=I.customerName)==null?void 0:H.toLowerCase())||"",ge=((re=I.deliveryOption)==null?void 0:re.toLowerCase())||"",q=((le=I.tableNumber)==null?void 0:le.toString().toLowerCase())||"",Y=(I.orderId||I.orderNumber||I._id||"").toLowerCase();return Y.includes("-tm-")||Y.includes("temple")?"Temple Meals":Y.includes("-ss-")||Y.includes("counter")?"Self Service":Y.includes("-res-")?"Restaurant":R.includes("temple")||R.includes("prasad")||R.includes("pooja")||W.includes("temple")||Q.includes("temple")?"Temple Meals":R.includes("self")||R.includes("counter")||q.includes("counter")||q.includes("self")||q.includes("mobile order")||ge==="pickup"?"Self Service":"Restaurant"},k=async()=>{if(t!=null&&t.categoryId){u(!0),p("");try{const I=t.categoryId._id||t.categoryId,R=Date.now();console.log(" CategoryOrders - Fetching orders for category:",t.categoryName),console.log(" CategoryOrders - Category ID:",I),console.log(" CategoryOrders - Staff Category Name (exact):",`"${t.categoryName}"`),console.log(" CategoryOrders - Staff Category Name (lowercase):",`"${t.categoryName.toLowerCase().trim()}"`);const[W,Q]=await Promise.all([yr(`/staff-order?_t=${R}`,{},!0).catch(()=>[]),yr(`/order?limit=1000&_t=${R}`,{},!0).catch(()=>[])]);let ge=[];try{const K=await yr(`/counter-order/orders?_t=${R}`,{},!0).catch(()=>[]);ge=Array.isArray(K)?K:K.orders||[]}catch(K){console.log("Additional orders fetch failed:",K)}const q=Array.isArray(W)?W:W.orders||[],Y=Array.isArray(Q)?Q:Q.data||[];console.log(" CategoryOrders - Raw API responses:",{staffOrdersCount:q.length,onlineOrdersCount:Y.length,sampleOnlineOrder:Y[0]||"No online orders",additionalOrdersCount:ge.length}),Y.length>0&&(console.log(" CategoryOrders - First 3 online orders structure:"),Y.slice(0,3).forEach((K,ue)=>{var ye,fe;console.log(`  Order ${ue+1}:`,{id:K._id,orderId:K.orderId||K.orderNumber,categoryName:K.categoryName,name:K.name,deliveryOption:K.deliveryOption,createdAt:K.createdAt,items:((ye=K.items)==null?void 0:ye.length)||0,itemsDetails:((fe=K.items)==null?void 0:fe.map(Xe=>({name:Xe.name||Xe.itemName,quantity:Xe.quantity,price:Xe.price,categoryId:Xe.categoryId,categoryName:Xe.categoryName,fullItemStructure:Xe})))||[]})}));const z=Y.map(K=>{var Xe,Ce;let ue="Restaurant";const ye=(K.orderId||K.orderNumber||K._id||"").toLowerCase();if(ye.includes("-tm-")||ye.includes("temple")?ue="Temple Meals":ye.includes("-ss-")||ye.includes("counter")?ue="Self Service":ye.includes("-res-")&&(ue="Restaurant"),K.items&&K.items.length>0){const Le=K.items.map(ne=>ne.categoryId).filter(Boolean);if(Le.length>0){const ne={};Le.forEach(te=>{ne[te]=(ne[te]||0)+1});const Ae=Object.keys(ne).reduce((te,ce)=>ne[te]>ne[ce]?te:ce),Ve={"692fe2788b36a58df247e06f":"Restaurant","692fe2978b36a58df247e072":"Self Service","692fe2ae8b36a58df247e075":"Temple Meals"};Ve[Ae]&&(ue=Ve[Ae])}}const fe={...K,customerName:K.name||K.customerName||"Mobile User",customerMobile:K.phone||K.customerMobile||K.customerPhone,tableNumber:K.tableNumber||"Mobile Order",branchName:((Xe=K.branchId)==null?void 0:Xe.name)||K.branchName||"Hotel Virat",grandTotal:K.total||K.grandTotal||K.totalAmount,status:K.status||"pending",items:K.items||[],categoryName:ue};return console.log("DEBUG - Transformed online order:",{orderId:fe.orderId||fe.orderNumber||fe._id,originalCategoryName:K.categoryName,assignedCategoryName:fe.categoryName,hasDeliveryAddress:!!K.deliveryAddress,deliveryOption:K.deliveryOption,tableNumber:fe.tableNumber,orderSource:K.orderSource,itemCategoryIds:((Ce=K.items)==null?void 0:Ce.map(Le=>Le.categoryId))||[]}),fe}),H=[...q,...z,...ge].filter((K,ue,ye)=>{const fe=K.orderId||K.orderNumber||K._id;return ue===ye.findIndex(Xe=>(Xe.orderId||Xe.orderNumber||Xe._id)===fe)});console.log(" CategoryOrders - All unique orders before filtering:",{totalOrders:H.length,orderIds:H.map(K=>K.orderId||K.orderNumber||K._id).slice(0,10),sampleOrderDetails:H.slice(0,3).map(K=>{var ue;return{id:K.orderId||K.orderNumber||K._id,categoryName:K.categoryName,items:((ue=K.items)==null?void 0:ue.map(ye=>({name:ye.name,categoryId:ye.categoryId,categoryName:ye.categoryName})))||[]}})});const re=H.filter(K=>{var Le,ne,Ae,Ve,te,ce,X,se,J,Ne;const ue=K.orderId||K.orderNumber||K._id||"UNKNOWN";if(!ue||ue==="UNKNOWN")return!1;const ye=((Le=K.categoryName)==null?void 0:Le.toLowerCase().trim())||"",fe=t.categoryName.toLowerCase().trim(),Xe=ue.toLowerCase();if(console.log(` CategoryOrders - Filtering order ${ue}:`,{orderCategoryName:ye,staffCategoryName:fe,orderIdLower:Xe,orderSource:K.orderSource,hasItems:!!((ne=K.items)!=null&&ne.length),itemsCount:((Ae=K.items)==null?void 0:Ae.length)||0,firstItemCategoryId:(te=(Ve=K.items)==null?void 0:Ve[0])==null?void 0:te.categoryId,firstItemCategoryName:((X=(ce=K.items)==null?void 0:ce[0])==null?void 0:X.categoryName)||((Ne=(J=(se=K.items)==null?void 0:se[0])==null?void 0:J.categoryId)==null?void 0:Ne.name)}),ye&&ye!==""&&(ye===fe||ye.replace(/\s+/g,"")===fe.replace(/\s+/g,"")))return console.log(` CategoryOrders - Order ${ue} matched by category name`),!0;if((fe.includes("self")||fe.includes("service"))&&(Xe.includes("-ss-")||Xe.includes("counter")))return console.log(` CategoryOrders - Order ${ue} matched Self Service by ID pattern`),!0;if((fe.includes("temple")||fe.includes("meal"))&&(Xe.includes("-tm-")||Xe.includes("temple")))return console.log(` CategoryOrders - Order ${ue} matched Temple Meals by ID pattern`),!0;if(fe.includes("restaurant")&&Xe.includes("-res-"))return console.log(` CategoryOrders - Order ${ue} matched Restaurant by ID pattern`),!0;if(K.items&&Array.isArray(K.items)&&K.items.some(tt=>{var Oe,Qe;const $e=((Oe=tt.categoryId)==null?void 0:Oe._id)||tt.categoryId,Ze=((Qe=tt.categoryId)==null?void 0:Qe.name)||tt.categoryName;if($e===I)return console.log(` CategoryOrders - Order ${ue} matched by item categoryId: ${$e}`),!0;if(Ze){const ht=Ze.toLowerCase().trim();if(ht===fe||ht.replace(/\s+/g,"")===fe.replace(/\s+/g,""))return console.log(` CategoryOrders - Order ${ue} matched by item categoryName: ${Ze}`),!0}return!1}))return!0;const Ce=T(K);return Ce&&Ce.toLowerCase().trim()===fe?(console.log(` CategoryOrders - Order ${ue} matched by determined category: ${Ce}`),!0):(console.log(` CategoryOrders - Order ${ue} did not match any criteria`),!1)});console.log(" CategoryOrders - Filtering summary:",{totalUniqueOrders:H.length,categoryOrdersFound:re.length,staffCategoryName:t.categoryName,categoryOrderIds:re.map(K=>K.orderId||K.orderNumber||K._id).slice(0,5)});let le=re;re.length===0&&H.length>0&&(console.log(" CategoryOrders - No category orders found, showing all orders for debugging"),le=H);let pe=le;b!=="all"&&(pe=pe.filter(K=>K.status===b));const Se=pe.filter(K=>K.orderId||K.orderNumber||K._id).sort((K,ue)=>{const ye=new Date(K.orderTime||K.createdAt||0);return new Date(ue.orderTime||ue.createdAt||0)-ye}).map((K,ue)=>{var ye,fe;return{id:K._id||`temp-id-${ue}`,orderId:K.orderId||K.orderNumber||`UNKNOWN-${ue}`,customer:K.isGuestOrder?K.customerName:((ye=K.userId)==null?void 0:ye.name)||"Unknown",customerType:K.isGuestOrder?"Guest":"Staff",customerMobile:K.isGuestOrder?K.customerMobile:((fe=K.userId)==null?void 0:fe.mobile)||"N/A",date:new Date(K.orderTime||K.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:K.branchName||"Unknown Branch",tableNumber:K.tableNumber||"N/A",peopleCount:K.peopleCount||0,items:(()=>{var ce;if(!K.items||!Array.isArray(K.items))return[];if(re.length===0&&H.length>0)return console.log(" CategoryOrders - Debug mode: showing all items for order",K.orderId||K.orderNumber||K._id),K.items;const Xe=K.orderId||K.orderNumber||K._id||"",Ce=((ce=K.categoryName)==null?void 0:ce.toLowerCase().trim())||"",Le=t.categoryName.toLowerCase().trim(),ne=Xe.toLowerCase(),Ae=Ce===Le||Ce.replace(/\s+/g,"")===Le.replace(/\s+/g,""),Ve=Le.includes("restaurant")&&ne.includes("-res-")||Le.includes("self")&&(ne.includes("-ss-")||ne.includes("counter"))||Le.includes("temple")&&(ne.includes("-tm-")||ne.includes("temple"));if(Ae||Ve)return console.log(` CategoryOrders - Order ${Xe} matched by name/pattern, showing all ${K.items.length} items`),K.items;const te=K.items.filter(X=>{var Ne,Ge;const se=((Ne=X.categoryId)==null?void 0:Ne._id)||X.categoryId,J=((Ge=X.categoryId)==null?void 0:Ge.name)||X.categoryName;if(console.log(" CategoryOrders - Filtering item:",{itemName:X.name||X.itemName,itemCategoryId:se,itemCategoryName:J,targetCategoryId:I,targetCategoryName:t.categoryName,fullItem:X}),se===I)return console.log(` CategoryOrders - Item matched by categoryId: ${X.name||X.itemName}`),!0;if(J){const tt=J.toLowerCase().trim(),$e=t.categoryName.toLowerCase().trim();if(tt===$e||tt.replace(/\s+/g,"")===$e.replace(/\s+/g,""))return console.log(` CategoryOrders - Item matched by categoryName: ${X.name||X.itemName}`),!0}return console.log(` CategoryOrders - Item did not match: ${X.name||X.itemName}`),!1});return console.log(` CategoryOrders - Order ${Xe} item filtering: ${te.length}/${K.items.length} items matched`),te})(),allItems:K.items||[],status:K.status||"pending",paymentStatus:K.paymentStatus||"pending",grandTotal:K.grandTotal||0,originalOrder:K,sortDate:new Date(K.orderTime||K.createdAt||0)}});i(Se)}catch(I){console.error("Error fetching orders:",I),p("Failed to load orders. Please try again.")}finally{u(!1)}}};N.useEffect(()=>{const I=a.filter(R=>{var Q,ge,q;if(!v.trim())return!0;const W=v.trim().toLowerCase();return((Q=R.orderId)==null?void 0:Q.toLowerCase().includes(W))||((ge=R.tableNumber)==null?void 0:ge.toLowerCase().includes(W))||((q=R.customer)==null?void 0:q.toLowerCase().includes(W))});l(I)},[a,v]);const D=I=>{S(I),E(!0)},F=async(I,R)=>{var W,Q;try{const ge=I.tableNumber==="Mobile Order"||((W=I.originalOrder)==null?void 0:W.tableNumber)==="Mobile Order",Y=((Q=I.originalOrder)==null?void 0:Q.isGuestOrder)!==void 0&&!ge?`/staff-order/${I.id}/payment-status`:`/order/${I.id}/payment-status`;console.log(" Payment Status Update:",{orderId:I.orderId,endpoint:Y,newPaymentStatus:R}),await yr(Y,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:R})}),x(`Order ${I.orderId} payment status updated to ${R}`),setTimeout(()=>x(""),3e3),k()}catch(ge){console.error("Error updating payment status:",ge),p("Failed to update payment status"),setTimeout(()=>p(""),3e3)}},B=async(I,R)=>{var W,Q;try{const ge=I.tableNumber==="Mobile Order"||((W=I.originalOrder)==null?void 0:W.tableNumber)==="Mobile Order",q=((Q=I.originalOrder)==null?void 0:Q.isGuestOrder)!==void 0&&!ge;console.log(" Status Update Debug:",{orderId:I.orderId,tableNumber:I.tableNumber,isMobileOrder:ge,isActualStaffOrder:q,originalOrder:!!I.originalOrder});const Y=q?`/staff-order/${I.id}/status`:`/order/${I.id}/status`;let z=R;q||R==="served"&&(z="delivered"),console.log(" Status Update:",{endpoint:Y,statusToSend:z,originalStatus:R}),await yr(Y,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:z})}),x(`Order ${I.orderId} status updated to ${R}`),setTimeout(()=>x(""),3e3),k()}catch(ge){console.error("Error updating status:",ge),p("Failed to update order status"),setTimeout(()=>p(""),3e3)}},M=I=>{const W=I.items.reduce((ge,q)=>ge+q.price*q.quantity,0),Q=window.open("","_blank","width=302,height=600");Q.document.write(`
      <html>
        <head>
          <title>Bill</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            @page { 
              size: 80mm auto; 
              margin: 0; 
            }
            @media print {
              html, body { 
                width: 80mm; 
                margin: 0; 
                padding: 0;
              }
            }
            body {
              font-family: 'Courier New', Courier, monospace;
              font-size: 11px;
              width: 72mm;
              padding: 3mm;
              line-height: 1.3;
            }
            .center { text-align: center; }
            .right { text-align: right; }
            .bold { font-weight: bold; }
            .line { border-top: 1px dashed #000; margin: 4px 0; }
            .double-line { border-top: 1px solid #000; border-bottom: 1px solid #000; height: 3px; margin: 4px 0; }
            table { width: 100%; border-collapse: collapse; }
            td { padding: 1px 0; vertical-align: top; }
            .item-name { width: 45%; }
            .item-qty { width: 15%; text-align: center; }
            .item-price { width: 40%; text-align: right; }
            h2 { margin: 3px 0; font-size: 14px; }
            p { margin: 2px 0; }
            .footer { margin-top: 8px; font-size: 10px; }
            .total-row { font-size: 13px; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="center">
            <h2>HOTEL VIRAT</h2>
            <p>${t.categoryName}</p>
          </div>
          <div class="line"></div>
          
          <p><strong>Bill No:</strong> ${I.orderId}</p>
          <p><strong>Date:</strong> ${I.date}</p>
          <p><strong>Customer:</strong> ${I.customer}</p>
          ${I.tableNumber!=="N/A"?`<p><strong>Table:</strong> ${I.tableNumber}</p>`:""}
          
          <div class="double-line"></div>
          
          <table>
            <tr class="bold">
              <td class="item-name">Item</td>
              <td class="item-qty">Qty</td>
              <td class="item-price">Amount</td>
            </tr>
          </table>
          
          <div class="line"></div>
          
          <table>
            ${I.items.map(ge=>`
              <tr>
                <td class="item-name">${ge.name}</td>
                <td class="item-qty">${ge.quantity}</td>
                <td class="item-price">${ge.price*ge.quantity}</td>
              </tr>
            `).join("")}
          </table>
          
          <div class="line"></div>
          
          <div class="double-line"></div>
          
          <table>
            <tr class="bold total-row">
              <td>TOTAL</td>
              <td class="right">${W}</td>
            </tr>
          </table>
          
          <div class="double-line"></div>
          
          <div class="center footer">
            <p class="bold">Thank you for your visit!</p>
            <p>Please visit again</p>
            <p>---</p>
          </div>
        </body>
      </html>
    `),Q.document.close(),Q.focus(),setTimeout(()=>{Q.print(),Q.close()},250)},L=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userType"),localStorage.removeItem("categoryStaffData"),e("/login")},A=I=>{var W;const R=(W=I.status)==null?void 0:W.toLowerCase();return R==="pending"||R==="confirmed"},U=I=>{var R;return((R=I.status)==null?void 0:R.toLowerCase())==="preparing"},P=I=>{var W;const R=(W=I.status)==null?void 0:W.toLowerCase();return["served","completed","delivered","out for delivery"].includes(R)};return t?n.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"15px 20px",backgroundColor:"#4f46e5",borderRadius:"8px",color:"white"},children:[n.jsxs("div",{children:[n.jsx("h1",{style:{margin:0,fontSize:"24px"},children:"Category Orders"}),n.jsxs("p",{style:{margin:"5px 0 0",opacity:.9},children:[t.name," - ",t.categoryName]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[n.jsx(fs,{size:16})," Refresh"]}),n.jsxs("button",{onClick:L,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#dc2626",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[n.jsx(sm,{size:16})," Logout"]})]})]}),m&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:m}),n.jsx("button",{onClick:()=>x(""),children:n.jsx(ha,{size:16})})]}),!d&&n.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#f0f9ff",color:"#0369a1",borderRadius:"6px",marginBottom:"20px",fontSize:"14px",fontWeight:"500",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("span",{children:["Found ",s.length," order",s.length!==1?"s":""," for ",t.categoryName]}),s.length>10&&n.jsx("span",{style:{fontSize:"12px",opacity:.8},children:" Scroll down to see more orders"})]}),n.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap",alignItems:"center"},children:[n.jsxs("div",{style:{position:"relative",flex:1,minWidth:"250px"},children:[n.jsx(wr,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),n.jsx("input",{type:"text",placeholder:"Search by order ID, table, or customer...",value:v,onChange:I=>j(I.target.value),style:{width:"100%",padding:"10px 10px 10px 40px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px"}})]}),n.jsxs("select",{value:b,onChange:I=>y(I.target.value),style:{padding:"10px 15px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px",minWidth:"150px"},children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"preparing",children:"Preparing"}),n.jsx("option",{value:"served",children:"Served"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),f&&n.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:f})]}),n.jsx("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"auto",maxHeight:"60vh"},children:d?n.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[n.jsx(Ra,{size:24,className:"animate-spin",style:{margin:"0 auto 10px"}}),n.jsx("p",{children:"Loading orders..."})]}):n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{style:{position:"sticky",top:0,backgroundColor:"#f9fafb",zIndex:10},children:n.jsxs("tr",{children:[n.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Order ID"}),n.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Customer"}),n.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Table"}),n.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Date"}),n.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Payment"}),n.jsxs("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:["Items (",t.categoryName,")"]}),n.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Actions"})]})}),n.jsx("tbody",{children:s.length>0?s.map(I=>n.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[n.jsx("td",{style:{padding:"12px 16px"},children:I.orderId}),n.jsx("td",{style:{padding:"12px 16px"},children:I.customer}),n.jsx("td",{style:{padding:"12px 16px"},children:I.tableNumber}),n.jsx("td",{style:{padding:"12px 16px"},children:I.date}),n.jsx("td",{style:{padding:"8px 12px"},children:n.jsxs("select",{value:I.paymentStatus||"pending",onChange:R=>F(I,R.target.value),style:{padding:"4px 8px",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"12px",backgroundColor:I.paymentStatus==="completed"?"#d1fae5":I.paymentStatus==="failed"?"#fee2e2":I.paymentStatus==="refunded"?"#e0e7ff":"#fef3c7",color:I.paymentStatus==="completed"?"#065f46":I.paymentStatus==="failed"?"#991b1b":I.paymentStatus==="refunded"?"#5b21b6":"#92400e",cursor:"pointer"},children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"refunded",children:"Refunded"})]})}),n.jsx("td",{style:{padding:"12px 16px"},children:I.items.length===0?n.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",fontStyle:"italic"},children:["No ",t.categoryName," items"]}):I.items.map((R,W)=>(console.log(` CategoryOrders - Rendering item ${W}:`,{name:R.name,quantity:R.quantity,price:R.price,categoryId:R.categoryId,categoryName:R.categoryName,fullItem:R}),n.jsxs("div",{style:{fontSize:"13px"},children:[R.name||R.itemName||"Unknown Item"," x ",R.quantity||1]},W)))}),n.jsx("td",{style:{padding:"12px 16px"},children:n.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[n.jsx("button",{onClick:()=>D(I),style:{padding:"5px 10px",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"View"}),A(I)&&n.jsx("button",{onClick:()=>B(I,"preparing"),style:{padding:"5px 10px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Preparing"}),U(I)&&n.jsx("button",{onClick:()=>B(I,"served"),style:{padding:"5px 10px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Served"}),P(I)&&n.jsxs("button",{onClick:()=>M(I),style:{padding:"5px 10px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(wi,{size:12})," Print"]})]})})]},I.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"7",style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"No orders found for your category"})})})]})}),C&&O&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("h3",{style:{margin:0},children:["Order Details - ",O.orderId]}),n.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px"},children:""})]}),n.jsxs("div",{style:{padding:"20px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Customer:"})," ",O.customer]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Type:"})," ",O.customerType]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Mobile:"})," ",O.customerMobile]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Table:"})," ",O.tableNumber]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Date:"})," ",O.date]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Branch:"})," ",O.branch]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textAlign:"center",minWidth:"60px",backgroundColor:O.status==="completed"?"#d1fae5":O.status==="preparing"?"#dbeafe":O.status==="served"?"#e0e7ff":O.status==="cancelled"?"#fee2e2":"#fef3c7",color:O.status==="completed"?"#065f46":O.status==="preparing"?"#1e40af":O.status==="served"?"#5b21b6":O.status==="cancelled"?"#991b1b":"#92400e",border:"1px solid "+(O.status==="completed"?"#10b981":O.status==="preparing"?"#3b82f6":O.status==="served"?"#8b5cf6":O.status==="cancelled"?"#ef4444":"#f59e0b")},children:O.status?O.status.charAt(0).toUpperCase()+O.status.slice(1):"Pending"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Payment:"})," ",n.jsx("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textAlign:"center",minWidth:"60px",backgroundColor:O.paymentStatus==="completed"?"#d1fae5":O.paymentStatus==="failed"?"#fee2e2":O.paymentStatus==="refunded"?"#e0e7ff":"#fef3c7",color:O.paymentStatus==="completed"?"#065f46":O.paymentStatus==="failed"?"#991b1b":O.paymentStatus==="refunded"?"#5b21b6":"#92400e",border:"1px solid "+(O.paymentStatus==="completed"?"#10b981":O.paymentStatus==="failed"?"#ef4444":O.paymentStatus==="refunded"?"#8b5cf6":"#f59e0b")},children:O.paymentStatus?O.paymentStatus.charAt(0).toUpperCase()+O.paymentStatus.slice(1):"Pending"})]})]}),n.jsxs("h4",{style:{marginBottom:"10px"},children:["Items from ",t.categoryName,":"]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"15px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[n.jsx("th",{style:{padding:"10px",textAlign:"left",border:"1px solid #e5e7eb"},children:"Item"}),n.jsx("th",{style:{padding:"10px",textAlign:"center",border:"1px solid #e5e7eb"},children:"Qty"}),n.jsx("th",{style:{padding:"10px",textAlign:"right",border:"1px solid #e5e7eb"},children:"Price"})]})}),n.jsx("tbody",{children:O.items.map((I,R)=>n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"10px",border:"1px solid #e5e7eb"},children:I.name}),n.jsx("td",{style:{padding:"10px",textAlign:"center",border:"1px solid #e5e7eb"},children:I.quantity}),n.jsxs("td",{style:{padding:"10px",textAlign:"right",border:"1px solid #e5e7eb"},children:["",(I.price*I.quantity).toFixed(2)]})]},R))})]})]}),n.jsxs("div",{style:{padding:"16px 20px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[A(O)&&n.jsx("button",{onClick:()=>{B(O,"preparing"),E(!1)},style:{padding:"8px 16px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Mark Preparing"}),U(O)&&n.jsx("button",{onClick:()=>{B(O,"served"),E(!1)},style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Mark Served"}),P(O)&&n.jsxs("button",{onClick:()=>M(O),style:{padding:"8px 16px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(wi,{size:16})," Print Bill"]})]}),n.jsx("button",{onClick:()=>E(!1),style:{padding:"8px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Close"})]})]})})]}):n.jsx("div",{className:"loading-container",children:n.jsx(Ra,{size:24,className:"animate-spin"})})},$fe=`
  .status-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    text-transform: capitalize;
    min-width: 60px;
    text-align: center;
  }
  
  .status-badge.pending {
    background: #fef3c7;
    color: #92400e;
    border: 1px solid #f59e0b;
  }
  
  .status-badge.preparing {
    background: #dbeafe;
    color: #1e40af;
    border: 1px solid #3b82f6;
  }
  
  .status-badge.served {
    background: #e0e7ff;
    color: #5b21b6;
    border: 1px solid #8b5cf6;
  }
  
  .status-badge.completed {
    background: #d1fae5;
    color: #065f46;
    border: 1px solid #10b981;
  }
  
  .status-badge.cancelled {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #ef4444;
  }
`;if(typeof document<"u"){const e=document.createElement("style");e.type="text/css",e.innerText=$fe,document.head.appendChild(e)}const Ufe=({user:e,onClose:t,onSave:r,branches:a,isEditMode:i})=>{const[s,l]=N.useState({name:(e==null?void 0:e.name)||"",username:(e==null?void 0:e.username)||"",password:"",branchId:(e==null?void 0:e.branchId)||"",branchName:(e==null?void 0:e.branchName)||"",isActive:(e==null?void 0:e.isActive)!==!1}),[d,u]=N.useState(!1),[f,p]=N.useState(null),[m,x]=N.useState(!1),v=b=>{const{name:y,value:C,type:E,checked:O}=b.target;if(y==="branchId"){const S=a.find(T=>T._id===C);l({...s,branchId:C,branchName:(S==null?void 0:S.name)||""})}else l({...s,[y]:E==="checkbox"?O:C});p(null)},j=async b=>{b.preventDefault(),p(null),x(!0);try{if(!i&&!s.password)throw new Error("Password is required");await r(s,e==null?void 0:e._id),t()}catch(y){p(y.message||"Failed to save receptionist")}finally{x(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:i?"Edit Receptionist":"Add Receptionist"}),n.jsx("button",{className:"modal-close",onClick:t,children:""})]}),n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{className:"modal-body",children:[f&&n.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:f}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",htmlFor:"branchId",children:"Branch"}),n.jsxs("select",{id:"branchId",name:"branchId",className:"form-select",value:s.branchId,onChange:v,disabled:m,children:[n.jsx("option",{value:"",children:"All Branches"}),a.map(b=>n.jsx("option",{value:b._id,children:b.name},b._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"name",children:["Receptionist Name ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:v,required:!0,disabled:m,placeholder:"Enter receptionist name"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"username",children:["Username ",n.jsx("span",{className:"required",children:"*"})]}),n.jsx("input",{type:"text",id:"username",name:"username",className:"form-input",value:s.username,onChange:v,required:!0,disabled:m,placeholder:"Enter username for login"})]}),n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",htmlFor:"password",children:["Password ",!i&&n.jsx("span",{className:"required",children:"*"})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{type:d?"text":"password",id:"password",name:"password",className:"form-input",value:s.password,onChange:v,required:!i,disabled:m,placeholder:i?"Leave blank to keep current":"Enter password",style:{paddingRight:"40px"}}),n.jsx("button",{type:"button",onClick:()=>u(!d),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:d?n.jsx(jw,{size:18}):n.jsx(Xi,{size:18})})]})]}),i&&n.jsx("div",{className:"form-group",children:n.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("input",{type:"checkbox",name:"isActive",checked:s.isActive,onChange:v,disabled:m}),"Active"]})})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:m,children:"Cancel"}),n.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Saving...":i?"Update":"Add Receptionist"})]})]})]})})},qfe=({user:e,onClose:t,onConfirm:r})=>{const[a,i]=N.useState(!1),s=async()=>{i(!0);try{await r(e._id),t()}catch(l){console.error("Error deleting:",l)}finally{i(!1)}};return n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Delete Receptionist"}),n.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsx("strong",{children:e.name}),"?"]}),n.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),n.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:s,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Wfe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState(""),[l,d]=N.useState(!1),[u,f]=N.useState(null),[p,m]=N.useState(!1),[x,v]=N.useState(null),[j,b]=N.useState(""),[y,C]=N.useState(""),[E,O]=N.useState(!1),S="https://hotelvirat.com/api/v1/hotel/receptionist-access",T="https://hotelvirat.com/api/v1/hotel/branch",k=async()=>{try{const I=await fetch(T);if(!I.ok)throw new Error("Failed to fetch branches");const R=await I.json();a(Array.isArray(R)?R:[])}catch(I){console.error("Error fetching branches:",I)}},D=async()=>{O(!0),C("");try{const I=await fetch(S);if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const R=await I.json();let W=[];R.success&&Array.isArray(R.data)?W=R.data:Array.isArray(R)?W=R:R.message&&R.message.includes("routes working")&&(W=[]),t(W)}catch(I){console.error("Fetch error:",I),C(`Failed to fetch receptionists: ${I.message}`),t([])}finally{O(!1)}};N.useEffect(()=>{k(),D()},[]);const F=()=>{f(null),d(!0)},B=I=>{f(I),d(!0)},M=I=>{v(I),m(!0)},L=async(I,R)=>{try{const W=R?`${S}/${R}`:S,Q=R?"PUT":"POST",ge={...I};R&&!ge.password&&delete ge.password;const q=await fetch(W,{method:Q,headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)}),Y=await q.json();if(!q.ok)throw new Error(Y.message||"Failed to save");b(`Receptionist ${R?"updated":"added"} successfully`),setTimeout(()=>b(""),3e3),await D()}catch(W){throw new Error(W.message)}},A=async I=>{try{const R=await fetch(`${S}/${I}`,{method:"DELETE"}),W=await R.json();if(!R.ok)throw new Error(W.message||"Failed to delete");b("Receptionist deleted successfully"),setTimeout(()=>b(""),3e3),await D()}catch(R){C(R.message),setTimeout(()=>C(""),3e3)}},U=I=>I?new Date(I).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"N/A",P=e.filter(I=>{var R,W,Q;return((R=I.name)==null?void 0:R.toLowerCase().includes(i.toLowerCase()))||((W=I.username)==null?void 0:W.toLowerCase().includes(i.toLowerCase()))||((Q=I.branchName)==null?void 0:Q.toLowerCase().includes(i.toLowerCase()))});return n.jsxs("div",{className:"receptionist-access-page",children:[j&&n.jsxs("div",{className:"success-message",children:[n.jsx("span",{children:j}),n.jsx("button",{onClick:()=>b(""),children:""})]}),y&&n.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[n.jsx("span",{children:y}),n.jsx("button",{onClick:()=>C(""),style:{color:"#dc2626"},children:""})]}),n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{children:"Receptionist Access"}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-primary",onClick:F,disabled:E,children:[n.jsx(Ad,{size:16}),n.jsx("span",{children:"Add Receptionist"})]})})]}),n.jsx("div",{className:"filters-bar",children:n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by name, username or branch...",className:"search-input",value:i,onChange:I=>s(I.target.value)})]})}),n.jsx("div",{className:"data-card",children:E?n.jsx("div",{className:"empty-state",children:"Loading..."}):P.length===0?n.jsx("div",{className:"empty-state",children:n.jsxs("p",{children:["No receptionists found. ",i?"Try a different search.":"Add a new receptionist to get started."]})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Username"}),n.jsx("th",{children:"Branch"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Created"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:P.map(I=>{var R;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("div",{className:"user-avatar-placeholder",children:(R=I.name)==null?void 0:R.charAt(0).toUpperCase()}),I.name]})}),n.jsx("td",{children:n.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[n.jsx(W3,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),I.username]})}),n.jsx("td",{children:I.branchName||"All Branches"}),n.jsx("td",{children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",backgroundColor:I.isActive?"#dcfce7":"#fee2e2",color:I.isActive?"#166534":"#dc2626"},children:I.isActive?"Active":"Inactive"})}),n.jsx("td",{children:U(I.createdAt)}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn edit",onClick:()=>B(I),disabled:E,children:n.jsx(Aa,{size:14})}),n.jsx("button",{className:"action-btn delete",onClick:()=>M(I),disabled:E,children:n.jsx(La,{size:14})})]})})]},I._id)})})]})}),l&&n.jsx(Ufe,{user:u,onClose:()=>d(!1),onSave:L,branches:r,isEditMode:!!u}),p&&n.jsx(qfe,{user:x,onClose:()=>m(!1),onConfirm:A})]})},Hfe="https://hotelvirat.com/api/v1/hotel",Yn=Yt.create({baseURL:Hfe,headers:{"Content-Type":"application/json"}}),Gfe=({room:e,allBookings:t,onClose:r,onBook:a})=>{const[i,s]=N.useState({guestName:"",guestPhone:"",guestEmail:"",guestGstNumber:"",aadhaarNumber:"",panNumber:"",checkInDate:new Date().toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkInTime:"12:00",checkOutTime:"11:00",gstType:"none",discountPercent:"",amountPaid:"",paymentMethod:"cash"}),[l,d]=N.useState(!1),[u,f]=N.useState(""),[p,m]=N.useState(!1),[x,v]=N.useState("checkIn"),[j,b]=N.useState(new Date),[y,C]=N.useState({}),[E,O]=N.useState(!1);N.useEffect(()=>{p&&e&&e._id&&t.length>0&&W(e._id,j.getFullYear(),j.getMonth())},[t,p,e,j]);const T=(()=>{const re=new Date(i.checkInDate),le=new Date(i.checkOutDate),pe=Math.ceil((le-re)/(1e3*60*60*24));return pe>0?pe:1})(),k=e.price*T,D=parseFloat(i.discountPercent)||0,F=k*D/100,B=k-F,M=i.gstType==="gst"?B*.025:0,L=i.gstType==="gst"?B*.025:0,A=i.gstType==="igst"?B*.05:0,U=M+L+A,P=B+U,I=re=>{const{name:le,value:pe}=re.target;s({...i,[le]:pe}),f("")},R=async(re,le,pe)=>{try{const Se=t.filter(ue=>{var fe;return(((fe=ue.roomId)==null?void 0:fe._id)||ue.roomId)===re&&ue.status!=="cancelled"}),K={};return Se.forEach(ue=>{const ye=new Date(ue.checkInDate),fe=new Date(ue.checkOutDate),Xe=new Date(ye);for(;Xe<fe;){const Ce=Xe.toISOString().split("T")[0],Le=Xe.getFullYear(),ne=Xe.getMonth();Le===le&&ne===pe&&(K[Ce]||(K[Ce]=[]),K[Ce].push({bookingId:ue._id,guestName:ue.userName,checkIn:ue.checkInDate,checkOut:ue.checkOutDate,status:ue.status})),Xe.setDate(Xe.getDate()+1)}}),K}catch(Se){return console.error("Error fetching room bookings:",Se),{}}},W=async(re,le,pe)=>{if(re){O(!0);try{const Se=await R(re,le,pe),K={},ue=new Date(le,pe+1,0).getDate();for(let ye=1;ye<=ue;ye++){const fe=`${le}-${String(pe+1).padStart(2,"0")}-${String(ye).padStart(2,"0")}`,Xe=Se[fe]||[];K[fe]={date:fe,bookings:Xe,hasBookings:Xe.length>0,isFullyBooked:!1}}C(K)}catch(Se){console.error("Error fetching monthly bookings:",Se)}finally{O(!1)}}},Q=re=>{v(re);const le=new Date;b(le),m(!0),C({}),e&&e._id&&W(e._id,le.getFullYear(),le.getMonth())},ge=re=>{const le=new Date(j);le.setMonth(le.getMonth()+re),b(le),e&&e._id&&W(e._id,le.getFullYear(),le.getMonth())},q=re=>{const le=j.getFullYear(),pe=String(j.getMonth()+1).padStart(2,"0"),Se=String(re).padStart(2,"0"),K=`${le}-${pe}-${Se}`;s(x==="checkIn"?{...i,checkInDate:K}:{...i,checkOutDate:K}),m(!1)},Y=re=>{const le=new Date;return le.setHours(0,0,0,0),new Date(j.getFullYear(),j.getMonth(),re)<le},z=re=>{const le=j.getFullYear(),pe=String(j.getMonth()+1).padStart(2,"0"),Se=String(re).padStart(2,"0"),K=`${le}-${pe}-${Se}`,ue=y[K];return(ue==null?void 0:ue.hasBookings)||!1},ee=re=>{const le=re.getFullYear(),pe=re.getMonth(),Se=new Date(le,pe+1,0).getDate(),K=new Date(le,pe,1).getDay();return{daysInMonth:Se,firstDay:K}},H=async re=>{var le,pe;re.preventDefault(),d(!0),f("");try{if(!((le=i.guestName)!=null&&le.trim()))throw new Error("Guest name is required");if(!((pe=i.guestPhone)!=null&&pe.trim()))throw new Error("Guest phone number is required");if(!i.checkInDate)throw new Error("Check-in date is required");if(!i.checkOutDate)throw new Error("Check-out date is required");if(!/^[0-9]{10}$/.test(i.guestPhone.replace(/\D/g,"")))throw new Error("Please enter a valid 10-digit phone number");const K=new Date(i.checkInDate),ue=new Date(i.checkOutDate),ye=new Date;if(ye.setHours(0,0,0,0),K<ye)throw new Error("Check-in date cannot be in the past");if(ue<=K)throw new Error("Check-out date must be after check-in date");if(i.aadhaarNumber&&i.aadhaarNumber.trim()&&!/^\d{12}$/.test(i.aadhaarNumber.trim()))throw new Error("Aadhaar number must be exactly 12 digits");if(i.panNumber&&i.panNumber.trim()&&!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(i.panNumber.trim().toUpperCase()))throw new Error("PAN number must be in format: ABCDE1234F");const fe=parseFloat(i.amountPaid)||0,Xe=i.paymentMethod||"cash",Ce={roomId:e._id,branchId:e.branchId,userName:i.guestName,userPhone:i.guestPhone,userEmail:i.guestEmail,guestGstNumber:i.guestGstNumber,aadhaarNumber:i.aadhaarNumber?i.aadhaarNumber.trim():"",panNumber:i.panNumber?i.panNumber.trim().toUpperCase():"",checkInDate:i.checkInDate,checkOutDate:i.checkOutDate,checkInTime:i.checkInTime,checkOutTime:i.checkOutTime,nights:T,baseAmount:k,discountPercent:D||0,discountAmount:F||0,gstType:i.gstType,cgst:M,sgst:L,igst:A,totalPrice:P,amountPaid:fe,cashAmount:Xe==="cash"?fe:0,onlineAmount:Xe==="online"?fe:0,status:"checked-in",paymentStatus:fe>=P?"paid":"pending",payments:fe>0?[{amount:fe,method:Xe,date:new Date}]:[]};await a(Ce),r()}catch(Se){console.error("Booking error:",Se);let K="Failed to book room";if(Se.response){const{status:ue,data:ye}=Se.response;ue===400?ye.message?K=ye.message:ye.error?K=ye.error:typeof ye=="string"?K=ye:K="Invalid booking data. Please check all required fields.":ue===404?K="Room not found. Please refresh and try again.":ue===409?K="Room is already booked for the selected dates.":ue>=500&&(K="Server error. Please try again later.")}else Se.request?K="Network error. Please check your connection and try again.":K=Se.message||"An unexpected error occurred";f(K)}finally{d(!1)}};return n.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:[n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white",position:"relative",zIndex:10},children:[n.jsxs("h3",{style:{margin:0},children:["Book Room ",e.roomNumber]}),n.jsx("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px"},children:""})]}),u&&n.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #fecaca",position:"relative",zIndex:10},children:[n.jsx(fr,{size:16}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:u}),n.jsx("button",{onClick:()=>f(""),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontSize:"18px",padding:"0 4px"},children:""})]}),n.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:n.jsxs("form",{onSubmit:H,children:[n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Room Details"}),n.jsxs("p",{style:{margin:"5px 0"},children:[n.jsx("strong",{children:"Type:"})," ",e.roomType]}),n.jsxs("p",{style:{margin:"5px 0"},children:[n.jsx("strong",{children:"Floor:"})," ",e.floor]}),n.jsxs("p",{style:{margin:"5px 0"},children:[n.jsx("strong",{children:"Basic Price:"})," ",e.price,"/night ",n.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:"(excl. GST)"})]})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(Ol,{size:14,style:{marginRight:"6px"}}),"Guest Name *"]}),n.jsx("input",{type:"text",name:"guestName",value:i.guestName,onChange:I,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest name"})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(Ai,{size:14,style:{marginRight:"6px"}}),"Phone *"]}),n.jsx("input",{type:"tel",name:"guestPhone",value:i.guestPhone,onChange:I,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter phone number"})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(Js,{size:14,style:{marginRight:"6px"}}),"Email"]}),n.jsx("input",{type:"email",name:"guestEmail",value:i.guestEmail,onChange:I,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter email (optional)"})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[n.jsx("h4",{style:{margin:"0 0 8px",fontSize:"16px",color:"#334155",fontWeight:"600"},children:"Identity Documents (Optional)"}),n.jsx("p",{style:{margin:"0 0 20px",fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:"Enter Aadhaar card and/or PAN card numbers for guest verification. Both are optional but recommended for corporate bookings."}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:" Aadhaar Number"}),n.jsx("input",{type:"text",name:"aadhaarNumber",value:i.aadhaarNumber||"",onChange:I,style:{width:"100%",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"},placeholder:"Enter 12-digit Aadhaar number",maxLength:12,pattern:"[0-9]{12}"}),n.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"12-digit number (e.g., 123456789012)"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:" PAN Number"}),n.jsx("input",{type:"text",name:"panNumber",value:i.panNumber||"",onChange:re=>{const le=re.target.value.toUpperCase();I({target:{name:"panNumber",value:le}})},style:{width:"100%",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",textTransform:"uppercase"},placeholder:"Enter PAN number",maxLength:10,pattern:"[A-Z]{5}[0-9]{4}[A-Z]{1}"}),n.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"10-character format (e.g., ABCDE1234F)"})]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(an,{size:14,style:{marginRight:"6px"}}),"Check-in Date"]}),n.jsxs("button",{type:"button",onClick:()=>Q("checkIn"),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(an,{size:16}),i.checkInDate?new Date(i.checkInDate).toLocaleDateString():"Select Date"]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-out Date"}),n.jsxs("button",{type:"button",onClick:()=>Q("checkOut"),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(an,{size:16}),i.checkOutDate?new Date(i.checkOutDate).toLocaleDateString():"Select Date"]})]})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"GST Option"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:i.gstType==="none"?"2px solid #4f46e5":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:i.gstType==="none"?"#eef2ff":"white"},children:[n.jsx("input",{type:"radio",name:"gstType",value:"none",checked:i.gstType==="none",onChange:I}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"500"},children:"Without GST"}),n.jsx("span",{style:{display:"block",fontSize:"12px",color:"#6b7280"},children:"Basic price only"})]})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:i.gstType==="gst"?"2px solid #4f46e5":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:i.gstType==="gst"?"#eef2ff":"white"},children:[n.jsx("input",{type:"radio",name:"gstType",value:"gst",checked:i.gstType==="gst",onChange:I}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"500"},children:"With GST (Within State)"}),n.jsx("span",{style:{display:"block",fontSize:"12px",color:"#6b7280"},children:"CGST 2.5% + SGST 2.5% = 5%"})]})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:i.gstType==="igst"?"2px solid #4f46e5":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:i.gstType==="igst"?"#eef2ff":"white"},children:[n.jsx("input",{type:"radio",name:"gstType",value:"igst",checked:i.gstType==="igst",onChange:I}),n.jsxs("div",{children:[n.jsx("span",{style:{fontWeight:"500"},children:"With IGST (Out of State)"}),n.jsx("span",{style:{display:"block",fontSize:"12px",color:"#6b7280"},children:"IGST 5%"})]})]})]})]}),(i.gstType==="gst"||i.gstType==="igst")&&n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Guest GST Number"}),n.jsx("input",{type:"text",name:"guestGstNumber",value:i.guestGstNumber,onChange:I,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest's GST number (e.g., 22AAAAA0000A1Z5)",maxLength:15}),n.jsx("span",{style:{fontSize:"11px",color:"#6b7280"},children:"15-digit GST Identification Number"})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Discount (%)"}),n.jsx("input",{type:"number",name:"discountPercent",value:i.discountPercent,onChange:I,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter discount percentage (0-100)",min:"0",max:"100",step:"0.01"}),D>0&&n.jsxs("span",{style:{fontSize:"12px",color:"#059669"},children:["Discount Amount: ",F.toFixed(2)]})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Price Summary"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[n.jsxs("span",{children:["Basic Price (",e.price," x ",T," night",T>1?"s":"",")"]}),n.jsxs("span",{children:["",k.toFixed(2)]})]}),D>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#059669",fontSize:"14px"},children:[n.jsxs("span",{children:["Discount (",D,"%)"]}),n.jsxs("span",{children:["- ",F.toFixed(2)]})]}),D>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontWeight:"500"},children:[n.jsx("span",{children:"Amount After Discount"}),n.jsxs("span",{children:["",B.toFixed(2)]})]}),i.gstType==="gst"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#6b7280",fontSize:"14px"},children:[n.jsx("span",{children:"CGST (2.5%)"}),n.jsxs("span",{children:["",M.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#6b7280",fontSize:"14px"},children:[n.jsx("span",{children:"SGST (2.5%)"}),n.jsxs("span",{children:["",L.toFixed(2)]})]})]}),i.gstType==="igst"&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#6b7280",fontSize:"14px"},children:[n.jsx("span",{children:"IGST (5%)"}),n.jsxs("span",{children:["",A.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",borderTop:"1px solid #e5e7eb",paddingTop:"10px",marginTop:"10px"},children:[n.jsx("span",{children:"Total Amount"}),n.jsxs("span",{children:["",P.toFixed(2)]})]})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Amount Paid ()"}),n.jsx("input",{type:"number",name:"amountPaid",value:i.amountPaid,onChange:I,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Enter amount paid (Total: ${P.toFixed(2)})`,min:"0",max:P}),i.amountPaid&&parseFloat(i.amountPaid)<P&&n.jsxs("span",{style:{fontSize:"12px",color:"#f59e0b"},children:["Balance Due: ",(P-parseFloat(i.amountPaid||0)).toFixed(2)]}),i.amountPaid&&parseFloat(i.amountPaid)>=P&&n.jsx("span",{style:{fontSize:"12px",color:"#059669"},children:" Fully Paid"})]}),i.amountPaid&&parseFloat(i.amountPaid)>0&&n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Payment Method"}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:i.paymentMethod==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:i.paymentMethod==="cash"?"#f0fdf4":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:i.paymentMethod==="cash",onChange:I,style:{display:"none"}}),n.jsx("span",{style:{fontSize:"20px"},children:""}),n.jsx("span",{style:{fontWeight:"500",color:i.paymentMethod==="cash"?"#059669":"#374151"},children:"Cash"})]}),n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:i.paymentMethod==="online"?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:i.paymentMethod==="online"?"#eff6ff":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:i.paymentMethod==="online",onChange:I,style:{display:"none"}}),n.jsx("span",{style:{fontSize:"20px"},children:""}),n.jsx("span",{style:{fontWeight:"500",color:i.paymentMethod==="online"?"#3b82f6":"#374151"},children:"Online"})]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e5e7eb"},children:[n.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"12px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l,style:{flex:1,padding:"12px",border:"none",borderRadius:"6px",backgroundColor:l?"#9ca3af":"#4f46e5",color:"white",cursor:l?"not-allowed":"pointer",fontWeight:"500"},children:l?"Booking...":"Confirm Booking"})]})]})})]}),p&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",width:"90%",maxWidth:"400px",maxHeight:"80vh",overflow:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("button",{onClick:()=>ge(-1),disabled:E,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",padding:"5px"},children:""}),n.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:j.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>ge(1),disabled:E,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",padding:"5px"},children:""})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"15px",padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"6px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#22c55e"}}),n.jsx("span",{style:{fontSize:"12px"},children:"Available"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#dc2626"}}),n.jsx("span",{style:{fontSize:"12px"},children:"Booked"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#9ca3af"}}),n.jsx("span",{style:{fontSize:"12px"},children:"Past"})]})]}),E&&n.jsx("div",{style:{textAlign:"center",padding:"10px",color:"#6b7280"},children:"Loading availability..."}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"10px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(re=>n.jsx("div",{style:{textAlign:"center",padding:"8px",fontSize:"12px",fontWeight:"600",color:"#6b7280"},children:re},re))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"20px"},children:(()=>{const{daysInMonth:re,firstDay:le}=ee(j),pe=[];for(let Se=0;Se<le;Se++)pe.push(n.jsx("div",{style:{aspectRatio:"1",padding:"8px"}},`empty-${Se}`));for(let Se=1;Se<=re;Se++){const K=Y(Se),ue=z(Se),ye=!K;pe.push(n.jsxs("button",{onClick:()=>ye&&q(Se),disabled:!ye,style:{aspectRatio:"1",border:ye?"1px solid #e5e7eb":"1px solid #fca5a5",borderRadius:"6px",backgroundColor:K?"#f3f4f6":ye?"white":"#fee2e2",color:K?"#9ca3af":ye?"#000":"#dc2626",cursor:ye?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseOver:fe=>{ye&&(fe.target.style.backgroundColor="#f0f9ff",fe.target.style.borderColor="#3b82f6")},onMouseOut:fe=>{ye&&(fe.target.style.backgroundColor="white",fe.target.style.borderColor="#e5e7eb")},children:[Se,ue&&!K&&n.jsx("div",{style:{position:"absolute",top:"3px",right:"3px",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#dc2626",border:"1px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"}}),!ue&&!K&&n.jsx("div",{style:{position:"absolute",top:"3px",right:"3px",width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#22c55e",opacity:.7}})]},Se))}return pe})()}),n.jsx("div",{style:{textAlign:"center",fontSize:"11px",color:"#6b7280",marginBottom:"15px",padding:"8px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:" Available for booking   Already booked (unavailable)   Today  Red background = Date conflicts with existing bookings"}),n.jsx("button",{onClick:()=>m(!1),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer",fontWeight:"500"},children:"Cancel"})]})})]})},Kfe=({booking:e,onClose:t,onAddBill:r,onRemoveBill:a})=>{var j,b,y;const[i,s]=N.useState(""),[l,d]=N.useState(""),[u,f]=N.useState(!1),[p,m]=N.useState(""),x=async C=>{C.preventDefault(),m(""),f(!0);try{if(!i||parseFloat(i)<=0)throw new Error("Please enter a valid amount");if(!l.trim())throw new Error("Please enter a description");await r(e._id,{amount:parseFloat(i),description:l.trim()}),s(""),d("")}catch(E){m(E.message)}finally{f(!1)}},v=C=>new Date(C).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f59e0b",color:"white"},children:[n.jsxs("h3",{style:{margin:0},children:["Restaurant Bills - Room ",(j=e.roomId)==null?void 0:j.roomNumber]}),n.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),n.jsxs("div",{style:{padding:"20px"},children:[n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[n.jsxs("h4",{style:{margin:"0 0 10px"},children:["Guest: ",e.userName]}),n.jsxs("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:["Room ",(b=e.roomId)==null?void 0:b.roomNumber,"  ",e.userPhone]})]}),p&&n.jsx("div",{style:{padding:"10px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",marginBottom:"15px"},children:p}),n.jsxs("form",{onSubmit:x,style:{marginBottom:"30px",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 15px",color:"#374151"},children:"Add Restaurant Bill"}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Amount ()"}),n.jsx("input",{type:"number",value:i,onChange:C=>s(C.target.value),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter amount",min:"0",step:"0.01",required:!0})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Description"}),n.jsx("input",{type:"text",value:l,onChange:C=>d(C.target.value),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"e.g., Lunch, Dinner, Room Service",required:!0})]}),n.jsx("button",{type:"submit",disabled:u,style:{padding:"10px 20px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:u?"not-allowed":"pointer",fontWeight:"500"},children:u?"Adding...":"Add Bill"})]}),n.jsxs("div",{children:[n.jsxs("h4",{style:{margin:"0 0 15px",color:"#374151"},children:["Restaurant Bills (",((y=e.restaurantBills)==null?void 0:y.length)||0,")",e.restaurantTotal>0&&n.jsxs("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"10px"},children:["Total: ",e.restaurantTotal.toFixed(2)]})]}),e.restaurantBills&&e.restaurantBills.length>0?n.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:e.restaurantBills.map((C,E)=>n.jsxs("div",{style:{padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e5e7eb",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontWeight:"500",color:"#374151"},children:C.description}),n.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:[v(C.date||C.createdAt),"  Added by ",C.addedBy||"Receptionist"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[n.jsxs("span",{style:{fontWeight:"600",color:"#dc2626"},children:["",C.amount.toFixed(2)]}),n.jsx("button",{onClick:()=>a(e._id,C._id),style:{padding:"4px 8px",backgroundColor:"#fee2e2",color:"#dc2626",border:"1px solid #fecaca",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Remove bill",children:"Remove"})]})]},C._id||E))}):n.jsx("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"No restaurant bills added yet."})]}),n.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:n.jsx("button",{onClick:t,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Close"})})]})]})})},Vfe=({booking:e,onClose:t,onCheckout:r,onUpdatePayment:a})=>{var D;const[i,s]=N.useState(""),[l,d]=N.useState("cash"),[u,f]=N.useState(!1),[p,m]=N.useState(""),x=e.totalPrice||0,v=e.restaurantTotal||0,j=x+v,b=e.amountPaid||0,y=e.cashAmount||0,C=e.onlineAmount||0,E=j-b,O=async()=>{const F=parseFloat(i)||0;if(F<=0){m("Please enter a valid amount");return}f(!0),m("");try{await a(e._id,b+F,l,F),s("")}catch(B){m(B.message||"Failed to update payment")}finally{f(!1)}},S=async()=>{f(!0),m("");try{await r(e._id),t()}catch(F){m(F.message||"Failed to checkout")}finally{f(!1)}},T=F=>F?new Date(F).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"",k=()=>{var M,L,A;const F=window.open("","_blank"),B=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Hotel Virat - Bill</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 15px; }
          .header img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
          .header h1 { font-size: 24px; margin-bottom: 5px; }
          .header p { font-size: 12px; color: #666; }
          .header .gst { font-size: 11px; color: #333; font-weight: bold; margin-top: 5px; }
          .bill-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .bill-info p { font-size: 13px; margin: 4px 0; }
          .guest-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .guest-info h3 { font-size: 14px; margin-bottom: 8px; }
          .guest-info p { font-size: 13px; margin: 4px 0; }
          .stay-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .stay-info h3 { font-size: 14px; margin-bottom: 8px; }
          .stay-info p { font-size: 13px; margin: 4px 0; }
          .charges { margin-bottom: 15px; }
          .charges h3 { font-size: 14px; margin-bottom: 8px; }
          .charge-row { display: flex; justify-content: space-between; font-size: 13px; margin: 5px 0; }
          .charge-row.total { font-weight: bold; font-size: 16px; border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; }
          .footer { text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px dashed #ccc; }
          .footer p { font-size: 12px; color: #666; margin: 3px 0; }
          @media print { body { padding: 10px; } }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${Ml}" alt="Hotel Virat Logo" />
          <h1>HOTEL VIRAT</h1>
          <p>Your Comfort, Our Priority</p>
          <p class="gst">GSTIN: 29AGZPV1558K2Z6</p>
        </div>
        
        <div class="bill-info">
          <p><strong>Bill No:</strong> ${((M=e._id)==null?void 0:M.slice(-8).toUpperCase())||"N/A"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p><strong>Room No:</strong> ${((L=e.roomId)==null?void 0:L.roomNumber)||"N/A"}</p>
          <p><strong>Room Type:</strong> ${((A=e.roomId)==null?void 0:A.roomType)||"N/A"}</p>
        </div>
        
        <div class="guest-info">
          <h3>Guest Details</h3>
          <p><strong>Name:</strong> ${e.userName||"N/A"}</p>
          <p><strong>Phone:</strong> ${e.userPhone||"N/A"}</p>
          ${e.userEmail?`<p><strong>Email:</strong> ${e.userEmail}</p>`:""}
          ${e.guestGstNumber?`<p><strong>GSTIN:</strong> ${e.guestGstNumber}</p>`:""}
        </div>
        
        <div class="stay-info">
          <h3>Stay Details</h3>
          <p><strong>Check-in:</strong> ${T(e.checkInDate)} at ${e.checkInTime||"12:00"}</p>
          <p><strong>Check-out:</strong> ${T(e.checkOutDate)} at ${e.checkOutTime||"11:00"}</p>
          <p><strong>No. of Nights:</strong> ${e.nights||1}</p>
        </div>
        
        <div class="charges">
          <h3>Room Charges</h3>
          <div class="charge-row">
            <span>Room Charges (${e.nights||1} night${(e.nights||1)>1?"s":""})</span>
            <span>${(e.baseAmount||0).toFixed(2)}</span>
          </div>
          ${e.gstType==="gst"?`
            <div class="charge-row">
              <span>CGST (2.5%)</span>
              <span>${(e.cgst||0).toFixed(2)}</span>
            </div>
            <div class="charge-row">
              <span>SGST (2.5%)</span>
              <span>${(e.sgst||0).toFixed(2)}</span>
            </div>
          `:""}
          ${e.gstType==="igst"?`
            <div class="charge-row">
              <span>IGST (5%)</span>
              <span>${(e.igst||0).toFixed(2)}</span>
            </div>
          `:""}
          <div class="charge-row total">
            <span>Total Amount</span>
            <span>${x.toFixed(2)}</span>
          </div>
        </div>
        
        <div class="footer">
          <p>Thank you for staying with us!</p>
          <p>We hope to see you again soon.</p>
          <p style="margin-top: 10px; font-size: 10px;">This is a computer generated bill.</p>
        </div>
      </body>
      </html>
    `;F.document.write(B),F.document.close(),F.focus(),setTimeout(()=>{F.print()},250)};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fef2f2"},children:[n.jsxs("h3",{style:{margin:0},children:["Room ",(D=e.roomId)==null?void 0:D.roomNumber," - Checkout"]}),n.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px"},children:""})]}),n.jsxs("div",{style:{padding:"20px"},children:[p&&n.jsxs("div",{style:{padding:"10px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),p]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Guest Details"}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[n.jsx("strong",{children:"Name:"})," ",e.userName]}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[n.jsx("strong",{children:"Phone:"})," ",e.userPhone]}),e.userEmail&&n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[n.jsx("strong",{children:"Email:"})," ",e.userEmail]}),e.guestGstNumber&&n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[n.jsx("strong",{children:"GSTIN:"})," ",e.guestGstNumber]})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Stay Details"}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[n.jsx("strong",{children:"Check-in:"})," ",T(e.checkInDate)," at ",e.checkInTime]}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[n.jsx("strong",{children:"Check-out:"})," ",T(e.checkOutDate)," at ",e.checkOutTime]}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[n.jsx("strong",{children:"Nights:"})," ",e.nights]}),e.actualCheckInTime&&n.jsxs("p",{style:{margin:"8px 0 5px",fontSize:"13px",color:"#059669",fontWeight:"500"},children:[" ",n.jsx("strong",{children:"Actual Check-in:"})," ",new Date(e.actualCheckInTime).toLocaleString()]}),e.actualCheckOutTime&&n.jsxs("p",{style:{margin:"5px 0",fontSize:"13px",color:"#059669",fontWeight:"500"},children:[" ",n.jsx("strong",{children:"Actual Check-out:"})," ",new Date(e.actualCheckOutTime).toLocaleString()]})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#fef3c7",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Payment Summary"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px"},children:[n.jsx("span",{children:"Room Charges:"}),n.jsxs("span",{children:["",x.toFixed(2)]})]}),v>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px",color:"#dc2626"},children:[n.jsx("span",{children:"Restaurant Bills:"}),n.jsxs("span",{children:["",v.toFixed(2)]})]}),e.gstType&&e.gstType!=="none"&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px",color:"#6b7280"},children:[n.jsxs("span",{children:["GST (",e.gstType==="gst"?"CGST+SGST":"IGST","):"]}),n.jsxs("span",{children:["",((e.cgst||0)+(e.sgst||0)+(e.igst||0)).toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontWeight:"bold",borderTop:"1px solid #e5e7eb",paddingTop:"8px"},children:[n.jsx("span",{children:"Grand Total:"}),n.jsxs("span",{children:["",j.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px",color:"#059669"},children:[n.jsx("span",{children:"Amount Paid:"}),n.jsxs("span",{children:["",b.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"16px",color:E>0?"#dc2626":"#059669"},children:[n.jsx("span",{children:E>0?"Balance Due:":"Status:"}),n.jsx("span",{children:E>0?`${E.toFixed(2)}`:" Fully Paid"})]})]}),(y>0||C>0)&&n.jsxs("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f0fdf4",borderRadius:"6px",fontSize:"13px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[n.jsx("span",{children:" Cash Received:"}),n.jsxs("span",{style:{color:"#059669",fontWeight:"500"},children:["",y.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx("span",{children:" Online Received:"}),n.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:["",C.toFixed(2)]})]})]}),E>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Add Payment ()"}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[n.jsx("input",{type:"number",value:i,onChange:F=>s(F.target.value),style:{flex:1,padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Max: ${E.toFixed(2)}`,min:"0",max:E}),n.jsx("button",{onClick:O,disabled:u,style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:u?"not-allowed":"pointer"},children:u?"...":"Add"})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",padding:"10px",border:l==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l==="cash"?"#f0fdf4":"white"},children:[n.jsx("input",{type:"radio",name:"checkoutPaymentMethod",value:"cash",checked:l==="cash",onChange:F=>d(F.target.value),style:{display:"none"}}),n.jsx("span",{children:""}),n.jsx("span",{style:{fontWeight:"500",fontSize:"14px",color:l==="cash"?"#059669":"#374151"},children:"Cash"})]}),n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",padding:"10px",border:l==="online"?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l==="online"?"#eff6ff":"white"},children:[n.jsx("input",{type:"radio",name:"checkoutPaymentMethod",value:"online",checked:l==="online",onChange:F=>d(F.target.value),style:{display:"none"}}),n.jsx("span",{children:""}),n.jsx("span",{style:{fontWeight:"500",fontSize:"14px",color:l==="online"?"#3b82f6":"#374151"},children:"Online"})]})]}),n.jsxs("button",{onClick:()=>s(E.toString()),style:{padding:"6px 12px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:["Pay Full Balance (",E.toFixed(2),")"]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[n.jsx("button",{onClick:t,style:{flex:1,minWidth:"100px",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer"},children:"Close"}),e.gstType&&e.gstType!=="none"&&n.jsxs("button",{onClick:k,style:{flex:1,minWidth:"100px",padding:"12px",border:"none",borderRadius:"6px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[n.jsx(wi,{size:16})," Print Bill"]}),n.jsx("button",{onClick:S,disabled:u,style:{flex:1,minWidth:"100px",padding:"12px",border:"none",borderRadius:"6px",backgroundColor:E>0?"#f59e0b":"#059669",color:"white",cursor:u?"not-allowed":"pointer",fontWeight:"500"},children:u?"Processing...":E>0?`Checkout (${E.toFixed(2)} due)`:" Checkout (Paid)"})]})]})]})})},Yfe=({rooms:e,allBookings:t,onClose:r,onBulkBook:a})=>{const[i,s]=N.useState([]),[l,d]=N.useState({guestName:"",guestPhone:"",guestEmail:"",guestGstNumber:"",aadhaarNumber:"",panNumber:"",checkInDate:new Date().toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkInTime:"12:00",checkOutTime:"11:00",gstType:"none",discountPercent:"",amountPaid:"",paymentMethod:"cash"}),[u,f]=N.useState(!1),[p,m]=N.useState(""),v=(()=>{const U=new Date(l.checkInDate),P=new Date(l.checkOutDate),I=Math.ceil((P-U)/(1e3*60*60*24));return I>0?I:1})(),j=i.reduce((U,P)=>U+P.price*v,0),b=parseFloat(l.discountPercent)||0,y=j*b/100,C=j-y,E=l.gstType==="gst"?C*.025:0,O=l.gstType==="gst"?C*.025:0,S=l.gstType==="igst"?C*.05:0,T=E+O+S,k=C+T,D=U=>{const{name:P,value:I}=U.target;d({...l,[P]:I}),m("")},F=U=>{if(!M(U,l.checkInDate,l.checkOutDate)&&l.checkInDate&&l.checkOutDate){const I=new Date(l.checkInDate),R=new Date(l.checkOutDate),W=(t==null?void 0:t.filter(Q=>{var z;if((((z=Q.roomId)==null?void 0:z._id)||Q.roomId)!==U._id||Q.status==="cancelled"||Q.status==="checked-out")return!1;const q=new Date(Q.checkInDate),Y=new Date(Q.checkOutDate);return I<Y&&R>q}))||[];if(W.length>0){const Q=W[0],ge=Q.userName||"Unknown Guest",q=new Date(Q.checkInDate).toLocaleDateString(),Y=new Date(Q.checkOutDate).toLocaleDateString();window.confirm(`Room ${U.roomNumber} is already booked by ${ge} (${q} - ${Y}) for the selected dates.

Click OK to view booking details or Cancel to close.`)&&alert(`Booking Details:

Guest: ${ge}
Phone: ${Q.userPhone||"N/A"}
Check-in: ${q}
Check-out: ${Y}
Status: ${Q.status}
Total: ${Q.totalPrice||0}`);return}}s(I=>I.find(W=>W._id===U._id)?I.filter(W=>W._id!==U._id):[...I,U])},B=async U=>{var P,I;U.preventDefault(),f(!0),m("");try{if(i.length===0)throw new Error("Please select at least one room");if(!((P=l.guestName)!=null&&P.trim()))throw new Error("Guest name is required");if(!((I=l.guestPhone)!=null&&I.trim()))throw new Error("Guest phone number is required");if(!/^[0-9]{10}$/.test(l.guestPhone.replace(/\D/g,"")))throw new Error("Please enter a valid 10-digit phone number");const W=new Date(l.checkInDate),Q=new Date(l.checkOutDate),ge=new Date;if(ge.setHours(0,0,0,0),W<ge)throw new Error("Check-in date cannot be in the past");if(Q<=W)throw new Error("Check-out date must be after check-in date");const q=[];if(i.forEach(H=>{const re=(t==null?void 0:t.filter(pe=>{var K;return(((K=pe.roomId)==null?void 0:K._id)||pe.roomId)===H._id&&pe.status!=="cancelled"&&pe.status!=="checked-out"}))||[];if(re.some(pe=>{const Se=new Date(pe.checkInDate),K=new Date(pe.checkOutDate);return W<K&&Q>Se})){const pe=re.filter(Se=>{const K=new Date(Se.checkInDate),ue=new Date(Se.checkOutDate);return W<ue&&Q>K});q.push({room:H,conflicts:pe})}}),q.length>0){const H=q.map(({room:re,conflicts:le})=>{const pe=le.map(Se=>`${Se.userName} (${new Date(Se.checkInDate).toLocaleDateString()} - ${new Date(Se.checkOutDate).toLocaleDateString()})`).join(", ");return`Room ${re.roomNumber}: ${pe}`}).join("; ");throw new Error(`The following rooms have booking conflicts: ${H}. Please remove these rooms or select different dates.`)}const Y=parseFloat(l.amountPaid)||0,z=l.paymentMethod||"cash",ee={guestName:l.guestName,guestPhone:l.guestPhone,guestEmail:l.guestEmail,guestGstNumber:l.guestGstNumber,aadhaarNumber:l.aadhaarNumber?l.aadhaarNumber.trim():"",panNumber:l.panNumber?l.panNumber.trim().toUpperCase():"",checkInDate:l.checkInDate,checkOutDate:l.checkOutDate,checkInTime:l.checkInTime,checkOutTime:l.checkOutTime,nights:v,gstType:l.gstType,discountPercent:b||0,discountAmount:y||0,cgst:E,sgst:O,igst:S,totalAmount:k,amountPaid:Y,cashAmount:z==="cash"?Y:0,onlineAmount:z==="online"?Y:0,paymentStatus:Y>=k?"paid":"pending",selectedRooms:i.map(H=>({roomId:H._id,roomNumber:H.roomNumber,roomType:H.roomType,price:H.price,baseAmount:H.price*v}))};await a(ee),r()}catch(R){console.error("Bulk booking error:",R),m(R.message||"Failed to create bulk booking")}finally{f(!1)}},M=(U,P,I)=>{if(!P||!I)return!0;const R=new Date(P),W=new Date(I);return!((t==null?void 0:t.filter(q=>{var z;return(((z=q.roomId)==null?void 0:z._id)||q.roomId)===U._id&&q.status!=="cancelled"&&q.status!=="checked-out"}))||[]).some(q=>{const Y=new Date(q.checkInDate),z=new Date(q.checkOutDate);return R<z&&W>Y})},L=e.filter(U=>M(U,l.checkInDate,l.checkOutDate)).sort((U,P)=>{const I=parseInt(U.roomNumber)||0,R=parseInt(P.roomNumber)||0;return I-R}),A=e.map(U=>({...U,isAvailable:M(U,l.checkInDate,l.checkOutDate)})).sort((U,P)=>{const I=parseInt(U.roomNumber)||0,R=parseInt(P.roomNumber)||0;return I-R});return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"95%",maxWidth:"900px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#7c3aed",color:"white"},children:[n.jsx("h3",{style:{margin:0},children:" Bulk Booking - Multiple Rooms"}),n.jsx("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),p&&n.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #fecaca"},children:[n.jsx(fr,{size:16}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:p})]}),n.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",gap:"20px"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("h4",{style:{margin:"0 0 15px",color:"#374151"},children:["Select Rooms (",i.length," selected)"]}),L.length===0&&l.checkInDate&&l.checkOutDate?n.jsxs("div",{style:{padding:"20px",textAlign:"center",border:"1px solid #fbbf24",borderRadius:"8px",backgroundColor:"#fef3c7",color:"#92400e"},children:[n.jsx(fr,{size:24,style:{marginBottom:"10px"}}),n.jsx("p",{style:{margin:0,fontWeight:"500"},children:"No rooms available for selected dates"}),n.jsx("p",{style:{margin:"5px 0 0",fontSize:"14px"},children:"All rooms are booked. Click on booked rooms to see details."})]}):null,n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"10px"},children:A.map(U=>{const P=i.find(R=>R._id===U._id),I=U.isAvailable;return n.jsxs("div",{onClick:()=>F(U),style:{padding:"12px",margin:"8px 0",border:`2px solid ${P?"#7c3aed":I?"#e5e7eb":"#fca5a5"}`,borderRadius:"8px",backgroundColor:P?"#f3f4f6":I?"white":"#fef2f2",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s",opacity:I?1:.7},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"600",color:I?"#374151":"#dc2626"},children:["Room ",U.roomNumber,!I&&n.jsx("span",{style:{fontSize:"12px",marginLeft:"8px",color:"#dc2626"},children:" BOOKED"})]}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[U.roomType,"  Floor ",U.floor]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("div",{style:{fontWeight:"600",color:I?"#059669":"#6b7280"},children:["",U.price,"/night"]}),P&&n.jsx("div",{style:{fontSize:"12px",color:"#7c3aed",fontWeight:"500"},children:" Selected"}),!I&&!P&&n.jsx("div",{style:{fontSize:"12px",color:"#dc2626",fontWeight:"500"},children:"Click for details"})]})]},U._id)})})]}),n.jsx("div",{style:{flex:1},children:n.jsxs("form",{onSubmit:B,children:[n.jsx("h4",{style:{margin:"0 0 15px",color:"#374151"},children:"Guest Details"}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(Ol,{size:14,style:{marginRight:"6px"}}),"Guest Name *"]}),n.jsx("input",{type:"text",name:"guestName",value:l.guestName,onChange:D,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest name"})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(Ai,{size:14,style:{marginRight:"6px"}}),"Phone *"]}),n.jsx("input",{type:"tel",name:"guestPhone",value:l.guestPhone,onChange:D,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter phone number"})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(Js,{size:14,style:{marginRight:"6px"}}),"Email"]}),n.jsx("input",{type:"email",name:"guestEmail",value:l.guestEmail,onChange:D,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter email (optional)"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[n.jsxs("div",{children:[n.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[n.jsx(an,{size:14,style:{marginRight:"6px"}}),"Check-in Date"]}),n.jsx("input",{type:"date",name:"checkInDate",value:l.checkInDate,onChange:D,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-out Date"}),n.jsx("input",{type:"date",name:"checkOutDate",value:l.checkOutDate,onChange:D,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"GST Option"}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[n.jsx("input",{type:"radio",name:"gstType",value:"none",checked:l.gstType==="none",onChange:D}),n.jsx("span",{style:{fontSize:"14px"},children:"No GST"})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[n.jsx("input",{type:"radio",name:"gstType",value:"gst",checked:l.gstType==="gst",onChange:D}),n.jsx("span",{style:{fontSize:"14px"},children:"GST (5%)"})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[n.jsx("input",{type:"radio",name:"gstType",value:"igst",checked:l.gstType==="igst",onChange:D}),n.jsx("span",{style:{fontSize:"14px"},children:"IGST (5%)"})]})]})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Discount (%)"}),n.jsx("input",{type:"number",name:"discountPercent",value:l.discountPercent,onChange:D,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter discount percentage",min:"0",max:"100",step:"0.01"})]}),i.length>0&&n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Booking Summary"}),n.jsx("div",{style:{fontSize:"14px",marginBottom:"8px"},children:n.jsxs("strong",{children:[i.length," Room(s)  ",v," Night(s)"]})}),i.map(U=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"4px"},children:[n.jsxs("span",{children:["Room ",U.roomNumber," (",U.roomType,")"]}),n.jsxs("span",{children:["",(U.price*v).toFixed(2)]})]},U._id)),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[n.jsx("span",{children:n.jsx("strong",{children:"Subtotal"})}),n.jsx("span",{children:n.jsxs("strong",{children:["",j.toFixed(2)]})})]}),b>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#059669"},children:[n.jsxs("span",{children:["Discount (",b,"%)"]}),n.jsxs("span",{children:["- ",y.toFixed(2)]})]}),T>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#6b7280"},children:[n.jsx("span",{children:"GST"}),n.jsxs("span",{children:["",T.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"16px",marginTop:"8px",paddingTop:"8px",borderTop:"2px solid #374151"},children:[n.jsx("span",{children:"Grand Total"}),n.jsxs("span",{children:["",k.toFixed(2)]})]})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Amount Paid ()"}),n.jsx("input",{type:"number",name:"amountPaid",value:l.amountPaid,onChange:D,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Enter amount paid (Total: ${k.toFixed(2)})`,min:"0",max:k})]}),l.amountPaid&&parseFloat(l.amountPaid)>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Payment Method"}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:l.paymentMethod==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l.paymentMethod==="cash"?"#f0fdf4":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:l.paymentMethod==="cash",onChange:D,style:{display:"none"}}),n.jsx("span",{children:" Cash"})]}),n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:l.paymentMethod==="online"?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l.paymentMethod==="online"?"#eff6ff":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:l.paymentMethod==="online",onChange:D,style:{display:"none"}}),n.jsx("span",{children:" Online"})]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[n.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"12px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:u||i.length===0,style:{flex:1,padding:"12px",border:"none",borderRadius:"6px",backgroundColor:u||i.length===0?"#9ca3af":"#7c3aed",color:"white",cursor:u||i.length===0?"not-allowed":"pointer",fontWeight:"500"},children:u?"Creating...":`Book ${i.length} Room(s)`})]})]})})]})]})})},Xfe=()=>{const e=An(),[t,r]=N.useState(null),[a,i]=N.useState([]),[s,l]=N.useState([]),[d,u]=N.useState([]),[f,p]=N.useState(!0),[m,x]=N.useState(""),[v,j]=N.useState(""),[b,y]=N.useState(""),[C,E]=N.useState("all"),[O,S]=N.useState(null),[T,k]=N.useState(!1),[D,F]=N.useState(null),[B,M]=N.useState(!1),[L,A]=N.useState(!1),[U,P]=N.useState(!1),[I,R]=N.useState(!1),[W,Q]=N.useState(!1),[ge,q]=N.useState(!1),[Y,z]=N.useState(!1),[ee,H]=N.useState(!1),[re,le]=N.useState(!1),[pe,Se]=N.useState(!1),[K,ue]=N.useState("rooms"),[ye,fe]=N.useState(new Date().toISOString().split("T")[0]),[Xe,Ce]=N.useState("today");N.useEffect(()=>{const me=localStorage.getItem("userType"),ke=localStorage.getItem("receptionistData");if(me!=="receptionist"||!ke){e("/login");return}r(JSON.parse(ke))},[e]),N.useEffect(()=>{t&&Le()},[t]);const Le=async()=>{p(!0),x("");try{const me=await Yn.get("/room"),ke=me.data.rooms||me.data||[],Pe=await Yn.get("/room-booking");let it=Pe.data.bookings||Pe.data||[];it=it.map(Nt=>{const _t={...Nt};return Object.keys(_t).forEach(ot=>{const jt=_t[ot];jt&&typeof jt=="object"&&(jt.data||jt.file||jt.image||jt.logo)&&(console.warn(`Removing suspicious field from booking: ${ot}`,jt),delete _t[ot]),typeof jt=="string"&&jt.length>1e4&&(console.warn(`Removing large string field from booking: ${ot}`),delete _t[ot])}),_t});const pt=it.filter(Nt=>Nt.status==="checked-in");i(ke),l(pt),u(it)}catch(me){console.error("Error fetching data:",me),x("Failed to load rooms. Please try again.")}finally{p(!1)}},ne=me=>({status:"available",booking:null}),Ae=me=>{const ke=new Date().toISOString().split("T")[0],Pe=d.find(it=>{var ot;if((((ot=it.roomId)==null?void 0:ot._id)||it.roomId)!==me._id)return!1;const Nt=it.checkInDate.split("T")[0],_t=it.checkOutDate.split("T")[0];return ke>=Nt&&ke<_t&&it.status==="checked-in"});if(Pe){const it=Pe.userName||"Unknown Guest",pt=new Date(Pe.checkInDate).toLocaleDateString(),Nt=new Date(Pe.checkOutDate).toLocaleDateString();window.confirm(`Room ${me.roomNumber} is currently booked by ${it} (${pt} - ${Nt}).

Click OK to view booking details or Cancel to close.`)&&(F(Pe),H(!0));return}S(me),k(!0)},Ve=async me=>{var ke,Pe;try{const it=new Date(me.checkInDate),pt=new Date(me.checkOutDate),Nt=d.filter(ot=>{var mt;return(((mt=ot.roomId)==null?void 0:mt._id)||ot.roomId)===me.roomId&&ot.status!=="cancelled"&&ot.status!=="checked-out"});if(Nt.some(ot=>{const jt=new Date(ot.checkInDate),mt=new Date(ot.checkOutDate);return it<mt&&pt>jt})){const jt=Nt.filter(mt=>{const gt=new Date(mt.checkInDate),$t=new Date(mt.checkOutDate);return it<$t&&pt>gt}).map(mt=>`${mt.userName} (${new Date(mt.checkInDate).toLocaleDateString()} - ${new Date(mt.checkOutDate).toLocaleDateString()})`).join(", ");throw new Error(`Room is already booked for overlapping dates by: ${jt}. Please select different dates.`)}await Yn.post("/room-booking/walk-in",me),j("Room booked successfully!"),setTimeout(()=>j(""),3e3),await Le()}catch(it){throw new Error(((Pe=(ke=it.response)==null?void 0:ke.data)==null?void 0:Pe.message)||it.message||"Failed to book room")}},te=async(me,ke,Pe="cash",it=0)=>{var pt,Nt;try{await Yn.put(`/room-booking/${me}/payment`,{amountPaid:ke,paymentMethod:Pe,paymentAmount:it}),j("Payment updated successfully!"),setTimeout(()=>j(""),3e3),await Le();const _t=s.find(ot=>ot._id===me);_t&&F({..._t,amountPaid:ke})}catch(_t){throw new Error(((Nt=(pt=_t.response)==null?void 0:pt.data)==null?void 0:Nt.message)||"Failed to update payment")}},ce=async me=>{var ke,Pe;try{await Yn.put(`/room-booking/${me}/status`,{status:"checked-out"}),j("Guest checked out successfully! Room is now available."),setTimeout(()=>j(""),3e3),await Le()}catch(it){throw new Error(((Pe=(ke=it.response)==null?void 0:ke.data)==null?void 0:Pe.message)||"Failed to checkout")}},X=me=>{F(me),M(!0)},se=async(me,ke)=>{var Pe,it;try{await Yn.post(`/room-booking/${me}/restaurant-bill`,ke),j("Restaurant bill added successfully!"),setTimeout(()=>j(""),3e3),await Le();const pt=d.find(Nt=>Nt._id===me);pt&&F(pt)}catch(pt){throw new Error(((it=(Pe=pt.response)==null?void 0:Pe.data)==null?void 0:it.message)||"Failed to add restaurant bill")}},J=async(me,ke)=>{var Pe,it;try{await Yn.delete(`/room-booking/${me}/restaurant-bill/${ke}`),j("Restaurant bill removed successfully!"),setTimeout(()=>j(""),3e3),await Le();const pt=d.find(Nt=>Nt._id===me);pt&&F(pt)}catch(pt){throw new Error(((it=(Pe=pt.response)==null?void 0:Pe.data)==null?void 0:it.message)||"Failed to remove restaurant bill")}},Ne=async me=>{var ke,Pe;try{await Yn.post("/room-booking/advance",me),j("Advance booking created successfully!"),setTimeout(()=>j(""),3e3),await Le()}catch(it){throw new Error(((Pe=(ke=it.response)==null?void 0:ke.data)==null?void 0:Pe.message)||"Failed to create advance booking")}},Ge=async me=>{var ke,Pe,it;try{const pt=me.selectedRooms.reduce((ir,Zr)=>ir+Zr.baseAmount,0),Nt=me.discountPercent||0,_t=pt*Nt/100,ot=pt-_t,jt=me.gstType==="gst"?ot*.025:0,mt=me.gstType==="gst"?ot*.025:0,gt=me.gstType==="igst"?ot*.05:0,$t=ot+jt+mt+gt,Jt=`BULK_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Fr=me.selectedRooms.map((ir,Zr)=>{var ae;return{roomId:ir.roomId,branchId:(ae=a.find(xe=>xe._id===ir.roomId))==null?void 0:ae.branchId,bulkBookingId:Jt,isBulkBooking:!0,bulkBookingIndex:Zr,totalRoomsInBulk:me.selectedRooms.length,bulkRoomDetails:me.selectedRooms.map(xe=>({roomId:xe.roomId,roomNumber:xe.roomNumber,roomType:xe.roomType,price:xe.price,baseAmount:xe.baseAmount})),userName:`BULK: ${me.guestName} (${me.selectedRooms.length} rooms)`,userPhone:me.guestPhone,userEmail:me.guestEmail||"",guestGstNumber:me.guestGstNumber||"",aadhaarNumber:me.aadhaarNumber||"",panNumber:me.panNumber||"",checkInDate:me.checkInDate,checkOutDate:me.checkOutDate,checkInTime:me.checkInTime,checkOutTime:me.checkOutTime,nights:me.nights,baseAmount:ir.baseAmount,discountPercent:Nt,discountAmount:ir.baseAmount*Nt/100,gstType:me.gstType,cgst:me.gstType==="gst"?(ir.baseAmount-ir.baseAmount*Nt/100)*.025:0,sgst:me.gstType==="gst"?(ir.baseAmount-ir.baseAmount*Nt/100)*.025:0,igst:me.gstType==="igst"?(ir.baseAmount-ir.baseAmount*Nt/100)*.05:0,totalPrice:ir.baseAmount-ir.baseAmount*Nt/100+(me.gstType==="gst"?(ir.baseAmount-ir.baseAmount*Nt/100)*.05:0)+(me.gstType==="igst"?(ir.baseAmount-ir.baseAmount*Nt/100)*.05:0),amountPaid:Zr===0&&me.amountPaid||0,cashAmount:Zr===0&&me.paymentMethod==="cash"&&me.amountPaid||0,onlineAmount:Zr===0&&me.paymentMethod==="online"&&me.amountPaid||0,status:"checked-in",paymentStatus:(me.amountPaid||0)>=$t?"paid":"pending",payments:Zr===0&&(me.amountPaid||0)>0?[{amount:me.amountPaid,method:me.paymentMethod||"cash",date:new Date}]:[]}}).map(ir=>Yn.post("/room-booking/walk-in",ir));await Promise.all(Fr),j(`Bulk booking created successfully! ${me.selectedRooms.length} rooms booked for ${me.guestName}`),setTimeout(()=>j(""),5e3),await Le()}catch(pt){throw console.error("Bulk booking error details:",(ke=pt.response)==null?void 0:ke.data),new Error(((it=(Pe=pt.response)==null?void 0:Pe.data)==null?void 0:it.message)||pt.message||"Failed to create bulk booking")}},tt=async(me,ke,Pe)=>{var it,pt;try{await Yn.put(`/room-booking/${me}/payment`,{amountPaid:ke,paymentMethod:Pe,paymentAmount:ke}),j("Payment processed successfully!"),setTimeout(()=>j(""),3e3),await Le()}catch(Nt){throw new Error(((pt=(it=Nt.response)==null?void 0:it.data)==null?void 0:pt.message)||"Failed to process payment")}},$e=async me=>{var ke,Pe;try{await Yn.put(`/room-booking/${me}/status`,{status:"cancelled"}),j("Booking cancelled successfully!"),setTimeout(()=>j(""),3e3),await Le()}catch(it){throw new Error(((Pe=(ke=it.response)==null?void 0:ke.data)==null?void 0:Pe.message)||"Failed to cancel booking")}},Ze=async(me,ke,Pe,it)=>{var pt,Nt;try{await Yn.put(`/room-booking/${me}/extend`,{newCheckOutDate:ke,additionalNights:Pe,additionalAmount:it}),j("Booking extended successfully!"),setTimeout(()=>j(""),3e3),await Le()}catch(_t){throw new Error(((Nt=(pt=_t.response)==null?void 0:pt.data)==null?void 0:Nt.message)||"Failed to extend booking")}},Oe=async(me,ke)=>{var Pe,it;try{const pt=await Yn.put(`/room-booking/${me}/cancel-extension`,{daysToCancel:ke});return j(`${ke} day(s) cancelled from extension successfully!`),setTimeout(()=>j(""),5e3),await Le(),pt.data}catch(pt){throw new Error(((it=(Pe=pt.response)==null?void 0:Pe.data)==null?void 0:it.message)||"Failed to cancel extension")}},Qe=async me=>{var ke;try{const Pe=me[0];await Yn.put(`/room-booking/${Pe._id}/status`,{status:"checked-out",actualCheckOutTime:new Date().toISOString()}),await Le();const it=Pe.totalRooms||((ke=Pe.bulkRoomDetails)==null?void 0:ke.length)||0;return j(`Successfully checked out bulk booking for ${Pe.userName} (${it} rooms)!`),setTimeout(()=>j(""),5e3),{success:!0}}catch(Pe){throw console.error("Error in bulk checkout:",Pe),new Error("Failed to checkout bulk booking. Please try again.")}},ht=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userType"),localStorage.removeItem("receptionistData"),e("/login")},Pt=Array.isArray(a)?a.filter(me=>{var it,pt;const ke=((it=me.roomNumber)==null?void 0:it.toLowerCase().includes(b.toLowerCase()))||((pt=me.roomType)==null?void 0:pt.toLowerCase().includes(b.toLowerCase()));if(C==="all")return ke;const{status:Pe}=ne();return ke&&Pe===C}).sort((me,ke)=>{const Pe=parseInt(me.roomNumber)||0,it=parseInt(ke.roomNumber)||0;return Pe-it}):[],Et=(me=>d.filter(ke=>new Date(ke.createdAt).toISOString().split("T")[0]===me))(ye),ie=me=>me?new Date(me).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"",De=()=>{const me=new Date,ke=new Date(me);ke.setDate(ke.getDate()-1);const Pe=new Date(me);return Pe.setDate(Pe.getDate()-2),[{label:"Today",date:me.toISOString().split("T")[0]},{label:"Yesterday",date:ke.toISOString().split("T")[0]},{label:"2 Days Ago",date:Pe.toISOString().split("T")[0]}]},Ye=me=>{var pt,Nt,_t;const ke=me.totalPrice||0,Pe=window.open("","_blank"),it=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Hotel Virat - Bill</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 15px; }
          .header img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
          .header h1 { font-size: 24px; margin-bottom: 5px; }
          .header p { font-size: 12px; color: #666; }
          .header .gst { font-size: 11px; color: #333; font-weight: bold; margin-top: 5px; }
          .bill-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .bill-info p { font-size: 13px; margin: 4px 0; }
          .guest-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .guest-info h3 { font-size: 14px; margin-bottom: 8px; }
          .guest-info p { font-size: 13px; margin: 4px 0; }
          .stay-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .stay-info h3 { font-size: 14px; margin-bottom: 8px; }
          .stay-info p { font-size: 13px; margin: 4px 0; }
          .charges { margin-bottom: 15px; }
          .charges h3 { font-size: 14px; margin-bottom: 8px; }
          .charge-row { display: flex; justify-content: space-between; font-size: 13px; margin: 5px 0; }
          .charge-row.total { font-weight: bold; font-size: 16px; border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; }
          .footer { text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px dashed #ccc; }
          .footer p { font-size: 12px; color: #666; margin: 3px 0; }
          @media print { body { padding: 10px; } }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${Ml}" alt="Hotel Virat Logo" />
          <h1>HOTEL VIRAT</h1>
          <p>Your Comfort, Our Priority</p>
          <p class="gst">GSTIN: 29AGZPV1558K2Z6</p>
        </div>
        
        <div class="bill-info">
          <p><strong>Bill No:</strong> ${((pt=me._id)==null?void 0:pt.slice(-8).toUpperCase())||"N/A"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p><strong>Room No:</strong> ${((Nt=me.roomId)==null?void 0:Nt.roomNumber)||"N/A"}</p>
          <p><strong>Room Type:</strong> ${((_t=me.roomId)==null?void 0:_t.roomType)||"N/A"}</p>
        </div>
        
        <div class="guest-info">
          <h3>Guest Details</h3>
          <p><strong>Name:</strong> ${me.userName||"N/A"}</p>
          <p><strong>Phone:</strong> ${me.userPhone||"N/A"}</p>
          ${me.userEmail?`<p><strong>Email:</strong> ${me.userEmail}</p>`:""}
          ${me.guestGstNumber?`<p><strong>GSTIN:</strong> ${me.guestGstNumber}</p>`:""}
        </div>
        
        <div class="stay-info">
          <h3>Stay Details</h3>
          <p><strong>Check-in:</strong> ${ie(me.checkInDate)} at ${me.checkInTime||"12:00"}</p>
          <p><strong>Check-out:</strong> ${ie(me.checkOutDate)} at ${me.checkOutTime||"11:00"}</p>
          <p><strong>No. of Nights:</strong> ${me.nights||1}</p>
        </div>
        
        <div class="charges">
          <h3>Room Charges</h3>
          <div class="charge-row">
            <span>Room Charges (${me.nights||1} night${(me.nights||1)>1?"s":""})</span>
            <span>${(me.baseAmount||0).toFixed(2)}</span>
          </div>
          ${me.gstType==="gst"?`
            <div class="charge-row">
              <span>CGST (2.5%)</span>
              <span>${(me.cgst||0).toFixed(2)}</span>
            </div>
            <div class="charge-row">
              <span>SGST (2.5%)</span>
              <span>${(me.sgst||0).toFixed(2)}</span>
            </div>
          `:""}
          ${me.gstType==="igst"?`
            <div class="charge-row">
              <span>IGST (5%)</span>
              <span>${(me.igst||0).toFixed(2)}</span>
            </div>
          `:""}
          <div class="charge-row total">
            <span>Total Amount</span>
            <span>${ke.toFixed(2)}</span>
          </div>
        </div>
        
        <div class="footer">
          <p>Thank you for staying with us!</p>
          <p>We hope to see you again soon.</p>
          <p style="margin-top: 10px; font-size: 10px;">This is a computer generated bill.</p>
        </div>
      </body>
      </html>
    `;Pe.document.write(it),Pe.document.close(),Pe.focus(),setTimeout(()=>{Pe.print()},250)},Ft=me=>{var _t,ot;const ke=me.baseAmount||0,Pe=me.bulkRoomDetails||[],it=Pe.length>0?Pe.map(jt=>`
          <div class="charge-row">
            <span>Room ${jt.roomNumber} (${jt.roomType})</span>
            <span>${(jt.baseAmount||0).toFixed(2)}</span>
          </div>
        `).join(""):`
          <div class="charge-row">
            <span>Room Charges (${me.nights||1} night${(me.nights||1)>1?"s":""})</span>
            <span>${ke.toFixed(2)}</span>
          </div>
        `,pt=window.open("","_blank"),Nt=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Hotel Virat - Bill (Without GST)</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 15px; }
          .header img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
          .header h1 { font-size: 24px; margin-bottom: 5px; }
          .header p { font-size: 12px; color: #666; }
          .bill-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .bill-info p { font-size: 13px; margin: 4px 0; }
          .guest-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .guest-info h3 { font-size: 14px; margin-bottom: 8px; }
          .guest-info p { font-size: 13px; margin: 4px 0; }
          .stay-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .stay-info h3 { font-size: 14px; margin-bottom: 8px; }
          .stay-info p { font-size: 13px; margin: 4px 0; }
          .charges { margin-bottom: 15px; }
          .charges h3 { font-size: 14px; margin-bottom: 8px; }
          .charge-row { display: flex; justify-content: space-between; font-size: 13px; margin: 5px 0; }
          .charge-row.total { font-weight: bold; font-size: 16px; border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; }
          .room-summary { background: #f0f9ff; padding: 10px; border-radius: 6px; margin-bottom: 15px; border-left: 4px solid #0ea5e9; }
          .room-summary p { font-size: 12px; color: #0c4a6e; margin: 2px 0; font-weight: 500; }
          .footer { text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px dashed #ccc; }
          .footer p { font-size: 12px; color: #666; margin: 3px 0; }
          @media print { body { padding: 10px; } }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${Ml}" alt="Hotel Virat Logo" />
          <h1>HOTEL VIRAT</h1>
          <p>Your Comfort, Our Priority</p>
        </div>
        
        <div class="bill-info">
          <p><strong>Bill No:</strong> ${((_t=me._id)==null?void 0:_t.slice(-8).toUpperCase())||"N/A"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p><strong>Booking Type:</strong> BULK BOOKING</p>
        </div>
        
        ${Pe.length>0?`
          <div class="room-summary">
            <p><strong>ROOMS BOOKED:</strong></p>
            <p>${Pe.map(jt=>`Room ${jt.roomNumber} (${jt.roomType})`).join(", ")}</p>
          </div>
        `:""}
        
        <div class="guest-info">
          <h3>Guest Details</h3>
          <p><strong>Name:</strong> ${((ot=me.userName)==null?void 0:ot.replace("BULK: ",""))||"N/A"}</p>
          <p><strong>Phone:</strong> ${me.userPhone||"N/A"}</p>
          ${me.userEmail?`<p><strong>Email:</strong> ${me.userEmail}</p>`:""}
        </div>
        
        <div class="stay-info">
          <h3>Stay Details</h3>
          <p><strong>Check-in:</strong> ${ie(me.checkInDate)} at ${me.checkInTime||"12:00"}</p>
          <p><strong>Check-out:</strong> ${ie(me.checkOutDate)} at ${me.checkOutTime||"11:00"}</p>
          <p><strong>No. of Nights:</strong> ${me.nights||1}</p>
        </div>
        
        <div class="charges">
          <h3>Room Charges Breakdown</h3>
          ${it}
          <div class="charge-row total">
            <span>Total Amount (Without GST)</span>
            <span>${ke.toFixed(2)}</span>
          </div>
        </div>
        
        <div class="footer">
          <p>Thank you for staying with us!</p>
          <p>We hope to see you again soon.</p>
          <p style="margin-top: 10px; font-size: 10px;">This is a computer generated bill without GST.</p>
        </div>
      </body>
      </html>
    `;pt.document.write(Nt),pt.document.close(),pt.focus(),setTimeout(()=>{pt.print()},250)};return t?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto",backgroundColor:"#f3f4f6"},children:n.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",maxWidth:"1400px",margin:"0 auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"15px 20px",backgroundColor:"#059669",borderRadius:"8px",color:"white"},children:[n.jsxs("div",{children:[n.jsx("h1",{style:{margin:0,fontSize:"24px"},children:"Reception Dashboard"}),n.jsxs("p",{style:{margin:"5px 0 0",opacity:.9},children:[t.name," ",t.branchName?`- ${t.branchName}`:""]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsxs("button",{onClick:Le,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[n.jsx(fs,{size:16})," Refresh"]}),n.jsxs("button",{onClick:ht,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#dc2626",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[n.jsx(sm,{size:16})," Logout"]})]})]}),v&&n.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(ra,{size:18}),n.jsx("span",{children:v})]}),m&&n.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:m})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:[n.jsxs("div",{style:{padding:"20px",backgroundColor:"#dcfce7",borderRadius:"8px"},children:[n.jsx("h3",{style:{margin:0,color:"#166534"},children:"Available"}),n.jsx("p",{style:{margin:"10px 0 0",fontSize:"32px",fontWeight:"bold",color:"#166534"},children:a.filter(me=>ne().status==="available").length})]}),n.jsxs("div",{style:{padding:"20px",backgroundColor:"#fee2e2",borderRadius:"8px"},children:[n.jsx("h3",{style:{margin:0,color:"#dc2626"},children:"Unavailable"}),n.jsx("p",{style:{margin:"10px 0 0",fontSize:"32px",fontWeight:"bold",color:"#dc2626"},children:a.filter(me=>ne().status==="unavailable").length})]}),n.jsxs("div",{style:{padding:"20px",backgroundColor:"#f3f4f6",borderRadius:"8px"},children:[n.jsx("h3",{style:{margin:0,color:"#374151"},children:"Total Rooms"}),n.jsx("p",{style:{margin:"10px 0 0",fontSize:"32px",fontWeight:"bold",color:"#374151"},children:a.length})]})]}),n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",marginBottom:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[n.jsx("h2",{style:{margin:0,fontSize:"20px",color:"#374151"},children:" Payment Collections"}),n.jsx("div",{style:{display:"flex",gap:"8px"},children:["today","week","month","all"].map(me=>n.jsx("button",{onClick:()=>Ce(me),style:{padding:"8px 16px",border:Xe===me?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:Xe===me?"#dcfce7":"white",color:Xe===me?"#059669":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:Xe===me?"600":"400",textTransform:"capitalize"},children:me==="all"?"All Time":me==="week"?"This Week":me==="month"?"This Month":"Today"},me))})]}),(()=>{const me=new Date,ke=new Date(me.getFullYear(),me.getMonth(),me.getDate()),Pe=new Date(ke),it=Pe.getDay(),pt=Pe.getDate()-it+(it===0?-6:1);Pe.setDate(pt);const Nt=new Date(me.getFullYear(),me.getMonth(),1),_t=d.filter(gt=>{if(!gt.createdAt)return!1;const $t=new Date(gt.createdAt);switch(Xe){case"today":return $t>=ke;case"week":return $t>=Pe;case"month":return $t>=Nt;case"all":default:return!0}}),ot=_t.reduce((gt,$t)=>gt+($t.cashAmount||0),0),jt=_t.reduce((gt,$t)=>gt+($t.onlineAmount||0),0),mt=_t.reduce((gt,$t)=>gt+($t.amountPaid||0),0);return n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:[n.jsxs("div",{style:{padding:"20px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"2px solid #fde68a"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[n.jsx("span",{style:{fontSize:"32px"},children:""}),n.jsx("h3",{style:{margin:0,color:"#92400e",fontSize:"16px"},children:"Cash Collected"})]}),n.jsxs("p",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#92400e"},children:["",ot.toFixed(2)]}),n.jsxs("p",{style:{margin:"8px 0 0",fontSize:"13px",color:"#92400e",opacity:.8},children:[_t.filter(gt=>(gt.cashAmount||0)>0).length," transaction(s)"]})]}),n.jsxs("div",{style:{padding:"20px",backgroundColor:"#dbeafe",borderRadius:"8px",border:"2px solid #bfdbfe"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[n.jsx("span",{style:{fontSize:"32px"},children:""}),n.jsx("h3",{style:{margin:0,color:"#1e40af",fontSize:"16px"},children:"Online Collected"})]}),n.jsxs("p",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#1e40af"},children:["",jt.toFixed(2)]}),n.jsxs("p",{style:{margin:"8px 0 0",fontSize:"13px",color:"#1e40af",opacity:.8},children:[_t.filter(gt=>(gt.onlineAmount||0)>0).length," transaction(s)"]})]}),n.jsxs("div",{style:{padding:"20px",backgroundColor:"#e0e7ff",borderRadius:"8px",border:"2px solid #c7d2fe"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[n.jsx("span",{style:{fontSize:"32px"},children:""}),n.jsx("h3",{style:{margin:0,color:"#4338ca",fontSize:"16px"},children:"Total Collected"})]}),n.jsxs("p",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#4338ca"},children:["",mt.toFixed(2)]}),n.jsxs("p",{style:{margin:"8px 0 0",fontSize:"13px",color:"#4338ca",opacity:.8},children:[_t.filter(gt=>(gt.amountPaid||0)>0).length," booking(s)"]})]})]})})()]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"10px"},children:[n.jsxs("button",{onClick:()=>ue("rooms"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:K==="rooms"?"#059669":"#f3f4f6",color:K==="rooms"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(cs,{size:18})," Rooms"]}),n.jsxs("button",{onClick:()=>ue("advance"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:K==="advance"?"#059669":"#f3f4f6",color:K==="advance"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(an,{size:18})," Advance Booking"]}),n.jsxs("button",{onClick:()=>ue("extend"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:K==="extend"?"#f59e0b":"#f3f4f6",color:K==="extend"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(fs,{size:18})," Extend Booking"]}),n.jsxs("button",{onClick:()=>ue("history"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:K==="history"?"#059669":"#f3f4f6",color:K==="history"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(an,{size:18})," Booking History"]})]}),K==="advance"&&n.jsxs("div",{children:[n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0f9ff",borderRadius:"8px",borderLeft:"4px solid #0ea5e9"},children:[n.jsx("h3",{style:{margin:"0 0 5px",fontSize:"16px"},children:"Advance Bookings (Future Check-ins)"}),n.jsx("p",{style:{margin:0,color:"#6b7280"},children:(()=>{const me=new Date;me.setHours(0,0,0,0);const ke=d.filter(Pe=>{if(!Pe.checkInDate)return!1;const it=new Date(Pe.checkInDate);return it.setHours(0,0,0,0),it>=me&&Pe.status!=="cancelled"});return`${ke.length} advance booking(s) found | Total Revenue: ${ke.reduce((Pe,it)=>Pe+(it.totalPrice||0),0).toFixed(2)} | Collected: ${ke.reduce((Pe,it)=>Pe+(it.amountPaid||0),0).toFixed(2)}`})()})]}),(()=>{const me=new Date;me.setHours(0,0,0,0);const ke=d.filter(Pe=>{if(!Pe.checkInDate)return!1;const it=new Date(Pe.checkInDate);it.setHours(0,0,0,0);const pt=Pe.status!=="cancelled";return it>=me&&pt}).sort((Pe,it)=>new Date(Pe.checkInDate)-new Date(it.checkInDate));return ke.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:ke.map(Pe=>{var Nt,_t;const it=(Pe.totalPrice||0)-(Pe.amountPaid||0),pt=Math.ceil((new Date(Pe.checkInDate)-new Date)/(1e3*60*60*24));return n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb",padding:"16px",display:"flex",gap:"20px",alignItems:"flex-start",justifyContent:"space-between"},children:[n.jsxs("div",{style:{flex:"1 1 auto",minWidth:0},children:[n.jsxs("div",{style:{marginBottom:"10px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[n.jsxs("span",{style:{fontSize:"17px",fontWeight:"600",color:"#111827"},children:["Room ",((Nt=Pe.roomId)==null?void 0:Nt.roomNumber)||"N/A"]}),n.jsx("span",{style:{fontSize:"12px",color:"#6b7280",padding:"2px 8px",backgroundColor:"#f3f4f6",borderRadius:"4px"},children:((_t=Pe.roomId)==null?void 0:_t.roomType)||"N/A"})]}),n.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"500"},children:Pe.userName}),n.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:[Pe.userPhone,Pe.userEmail&&`  ${Pe.userEmail}`]})]}),n.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",lineHeight:"1.5"},children:[n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#374151"},children:"Check-in:"})," ",ie(Pe.checkInDate)," at ",Pe.checkInTime||"12:00"]}),n.jsxs("div",{children:[n.jsx("strong",{style:{color:"#374151"},children:"Check-out:"})," ",ie(Pe.checkOutDate)," at ",Pe.checkOutTime||"11:00"]}),n.jsxs("div",{style:{marginTop:"4px",color:"#059669",fontWeight:"500",fontSize:"12px"},children:[Pe.nights," night",Pe.nights>1?"s":"","  ",pt," day",pt!==1?"s":""," until check-in"]})]}),(Pe.aadhaarNumber||Pe.panNumber)&&n.jsxs("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #f3f4f6"},children:[Pe.aadhaarNumber&&n.jsxs("span",{children:["Aadhaar: ",Pe.aadhaarNumber]}),Pe.aadhaarNumber&&Pe.panNumber&&n.jsx("span",{children:"  "}),Pe.panNumber&&n.jsxs("span",{children:["PAN: ",Pe.panNumber]})]})]}),n.jsxs("div",{style:{width:"220px",flexShrink:0,display:"flex",flexDirection:"column",gap:"10px"},children:[n.jsxs("div",{style:{padding:"10px 12px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"3px"},children:[n.jsx("span",{style:{color:"#6b7280"},children:"Total"}),n.jsxs("span",{style:{fontWeight:"600",color:"#374151"},children:["",(Pe.totalPrice||0).toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"6px"},children:[n.jsx("span",{style:{color:"#6b7280"},children:"Paid"}),n.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:["",(Pe.amountPaid||0).toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",paddingTop:"6px",borderTop:"1px solid #e5e7eb"},children:[n.jsx("span",{style:{fontWeight:"600",color:it>0?"#dc2626":"#059669"},children:"Balance"}),n.jsxs("span",{style:{fontWeight:"700",color:it>0?"#dc2626":"#059669"},children:["",it.toFixed(2)]})]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[it>0&&n.jsx("button",{onClick:()=>{F(Pe),R(!0)},style:{padding:"8px 14px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:ot=>ot.target.style.backgroundColor="#047857",onMouseOut:ot=>ot.target.style.backgroundColor="#059669",children:"Add Payment"}),n.jsx("button",{onClick:()=>{F(Pe),Q(!0)},style:{padding:"8px 14px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:ot=>ot.target.style.backgroundColor="#d97706",onMouseOut:ot=>ot.target.style.backgroundColor="#f59e0b",children:"Extend Booking"}),n.jsx("button",{onClick:()=>{var ot;window.confirm(`Cancel booking for ${Pe.userName}?

Room: ${(ot=Pe.roomId)==null?void 0:ot.roomNumber}
Check-in: ${ie(Pe.checkInDate)}`)&&$e(Pe._id)},style:{padding:"8px 14px",backgroundColor:"white",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:ot=>{ot.target.style.backgroundColor="#dc2626",ot.target.style.color="white"},onMouseOut:ot=>{ot.target.style.backgroundColor="white",ot.target.style.color="#dc2626"},children:"Cancel Booking"})]})]})]},Pe._id)})}):n.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280",backgroundColor:"white",borderRadius:"8px"},children:[n.jsx(an,{size:48,style:{marginBottom:"10px",opacity:.5}}),n.jsx("p",{children:"No advance bookings found"})]})})()]}),K==="extend"&&n.jsxs("div",{children:[n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#fef3c7",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[n.jsx("h3",{style:{margin:"0 0 5px",fontSize:"16px"},children:"Current Bookings - Extend Stay"}),n.jsx("p",{style:{margin:0,color:"#6b7280"},children:(()=>{const me=d.filter(ke=>ke.status==="checked-in");return`${me.length} active booking(s) | Total Revenue: ${me.reduce((ke,Pe)=>ke+(Pe.totalPrice||0),0).toFixed(2)} | Collected: ${me.reduce((ke,Pe)=>ke+(Pe.amountPaid||0),0).toFixed(2)}`})()})]}),(()=>{const me=d.filter(ke=>ke.status==="checked-in");return me.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:me.map(ke=>{var Nt,_t;const Pe=ke.totalPrice||0,it=ke.amountPaid||0,pt=Pe-it;return n.jsx("div",{style:{padding:"20px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid #f59e0b"},children:n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"15px"},children:n.jsxs("div",{style:{flex:1},children:[n.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"10px",fontSize:"18px"},children:[n.jsx(cs,{size:20})," Room ",((Nt=ke.roomId)==null?void 0:Nt.roomNumber)||"N/A",n.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",backgroundColor:"#dcfce7",color:"#166534"},children:"CHECKED-IN"}),ke.extensions&&ke.extensions.length>0&&n.jsxs("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:"#fef3c7",color:"#92400e",border:"1px solid #f59e0b"},children:["EXTENDED (",ke.extensions.length,"x)"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[n.jsxs("div",{children:[n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[n.jsx(Ol,{size:14,style:{marginRight:"6px"}}),n.jsx("strong",{children:"Guest:"})," ",ke.userName]}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[n.jsx(Ai,{size:14,style:{marginRight:"6px"}}),n.jsx("strong",{children:"Phone:"})," ",ke.userPhone]}),ke.userEmail&&n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[n.jsx(Js,{size:14,style:{marginRight:"6px"}}),n.jsx("strong",{children:"Email:"})," ",ke.userEmail]})]}),n.jsxs("div",{children:[n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[n.jsx(an,{size:14,style:{marginRight:"6px"}}),n.jsx("strong",{children:"Check-in:"})," ",ie(ke.checkInDate)]}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[n.jsx(an,{size:14,style:{marginRight:"6px"}}),n.jsx("strong",{children:"Check-out:"})," ",ie(ke.checkOutDate)]}),n.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[n.jsx("strong",{children:"Nights:"})," ",ke.nights]})]})]}),n.jsxs("div",{style:{padding:"12px",backgroundColor:"#f9fafb",borderRadius:"6px",marginBottom:"15px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[n.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Total Amount:"}),n.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:["",Pe.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[n.jsx("span",{style:{fontSize:"14px",color:"#059669"},children:"Amount Paid:"}),n.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#059669"},children:["",it.toFixed(2)]})]}),pt>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[n.jsx("span",{style:{fontSize:"14px",color:"#dc2626",fontWeight:"600"},children:"Balance Due:"}),n.jsxs("span",{style:{fontSize:"14px",fontWeight:"700",color:"#dc2626"},children:["",pt.toFixed(2)]})]}),ke.gstType&&ke.gstType!=="none"&&n.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:["GST Applied: ",ke.gstType==="gst"?"CGST + SGST (5%)":"IGST (5%)"]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[pt>0&&n.jsx("button",{onClick:()=>{F(ke),R(!0)},style:{padding:"10px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:ot=>ot.target.style.backgroundColor="#047857",onMouseOut:ot=>ot.target.style.backgroundColor="#059669",children:"Add Payment"}),n.jsxs("button",{onClick:()=>{F(ke),Q(!0)},style:{padding:"10px 16px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:ot=>ot.target.style.backgroundColor="#d97706",onMouseOut:ot=>ot.target.style.backgroundColor="#f59e0b",children:[n.jsx(fs,{size:16})," Extend Stay"]}),(()=>{var ot;return console.log("Booking extensions check:",{bookingId:ke._id,hasExtensions:ke.extensions,extensionsLength:(ot=ke.extensions)==null?void 0:ot.length,extensionsData:ke.extensions}),ke.extensions&&ke.extensions.length>0})()&&n.jsxs("button",{onClick:()=>{F(ke),q(!0)},style:{padding:"10px 16px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:ot=>ot.target.style.backgroundColor="#b91c1c",onMouseOut:ot=>ot.target.style.backgroundColor="#dc2626",title:"Cancel specific days from extension",children:[n.jsx(ha,{size:16})," Cancel Extension"]}),n.jsx("button",{onClick:()=>{F(ke),A(!0)},style:{padding:"10px 16px",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:ot=>ot.target.style.backgroundColor="#7c3aed",onMouseOut:ot=>ot.target.style.backgroundColor="#8b5cf6",children:"Restaurant Bill"}),n.jsx("button",{onClick:()=>X(ke),style:{padding:"10px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:ot=>ot.target.style.backgroundColor="#2563eb",onMouseOut:ot=>ot.target.style.backgroundColor="#3b82f6",children:"Checkout"}),ke.gstType&&ke.gstType!=="none"&&n.jsxs("button",{onClick:()=>Ye(ke),style:{padding:"10px 16px",backgroundColor:"white",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:ot=>{ot.target.style.backgroundColor="#f3f4f6"},onMouseOut:ot=>{ot.target.style.backgroundColor="white"},children:[n.jsx(wi,{size:16})," Print Bill"]}),((_t=ke.userName)==null?void 0:_t.startsWith("BULK:"))&&n.jsxs("button",{onClick:()=>Ft(ke),style:{padding:"10px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:ot=>{ot.target.style.backgroundColor="#059669"},onMouseOut:ot=>{ot.target.style.backgroundColor="#10b981"},children:[n.jsx(wi,{size:16})," Print Bill (No GST)"]})]})]})})},ke._id)})}):n.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280",backgroundColor:"white",borderRadius:"8px"},children:[n.jsx(cs,{size:48,style:{marginBottom:"10px",opacity:.5}}),n.jsx("p",{children:"No active bookings found"}),n.jsx("p",{style:{fontSize:"14px",marginTop:"5px"},children:"All checked-in guests will appear here"})]})})()]}),K==="history"&&n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap",alignItems:"center"},children:[n.jsx("div",{style:{display:"flex",gap:"8px"},children:De().map(({label:me,date:ke})=>n.jsx("button",{onClick:()=>fe(ke),style:{padding:"8px 16px",border:ye===ke?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:ye===ke?"#dcfce7":"white",cursor:"pointer",fontSize:"13px",fontWeight:ye===ke?"600":"400"},children:me},ke))}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Or select date:"}),n.jsx("input",{type:"date",value:ye,onChange:me=>fe(me.target.value),style:{padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0f9ff",borderRadius:"8px",borderLeft:"4px solid #0ea5e9"},children:[n.jsxs("h3",{style:{margin:"0 0 5px",fontSize:"16px"},children:["Bookings for ",ie(ye)]}),n.jsxs("p",{style:{margin:0,color:"#6b7280"},children:[Et.length," booking(s) found | Total Revenue: ",Et.reduce((me,ke)=>me+(ke.totalPrice||0),0).toFixed(2)," | Collected: ",Et.reduce((me,ke)=>me+(ke.amountPaid||0),0).toFixed(2)]})]}),Et.length>0?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Et.map(me=>{var ke,Pe,it;return n.jsx("div",{style:{padding:"15px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderLeft:`4px solid ${me.status==="checked-out"?"#22c55e":me.status==="cancelled"?"#ef4444":"#f59e0b"}`},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[n.jsxs("div",{children:[n.jsxs("h4",{style:{margin:"0 0 5px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(cs,{size:16})," Room ",((ke=me.roomId)==null?void 0:ke.roomNumber)||"N/A",n.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"500",backgroundColor:me.status==="checked-out"?"#dcfce7":me.status==="cancelled"?"#fee2e2":"#fef3c7",color:me.status==="checked-out"?"#166534":me.status==="cancelled"?"#dc2626":"#92400e"},children:(Pe=me.status)==null?void 0:Pe.toUpperCase()})]}),n.jsxs("p",{style:{margin:"3px 0",fontSize:"14px",color:"#374151"},children:[n.jsx("strong",{children:"Guest:"})," ",me.userName," | ",n.jsx("strong",{children:"Phone:"})," ",me.userPhone]}),n.jsxs("p",{style:{margin:"3px 0",fontSize:"13px",color:"#6b7280"},children:["Check-in: ",ie(me.checkInDate),"  Check-out: ",ie(me.checkOutDate)," (",me.nights," nights)"]})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("p",{style:{margin:"0 0 3px",fontSize:"14px"},children:[n.jsx("strong",{children:"Total:"})," ",(me.totalPrice||0).toFixed(2)]}),n.jsxs("p",{style:{margin:"0 0 3px",fontSize:"13px",color:"#059669"},children:[n.jsx("strong",{children:"Paid:"})," ",(me.amountPaid||0).toFixed(2)]}),me.totalPrice-(me.amountPaid||0)>0&&n.jsxs("p",{style:{margin:"0",fontSize:"13px",color:"#dc2626",fontWeight:"600"},children:["Due: ",(me.totalPrice-(me.amountPaid||0)).toFixed(2)]}),me.gstType&&me.gstType!=="none"&&n.jsxs("p",{style:{margin:"3px 0 0",fontSize:"11px",color:"#6b7280"},children:["GST: ",me.gstType==="gst"?"CGST+SGST":"IGST"]}),me.gstType&&me.gstType!=="none"&&n.jsxs("button",{onClick:()=>Ye(me),style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",marginLeft:"auto"},children:[n.jsx(wi,{size:14})," Print Bill"]}),((it=me.userName)==null?void 0:it.startsWith("BULK:"))&&n.jsxs("button",{onClick:()=>Ft(me),style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",marginLeft:"auto"},children:[n.jsx(wi,{size:14})," Print Bill (No GST)"]})]})]})},me._id)})}):n.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280",backgroundColor:"white",borderRadius:"8px"},children:[n.jsx(an,{size:48,style:{marginBottom:"10px",opacity:.5}}),n.jsxs("p",{children:["No bookings found for ",ie(ye)]})]})]}),K==="rooms"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{position:"relative",flex:1,minWidth:"250px"},children:[n.jsx(wr,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),n.jsx("input",{type:"text",placeholder:"Search by room number or type...",value:b,onChange:me=>y(me.target.value),style:{width:"100%",padding:"10px 10px 10px 40px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),n.jsxs("select",{value:C,onChange:me=>E(me.target.value),style:{padding:"10px 15px",border:"1px solid #e5e7eb",borderRadius:"6px",minWidth:"150px"},children:[n.jsx("option",{value:"all",children:"All Rooms"}),n.jsx("option",{value:"available",children:"Available"}),n.jsx("option",{value:"unavailable",children:"Unavailable"})]}),n.jsxs("button",{onClick:()=>z(!0),style:{padding:"10px 20px",backgroundColor:"#7c3aed",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[n.jsx(cs,{size:18}),"Bulk Booking"]}),n.jsxs("button",{onClick:()=>le(!0),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[n.jsx(sm,{size:18}),"Bulk Checkout"]})]}),f?n.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading rooms..."}):n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:Pt.map(me=>{var ot;const ke=new Date,Pe=ke.getMonth(),it=ke.getFullYear(),pt=new Date(it,Pe+1,0).getDate(),Nt=d.filter(jt=>{var Fr;if((((Fr=jt.roomId)==null?void 0:Fr._id)||jt.roomId)!==me._id)return!1;const gt=new Date(jt.checkInDate),$t=new Date(jt.checkOutDate),Jt=new Date(it,Pe,1),Gt=new Date(it,Pe+1,0);return gt<=Gt&&$t>=Jt}),_t={};return Nt.forEach(jt=>{const mt=jt.checkInDate.split("T")[0],gt=jt.checkOutDate.split("T")[0],$t=new Date(mt),Jt=new Date(gt),Gt=new Date($t);for(;Gt<Jt;){if(Gt.getMonth()===Pe&&Gt.getFullYear()===it){const Fr=Gt.getDate();_t[Fr]||(_t[Fr]=[]),_t[Fr].push({guestName:jt.userName,phone:jt.userPhone,checkIn:jt.checkInDate,checkOut:jt.checkOutDate,status:jt.status,bookingId:jt._id})}Gt.setDate(Gt.getDate()+1)}}),n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"2px solid #e5e7eb"},children:[n.jsx("div",{style:{padding:"15px",backgroundColor:"#f8fafc",borderBottom:"1px solid #e5e7eb"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(cs,{size:20})," Room ",me.roomNumber]}),n.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:n.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",backgroundColor:"#22c55e",color:"white"},children:"Available"})})]})}),n.jsxs("div",{style:{padding:"15px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[n.jsxs("div",{children:[n.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[n.jsx("strong",{children:"Type:"})," ",me.roomType]}),n.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[n.jsx("strong",{children:"Floor:"})," ",me.floor]}),n.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[n.jsx("strong",{children:"Price:"})," ",me.price,"/night"]}),n.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[n.jsx("strong",{children:"Capacity:"})," ",((ot=me.capacity)==null?void 0:ot.adults)||2," Adults"]})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[n.jsx(an,{size:16}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:new Date(it,Pe).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",fontSize:"10px"},children:[["S","M","T","W","T","F","S"].map((jt,mt)=>n.jsx("div",{style:{textAlign:"center",fontWeight:"600",color:"#6b7280",padding:"2px"},children:jt},`day-header-${mt}`)),(()=>{const jt=new Date(it,Pe,1).getDay(),mt=[];for(let gt=0;gt<jt;gt++)mt.push(n.jsx("div",{style:{padding:"4px"}},`empty-${gt}`));for(let gt=1;gt<=pt;gt++){const $t=gt===ke.getDate()&&Pe===new Date().getMonth()&&it===new Date().getFullYear(),Jt=_t[gt]||[],Gt=Jt.length>0,Fr=Jt.length>0?Jt.map(ir=>`${ir.guestName} (${ir.phone})
${new Date(ir.checkIn).toLocaleDateString()} - ${new Date(ir.checkOut).toLocaleDateString()}
Status: ${ir.status}`).join(`

`):"";mt.push(n.jsxs("div",{title:Fr,style:{textAlign:"center",padding:"4px",borderRadius:"3px",backgroundColor:$t?"#3b82f6":"transparent",color:$t?"white":"#374151",fontWeight:$t?"600":"400",position:"relative",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:Gt?"pointer":"default"},onClick:()=>{if(Gt){const ir=Jt.map(Zr=>`Guest: ${Zr.guestName}
Phone: ${Zr.phone}
Check-in: ${new Date(Zr.checkIn).toLocaleDateString()}
Check-out: ${new Date(Zr.checkOut).toLocaleDateString()}
Status: ${Zr.status.toUpperCase()}`).join(`

`);alert(`Bookings for ${gt}/${Pe+1}/${it}:

${ir}`)}},children:[gt,Gt&&n.jsx("div",{style:{position:"absolute",top:"2px",right:"2px",width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#ef4444"}}),Jt.length>1&&n.jsx("div",{style:{position:"absolute",bottom:"1px",right:"1px",fontSize:"6px",fontWeight:"bold",color:"#ef4444",backgroundColor:"white",borderRadius:"50%",width:"8px",height:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:Jt.length})]},gt))}return mt})()]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"11px",color:"#6b7280"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#ef4444"}}),n.jsx("span",{children:"Booked (click for details)"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#3b82f6"}}),n.jsx("span",{children:"Today"})]})]})]})]}),!1,(()=>{const jt=new Date().toISOString().split("T")[0];return d.filter(mt=>{var Gt;if((((Gt=mt.roomId)==null?void 0:Gt._id)||mt.roomId)!==me._id)return!1;const $t=mt.checkInDate.split("T")[0],Jt=mt.checkOutDate.split("T")[0];return jt>=$t&&jt<Jt&&mt.status!=="cancelled"}),d.filter(mt=>{var Jt;return(((Jt=mt.roomId)==null?void 0:Jt._id)||mt.roomId)!==me._id?!1:mt.checkInDate.split("T")[0]>jt&&(mt.status==="confirmed"||mt.status==="checked-in")}),n.jsxs(n.Fragment,{children:[!1,!1]})})(),(()=>{const jt=new Date().toISOString().split("T")[0],mt=d.find(gt=>{var Fr;if((((Fr=gt.roomId)==null?void 0:Fr._id)||gt.roomId)!==me._id)return!1;const Jt=gt.checkInDate.split("T")[0],Gt=gt.checkOutDate.split("T")[0];return jt>=Jt&&jt<Gt&&gt.status==="checked-in"});return mt?n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>{F(mt),Q(!0)},style:{flex:1,padding:"10px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Extend Stay"}),n.jsx("button",{onClick:()=>X(mt),style:{flex:1,padding:"10px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Checkout"})]}):n.jsx("button",{onClick:()=>Ae(me),style:{width:"100%",padding:"10px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Book Now"})})()]})]},me._id)})}),Pt.length===0&&!f&&n.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"No rooms found matching your criteria"})]}),T&&O&&n.jsx(Gfe,{room:O,allBookings:d,onClose:()=>{k(!1),S(null)},onBook:Ve}),Y&&n.jsx(Yfe,{rooms:a,allBookings:d,onClose:()=>z(!1),onBulkBook:Ge}),L&&D&&n.jsx(Kfe,{booking:D,onClose:()=>{A(!1),F(null)},onAddBill:se,onRemoveBill:J}),B&&D&&n.jsx(Vfe,{booking:D,onClose:()=>{M(!1),F(null)},onCheckout:ce,onUpdatePayment:te}),U&&n.jsx(Qfe,{onClose:()=>P(!1),onCreateBooking:Ne,onPayBooking:tt,onCancelBooking:$e}),I&&D&&n.jsx(Jfe,{booking:D,onClose:()=>{R(!1),F(null)},onAddPayment:tt}),W&&D&&n.jsx(Zfe,{booking:D,onClose:()=>{Q(!1),F(null)},onExtend:Ze}),ge&&D&&n.jsx(ehe,{booking:D,onClose:()=>{q(!1),F(null)},onCancelExtension:Oe}),re&&n.jsx(the,{bookings:d,onClose:()=>le(!1),onBulkCheckout:Qe})]})}):n.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading..."})},Qfe=({onClose:e,onCreateBooking:t,onPayBooking:r,onCancelBooking:a})=>{const[i,s]=N.useState("create"),[l,d]=N.useState([]),[u,f]=N.useState(!1),[p,m]=N.useState({guestName:"",guestPhone:"",guestEmail:"",checkInDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkOutDate:new Date(Date.now()+2*864e5).toISOString().split("T")[0],roomType:"",advanceAmount:"",paymentMethod:"cash"});N.useEffect(()=>{i==="manage"&&x()},[i]);const x=async()=>{f(!0);try{const y=await Yn.get("/room-booking"),C=y.data.bookings||y.data||[],E=new Date;E.setHours(0,0,0,0);const O=C.filter(S=>{const T=new Date(S.checkInDate);return T.setHours(0,0,0,0),T>E&&S.status==="confirmed"});d(O)}catch(y){console.error("Error fetching future bookings:",y)}finally{f(!1)}},v=async y=>{y.preventDefault();try{const C={...p,status:"confirmed",amountPaid:parseFloat(p.advanceAmount)||0,paymentStatus:"pending"};await t(C),m({guestName:"",guestPhone:"",guestEmail:"",checkInDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkOutDate:new Date(Date.now()+2*864e5).toISOString().split("T")[0],roomType:"",advanceAmount:"",paymentMethod:"cash"}),s("manage")}catch(C){console.error("Error creating advance booking:",C)}},j=async(y,C,E)=>{try{await r(y._id,C,E),x()}catch(O){console.error("Error processing payment:",O)}},b=async y=>{if(window.confirm(`Are you sure you want to cancel booking for ${y.userName}?`))try{await a(y._id),x()}catch(C){console.error("Error cancelling booking:",C)}};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#3b82f6",color:"white"},children:[n.jsx("h3",{style:{margin:0},children:"Advance Booking Management"}),n.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),n.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #e5e7eb"},children:[n.jsx("button",{onClick:()=>s("create"),style:{flex:1,padding:"12px",border:"none",backgroundColor:i==="create"?"#3b82f6":"#f3f4f6",color:i==="create"?"white":"#374151",cursor:"pointer",fontWeight:"500"},children:"Create New Booking"}),n.jsxs("button",{onClick:()=>s("manage"),style:{flex:1,padding:"12px",border:"none",backgroundColor:i==="manage"?"#3b82f6":"#f3f4f6",color:i==="manage"?"white":"#374151",cursor:"pointer",fontWeight:"500"},children:["Manage Bookings (",l.length,")"]})]}),n.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:i==="create"?n.jsxs("form",{onSubmit:v,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Guest Name *"}),n.jsx("input",{type:"text",value:p.guestName,onChange:y=>m({...p,guestName:y.target.value}),required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest name"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Phone *"}),n.jsx("input",{type:"tel",value:p.guestPhone,onChange:y=>m({...p,guestPhone:y.target.value}),required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter phone number"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Email"}),n.jsx("input",{type:"email",value:p.guestEmail,onChange:y=>m({...p,guestEmail:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter email (optional)"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Room Type"}),n.jsxs("select",{value:p.roomType,onChange:y=>m({...p,roomType:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},children:[n.jsx("option",{value:"",children:"Any Available"}),n.jsx("option",{value:"Single",children:"Single"}),n.jsx("option",{value:"Double",children:"Double"}),n.jsx("option",{value:"Suite",children:"Suite"}),n.jsx("option",{value:"Deluxe",children:"Deluxe"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-in Date *"}),n.jsx("input",{type:"date",value:p.checkInDate,onChange:y=>m({...p,checkInDate:y.target.value}),required:!0,min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-out Date *"}),n.jsx("input",{type:"date",value:p.checkOutDate,onChange:y=>m({...p,checkOutDate:y.target.value}),required:!0,min:p.checkInDate,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Advance Amount ()"}),n.jsx("input",{type:"number",value:p.advanceAmount,onChange:y=>m({...p,advanceAmount:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter advance payment",min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Payment Method"}),n.jsxs("select",{value:p.paymentMethod,onChange:y=>m({...p,paymentMethod:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},children:[n.jsx("option",{value:"cash",children:"Cash"}),n.jsx("option",{value:"online",children:"Online"})]})]})]}),n.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500",fontSize:"16px"},children:"Create Advance Booking"})]}):n.jsxs("div",{children:[n.jsx("h4",{style:{marginBottom:"15px"},children:"Future Bookings"}),u?n.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}):l.length===0?n.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"No future bookings found"}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map(y=>{var C,E,O,S;return n.jsx("div",{style:{padding:"15px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("h5",{style:{margin:"0 0 8px",color:"#1e293b"},children:y.userName}),n.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:[n.jsxs("div",{children:[" ",y.userPhone]}),y.userEmail&&n.jsxs("div",{children:[" ",y.userEmail]}),n.jsxs("div",{children:[" Room: ",((C=y.roomId)==null?void 0:C.roomNumber)||"TBD"," (",((E=y.roomId)==null?void 0:E.roomType)||"Any",")"]}),n.jsxs("div",{children:[" ",new Date(y.checkInDate).toLocaleDateString()," - ",new Date(y.checkOutDate).toLocaleDateString()]}),n.jsxs("div",{children:[" Total: ",((O=y.totalPrice)==null?void 0:O.toFixed(2))||"0.00"," | Paid: ",((S=y.amountPaid)==null?void 0:S.toFixed(2))||"0.00"]}),y.totalPrice-y.amountPaid>0&&n.jsxs("div",{style:{color:"#dc2626",fontWeight:"500"},children:[" Due: ",(y.totalPrice-y.amountPaid).toFixed(2)]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[y.totalPrice-y.amountPaid>0&&n.jsx("button",{onClick:()=>{const T=prompt(`Enter payment amount (Due: ${(y.totalPrice-y.amountPaid).toFixed(2)}):`);if(T&&parseFloat(T)>0){const k=confirm("Click OK for Cash, Cancel for Online")?"cash":"online";j(y,parseFloat(T),k)}},style:{padding:"6px 12px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:" Pay"}),n.jsx("button",{onClick:()=>b(y),style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:" Cancel"})]})]})},y._id)})})]})})]})})},Jfe=({booking:e,onClose:t,onAddPayment:r})=>{var b;const[a,i]=N.useState(""),[s,l]=N.useState("cash"),[d,u]=N.useState(!1),[f,p]=N.useState(""),m=e.totalPrice||0,x=e.amountPaid||0,v=m-x,j=async y=>{y.preventDefault(),p("");const C=parseFloat(a);if(!C||C<=0){p("Please enter a valid payment amount");return}if(C>v){p(`Payment amount cannot exceed balance due (${v.toFixed(2)})`);return}u(!0);try{const E=x+C;await r(e._id,E,s),t()}catch(E){p(E.message||"Failed to add payment")}finally{u(!1)}};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",padding:"0",overflow:"hidden"},children:[n.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#059669",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("h3",{style:{margin:0},children:["Add Payment - Room ",(b=e.roomId)==null?void 0:b.roomNumber]}),n.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),f&&n.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:16}),n.jsx("span",{style:{fontSize:"14px"},children:f})]}),n.jsxs("div",{style:{padding:"20px"},children:[n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[n.jsxs("h4",{style:{margin:"0 0 10px"},children:["Guest: ",e.userName]}),n.jsxs("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:["Phone: ",e.userPhone]}),n.jsxs("p",{style:{margin:"5px 0 0",fontSize:"14px",color:"#6b7280"},children:["Check-in: ",new Date(e.checkInDate).toLocaleDateString()," | Check-out: ",new Date(e.checkOutDate).toLocaleDateString()]})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Payment Summary"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[n.jsx("span",{children:"Total Amount:"}),n.jsxs("span",{style:{fontWeight:"600"},children:["",m.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#059669"},children:[n.jsx("span",{children:"Already Paid:"}),n.jsxs("span",{style:{fontWeight:"600"},children:["",x.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"10px",borderTop:"1px solid #e5e7eb"},children:[n.jsx("span",{style:{fontWeight:"600",color:"#dc2626"},children:"Balance Due:"}),n.jsxs("span",{style:{fontWeight:"700",fontSize:"18px",color:"#dc2626"},children:["",v.toFixed(2)]})]})]}),n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Payment Amount () *"}),n.jsx("input",{type:"number",value:a,onChange:y=>i(y.target.value),required:!0,min:"0.01",max:v,step:"0.01",style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Enter amount (Max: ${v.toFixed(2)})`})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Payment Method *"}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:s==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:s==="cash"?"#dcfce7":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:s==="cash",onChange:y=>l(y.target.value)}),n.jsx("span",{style:{fontWeight:"500"},children:" Cash"})]}),n.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:s==="online"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:s==="online"?"#dcfce7":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:s==="online",onChange:y=>l(y.target.value)}),n.jsx("span",{style:{fontWeight:"500"},children:" Online"})]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:d,style:{flex:1,padding:"12px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontWeight:"500"},children:d?"Processing...":"Add Payment"})]})]})]})]})})},Zfe=({booking:e,onClose:t,onExtend:r})=>{var C,E;const[a,i]=N.useState(1),[s,l]=N.useState(!1),[d,u]=N.useState(""),f=new Date(e.checkOutDate),p=new Date(f),m=typeof a=="string"?parseInt(a)||0:a;p.setDate(p.getDate()+m);const x=((C=e.roomId)==null?void 0:C.price)||0,v=x*m,j=e.gstType==="gst"||e.gstType==="igst"?v*.05:0,b=v+j,y=async O=>{O.preventDefault(),u("");const S=typeof a=="string"?parseInt(a):a;if(!S||S<1){u("Please select at least 1 additional night");return}l(!0);try{await r(e._id,p.toISOString().split("T")[0],S,b),t()}catch(T){u(T.message||"Failed to extend booking")}finally{l(!1)}};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#f59e0b",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[n.jsxs("h3",{style:{margin:0},children:["Extend Stay - Room ",(E=e.roomId)==null?void 0:E.roomNumber]}),n.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),d&&n.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[n.jsx(fr,{size:16}),n.jsx("span",{style:{fontSize:"14px"},children:d})]}),n.jsxs("div",{style:{padding:"20px",overflowY:"auto",flex:1},children:[n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[n.jsxs("h4",{style:{margin:"0 0 10px"},children:["Guest: ",e.userName]}),n.jsxs("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:["Phone: ",e.userPhone]})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px"},children:"Current Booking"}),n.jsxs("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"5px"},children:[n.jsx("strong",{children:"Check-in:"})," ",new Date(e.checkInDate).toLocaleDateString()]}),n.jsxs("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"5px"},children:[n.jsx("strong",{children:"Current Check-out:"})," ",f.toLocaleDateString()]}),n.jsxs("div",{style:{fontSize:"14px",color:"#374151"},children:[n.jsx("strong",{children:"Current Nights:"})," ",e.nights]})]}),n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Additional Nights *"}),n.jsx("input",{type:"number",value:a,onChange:O=>{const S=O.target.value;if(S===""||S===null)i("");else{const T=parseInt(S);!isNaN(T)&&T>=0&&i(T)}},onBlur:O=>{(O.target.value===""||parseInt(O.target.value)<1)&&i(1)},required:!0,min:"1",max:"30",style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px"}})]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#fef3c7",borderRadius:"8px"},children:[n.jsx("h4",{style:{margin:"0 0 10px",color:"#92400e"},children:"Extended Booking Details"}),n.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"5px"},children:[n.jsx("strong",{children:"New Check-out:"})," ",p.toLocaleDateString()]}),n.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"5px"},children:[n.jsx("strong",{children:"Total Nights:"})," ",e.nights+m]}),n.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"10px"},children:[n.jsx("strong",{children:"Additional Charge:"})," ",x,"  ",m," night",m>1?"s":""," = ",v.toFixed(2)]}),j>0&&n.jsxs("div",{style:{fontSize:"13px",color:"#92400e",marginBottom:"5px"},children:[n.jsxs("strong",{children:["GST (",e.gstType==="gst"?"CGST+SGST":"IGST"," 5%):"]})," ",j.toFixed(2)]}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:"#92400e",paddingTop:"10px",borderTop:"1px solid #fde68a"},children:[n.jsx("strong",{children:"Total Additional Amount:"})," ",b.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px"},children:[n.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,style:{flex:1,padding:"12px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:s?"not-allowed":"pointer",fontWeight:"500"},children:s?"Extending...":"Extend Booking"})]})]})]})]})})},ehe=({booking:e,onClose:t,onCancelExtension:r})=>{var C;const[a,i]=N.useState(1),[s,l]=N.useState(!1),[d,u]=N.useState(""),f=e.extensions&&e.extensions.length>0?e.extensions[e.extensions.length-1]:null;if(!f)return null;const p=f.additionalNights,m=f.additionalAmount/f.additionalNights,x=m*a,v=E=>E?new Date(E).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",j=async E=>{E.preventDefault(),l(!0),u("");try{const O=await r(e._id,a);t()}catch(O){u(O.message)}finally{l(!1)}},b=new Date(e.checkOutDate),y=new Date(b);return y.setDate(b.getDate()-a),n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"0",maxWidth:"500px",width:"90%",margin:"16px",maxHeight:"90vh",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#fef2f2",borderRadius:"12px 12px 0 0"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"20px",fontWeight:"700",margin:0,color:"#dc2626"},children:"Cancel Extension Days"}),n.jsxs("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0"},children:["Room ",(C=e.roomId)==null?void 0:C.roomNumber," - ",e.userName]})]}),n.jsx("button",{onClick:t,style:{color:"#6b7280",backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px"},children:n.jsx(ha,{size:24})})]}),n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{style:{padding:"20px"},children:[d&&n.jsx("div",{style:{padding:"12px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:d}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"8px",marginBottom:"20px",border:"1px solid #f59e0b"},children:[n.jsx("h3",{style:{margin:"0 0 12px",fontSize:"16px",color:"#92400e"},children:"Current Extension Details"}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"Extended Nights:"})," ",f.additionalNights," night(s)"]}),n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"Extension Amount:"})," ",f.additionalAmount.toFixed(2)]}),n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"Current Checkout:"})," ",v(e.checkOutDate)]}),n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"Rate per Day:"})," ",m.toFixed(2)]})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Days to Cancel from Extension *"}),n.jsx("select",{value:a,onChange:E=>i(parseInt(E.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px"},required:!0,children:Array.from({length:p},(E,O)=>O+1).map(E=>n.jsxs("option",{value:E,children:[E," day",E>1?"s":""," - Refund ",(m*E).toFixed(2)]},E))}),n.jsxs("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:["You can cancel 1 to ",p," days from the extension"]})]}),n.jsxs("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"8px",marginBottom:"20px",border:"1px solid #10b981"},children:[n.jsx("h3",{style:{margin:"0 0 12px",fontSize:"16px",color:"#166534"},children:"Cancellation Summary"}),n.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"Days to Cancel:"})," ",a," night",a>1?"s":""]}),n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"Refund Amount:"})," ",x.toFixed(2)]}),n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"New Checkout Date:"})," ",v(y)]}),n.jsxs("p",{style:{margin:"4px 0"},children:[n.jsx("strong",{children:"Remaining Extension:"})," ",p-a," night",p-a!==1?"s":""]})]})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"20px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",borderRadius:"0 0 12px 12px"},children:[n.jsx("button",{type:"button",onClick:t,disabled:s,style:{padding:"10px 20px",backgroundColor:"white",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",opacity:s?.6:1},children:s?"Cancelling...":`Cancel ${a} Day${a>1?"s":""}`})]})]})]})})},the=({bookings:e,onClose:t,onBulkCheckout:r})=>{var E,O;const[a,i]=N.useState(null),[s,l]=N.useState(!1),[d,u]=N.useState(""),[f,p]=N.useState("cash"),m=e.filter(S=>{var T;return((T=S.userName)==null?void 0:T.startsWith("BULK:"))&&S.status==="checked-in"}),x=()=>{var B;if(!a)return{grandTotal:0,amountPaid:0,balanceDue:0};const S=a.totalPrice||0,T=a.amountPaid||0,k=S-T,D=(B=a.userName)==null?void 0:B.match(/\((\d+) rooms?\)/);return{totalRooms:D?parseInt(D[1]):1,roomCharges:a.baseAmount||0,totalGst:(a.cgst||0)+(a.sgst||0)+(a.igst||0),restaurantBills:0,grandTotal:S,amountPaid:T,balanceDue:k}},v=x(),j=async()=>{const S=parseFloat(d)||0;if(S<=0){alert("Please enter a valid payment amount");return}if(!a){alert("Please select a bulk booking first");return}l(!0);try{const T=(a.amountPaid||0)+S;await Yn.put(`/room-booking/${a._id}/payment`,{amountPaid:T,paymentMethod:f,paymentAmount:S}),i({...a,amountPaid:T}),u(""),alert(`Payment of ${S.toFixed(2)} added successfully!`)}catch(T){console.error("Error adding payment:",T),alert("Failed to add payment. Please try again.")}finally{l(!1)}},b=async()=>{if(!a||v.balanceDue<=0){alert("No balance due to pay");return}l(!0);try{await Yn.put(`/room-booking/${a._id}/payment`,{amountPaid:v.grandTotal,paymentMethod:f,paymentAmount:v.balanceDue}),i({...a,amountPaid:v.grandTotal}),alert("Full balance paid successfully!")}catch(S){console.error("Error paying full balance:",S),alert("Failed to pay full balance. Please try again.")}finally{l(!1)}},y=async()=>{if(!a){alert("Please select a bulk booking to checkout");return}const S=x();if(window.confirm(`Checkout bulk booking for ${a.userName}?

Total Rooms: ${S.totalRooms}
Total Amount: ${S.grandTotal.toFixed(2)}
Balance Due: ${S.balanceDue.toFixed(2)}`)){l(!0);try{await r([a]),t()}catch(T){console.error("Bulk checkout error:",T),alert("Failed to checkout bulk booking. Please try again.")}finally{l(!1)}}},C=()=>{var B,M;if(!a){alert("Please select a bulk booking first");return}const S=(B=a.userName)==null?void 0:B.match(/BULK: (.+) \(\d+ rooms?\)/),T=S?S[1]:a.userName,k=(M=a.userName)==null?void 0:M.match(/\((\d+) rooms?\)/),D=k?parseInt(k[1]):1,F=window.open("","_blank");F.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Bulk Booking Bill</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .guest-info { margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; }
          .room-details { margin-bottom: 20px; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
          .total-row { font-weight: bold; font-size: 16px; }
          .balance-due { color: #dc2626; font-weight: bold; }
          .room-list { margin: 10px 0; padding: 10px; background-color: #f0f9ff; border-radius: 6px; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>HOTEL VIRAT</h1>
          <h2>BULK BOOKING BILL</h2>
          <p><strong>Bill Number:</strong> BULK-${a._id}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
        </div>
        
        <div class="guest-info">
          <h3>Guest Details:</h3>
          <p><strong>Name:</strong> ${T}</p>
          <p><strong>Phone:</strong> ${a.userPhone}</p>
          ${a.userEmail?`<p><strong>Email:</strong> ${a.userEmail}</p>`:""}
          ${a.guestGstNumber?`<p><strong>GST Number:</strong> ${a.guestGstNumber}</p>`:""}
        </div>
        
        <div class="room-details">
          <h3>Booking Details:</h3>
          <p><strong>Total Rooms:</strong> ${v.totalRooms}</p>
          <div class="room-list">
            <strong>Rooms:</strong> ${D} rooms (Bulk Booking)
          </div>
          <p><strong>Check-in:</strong> ${new Date(a.checkInDate).toLocaleDateString()}</p>
          <p><strong>Check-out:</strong> ${new Date(a.checkOutDate).toLocaleDateString()}</p>
          <p><strong>Nights:</strong> ${a.nights||1}</p>
        </div>
        
        <table>
          <tr><td><strong>Room Charges:</strong></td><td>${v.roomCharges.toFixed(2)}</td></tr>
          ${v.totalGst>0?`<tr><td><strong>GST:</strong></td><td>${v.totalGst.toFixed(2)}</td></tr>`:""}
          <tr><td colspan="2"><hr></td></tr>
          <tr class="total-row"><td><strong>Grand Total:</strong></td><td>${v.grandTotal.toFixed(2)}</td></tr>
          <tr><td><strong>Amount Paid:</strong></td><td>${v.amountPaid.toFixed(2)}</td></tr>
          <tr class="total-row balance-due"><td><strong>Balance Due:</strong></td><td>${v.balanceDue.toFixed(2)}</td></tr>
        </table>
        
        <div style="margin-top: 40px; text-align: center;">
          <p>Thank you for choosing Hotel Virat!</p>
          <p style="font-size: 12px;">This is a bulk booking for ${v.totalRooms} rooms.</p>
        </div>
        
        <script>
          window.onload = function() {
            window.print();
            window.onafterprint = function() {
              window.close();
            }
          }
        <\/script>
      </body>
      </html>
    `),F.document.close()};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#dc2626",color:"white"},children:[n.jsx("h3",{style:{margin:0},children:"Bulk Checkout"}),n.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),n.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:m.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[n.jsx("h4",{children:"No Bulk Bookings Available"}),n.jsx("p",{children:"Only bulk bookings can be checked out using bulk checkout."}),n.jsx("p",{children:"Individual rooms should be checked out separately."})]}):n.jsxs("div",{children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h4",{style:{margin:"0 0 15px",color:"#374151"},children:"Select Bulk Booking to Checkout:"}),n.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},children:m.map(S=>{var M,L;const T=(a==null?void 0:a._id)===S._id,k=(M=S.userName)==null?void 0:M.match(/\((\d+) rooms?\)/),D=k?parseInt(k[1]):1,F=(L=S.userName)==null?void 0:L.match(/BULK: (.+) \(\d+ rooms?\)/),B=F?F[1]:S.userName;return n.jsxs("div",{style:{padding:"15px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:"12px",backgroundColor:T?"#f0f9ff":"white",cursor:"pointer"},onClick:()=>i(S),children:[n.jsx("input",{type:"radio",checked:T,onChange:()=>i(S),style:{transform:"scale(1.2)"}}),n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px"},children:[B," - ",D," Rooms"]}),n.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"2px"},children:[" ",S.userPhone," |  Bulk Booking (",D," rooms)"]}),n.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:[" Total: ",(S.totalPrice||0).toFixed(2)," | Paid: ",(S.amountPaid||0).toFixed(2)]})]})]},S._id)})})]}),a&&n.jsxs("div",{children:[n.jsxs("h4",{style:{margin:"0 0 15px",color:"#374151"},children:["Bulk Booking Details - ",((O=(E=a.userName)==null?void 0:E.match(/BULK: (.+) \(\d+ rooms?\)/))==null?void 0:O[1])||a.userName]}),n.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{children:"Total Rooms:"}),n.jsx("span",{children:v.totalRooms})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{children:"Room Charges:"}),n.jsxs("span",{children:["",v.roomCharges.toFixed(2)]})]}),v.totalGst>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{children:"GST:"}),n.jsxs("span",{children:["",v.totalGst.toFixed(2)]})]}),n.jsx("hr",{style:{margin:"10px 0"}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"16px",fontWeight:"600"},children:[n.jsx("span",{children:"Grand Total:"}),n.jsxs("span",{children:["",v.grandTotal.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{children:"Amount Paid:"}),n.jsxs("span",{children:["",v.amountPaid.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"600",color:v.balanceDue>0?"#dc2626":"#059669"},children:[n.jsx("span",{children:"Balance Due:"}),n.jsxs("span",{children:["",v.balanceDue.toFixed(2)]})]})]}),v.balanceDue>0&&n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h5",{style:{margin:"0 0 10px"},children:"Add Payment ()"}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[n.jsx("input",{type:"number",value:d,onChange:S=>u(S.target.value),placeholder:"Enter amount",style:{flex:1,padding:"8px",border:"1px solid #e5e7eb",borderRadius:"4px"}}),n.jsx("button",{onClick:j,disabled:s||!d,style:{padding:"8px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",opacity:s||!d?.6:1},children:"Add"})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"8px 12px",border:f==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",backgroundColor:f==="cash"?"#f0fdf4":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:f==="cash",onChange:S=>p(S.target.value)})," Cash"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"8px 12px",border:f==="online"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",backgroundColor:f==="online"?"#f0fdf4":"white"},children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:f==="online",onChange:S=>p(S.target.value)})," Online"]})]}),n.jsxs("button",{onClick:b,disabled:s,style:{width:"100%",padding:"10px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"10px",opacity:s?.6:1},children:["Pay Full Balance (",v.balanceDue.toFixed(2),")"]})]}),n.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[n.jsx("button",{onClick:t,style:{padding:"10px 20px",backgroundColor:"white",color:"#374151",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"Close"}),n.jsxs("button",{onClick:C,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[n.jsx(wi,{size:16})," Print Bill"]}),n.jsx("button",{onClick:y,disabled:s,style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",opacity:s?.6:1},children:s?"Processing...":`Checkout (${v.balanceDue.toFixed(2)} due)`})]})]})]})})]})})},gl=Yt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),rhe=()=>{const[e,t]=N.useState([]),[r,a]=N.useState([]),[i,s]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState([]),[p,m]=N.useState(!0),[x,v]=N.useState(""),j=`
    .search-container {
      position: relative;
      flex: 1;
      max-width: 400px;
    }
    
    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
      z-index: 1;
    }
    
    .search-input {
      width: 100%;
      padding: 10px 12px 10px 40px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      height: 38px;
    }
    
    .filter-buttons {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .filter-select.compact {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      height: 38px;
      min-width: 140px;
      background: white;
    }
    
    .legacy-filter-label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      white-space: nowrap;
      cursor: pointer;
    }
    
    .legacy-filter-label input[type="checkbox"] {
      margin: 0;
    }
    
    .filters-bar {
      display: flex;
      gap: 16px;
      align-items: center;
      padding: 16px 20px;
      background: #f8f9fa;
      border-bottom: 1px solid #e5e7eb;
      flex-wrap: wrap;
    }
  `;N.useEffect(()=>{const pe=document.createElement("style");return pe.textContent=j,document.head.appendChild(pe),()=>{document.head.removeChild(pe)}},[]);const[b,y]=N.useState(!1),[C,E]=N.useState(null),[O,S]=N.useState(""),[T,k]=N.useState(""),[D,F]=N.useState("all"),[B,M]=N.useState("all"),[L,A]=N.useState(""),[U,P]=N.useState(!0),[I,R]=N.useState(1),[W,Q]=N.useState(1),ge=10;N.useEffect(()=>{(async()=>{try{const[Se,K]=await Promise.all([gl.get("/branch"),gl.get("/table")]),ue=Se.data||[];let ye=[];K.data&&K.data.success&&Array.isArray(K.data.data)?ye=K.data.data:Array.isArray(K.data)&&(ye=K.data),console.log(" Branches API response:",ue),console.log(" Tables API response:",ye),console.log(" Available branch IDs:",ue.map(fe=>fe._id)),console.log(" Available branch names:",ue.map(fe=>`${fe._id}: ${fe.name}`)),d(ue),f(ye),await q(ue,ye)}catch(Se){console.error(" Error in fetchAllData:",Se),d([]),f([]),v("Failed to load data. Please refresh the page.")}finally{m(!1)}})()},[]),N.useEffect(()=>{l.length>=0&&u.length>=0&&Y()},[D,B,L]);const q=async(pe=l,Se=u)=>{var K,ue;try{if(!pe||pe.length===0){console.log(" Branches data is empty, fetching again...");try{pe=(await gl.get("/branch")).data||[],console.log(" Refetched branches:",pe),d(pe)}catch(ne){console.error(" Error refetching branches:",ne),pe=[]}}if(!Se||Se.length===0){console.log(" Tables data is empty, fetching again...");try{const Ae=(await gl.get("/table")).data;Ae&&Ae.success&&Array.isArray(Ae.data)?Se=Ae.data:Array.isArray(Ae)?Se=Ae:Se=[],console.log(" Refetched tables:",Se),f(Se)}catch(ne){console.error(" Error refetching tables:",ne),Se=[]}}const ye={};D!=="all"&&(ye.status=D),L&&(ye.date=L),console.log("Fetching reservations with params:",ye);const fe=await gl.get("/reservation",{params:ye});if(console.log(" Full reservation response:",fe),console.log(" Response status:",fe.status),console.log(" Response data:",fe.data),console.log(" Response data type:",typeof fe.data),console.log(" Response data keys:",fe.data?Object.keys(fe.data):"null"),fe.data&&fe.data.error)throw console.error(" API returned error:",fe.data.error),new Error(`API Error: ${fe.data.error}`);let Xe=[];if(fe.data&&fe.data.message==="Reservation routes working")console.log(" Server returning placeholder response - treating as empty result"),Xe=[];else if(fe.data&&fe.data.success&&Array.isArray(fe.data.data))console.log(" Using new format: {success, count, data}"),Xe=fe.data.data;else if(Array.isArray(fe.data))console.log(" Using old format: direct array"),Xe=fe.data;else if(fe.data&&fe.data.success===!1)console.log(" API returned success: false, treating as empty result"),Xe=[];else throw console.error(" Unexpected response format:",fe.data),console.error(" Expected either Array or {success, count, data}"),new Error("Invalid response format");console.log("Raw reservations data:",Xe),console.log("Available branches for processing:",pe),console.log("Available tables for processing:",Se),console.log("Branches count:",pe.length),console.log("Tables count:",Se.length);const Ce=Xe.map(ne=>{if(console.log("Processing reservation:",ne),!ne.tableId)return console.log("Legacy reservation without table:",ne._id),{id:ne._id,customerName:ne.customerName,customerPhone:ne.customerPhone,customerEmail:ne.customerEmail||"",guestCount:ne.guestCount,tableNumber:"N/A",tableName:"No Table Assigned",branchName:"Legacy Data",branchId:null,reservationDate:new Date(ne.reservationDate).toLocaleDateString(),timeSlot:ne.timeSlot,status:ne.status,notes:ne.notes||"",createdAt:new Date(ne.createdAt).toLocaleString(),originalReservation:ne,isLegacyReservation:!0};let Ae="N/A";if(ne.tableId)if(typeof ne.tableId=="object")Ae=ne.tableId.number||"N/A";else{const X=Se.find(se=>se._id===ne.tableId);Ae=(X==null?void 0:X.number)||"N/A"}let Ve="Unknown Branch",te=null;if(ne.branchId)if(console.log(" Direct branchId found:",ne.branchId),typeof ne.branchId=="object")Ve=ne.branchId.name||"Unknown Branch",te=ne.branchId._id;else{console.log(` Looking for direct branch ID: ${ne.branchId}`);const X=pe.find(se=>se._id===ne.branchId);if(X)Ve=X.name,te=X._id,console.log(` Found direct branch: ${Ve}`);else{console.log(" Direct branch not found, trying string comparison...");const se=pe.find(J=>J._id.toString()===ne.branchId.toString());se&&(Ve=se.name,te=se._id,console.log(` Found direct branch by string comparison: ${Ve}`))}}if(Ve==="Unknown Branch"&&ne.tableId&&typeof ne.tableId=="object"&&ne.tableId.branchId){const X=ne.tableId.branchId;if(console.log(` Looking for branch ID: ${X}`),console.log(" Available branches:",pe.map(se=>`${se._id}:${se.name}`)),console.log(" Exact match check:",pe.find(se=>se._id===X)),typeof X=="object")Ve=X.name||"Unknown Branch",te=X._id;else{const se=pe.find(J=>J._id===X);if(se)Ve=se.name,te=se._id,console.log(` Found branch: ${Ve}`);else{console.log(` Branch not found for ID: ${X}`),console.log(" Trying string comparison...");const J=pe.find(Ne=>Ne._id.toString()===X.toString());J&&(Ve=J.name,te=J._id,console.log(` Found branch by string comparison: ${Ve}`))}}}if(Ve==="Unknown Branch"&&ne.tableId){const X=typeof ne.tableId=="object"?ne.tableId._id:ne.tableId,se=Se.find(J=>J._id===X);if(se&&se.branchId){const J=pe.find(Ne=>Ne._id===(se.branchId._id||se.branchId));J&&(Ve=J.name,te=J._id)}}console.log("Extracted info:",{tableNumber:Ae,branchName:Ve,branchId:te});const ce=new Date-new Date(ne.createdAt)<24*60*60*1e3;return{id:ne._id,customerName:ne.customerName,customerPhone:ne.customerPhone,customerEmail:ne.customerEmail||"",guestCount:ne.guestCount,tableNumber:Ae,tableName:`Table ${Ae}`,branchName:Ve,branchId:te,reservationDate:new Date(ne.reservationDate).toLocaleDateString(),timeSlot:ne.timeSlot,status:ne.status,notes:ne.notes||"",createdAt:new Date(ne.createdAt).toLocaleString(),originalReservation:ne,isNewReservation:ce}});console.log("Formatted reservations:",Ce);const Le=Array.isArray(Ce)?Ce.sort((ne,Ae)=>{const Ve=new Date(ne.originalReservation.createdAt);return new Date(Ae.originalReservation.createdAt)-Ve}):[];t(Le)}catch(ye){console.error("Error fetching reservations:",ye),console.error("Error details:",{message:ye.message,response:(K=ye.response)==null?void 0:K.data,status:(ue=ye.response)==null?void 0:ue.status}),t([]),v("Failed to load reservations. Please refresh the page and try again.")}},Y=async()=>{m(!0),v(""),await q(),m(!1)};N.useEffect(()=>{let pe=e;if(U||(pe=pe.filter(Se=>!Se.isLegacyReservation)),T.trim()){const Se=T.trim().toLowerCase();pe=pe.filter(K=>K.customerName.toLowerCase().includes(Se)||K.customerPhone.includes(Se)||K.tableName.toLowerCase().includes(Se)||K.branchName.toLowerCase().includes(Se)||K.status.toLowerCase().includes(Se))}B!=="all"&&(pe=pe.filter(Se=>Se.branchId===B)),s(pe),Q(Math.ceil(pe.length/ge)),R(1)},[e,T,B,U]),N.useEffect(()=>{const pe=(I-1)*ge,Se=pe+ge,K=i.slice(pe,Se);a(K)},[i,I]);const z=pe=>{E(pe),y(!0)},ee=async(pe,Se)=>{try{await gl.put(`/reservation/${pe}`,{status:Se}),S(`Reservation ${Se} successfully`),Y(),setTimeout(()=>S(""),3e3)}catch(K){console.error("Error updating reservation:",K),alert("Failed to update reservation status")}},H=async pe=>{if(window.confirm("Are you sure you want to cancel this reservation?"))try{await gl.put(`/reservation/${pe}/cancel`),S("Reservation cancelled successfully"),Y(),setTimeout(()=>S(""),3e3)}catch(Se){console.error("Error cancelling reservation:",Se),alert("Failed to cancel reservation")}},re=()=>{let pe=`Customer Name,Phone,Email,Table,Branch,Date,Time Slot,Guests,Status,Notes,Created At
`;i.forEach(ye=>{pe+=`"${ye.customerName}","${ye.customerPhone}","${ye.customerEmail}","${ye.tableName}","${ye.branchName}","${ye.reservationDate}","${ye.timeSlot}",${ye.guestCount},"${ye.status}","${ye.notes}","${ye.createdAt}"
`});const Se=new Blob([pe],{type:"text/csv"}),K=window.URL.createObjectURL(Se),ue=document.createElement("a");ue.setAttribute("hidden",""),ue.setAttribute("href",K),ue.setAttribute("download",`reservations-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},le=pe=>{switch(pe){case"confirmed":return"#28a745";case"reserved":return"#ffc107";case"cancelled":return"#dc3545";case"completed":return"#17a2b8";default:return"#6c757d"}};return n.jsxs("div",{className:"reservations-page",children:[O&&n.jsxs("div",{className:"success-message",children:[n.jsx(ra,{size:16}),n.jsx("span",{children:O}),n.jsx("button",{onClick:()=>S(""),children:n.jsx(ha,{size:16})})]}),n.jsxs("div",{className:"page-header",children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Table Reservations"}),e.length>0&&n.jsxs("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:[e.filter(pe=>pe.isNewReservation).length," new reservations in the last 24 hours"]})]}),n.jsx("div",{className:"header-actions",children:n.jsxs("button",{className:"btn btn-outline",onClick:re,children:[n.jsx(Ca,{size:16}),n.jsx("span",{children:"Export CSV"})]})})]}),n.jsxs("div",{className:"filters-bar",children:[n.jsxs("div",{className:"search-container",children:[n.jsx(wr,{size:18,className:"search-icon"}),n.jsx("input",{type:"text",placeholder:"Search by customer name, phone, table, or branch...",className:"search-input",value:T,onChange:pe=>k(pe.target.value)})]}),n.jsxs("div",{className:"filter-buttons",children:[n.jsxs("select",{className:"filter-select compact",value:D,onChange:pe=>F(pe.target.value),children:[n.jsx("option",{value:"all",children:"All Reservations"}),n.jsx("option",{value:"reserved",children:"New Reservations"}),n.jsx("option",{value:"confirmed",children:"Confirmed"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]}),n.jsxs("select",{className:"filter-select compact",value:B,onChange:pe=>M(pe.target.value),children:[n.jsx("option",{value:"all",children:"All Branches"}),l.map(pe=>n.jsx("option",{value:pe._id,children:pe.name},pe._id))]}),n.jsx("input",{type:"date",className:"filter-select compact",value:L,onChange:pe=>A(pe.target.value),placeholder:"Filter by date"}),n.jsxs("label",{className:"legacy-filter-label",children:[n.jsx("input",{type:"checkbox",checked:U,onChange:pe=>P(pe.target.checked)}),n.jsx("span",{children:"Show Legacy Data"})]})]})]}),x&&n.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(fr,{size:18}),n.jsx("span",{children:x})]}),n.jsx("div",{className:"data-card",children:p?n.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:n.jsx("p",{children:"Loading reservations..."})}):n.jsxs("table",{className:"data-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Customer Details"}),n.jsx("th",{children:"Table & Branch"}),n.jsx("th",{children:"Reservation Details"}),n.jsx("th",{children:"Guests"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:r.length>0?r.map(pe=>n.jsxs("tr",{style:{backgroundColor:pe.isNewReservation?"#f0f9ff":"transparent",borderLeft:pe.isNewReservation?"4px solid #0ea5e9":"none"},children:[n.jsx("td",{children:n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[n.jsx("strong",{style:{fontSize:"16px"},children:pe.customerName}),pe.isNewReservation&&n.jsx("span",{style:{backgroundColor:"#0ea5e9",color:"white",fontSize:"10px",fontWeight:"bold",padding:"2px 6px",borderRadius:"4px"},children:"NEW"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:[n.jsx(Ai,{size:14}),n.jsx("span",{style:{fontSize:"14px"},children:pe.customerPhone})]}),pe.customerEmail&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"2px"},children:[n.jsx(Js,{size:14}),n.jsx("span",{style:{fontSize:"12px",color:"#666"},children:pe.customerEmail})]})]})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"4px"},children:pe.tableName}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ff,{size:14}),n.jsx("span",{style:{fontSize:"14px",color:pe.isLegacyReservation?"#999":"inherit",fontStyle:pe.isLegacyReservation?"italic":"normal"},children:pe.branchName})]})]})}),n.jsx("td",{children:n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[n.jsx(an,{size:14}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"bold"},children:pe.reservationDate})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ds,{size:14}),n.jsx("span",{style:{fontSize:"14px"},children:pe.timeSlot})]}),pe.notes&&n.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px",fontStyle:"italic"},children:["Note: ",pe.notes]})]})}),n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",justifyContent:"center"},children:[n.jsx(Ls,{size:16}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:pe.guestCount})]})}),n.jsx("td",{children:n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"action-btn view",onClick:()=>z(pe),title:"View full details",children:"View Details"}),pe.status==="reserved"&&n.jsx("button",{className:"action-btn edit",onClick:()=>ee(pe.id,"confirmed"),title:"Confirm this reservation",children:" Confirm"}),pe.status==="confirmed"&&n.jsx("button",{className:"action-btn",style:{backgroundColor:"#17a2b8",color:"white"},onClick:()=>ee(pe.id,"completed"),title:"Mark as completed",children:" Complete"}),(pe.status==="reserved"||pe.status==="confirmed")&&n.jsx("button",{className:"action-btn delete",onClick:()=>H(pe.id),title:"Cancel this reservation",children:" Cancel"}),pe.status==="completed"&&n.jsx("span",{style:{color:"#28a745",fontWeight:"bold",fontSize:"14px"},children:" Completed"})]})})]},pe.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:"5",className:"no-tables",children:"No reservations found matching your criteria"})})})]})}),W>0&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{className:"pagination-btn",onClick:()=>R(pe=>Math.max(pe-1,1)),disabled:I===1||p,children:"Previous"}),n.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.min(5,W)},(pe,Se)=>{let K;return W<=5||I<=3?K=Se+1:I>=W-2?K=W-4+Se:K=I-2+Se,n.jsx("button",{className:`pagination-page ${I===K?"active":""}`,onClick:()=>R(K),disabled:p,children:K},K)})}),n.jsx("button",{className:"pagination-btn",onClick:()=>R(pe=>Math.min(pe+1,W)),disabled:I===W||p,children:"Next"})]}),b&&C&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{className:"modal-title",children:"Reservation Details"}),n.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"order-details",children:[n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Customer Name"}),n.jsx("div",{className:"order-detail-value",children:C.customerName})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Phone Number"}),n.jsx("div",{className:"order-detail-value",children:C.customerPhone})]}),C.customerEmail&&n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Email"}),n.jsx("div",{className:"order-detail-value",children:C.customerEmail})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Table"}),n.jsx("div",{className:"order-detail-value",children:C.tableName})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Branch"}),n.jsx("div",{className:"order-detail-value",children:C.branchName})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Reservation Date"}),n.jsx("div",{className:"order-detail-value",children:C.reservationDate})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Time Slot"}),n.jsx("div",{className:"order-detail-value",children:C.timeSlot})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Number of Guests"}),n.jsx("div",{className:"order-detail-value",children:C.guestCount})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Status"}),n.jsx("div",{className:"order-detail-value",children:n.jsx("span",{className:"status-badge",style:{backgroundColor:le(C.status),color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})})]}),C.notes&&n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Special Notes"}),n.jsx("div",{className:"order-detail-value",children:C.notes})]}),n.jsxs("div",{className:"order-detail-row",children:[n.jsx("div",{className:"order-detail-label",children:"Created At"}),n.jsx("div",{className:"order-detail-value",children:C.createdAt})]})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-outline",onClick:()=>y(!1),children:"Close"}),C.status==="reserved"&&n.jsx("button",{className:"btn btn-primary",onClick:()=>{ee(C.id,"confirmed"),y(!1)},children:"Confirm Reservation"})]})]})})]})},nhe="https://hotelvirat.com/api/v1/hotel";class ahe{async request(t,r={}){let a=`${nhe}${t}`;const i={headers:{"Content-Type":"application/json",...r.headers},...r},s=new AbortController,l=setTimeout(()=>s.abort(),3e4);i.signal=s.signal;try{console.log(` API Request: ${r.method||"GET"} ${a}`);const d=await fetch(a,i);if(clearTimeout(l),d.status===429)throw console.warn(" Rate limit hit, waiting 5 seconds before retry..."),await new Promise(p=>setTimeout(p,5e3)),new Error("Rate limit exceeded. Please wait a moment and try again.");const u=d.headers.get("content-type");if(!u||!u.includes("application/json")){const p=await d.text();throw console.error(" Non-JSON response:",p.substring(0,200)),new Error(`Server returned ${d.status}: Expected JSON but got ${u}`)}const f=await d.json();if(!d.ok)throw new Error(f.message||`HTTP error! status: ${d.status}`);return console.log(` API Success: ${r.method||"GET"} ${a}`),f}catch(d){throw clearTimeout(l),console.error(` API Error: ${r.method||"GET"} ${a}`,d),d.name==="AbortError"?new Error("Request timed out. Please check your connection and try again."):d.message.includes("Failed to fetch")?new Error("Cannot connect to server. Please check your internet connection and try again."):d}}async sendOtp(t){return this.request("/counter-auth/login/send-otp",{method:"POST",body:JSON.stringify({mobile:t})})}async resendOtp(t){return this.request("/counter-auth/login/resend-otp",{method:"POST",body:JSON.stringify({mobile:t})})}async verifyOtp(t,r){return this.request("/counter-auth/verify-otp",{method:"POST",body:JSON.stringify({mobile:t,otp:r,isRegistration:!1})})}async getBranches(){return this.request("/branch")}async getCategories(t){return this.request(`/category?branchId=${t}`)}async getTables(t){return this.request(`/table?branchId=${t}`)}async getMenuItems(t,r=null){let a=`/menu?branchId=${t}`;return r&&(a+=`&categoryId=${r}`),this.request(a)}async createInvoice(t){return this.request("/counter-invoice/invoices",{method:"POST",body:JSON.stringify(t)})}async createOrder(t){return this.request("/counter-order/orders",{method:"POST",body:JSON.stringify(t)})}async getOrderById(t){return this.request(`/counter-order/orders/${t}`)}async getOrders(t){return this.request("/counter-order/orders")}async getOrdersByBranch(t){const r=await this.request("/counter-order/orders");let a=[];return r.success&&Array.isArray(r.data)?a=r.data:r.orders&&Array.isArray(r.orders)?a=r.orders:Array.isArray(r)&&(a=r),t?a.filter(i=>{var l,d;return(((l=i.branch)==null?void 0:l.id)||((d=i.branchId)==null?void 0:d._id)||i.branchId)===t}):a}async updateOrderStatus(t,r){return this.request(`/counter-order/orders/${t}/order-status`,{method:"PUT",body:JSON.stringify({orderStatus:r})})}async createBill(t){return this.request("/counter-bill",{method:"POST",body:JSON.stringify(t)})}async getBills(t){return this.request(`/counter-bill?branchId=${t}`)}async processPayment(t){return this.request("/counter-payment",{method:"POST",body:JSON.stringify(t)})}async generateInvoice(){const t=Date.now(),r=Math.floor(Math.random()*1e3);return{invoiceNumber:`INV-${t}-${r}`,invoiceId:`${t}${r}`,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}}async getNextBillNumber(t,r){if(!r)throw new Error("Category is required for bill number generation");return this.request(`/counter-invoice/next-bill-number/${t}?category=${encodeURIComponent(r)}`)}async getNextInvoiceNumber(t,r){return console.log(" Invoice number requested - using unified bill/invoice numbering for category:",r),this.getNextBillNumber(t,r)}async getNextKOTNumber(t){return this.request(`/counter-invoice/next-kot-number/${t}`)}async getCurrentCounters(t){return this.request(`/counter-invoice/counters/${t}`)}async getComplimentaryStats(t,r,a){let i=`/counter-bill/complimentary/stats?branchId=${t}`;return r&&a&&(i+=`&startDate=${r}&endDate=${a}`),this.request(i)}}const Qt=new ahe,ihe=({message:e,type:t,onClose:r})=>(N.useEffect(()=>{const a=setTimeout(r,3e3);return()=>clearTimeout(a)},[r]),n.jsx("div",{className:`counter-toast ${t}`,children:e})),she=()=>{const e=An(),[t,r]=N.useState(""),[a,i]=N.useState(""),[s,l]=N.useState(!1),[d,u]=N.useState(null),[f,p]=N.useState(!1),[m,x]=N.useState(30),[v,j]=N.useState(!1),[b,y]=N.useState(!1);N.useEffect(()=>{let T;return f&&m>0?T=setTimeout(()=>{x(m-1)},1e3):m===0&&p(!1),()=>clearTimeout(T)},[f,m]);const C=(T,k="success")=>{u({message:T,type:k})},E=async T=>{if(T.preventDefault(),t.length!==10||!/^\d{10}$/.test(t)){C("Please enter a valid 10-digit mobile number","error");return}j(!0);try{const k=await Qt.sendOtp(t);l(!0),p(!0),x(30),C(k.message),k.otp&&setTimeout(()=>{C(`Your OTP is ${k.otp}`,"success")},3e3)}catch(k){console.error("Error sending OTP:",k),C(k.message||"Error sending OTP","error")}finally{j(!1)}},O=async()=>{if(t.length!==10||!/^\d{10}$/.test(t)){C("Please enter a valid 10-digit mobile number","error");return}j(!0);try{const T=await Qt.resendOtp(t);p(!0),x(30),C(T.message),T.otp&&setTimeout(()=>{C(`Your new OTP is ${T.otp}`,"success")},3e3)}catch(T){console.error("Error resending OTP:",T),C(T.message||"Error resending OTP","error")}finally{j(!1)}},S=async T=>{if(T.preventDefault(),!a||a.length!==6){C("Please enter a valid 6-digit OTP","error");return}y(!0);try{const k=await Qt.verifyOtp(t,a),D=k.counter._id;console.log("Counter User ID:",D),localStorage.setItem("counterAuthenticated","true"),localStorage.setItem("counterUserId",D),localStorage.setItem("counterUserData",JSON.stringify(k.counter)),C(k.message),setTimeout(()=>{e("/counter/branch-selection")},1e3)}catch(k){console.error("Error verifying OTP:",k),C(k.message||"Error during login","error")}finally{y(!1)}};return n.jsxs("div",{className:"counter-container",children:[d&&n.jsx(ihe,{message:d.message,type:d.type,onClose:()=>u(null)}),n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("img",{src:"/logo.png",alt:"Virat Restaurant",style:{width:"120px",height:"120px",marginBottom:"20px"},onError:T=>{T.target.style.display="none"}}),n.jsx("h1",{className:"counter-title",children:"Counter Login"}),n.jsx("p",{className:"counter-subtitle",children:"Welcome back! Please login to continue"})]}),n.jsxs("form",{className:"counter-form",onSubmit:s?S:E,children:[n.jsxs("div",{className:"counter-form-group",children:[n.jsx("label",{className:"counter-label",children:"Mobile Number"}),n.jsx("input",{type:"tel",className:"counter-input",placeholder:"Enter 10 digit number",maxLength:10,value:t,onChange:T=>r(T.target.value),disabled:s||v,required:!0})]}),s&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"counter-form-group",children:[n.jsx("label",{className:"counter-label",children:"OTP"}),n.jsx("input",{type:"text",className:"counter-input",placeholder:"Enter 6 digit OTP",maxLength:6,value:a,onChange:T=>i(T.target.value),required:!0})]}),n.jsx("div",{style:{textAlign:"right",marginBottom:"20px"},children:n.jsxs("button",{type:"button",className:"counter-button-secondary",onClick:O,disabled:f||v,style:{width:"auto",padding:"8px 16px",fontSize:"0.875rem",opacity:f?.5:1},children:[f?`Resend OTP in ${m}s`:"Resend OTP",v&&n.jsx("div",{className:"counter-spinner",style:{width:"16px",height:"16px",marginLeft:"8px"}})]})})]}),n.jsx("button",{type:"submit",className:"counter-button",disabled:v||b,children:v||b?n.jsx("div",{className:"counter-spinner",style:{width:"20px",height:"20px"}}):s?"Login":"Send OTP"})]})]})]})},ohe=()=>{const e=An(),[t,r]=N.useState([]),[a,i]=N.useState(null),[s,l]=N.useState(!0),[d,u]=N.useState(null);N.useEffect(()=>{f()},[]);const f=async()=>{try{l(!0);const v=await Qt.getBranches(),j=v.branches||v.data||v||[];r(j)}catch(v){console.error("Error loading branches:",v),u("Failed to load branches. Please try again.")}finally{l(!1)}},p=v=>{i(v)},m=()=>{if(!a){alert("Please select a branch to continue");return}localStorage.setItem("selectedBranch",JSON.stringify(a)),e("/counter/category-selection",{state:{selectedBranch:a}})},x=()=>{localStorage.removeItem("counterAuthenticated"),localStorage.removeItem("counterUserId"),localStorage.removeItem("counterUserData"),localStorage.removeItem("selectedBranch"),e("/counter/login")};return s?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-loading",children:[n.jsx("div",{className:"counter-spinner"}),n.jsx("p",{children:"Loading branches..."})]})})}):d?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("h3",{children:"Error"}),n.jsx("p",{children:d}),n.jsx("button",{className:"counter-button",onClick:f,children:"Retry"})]})})}):n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Select Branch"}),n.jsx("p",{className:"counter-subtitle",children:"Choose your branch to continue"}),n.jsx("button",{className:"counter-button-secondary",onClick:x,style:{position:"absolute",top:"20px",right:"20px",width:"auto",padding:"8px 16px"},children:"Logout"})]}),t.length===0?n.jsx("div",{className:"counter-error",children:n.jsx("p",{children:"No branches available. Please contact administrator."})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"counter-grid",children:t.map(v=>n.jsxs("div",{className:`counter-item ${(a==null?void 0:a._id)===v._id?"selected":""}`,onClick:()=>p(v),children:[n.jsx("h3",{style:{margin:"0 0 8px 0",color:"#1a202c"},children:v.name}),n.jsx("p",{style:{margin:"0 0 8px 0",color:"#718096",fontSize:"0.875rem"},children:v.address}),n.jsxs("p",{style:{margin:"0",color:"#4a5568",fontSize:"0.875rem"},children:[" ",v.phone]}),v.email&&n.jsxs("p",{style:{margin:"4px 0 0 0",color:"#4a5568",fontSize:"0.875rem"},children:[" ",v.email]})]},v._id))}),n.jsx("div",{style:{textAlign:"center",marginTop:"32px"},children:n.jsx("button",{className:"counter-button",onClick:m,disabled:!a,style:{maxWidth:"300px"},children:"Continue to Category Selection"})})]})]})})},lhe=()=>{const e=An(),r=pa().state,[a,i]=N.useState([]),[s,l]=N.useState(null),[d,u]=N.useState(!0),[f,p]=N.useState(null),[m,x]=N.useState(!1),[v,j]=N.useState(""),[b,y]=N.useState(""),[C,E]=N.useState(null),[O,S]=N.useState(new Set),T={restaurant:"restaurant123","self service":"selfservice456","temple meals":"temple789"};N.useEffect(()=>{if(!r||!r.selectedBranch){e("/counter/branch-selection");return}k()},[r,e]);const k=async()=>{try{u(!0),p(null);const A=await Qt.getCategories(r.selectedBranch._id),U=[];if(A){const I=A.categories||A;Array.isArray(I)&&I.length>0&&I.forEach(R=>{const W=R.name||R.categoryName||R.title;W&&U.push({_id:R._id||R.id,name:W,description:R.description||"",image:R.image||null,itemCount:R.itemCount||0})})}const P=U.filter(I=>{const R=I.name.toLowerCase();return!0});i(P)}catch(A){console.error("Error loading categories:",A),p("Failed to load categories. Please try again.")}finally{u(!1)}},D=A=>{const U=A.name.toLowerCase();Object.keys(T).some(I=>U.includes(I))?Array.from(O).some(R=>U.includes(R))?(console.log(" Category already authenticated - auto-navigating to menu:",U),e("/counter/menu",{state:{...r,selectedCategory:A,customerName:"Walk-in Customer",phoneNumber:"0000000000",invoiceNumber:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[]}})):(console.log(" Protected category selected - requesting password:",U),E(A),x(!0),j(""),y("")):(console.log(" Unprotected category selected - auto-navigating to menu:",U),e("/counter/menu",{state:{...r,selectedCategory:A,customerName:"Walk-in Customer",phoneNumber:"0000000000",invoiceNumber:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[]}}))},F=()=>{const A=C.name.toLowerCase();let U=null,P=null;for(const[I,R]of Object.entries(T))if(A.includes(I)){U=R,P=I;break}v===U?(console.log(" Password correct for category:",A),S(I=>new Set([...I,P])),x(!1),j(""),y(""),console.log(" Auto-navigating to menu after successful authentication"),e("/counter/menu",{state:{...r,selectedCategory:C,customerName:"Walk-in Customer",phoneNumber:"0000000000",invoiceNumber:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[]}}),E(null)):(console.log(" Password incorrect for category:",A),y(`Incorrect password for ${C.name}. Please try again.`),j(""))},B=()=>{x(!1),j(""),y(""),E(null)},M=()=>{e("/counter/branch-selection")},L=()=>{localStorage.removeItem("counterAuthenticated"),localStorage.removeItem("counterUserId"),localStorage.removeItem("counterUserData"),localStorage.removeItem("selectedBranch"),localStorage.removeItem("counterSelectedCategory"),e("/counter/login")};return r?d?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-loading",children:[n.jsx("div",{className:"counter-spinner"}),n.jsx("p",{children:"Loading categories..."})]})})}):f?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("h3",{children:"Error"}),n.jsx("p",{children:f}),n.jsx("button",{className:"counter-button",onClick:k,children:"Retry"})]})})}):n.jsxs("div",{className:"counter-container",children:[n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Select Category"}),n.jsxs("p",{className:"counter-subtitle",children:[r.selectedBranch.name,"  Choose your dining category"]}),n.jsx("button",{className:"counter-button-secondary",onClick:L,style:{position:"absolute",top:"20px",right:"20px",width:"auto",padding:"8px 16px"},children:"Logout"})]}),a.length===0?n.jsx("div",{className:"counter-error",children:n.jsx("p",{children:"No categories available for this branch. Please contact administrator."})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"counter-grid",children:a.map(A=>n.jsxs("div",{className:"counter-item",onClick:()=>D(A),style:{minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",padding:"24px 16px"},children:[n.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"12px"},children:A.name.toLowerCase().includes("restaurant")?"":A.name.toLowerCase().includes("temple")?"":A.name.toLowerCase().includes("self service")?"":A.name.toLowerCase().includes("breakfast")?"":A.name.toLowerCase().includes("lunch")?"":A.name.toLowerCase().includes("dinner")?"":A.name.toLowerCase().includes("snack")?"":A.name.toLowerCase().includes("beverage")?"":A.name.toLowerCase().includes("sweet")?"":""}),n.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#1a202c",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[A.name,(()=>{const U=A.name.toLowerCase();return Object.keys(T).some(I=>U.includes(I))?Array.from(O).some(R=>U.includes(R))?n.jsx("span",{style:{fontSize:"0.8rem",color:"#10b981",backgroundColor:"#d1fae5",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:" Unlocked"}):n.jsx("span",{style:{fontSize:"0.8rem",color:"#f59e0b",backgroundColor:"#fef3c7",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:" Protected"}):null})()]}),A.description&&n.jsx("p",{style:{margin:"0 0 8px 0",color:"#718096",fontSize:"0.875rem",lineHeight:"1.4"},children:A.description}),A.itemCount>0&&n.jsxs("p",{style:{margin:"0",color:"#4a5568",fontSize:"0.75rem",fontWeight:"500"},children:[A.itemCount," items available"]}),(A.name.toLowerCase().includes("restaurant")||A.name.toLowerCase().includes("temple meal"))&&n.jsx("p",{style:{margin:"4px 0 0 0",color:"#f59e0b",fontSize:"0.7rem",fontWeight:"600"},children:" Table Selection Available"})]},A._id))}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:"32px"},children:n.jsx("button",{className:"counter-button-secondary",onClick:M,style:{width:"auto",padding:"12px 24px"},children:" Back to Branches"})})]})]}),m&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:n.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[n.jsxs("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",fontWeight:"600",color:"#1f2937",textAlign:"center"},children:[" ",C==null?void 0:C.name," Access"]}),n.jsxs("p",{style:{margin:"0 0 24px 0",color:"#6b7280",textAlign:"center",fontSize:"0.9rem"},children:["Please enter the password to access ",C==null?void 0:C.name," category"]}),n.jsx("input",{type:"password",value:v,onChange:A=>j(A.target.value),onKeyDown:A=>{A.key==="Enter"&&F()},placeholder:`Enter ${C==null?void 0:C.name} password`,autoFocus:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",marginBottom:"16px",outline:"none",borderColor:b?"#ef4444":"#e5e7eb"}}),b&&n.jsx("p",{style:{margin:"0 0 16px 0",color:"#ef4444",fontSize:"0.8rem",textAlign:"center"},children:b}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[n.jsx("button",{onClick:B,style:{padding:"10px 20px",border:"2px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",color:"#6b7280",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500"},children:"Cancel"}),n.jsx("button",{onClick:F,disabled:!v.trim(),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:v.trim()?"#3b82f6":"#9ca3af",color:"white",cursor:v.trim()?"pointer":"not-allowed",fontSize:"0.9rem",fontWeight:"500"},children:"Submit"})]})]})})]}):n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("p",{children:"Branch data not found. Please start over."}),n.jsx("button",{className:"counter-button",onClick:()=>e("/counter/branch-selection"),children:"Go Back"})]})})})};class che{constructor(){this.printerWidth=38,this.leftMargin="  ",this.isElectron=typeof window<"u"&&window.electronAPI}formatLine(t,r="center"){const a=this.printerWidth;if(t.length>a)return this.leftMargin+t.substring(0,a);switch(r){case"center":const i=Math.floor((a-t.length)/2);return this.leftMargin+" ".repeat(Math.max(0,i))+t+" ".repeat(Math.max(0,i));case"right":return this.leftMargin+" ".repeat(Math.max(0,a-t.length))+t;default:return this.leftMargin+t}}formatTwoColumn(t,r){const a=this.printerWidth,i=r.length+1,s=a-i;return this.leftMargin+t.substring(0,s).padEnd(s)+" "+r}createSeparator(t="-"){return this.leftMargin+t.repeat(this.printerWidth)}generateThermalReceipt(t){var m,x,v,j,b,y,C,E,O,S;const r=[];r.push(this.formatLine("HOTEL VIRAT SIRI DARSHINI","center")),r.push(this.formatLine("ISKON FOOTHILLS, 149/A, R BLOCK,","center")),r.push(this.formatLine("WOC ROAD, RAJAJINAGAR BENGALURU 560010","center")),r.push(this.formatLine("GSTIN: 29AGZPV1558K2Z6","center")),r.push("");let a="SELF SERVICE";if(console.log(" Thermal printer - determining service type:",{selectedTable:t.selectedTable,tableNumber:((m=t.selectedTable)==null?void 0:m.tableNumber)||((x=t.selectedTable)==null?void 0:x.number),selectedCategory:t.selectedCategory,categoryName:(v=t.selectedCategory)==null?void 0:v.name,fullPaymentData:t}),t.selectedTable&&(t.selectedTable.tableNumber||t.selectedTable.number))a="RESTAURANT",console.log(" Service type set to RESTAURANT (has table)");else if(t.selectedCategory){const T=((j=t.selectedCategory.name)==null?void 0:j.toLowerCase())||"";T.includes("restaurant")?(a="RESTAURANT",console.log(" Service type set to RESTAURANT (category)")):T.includes("temple")||T.includes("meal")?(a="TEMPLE MEALS",console.log(" Service type set to TEMPLE MEALS")):(T.includes("darshini")||T.includes("self service"))&&(a="SELF SERVICE",console.log(" Service type set to SELF SERVICE"))}console.log(" Final service type for receipt:",a);let i="C1/as";if(console.log(" Receipt right corner logic - serviceType:",a),console.log(" Receipt right corner logic - selectedTable:",t.selectedTable),console.log(" Receipt right corner logic - tableNumber:",(b=t.selectedTable)==null?void 0:b.tableNumber),console.log(" Receipt right corner logic - number:",(y=t.selectedTable)==null?void 0:y.number),a==="RESTAURANT"){const T=((C=t.selectedTable)==null?void 0:C.tableNumber)||((E=t.selectedTable)==null?void 0:E.number);T?(i=`Table ${T}`,console.log("  Using table number for restaurant receipt:",i)):(console.log("  Restaurant service but no table number found, using default C1/as"),console.log("  selectedTable object:",JSON.stringify(t.selectedTable,null,2)))}else console.log(" Using default C1/as for receipt because service type is:",a);console.log(" Final receipt right corner text:",i),r.push(this.formatTwoColumn(a,i)),r.push(this.createSeparator("-"));let s="NaN-NaN-NaN";try{const T=t.date?new Date(t.date):new Date;if(isNaN(T.getTime())){const k=new Date,D=String(k.getDate()).padStart(2,"0"),F=String(k.getMonth()+1).padStart(2,"0"),B=k.getFullYear();s=`${D}-${F}-${B}`}else{const k=String(T.getDate()).padStart(2,"0"),D=String(T.getMonth()+1).padStart(2,"0"),F=T.getFullYear();s=`${k}-${D}-${F}`}}catch(T){console.error("Date formatting error:",T);const k=new Date,D=String(k.getDate()).padStart(2,"0"),F=String(k.getMonth()+1).padStart(2,"0"),B=k.getFullYear();s=`${D}-${F}-${B}`}let l="";try{const T=t.time?new Date(`1970-01-01 ${t.time}`):new Date;!isNaN(T.getTime())&&t.time?l=t.time:l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}catch(T){console.error("Time formatting error:",T),l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}r.push(this.formatTwoColumn(s,l)),console.log(" Thermal printer unified bill/invoice number debug:",{paymentDataInvoiceNumber:t.invoiceNumber,paymentDataBillNumber:t.billNumber,note:"Bill No and Invoice No should be the same",fallbackValue:t.invoiceNumber||t.billNumber||"001",finalValue:String(t.invoiceNumber||t.billNumber||"001")});const d=t.invoiceNumber||t.billNumber||"001";r.push(this.leftMargin+"BILL NO: "+String(d));const u=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"});r.push(this.leftMargin+`Bill Generated: ${u}`),r.push(this.createSeparator("-")),r.push(this.formatTwoColumn("ITEM NAME","QTY  RATE  AMOUNT")),r.push(this.createSeparator("-")),t.cartItems.forEach(T=>{let k=T.name.replace(/^\d+\s*/,"").toUpperCase();const D=parseFloat(T.quantity).toFixed(3),F=parseFloat(T.price).toFixed(2),B=parseFloat(T.price*T.quantity).toFixed(2);r.push(this.leftMargin+k);const M=`${D}  ${F}  ${B}`;r.push(this.formatLine(M,"right"))}),r.push(this.createSeparator("-"));const f=t.cartItems.reduce((T,k)=>T+k.price*k.quantity,0);if(r.push(this.formatTwoColumn("SUBTOTAL:",`${parseFloat(f).toFixed(2)}`)),t.discountAmount&&t.discountAmount>0&&(r.push(this.formatTwoColumn("DISCOUNT:",`-${parseFloat(t.discountAmount).toFixed(2)}`)),t.discountRemark||(O=t.discount)!=null&&O.remark)){const T=t.discountRemark||((S=t.discount)==null?void 0:S.remark)||"";T.length>0&&r.push(this.leftMargin+`Reason: ${T}`)}r.push(this.createSeparator("-"));const p=t.total||f-(t.discountAmount||0);return r.push(this.formatTwoColumn("GRAND TOTAL:",`${parseFloat(p).toFixed(2)}`)),r.push(this.createSeparator("-")),t.paymentMethod!=="Pending"&&r.push(this.formatTwoColumn("PAYMENT:",t.paymentMethod.toUpperCase())),r.push(this.formatLine(".. !! THANK YOU,VISIT AGAIN !!..","center")),r.push(""),r.push(""),r.join(`
`)}generateThermalBill(t){var p,m,x,v,j,b,y,C,E,O;console.log(" generateThermalBill called with data:",t);const r=[];r.push(this.formatLine("HOTEL VIRAT SIRI DARSHINI","center")),r.push(this.formatLine("ISKON FOOTHILLS, 149/A, R BLOCK,","center")),r.push(this.formatLine("WOC ROAD, RAJAJINAGAR BENGALURU 560010","center")),r.push(this.formatLine("GSTIN: 29AGZPV1558K2Z6","center")),r.push("");let a="SELF SERVICE";if(console.log(" Thermal printer bill - determining service type:",{selectedTable:t.selectedTable,tableNumber:((p=t.selectedTable)==null?void 0:p.tableNumber)||((m=t.selectedTable)==null?void 0:m.number),selectedCategory:t.selectedCategory,categoryName:(x=t.selectedCategory)==null?void 0:x.name,fullBillData:t}),t.selectedTable&&(t.selectedTable.tableNumber||t.selectedTable.number))a="RESTAURANT",console.log(" Bill service type set to RESTAURANT (has table)");else if(t.selectedCategory){const S=((v=t.selectedCategory.name)==null?void 0:v.toLowerCase())||"";S.includes("restaurant")?(a="RESTAURANT",console.log(" Bill service type set to RESTAURANT (category)")):S.includes("temple")||S.includes("meal")?(a="TEMPLE MEALS",console.log(" Bill service type set to TEMPLE MEALS")):(S.includes("darshini")||S.includes("self service"))&&(a="SELF SERVICE",console.log(" Bill service type set to SELF SERVICE"))}console.log(" Final bill service type for receipt:",a);let i="C1/as";if(console.log(" Right corner logic - serviceType:",a),console.log(" Right corner logic - selectedTable:",t.selectedTable),console.log(" Right corner logic - tableNumber:",(j=t.selectedTable)==null?void 0:j.tableNumber),console.log(" Right corner logic - number:",(b=t.selectedTable)==null?void 0:b.number),a==="RESTAURANT"){const S=((y=t.selectedTable)==null?void 0:y.tableNumber)||((C=t.selectedTable)==null?void 0:C.number);S?(i=`Table ${S}`,console.log("  Using table number for restaurant:",i)):(console.log("  Restaurant service but no table number found, using default C1/as"),console.log("  selectedTable object:",JSON.stringify(t.selectedTable,null,2)))}else console.log(" Using default C1/as because service type is:",a);console.log(" Final right corner text:",i),r.push(this.formatTwoColumn(a,i)),r.push(this.createSeparator("-")),console.log(" Processing date and time:",{originalDate:t.date,originalTime:t.time,dateType:typeof t.date,timeType:typeof t.time});let s="NaN-NaN-NaN";try{let S;if(t.date?(S=new Date(t.date),console.log(" Parsed date object:",S,"isValid:",!isNaN(S.getTime()))):(S=new Date,console.log(" Using current date as fallback")),isNaN(S.getTime())){const T=new Date,k=String(T.getDate()).padStart(2,"0"),D=String(T.getMonth()+1).padStart(2,"0"),F=T.getFullYear();s=`${k}-${D}-${F}`,console.log(" Using current date fallback:",s)}else{const T=String(S.getDate()).padStart(2,"0"),k=String(S.getMonth()+1).padStart(2,"0"),D=S.getFullYear();s=`${T}-${k}-${D}`,console.log(" Formatted date:",s)}}catch(S){console.error(" Date formatting error:",S);const T=new Date,k=String(T.getDate()).padStart(2,"0"),D=String(T.getMonth()+1).padStart(2,"0"),F=T.getFullYear();s=`${k}-${D}-${F}`,console.log(" Error fallback date:",s)}let l="";try{t.time&&typeof t.time=="string"?(l=t.time,console.log(" Using provided time:",l)):(l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),console.log(" Using current time:",l))}catch(S){console.error(" Time formatting error:",S),l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),console.log(" Error fallback time:",l)}console.log(" Final date and time for receipt:",{formattedDate:s,formattedTime:l}),r.push(this.formatTwoColumn(s,l)),console.log(" Thermal printer bill invoice number debug:",{billDataInvoiceNumber:t.invoiceNumber,billDataBillNumber:t.billNumber,fallbackValue:t.invoiceNumber||"001",finalValue:String(t.invoiceNumber||"001")}),r.push(this.leftMargin+"BILL NO: "+String(t.invoiceNumber||"001"));const d=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"});r.push(this.leftMargin+`Bill Generated: ${d}`),r.push(this.createSeparator("-")),r.push(this.formatTwoColumn("ITEM NAME","QTY  RATE  AMOUNT")),r.push(this.createSeparator("-")),t.cartItems.forEach(S=>{let T=S.name.replace(/^\d+\s*/,"").toUpperCase();const k=parseFloat(S.quantity).toFixed(3),D=parseFloat(S.price).toFixed(2),F=parseFloat(S.price*S.quantity).toFixed(2);r.push(this.leftMargin+T);const B=`${k}  ${D}  ${F}`;r.push(this.formatLine(B,"right"))}),r.push(this.createSeparator("-"));const u=t.cartItems.reduce((S,T)=>S+T.price*T.quantity,0);if(r.push(this.formatTwoColumn("SUBTOTAL:",`${parseFloat(u).toFixed(2)}`)),console.log(" Discount processing:",{discountAmount:t.discountAmount,discountRemark:t.discountRemark,discount:t.discount,hasDiscount:!!(t.discountAmount&&t.discountAmount>0)}),t.discountAmount&&t.discountAmount>0){if(console.log(" Adding discount to receipt:",t.discountAmount),r.push(this.formatTwoColumn("DISCOUNT:",`-${parseFloat(t.discountAmount).toFixed(2)}`)),t.discountRemark||(E=t.discount)!=null&&E.remark){const S=t.discountRemark||((O=t.discount)==null?void 0:O.remark)||"";S.length>0&&(r.push(this.leftMargin+`Reason: ${S}`),console.log(" Added discount reason:",S))}}else console.log(" No discount to add - discountAmount:",t.discountAmount);r.push(this.createSeparator("-"));const f=t.total||u-(t.discountAmount||0);return console.log(" Total calculation:",{subtotal:u,discountAmount:t.discountAmount||0,providedTotal:t.total,calculatedTotal:f}),r.push(this.formatTwoColumn("GRAND TOTAL:",`${parseFloat(f).toFixed(2)}`)),r.push(this.createSeparator("-")),r.push(this.formatLine(".. !! THANK YOU,VISIT AGAIN !!..","center")),r.push(""),r.push(""),r.join(`
`)}generateKOT(t){const r=[];r.push(this.formatLine("*** KITCHEN ORDER TICKET ***","center")),r.push(this.createSeparator("=")),r.push(""),r.push(this.formatLine(`KOT: ${t.kotNumber}`,"center")),r.push(this.formatLine(`TABLE: ${t.tableNumber}`,"center")),r.push(""),r.push(this.createSeparator("="));const a=new Date,i=a.toLocaleDateString("en-IN"),s=a.toLocaleTimeString("en-IN",{hour12:!0});r.push(this.formatTwoColumn("Date:",i)),r.push(this.formatTwoColumn("Time:",s)),r.push(this.createSeparator("-")),r.push(this.formatTwoColumn("ITEM","QTY")),r.push(this.createSeparator("=")),t.items.forEach(d=>{const u=d.name.toUpperCase(),f=`${d.quantity}x`;r.push(this.formatTwoColumn(u,f)),r.push("")}),r.push(this.createSeparator("="));const l=t.items.reduce((d,u)=>d+u.quantity,0);return r.push(this.formatLine(`TOTAL ITEMS: ${l}`,"center")),r.push(""),r.push(this.formatLine("*** PREPARE IMMEDIATELY ***","center")),r.push(""),r.push(""),r.push(""),r.join(`
`)}generateUpdatedKOT(t){const r=[];r.push(this.formatLine("*** UPDATED KITCHEN ORDER ***","center")),r.push(this.formatLine("*** ORDER TICKET ***","center")),r.push(this.createSeparator("=")),r.push(""),r.push(this.formatLine(`KOT: ${t.kotNumber}`,"center")),r.push(this.formatLine(`TABLE: ${t.tableNumber}`,"center")),r.push(this.formatLine("*** UPDATED ORDER ***","center")),r.push(""),r.push(this.createSeparator("="));const a=new Date,i=a.toLocaleDateString("en-IN"),s=a.toLocaleTimeString("en-IN",{hour12:!0});r.push(this.formatTwoColumn("Updated Date:",i)),r.push(this.formatTwoColumn("Updated Time:",s)),r.push(this.createSeparator("-")),r.push(this.formatLine("*** REVISED QUANTITIES ***","center")),r.push(this.formatLine("*** PLEASE UPDATE PREPARATION ***","center")),r.push(this.createSeparator("-")),r.push(this.formatTwoColumn("ITEM","NEW QTY")),r.push(this.createSeparator("=")),t.items.forEach(d=>{const u=d.name.toUpperCase(),f=`${d.quantity}x`;r.push(this.formatTwoColumn(u,f)),r.push("")}),r.push(this.createSeparator("="));const l=t.items.reduce((d,u)=>d+u.quantity,0);return r.push(this.formatLine(`TOTAL ITEMS: ${l}`,"center")),r.push(""),r.push(this.formatLine("*** ORDER MODIFIED ***","center")),r.push(this.formatLine("*** PREPARE NEW QUANTITIES ***","center")),r.push(this.formatLine("*** DISCARD PREVIOUS KOT ***","center")),r.push(""),r.push(""),r.push(""),r.join(`
`)}async printViaElectron(t){if(!this.isElectron)throw new Error("Electron API not available");try{return await window.electronAPI.printThermal({text:t,options:{preview:!1,margin:{top:0,bottom:0,left:0,right:0},pageSize:{width:80,height:200}}})}catch(r){throw console.error("Electron thermal printing failed:",r),r}}async printViaWebSerial(t){if(!("serial"in navigator))throw new Error("Web Serial API not supported in this browser");try{const r=await navigator.serial.requestPort({filters:[{usbVendorId:1208},{usbVendorId:1305},{usbVendorId:4070}]});await r.open({baudRate:9600});const a=new TextEncoder,i=r.writable.getWriter();return await i.write(a.encode("\x1B@")),await i.write(a.encode("L\0\0")),await i.write(a.encode("\x1B!\0")),await i.write(a.encode("\x1Ba\0")),await i.write(a.encode(t)),await i.write(a.encode("VB\0")),await i.write(a.encode(`


`)),i.releaseLock(),await r.close(),{success:!0,message:"Receipt printed successfully via USB"}}catch(r){throw r.name==="NotFoundError"?new Error("No thermal printer selected. Please connect a USB thermal printer and try again."):(console.error("Web Serial printing failed:",r),new Error(`USB printing failed: ${r.message}`))}}async printViaNetwork(t,r="192.168.1.100",a=9100){try{const i="https://hotelvirat.com/api/v1/hotel",s=new AbortController,l=setTimeout(()=>s.abort(),3e3),d=await fetch(`${i}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,printerIP:r,port:a}),signal:s.signal});clearTimeout(l);const u=await d.json();if(!d.ok)throw u.error&&(u.error.includes("timeout")||u.error.includes("Connection timeout")||u.error.includes("ECONNREFUSED")||u.error.includes("EHOSTUNREACH"))?new Error(`Thermal printer not found at ${r}:${a}. Please check printer connection and IP address.`):new Error(`Network printing failed: ${u.message||d.statusText}`);return u}catch(i){throw i.name==="AbortError"?new Error(`Network printing timed out. Printer at ${r}:${a} is not responding.`):(console.error("Network thermal printing failed:",i),i)}}printViaBrowser(t){return new Promise(r=>{try{const a=window.open("","_blank","width=400,height=600");if(!a){this.printInCurrentWindowSafe(t),r({success:!0,method:"current-window"});return}const i=`
          <!DOCTYPE html>
          <html>
          <head>
            <title>Receipt</title>
            <style>
              @media print {
                @page {
                  size: 80mm auto;
                  margin: 0;
                }
                body {
                  margin: 0;
                  padding: 5mm;
                  font-family: 'Courier New', monospace;
                  font-size: 12px;
                  line-height: 1.2;
                  width: 70mm;
                }
              }
              body {
                font-family: 'Courier New', monospace;
                font-size: 12px;
                line-height: 1.2;
                margin: 0;
                padding: 10px;
                width: 300px;
                background: white;
              }
              pre {
                margin: 0;
                white-space: pre-wrap;
                word-wrap: break-word;
              }
            </style>
          </head>
          <body>
            <pre>${t}</pre>
            <script>
              window.onload = function() {
                try {
                  window.print();
                  setTimeout(function() {
                    try {
                      window.close();
                    } catch(e) {
                      console.log('Could not close print window:', e);
                    }
                  }, 1000);
                } catch(e) {
                  console.log('Print failed:', e);
                  setTimeout(function() {
                    try {
                      window.close();
                    } catch(e2) {
                      console.log('Could not close window after print failure:', e2);
                    }
                  }, 500);
                }
              }
            <\/script>
          </body>
          </html>
        `;a.document.write(i),a.document.close(),r({success:!0,method:"popup-window"})}catch(a){console.error("Browser print failed:",a),this.printInCurrentWindowSafe(t),r({success:!0,method:"current-window-fallback"})}})}printInCurrentWindowSafe(t){try{const r=document.createElement("div");r.id="thermal-print-temp-"+Date.now(),r.innerHTML=`
        <div style="display: none;">
          <style>
            @media print {
              body * { visibility: hidden; }
              #${r.id}, #${r.id} * { visibility: visible; }
              #${r.id} {
                position: absolute;
                left: 0;
                top: 0;
                width: 80mm;
                font-family: 'Courier New', monospace;
                font-size: 12px;
                line-height: 1.2;
              }
            }
          </style>
          <pre>${t}</pre>
        </div>
      `,document.body.appendChild(r),setTimeout(()=>{try{window.print()}catch(a){console.error("Print dialog failed:",a)}setTimeout(()=>{try{document.body.contains(r)&&document.body.removeChild(r)}catch(a){console.error("Cleanup failed:",a)}},2e3)},100)}catch(r){console.error("Safe print method failed:",r),console.log("Receipt content:",t)}}async printReceipt(t,r={}){const a=this.generateThermalReceipt(t);return this.executePrintWithTimeout(a,r)}async printBill(t,r={}){const a=this.generateThermalBill(t);return this.executePrintWithTimeout(a,r)}async executePrintWithTimeout(t,r={},a=5e3){return Promise.race([this.executePrint(t,r),new Promise((i,s)=>setTimeout(()=>s(new Error("Print operation timed out")),a))]).catch(i=>{console.error("Print operation failed or timed out:",i);try{return this.printViaBrowser(t)}catch(s){return console.error("Even browser fallback failed:",s),{success:!1,method:"failed",error:i.message}}})}async executePrint(t,r={}){const{method:a="auto",printerIP:i,port:s}=r;console.log("Generated thermal print text:",t);try{switch(a){case"electron":return await this.printViaElectron(t);case"serial":return await this.printViaWebSerial(t);case"network":return await this.printViaNetwork(t,i,s);case"browser":return this.printViaBrowser(t);case"auto":default:let l=null;if(this.isElectron)try{return await this.printViaElectron(t)}catch(d){l=d,console.log("Electron printing failed, trying next method:",d.message)}if(i&&i!=="192.168.1.100")try{return await this.printViaNetwork(t,i,s)}catch(d){l=d,console.log("Network printing failed, trying next method:",d.message)}return console.log("Using browser print fallback"),this.printViaBrowser(t)}}catch(l){return console.error("Print method failed:",l),console.log("All methods failed, using browser fallback"),this.printViaBrowser(t)}}generateKOTChanges(t){const r=[];r.push(this.formatLine("*** KOT CHANGES ***","center")),r.push(this.formatLine("*** KITCHEN ORDER CHANGES ***","center")),r.push(this.createSeparator("=")),r.push(""),r.push(this.formatLine(`KOT: ${t.kotNumber}`,"center")),r.push(this.formatLine(`TABLE: ${t.tableNumber}`,"center")),r.push(this.formatLine("*** CHANGES ONLY ***","center")),r.push(""),r.push(this.createSeparator("="));const a=new Date,i=a.toLocaleDateString("en-IN"),s=a.toLocaleTimeString("en-IN",{hour12:!0});r.push(this.formatTwoColumn("Change Date:",i)),r.push(this.formatTwoColumn("Change Time:",s)),r.push(this.createSeparator("-")),r.push(this.formatLine("*** ITEM CHANGES ***","center")),r.push(this.formatLine("*** ONLY PREPARE CHANGES ***","center")),r.push(this.createSeparator("-")),r.push(this.formatTwoColumn("ITEM CHANGES","OLD  NEW")),r.push(this.createSeparator("=")),t.items.forEach(u=>{const f=u.name.toUpperCase();if(console.log(" Processing item for KOT changes:",{name:f,quantity:u.quantity,originalQuantity:u.originalQuantity,isRemoved:u.isRemoved,isChanged:u.isChanged}),u.isRemoved)console.log(` Item marked as REMOVED: ${f}`),r.push(this.formatTwoColumn(f,"REMOVED")),r.push(this.formatLine("*** CANCEL THIS ITEM ***","center"));else if(u.isChanged){console.log(` Item marked as CHANGED: ${f}`);const p=`${u.originalQuantity}x  ${u.quantity}x`;if(r.push(this.formatTwoColumn(f,p)),u.quantity>u.originalQuantity){const m=u.quantity-u.originalQuantity;r.push(this.formatLine(`*** PREPARE ${m}x MORE ***`,"center"))}else if(u.quantity<u.originalQuantity){const m=u.originalQuantity-u.quantity;r.push(this.formatLine(`*** REDUCE BY ${m}x ***`,"center"))}}else console.log(` Item has no changes: ${f}`);r.push("")}),r.push(this.createSeparator("="));const l=t.items.filter(u=>u.isRemoved).length,d=t.items.filter(u=>u.isChanged).length;return l>0&&r.push(this.formatLine(`REMOVED ITEMS: ${l}`,"center")),d>0&&r.push(this.formatLine(`CHANGED ITEMS: ${d}`,"center")),r.push(""),r.push(this.formatLine("*** PROCESS CHANGES ONLY ***","center")),r.push(this.formatLine("*** DO NOT REMAKE ENTIRE ORDER ***","center")),r.push(""),r.push(""),r.push(""),r.join(`
`)}async printKOTChanges(t,r={}){const a=this.generateKOTChanges(t);return this.executePrintWithTimeout(a,r)}async printKOT(t,r={}){const a=this.generateKOT(t);return this.executePrintWithTimeout(a,r)}}const ji=new che,dhe=async e=>{try{if(console.log(" Getting next KOT number from server..."),!e)throw new Error("Branch ID is required for KOT number generation");const t=await Qt.getNextKOTNumber(e);if(t&&t.success&&t.kotNumber)return console.log(` Server generated KOT number: ${t.kotNumber}`),t.kotNumber;throw new Error("Invalid response from server")}catch(t){console.error(" Failed to get KOT number from server:",t),console.log(" Falling back to localStorage method for KOT...");const r=new Date,a=String(r.getDate()).padStart(2,"0"),i=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getFullYear()).slice(-2),d=`kot-counter-${`${a}-${i}-${s}`}`;let u=parseInt(localStorage.getItem(d)||"0");u++,localStorage.setItem(d,u.toString());const f=`KOT-${String(u).padStart(3,"0")}`;return console.log(` Fallback generated KOT: ${f} (counter: ${u})`),f}},A3=async(e,t)=>{try{if(console.log(" Getting next unified bill/invoice number from server for category:",t),!e)throw new Error("Branch ID is required for bill/invoice number generation");if(!t)throw new Error("Category is required for bill/invoice number generation");const r=await Qt.getNextBillNumber(e,t);if(r&&r.success&&r.billNumber)return console.log(` Server generated unified bill/invoice number: ${r.billNumber} for category: ${t}`),r.billNumber;throw new Error("Invalid response from server")}catch(r){console.error(" Failed to get unified bill/invoice number from server:",r),console.log(" Falling back to localStorage method...");const a=new Date,i=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getFullYear()).slice(-2),d=`${i}-${s}-${l}`,u=`unified-bill-counter-${t}-${d}`;let f=parseInt(localStorage.getItem(u)||"0");f++,localStorage.setItem(u,f.toString());const p=String(f).padStart(3,"0");return console.log(` Fallback generated unified number: ${p} for category: ${t} (counter: ${f})`),p}},E3=e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com";let r=e.toString().trim().replace(/\\/g,"/"),a;if(r.startsWith("/"))a=`${t}${r}`;else if(r.startsWith("uploads/"))a=`${t}/${r}`;else{const i=r.split("/").pop();a=`${t}/uploads/menu/${i}`}return a},uhe=e=>{if(!e)return null;if(e.startsWith("https://hotelvirat.com"))return e.replace("https://hotelvirat.com","https://hotelvirat.com");if(e.startsWith("https://hotelvirat.com")||e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com";let r=e.toString().trim().replace(/\\/g,"/"),a;if(r.startsWith("/"))a=`${t}${r}`;else if(r.startsWith("uploads/"))a=`${t}/${r}`;else{const i=r.split("/").pop();a=`${t}/uploads/menu/${i}`}return a},fhe=()=>{var qd,Th;const e=An(),t=pa(),r=t.state,[a,i]=N.useState("000"),s=((qd=r==null?void 0:r.selectedCategory)==null?void 0:qd.name)||null,[l,d]=N.useState(s||"All"),[u,f]=N.useState(()=>{console.log(" Cart initialization - customerData:",r),console.log(" Cart initialization - customerData.cartItems:",r==null?void 0:r.cartItems);const ve=((r==null?void 0:r.cartItems)||[]).filter(be=>{const Ee=be&&be.name&&typeof be.quantity=="number"&&be.quantity>0&&typeof be.price=="number"&&be.price>=0;return Ee||console.log(" Filtering out invalid item:",be),Ee});return console.log(" Final cart items after filtering:",ve),ve}),[p,m]=N.useState(["All"]),[x,v]=N.useState([]),[j,b]=N.useState([]),[y,C]=N.useState(!0),[E,O]=N.useState(null),[S,T]=N.useState(null),[k,D]=N.useState({}),[F,B]=N.useState([]),[M,L]=N.useState((r==null?void 0:r.selectedTable)||null),[A,U]=N.useState(!1),[P,I]=N.useState(!1),[R,W]=N.useState([]),[Q,ge]=N.useState(!1),[q,Y]=N.useState(null),[z,ee]=N.useState(!1),[H,re]=N.useState([]),[le,pe]=N.useState(!1),[Se,K]=N.useState(!1),[ue,ye]=N.useState(null),[fe,Xe]=N.useState([]),[Ce,Le]=N.useState(null),[ne,Ae]=N.useState(null),[Ve,te]=N.useState([]),[ce,X]=N.useState(null),[se,J]=N.useState(0),[Ne,Ge]=N.useState("");N.useEffect(()=>{console.log(" modifiedItems state changed:",Ve.map(Z=>({name:Z.name,newQuantity:Z.newQuantity,isRemoved:Z.isRemoved,originalQuantity:Z.originalQuantity})))},[Ve]);const[tt,$e]=N.useState(!1),[Ze,Oe]=N.useState(null),[Qe,ht]=N.useState(!1),[Pt,Rt]=N.useState(new Date().toISOString().split("T")[0]),[Et,ie]=N.useState(!1),[De,Ye]=N.useState(null),Ft=async Z=>{try{console.log(" Generating comprehensive bill for table:",Z),ne&&ne.tableNumber===Z&&(confirm("You have unsaved changes to a KOT for this table. Do you want to save the changes before generating the bill?")?(await ze(!1),await new Promise(tr=>setTimeout(tr,1e3))):(Ae(null),te([]))),await new Promise(Ct=>setTimeout(Ct,500));const ve=await Qt.request("/counter-order/orders?includeComplimentary=false");let be=[];ve&&ve.success&&Array.isArray(ve.orders)||ve&&Array.isArray(ve.orders)?be=ve.orders:ve&&Array.isArray(ve.data)?be=ve.data:Array.isArray(ve)&&(be=ve);const Ee=be.filter(Ct=>Ct.paymentStatus==="pending"&&String(Ct.tableNumber).toLowerCase()===String(Z).toLowerCase());if(console.log(" Found pending KOTs for table",Z,":",Ee.length,Ee.map(Ct=>Ct.kotNumber)),Ee.length===0){console.log(" No pending KOTs found for table",Z);return}const Be=[],lt=[];let nt=0,It=Ee[0];Ee.forEach(Ct=>{lt.push(Ct.kotNumber),nt+=Ct.totalAmount||Ct.grandTotal||0,Ct.items&&Array.isArray(Ct.items)&&(console.log(` Processing KOT ${Ct.kotNumber} items:`,Ct.items.map(tr=>({name:tr.name,quantity:tr.quantity,willBeIncluded:tr.quantity>0}))),Ct.items.forEach(tr=>{if(!tr.quantity||tr.quantity<=0){console.log(" Skipping cancelled item:",tr.name,"quantity:",tr.quantity);return}console.log(" Including item in bill:",tr.name,"quantity:",tr.quantity);const On=Be.findIndex(qa=>qa.name===tr.name);On>=0?(console.log(` Combining item "${tr.name}": ${Be[On].quantity} + ${tr.quantity} = ${Be[On].quantity+tr.quantity}`),Be[On].quantity+=tr.quantity||1):(console.log(` Adding new item "${tr.name}" with quantity ${tr.quantity}`),Be.push({_id:tr.menuItemId||tr._id,name:tr.name,price:tr.price||0,quantity:tr.quantity||1}))}))});const Mt=Be.filter(Ct=>Ct.quantity>0);console.log(" Items after filtering zero quantities:",{originalCount:Be.length,validCount:Mt.length,filteredOut:Be.length-Mt.length}),console.log(" Comprehensive bill details:",{tableNumber:Z,kotNumbers:lt,totalKOTs:Ee.length,totalItems:Mt.length,combinedItems:Mt,totalAmount:nt});let Yr;console.log(" COMPLETION-BASED BILLING: Generating bill number for table completion"),console.log(" Table completing order:",Z),console.log(" KOTs being billed:",Ee.map(Ct=>({id:Ct.id||Ct._id,kotNumber:Ct.kotNumber,invoiceNumber:Ct.invoiceNumber,completionTime:new Date().toISOString()}))),Yr=await A3(r.selectedBranch._id,"Restaurant"),console.log("  COMPLETION-BASED: Generated bill number",Yr,"for table",Z),console.log(" Final bill number for comprehensive bill:",Yr),console.log(" CRITICAL: Bill number validation before navigation:",{billNumber:Yr,isBillNumberValid:!!Yr,billNumberType:typeof Yr,tableNumber:Z,completionTime:new Date().toISOString()}),I(!1);let er=r==null?void 0:r.selectedCategory;(!er||!er.name)&&(s?(er={name:s,_id:null},console.log(" Using preSelectedCategory for comprehensive bill:",er)):(er={name:"Restaurant",_id:null},console.log(" Auto-detected Restaurant category for comprehensive bill:",er))),e("/counter/bill-generation",{state:{...r,selectedCategory:er,selectedTable:{_id:It.tableId,id:It.tableId,tableNumber:Z,number:Z,status:"reserved"},cartItems:Mt,totalAmount:nt,isKOTOrder:!0,isComprehensiveBill:!0,kotNumbers:lt,kotSaved:!0,billNumber:Yr,invoiceNumber:Yr,existingOrderIds:Ee.map(Ct=>Ct.id||Ct._id),customerName:It.customerName||"Walk-in Customer",phoneNumber:It.phoneNumber||"0000000000",date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0})}})}catch(ve){console.error(" Error generating comprehensive bill:",ve),alert("Failed to generate comprehensive bill. Please try again.")}},me=Z=>{const ve=document.querySelector(`[data-kot-index="${Z}"]`);ve?(ve.scrollIntoView({behavior:"smooth",block:"center"}),console.log(" Scrolled to card index:",Z)):console.log(" Card element not found for index:",Z)},[ke,Pe]=N.useState(!1),[it,pt]=N.useState(null),[Nt,_t]=N.useState("1"),[ot,jt]=N.useState(""),mt=N.useRef(null),gt=N.useRef(null),$t=N.useRef(null);N.useEffect(()=>{var ve,be;if(!r){e("/counter/branch-selection");return}if(Jt(),s&&s.toLowerCase().includes("restaurant")){console.log(" Restaurant category detected, loading tables..."),Gt();const lt=setInterval(()=>{console.log(" Periodic table refresh..."),Gt()},3e4);return()=>{clearInterval(lt)}}localStorage.getItem("refreshTablesAfterBill")==="true"&&(console.log(" Refreshing tables after bill print..."),localStorage.removeItem("refreshTablesAfterBill"),setTimeout(()=>{Gt()},500)),(ve=t.state)!=null&&ve.refreshTables&&(console.log(" Navigation state refresh flag detected, refreshing tables..."),setTimeout(()=>{Gt()},200)),(be=t.state)!=null&&be.refreshKOTs&&(console.log(" Navigation state KOT refresh flag detected, refreshing KOTs..."),setTimeout(()=>{console.log(" Executing KOT refresh after bill completion..."),qe()},2e3),setTimeout(()=>{console.log(" Secondary KOT refresh (backup)..."),qe()},5e3))},[r,e,s,t.state]),N.useEffect(()=>{!M&&F.length>0&&mt.current&&setTimeout(()=>{var Z;(Z=mt.current)==null||Z.focus()},100)},[M,F]),N.useEffect(()=>{if(M&&gt.current){const Z=()=>{if(gt.current)return gt.current.focus(),!0;const ve=document.querySelector('input[placeholder*="Search by name"]');return ve?(ve.focus(),!0):!1};setTimeout(()=>Z(),100),setTimeout(()=>Z(),300)}},[M]),N.useEffect(()=>{if(s&&!s.toLowerCase().includes("restaurant")){const be=()=>{if(gt.current)return gt.current.focus(),!0;const Ee=document.querySelector('input[placeholder*="Search by name"]');return Ee?(Ee.focus(),!0):!1};setTimeout(()=>be(),100),setTimeout(()=>be(),300),setTimeout(()=>be(),500),setTimeout(()=>be(),800)}},[s,j.length]),N.useEffect(()=>{!y&&s&&!s.toLowerCase().includes("restaurant")&&gt.current&&setTimeout(()=>{var be;(be=gt.current)==null||be.focus()},200)},[y,s]);const Jt=async()=>{try{C(!0),O(null);const[Z,ve]=await Promise.all([Qt.getCategories(r.selectedBranch._id),Qt.request("/menu")]),be=["All"];if(Z){const Be=Z.categories||Z;Array.isArray(Be)&&Be.length>0&&Be.forEach(lt=>{const nt=lt.name||lt.categoryName||lt.title;nt&&!be.includes(nt)&&be.push(nt)})}let Ee=[];if(ve){const Be=ve.menu||ve.menuItems||ve.data||ve;Array.isArray(Be)&&(Ee=Be.map(lt=>{let nt=0;if(lt.price!==void 0&&lt.price!==null)nt=lt.price;else if(lt.prices&&typeof lt.prices=="object"){const Mt=Object.values(lt.prices);Mt.length>0&&(nt=Mt[0])}nt=Number(nt)||0;let It=E3(lt.image);return{...lt,_id:lt._id||lt.id,name:lt.name||lt.itemName||lt.title,price:nt,description:lt.description||lt.desc||"",image:It,categoryId:lt.categoryId||lt.category||null,menuItemNumber:lt.menuItemNumber||lt.number||null}}))}m(be),b(Ee),v(Ee)}catch(Z){console.error("Error loading menu data:",Z),Z.message.includes("Rate limit")?O("Too many requests. Please wait a moment and refresh the page."):O("Failed to load menu data. Please try again.")}finally{C(!1)}},Gt=async()=>{try{U(!0),console.log(" Loading tables for branch:",r.selectedBranch._id);const Z=await Qt.request(`/table?branchId=${r.selectedBranch._id}`);console.log(" Tables API response:",Z);let ve=[];if(Z){let be=[];Z.success&&Array.isArray(Z.data)?be=Z.data:Array.isArray(Z.tables)?be=Z.tables:Array.isArray(Z)&&(be=Z),console.log(" Processed tables data:",be),Array.isArray(be)&&(ve=be.map(Ee=>{var Be,lt,nt,It;return{_id:Ee._id||Ee.id,number:Ee.number||Ee.tableNumber,tableNumber:Ee.number||Ee.tableNumber,capacity:Ee.capacity||4,status:Ee.status||"available",categoryId:((Be=Ee.categoryId)==null?void 0:Be._id)||Ee.categoryId||null,categoryName:((lt=Ee.categoryId)==null?void 0:lt.name)||Ee.categoryName||"All Categories",branchId:((nt=Ee.branchId)==null?void 0:nt._id)||Ee.branchId,branchName:((It=Ee.branchId)==null?void 0:It.name)||r.selectedBranch.name,image:Ee.image||null}}))}if(s&&s!=="All"){const be=s.toLowerCase();be.includes("restaurant")&&(ve=ve.filter(Ee=>{const Be=(Ee.categoryName||"").toLowerCase();return Be==="all categories"||Be.includes(be)||Be===""||!Ee.categoryId}))}console.log(" Final table list:",ve),B(ve)}catch(Z){console.error("Error loading tables:",Z),O("Failed to load tables. Please try again."),B([])}finally{U(!1)}},Fr=Z=>{if(console.log(" Table selected:",Z),console.log(" Table status:",Z.status),console.log(" Setting selectedTable state..."),(Z.status||"").toLowerCase()!=="available"){console.log(" Table is not available, automatically updating status..."),console.log(" Updating table status..."),Zr(Z._id,"available",!1).then(()=>Zr(Z._id,"reserved",!1)).then(()=>{const be={...Z,status:"reserved"};console.log(" Setting selectedTable to:",be),L(be),ir()}).catch(be=>{console.error(" Failed to update table status:",be)});return}console.log(" Table is available, marking as reserved and selecting..."),Zr(Z._id,"reserved",!1).then(()=>{const be={...Z,status:"reserved"};console.log(" Setting selectedTable to:",be),L(be),ir()}).catch(be=>{console.error(" Failed to update table status:",be)})},ir=()=>{const Z=()=>{if(gt.current)return gt.current.focus(),!0;const ve=document.querySelector('input[placeholder*="Search by name"]');return ve?(ve.focus(),!0):!1};setTimeout(()=>Z(),50),setTimeout(()=>Z(),200),setTimeout(()=>Z(),500)},Zr=async(Z,ve,be=!0)=>{try{return console.log(` Updating table ${Z} status to ${ve}...`),await Qt.request(`/table/${Z}`,{method:"PUT",body:JSON.stringify({status:ve}),headers:{"Content-Type":"application/json"}}),console.log(" Table status updated successfully"),B(Ee=>Ee.map(Be=>Be._id===Z?{...Be,status:ve}:Be)),M&&M._id===Z&&L(Ee=>({...Ee,status:ve})),be&&console.log(`Table status updated to ${ve}`),!0}catch(Ee){throw console.error(" Error updating table status:",Ee),be&&console.log("Failed to update table status. Please try again."),Ee}},ae=()=>{const Z=ot.trim();if(!Z)return;console.log(" Looking for table:",Z),console.log(" Available tables:",F.map(be=>({id:be._id,number:be.number,tableNumber:be.tableNumber})));const ve=F.find(be=>String(be.number).toLowerCase()===Z.toLowerCase()||String(be.tableNumber).toLowerCase()===Z.toLowerCase());console.log(" Found table:",ve),ve?de(ve).then(be=>{be?(console.log(" Found existing KOT for table:",be),L(ve),Y(be.id),X(be.kotNumber),jt(""),setTimeout(()=>{gt.current&&gt.current.focus()},100),console.log(` Ready to add items to existing KOT ${be.kotNumber} for Table ${Z}`)):(console.log(" No existing KOT, creating new order for table"),Fr(ve),jt(""))}):console.log(` Table ${Z} not found in this branch. Available tables: ${F.map(be=>be.number||be.tableNumber).join(", ")}`)},xe=async Z=>{try{console.log(` Debugging KOTs for table ${Z}...`);const ve=await Qt.request("/counter-order/orders?includeComplimentary=false");let be=[];ve&&ve.success&&Array.isArray(ve.orders)||ve&&Array.isArray(ve.orders)?be=ve.orders:ve&&Array.isArray(ve.data)?be=ve.data:Array.isArray(ve)&&(be=ve);const Ee=be.filter(Be=>String(Be.tableNumber).toLowerCase()===String(Z).toLowerCase());return console.log(` Found ${Ee.length} KOTs for table ${Z}:`),Ee.forEach((Be,lt)=>{console.log(` KOT ${lt+1}:`,{id:Be.id||Be._id,kotNumber:Be.kotNumber,paymentStatus:Be.paymentStatus,items:Be.items,customerName:Be.customerName,createdAt:Be.createdAt})}),Ee}catch(ve){return console.error(" Error debugging table KOTs:",ve),[]}};N.useEffect(()=>{typeof window<"u"&&(window.debugTableKOTs=xe,console.log(' Debug function added: window.debugTableKOTs("B1")'))},[]),N.useEffect(()=>{typeof window<"u"&&(window.refreshTables=()=>{console.log(" Global table refresh triggered"),Gt()},window.debugTableStatus=Z=>{const ve=F.find(be=>be.number===Z||be.tableNumber===Z);ve?console.log(" Table Status Debug:",{number:ve.number||ve.tableNumber,status:ve.status,id:ve._id||ve.id,categoryName:ve.categoryName}):console.log(` Table ${Z} not found`)},window.debugAllOrders=async()=>{try{console.log(" DEBUG: Fetching all orders from database...");const Z=await Qt.request("/counter-order/orders?includeComplimentary=false");let ve=[];Z&&Z.success&&Array.isArray(Z.orders)||Z&&Array.isArray(Z.orders)?ve=Z.orders:Z&&Array.isArray(Z.data)?ve=Z.data:Array.isArray(Z)&&(ve=Z),console.log(" TOTAL ORDERS IN DATABASE:",ve.length);const be=["061","062","063","064","065","066","067","068"],Ee=ve.filter(nt=>be.includes(nt.invoiceNumber)||be.includes(nt.billNumber));console.log(" ORDERS WITH BILL NUMBERS 061-068:",Ee.length),Ee.forEach((nt,It)=>{console.log(`Order ${It+1}:`,{id:nt.id||nt._id,invoiceNumber:nt.invoiceNumber,billNumber:nt.billNumber,categoryName:nt.categoryName,customerName:nt.customerName,status:nt.status,paymentStatus:nt.paymentStatus,createdAt:nt.createdAt,items:(nt.items||[]).map(Mt=>Mt.name)})});const Be=new Date,lt=ve.filter(nt=>new Date(nt.createdAt||nt.orderTime||nt.date).toDateString()===Be.toDateString());console.log(" ORDERS FROM TODAY:",lt.length),console.log(" TODAY ORDERS SAMPLE:",lt.slice(0,10).map(nt=>({id:nt.id||nt._id,invoiceNumber:nt.invoiceNumber,categoryName:nt.categoryName,status:nt.status,paymentStatus:nt.paymentStatus})))}catch(Z){console.error(" Error fetching orders:",Z)}},console.log(' Global functions added: window.refreshTables(), window.debugTableStatus("A1"), window.debugAllOrders()'))},[F,Gt]);const de=async Z=>{var ve;try{const be=await Qt.request("/counter-order/orders?includeComplimentary=false");let Ee=[];be&&be.success&&Array.isArray(be.orders)||be&&Array.isArray(be.orders)?Ee=be.orders:be&&Array.isArray(be.data)?Ee=be.data:Array.isArray(be)&&(Ee=be);const Be=Ee.find(lt=>lt.paymentStatus==="pending"&&(String(lt.tableNumber).toLowerCase()===String(Z.number).toLowerCase()||String(lt.tableNumber).toLowerCase()===String(Z.tableNumber).toLowerCase()));return Be?(console.log(" Found existing KOT for table:",{kotNumber:Be.kotNumber,tableNumber:Be.tableNumber,items:Be.items,customerName:Be.customerName}),{id:Be.id||Be._id,kotNumber:Be.kotNumber||Be.orderId||`KOT-${(ve=Be.id||Be._id)==null?void 0:ve.slice(-6)}`,tableNumber:Be.tableNumber,items:Be.items||[]}):null}catch(be){return console.error(" Error checking existing KOT:",be),null}},he=()=>{if(!a.trim()||a==="000"||a===""){if(u.length>0)if(s&&s.toLowerCase().includes("restaurant")){const Ee=document.querySelectorAll("button"),Be=Array.from(Ee).find(lt=>lt.textContent.includes("Save KOT"));Be&&Be.click()}else Ud();return}const Z=a.trim();if(x.length===1){const be=x[0];pt(be),_t("1"),Pe(!0),i("000");return}if(/^\d+$/.test(Z)){const be=j.find(Ee=>String(Ee.menuItemNumber)===Z||String(Ee.number)===Z);be?(pt(be),_t("1"),Pe(!0),i("000")):alert(`No menu item found with number: ${Z}`)}else x.length===0?alert("No items found for your search"):x.length>1&&console.log(`${x.length} items found - refine your search or select from the list`)},je=()=>{const Z=parseInt(Nt);if(isNaN(Z)||Z<1){alert("Please enter a valid quantity");return}const ve=u.find(be=>be._id===it._id);f(ve?u.map(be=>be._id===it._id?{...be,quantity:be.quantity+Z}:be):[...u,{...it,quantity:Z}]),Pe(!1),pt(null),_t("1"),i("000"),setTimeout(()=>{if(gt.current)gt.current.focus();else{const be=document.querySelector('input[placeholder*="Search by name"]');be&&be.focus()}},100)},we=Z=>{if(console.log(" Starting to edit KOT:",Z),!Z||Z.paymentStatus!=="pending"){console.log(" Cannot edit: KOT not found or not pending"),alert("Cannot edit this KOT. Only pending KOTs can be edited.");return}Ae(Z),X(Z.kotNumber);const ve=(Z.items||[]).map(be=>({...be,originalQuantity:be.quantity,newQuantity:be.quantity,isRemoved:!1,isChanged:!1}));te(ve),console.log(" KOT editing started:",{kotNumber:Z.kotNumber,tableNumber:Z.tableNumber,itemCount:ve.length})},ze=async(Z=!1)=>{if(!ne){console.log(" No KOT being edited");return}try{console.log(" Saving KOT modifications:",{kotNumber:ne.kotNumber,shouldPrint:Z,modifiedItems:Ve.length});const ve=Ve.filter(lt=>lt.isRemoved||lt.newQuantity!==lt.originalQuantity);if(ve.length===0){console.log(" No changes to save"),alert("No changes to save.");return}const be=Ve.filter(lt=>!lt.isRemoved&&lt.newQuantity>0).map(lt=>({menuItemId:lt.menuItemId,name:lt.name,quantity:lt.newQuantity,price:lt.price})),Ee=be.reduce((lt,nt)=>lt+nt.price*nt.quantity,0),Be={items:be,subtotal:Ee,totalAmount:Ee,grandTotal:Ee};if(console.log(" Updating KOT in database:",Be),await Qt.request(`/counter-order/orders/${ne.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)}),Z){console.log(" Printing KOT changes to kitchen");try{await ji.printKOTChanges({kotNumber:ne.kotNumber,tableNumber:ne.tableNumber,items:ve}),console.log(" KOT changes printed successfully")}catch(lt){console.error(" Failed to print KOT changes:",lt)}}console.log(" KOT modifications saved successfully"),alert(`KOT ${ne.kotNumber} updated successfully!${Z?" Changes sent to kitchen.":""}`),Ae(null),te([]),X(null),qe()}catch(ve){console.error(" Failed to save KOT modifications:",ve),alert(`Failed to save changes: ${ve.message}`)}},et=(Z,ve)=>{console.log(" Updating item quantity:",{itemIndex:Z,newQuantity:ve}),te(be=>{const Ee=[...be],Be=Ee[Z];return Be?(Ee[Z]={...Be,newQuantity:Math.max(0,ve),isRemoved:ve<=0,isChanged:ve!==Be.originalQuantity},console.log(" Item quantity updated:",{name:Be.name,originalQuantity:Be.originalQuantity,newQuantity:Ee[Z].newQuantity,isRemoved:Ee[Z].isRemoved,isChanged:Ee[Z].isChanged}),Ee):(console.log(" Item not found at index:",Z),be)})},Me=()=>{if(console.log(" Cancelling KOT edit"),ne){if(Ve.some(ve=>ve.isRemoved||ve.newQuantity!==ve.originalQuantity)&&!confirm("You have unsaved changes. Are you sure you want to cancel editing?"))return;console.log(" KOT edit cancelled")}Ae(null),te([]),X(null)},We=Z=>{console.log(" Restoring item at index:",Z),te(ve=>{const be=[...ve],Ee=be[Z];return Ee?(be[Z]={...Ee,newQuantity:Ee.originalQuantity,isRemoved:!1,isChanged:!1},console.log(" Item restored:",{name:Ee.name,restoredQuantity:Ee.originalQuantity}),be):(console.log(" Item not found at index:",Z),ve)})},qe=async(Z=0,ve=null)=>{ge(!0);try{const be=ve?new Date(ve):new Date,Ee=new Date(be.getFullYear(),be.getMonth(),be.getDate(),0,0,0,0),Be=new Date(be.getFullYear(),be.getMonth(),be.getDate(),23,59,59,999);if(!be||!Ee||!Be)throw new Error("Date variables not properly initialized");console.log(" Filtering orders for date:",be.toDateString()),console.log(" Date variables check:",{filterDate:be,startOfDay:Ee,endOfDay:Be}),console.log(" SALES REPORT DEBUG - Category info:",{preSelectedCategory:s,isTempleCategory:s&&s.toLowerCase().includes("temple"),selectedDate:ve,isKOTLoad:!ve});const lt=localStorage.getItem("counterUserData"),nt=lt?JSON.parse(lt):null;(!nt||!nt._id)&&console.warn(" Counter user not found in localStorage, showing all KOTs");const It=await Qt.request("/counter-order/orders?includeComplimentary=false");let Mt=[];It&&It.success&&Array.isArray(It.orders)||It&&Array.isArray(It.orders)?Mt=It.orders:It&&Array.isArray(It.data)?Mt=It.data:Array.isArray(It)?Mt=It:Mt=[],console.log(" SALES REPORT DEBUG - Orders loaded:",{totalOrdersFromAPI:Mt.length,isTempleCategory:s&&s.toLowerCase().includes("temple")}),console.log(" FIRST 5 ORDERS FROM DATABASE:",Mt.slice(0,5).map(G=>({id:G.id||G._id,invoiceNumber:G.invoiceNumber,billNumber:G.billNumber,categoryName:G.categoryName,customerName:G.customerName,status:G.status,paymentStatus:G.paymentStatus,createdAt:G.createdAt})));const Yr={};console.log(" KOT Loading Debug - Total orders from API:",Mt.length),console.log(" KOT Loading Debug - First 3 orders:",Mt.slice(0,3).map(G=>({id:G.id||G._id,kotNumber:G.kotNumber,tableNumber:G.tableNumber,paymentStatus:G.paymentStatus,status:G.status,categoryName:G.categoryName})));const er=Mt.filter(G=>{const Ot=G.paymentStatus==="pending"&&G.tableNumber&&G.tableId;return console.log(" KOT Filter Check:",{orderId:G.id||G._id,kotNumber:G.kotNumber,tableNumber:G.tableNumber,paymentStatus:G.paymentStatus,hasTableId:!!G.tableId,isKOT:Ot}),Ot});if(console.log(" KOT Loading Debug - Filtered KOT orders:",er.length),console.log(" KOT Loading Debug - Filtered KOTs:",er.map(G=>({id:G.id||G._id,kotNumber:G.kotNumber,tableNumber:G.tableNumber,paymentStatus:G.paymentStatus,items:(G.items||[]).length}))),ve)console.log(" Skipping KOT modal update - loading sales report for date:",ve);else{const G=er.map(Ot=>{var wt;return{id:Ot.id||Ot._id,kotNumber:Ot.kotNumber||`KOT-${(wt=Ot.id||Ot._id)==null?void 0:wt.slice(-6)}`,tableNumber:Ot.tableNumber,tableId:Ot.tableId,customerName:Ot.customerName||"Walk-in Customer",items:Ot.items||[],totalAmount:Ot.totalAmount||Ot.grandTotal||0,createdAt:Ot.createdAt||Ot.kotTime,status:Ot.status,paymentStatus:Ot.paymentStatus}});console.log(" Setting processed KOTs for modal:",G),W(G)}s&&s.toLowerCase().includes("temple")&&(console.log(" CRITICAL DEBUG - ALL ORDERS FROM DATABASE:"),Mt.forEach((G,Ot)=>{console.log(`Database Order ${Ot+1}:`,JSON.stringify({id:G.id||G._id,invoiceNumber:G.invoiceNumber,billNumber:G.billNumber,categoryName:G.categoryName,categoryId:G.categoryId,customerName:G.customerName,status:G.status,paymentStatus:G.paymentStatus,tableNumber:G.tableNumber,tableId:G.tableId,branchId:G.branchId,createdAt:G.createdAt,items:(G.items||[]).map(wt=>({name:wt.name,quantity:wt.quantity,price:wt.price}))}))}),console.log(` Total orders in database: ${Mt.length}`));const Ct=Mt.filter(G=>{var xa,Ha,_a,es;if(console.log(" SALES REPORT FILTERING DEBUG:",{preSelectedCategory:s,customerDataCategory:(xa=r==null?void 0:r.selectedCategory)==null?void 0:xa.name,orderBeingProcessed:{id:G.id||G._id,invoiceNumber:G.invoiceNumber||G.billNumber,categoryName:G.categoryName,customerName:G.customerName,tableNumber:G.tableNumber,tableId:G.tableId}}),s&&s.toLowerCase().includes("temple"))return console.log(" TEMPLE MEALS - ULTRA AGGRESSIVE MODE - Including ALL orders for debugging"),console.log(" Order being processed:",{orderId:G.id||G._id,invoiceNumber:G.invoiceNumber,billNumber:G.billNumber,categoryName:G.categoryName,customerName:G.customerName,status:G.status,paymentStatus:G.paymentStatus,createdAt:G.createdAt}),!0;const Ot=G.paymentStatus==="pending"&&G.tableNumber&&G.tableId;let wt=!0;if(s&&s!=="All"){const hr=s.toLowerCase();if(G.categoryName){const Xt=G.categoryName.toLowerCase();console.log(" Using saved category for filtering:",{orderCategoryName:Xt,selectedCategory:hr,orderId:G.id||G._id,invoiceNumber:G.invoiceNumber||G.billNumber}),hr.includes("temple")||hr.includes("meal")?(wt=(Xt.includes("temple")||Xt==="temple meals"||Xt==="temple meal")&&!Xt.includes("self service")&&!Xt.includes("darshini"),console.log(" Temple Meals Filter:",{orderId:G.id||G._id,orderCategoryName:Xt,selectedCategory:hr,isTempleMatch:Xt.includes("temple"),excludesSelfService:!Xt.includes("self service"),finalDecision:wt?"INCLUDE":"EXCLUDE"})):hr.includes("restaurant")?wt=Xt.includes("restaurant"):(hr.includes("darshini")||hr.includes("self service")||hr.includes("self-service"))&&(wt=(Xt==="self service"||Xt==="self-service"||Xt==="darshini"||Xt.includes("self service")||Xt.includes("self-service")||Xt.includes("darshini"))&&!Xt.includes("temple")&&!Xt.includes("restaurant"),console.log(" Self Service Filter:",{orderId:G.id||G._id,orderCategoryName:Xt,selectedCategory:hr,isSelfServiceMatch:Xt.includes("self service")||Xt.includes("self-service")||Xt.includes("darshini"),excludesTemple:!Xt.includes("temple"),excludesRestaurant:!Xt.includes("restaurant"),finalDecision:wt?"INCLUDE":"EXCLUDE"}))}else{console.log(" No saved category - using fallback detection for order:",G.id||G._id);const Xt=(G.orderId||G.kotNumber||G.id||G._id||"").toLowerCase(),zr=(G.customerName||"").toLowerCase(),vn=!!(G.tableNumber||G.tableId);if(hr.includes("temple")||hr.includes("meal")){const ya=Xt.includes("temple")||zr.includes("temple")||(G.items||[]).some(Xr=>{const ln=(Xr.name||"").toLowerCase();return ln.includes("temple")||ln.includes("prasad")||ln.includes("holige")||ln.includes("kashaya")}),mr=!vn||Xt.includes("counter")||zr.includes("walk-in");wt=ya&&!mr,console.log(" Temple Meals Fallback:",{orderId:G.id||G._id,hasTempleIndicators:ya,hasSelfServiceIndicators:mr,finalDecision:wt?"INCLUDE":"EXCLUDE"})}else if(hr.includes("restaurant")){const ya=Xt.includes("temple")||zr.includes("temple")||(G.items||[]).some(mr=>{const Xr=(mr.name||"").toLowerCase();return Xr.includes("temple")||Xr.includes("holige")});wt=vn&&!ya}else if(hr.includes("darshini")||hr.includes("self service")||hr.includes("self-service")){const ya=Xt.includes("temple")||zr.includes("temple")||(G.items||[]).some(Xr=>{const ln=(Xr.name||"").toLowerCase();return ln.includes("temple")||ln.includes("holige")}),mr=vn||G.tableNumber||G.tableId||Xt.includes("table")||zr.includes("table")||!Xt.includes("counter")&&!zr.includes("walk-in")&&(G.items||[]).some(Xr=>{const ln=(Xr.name||"").toLowerCase();return ln.includes("meal")||ln.includes("rice")||ln.includes("curry")||ln.includes("dal")});wt=!ya&&!mr&&!G.tableNumber&&!G.tableId,console.log(" Self Service Fallback:",{orderId:G.id||G._id,invoiceNumber:G.invoiceNumber||G.billNumber,hasTable:vn,hasTempleIndicators:ya,hasRestaurantIndicators:mr,hasTableNumber:!!G.tableNumber,hasTableId:!!G.tableId,itemCount:(G.items||[]).length,items:(G.items||[]).map(Xr=>Xr.name),finalDecision:wt?"INCLUDE":"EXCLUDE"})}}}let rr=!0;if(s&&s!=="All"){const hr=s.toLowerCase();hr.includes("restaurant")?rr=(G.status==="completed"||G.paymentStatus==="completed"||G.status==="paid"||G.paymentStatus==="paid"||G.status==="billed"||G.paymentStatus==="billed"||G.orderStatus==="completed"||G.orderStatus==="paid"||G.orderStatus==="billed")&&G.status!=="consolidated"&&G.paymentStatus!=="consolidated":hr.includes("darshini")||hr.includes("self service")||hr.includes("self-service")?(rr=(G.status==="completed"||G.paymentStatus==="completed"||G.status==="paid"||G.paymentStatus==="paid"||G.status==="billed"||G.paymentStatus==="billed"||G.orderStatus==="completed"||G.orderStatus==="paid"||G.orderStatus==="billed"||G.status==="pending"||G.paymentStatus==="pending"||!G.status||!G.paymentStatus||!!(G.invoiceNumber||G.billNumber))&&G.status!=="cancelled"&&G.status!=="failed"&&G.paymentStatus!=="cancelled"&&G.paymentStatus!=="failed",console.log(" Self Service Completion Check:",{orderId:G.id||G._id,invoiceNumber:G.invoiceNumber||G.billNumber,status:G.status,paymentStatus:G.paymentStatus,orderStatus:G.orderStatus,itemCount:(G.items||[]).length,isCompleted:rr,reason:rr?"INCLUDED":"EXCLUDED"})):hr.includes("temple")||hr.includes("meal")?(rr=G.status!=="cancelled"&&G.paymentStatus!=="cancelled"&&G.status!=="failed"&&G.paymentStatus!=="failed",console.log(" Temple Meals Completion Check (Simplified):",JSON.stringify({orderId:G.id||G._id,invoiceNumber:G.invoiceNumber||G.billNumber,status:G.status,paymentStatus:G.paymentStatus,isCompleted:rr,reason:rr?"INCLUDED":"EXCLUDED"}))):rr=(G.status==="completed"||G.paymentStatus==="completed"||G.status==="paid"||G.paymentStatus==="paid"||G.status==="billed"||G.paymentStatus==="billed"||G.orderStatus==="completed"||G.orderStatus==="paid"||G.orderStatus==="billed")&&G.status!=="consolidated"&&G.paymentStatus!=="consolidated"}else rr=(G.status==="completed"||G.paymentStatus==="completed"||G.status==="paid"||G.paymentStatus==="paid"||G.status==="billed"||G.paymentStatus==="billed"||G.orderStatus==="completed"||G.orderStatus==="paid"||G.orderStatus==="billed")&&G.status!=="consolidated"&&G.paymentStatus!=="consolidated";const Er=new Date(G.createdAt||G.orderTime||G.date),kr=Er>=Ee&&Er<=Be,Mn=((Ha=G.branchId)==null?void 0:Ha._id)||G.branchId||((_a=G.branch)==null?void 0:_a.id)||((es=G.branch)==null?void 0:es._id)||G.branch,mn=Mn===r.selectedBranch._id;if(s&&s.toLowerCase().includes("temple")&&console.log(" Date Filtering Debug:",JSON.stringify({orderId:G.id||G._id,invoiceNumber:G.invoiceNumber,orderDate:Er.toISOString(),startOfDay:Ee.toISOString(),endOfDay:Be.toISOString(),isInDateRange:kr,orderBranchId:Mn,selectedBranchId:r.selectedBranch._id,isSameBranch:mn})),console.log(" Branch ID Debug (Simplified):",JSON.stringify({orderId:G.id||G._id,invoiceNumber:G.invoiceNumber,billNumber:G.billNumber,categoryName:G.categoryName,customerName:G.customerName,isInDateRange:kr,isSameBranch:mn,isSameCategory:wt,isCompleted:rr,finalResult:kr&&mn&&wt&&rr})),(G.invoiceNumber==="012"||G.invoiceNumber==="011"||G.billNumber==="012"||G.billNumber==="011")&&console.log(" TEMPLE MEALS ORDER FILTERING RESULT:",{orderId:G.id||G._id,isInDateRange:kr,isSameBranch:mn,isSameCategory:wt,isCompleted:rr,finalResult:kr&&mn&&wt&&rr}),s&&s.toLowerCase().includes("temple")){const hr=(G.categoryName||"").toLowerCase();if(hr.includes("self service")||hr==="self service"||hr.includes("darshini")||hr==="darshini")return console.log(" SAFETY CHECK: Blocking Self Service order from Temple Meals report:",{orderId:G.id||G._id,orderCategoryName:hr,invoiceNumber:G.invoiceNumber,reason:"Self Service order detected in Temple Meals filter"}),!1}return kr&&mn&&wt&&rr});console.log(" Filtered orders count:",Ct.length),s&&s.toLowerCase().includes("temple")&&(console.log(" FINAL FILTERED ORDERS FOR TEMPLE MEALS:"),Ct.forEach((G,Ot)=>{console.log(`Final Order ${Ot+1}:`,JSON.stringify({id:G.id||G._id,invoiceNumber:G.invoiceNumber,categoryName:G.categoryName,customerName:G.customerName,status:G.status,paymentStatus:G.paymentStatus,totalAmount:G.totalAmount,createdAt:G.createdAt}))})),s&&s.toLowerCase().includes("self service")&&(console.log(" SELF SERVICE FILTERING ANALYSIS:"),console.log("  Total orders before filtering:",Mt.length),console.log("  Orders after filtering:",Ct.length),Mt.forEach((G,Ot)=>{var rn,xa,Ha;const wt=new Date(G.createdAt||G.orderTime||G.date),rr=wt>=Ee&&wt<=Be,kr=(((rn=G.branchId)==null?void 0:rn._id)||G.branchId||((xa=G.branch)==null?void 0:xa.id)||((Ha=G.branch)==null?void 0:Ha._id)||G.branch)===r.selectedBranch._id;let Mn="NO MATCH";if(G.categoryName){const _a=G.categoryName.toLowerCase();(_a.includes("self service")||_a.includes("darshini"))&&(Mn="SAVED CATEGORY MATCH")}else!G.tableNumber&&!G.tableId&&(Mn="FALLBACK MATCH (no table)");const mn=Ct.some(_a=>(_a.id||_a._id)===(G.id||G._id));console.log(`    Order ${Ot+1} (${G.invoiceNumber||G.billNumber}):`),console.log(`      - Category: ${G.categoryName||"NOT SET"}`),console.log(`      - Date match: ${rr}`),console.log(`      - Branch match: ${kr}`),console.log(`      - Category match: ${Mn}`),console.log(`      - Table: ${G.tableNumber||"None"}`),console.log(`      - Status: ${G.status}/${G.paymentStatus}`),console.log(`      - INCLUDED: ${mn}`)}),console.log(" Self Service orders found:",Ct.map(G=>({id:G.id||G._id,bill:G.invoiceNumber||G.billNumber,category:G.categoryName,customer:G.customerName,amount:G.totalAmount})))),console.log(" TEMPLE MEALS DEBUG - Filtering summary:",{totalOrders:Mt.length,selectedCategory:s,filteredCount:Ct.length,templeMealsOrders:Ct.filter(G=>{const Ot=(G.categoryName||"").toLowerCase(),wt=(G.orderId||G.kotNumber||G.id||G._id||"").toLowerCase(),rr=(G.customerName||"").toLowerCase();return Ot.includes("temple")||wt.includes("temple")||rr.includes("temple")||G.invoiceNumber&&/^0(1[1-9]|20)$/.test(G.invoiceNumber)||/\[0(1[1-9]|20)\]/.test(G.customerName||"")}).length,ordersWithCategoryName:Ct.filter(G=>G.categoryName).length,ordersWithoutCategoryName:Ct.filter(G=>!G.categoryName).length}),s&&s.toLowerCase().includes("temple")&&(console.log(" TEMPLE MEALS ORDERS FOUND:"),Ct.forEach((G,Ot)=>{console.log(`  Temple Order ${Ot+1}:`,{id:G.id||G._id,invoiceNumber:G.invoiceNumber||G.billNumber,categoryName:G.categoryName,customerName:G.customerName,totalAmount:G.totalAmount,status:G.status,paymentStatus:G.paymentStatus,items:(G.items||[]).map(wt=>wt.name)})}),console.log(` Total Temple Meals orders in sales report: ${Ct.length}`),console.log(" ALL ORDERS PROCESSED FOR TEMPLE MEALS (first 10):"),Mt.slice(0,10).forEach((G,Ot)=>{console.log(`  All Order ${Ot+1}:`,{id:G.id||G._id,invoiceNumber:G.invoiceNumber||G.billNumber,categoryName:G.categoryName,customerName:G.customerName,status:G.status,paymentStatus:G.paymentStatus,hasTempleInvoice:G.invoiceNumber&&(/^0(1[1-9]|20)$/.test(G.invoiceNumber)||/^0(6[1-9]|70)$/.test(G.invoiceNumber)),hasTempleCustomer:/\[0(1[1-9]|20)\]/.test(G.customerName||"")||/\[0(6[1-9]|70)\]/.test(G.customerName||""),noTable:!G.tableNumber&&!G.tableId,items:(G.items||[]).map(wt=>wt.name)})})),console.log(" Sample filtered orders with category info:",Ct.slice(0,3).map(G=>({id:G.id||G._id,invoiceNumber:G.invoiceNumber,categoryName:G.categoryName,categoryId:G.categoryId,branchName:G.branchName,customerName:G.customerName,totalAmount:G.totalAmount,status:G.status,paymentStatus:G.paymentStatus,createdAt:G.createdAt}))),console.log(" Filtered orders:",Ct);const tr=[],On={};Ct.forEach(G=>{const Ot=G.invoiceNumber||G.billNumber;Ot?(On[Ot]||(On[Ot]=[]),On[Ot].push(G)):tr.push(G)}),Object.entries(On).forEach(([G,Ot])=>{if(Ot.length===1)tr.push(Ot[0]),console.log(" Single order for bill:",G,"Amount:",Ot[0].totalAmount);else{console.log(" Multiple orders for bill:",G,"Count:",Ot.length);const rr=Ot.sort((Er,kr)=>{const Mn=new Date(Er.createdAt||Er.orderTime||0),mn=new Date(kr.createdAt||kr.orderTime||0),rn=Er.discountAmount&&Er.discountAmount>0||Er.isComprehensiveBill,xa=kr.discountAmount&&kr.discountAmount>0||kr.isComprehensiveBill;return rn&&!xa?-1:!rn&&xa?1:mn-Mn})[0];tr.push(rr),console.log(" Selected order for bill:",G,{selectedAmount:rr.totalAmount,selectedDiscount:rr.discountAmount,selectedTime:rr.createdAt,allAmounts:Ot.map(Er=>({amount:Er.totalAmount,discount:Er.discountAmount,time:Er.createdAt,id:Er.id||Er._id}))})}}),console.log(" After deduplication:",{originalCount:Ct.length,deduplicatedCount:tr.length,billNumbers:Object.keys(On)});const qa=tr;console.log(" Filtering Debug - showing first 5 orders:"),Mt.slice(0,5).forEach((G,Ot)=>{var xa,Ha,_a,es,hr;const wt=new Date(G.createdAt||G.orderTime||G.date),rr=wt>=Ee&&wt<=Be,Er=((xa=G.branchId)==null?void 0:xa._id)||G.branchId||((Ha=G.branch)==null?void 0:Ha.id)||((_a=G.branch)==null?void 0:_a._id)||G.branch,kr=r.selectedBranch._id,Mn=Er===kr;let mn=!0;s&&s!=="All"&&(s.toLowerCase().includes("restaurant")?mn=(G.status==="completed"||G.paymentStatus==="completed"||G.status==="paid"||G.paymentStatus==="paid"||G.status==="billed"||G.paymentStatus==="billed"||G.orderStatus==="completed"||G.orderStatus==="paid"||G.orderStatus==="billed")&&G.status!=="consolidated"&&G.paymentStatus!=="consolidated":mn=!0);let rn=!0;if(s&&s!=="All"){const Xt=s.toLowerCase(),zr=(G.orderId||G.kotNumber||G.id||G._id||"").toLowerCase(),vn=(G.customerName||"").toLowerCase(),ya=(G.branchName||((es=G.branchId)==null?void 0:es.name)||((hr=G.branch)==null?void 0:hr.name)||"").toLowerCase(),mr=(G.items||[]).map(Xr=>(Xr.name||"").toLowerCase()).join(" ");if(Xt.includes("temple")||Xt.includes("meal")){if(G.categoryName){const Xr=G.categoryName.toLowerCase();rn=(Xr.includes("temple")||Xr==="temple meals"||Xr==="temple meal")&&!Xr.includes("self service")&&!Xr.includes("darshini")}else{const Xr=!!(G.tableNumber&&G.tableId),ln=vn.includes("walk-in")||vn.includes("darshini")||mr.includes("darshini");rn=!Xr&&!ln,console.log(" Temple Meals Ultra-Inclusive Test:",JSON.stringify({orderId:G.id||G._id,invoiceNumber:G.invoiceNumber,customerName:G.customerName,isRestaurant:Xr,isSelfService:ln,willInclude:rn}))}console.log(" Temple Meals Filter (Ultra-Inclusive):",JSON.stringify({orderId:G.id||G._id,invoiceNumber:G.invoiceNumber,orderCategoryName:G.categoryName,selectedCategory:Xt,hasSavedCategory:!!G.categoryName,customerName:G.customerName,hasTable:!!(G.tableNumber&&G.tableId),finalDecision:rn?"INCLUDE":"EXCLUDE"}))}else if(Xt.includes("restaurant"))rn=!(zr.includes("temple")||zr.includes("-tm-")||vn.includes("temple")||ya.includes("temple")||mr.includes("temple")||mr.includes("temple")&&mr.includes("meal")||mr.includes("prasad")||mr.includes("pooja")||mr.includes("holige")||mr.includes("kashaya")||mr.includes("badam milk")||/\[0(1[1-9]|20)\]/.test(G.customerName||"")&&(vn.includes("temple")||mr.includes("holige")||mr.includes("kashaya"))||(G.items||[]).some(ln=>{const aa=(ln.name||"").toLowerCase();return aa.includes("temple")||aa.includes("temple")&&aa.includes("meal")||aa.includes("prasad")||aa.includes("pooja")||aa.includes("holige")||aa.includes("kashaya")||aa.includes("badam")}))&&G.tableNumber&&G.tableId;else if(Xt.includes("darshini")||Xt.includes("self service")||Xt.includes("self-service")){const Xr=zr.includes("temple")||zr.includes("-tm-")||vn.includes("temple")||ya.includes("temple")||mr.includes("temple")||mr.includes("temple")&&mr.includes("meal")||mr.includes("prasad")||mr.includes("pooja")||mr.includes("holige")||mr.includes("kashaya")||mr.includes("badam milk")||/\[0(1[1-9]|20)\]/.test(G.customerName||"")&&(vn.includes("temple")||mr.includes("holige")||mr.includes("kashaya"))||(G.items||[]).some(aa=>{const bn=(aa.name||"").toLowerCase();return bn.includes("temple")||bn.includes("temple")&&bn.includes("meal")||bn.includes("prasad")||bn.includes("pooja")||bn.includes("holige")||bn.includes("kashaya")||bn.includes("badam")}),ln=G.tableNumber&&G.tableId||G.tableNumber||G.tableId||zr.includes("-res-")||zr.includes("table")||vn.includes("table")||(G.items||[]).some(aa=>{const bn=(aa.name||"").toLowerCase();return bn.includes("meal")&&!bn.includes("temple")||bn.includes("rice")||bn.includes("curry")||bn.includes("dal")});rn=!Xr&&!ln&&!G.tableNumber&&!G.tableId}}console.log(` Order ${Ot+1}:`,{id:G.id||G._id,orderDate:wt.toISOString(),dateForComparison:wt.toDateString(),selectedDate:be.toDateString(),isInDateRange:rr,orderBranchId:Er,selectedBranchId:kr,isSameBranch:Mn,status:G.status,paymentStatus:G.paymentStatus,orderStatus:G.orderStatus,isCompleted:mn,categoryName:s,isSameCategory:rn,tableNumber:G.tableNumber,tableId:G.tableId,shouldInclude:rr&&Mn&&mn&&rn,items:(G.items||[]).map(Xt=>Xt.name)})});const Wa=qa.length,Qo=qa.reduce((G,Ot)=>G+(Ot.totalAmount||Ot.grandTotal||0),0),g0=qa.reduce((G,Ot)=>G+(Ot.items||[]).reduce((wt,rr)=>wt+(rr.quantity||1),0),0),Ql=qa.reduce((G,Ot)=>G+(Ot.discountAmount||0),0),bs={};qa.forEach(G=>{const wt=`${new Date(G.createdAt||G.orderTime).getHours()}:00`;bs[wt]||(bs[wt]={orders:0,revenue:0}),bs[wt].orders+=1,bs[wt].revenue+=G.totalAmount||G.grandTotal||0});const js={date:be.toISOString().split("T")[0],category:s||"All Categories",branch:r.selectedBranch.name,summary:{totalOrders:Wa,totalRevenue:Qo,totalItems:g0,totalDiscount:Ql,averageOrderValue:Wa>0?Qo/Wa:0},hourlySales:Object.entries(bs).sort((G,Ot)=>parseInt(G[0])-parseInt(Ot[0])).map(([G,Ot])=>({hour:G,...Ot})),orders:qa.sort((G,Ot)=>{const wt=new Date(G.createdAt||G.orderTime||0);return new Date(Ot.createdAt||Ot.orderTime||0)-wt}).map(G=>{console.log(" Order fields available:",{id:G.id||G._id,invoiceNumber:G.invoiceNumber,billNumber:G.billNumber,kotNumber:G.kotNumber,orderId:G.orderId,orderNumber:G.orderNumber,paymentStatus:G.paymentStatus,status:G.status,customerName:G.customerName,tableNumber:G.tableNumber,totalAmount:G.totalAmount,allFields:Object.keys(G)});const Ot=!G.tableNumber&&G.paymentStatus==="completed";Ot&&console.log(" Self Service order detected:",{id:G.id||G._id,invoiceNumber:G.invoiceNumber,billNumber:G.billNumber,hasInvoiceNumber:!!G.invoiceNumber,hasBillNumber:!!G.billNumber,willUseFallback:!G.invoiceNumber&&!G.billNumber});let wt;if(G.invoiceNumber&&!G.invoiceNumber.includes("ObjectId")&&G.invoiceNumber.length<=20)wt=G.invoiceNumber,console.log(" Using invoiceNumber:",wt);else if(G.billNumber&&!G.billNumber.includes("ObjectId")&&G.billNumber.length<=20)wt=G.billNumber,console.log(" Using billNumber:",wt);else if(G.customerName&&G.customerName.includes("[BILL-")&&G.customerName.includes("]")){const rr=G.customerName.match(/\[(BILL-\d+)\]/);rr?(wt=rr[1],console.log(" WORKAROUND SUCCESS: Extracted bill number from customerName:",wt,"from:",G.customerName)):console.log(" WORKAROUND FAILED: Could not extract bill number from:",G.customerName)}else G.kotNumber?(wt=G.kotNumber,console.log(" Using kotNumber:",wt)):(wt=G.orderId||G.orderNumber||G.id||G._id,console.log(" Using fallback:",wt,"Available fields:",{invoiceNumber:G.invoiceNumber,billNumber:G.billNumber,kotNumber:G.kotNumber,orderId:G.orderId,orderNumber:G.orderNumber,id:G.id,_id:G._id,customerName:G.customerName}));return(!wt||wt.includes("ObjectId")||wt.length>20)&&(Ot?(wt=`BILL-${(G.id||G._id||Date.now()).toString().slice(-6).slice(-3)}`,console.log(" Generated BILL number for Self Service:",wt)):(wt=`ORDER-${(G.id||G._id||Date.now()).toString().slice(-6)}`,console.log(" Generated ORDER number for restaurant:",wt))),wt&&wt.startsWith("KOT-")&&G.paymentStatus==="completed"&&(wt=`BILL-${wt.replace("KOT-","")}`,console.log(" Converted KOT to BILL format:",wt)),Ot&&wt&&wt.startsWith("ORDER-")&&(wt=`BILL-${wt.replace("ORDER-","")}`,console.log(" Final conversion: ORDER to BILL for Self Service:",wt)),{id:G.id||G._id,orderNumber:wt,invoiceNumber:G.invoiceNumber||G.billNumber||null,time:new Date(G.createdAt||G.orderTime).toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),customerName:G.customerName||"Walk-in Customer",tableNumber:G.tableNumber||null,items:G.items||[],originalTotalAmount:G.totalAmount||G.grandTotal||0,discountAmount:G.discountAmount||0,totalAmount:(()=>{const rr=G.totalAmount||G.grandTotal||0,Er=G.discountAmount||0,kr=G.subtotal||0;console.log(" Order amount debug for",wt,":",{orderId:G.id||G._id,dbTotalAmount:rr,dbDiscountAmount:Er,dbSubtotal:kr,orderFields:{totalAmount:G.totalAmount,grandTotal:G.grandTotal,discountAmount:G.discountAmount,subtotal:G.subtotal},isBill005:wt==="BILL-005",rawOrderData:wt==="BILL-005"?G:"not BILL-005"});const Mn=rr;return console.log(" Using totalAmount directly (already discounted):",Mn),Mn})(),paymentMethod:G.paymentMethod||"cash"}})};console.log(" Sales report loaded:",js),console.log(" Sample order with amounts:",js.orders[0]),console.log(" All order amounts:",js.orders.map(G=>({orderNumber:G.orderNumber,totalAmount:G.totalAmount,discountAmount:G.discountAmount,originalTotalAmount:G.originalTotalAmount})));const ws=js.orders.filter(G=>G.discountAmount>0);console.log(" Orders with discounts:",ws.length,ws),Oe(js)}catch(be){console.error(" Error loading sales report:",be),alert("Failed to load sales report. Please try again."),Oe(null)}finally{ge(!1),ht(!1)}},ft=async(Z=null)=>{try{ht(!0),console.log(" Loading sales report for date:",Z||"today"),console.log(" SALES REPORT DEBUG - Current category context:",{preSelectedCategory:s,customerDataCategory:r==null?void 0:r.selectedCategory,isTempleCategory:s&&s.toLowerCase().includes("temple")}),await qe(0,Z),setTimeout(async()=>{console.log(" Auto-refreshing sales report to pick up new orders...");try{await qe(0,Z)}catch(ve){console.error(" Error in auto-refresh:",ve)}},2e3)}catch(ve){console.error(" Error loading sales report:",ve),alert("Failed to load sales report. Please try again."),Oe(null)}finally{ht(!1)}},yt=async()=>{var Z;pe(!0);try{console.log(" Loading complimentary bills for today...");const ve=new Date().toISOString().split("T")[0],be=localStorage.getItem("selectedBranch");if(!be)throw new Error("No branch selected");const Be=JSON.parse(be)._id,lt=await Qt.getComplimentaryStats(Be,ve,ve);if(console.log(" Complimentary stats response:",lt),lt&&lt.dailyStats&&lt.dailyStats.length>0){const nt=lt.dailyStats[0];re(nt.bills||[]),console.log(" Loaded complimentary bills:",((Z=nt.bills)==null?void 0:Z.length)||0)}else{const nt=await Qt.request("/counter-order/orders?includeComplimentary=true");let It=[];nt.success&&Array.isArray(nt.orders)||Array.isArray(nt.orders)?It=nt.orders:Array.isArray(nt.data)?It=nt.data:Array.isArray(nt)&&(It=nt);const Yr=It.filter(er=>er.isComplimentary?new Date(er.createdAt).toISOString().split("T")[0]===ve:!1).map(er=>({billId:er.id,orderId:er.id,customerName:er.customerName,amount:er.grandTotal||er.totalAmount,reason:er.complimentaryReason,time:new Date(er.createdAt).toLocaleTimeString(),invoiceNumber:er.invoiceNumber||"N/A"}));re(Yr),console.log(" Loaded complimentary orders directly:",Yr.length)}}catch(ve){console.error(" Error loading complimentary bills:",ve),re([])}finally{pe(!1)}},At=async Z=>{try{console.log(" Starting table shift for KOT:",Z.kotNumber,"from table:",Z.tableNumber),ye(Z);const ve=Z.tableNumber,be=F.filter(Ee=>Ee.status==="available"&&Ee.number!==ve);Xe(be),Le(null),K(!0)}catch(ve){console.error(" Error preparing table shift:",ve),alert("Failed to prepare table shift. Please try again.")}},xt=async()=>{if(!ue||!Ce){alert("Please select a table to shift to.");return}try{console.log(" Executing table shift:",{kotId:ue.id,fromTable:ue.tableNumber,toTable:Ce.number,kotData:ue});const Z={tableId:Ce._id||Ce.id,tableNumber:Ce.number};await Qt.request(`/counter-order/orders/${ue.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});const ve=F.find(Ee=>Ee.number===ue.tableNumber),be=(ve==null?void 0:ve._id)||(ve==null?void 0:ve.id);console.log(" Table IDs:",{oldTableNumber:ue.tableNumber,oldTableId:be,newTableNumber:Ce.number,newTableId:Ce._id||Ce.id}),be?(await Qt.request(`/table/${be}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Old table status updated to available")):console.warn(" Could not find old table ID, skipping old table status update"),await Qt.request(`/table/${Ce._id||Ce.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"occupied"})}),console.log(" New table status updated to occupied"),console.log(" Table shift completed successfully"),K(!1),ye(null),Le(null),await qe(),await Gt(),alert(` Successfully shifted KOT ${ue.kotNumber} from Table ${ue.tableNumber} to Table ${Ce.number}`)}catch(Z){console.error(" Error executing table shift:",Z),alert("Failed to shift table. Please try again.")}};N.useEffect(()=>{Tt()},[a,l,j]),N.useEffect(()=>{if(P){const Z=()=>{if($t.current)return $t.current.focus(),$t.current.select(),console.log("  Auto-focused on KOT search bar via ref"),!0;const ve=document.querySelector("#kot-search-input")||document.querySelector('input[placeholder*="Search by table number"]')||document.querySelector('input[placeholder*="Search by table"]')||document.querySelector(".kot-search-input");return ve?(ve.focus(),ve.select(),console.log("  Auto-focused on KOT search bar via selector"),!0):(console.log("  Search input not found, retrying..."),!1)};requestAnimationFrame(()=>Z()),setTimeout(()=>Z(),10),setTimeout(()=>Z(),50),setTimeout(()=>Z(),100),setTimeout(()=>Z(),200)}},[P]),N.useEffect(()=>{P&&$t.current&&requestAnimationFrame(()=>{$t.current&&($t.current.focus(),$t.current.select(),console.log("  KOT search input focused via ref effect with requestAnimationFrame"))})},[P]),N.useEffect(()=>{const Z=ve=>{if(console.log(" Global key pressed:",ve.key,"showKOTList:",P,"savedKOTs.length:",R.length),ve.altKey&&ve.key.toLowerCase()==="k"){if(ve.preventDefault(),P){console.log(" Alt+K pressed: Closing KOT list..."),I(!1),J(0);const be=()=>{if(gt.current)return gt.current.focus(),gt.current.select(),console.log("  Alt+K: Focused on main search bar after closing KOT list via ref"),!0;{const Ee=document.querySelector('input[placeholder*="Search by name"]');if(Ee)return Ee.focus(),Ee.select(),console.log("  Alt+K: Focused on main search bar via selector after closing KOT list"),!0}return!1};setTimeout(()=>be(),50),setTimeout(()=>be(),150),setTimeout(()=>be(),300)}else{console.log(" Alt+K pressed: Loading saved KOTs..."),qe(),I(!0),J(0),Ge("");const be=()=>{if($t.current)return $t.current.focus(),$t.current.select(),console.log("  Alt+K: Auto-focused on KOT search bar via ref"),!0;const Ee=document.querySelector("#kot-search-input")||document.querySelector('input[placeholder*="Search by table number"]')||document.querySelector('input[placeholder*="Search by table"]')||document.querySelector(".kot-search-input");return Ee?(Ee.focus(),Ee.select(),console.log("  Alt+K: Auto-focused on KOT search bar via selector"),!0):(console.log("  Alt+K: Search input not found, retrying..."),!1)};requestAnimationFrame(()=>be()),setTimeout(()=>be(),10),setTimeout(()=>be(),50),setTimeout(()=>be(),100),setTimeout(()=>be(),200)}return}if(ve.altKey&&ve.key.toLowerCase()==="c"){ve.preventDefault(),z?(console.log(" Alt+C pressed: Closing complimentary list..."),ee(!1)):(console.log(" Alt+C pressed: Loading complimentary bills..."),yt(),ee(!0));return}if(P&&R.length>0){const be=document.activeElement;if(!(be&&be.getAttribute("tabindex")==="0")){if(console.log(" Modal not focused, handling navigation globally..."),be&&(be.tagName==="INPUT"||be.tagName==="TEXTAREA")){console.log(" Ignoring key press - user is typing in input field");return}if(ve.key==="ArrowDown"||ve.key==="ArrowUp"){const Be=document.querySelector('[tabindex="0"]');Be&&(Be.focus(),console.log(" Focused modal for navigation"))}}}};return console.log(" Adding global keyboard event listener, showKOTList:",P),window.addEventListener("keydown",Z),()=>{console.log(" Removing global keyboard event listener"),window.removeEventListener("keydown",Z)}},[P,z,R,se,r,e]),N.useEffect(()=>{const Z=()=>{localStorage.getItem("refreshTablesAfterBill")==="true"&&(console.log(" Window focused: Refreshing tables after bill print..."),localStorage.removeItem("refreshTablesAfterBill"),Gt())};return window.addEventListener("focus",Z),()=>{window.removeEventListener("focus",Z)}},[]),N.useEffect(()=>{P&&(console.log(" KOT list opened, skipping modal focus to prioritize search input..."),setTimeout(()=>{R.length>0&&me(0)},100))},[P,R.length]);const Tt=()=>{let Z=[...j];if(s&&s!=="All"?(Z=Z.filter(ve=>{var lt,nt,It,Mt;const Ee=(((lt=ve.categoryId)==null?void 0:lt.name)||((nt=ve.categoryId)==null?void 0:nt.categoryName)||((It=ve.category)==null?void 0:It.name)||((Mt=ve.category)==null?void 0:Mt.categoryName)||"").toLowerCase(),Be=s.toLowerCase();return Ee===Be||Ee.includes(Be)||Be.includes(Ee)}),Z.length===0&&(Z=[...j])):l!=="All"&&(Z=Z.filter(ve=>{var lt,nt,It,Mt;const Ee=(((lt=ve.categoryId)==null?void 0:lt.name)||((nt=ve.categoryId)==null?void 0:nt.categoryName)||((It=ve.category)==null?void 0:It.name)||((Mt=ve.category)==null?void 0:Mt.categoryName)||"").toLowerCase(),Be=l.toLowerCase();return Ee===Be||Ee.includes(Be)||Be.includes(Ee)})),a.trim()&&a!=="000"&&a!==""){const ve=a.toLowerCase().trim();Z=Z.filter(be=>{const Ee=(be.name||"").toLowerCase(),Be=(be.description||"").toLowerCase(),lt=Ee.includes(ve)||Be.includes(ve),nt=be.menuItemNumber||be.number,It=nt&&String(nt)===ve;return lt||It})}v(Z)},Vt=Z=>{const ve=/^\d+$/.test(Z);if(Z==="")return"";if(ve){const be=Z.replace(/^0+/,"")||"0";return be.length>=3?be:be.padStart(3,"0")}else return Z},Cr=Z=>{const ve=Vt(Z);i(ve)},Ar=Z=>{Z.key==="Enter"?he():Z.key==="Backspace"&&a==="000"&&(Z.preventDefault(),i(""))},Lr=()=>{a===""&&i("000")},ki=Z=>{pt(Z),_t("1"),Pe(!0)},Zi=(Z,ve)=>{D(be=>({...be,[Z]:ve}))},Ea=(Z,ve)=>{ma(Z,ve),D(be=>{const Ee={...be};return delete Ee[Z],Ee})},ma=(Z,ve)=>{let be=parseInt(ve);(isNaN(be)||be<0)&&(be=0);const Ee=Math.max(0,Math.min(10,be));if(f(Be=>{const lt=Be.findIndex(nt=>nt._id===Z);if(Ee===0){if(lt>=0){const nt=[...Be];return nt.splice(lt,1),nt}return Be}else if(lt>=0){const nt=[...Be];return nt[lt]={...nt[lt],quantity:Ee},nt}else{const nt=j.find(It=>It._id===Z);return nt?[...Be,{...nt,quantity:Ee}]:Be}}),be>10){const Be=j.find(lt=>lt._id===Z);T(`Maximum quantity (10) reached for ${(Be==null?void 0:Be.name)||"this item"}`),setTimeout(()=>T(null),3e3)}},vs=Z=>{const ve=u.find(be=>be._id===Z);return ve?ve.quantity:0},ga=()=>u.reduce((Z,ve)=>Z+(ve.price||0)*ve.quantity,0),Ud=async()=>{var Z;try{if(console.log(" Generate Bill clicked - starting process..."),u.length===0){alert("Please add items to the cart first");return}let ve;try{console.log(" About to generate new invoice number for Self Service bill...");const Ee="global-bill-counter",Be=parseInt(localStorage.getItem(Ee)||"0");console.log(" Current counter value:",Be),ve=await A3(r.selectedBranch._id,((Z=r.selectedCategory)==null?void 0:Z.name)||"Self Service"),console.log(" Generated new unified bill/invoice number for bill:",ve);const lt=parseInt(localStorage.getItem(Ee)||"0");console.log(" New counter value:",lt)}catch(Ee){console.error(" Failed to generate new invoice number:",Ee);const Be=new Date,lt=String(Be.getDate()).padStart(2,"0"),nt=String(Be.getMonth()+1).padStart(2,"0"),It=String(Be.getFullYear()).slice(-2),Yr=`bill-counter-${`${lt}-${nt}-${It}`}`;let er=parseInt(localStorage.getItem(Yr)||"0");er++,localStorage.setItem(Yr,er.toString()),ve=String(er).padStart(2,"0"),console.log(" Fallback invoice number:",ve)}console.log(" Navigating to bill generation with invoice number:",ve),console.log(" CRITICAL DEBUG - Navigation state:",{customerData:r,selectedCategory:r==null?void 0:r.selectedCategory,preSelectedCategory:s,selectedTable:M,cartItems:u.length});let be=r==null?void 0:r.selectedCategory;(!be||!be.name)&&(s?(be={name:s,_id:null},console.log(" Using preSelectedCategory for bill generation:",be)):!M||!M.tableNumber&&!M.number?(be={name:"Self Service",_id:null},console.log(" Auto-detected Self Service category (no table):",be)):(be={name:"Restaurant",_id:null},console.log(" Auto-detected Restaurant category (has table):",be))),console.log(" Final category for bill generation:",be),e("/counter/bill-generation",{state:{...r,selectedCategory:be,selectedTable:M,cartItems:u,totalAmount:ga(),invoiceNumber:ve,billNumber:ve}})}catch(ve){console.error(" Error in handleGenerateBill:",ve),alert(`Error generating bill: ${ve.message}
Please try again.`)}},Oa=()=>{e("/counter/category-selection",{state:r})};return r?y?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-loading",children:[n.jsx("div",{className:"counter-spinner"}),n.jsx("p",{children:"Loading menu..."})]})})}):E?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("h3",{children:"Error"}),n.jsx("p",{children:E}),n.jsx("button",{className:"counter-button",onClick:Jt,children:"Retry"})]})})}):n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",style:{paddingBottom:u.length>0?"100px":"20px"},children:[n.jsxs("div",{className:"counter-header",style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"counter-title",style:{fontSize:"1.5rem",margin:0},children:[r.customerName,"'s Order"]}),n.jsxs("p",{className:"counter-subtitle",style:{margin:"4px 0 0 0"},children:[r.selectedBranch.name,"  ",r.invoiceNumber,"  ",r.date,"  ",r.time]})]}),n.jsx("button",{onClick:()=>{$e(!0),ft(Pt)},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"10px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseOver:Z=>Z.target.style.background="#2563eb",onMouseOut:Z=>Z.target.style.background="#3b82f6",title:"View today's sales report and history",children:" Sales Report"})]}),S&&n.jsxs("div",{style:{marginBottom:"16px",padding:"12px 16px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{children:""}),S]}),n.jsx("div",{style:{marginBottom:"20px"},children:n.jsx("input",{ref:gt,type:"text",className:"counter-input",placeholder:" Search item number (e.g., 100) or name, then press Enter...",value:a,onChange:Z=>Cr(Z.target.value),onKeyDown:Ar,onFocus:Lr})}),s&&n.jsx("div",{style:{marginBottom:"20px",padding:"12px 16px",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"1.1rem"},children:""}),n.jsxs("span",{style:{fontWeight:"600",color:"#0369a1"},children:["Showing: ",l," Menu",M&&n.jsxs("span",{style:{marginLeft:"8px",color:"#f59e0b"},children:[" Table ",M.tableNumber||M.number]})]})]})}),s&&s.toLowerCase().includes("restaurant")&&n.jsxs("div",{style:{marginBottom:"20px",padding:"16px",backgroundColor:M?"#f0fdf4":"#fef3c7",border:`2px solid ${M?"#10b981":"#f59e0b"}`,borderRadius:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"1.2rem"},children:""}),n.jsx("span",{style:{fontWeight:"600",color:M?"#065f46":"#92400e"},children:M?ce?`Table ${M.tableNumber||M.number} - Adding to KOT ${ce}`:`Table ${M.tableNumber||M.number} Selected (New KOT)`:"Enter Table Number (Keyboard Only)"})]}),M&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"0.875rem",color:"#065f46",fontWeight:"500"},children:"Status:"}),n.jsxs("select",{value:M.status,onChange:Z=>Zr(M._id,Z.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"2px solid #10b981",backgroundColor:"white",color:"#065f46",fontWeight:"600",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:[n.jsx("option",{value:"available",children:"Available"}),n.jsx("option",{value:"reserved",children:"Reserved"})]}),n.jsx("button",{onClick:()=>{L(null),jt("")},style:{padding:"6px 12px",borderRadius:"6px",border:"2px solid #ef4444",backgroundColor:"white",color:"#dc2626",fontWeight:"600",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:"Change Table"})]})]}),!M&&n.jsx(n.Fragment,{children:A?n.jsx("div",{style:{textAlign:"center",padding:"20px"},children:n.jsx("div",{style:{fontSize:"1rem",color:"#92400e"},children:"Loading tables..."})}):F.length===0?n.jsx("div",{style:{textAlign:"center",padding:"20px"},children:n.jsx("div",{style:{fontSize:"0.875rem",color:"#dc2626"},children:"No available tables found. Please contact staff."})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"16px",fontSize:"1rem",color:"#1f2937",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{fontSize:"1.25rem"},children:""}),"Keyboard Workflow: Enter Table Number"]}),n.jsx("div",{style:{marginBottom:"16px"},children:n.jsx("input",{ref:mt,type:"text",value:ot,onChange:Z=>jt(Z.target.value),onKeyDown:Z=>{Z.key==="Enter"&&(Z.preventDefault(),ae())},placeholder:"Type table number (e.g., 4) and press Enter...",autoFocus:!0,style:{width:"100%",padding:"16px",fontSize:"1.5rem",border:"3px solid #f59e0b",borderRadius:"8px",textAlign:"center",fontWeight:"700",color:"#92400e",backgroundColor:"#fffbeb",outline:"none"}})}),n.jsxs("details",{style:{marginTop:"12px"},children:[n.jsx("summary",{style:{cursor:"pointer",fontSize:"0.875rem",color:"#6b7280",textAlign:"center",listStyle:"none",padding:"8px"},children:"Or click to select table"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",marginTop:"8px"},children:F.map(Z=>{const ve=Z.status==="available"||Z.status==="Available";return n.jsxs("button",{onClick:()=>Fr(Z),style:{background:ve?"white":"#fee2e2",border:`2px solid ${ve?"#10b981":"#ef4444"}`,borderRadius:"8px",padding:"16px 20px",minWidth:"80px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem",fontWeight:"600",color:ve?"#065f46":"#991b1b",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",outline:"none",position:"relative"},onMouseEnter:be=>{be.target.style.transform="translateY(-2px)",be.target.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:be=>{be.target.style.transform="translateY(0)",be.target.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.05)"},children:[n.jsx("div",{children:Z.number}),!ve&&n.jsx("div",{style:{fontSize:"0.65rem",marginTop:"4px",color:"#dc2626",fontWeight:"500"},children:Z.status.toUpperCase()})]},Z._id)})})]})]})})]}),!s&&n.jsx("div",{style:{marginBottom:"20px"},children:n.jsx("div",{className:"counter-category-scroll",children:p.map(Z=>n.jsx("button",{className:`counter-button ${l===Z?"":"counter-button-secondary"}`,onClick:()=>d(Z),style:{minWidth:"auto",padding:"8px 16px",fontSize:"0.875rem",whiteSpace:"nowrap"},children:Z},Z))})}),x.length===0?n.jsx("div",{className:"counter-error",children:n.jsx("p",{children:a?"No items found for your search":"No menu items available"})}):n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"12px",margin:"16px 0",maxHeight:"50vh",overflowY:"auto",paddingRight:"8px",width:"100%"},children:x.map(Z=>{const ve=vs(Z._id);return n.jsxs("div",{id:`counter-item-${Z._id}`,style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"12px",padding:"14px",cursor:"pointer",transition:"all 0.3s ease",minHeight:"110px",maxHeight:"130px",display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100%"},children:[n.jsxs("div",{style:{display:"flex",gap:"12px",height:"65px"},children:[n.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[n.jsxs("h3",{style:{margin:"0 0 3px 0",fontSize:"0.9rem",lineHeight:"1.2",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[Z.menuItemNumber&&n.jsx("span",{style:{color:"#f59e0b",marginRight:"6px"},children:Z.menuItemNumber}),Z.name]}),n.jsxs("p",{style:{margin:"0 0 3px 0",color:"#718096",fontSize:"0.8rem",fontWeight:"600"},children:["",Z.price.toFixed(2)]}),Z.description&&n.jsx("p",{style:{margin:"0",color:"#4a5568",fontSize:"0.7rem",lineHeight:"1.2",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Z.description})]}),n.jsx("div",{style:{width:"55px",height:"55px",flexShrink:0},children:n.jsx("img",{src:E3(Z.image)||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='55' height='55'%3E%3Crect fill='%23f3f4f6' width='55' height='55'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='9' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",alt:Z.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",backgroundColor:"#f3f4f6"},onError:be=>{const Ee=uhe(Z.image);Ee&&be.target.src!==Ee?be.target.src=Ee:(be.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='55' height='55'%3E%3Crect fill='%23f3f4f6' width='55' height='55'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='9' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",be.target.onerror=null)}})})]}),n.jsx("div",{style:{marginTop:"8px"},children:ve>0?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:()=>ma(Z._id,ve-1),style:{width:"26px",height:"26px",padding:"0",fontSize:"0.95rem",minHeight:"auto",border:"1px solid #667eea",borderRadius:"6px"},children:"-"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("input",{type:"number",min:"0",max:"10",value:k[Z._id]!==void 0?k[Z._id]:ve,onChange:be=>Zi(Z._id,be.target.value),onKeyDown:be=>{be.key==="Enter"&&be.target.blur()},style:{width:"40px",height:"26px",textAlign:"center",border:"1px solid #e2e8f0",borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600",padding:"0 4px",outline:"none",transition:"border-color 0.2s ease"},onFocus:be=>{be.target.select(),be.target.style.borderColor="#667eea"},onBlur:be=>{be.target.style.borderColor="#e2e8f0",Ea(Z._id,be.target.value)}}),ve>=10&&n.jsx("span",{style:{fontSize:"0.6rem",color:"#e53e3e",fontWeight:"500",marginTop:"1px"},children:"MAX"})]}),n.jsx("button",{className:"counter-button",onClick:()=>ma(Z._id,ve+1),disabled:ve>=10,style:{width:"26px",height:"26px",padding:"0",fontSize:"0.95rem",minHeight:"auto",borderRadius:"6px",opacity:ve>=10?.5:1,cursor:ve>=10?"not-allowed":"pointer"},title:ve>=10?"Maximum quantity reached (10)":"Add one more",children:"+"})]}):n.jsx("button",{className:"counter-button",onClick:()=>ki(Z),style:{width:"100%",padding:"6px 12px",fontSize:"0.75rem",minHeight:"auto",borderRadius:"6px"},children:"ADD"})})]},Z._id)})}),u.length>0&&n.jsxs("div",{className:"counter-cart-summary",style:{position:"fixed",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(10px)",padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:1e3,borderTop:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)"},children:[n.jsxs("div",{style:{color:"white"},children:[n.jsxs("div",{style:{fontSize:"0.875rem",opacity:.9},children:[u.reduce((Z,ve)=>Z+ve.quantity,0)," Items"]}),n.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700"},children:["",ga().toFixed(2)]})]}),s&&s.toLowerCase().includes("restaurant")?n.jsx("button",{className:"counter-button",onClick:async()=>{if(console.log(" Save KOT clicked - selectedTable:",M),console.log(" Save KOT clicked - cartItems:",u),console.log(" Save KOT clicked - customerData:",r),!M){console.log(" Please select a table first!"),alert("Please select a table first!");return}if(!u||u.length===0){console.log(" No items in cart!"),alert("Please add items to cart first!");return}try{const Z=localStorage.getItem("counterUserData"),ve=Z?JSON.parse(Z):null;if(console.log(" Counter user data:",ve),!ve||!ve._id){alert("User session expired. Please login again.");return}console.log(" Checking for existing KOT for table:",M);const be=await de(M);if(console.log(" Existing KOT check result:",be),be){console.log(" RESTAURANT FIX: Found existing KOT for table, appending items..."),console.log(" Existing KOT details:",be);const Ee=await Qt.request("/counter-order/orders?includeComplimentary=false");let Be=[];Ee&&Ee.success&&Array.isArray(Ee.orders)||Ee&&Array.isArray(Ee.orders)?Be=Ee.orders:Ee&&Array.isArray(Ee.data)?Be=Ee.data:Array.isArray(Ee)&&(Be=Ee);const lt=Be.find(nt=>(nt.id||nt._id)===be.id);if(lt){const nt=lt.items||[],It=u.map(Ct=>({menuItemId:Ct._id||Ct.id,name:Ct.name,quantity:Ct.quantity,price:Ct.price})),Mt=[...nt];It.forEach(Ct=>{const tr=Mt.findIndex(On=>On.name===Ct.name||On.menuItemId&&On.menuItemId===Ct.menuItemId);tr>=0?(Mt[tr].quantity+=Ct.quantity,console.log(` Combined item "${Ct.name}": ${Mt[tr].quantity}`)):(Mt.push(Ct),console.log(` Added new item "${Ct.name}": ${Ct.quantity}`))});const Yr=Mt.reduce((Ct,tr)=>Ct+tr.price*tr.quantity,0),er={items:Mt,subtotal:Yr,totalAmount:Yr,grandTotal:Yr};console.log(" RESTAURANT FIX: Updating existing KOT with merged items:",er),console.log(" RESTAURANT FIX: Keeping same bill/invoice number:",lt.invoiceNumber),await Qt.request(`/counter-order/orders/${be.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(er)}),console.log(" Printing NEW items to kitchen:",u);try{await ji.printKOT({kotNumber:be.kotNumber,tableNumber:M.number||M.tableNumber,items:u,isUpdate:!0}),console.log(" NEW items printed to kitchen successfully")}catch(Ct){console.error(" Failed to print KOT update:",Ct)}console.log(` Items added to existing KOT ${be.kotNumber}! Table ${M.number} - ${u.length} new items added`),console.log(` RESTAURANT FIX: Bill number preserved: ${lt.invoiceNumber}`),alert(` Items added to existing order!

Table: ${M.number}
KOT: ${be.kotNumber}
Bill Number: ${lt.invoiceNumber} (unchanged)
New items: ${u.length}`),f([]),L(null),jt(""),Y(null),X(null),setTimeout(()=>{mt.current&&(mt.current.focus(),console.log(" Auto-focused on table input after adding to existing KOT"))},100)}else{console.error(" Could not find existing KOT order in database"),alert("Error: Could not find existing KOT. Please try again.");return}}else{console.log(" RESTAURANT FIX: No existing KOT found, creating new one..."),console.log(" Creating new KOT with data:",{selectedTable:M,cartItems:u,customerData:r,counterUser:ve});const Ee=ga();console.log(" Calculated subtotal:",Ee),console.log(" Generating KOT number...");const Be=await dhe(r.selectedBranch._id);console.log(" Generated KOT number:",Be),console.log(" RESTAURANT KOT - Bill number will be generated on completion, not during KOT creation");const lt={userId:ve._id,customerName:r.customerName||"Walk-in Customer",phoneNumber:r.phoneNumber||"0000000000",branchId:r.selectedBranch._id,tableId:M._id||M.id,tableNumber:M.tableNumber||M.number,items:u.map(It=>({menuItemId:It._id||It.id,name:It.name,quantity:It.quantity,price:It.price})),subtotal:Ee,tax:0,serviceCharge:0,totalAmount:Ee,grandTotal:Ee,paymentMethod:"cash",status:"pending",kotNumber:Be,invoiceNumber:null,kotTime:new Date().toISOString(),categoryName:"Restaurant"};console.log(" Saving NEW KOT order:",lt),console.log(" About to call counterApi.createOrder...");const nt=await Qt.createOrder(lt);console.log(" NEW KOT saved to database:",nt),console.log(" Saved KOT response details:",{success:nt==null?void 0:nt.success,id:(nt==null?void 0:nt.id)||(nt==null?void 0:nt._id),kotNumber:nt==null?void 0:nt.kotNumber,invoiceNumber:nt==null?void 0:nt.invoiceNumber,status:nt==null?void 0:nt.status,paymentStatus:nt==null?void 0:nt.paymentStatus}),console.log(" Printing NEW KOT to kitchen:",u);try{await ji.printKOT({kotNumber:Be,tableNumber:M.number||M.tableNumber,items:u}),console.log(" NEW KOT printed to kitchen successfully")}catch(It){console.error(" Failed to print KOT:",It)}console.log(` NEW KOT ${Be} created! Table ${M.number} - ${u.length} items`),console.log(" RESTAURANT FIX: Bill number will be assigned when customer completes order"),alert(` New order created!

Table: ${M.number}
KOT: ${Be}
Bill Number: Will be assigned on completion
Items: ${u.length}`),f([]),L(null),jt(""),Y(null),X(null),setTimeout(()=>{mt.current&&(mt.current.focus(),console.log(" Auto-focused on table input after creating new KOT"))},100)}}catch(Z){console.error(" Failed to save KOT:",Z),console.error(" Error details:",Z.message),alert(`Failed to save KOT: ${Z.message}
Please try again.`)}},style:{background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",width:"auto",padding:"12px 24px",borderRadius:"8px",fontWeight:"600"},children:" Save KOT "}):n.jsx("button",{className:"counter-button",onClick:Ud,style:{background:"rgba(34, 197, 94, 0.9)",border:"1px solid rgba(34, 197, 94, 1)",color:"white",width:"auto",padding:"12px 24px",borderRadius:"8px",fontWeight:"600",fontSize:"1rem"},children:" Generate Bill "})]}),n.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:n.jsx("button",{className:"counter-button-secondary",onClick:Oa,style:{width:"auto",padding:"8px 16px"},children:" Back to Category Selection"})}),P&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"700px",maxWidth:"900px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",outline:"none"},tabIndex:0,"data-kot-modal":"true",onKeyDown:async Z=>{console.log(" Modal direct keydown:",Z.key,"focusedKOTIndex:",se);const be=(()=>{if(!Ne.trim())return R;const Ee=Ne.toLowerCase().trim();return R.filter(Be=>String(Be.tableNumber||"").toLowerCase().includes(Ee))})();if(Z.key==="ArrowDown"&&(Z.preventDefault(),console.log(" Direct ArrowDown - current:",se,"filtered total:",be.length),J(Ee=>{const Be=Ee<be.length-1?Ee+1:0;return console.log(" Direct - Setting focusedKOTIndex to:",Be),setTimeout(()=>me(Be),50),Be})),Z.key==="ArrowUp"&&(Z.preventDefault(),console.log(" Direct ArrowUp - current:",se,"filtered total:",be.length),J(Ee=>{const Be=Ee>0?Ee-1:be.length-1;return console.log(" Direct - Setting focusedKOTIndex to:",Be),setTimeout(()=>me(Be),50),Be})),Z.key==="Enter"){Z.preventDefault(),console.log(" Direct Enter pressed, focusedKOTIndex:",se),console.log(" Filtered KOTs length:",be.length),console.log(" Search query:",Ne);const Ee=be[se];console.log(" Focused KOT from filtered results:",Ee),Ee&&Ee.paymentStatus==="pending"?(console.log(" Direct Enter: Generating COMPREHENSIVE bill for table:",Ee.tableNumber),await Ft(Ee.tableNumber)):console.log(" No valid KOT found at focused index or KOT not pending")}if(Z.key==="Escape"&&(Z.preventDefault(),console.log(" Direct Escape pressed, closing KOT list"),I(!1),J(0)),Z.key.toLowerCase()==="e"){Z.preventDefault();const Be=R.filter(lt=>{if(!Ne.trim())return!0;const nt=Ne.toLowerCase().trim();return String(lt.tableNumber||"").toLowerCase().includes(nt)})[se];Be&&Be.paymentStatus==="pending"?(console.log(" E key pressed: Starting edit for KOT:",Be.kotNumber),we(Be)):console.log(" Cannot edit: KOT not found or not pending")}Z.key.toLowerCase()==="p"&&ne&&(Z.preventDefault(),console.log(" P key pressed: Save and Print KOT"),ze(!0))},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",color:"#ea580c",fontWeight:"600"},children:[" Saved KOTs (Kitchen Order Tickets) - Focus: ",se+1,"/",Ne.trim()?R.filter(Z=>{const ve=Ne.toLowerCase().trim();return String(Z.tableNumber||"").toLowerCase().includes(ve)}).length:R.length,Ne.trim()&&` (filtered by "${Ne}")`,(()=>{if(Ne.trim()){const ve=R.filter(be=>{const Ee=Ne.toLowerCase().trim();return String(be.tableNumber||"").toLowerCase().includes(Ee)})[se];if(ve)return`  Table ${ve.tableNumber}`}return""})()]}),n.jsx("button",{onClick:()=>I(!1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close (Alt+K)"})]}),n.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"12px 16px",marginBottom:"20px",fontSize:"0.875rem",color:"#0c4a6e"},children:[n.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:" Keyboard Navigation:"}),n.jsx("div",{children:"Alt+K: Open & Auto-focus Search  Type table number  Enter: Focus Main Search   Navigate  Enter: Generate Bill  E: Edit Items  P: Save & Print KOT  Esc: Close"}),n.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px",color:"#0369a1"},children:" Tip: Press Alt+K and type table number, then Enter to return to main search for item selection!"})]}),n.jsx("div",{style:{marginBottom:"20px"},children:n.jsx("input",{id:"kot-search-input",ref:$t,type:"text",placeholder:" Search by table number (e.g., 5, 10)...",value:Ne,autoFocus:!0,onChange:Z=>{Ge(Z.target.value),J(0)},onKeyDown:async Z=>{if(Z.key==="Enter"){Z.preventDefault();const ve=R.filter(Ee=>{if(!Ne.trim())return!0;const Be=Ne.toLowerCase().trim();return String(Ee.tableNumber||"").toLowerCase().includes(Be)});if(ve.length===1){const Ee=ve[0];console.log(" Search Enter: Only one result found, generating COMPREHENSIVE bill for table:",Ee.tableNumber),Ee.paymentStatus==="pending"?await Ft(Ee.tableNumber):console.log(" KOT already completed:",Ee.kotNumber);return}console.log(" Search Enter pressed - closing KOT list and focusing on main search bar"),I(!1),J(0);const be=()=>{if(gt.current)return gt.current.focus(),gt.current.select(),console.log("  KOT Search Enter: Focused on main search bar via ref"),!0;{const Ee=document.querySelector('input[placeholder*="Search by name"]');if(Ee)return Ee.focus(),Ee.select(),console.log("  KOT Search Enter: Focused on main search bar via selector"),!0}return!1};setTimeout(()=>be(),50),setTimeout(()=>be(),150),setTimeout(()=>be(),300)}else if(Z.key==="Escape")Z.preventDefault(),Ne.trim()?(Ge(""),console.log(" Search Escape pressed - cleared search")):(I(!1),J(0),console.log(" Search Escape pressed - closed modal"));else if(Z.key==="ArrowDown"){Z.preventDefault();const ve=document.querySelector('[data-kot-modal="true"]');ve&&(ve.focus(),console.log(" Search ArrowDown pressed - focused on modal"))}},style:{width:"100%",padding:"12px 16px",fontSize:"1rem",border:"2px solid #d1d5db",borderRadius:"8px",outline:"none",transition:"border-color 0.2s ease"},onFocus:Z=>Z.target.style.borderColor="#3b82f6",onBlur:Z=>Z.target.style.borderColor="#d1d5db"})}),Q?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),"Loading saved KOTs..."]}):R.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),n.jsx("h3",{style:{margin:"0 0 8px 0",color:"#374151"},children:"No Saved KOTs Found"}),n.jsx("p",{style:{margin:"0",fontSize:"0.875rem"},children:"KOTs will appear here after they are sent to the kitchen"})]}):n.jsx("div",{style:{display:"grid",gap:"16px",maxHeight:"500px",overflowY:"auto"},children:(()=>{const Z=R.filter(ve=>{if(!Ne.trim())return!0;const be=Ne.toLowerCase().trim();return String(ve.tableNumber||"").toLowerCase().includes(be)});return Z.length===0&&Ne.trim()?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),n.jsxs("p",{children:['No KOTs found for table "',Ne,'"']}),n.jsx("p",{style:{fontSize:"0.875rem",marginTop:"8px"},children:"Try searching with a different table number"})]}):Z.map((ve,be)=>n.jsxs("div",{"data-kot-index":be,style:{background:be===se?"#fef3c7":"#fff7ed",border:be===se?"3px solid #f59e0b":"2px solid #fb923c",borderRadius:"12px",padding:"20px",transition:"all 0.2s ease",boxShadow:be===se?"0 4px 12px rgba(245, 158, 11, 0.3)":"none"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Customer:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:ve.customerName})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Table:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:[" ",ve.tableNumber]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Status:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:ve.paymentStatus==="completed"?"#10b981":"#f59e0b"},children:ve.paymentStatus==="completed"?" Paid":" Pending"})]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #fb923c",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"0.875rem",color:"#9a3412"},children:["Items (",ve.totalItems," total):"]}),ne&&ne.id===ve.id?n.jsxs("div",{style:{background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsx("h5",{style:{margin:"0",color:"#92400e",fontSize:"1rem"},children:" Editing KOT Items"}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>ze(!1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"0.75rem",cursor:"pointer"},children:" Save Changes"}),n.jsx("button",{onClick:()=>ze(!0),style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"600"},children:" Save & Print KOT (P)"}),n.jsx("button",{onClick:Me,style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",fontSize:"0.75rem",cursor:"pointer"},children:" Cancel"})]})]}),n.jsx("div",{style:{display:"grid",gap:"8px"},children:Ve.map((Ee,Be)=>n.jsxs("div",{style:{background:Ee.isRemoved?"#fee2e2":"#f0fdf4",border:Ee.isRemoved?"1px solid #fca5a5":"1px solid #bbf7d0",borderRadius:"6px",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("span",{style:{textDecoration:Ee.isRemoved?"line-through":"none",color:Ee.isRemoved?"#991b1b":"#166534",fontWeight:"600"},children:Ee.name}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:["",Ee.price," each",Ee.newQuantity!==Ee.originalQuantity&&!Ee.isRemoved&&n.jsxs("span",{style:{color:"#f59e0b",marginLeft:"8px"},children:["(Changed: ",Ee.originalQuantity,"  ",Ee.newQuantity,")"]})]})]}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:Ee.isRemoved?n.jsx("button",{onClick:()=>We(Be),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer"},children:" Restore"}):n.jsx(n.Fragment,{children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("button",{onClick:()=>et(Be,Math.max(0,Ee.newQuantity-1)),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer",minWidth:"28px"},children:"-"}),n.jsx("input",{type:"number",min:"0",value:Ee.newQuantity,onChange:lt=>et(Be,parseInt(lt.target.value)||0),style:{width:"50px",textAlign:"center",border:"1px solid #d1d5db",borderRadius:"4px",padding:"4px",fontSize:"0.875rem"}}),n.jsx("button",{onClick:()=>et(Be,Ee.newQuantity+1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer",minWidth:"28px"},children:"+"})]})})})]},`${Ee.menuItemId||Ee._id||Ee.name}-${Be}-${Ee.isRemoved?"removed":"active"}`))}),n.jsxs("div",{style:{marginTop:"12px",padding:"8px",background:"#f3f4f6",borderRadius:"4px",fontSize:"0.875rem"},children:[n.jsxs("strong",{children:["Updated Total: ",Ve.filter(Ee=>!Ee.isRemoved).reduce((Ee,Be)=>Ee+Be.price*Be.newQuantity,0).toFixed(2)]}),Ve.filter(Ee=>Ee.isRemoved).length>0&&n.jsxs("div",{style:{color:"#ef4444",marginTop:"4px"},children:[Ve.filter(Ee=>Ee.isRemoved).length," item(s) will be removed"]})]})]}):n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"8px"},children:[ve.items.slice(0,6).map((Ee,Be)=>n.jsxs("div",{style:{background:"#fed7aa",padding:"8px 12px",borderRadius:"6px",fontSize:"0.875rem",color:"#9a3412"},children:[n.jsxs("span",{style:{fontWeight:"600",color:"#7c2d12"},children:[Ee.quantity,"x ",Ee.kotNumber?`[${Ee.kotNumber}] `:""]}),Ee.name]},Be)),ve.items.length>6&&n.jsxs("div",{style:{background:"#fed7aa",padding:"8px 12px",borderRadius:"6px",fontSize:"0.875rem",color:"#9a3412",fontStyle:"italic"},children:["+",ve.items.length-6," more items..."]})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Time:"}),n.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#78350f"},children:new Date(ve.createdAt).toLocaleString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:ve.paymentStatus==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{console.log(" Adding new items to table:",ve.tableNumber),L({_id:ve.tableId,id:ve.tableId,tableNumber:ve.tableNumber,number:ve.tableNumber,status:"reserved"}),f([]),Y(null),X(null),I(!1),console.log(` Ready to add NEW items to Table ${ve.tableNumber}. This will create a NEW KOT with sequential number.`)},style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer"},children:" Add Items"}),n.jsxs("button",{onClick:()=>we(ve),style:{background:be===se?"#7c3aed":"#8b5cf6",color:"white",border:be===se?"2px solid #5b21b6":"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",boxShadow:be===se?"0 2px 8px rgba(124, 58, 237, 0.4)":"none"},children:[" Edit Items ",be===se?"(E)":""]}),n.jsxs("button",{onClick:async()=>{console.log(" Bill button clicked for table:",ve.tableNumber),await Ft(ve.tableNumber)},style:{background:be===se?"#059669":"#10b981",color:"white",border:be===se?"2px solid #065f46":"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",boxShadow:be===se?"0 2px 8px rgba(5, 150, 105, 0.4)":"none"},children:[" Bill ",be===se?"(Enter)":""]}),n.jsx("button",{onClick:()=>At(ve),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer"},title:`Shift from Table ${ve.tableNumber} to another table`,children:" Table Shift"})]})})]})]},ve.id))})()}),n.jsxs("div",{style:{marginTop:"24px",textAlign:"center"},children:[n.jsx("button",{onClick:qe,disabled:Q,style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:Q?"not-allowed":"pointer",opacity:Q?.6:1,marginRight:"12px"},children:Q?" Refreshing...":" Refresh KOTs"}),n.jsx("button",{onClick:()=>I(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Close"})]})]})}),z&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"700px",maxWidth:"900px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",outline:"none"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#1a202c",display:"flex",alignItems:"center",gap:"8px"},children:" Today's Complimentary Bills"}),n.jsx("button",{onClick:()=>ee(!1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close (Alt+C)"})]}),le?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),n.jsx("div",{children:"Loading complimentary bills..."})]}):H.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"8px"},children:"No Complimentary Bills Today"}),n.jsx("div",{children:"All bills today were paid orders!"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"#fef3c7",borderRadius:"8px",border:"1px solid #f59e0b"},children:[n.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#92400e",marginBottom:"8px"},children:" Today's Summary"}),n.jsxs("div",{style:{display:"flex",gap:"24px"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{color:"#6b7280"},children:"Total Bills: "}),n.jsx("span",{style:{fontWeight:"600",color:"#1a202c"},children:H.length})]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#6b7280"},children:"Total Amount: "}),n.jsxs("span",{style:{fontWeight:"600",color:"#1a202c"},children:["",H.reduce((Z,ve)=>Z+(ve.amount||0),0).toFixed(2)]})]})]})]}),n.jsx("div",{style:{display:"grid",gap:"16px",maxHeight:"400px",overflowY:"auto"},children:H.map((Z,ve)=>n.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",transition:"all 0.2s"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1a202c",marginBottom:"4px"},children:[" ",Z.customerName]}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Invoice: ",Z.invoiceNumber,"  Time: ",Z.time]})]}),n.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669"},children:["",(Z.amount||0).toFixed(2)]})]}),n.jsxs("div",{style:{background:"#fffbeb",padding:"12px",borderRadius:"8px",border:"1px solid #fbbf24"},children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"600",marginBottom:"4px"},children:" Complimentary Reason:"}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",fontStyle:"italic"},children:Z.reason||"No reason provided"})]})]},Z.billId||ve))})]}),n.jsxs("div",{style:{marginTop:"24px",textAlign:"center"},children:[n.jsx("button",{onClick:yt,disabled:le,style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:le?"not-allowed":"pointer",opacity:le?.6:1,marginRight:"12px"},children:le?" Refreshing...":" Refresh"}),n.jsx("button",{onClick:()=>ee(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Close"})]})]})}),Se&&ue&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"600px",maxWidth:"800px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",outline:"none"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#1a202c",display:"flex",alignItems:"center",gap:"8px"},children:" Table Shift"}),n.jsx("button",{onClick:()=>{K(!1),ye(null),Le(null)},style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close"})]}),n.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",marginBottom:"24px"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1.125rem",fontWeight:"600",color:"#1a202c"},children:" KOT Details"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"KOT Number:"}),n.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:ue.kotNumber})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Current Table:"}),n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#dc2626"},children:[" ",ue.tableNumber]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Customer:"}),n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:[" ",ue.customerName]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Items:"}),n.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:[" ",((Th=ue.items)==null?void 0:Th.length)||0," items"]})]})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("h3",{style:{margin:"0 0 16px 0",fontSize:"1.125rem",fontWeight:"600",color:"#1a202c"},children:[" Select New Table (",fe.length," available)"]}),fe.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsx("div",{children:"No available tables for shifting"})]}):n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",maxHeight:"300px",overflowY:"auto",padding:"8px"},children:fe.map(Z=>n.jsxs("button",{onClick:()=>Le(Z),style:{background:(Ce==null?void 0:Ce.number)===Z.number?"#3b82f6":"#f8fafc",color:(Ce==null?void 0:Ce.number)===Z.number?"white":"#1a202c",border:(Ce==null?void 0:Ce.number)===Z.number?"2px solid #2563eb":"1px solid #e2e8f0",borderRadius:"8px",padding:"16px 12px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",textAlign:"center",transition:"all 0.2s",minHeight:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:[" ",Z.number]},Z._id||Z.id))})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>{K(!1),ye(null),Le(null)},style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),n.jsxs("button",{onClick:xt,disabled:!Ce,style:{background:Ce?"#3b82f6":"#d1d5db",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:Ce?"pointer":"not-allowed",opacity:Ce?1:.6},children:[" Shift to Table ",(Ce==null?void 0:Ce.number)||"..."]})]})]})}),ke&&it&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",color:"#1f2937",fontWeight:"600"},children:"Add to Cart"}),n.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",marginBottom:"24px"},children:[n.jsxs("h3",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",color:"#1f2937"},children:[it.menuItemNumber&&n.jsx("span",{style:{color:"#f59e0b",marginRight:"8px"},children:it.menuItemNumber}),it.name]}),n.jsxs("p",{style:{margin:"0",fontSize:"1rem",color:"#059669",fontWeight:"600"},children:["",it.price.toFixed(2)]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Enter Quantity:"}),n.jsx("input",{type:"number",min:"1",value:Nt,onChange:Z=>_t(Z.target.value),onKeyDown:Z=>{Z.key==="Enter"?je():Z.key==="Escape"&&(Pe(!1),pt(null))},onFocus:Z=>{Z.target.select()},autoFocus:!0,style:{width:"100%",padding:"12px",fontSize:"1.5rem",border:"3px solid #3b82f6",borderRadius:"8px",textAlign:"center",fontWeight:"700",color:"#2563eb",backgroundColor:"#eff6ff"}})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>{Pe(!1),pt(null)},style:{flex:1,background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel (Esc)"}),n.jsx("button",{onClick:je,style:{flex:1,background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Add to Cart (Enter)"})]})]})}),tt&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:n.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",width:"90%",maxWidth:"1000px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:"2px solid #e5e7eb",paddingBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.75rem",color:"#1f2937",fontWeight:"700"},children:" Sales Report"}),n.jsxs("p",{style:{margin:0,color:"#6b7280",fontSize:"1rem"},children:[Ze==null?void 0:Ze.category," - ",Ze==null?void 0:Ze.branch]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[n.jsx("input",{type:"date",value:Pt,onChange:Z=>{Rt(Z.target.value),ft(Z.target.value)},style:{padding:"8px 12px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem"}}),n.jsx("button",{onClick:async()=>{console.log(" Manual refresh clicked");try{await ft(Pt),console.log(" Manual refresh completed successfully")}catch(Z){console.error(" Manual refresh failed:",Z)}},disabled:Qe||Q,style:{background:Qe||Q?"#6b7280":"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:Qe||Q?"not-allowed":"pointer",opacity:Qe||Q?.6:1},title:"Refresh sales report",children:Qe||Q?" Refreshing...":" Refresh"}),n.jsx("button",{onClick:()=>$e(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close"})]})]}),Qe?n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"60px",flexDirection:"column",gap:"16px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),n.jsx("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"Loading sales report..."})]}):Ze?n.jsxs("div",{children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[n.jsxs("div",{style:{background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#0ea5e9"},children:Ze.summary.totalOrders}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#0369a1",fontWeight:"600"},children:"Total Orders"})]}),n.jsxs("div",{style:{background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#10b981"},children:["",Ze.summary.totalRevenue.toFixed(2)]}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#047857",fontWeight:"600"},children:"Total Revenue"})]}),n.jsxs("div",{style:{background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#f59e0b"},children:Ze.summary.totalItems}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"600"},children:"Items Sold"})]}),n.jsxs("div",{style:{background:"#fce7f3",border:"2px solid #ec4899",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#ec4899"},children:["",Ze.summary.averageOrderValue.toFixed(2)]}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#be185d",fontWeight:"600"},children:"Avg Order Value"})]}),Ze.summary.totalDiscount>0&&n.jsxs("div",{style:{background:"#fef2f2",border:"2px solid #ef4444",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#ef4444"},children:["",Ze.summary.totalDiscount.toFixed(2)]}),n.jsx("div",{style:{fontSize:"0.875rem",color:"#dc2626",fontWeight:"600"},children:"Total Discounts"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:[" Recent Orders (",Ze.orders.length,")"]}),n.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",maxHeight:"300px",overflow:"auto"},children:Ze.orders.length===0?n.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"No orders found for selected date and category"}):Ze.orders.slice(0,20).map((Z,ve)=>n.jsxs("div",{style:{padding:"12px 16px",borderBottom:ve<Math.min(19,Ze.orders.length-1)?"1px solid #e5e7eb":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:[Z.orderNumber,Z.tableNumber&&` - Table ${Z.tableNumber}`]}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[Z.time,"  ",Z.customerName,"  ",Z.items.length," items"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("div",{style:{textAlign:"right"},children:[n.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:["",Z.totalAmount.toFixed(2)]}),Z.discountAmount>0&&n.jsxs("div",{style:{fontSize:"0.75rem",color:"#ef4444"},children:["-",Z.discountAmount.toFixed(2)," discount"]})]}),n.jsx("button",{onClick:()=>{console.log(" Viewing order details:",Z.orderNumber),Ye(Z),ie(!0)},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:be=>be.target.style.background="#2563eb",onMouseOut:be=>be.target.style.background="#3b82f6",title:`View items for ${Z.orderNumber}`,children:" View"}),!(Z.categoryName&&Z.categoryName.toLowerCase().includes("self service")||Z.categoryName&&Z.categoryName.toLowerCase().includes("darshini")||r.selectedCategory&&r.selectedCategory.name&&(r.selectedCategory.name.toLowerCase().includes("self service")||r.selectedCategory.name.toLowerCase().includes("darshini")))&&n.jsx("button",{onClick:async()=>{var be,Ee;console.log(" Printing receipt for order:",Z.orderNumber),console.log(" Order discount info:",{discountAmount:Z.discountAmount,discount:Z.discount,hasDiscount:!!(Z.discountAmount&&Z.discountAmount>0)});try{const Be=Z.items.reduce((Wa,Qo)=>Wa+Qo.price*Qo.quantity,0),lt=Z.discountAmount||Be-Z.totalAmount,nt={selectedBranch:r.selectedBranch,selectedTable:Z.tableNumber?{tableNumber:Z.tableNumber,number:Z.tableNumber}:null,selectedCategory:r.selectedCategory,invoiceNumber:Z.orderNumber,date:Pt,time:Z.time,customerName:Z.customerName,phoneNumber:Z.phoneNumber||"0000000000",cartItems:Z.items.map(Wa=>({name:Wa.name,price:Wa.price,quantity:Wa.quantity})),subtotal:Be,total:Z.totalAmount,discountAmount:lt,discountRemark:((be=Z.discount)==null?void 0:be.remark)||(lt>0?"Discount Applied":""),discount:Z.discount||(lt>0?{type:"amount",value:lt,amount:lt,remark:"Discount Applied"}:null),paymentMethod:"Completed",amountReceived:Z.totalAmount,change:0};console.log(" Print data prepared:",nt);const It=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}");console.log(" Printer settings:",It);const Mt=ji.generateThermalReceipt(nt);console.log(" Receipt text generated, length:",Mt.length);const Yr="https://hotelvirat.com/api/v1/hotel",er=It.ip||"192.168.1.100",Ct=It.port||9100;console.log(" Attempting network print to:",`${er}:${Ct}`);const tr=new AbortController,On=setTimeout(()=>tr.abort(),3e3),qa=await fetch(`${Yr}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:Mt,printerIP:er,port:Ct}),signal:tr.signal});if(clearTimeout(On),qa.ok)console.log(" Receipt printed successfully for order:",Z.orderNumber),alert(` Receipt printed successfully for order ${Z.orderNumber}`);else throw new Error("Thermal printer not responding")}catch(Be){console.log(" Network printing failed, trying thermal printer service:",Be.message);try{const lt=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),nt={method:"network",printerIP:lt.ip||"192.168.1.100",port:lt.port||9100},It=Z.items.reduce((er,Ct)=>er+Ct.price*Ct.quantity,0),Mt=Z.discountAmount||It-Z.totalAmount,Yr={selectedBranch:r.selectedBranch,selectedTable:Z.tableNumber?{tableNumber:Z.tableNumber,number:Z.tableNumber}:null,selectedCategory:r.selectedCategory,invoiceNumber:Z.orderNumber,date:Pt,time:Z.time,customerName:Z.customerName,phoneNumber:Z.phoneNumber||"0000000000",cartItems:Z.items.map(er=>({name:er.name,price:er.price,quantity:er.quantity})),subtotal:It,total:Z.totalAmount,discountAmount:Mt,discountRemark:((Ee=Z.discount)==null?void 0:Ee.remark)||(Mt>0?"Discount Applied":""),discount:Z.discount||(Mt>0?{type:"amount",value:Mt,amount:Mt,remark:"Discount Applied"}:null),paymentMethod:"Completed",amountReceived:Z.totalAmount,change:0};await ji.printReceipt(Yr,nt),console.log(" Receipt printed via thermal printer service for order:",Z.orderNumber),alert(` Receipt printed via thermal printer service for order ${Z.orderNumber}`)}catch(lt){console.error(" All printing methods failed:",lt),alert(` Printing failed: ${lt.message}. Please check printer connection.`)}}},style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:be=>be.target.style.background="#059669",onMouseOut:be=>be.target.style.background="#10b981",title:`Print receipt for ${Z.orderNumber}`,children:" Print"})]})]},ve))})]})]}):n.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#6b7280"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),n.jsx("p",{children:"No sales data available for the selected date."})]})]})}),Et&&De&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"2px solid #e5e7eb"},children:[n.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1f2937",margin:0},children:" Order Details"}),n.jsx("button",{onClick:()=>{ie(!1),Ye(null)},style:{background:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close"})]}),n.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",marginBottom:"24px"},children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Bill Number:"}),n.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:De.orderNumber})]}),De.tableNumber&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Table:"}),n.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:[" ",De.tableNumber]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Customer:"}),n.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:De.customerName})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Time:"}),n.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:De.time})]})]})}),n.jsxs("div",{children:[n.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:["Items (",De.items.length,")"]}),n.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",overflow:"hidden"},children:De.items.map((Z,ve)=>n.jsxs("div",{style:{padding:"16px",borderBottom:ve<De.items.length-1?"1px solid #e5e7eb":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:Z.name}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["",Z.price,"  ",Z.quantity]})]}),n.jsx("div",{style:{textAlign:"right"},children:n.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:["",(Z.price*Z.quantity).toFixed(2)]})})]},ve))})]}),n.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"2px solid #e5e7eb"},children:[(()=>{const Z=De.items.reduce((lt,nt)=>lt+nt.price*nt.quantity,0),ve=De.totalAmount,be=Z-ve,Ee=De.discountAmount>0||be>0,Be=De.discountAmount||be;return console.log(" Order Details calculation:",{calculatedSubtotal:Z,actualTotal:ve,impliedDiscount:be,savedDiscountAmount:De.discountAmount,finalDiscountAmount:Be,hasDiscount:Ee}),Ee&&Be>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[n.jsx("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#6b7280"},children:"Subtotal:"}),n.jsxs("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#6b7280"},children:["",Z.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[n.jsx("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#ef4444"},children:"Discount:"}),n.jsxs("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#ef4444"},children:["-",Be.toFixed(2)]})]}),De.discount&&De.discount.remark&&n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"Reason:"}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",fontStyle:"italic"},children:De.discount.remark})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #d1d5db",margin:"12px 0"}})]}):null})(),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[n.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1f2937"},children:(()=>{const ve=De.items.reduce((Ee,Be)=>Ee+Be.price*Be.quantity,0)-De.totalAmount;return De.discountAmount>0||ve>0?"Final Amount:":"Total Amount:"})()}),n.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669"},children:["",De.totalAmount.toFixed(2)]})]})]})]})})]})}):n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("p",{children:"Customer data not found. Please start over."}),n.jsx("button",{className:"counter-button",onClick:()=>e("/counter/branch-selection"),children:"Go Back"})]})})})},hhe=()=>{var k,D,F,B;const e=An(),r=pa().state,[a,i]=N.useState(!1),[s,l]=N.useState(null),[d,u]=N.useState((r==null?void 0:r.cartItems)||[]),[f,p]=N.useState(!1),[m,x]=N.useState(!1),[v,j]=N.useState(!1);if(N.useEffect(()=>{const M=async L=>{if(L.key==="Enter"){const A=document.activeElement;if(A&&(A.tagName==="INPUT"||A.tagName==="TEXTAREA")||a||m)return;await y()}if(L.key.toLowerCase()==="k"){const A=document.activeElement;if(A&&(A.tagName==="INPUT"||A.tagName==="TEXTAREA"))return;j(!v)}};return window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)}},[a,m,v]),!r)return n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("p",{children:"Order data not found. Please start over."}),n.jsx("button",{className:"counter-button",onClick:()=>e("/counter/menu"),children:"Go Back"})]})})});const b=async()=>{var M,L,A,U,P;try{console.log(" Starting KOT save process...");const I=localStorage.getItem("counterUserData"),R=I?JSON.parse(I):null;if(!R||!R._id)throw console.error(" Counter user not found in localStorage"),new Error("User session expired. Please login again.");console.log(" Counter user found:",R._id),console.log(" Creating KOT invoice...");const W={customerName:r.customerName||"Walk-in Customer",phoneNumber:r.phoneNumber||"0000000000",branchId:r.selectedBranch._id,category:((M=r.selectedCategory)==null?void 0:M.name)||"Restaurant",date:r.date||new Date().toLocaleDateString("en-IN"),time:r.time||new Date().toLocaleTimeString("en-IN",{hour12:!0})};console.log(" Invoice data:",W);const Q=await Qt.createInvoice(W);if(console.log(" KOT Invoice created:",Q.invoice),r.selectedTable&&r.selectedTable._id)try{console.log(" Updating table status to reserved...");const z=r.selectedTable._id||r.selectedTable.id;await Qt.request(`/table/${z}`,{method:"PUT",body:JSON.stringify({status:"reserved"})}),console.log(" Table status updated to reserved")}catch(z){console.error(" Failed to update table status:",z)}console.log(" Creating KOT order...");const ge=d.reduce((z,ee)=>z+ee.price*ee.quantity,0),q={userId:R._id,customerName:r.customerName||"Walk-in Customer",phoneNumber:r.phoneNumber||"0000000000",branchId:r.selectedBranch._id,invoiceId:Q.invoice.id,tableId:((L=r.selectedTable)==null?void 0:L._id)||((A=r.selectedTable)==null?void 0:A.id)||null,tableNumber:((U=r.selectedTable)==null?void 0:U.tableNumber)||((P=r.selectedTable)==null?void 0:P.number)||null,items:d.map(z=>({menuItemId:z._id||z.id||"507f1f77bcf86cd799439013",name:z.name,quantity:z.quantity,price:z.price})),subtotal:ge,tax:0,serviceCharge:0,totalAmount:ge,grandTotal:ge,paymentMethod:"pending",orderStatus:"kot_sent",paymentStatus:"pending",kotNumber:`KOT-${Date.now()}`,kotTime:new Date().toISOString()};console.log(" Saving KOT order:",q);const Y=await Qt.createOrder(q);return console.log(" KOT saved successfully:",Y),p(!0),localStorage.setItem("currentKOT",JSON.stringify({...r,kotOrder:Y,kotNumber:q.kotNumber,kotItems:d})),console.log(" KOT save process completed successfully!"),Y}catch(I){throw console.error(" Failed to save KOT:",I),console.error(" Error details:",I.message,I.stack),I}},y=async()=>{var M,L;if(!a){i(!0),l(null);try{console.log(" Saving KOT to database..."),await b();const A=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),U={selectedBranch:r.selectedBranch,kotNumber:`KOT-${Date.now()}`,date:r.date,time:r.time,tableNumber:((M=r.selectedTable)==null?void 0:M.tableNumber)||((L=r.selectedTable)==null?void 0:L.number)||"N/A",cartItems:d,isKOT:!0};try{const P=C(U),I="https://hotelvirat.com/api/v1/hotel",R=A.ip||"192.168.1.100",W=A.port||9100,Q=new AbortController,ge=setTimeout(()=>Q.abort(),3e3),q=await fetch(`${I}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:P,printerIP:R,port:W}),signal:Q.signal});if(clearTimeout(ge),q.ok)l({type:"success",message:"KOT printed to kitchen! Table reserved. Returning to menu..."}),x(!0),setTimeout(()=>{e("/counter/menu",{state:{...r,cartItems:[],selectedTable:null,kotPrinted:!0}})},1500);else throw new Error("Kitchen printer not responding")}catch(P){console.log("Direct thermal printing failed, trying thermal printer service:",P.message);const I={method:"network",printerIP:A.ip||"192.168.1.100",port:A.port||9100},R={selectedBranch:r.selectedBranch,invoiceNumber:U.kotNumber,date:U.date,time:U.time,customerName:"KITCHEN ORDER",phoneNumber:"",cartItems:d.map(W=>({name:`${W.quantity}x ${W.name}`,price:0,quantity:1})),total:0,paymentMethod:"KOT",amountReceived:0,change:0,isKOT:!0,tableNumber:U.tableNumber};await Promise.race([ji.printBill(R,I),new Promise((W,Q)=>setTimeout(()=>Q(new Error("Print operation timed out")),5e3))]),l({type:"success",message:"KOT printed to kitchen! Table reserved. Returning to menu..."}),x(!0),setTimeout(()=>{e("/counter/menu",{state:{...r,cartItems:[],selectedTable:null,kotPrinted:!0}})},1500)}setTimeout(()=>l(null),3e3)}catch(A){console.error("KOT Print error:",A),l({type:"error",message:"Failed to print KOT. Please check printer connection."}),setTimeout(()=>l(null),5e3)}finally{i(!1)}}},C=M=>{const A=R=>{const W=Math.max(0,Math.floor((42-R.length)/2));return" ".repeat(W)+R},U=(R,W)=>{const Q=42-W.length-1,ge=R.length>Q?R.substring(0,Q-3)+"...":R,q=42-ge.length-W.length;return ge+" ".repeat(Math.max(1,q))+W};let P=`
`;P+=A("*** KITCHEN ORDER TICKET ***")+`
`,P+=A(M.selectedBranch.name||"Restaurant")+`
`,P+="=".repeat(42)+`
`,P+=U("KOT#:",M.kotNumber||"KOT-001")+`
`,P+=U("Table:",M.tableNumber||"N/A")+`
`,P+=U("Date:",M.date||new Date().toLocaleDateString())+`
`,P+=U("Time:",M.time||new Date().toLocaleTimeString())+`
`,P+="=".repeat(42)+`
`,P+=A("ITEMS TO PREPARE")+`
`,P+="-".repeat(42)+`
`,M.cartItems&&M.cartItems.length>0?M.cartItems.forEach(R=>{const W=`${R.quantity||1}x ${R.name||"Unknown Item"}`;P+=W+`
`,W.length>42&&(P+=`
`)}):P+=A("No items")+`
`,P+="-".repeat(42)+`
`;const I=M.cartItems?M.cartItems.reduce((R,W)=>R+(W.quantity||1),0):0;return P+=A(`Total Items: ${I}`)+`
`,P+="=".repeat(42)+`
`,P+=A("*** KITCHEN COPY ***")+`
`,P+=`


`,P},E=()=>{e("/counter/print-settings",{state:{returnTo:"/counter/kot-generation",orderData:r}})},O=()=>{e("/counter/menu",{state:{...r,cartItems:[],isKOTOrder:!0,existingKOT:!0}})},S=()=>{e("/counter/bill-generation",{state:{...r,cartItems:d,isKOTOrder:!0,kotSaved:!0}})},T=()=>{e("/counter/menu",{state:{...r,cartItems:d}})};return d.reduce((M,L)=>M+L.price*L.quantity,0),n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Kitchen Order Ticket (KOT)"}),n.jsx("p",{className:"counter-subtitle",children:"Send order to kitchen"})]}),n.jsxs("div",{style:{background:"#fff7ed",padding:"20px",borderRadius:"12px",marginBottom:"24px",border:"2px dashed #fb923c"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[n.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",color:"#ea580c"},children:" KITCHEN ORDER TICKET"}),n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:r.selectedBranch.name})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #fb923c",margin:"16px 0"}}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"KOT Number:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:["KOT-",Date.now().toString().slice(-6)]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Table:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:[" ",((k=r.selectedTable)==null?void 0:k.tableNumber)||((D=r.selectedTable)==null?void 0:D.number)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Time:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:r.time})]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #fb923c",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#ea580c"},children:"Items to Prepare"}),d.map((M,L)=>n.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:L<d.length-1?"1px solid #fed7aa":"none"},children:n.jsx("div",{style:{flex:1},children:n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#9a3412",fontSize:"1rem"},children:[M.quantity,"x ",M.name]})})},L))]}),n.jsx("hr",{style:{border:"none",borderTop:"2px solid #ea580c",margin:"16px 0"}}),n.jsxs("div",{style:{textAlign:"center",fontSize:"1.2rem",fontWeight:"700",color:"#ea580c"},children:["Total Items: ",d.reduce((M,L)=>M+L.quantity,0)]})]}),s&&n.jsx("div",{style:{background:s.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${s.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"16px",textAlign:"center"},children:n.jsxs("div",{style:{color:s.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[s.type==="success"?"":""," ",s.message]})}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"24px"},children:[!m&&n.jsxs("div",{style:{textAlign:"center",padding:"20px",background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"12px"},children:[n.jsx("h3",{style:{margin:"0 0 8px 0",color:"#92400e",fontSize:"1.2rem"},children:"Press Enter to Print KOT"}),n.jsx("p",{style:{margin:"0",color:"#78350f",fontSize:"0.875rem"},children:"Or click the Print KOT button below"})]}),m&&n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",padding:"20px",background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"12px"},children:[n.jsx("button",{className:"counter-button",onClick:O,style:{background:"#f59e0b",borderColor:"#f59e0b",padding:"16px 24px",fontSize:"1rem",fontWeight:"600"},children:" Add More Items"}),n.jsx("button",{className:"counter-button",onClick:S,style:{background:"#10b981",borderColor:"#10b981",padding:"16px 24px",fontSize:"1rem",fontWeight:"600"},children:" Generate Final Bill"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:T,children:" Back"}),n.jsx("button",{className:"counter-button-secondary",onClick:y,disabled:a,style:{background:m?"#9ca3af":"#ea580c",borderColor:m?"#9ca3af":"#ea580c",color:"white",opacity:a?.6:1,cursor:a?"not-allowed":"pointer"},children:a?" Printing...":m?" KOT Printed":" Print KOT"}),n.jsx("button",{className:"counter-button-secondary",onClick:E,title:"Configure printer settings",children:" Settings"}),n.jsx("button",{className:"counter-button-secondary",onClick:()=>j(!0),title:"Press K to view KOT details",children:" View KOT (K)"})]})]}),v&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"500px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsx("h2",{style:{margin:0,fontSize:"1.5rem",color:"#ea580c",fontWeight:"600"},children:" Kitchen Order Ticket"}),n.jsx("button",{onClick:()=>j(!1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close (K)"})]}),n.jsxs("div",{style:{background:"#fff7ed",padding:"20px",borderRadius:"12px",border:"2px solid #fb923c"},children:[n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"KOT Number:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:["KOT-",Date.now().toString().slice(-6)]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Table:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:[" ",((F=r.selectedTable)==null?void 0:F.tableNumber)||((B=r.selectedTable)==null?void 0:B.number)||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Time:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:r.time})]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #fb923c",margin:"16px 0"}}),n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#ea580c"},children:"Items to Prepare"}),d.map((M,L)=>n.jsx("div",{style:{padding:"8px 0",borderBottom:L<d.length-1?"1px solid #fed7aa":"none"},children:n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#9a3412",fontSize:"1rem"},children:[M.quantity,"x ",M.name]})},L)),n.jsx("hr",{style:{border:"none",borderTop:"2px solid #ea580c",margin:"16px 0"}}),n.jsxs("div",{style:{textAlign:"center",fontSize:"1.2rem",fontWeight:"700",color:"#ea580c"},children:["Total Items: ",d.reduce((M,L)=>M+L.quantity,0)]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"20px"},children:[n.jsx("button",{onClick:y,disabled:a,style:{background:"#ea580c",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:a?"not-allowed":"pointer",opacity:a?.6:1},children:a?" Printing...":" Print KOT"}),n.jsx("button",{onClick:()=>j(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Close"})]})]})]})})]})})},phe=async(e,t)=>{try{if(console.log(" Getting next unified bill/invoice number from server for category:",t),!e)throw new Error("Branch ID is required for bill/invoice number generation");const r=await Qt.getNextBillNumber(e,t);if(r&&r.success&&r.billNumber)return console.log(` Server generated unified bill/invoice number: ${r.billNumber} for category: ${t}`),r.billNumber;throw new Error("Invalid response from server")}catch(r){console.error(" Failed to get unified bill/invoice number from server:",r),console.log(" Falling back to localStorage method...");const a=new Date,i=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getFullYear()).slice(-2),d=`${i}-${s}-${l}`,u=`unified-bill-counter-${t}-${d}`;let f=parseInt(localStorage.getItem(u)||"0");f++,localStorage.setItem(u,f.toString());const p=String(f).padStart(3,"0");return console.log(` Fallback generated unified number: ${p} for category: ${t} (counter: ${f})`),p}},mhe=()=>{var Se;const e=An(),r=pa().state;console.log(" BillGeneration received orderData:",{invoiceNumber:r==null?void 0:r.invoiceNumber,billNumber:r==null?void 0:r.billNumber,kotNumber:r==null?void 0:r.kotNumber,isKOTOrder:r==null?void 0:r.isKOTOrder,existingOrderId:r==null?void 0:r.existingOrderId,isComprehensiveBill:r==null?void 0:r.isComprehensiveBill,kotNumbers:r==null?void 0:r.kotNumbers,fullOrderData:r}),console.log(" CRITICAL DEBUG - Bill number sources:",{"orderData.billNumber":r==null?void 0:r.billNumber,"orderData.invoiceNumber":r==null?void 0:r.invoiceNumber,"typeof billNumber":typeof(r==null?void 0:r.billNumber),"typeof invoiceNumber":typeof(r==null?void 0:r.invoiceNumber),"billNumber === undefined":(r==null?void 0:r.billNumber)===void 0,"invoiceNumber === undefined":(r==null?void 0:r.invoiceNumber)===void 0,'billNumber === "001"':(r==null?void 0:r.billNumber)==="001",'invoiceNumber === "001"':(r==null?void 0:r.invoiceNumber)==="001"}),r!=null&&r.isKOTOrder&&(r!=null&&r.kotNumber)&&(r.billNumber||console.log(" Bill number will be generated in comprehensive bill flow"));const[a,i]=N.useState(!1),[s,l]=N.useState(null),[d,u]=N.useState((r==null?void 0:r.cartItems)||[]),[f,p]=N.useState((r==null?void 0:r.invoiceNumber)||(r==null?void 0:r.billNumber)),[m,x]=N.useState(!1);N.useEffect(()=>{(async()=>{var ue,ye;if(!f&&!m&&((ue=r==null?void 0:r.selectedBranch)!=null&&ue._id)){console.log(" BillGeneration: No invoice number provided, generating new one..."),x(!0);try{const fe=await phe(r.selectedBranch._id,((ye=r.selectedCategory)==null?void 0:ye.name)||"Self Service");console.log(" BillGeneration: Generated invoice number:",fe),p(fe)}catch(fe){console.error(" Failed to generate invoice number in BillGeneration:",fe),p("001"),x(!1)}}})()},[(Se=r==null?void 0:r.selectedBranch)==null?void 0:Se._id]);const[v,j]=N.useState(!1),[b,y]=N.useState("percentage"),[C,E]=N.useState(""),[O,S]=N.useState(""),[T,k]=N.useState(null),[D,F]=N.useState(!1),[B,M]=N.useState(""),[L,A]=N.useState(!1);N.useEffect(()=>{v&&setTimeout(()=>{const K=document.querySelector('input[type="number"][placeholder*="percentage"]');K&&K.focus()},100)},[v]);const U=async()=>{if(!r.selectedTable){console.log(" No selected table to update status for");return}const K=r.selectedTable._id||r.selectedTable.id,ue=r.selectedTable.tableNumber||r.selectedTable.number;if(!K){console.error(" Table ID is missing - cannot update status");return}try{console.log(` Freeing up table after bill print: ${ue} (ID: ${K})`);const ye=await Qt.request(`/table/${K}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})});console.log(" Table status API response:",ye),console.log(` Table ${ue} status updated to AVAILABLE after bill print`),localStorage.setItem("refreshTablesAfterBill","true"),localStorage.setItem("lastUpdatedTable",K),localStorage.setItem("lastUpdatedTableStatus","available"),localStorage.setItem("tableStatusUpdateTime",Date.now().toString());try{await Qt.request(`/tables/${K}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Alternative table status endpoint also updated")}catch{console.log(" Alternative endpoint not available (this is normal)")}window.refreshTables&&typeof window.refreshTables=="function"&&(console.log(" Triggering immediate table refresh..."),window.refreshTables())}catch(ye){console.error(" Failed to update table status after bill print:",ye),console.error(" Error details:",{message:ye.message,status:ye.status,response:ye.response}),localStorage.setItem("refreshTablesAfterBill","true"),localStorage.setItem("tableStatusUpdateFailed","true"),localStorage.setItem("failedTableId",K),window.showNotification&&typeof window.showNotification=="function"&&window.showNotification("Table status update failed. Please manually refresh the table list.","warning")}};N.useEffect(()=>{const K=async ue=>{if(ue.altKey&&ue.key.toLowerCase()==="b"){ue.preventDefault(),Y();return}if(ue.altKey&&ue.key.toLowerCase()==="c"){ue.preventDefault(),D?(F(!1),M("")):A(!0);return}if(ue.key==="Enter"){const ye=document.activeElement;if(ye&&(ye.tagName==="INPUT"||ye.tagName==="TEXTAREA"))return;if(v||L){console.log(" Enter key blocked - popup is open");return}if(a)return;console.log(" Enter key pressed - printing bill with discount:",{hasDiscount:!!T,discountAmount:z(),total:le-z(),isComplimentary:D}),await W(),setTimeout(()=>{P()},500)}};return window.addEventListener("keydown",K),()=>{window.removeEventListener("keydown",K)}},[a,d,v,L,T,D]);const P=async()=>{var K,ue,ye,fe,Xe,Ce,Le,ne,Ae,Ve,te,ce,X,se,J,Ne,Ge;console.log(" handleDone() called - starting order completion process..."),console.log(" Order data:",{isComprehensiveBill:r.isComprehensiveBill,existingOrderIds:r.existingOrderIds,kotNumbers:r.kotNumbers,billNumber:r.billNumber,invoiceNumber:r.invoiceNumber}),console.log(" CRITICAL DEBUG - Full orderData:",r),console.log(" CRITICAL DEBUG - selectedCategory:",r.selectedCategory);try{const tt=localStorage.getItem("counterUserData"),$e=tt?JSON.parse(tt):null;if(!$e||!$e._id){console.error(" Counter user not found in localStorage"),e("/counter/menu",{state:{customerName:r.customerName,phoneNumber:r.phoneNumber,selectedBranch:r.selectedBranch,date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),refreshTables:!0}});return}if(r.existingOrderId||r.existingOrderIds){if(r.isComprehensiveBill&&r.existingOrderIds){console.log(" Updating MULTIPLE KOT orders to completed:",r.existingOrderIds),console.log(" KOT numbers included:",r.kotNumbers);const Ze=d.reduce((ht,Pt)=>ht+Pt.price*Pt.quantity,0),Oe=Ze-z();console.log(" Comprehensive bill amounts:",{subtotal:Ze,discountAmount:z(),finalTotal:Oe,appliedDiscount:T});const Qe={userId:$e._id,customerName:r.customerName||"Walk-in Customer",phoneNumber:r.phoneNumber||"0000000000",branchId:r.selectedBranch._id,branchName:r.selectedBranch.name,categoryId:((K=r.selectedCategory)==null?void 0:K._id)||null,categoryName:((ue=r.selectedCategory)==null?void 0:ue.name)||"Restaurant",tableId:((ye=r.selectedTable)==null?void 0:ye._id)||((fe=r.selectedTable)==null?void 0:fe.id)||null,tableNumber:((Xe=r.selectedTable)==null?void 0:Xe.tableNumber)||((Ce=r.selectedTable)==null?void 0:Ce.number)||null,items:d.map(ht=>({menuItemId:ht._id||ht.id||"507f1f77bcf86cd799439013",name:ht.name,quantity:ht.quantity,price:ht.price})),subtotal:Ze,discount:T?{type:T.type,value:T.value,amount:z(),remark:T.remark}:null,discountAmount:z(),tax:0,serviceCharge:0,totalAmount:Oe,grandTotal:Oe,isComplimentary:D,complimentaryReason:B,paymentMethod:"cash",paymentStatus:"completed",status:"completed",invoiceNumber:r.billNumber||r.invoiceNumber,isComprehensiveBill:!0,kotNumbers:r.kotNumbers,originalKOTIds:r.existingOrderIds};console.log(" Saving consolidated comprehensive bill order:",Qe);try{const ht=await Qt.createOrder(Qe);console.log(" Consolidated comprehensive bill saved successfully:",ht);const Pt=r.existingOrderIds.map(async Et=>{var ie,De;try{console.log(" Marking KOT as consolidated (hidden from sales report):",Et),console.log(" API endpoint:",`/counter-order/orders/${Et}/payment-status`),console.log(" Update payload:",{paymentStatus:"consolidated",status:"consolidated",invoiceNumber:r.billNumber||r.invoiceNumber,consolidatedOrderId:((ie=ht.order)==null?void 0:ie.id)||ht.id,isPartOfComprehensiveBill:!0});const Ye=await Qt.request(`/counter-order/orders/${Et}/payment-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"consolidated",status:"consolidated",invoiceNumber:r.billNumber||r.invoiceNumber,consolidatedOrderId:((De=ht.order)==null?void 0:De.id)||ht.id,isPartOfComprehensiveBill:!0})});return console.log(" KOT order marked as consolidated (hidden from sales report):",Et,Ye),Ye}catch(Ye){throw console.error(" Failed to update KOT order status:",Et,Ye),Ye}});console.log(" Waiting for all KOT status updates to complete...");const Rt=await Promise.all(Pt);console.log(" All KOT update results:",Rt),console.log(" All KOTs marked as consolidated (hidden from sales report) with bill number:",r.billNumber||r.invoiceNumber)}catch(ht){console.error(" CRITICAL: Failed to create consolidated order:",ht),console.error(" Error details:",{message:ht.message,stack:ht.stack,orderData:Qe,response:ht.response||"No response data"}),ht.response&&console.error(" Backend error response available"),console.log(" Attempting direct KOT status updates as fallback...");const Pt=r.existingOrderIds.map(async Rt=>{try{console.log(" Fallback: Updating KOT with discount info and marking as consolidated:",Rt),console.log(" Fallback payload:",{paymentStatus:"consolidated",status:"consolidated",invoiceNumber:r.billNumber||r.invoiceNumber,totalAmount:Oe,grandTotal:Oe,subtotal:Ze,discountAmount:z(),discount:T,isPartOfComprehensiveBill:!0});const Et=await Qt.request(`/counter-order/orders/${Rt}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"consolidated",status:"consolidated",invoiceNumber:r.billNumber||r.invoiceNumber,totalAmount:Oe,grandTotal:Oe,subtotal:Ze,discountAmount:z(),discount:T?{type:T.type,value:T.value,amount:z(),remark:T.remark}:null,isPartOfComprehensiveBill:!0})});return console.log(" Fallback KOT update with discount and consolidated status successful:",Rt,Et),Et}catch(Et){return console.error(" Fallback KOT update failed:",Rt,{error:Et.message,status:Et.status,response:Et.response}),null}});await Promise.all(Pt),console.log(" Fallback KOT updates with discount and consolidated status completed")}}else if(r.existingOrderId){console.log(" Updating existing KOT order to completed:",r.existingOrderId);try{await Qt.request(`/counter-order/orders/${r.existingOrderId}/payment-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"completed",invoiceNumber:r.billNumber||r.invoiceNumber})}),console.log(" KOT order marked as completed with bill number:",r.billNumber||r.invoiceNumber)}catch(Ze){console.error(" Failed to update KOT order status:",Ze)}}if(r.selectedTable)try{console.log(` Freeing up table: ${r.selectedTable.tableNumber||r.selectedTable.number}`),await Qt.request(`/table/${r.selectedTable._id||r.selectedTable.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Table freed successfully")}catch(Ze){console.error(" Failed to free table:",Ze)}}else{console.log(" Skipping invoice creation - using existing bill number:",f),console.log(" Creating order directly...");const Ze=d.reduce((Et,ie)=>Et+ie.price*ie.quantity,0),Oe=Ze-z(),Qe={userId:$e._id,customerName:`${r.customerName||"Walk-in Customer"} [${f}]`,phoneNumber:r.phoneNumber||"0000000000",branchId:r.selectedBranch._id,branchName:r.selectedBranch.name,categoryId:((Le=r.selectedCategory)==null?void 0:Le._id)||null,categoryName:((ne=r.selectedCategory)==null?void 0:ne.name)||"Self Service",tableId:((Ae=r.selectedTable)==null?void 0:Ae._id)||((Ve=r.selectedTable)==null?void 0:Ve.id)||null,tableNumber:((te=r.selectedTable)==null?void 0:te.tableNumber)||((ce=r.selectedTable)==null?void 0:ce.number)||null,items:d.map(Et=>({menuItemId:Et._id||Et.id||"507f1f77bcf86cd799439013",name:Et.name,quantity:Et.quantity,price:Et.price})),subtotal:Ze,discount:T?{type:T.type,value:T.value,amount:z(),remark:T.remark}:null,discountAmount:z(),tax:0,serviceCharge:0,totalAmount:Oe,grandTotal:Oe,isComplimentary:D,complimentaryReason:B,paymentMethod:"cash",paymentStatus:"completed",status:"completed",invoiceNumber:f};console.log(" Saving web order to CounterOrder collection (without invoice):",Qe),console.log(" Invoice number being saved:",f),console.log(" CRITICAL DEBUG - Category being saved:",{selectedCategory:r.selectedCategory,categoryName:(X=r.selectedCategory)==null?void 0:X.name,finalCategoryName:((se=r.selectedCategory)==null?void 0:se.name)||"Self Service"});const ht=await Qt.createOrder(Qe);console.log(" Web order saved to database successfully:",ht),console.log(" Saved order invoice number:",((J=ht==null?void 0:ht.order)==null?void 0:J.invoiceNumber)||(ht==null?void 0:ht.invoiceNumber));const Pt=((Ne=ht==null?void 0:ht.order)==null?void 0:Ne.invoiceNumber)||(ht==null?void 0:ht.invoiceNumber),Rt=((Ge=ht==null?void 0:ht.order)==null?void 0:Ge.billNumber)||(ht==null?void 0:ht.billNumber);if(console.log(" BACKEND RESPONSE DEBUG - All returned fields:",{orderKeys:Object.keys((ht==null?void 0:ht.order)||{}),fullOrder:ht==null?void 0:ht.order,hasInvoiceNumber:!!Pt,hasBillNumber:!!Rt,returnedInvoiceNumber:Pt,returnedBillNumber:Rt}),!Pt&&!Rt&&(console.error(" CRITICAL: Backend did not save invoice/bill number!"),console.error(" Sent:",Qe.invoiceNumber,"Got back:",Pt),console.error(" This is why sales report shows ORDER-xxxxx instead of BILL-xxx"),console.log(" WORKAROUND: Invoice number is embedded in customerName field for sales report")),r.selectedTable)try{console.log(` Freeing up table: ${r.selectedTable.tableNumber||r.selectedTable.number}`),await Qt.request(`/table/${r.selectedTable._id||r.selectedTable.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Table freed successfully")}catch(Et){console.error(" Failed to free table:",Et)}}}catch(tt){if(console.error(" Failed to save order:",tt),console.error(" Error details:",{message:tt.message,stack:tt.stack}),r.existingOrderIds&&r.existingOrderIds.length>0){console.log(" Attempting emergency fallback KOT status updates due to order save failure...");try{const $e=r.existingOrderIds.map(async Ze=>{try{console.log(" Emergency: Updating KOT with discount info and marking as consolidated:",Ze);const Oe=d.reduce((Pt,Rt)=>Pt+Rt.price*Rt.quantity,0),Qe=Oe-z(),ht=await Qt.request(`/counter-order/orders/${Ze}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"consolidated",status:"consolidated",invoiceNumber:r.billNumber||r.invoiceNumber,totalAmount:Qe,grandTotal:Qe,subtotal:Oe,discountAmount:z(),discount:T?{type:T.type,value:T.value,amount:z(),remark:T.remark}:null,isPartOfComprehensiveBill:!0})});return console.log(" Emergency fallback KOT update with discount and consolidated status successful:",Ze,ht),ht}catch(Oe){return console.error(" Emergency fallback KOT update failed:",Ze,Oe),null}});await Promise.all($e),console.log(" Emergency fallback KOT updates with discount and consolidated status completed")}catch($e){console.error(" Emergency fallback also failed:",$e)}}}console.log(" handleDone() completing - navigating back to menu with refresh flags"),console.log(" Navigation state:",{refreshTables:!0,refreshKOTs:!0}),e("/counter/menu",{state:{customerName:"Walk-in Customer",phoneNumber:"0000000000",selectedBranch:r.selectedBranch,selectedCategory:r.selectedCategory,selectedTable:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[],refreshTables:!0,refreshKOTs:!0}})},I=async()=>{r.isKOTOrder||r.existingOrderId?console.log(" KOT order canceled - keeping current invoice number available:",r.invoiceNumber):console.log(" Order canceled - next order will generate new bill number when needed"),e("/counter/menu",{state:{customerName:"Walk-in Customer",phoneNumber:"0000000000",selectedBranch:r.selectedBranch,selectedCategory:r.selectedCategory,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,minute:"2-digit"}),cartItems:[],refreshTables:!0,refreshKOTs:!0}})},R=async()=>{var K,ue,ye;if(!a){i(!0),l(null);try{const fe=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),Xe=d.reduce((ne,Ae)=>ne+Ae.price*Ae.quantity,0),Ce=Xe-z(),Le={selectedBranch:r.selectedBranch,selectedTable:r.selectedTable,selectedCategory:r.selectedCategory,invoiceNumber:r.billNumber||r.invoiceNumber,billNumber:r.billNumber||r.invoiceNumber,date:r.date,time:r.time,customerName:r.customerName,phoneNumber:r.phoneNumber,cartItems:d,subtotal:Xe,total:Ce,discountAmount:z(),discountRemark:(T==null?void 0:T.remark)||"",discount:T,paymentMethod:"Pending",amountReceived:0,change:0,isComprehensiveBill:r.isComprehensiveBill,kotNumbers:r.kotNumbers};console.log(" BillGeneration handlePrint - Sending printData to thermal printer:",{selectedTable:Le.selectedTable,selectedCategory:Le.selectedCategory,hasTable:!!((K=Le.selectedTable)!=null&&K.tableNumber||(ue=Le.selectedTable)!=null&&ue.number),categoryName:(ye=Le.selectedCategory)==null?void 0:ye.name,discountAmount:Le.discountAmount,appliedDiscount:Le.discount,invoiceNumber:Le.invoiceNumber,billNumber:Le.billNumber,orderDataBillNumber:r.billNumber,orderDataInvoiceNumber:r.invoiceNumber});try{const ne={method:"network",printerIP:fe.ip||"192.168.1.100",port:fe.port||9100},Ae=await Promise.race([ji.printBill(Le,ne),new Promise((Ve,te)=>setTimeout(()=>te(new Error("Print operation timed out after 5 seconds")),5e3))]);if(Ae&&Ae.method){const te={"popup-window":"Bill printed using browser (thermal printer not found)","current-window":"Bill printed using browser (thermal printer not found)","current-window-fallback":"Bill printed using browser (thermal printer not found)",network:"Bill printed to thermal printer successfully!",usb:"Bill printed to USB thermal printer successfully!"}[Ae.method]||"Bill printed successfully!";l({type:"success",message:te})}else l({type:"success",message:"Bill printed successfully!"});await U()}catch(ne){console.log("Thermal printing failed:",ne.message),l({type:"success",message:"Bill printed using browser fallback"}),await U()}setTimeout(()=>l(null),3e3)}catch(fe){console.error("Print error:",fe),l({type:"error",message:fe.message||"Failed to print bill. Please try again."}),setTimeout(()=>l(null),5e3)}finally{i(!1)}}},W=async()=>{var K,ue,ye;if(!a){i(!0);try{const fe=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),Xe=d.reduce((Ae,Ve)=>Ae+Ve.price*Ve.quantity,0),Ce=z(),Le=Xe-Ce;console.log(" Enter Key Print - Discount Debug:",{subtotal:Xe,discountAmount:Ce,total:Le,appliedDiscount:T,discountState:{showDiscountPopup:v,discountType:b,discountValue:C,discountRemark:O}});const ne={selectedBranch:r.selectedBranch,selectedTable:r.selectedTable,selectedCategory:r.selectedCategory,invoiceNumber:r.billNumber||r.invoiceNumber,billNumber:r.billNumber||r.invoiceNumber,date:r.date,time:r.time,customerName:r.customerName,phoneNumber:r.phoneNumber,cartItems:d,subtotal:Xe,total:Le,discountAmount:Ce,discountRemark:(T==null?void 0:T.remark)||"",discount:T,paymentMethod:"Pending",amountReceived:0,change:0,isComprehensiveBill:r.isComprehensiveBill,kotNumbers:r.kotNumbers};console.log(" BillGeneration handleDirectPrint - Sending printData to thermal printer:",{selectedTable:ne.selectedTable,selectedCategory:ne.selectedCategory,hasTable:!!((K=ne.selectedTable)!=null&&K.tableNumber||(ue=ne.selectedTable)!=null&&ue.number),categoryName:(ye=ne.selectedCategory)==null?void 0:ye.name,discountAmount:ne.discountAmount,appliedDiscount:ne.discount,totalAfterDiscount:ne.total,invoiceNumber:ne.invoiceNumber,billNumber:ne.billNumber,orderDataBillNumber:r.billNumber,orderDataInvoiceNumber:r.invoiceNumber});try{const Ae={method:"network",printerIP:fe.ip||"192.168.1.100",port:fe.port||9100};await Promise.race([ji.printBill(ne,Ae),new Promise((Ve,te)=>setTimeout(()=>te(new Error("Thermal printer service timeout")),3e3))]),console.log(" Enter key: Bill printed via thermal printer service"),await U()}catch(Ae){console.log(" Enter key: Thermal printing failed:",Ae.message)}}catch(fe){console.error(" Enter key: All printing methods failed:",fe)}finally{i(!1)}}},Q=()=>{e("/counter/print-settings",{state:{returnTo:"/counter/bill-generation",orderData:r}})},ge=K=>{const ue=d.filter((ye,fe)=>fe!==K);u(ue),ue.length===0&&e("/counter/menu",{state:{customerName:r.customerName,phoneNumber:r.phoneNumber,selectedBranch:r.selectedBranch,invoiceNumber:r.invoiceNumber,date:r.date,time:r.time,cartItems:[]}})},q=(K,ue)=>{let ye=parseInt(ue);(isNaN(ye)||ye<0)&&(ye=0);const fe=[...d];ye===0?fe.splice(K,1):fe[K]={...fe[K],quantity:ye},u(fe),fe.length===0&&e("/counter/menu",{state:{customerName:r.customerName,phoneNumber:r.phoneNumber,selectedBranch:r.selectedBranch,invoiceNumber:r.invoiceNumber,date:r.date,time:r.time,cartItems:[]}})},Y=()=>{e("/counter/menu",{state:{...r,cartItems:d}})},z=()=>T?T.type==="percentage"?le*T.value/100:Math.min(T.value,le):0,ee=()=>le-z(),H=()=>{const K=parseFloat(C);if(isNaN(K)||K<=0){alert("Please enter a valid discount value");return}if(b==="percentage"&&K>100){alert("Percentage discount cannot be more than 100%");return}if(b==="amount"&&K>le){alert("Discount amount cannot be more than total amount");return}if(!O.trim()){alert("Please enter a remark for the discount");return}k({type:b,value:K,remark:O.trim()}),j(!1),E(""),S("")},re=()=>{k(null)},le=d.reduce((K,ue)=>K+ue.price*ue.quantity,0),pe=ee();return r?n.jsxs("div",{className:"counter-container",children:[n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Bill Summary"}),n.jsx("p",{className:"counter-subtitle",children:"Review your order details"})]}),n.jsxs("div",{style:{background:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Customer:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",r.customerName||"Walk-in Customer"]}),r.phoneNumber&&r.phoneNumber!=="0000000000"&&n.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#4a5568"},children:[" ",r.phoneNumber]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:r.selectedTable?"1fr 1fr 1fr":"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Invoice No:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:f||"Generating..."}),!f&&n.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.75rem",color:"#e53e3e"},children:"Debug: Generating invoice number..."})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Order Date & Time:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",r.date]}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c",fontSize:"0.875rem"},children:[" ",r.time]})]}),r.selectedTable&&n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Table:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",r.selectedTable.tableNumber||r.selectedTable.number]})]})]}),n.jsx("div",{style:{background:"#f0f9ff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #bfdbfe",marginBottom:"16px",fontSize:"0.875rem",color:"#1e40af"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("span",{children:" Bill Generated:"}),n.jsxs("span",{style:{fontWeight:"600"},children:[new Date().toLocaleDateString("en-IN")," at ",new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})]})]})}),r.isComprehensiveBill&&r.kotNumbers&&r.kotNumbers.length>1&&n.jsxs("div",{style:{background:"#f0f9ff",padding:"12px",borderRadius:"8px",border:"1px solid #0ea5e9",marginBottom:"16px"},children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#0369a1",fontWeight:"600"},children:" Comprehensive Bill - Combined KOTs:"}),n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#0369a1"},children:[r.kotNumbers.join(", ")," (",r.kotNumbers.length," KOTs combined)"]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{background:"white",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",background:"#f8fafc"},children:n.jsxs("h3",{style:{margin:"0",fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:["Order Items (",d.length,")"]})}),n.jsx("div",{style:{padding:"0"},children:d.map((K,ue)=>n.jsxs("div",{style:{padding:"12px 16px",borderBottom:ue<d.length-1?"1px solid #f1f5f9":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"600",color:"#1a202c"},children:K.name}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("button",{onClick:()=>q(ue,K.quantity-1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",width:"24px",height:"24px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),n.jsx("input",{type:"number",value:K.quantity,onChange:ye=>q(ue,parseInt(ye.target.value)||0),style:{width:"50px",padding:"4px 8px",border:"1px solid #d1d5db",borderRadius:"4px",textAlign:"center",fontSize:"14px"},min:"0"}),n.jsx("button",{onClick:()=>q(ue,K.quantity+1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",width:"24px",height:"24px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]}),n.jsxs("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["@ ",K.price]})]})]}),n.jsxs("div",{style:{textAlign:"right",marginLeft:"16px"},children:[n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:["",(K.price*K.quantity).toFixed(2)]}),n.jsx("button",{onClick:()=>ge(ue),style:{background:"none",border:"none",color:"#ef4444",fontSize:"0.75rem",cursor:"pointer",marginTop:"4px"},children:"Remove"})]})]},ue))})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),"background: '#f7fafc', padding: '20px', borderRadius: '12px', marginBottom: '24px', border: '2px dashed #e2e8f0' }}>",n.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[n.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",color:"#1a202c"},children:r.selectedBranch.name}),n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:r.selectedBranch.address}),n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:[" ",r.selectedBranch.phone]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:r.selectedTable?"1fr 1fr 1fr":"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Invoice No:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:f||"Generating..."}),!f&&n.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.75rem",color:"#e53e3e"},children:"Debug: Generating invoice number..."})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Order Date & Time:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",r.date]}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c",fontSize:"0.875rem"},children:[" ",r.time]})]}),r.selectedTable&&n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Table:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",r.selectedTable.tableNumber||r.selectedTable.number]})]})]}),n.jsx("div",{style:{background:"#f0f9ff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #bfdbfe",marginBottom:"16px",fontSize:"0.875rem",color:"#1e40af"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("span",{children:" Bill Generated:"}),n.jsxs("span",{style:{fontWeight:"600"},children:[new Date().toLocaleDateString("en-IN")," at ",new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})]})]})}),r.isComprehensiveBill&&r.kotNumbers&&r.kotNumbers.length>1&&n.jsxs("div",{style:{background:"#f0f9ff",padding:"12px",borderRadius:"8px",border:"1px solid #0ea5e9",marginBottom:"16px"},children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#0369a1",fontWeight:"600"},children:" Comprehensive Bill - Combined KOTs:"}),n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#0369a1"},children:[r.kotNumbers.join(", ")," (",r.kotNumbers.length," KOTs combined)"]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#1a202c"},children:"Order Items"}),d.length===0?n.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#718096",fontStyle:"italic"},children:"No items in cart"}):d.map((K,ue)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:ue<d.length-1?"1px solid #e2e8f0":"none"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"500",color:"#1a202c"},children:K.name}),n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:["",K.price.toFixed(2)," each"]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginRight:"16px"},children:[n.jsx("button",{onClick:()=>q(ue,K.quantity-1),style:{background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",fontWeight:"600",color:"#374151",transition:"all 0.2s"},onMouseOver:ye=>{ye.target.style.background="#e5e7eb",ye.target.style.borderColor="#9ca3af"},onMouseOut:ye=>{ye.target.style.background="#f3f4f6",ye.target.style.borderColor="#d1d5db"},title:"Decrease quantity",children:"-"}),n.jsx("div",{style:{minWidth:"40px",textAlign:"center",fontSize:"1rem",fontWeight:"600",color:"#1f2937",padding:"4px 8px",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"4px"},children:K.quantity}),n.jsx("button",{onClick:()=>q(ue,K.quantity+1),style:{background:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"6px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",fontWeight:"600",color:"white",transition:"all 0.2s"},onMouseOver:ye=>{ye.target.style.background="#2563eb",ye.target.style.borderColor="#2563eb"},onMouseOut:ye=>{ye.target.style.background="#3b82f6",ye.target.style.borderColor="#3b82f6"},title:"Increase quantity",children:"+"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("div",{style:{fontWeight:"600",color:"#1a202c",minWidth:"80px",textAlign:"right"},children:["",(K.price*K.quantity).toFixed(2)]}),n.jsx("button",{onClick:()=>ge(ue),style:{background:"#dc2626",color:"white",border:"none",borderRadius:"6px",padding:"6px 10px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},onMouseOver:ye=>ye.target.style.background="#b91c1c",onMouseOut:ye=>ye.target.style.background="#dc2626",title:"Remove this item completely",children:" Remove"})]})]},ue))]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.1rem",fontWeight:"500",color:"#4a5568",marginBottom:"8px"},children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["",le.toFixed(2)]})]}),T&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1rem",color:"#e53e3e",marginBottom:"4px"},children:[n.jsxs("span",{children:["Discount (",T.type==="percentage"?`${T.value}%`:`${T.value}`,"):"]}),n.jsxs("span",{children:["-",z().toFixed(2)]})]}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"#718096",fontStyle:"italic",marginBottom:"8px",textAlign:"right"},children:["Reason: ",T.remark]})]}),n.jsx("hr",{style:{border:"none",borderTop:"2px solid #1a202c",margin:"12px 0"}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.5rem",fontWeight:"700",color:"#1a202c"},children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["",pe.toFixed(2)]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",justifyContent:"center"},children:[n.jsx("button",{onClick:()=>j(!0),style:{background:T?"#f59e0b":"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:K=>{K.target.style.background=T?"#d97706":"#059669"},onMouseOut:K=>{K.target.style.background=T?"#f59e0b":"#10b981"},children:T?" Edit Discount":" Add Discount"}),T&&n.jsx("button",{onClick:re,style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:K=>K.target.style.background="#b91c1c",onMouseOut:K=>K.target.style.background="#dc2626",children:" Remove Discount"})]})]}),n.jsxs("div",{style:{background:D?"#fef3c7":"#f8fafc",padding:"16px",borderRadius:"8px",border:`2px solid ${D?"#f59e0b":"#e2e8f0"}`,marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:D?"12px":"0"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",color:D?"#92400e":"#374151"},children:[n.jsx("input",{type:"checkbox",checked:D,onChange:K=>{K.target.checked?A(!0):(F(!1),M(""))},style:{width:"18px",height:"18px",cursor:"pointer"}})," Complimentary Bill"]}),n.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"(Alt+C)"})]}),D&&B&&n.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",fontStyle:"italic",background:"#fffbeb",padding:"8px 12px",borderRadius:"6px",border:"1px solid #fbbf24"},children:[n.jsx("strong",{children:"Reason:"})," ",B]})]}),s&&n.jsx("div",{style:{background:s.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${s.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"16px",textAlign:"center"},children:n.jsxs("div",{style:{color:s.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[s.type==="success"?"":""," ",s.message]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 2fr",gap:"12px",marginTop:"24px"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:Y,style:{padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},children:" Back"}),n.jsx("button",{className:"counter-button-secondary",onClick:I,style:{background:"#dc2626",borderColor:"#dc2626",color:"white",padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},title:"Cancel this order and start fresh",children:" Cancel Order"}),n.jsx("button",{className:"counter-button-secondary",onClick:R,disabled:a,style:{opacity:a?.6:1,cursor:a?"not-allowed":"pointer",padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},title:"Print bill to thermal printer (Press Enter)",children:a?" Printing...":" Print Bill"}),n.jsx("button",{className:"counter-button-secondary",onClick:Q,style:{padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},title:"Configure thermal printer settings",children:" Settings"})]})]}),v&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"450px",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onKeyDown:K=>{K.key==="Enter"?(K.preventDefault(),console.log(" Enter pressed in discount popup - applying discount"),H()):K.key==="Escape"&&(K.preventDefault(),console.log(" Escape pressed in discount popup - closing"),j(!1),E(""),S(""))},tabIndex:0,children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",color:"#1f2937",fontWeight:"600"},children:" Add Discount"}),n.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",marginBottom:"24px"},children:[n.jsxs("p",{style:{margin:"0 0 8px 0",fontSize:"0.875rem",color:"#6b7280"},children:["Current Subtotal: ",le.toFixed(2)]}),T&&n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#e53e3e"},children:["Current Discount: ",T.type==="percentage"?`${T.value}%`:`${T.value}`," (",T.remark,")"]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Discount Type:"}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>y("percentage"),style:{flex:1,padding:"10px",border:`2px solid ${b==="percentage"?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",background:b==="percentage"?"#eff6ff":"white",color:b==="percentage"?"#2563eb":"#6b7280",fontWeight:"600",cursor:"pointer"},children:" Percentage (%)"}),n.jsx("button",{onClick:()=>y("amount"),style:{flex:1,padding:"10px",border:`2px solid ${b==="amount"?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",background:b==="amount"?"#eff6ff":"white",color:b==="amount"?"#2563eb":"#6b7280",fontWeight:"600",cursor:"pointer"},children:" Amount ()"})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:["Discount ",b==="percentage"?"Percentage":"Amount",":"]}),n.jsx("input",{type:"number",min:"0",max:b==="percentage"?"100":le,step:b==="percentage"?"1":"0.01",value:C,onChange:K=>E(K.target.value),onKeyDown:K=>{if(K.key==="Enter"&&(K.preventDefault(),C)){const ue=document.querySelector('input[placeholder*="Dussehra Sale"]');ue&&ue.focus()}},placeholder:b==="percentage"?"Enter percentage (e.g., 10)":"Enter amount (e.g., 50.00)",style:{width:"100%",padding:"12px",fontSize:"1.1rem",border:"2px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontWeight:"600"}}),C&&n.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.875rem",color:"#059669",textAlign:"center"},children:["Discount Amount: ",b==="percentage"?(le*parseFloat(C||0)/100).toFixed(2):parseFloat(C||0).toFixed(2)]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Remark (Required):"}),n.jsx("input",{type:"text",value:O,onChange:K=>S(K.target.value),onKeyDown:K=>{K.key==="Enter"&&(K.preventDefault(),C&&O.trim()&&(console.log(" Enter pressed in remark field - applying discount"),H()))},placeholder:"e.g., Dussehra Sale, Customer Loyalty, etc.",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"2px solid #d1d5db",borderRadius:"8px"}})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>{j(!1),E(""),S("")},style:{flex:1,background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),n.jsx("button",{onClick:H,style:{flex:1,background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Apply Discount"})]})]})}),L&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",padding:"32px",borderRadius:"12px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[n.jsx("h2",{style:{margin:"0 0 24px 0",fontSize:"1.5rem",fontWeight:"700",color:"#1a202c",textAlign:"center"},children:" Mark as Complimentary"}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"Reason for Complimentary:"}),n.jsx("input",{type:"text",value:B,onChange:K=>M(K.target.value),onKeyDown:K=>{K.key==="Enter"&&B.trim()&&(F(!0),A(!1)),K.key==="Escape"&&(A(!1),M(""))},placeholder:"e.g., Owner's friend, Staff meal, Promotional offer, etc.",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"2px solid #d1d5db",borderRadius:"8px"},autoFocus:!0}),n.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"This bill will not appear in sales reports"})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{onClick:()=>{A(!1),M("")},style:{flex:1,background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),n.jsx("button",{onClick:()=>{B.trim()&&(F(!0),A(!1))},disabled:!B.trim(),style:{flex:1,background:B.trim()?"#f59e0b":"#d1d5db",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:B.trim()?"pointer":"not-allowed"},children:"Mark Complimentary"})]})]})})]}):n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("p",{children:"Order data not found. Please start over."}),n.jsx("button",{className:"counter-button",onClick:()=>e("/counter/menu"),children:"Go Back"})]})})})},ghe=()=>{const e=An(),r=pa().state,[a,i]=N.useState("cash"),[s,l]=N.useState(""),[d,u]=N.useState(!1),[f,p]=N.useState("");if(N.useEffect(()=>{if(r){const S=r.totalAmount||0,T=S*.05,k=S+T;l(k.toFixed(2))}},[r]),!r)return n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("p",{children:"Order data not found. Please start over."}),n.jsx("button",{className:"counter-button",onClick:()=>e("/counter/bill-generation"),children:"Go Back"})]})})});const m=r.totalAmount||0,x=m*.05,v=m+x,j=a==="cash"&&s?Math.max(0,parseFloat(s)-v):0,b=S=>{i(S),l(v.toFixed(2)),p("")},y=S=>{l(S),p("")},C=()=>{if(a==="cash"){const S=parseFloat(s);if(!s||isNaN(S))return p("Amount received is required for cash payments"),!1;if(S<v)return p("Amount received is less than total amount"),!1}if(a==="card"||a==="upi"){const S=parseFloat(s);(!S||S!==v)&&l(v.toFixed(2))}return!0},E=async()=>{var S,T,k;if(C()){u(!0),p("");try{const D={customerName:r.customerName,phoneNumber:r.phoneNumber,branchId:r.selectedBranch._id,invoiceNumber:r.invoiceNumber,invoiceId:r.invoiceId,items:r.cartItems.map(R=>({menuItemId:R._id,name:R.name,price:R.price,quantity:R.quantity,total:R.price*R.quantity})),subtotal:m,tax:x,total:v,paymentMethod:a,amountReceived:a==="cash"?parseFloat(s):v,change:j,status:"completed",orderDate:new Date().toISOString(),counterUserId:localStorage.getItem("counterUserId")},F=R=>Promise.race([Qt.createOrder(R),new Promise((W,Q)=>setTimeout(()=>Q(new Error("Order creation timed out")),1e4))]),B=R=>Promise.race([Qt.createBill(R),new Promise((W,Q)=>setTimeout(()=>Q(new Error("Bill creation timed out")),1e4))]),M=R=>Promise.race([Qt.processPayment(R),new Promise((W,Q)=>setTimeout(()=>Q(new Error("Payment processing timed out")),1e4))]),L=await F(D);console.log("Order created:",L);const A={orderId:((S=L.order)==null?void 0:S._id)||L._id,...D},U=await B(A);console.log("Bill created:",U);const P={orderId:((T=L.order)==null?void 0:T._id)||L._id,billId:((k=U.bill)==null?void 0:k._id)||U._id,amount:v,paymentMethod:a,amountReceived:a==="cash"?parseFloat(s):v,change:j,status:"completed",paymentDate:new Date().toISOString()},I=await M(P);console.log("Payment processed:",I),setTimeout(()=>{var R,W,Q;e("/counter/payment-success",{state:{...r,orderId:((R=L.order)==null?void 0:R._id)||L._id,billId:((W=U.bill)==null?void 0:W._id)||U._id,paymentId:((Q=I.payment)==null?void 0:Q._id)||I._id,paymentMethod:a,amountReceived:a==="cash"?parseFloat(s):v,change:j,total:v}})},100)}catch(D){console.error("Error processing payment:",D),p(D.message||"Failed to process payment. Please try again.")}finally{u(!1)}}},O=()=>{e("/counter/bill-generation",{state:r})};return n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Payment"}),n.jsx("p",{className:"counter-subtitle",children:"Process customer payment"})]}),n.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem"},children:"Order Summary"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["",m.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{children:"Tax (5%):"}),n.jsxs("span",{children:["",x.toFixed(2)]})]}),n.jsx("hr",{style:{margin:"12px 0",border:"none",borderTop:"2px solid #1a202c"}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.25rem",fontWeight:"700"},children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["",v.toFixed(2)]})]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1rem"},children:"Payment Method"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[n.jsxs("button",{className:`counter-item ${a==="cash"?"selected":""}`,onClick:()=>b("cash"),style:{padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsx("div",{style:{fontWeight:"600"},children:"Cash"})]}),n.jsxs("button",{className:`counter-item ${a==="card"?"selected":""}`,onClick:()=>b("card"),style:{padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsx("div",{style:{fontWeight:"600"},children:"Card"})]}),n.jsxs("button",{className:`counter-item ${a==="upi"?"selected":""}`,onClick:()=>b("upi"),style:{padding:"16px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsx("div",{style:{fontWeight:"600"},children:"UPI"})]})]})]}),a==="cash"&&n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("div",{className:"counter-form-group",children:[n.jsx("label",{className:"counter-label",children:"Amount Received * (Auto-filled)"}),n.jsx("input",{type:"number",className:"counter-input",placeholder:"Amount auto-filled with total",value:s,onChange:S=>y(S.target.value),min:v,step:"0.01"}),n.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px",fontStyle:"italic"},children:[" Amount is automatically filled with the total (",v.toFixed(2),"). You can adjust if needed."]})]}),s&&!isNaN(parseFloat(s))&&n.jsxs("div",{style:{background:j>0?"#f0fff4":"#fff5f5",padding:"12px",borderRadius:"8px",border:`1px solid ${j>0?"#68d391":"#fc8181"}`},children:[n.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px"},children:["Change to Return: ",j.toFixed(2)]}),j<0&&n.jsx("div",{style:{color:"#e53e3e",fontSize:"0.875rem"},children:"Insufficient amount received"})]})]}),(a==="card"||a==="upi")&&n.jsxs("div",{style:{background:"#e6fffa",padding:"16px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #81e6d9"},children:[n.jsx("div",{style:{fontWeight:"600",marginBottom:"8px"},children:a==="card"?"Card Payment":"UPI Payment"}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"#2d3748"},children:["Amount: ",v.toFixed(2)]}),n.jsxs("div",{style:{fontSize:"0.875rem",color:"#2d3748",marginTop:"4px"},children:["Please complete the payment on the ",a==="card"?"card terminal":"UPI app"]})]}),f&&n.jsx("div",{className:"counter-error",style:{marginBottom:"24px"},children:f}),n.jsxs("div",{style:{display:"flex",gap:"16px"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:O,disabled:d,style:{flex:1},children:" Back"}),n.jsx("button",{className:"counter-button",onClick:E,disabled:d,style:{flex:2},children:d?n.jsx("div",{className:"counter-spinner",style:{width:"20px",height:"20px"}}):"Complete Payment"})]})]})})};class xhe{constructor(){this.storageKey="counter_orders"}getAllOrders(){try{const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading orders from localStorage:",t),[]}}getOrdersByBranch(t){return this.getAllOrders().filter(a=>a.branchId===t)}saveOrder(t){try{const r=this.getAllOrders(),a={_id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,invoiceNumber:t.invoiceNumber,branchId:t.selectedBranch._id,branchName:t.selectedBranch.name,customerName:t.customerName,phoneNumber:t.phoneNumber,orderDate:new Date().toISOString(),createdAt:new Date().toISOString(),items:t.cartItems.map(i=>({name:i.name,price:i.price,quantity:i.quantity,total:i.price*i.quantity})),total:t.totalAmount||t.total||0,status:"completed",paymentMethod:t.paymentMethod||"cash",paymentStatus:"paid",date:t.date,time:t.time,amountReceived:t.amountReceived||0,change:t.change||0};return r.push(a),r.sort((i,s)=>new Date(s.orderDate)-new Date(i.orderDate)),localStorage.setItem(this.storageKey,JSON.stringify(r)),console.log(" Order saved successfully:",a.invoiceNumber),a}catch(r){throw console.error("Error saving order:",r),r}}updateOrderStatus(t,r){try{const a=this.getAllOrders(),i=a.findIndex(s=>s._id===t);if(i!==-1)return a[i].status=r,a[i].updatedAt=new Date().toISOString(),localStorage.setItem(this.storageKey,JSON.stringify(a)),a[i];throw new Error("Order not found")}catch(a){throw console.error("Error updating order status:",a),a}}deleteOrder(t){try{const a=this.getAllOrders().filter(i=>i._id!==t);return localStorage.setItem(this.storageKey,JSON.stringify(a)),!0}catch(r){throw console.error("Error deleting order:",r),r}}clearAllOrders(){try{return localStorage.removeItem(this.storageKey),console.log(" All orders cleared"),!0}catch(t){throw console.error("Error clearing orders:",t),t}}getOrderStats(t=null){const r=t?this.getOrdersByBranch(t):this.getAllOrders(),a=r.length,i=r.filter(d=>d.status==="completed").length,s=r.filter(d=>d.status==="pending").length,l=r.reduce((d,u)=>d+(u.total||0),0);return{totalOrders:a,completedOrders:i,pendingOrders:s,totalSales:l,averageOrderValue:a>0?l/a:0}}exportOrders(){const t=this.getAllOrders(),r=JSON.stringify(t,null,2),a=new Blob([r],{type:"application/json"}),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.download=`counter_orders_${new Date().toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(i)}}const yhe=new xhe,vhe=()=>{const e=An(),r=pa().state,[a,i]=N.useState(!1),[s,l]=N.useState(null);if(N.useEffect(()=>{if(r)try{const x=yhe.saveOrder(r);console.log("Order saved to storage:",x.invoiceNumber)}catch(x){console.error("Failed to save order:",x)}const m=setTimeout(()=>{e("/counter/branch-selection")},1e4);return()=>clearTimeout(m)},[e,r]),!r)return n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("p",{children:"Payment data not found. Please start over."}),n.jsx("button",{className:"counter-button",onClick:()=>e("/counter/branch-selection"),children:"New Order"})]})})});const d=()=>{e("/counter/branch-selection")},u=async()=>{if(!a){i(!0),l(null);try{const m=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),x={method:m.method||"auto",printerIP:m.ip||"192.168.1.100",port:m.port||9100},v=await Promise.race([ji.printReceipt(r,x),new Promise((j,b)=>setTimeout(()=>b(new Error("Print operation timed out after 5 seconds")),5e3))]);if(v&&v.method){const b={"popup-window":"Receipt printed using browser (thermal printer not found)","current-window":"Receipt printed using browser (thermal printer not found)","current-window-fallback":"Receipt printed using browser (thermal printer not found)",network:"Receipt printed to thermal printer successfully!",usb:"Receipt printed to USB thermal printer successfully!"}[v.method]||"Receipt printed successfully!";l({type:"success",message:b})}else l({type:"success",message:"Receipt printed successfully!"});setTimeout(()=>l(null),3e3)}catch(m){console.error("Print error:",m),l({type:"error",message:m.message||"Failed to print receipt. Please try again."}),setTimeout(()=>l(null),5e3)}finally{i(!1)}}},f=()=>{e("/counter/print-settings",{state:{returnTo:"/counter/payment-success",paymentData:r}})},p=()=>{e("/counter/orders")};return n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("div",{style:{fontSize:"4rem",color:"#48bb78",marginBottom:"16px",textAlign:"center"},children:""}),n.jsx("h1",{className:"counter-title",style:{color:"#48bb78"},children:"Payment Successful!"}),n.jsx("p",{className:"counter-subtitle",children:"Order has been processed successfully"})]}),n.jsxs("div",{style:{background:"#f7fafc",padding:"24px",borderRadius:"12px",marginBottom:"24px",border:"2px solid #48bb78"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[n.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",color:"#1a202c"},children:r.selectedBranch.name}),n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:r.selectedBranch.address}),n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:[" ",r.selectedBranch.phone]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Invoice No:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:r.invoiceNumber})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Date & Time:"}),n.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[r.date," ",r.time]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Customer:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:r.customerName})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Phone:"}),n.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:r.phoneNumber})]})]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#1a202c"},children:"Items Ordered"}),r.cartItems.map((m,x)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:x<r.cartItems.length-1?"1px solid #e2e8f0":"none"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("p",{style:{margin:"0",fontWeight:"500",color:"#1a202c"},children:m.name}),n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:["",m.price.toFixed(2),"  ",m.quantity]})]}),n.jsxs("div",{style:{fontWeight:"600",color:"#1a202c"},children:["",(m.price*m.quantity).toFixed(2)]})]},x))]}),n.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{color:"#718096"},children:"Subtotal:"}),n.jsxs("span",{style:{fontWeight:"500"},children:["",(r.total-r.total*.05).toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{color:"#718096"},children:"Tax (5%):"}),n.jsxs("span",{style:{fontWeight:"500"},children:["",(r.total*.05).toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("span",{style:{color:"#718096"},children:"Payment Method:"}),n.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize"},children:r.paymentMethod})]}),r.paymentMethod==="cash"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsx("span",{style:{color:"#718096"},children:"Amount Received:"}),n.jsxs("span",{style:{fontWeight:"500"},children:["",r.amountReceived.toFixed(2)]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[n.jsx("span",{style:{color:"#718096"},children:"Change:"}),n.jsxs("span",{style:{fontWeight:"500"},children:["",r.change.toFixed(2)]})]})]}),n.jsx("hr",{style:{border:"none",borderTop:"2px solid #1a202c",margin:"12px 0"}}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.25rem",fontWeight:"700",color:"#1a202c"},children:[n.jsx("span",{children:"Total Paid:"}),n.jsxs("span",{children:["",r.total.toFixed(2)]})]})]}),n.jsxs("div",{style:{background:"#f0fff4",padding:"12px",borderRadius:"8px",border:"1px solid #68d391",textAlign:"center"},children:[n.jsx("div",{style:{color:"#22543d",fontWeight:"600"},children:" Payment Completed Successfully"}),n.jsx("div",{style:{color:"#2f855a",fontSize:"0.875rem",marginTop:"4px"},children:"Thank you for your business!"})]})]}),s&&n.jsx("div",{style:{background:s.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${s.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"16px",textAlign:"center"},children:n.jsxs("div",{style:{color:s.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[s.type==="success"?"":""," ",s.message]})}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",marginBottom:"20px"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:u,disabled:a,style:{opacity:a?.6:1,cursor:a?"not-allowed":"pointer"},title:"Print receipt to thermal printer",children:a?" Printing...":" Print Receipt"}),n.jsx("button",{className:"counter-button-secondary",onClick:f,title:"Configure thermal printer settings",children:" Print Settings"}),n.jsx("button",{className:"counter-button-secondary",onClick:p,children:" View Orders"}),n.jsx("button",{className:"counter-button",onClick:d,children:" New Order"})]}),n.jsx("div",{style:{textAlign:"center",fontSize:"0.875rem",color:"#718096",fontStyle:"italic"},children:"Automatically redirecting to new order in 10 seconds..."})]})})},bhe=()=>{const e=An(),[t,r]=N.useState([]),[a,i]=N.useState(!0),[s,l]=N.useState(null),[d,u]=N.useState(null);N.useEffect(()=>{const j=localStorage.getItem("selectedBranch");if(j){const b=JSON.parse(j);u(b),f(b._id)}else e("/counter/branch-selection")},[e]);const f=async j=>{try{i(!0),l(null);const b=await Qt.getOrders(j),C=(b.orders||b.data||b||[]).sort((E,O)=>new Date(O.orderDate||O.createdAt)-new Date(E.orderDate||E.createdAt));r(C)}catch(b){console.error("Error loading orders:",b),l("Failed to load orders. Please try again.")}finally{i(!1)}},p=()=>{e("/counter/branch-selection")},m=()=>{e("/counter/branch-selection")},x=j=>{try{const b=new Date(j);return b.toLocaleDateString("en-IN")+" "+b.toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}catch{return j}},v=j=>{switch(j==null?void 0:j.toLowerCase()){case"completed":return"#48bb78";case"pending":return"#ed8936";case"cancelled":return"#f56565";default:return"#718096"}};return a?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-loading",children:[n.jsx("div",{className:"counter-spinner"}),n.jsx("p",{children:"Loading orders..."})]})})}):s?n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("h3",{children:"Error"}),n.jsx("p",{children:s}),n.jsx("button",{className:"counter-button",onClick:()=>d&&f(d._id),children:"Retry"})]})})}):n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Order History"}),n.jsxs("p",{className:"counter-subtitle",children:[d==null?void 0:d.name," - Recent Orders"]})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"24px",justifyContent:"center"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:m,style:{flex:1,maxWidth:"200px"},children:" Back"}),n.jsx("button",{className:"counter-button",onClick:p,style:{flex:1,maxWidth:"200px"},children:" New Order"})]}),t.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#718096"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),n.jsx("h3",{style:{margin:"0 0 8px 0"},children:"No Orders Found"}),n.jsx("p",{style:{margin:"0"},children:"No orders have been placed yet."})]}):n.jsx("div",{style:{display:"grid",gap:"16px",maxHeight:"60vh",overflowY:"auto"},children:t.map((j,b)=>n.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"12px",padding:"20px",transition:"all 0.2s"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"1.1rem",color:"#1a202c"},children:j.invoiceNumber||`Order #${b+1}`}),n.jsxs("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:[j.customerName,"  ",j.phoneNumber]}),n.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#4a5568"},children:x(j.orderDate||j.createdAt)})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsx("div",{style:{background:v(j.status),color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",marginBottom:"8px"},children:j.status||"Completed"}),n.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#1a202c"},children:["",(j.total||0).toFixed(2)]})]})]}),j.items&&j.items.length>0&&n.jsxs("div",{style:{background:"#f7fafc",padding:"12px",borderRadius:"8px",marginBottom:"12px"},children:[n.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"0.875rem",color:"#4a5568",fontWeight:"600"},children:["Items (",j.items.length,")"]}),n.jsxs("div",{style:{display:"grid",gap:"4px"},children:[j.items.slice(0,3).map((y,C)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[n.jsxs("span",{style:{color:"#2d3748"},children:[y.name,"  ",y.quantity]}),n.jsxs("span",{style:{color:"#1a202c",fontWeight:"500"},children:["",(y.total||y.price*y.quantity).toFixed(2)]})]},C)),j.items.length>3&&n.jsxs("div",{style:{fontSize:"0.75rem",color:"#718096",fontStyle:"italic"},children:["+",j.items.length-3," more items"]})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.875rem",color:"#4a5568"},children:[n.jsxs("span",{children:["Payment: ",j.paymentMethod?n.jsx("span",{style:{textTransform:"capitalize",fontWeight:"500"},children:j.paymentMethod}):"Cash"]}),j.paymentMethod==="cash"&&j.change>0&&n.jsxs("span",{children:["Change: ",j.change.toFixed(2)]})]})]},j._id||b))})]})})},jhe=()=>{const e=An(),t=pa(),{returnTo:r,paymentData:a,orderData:i}=t.state||{},[s,l]=N.useState({method:"auto",ip:"192.168.1.100",port:"9100",devicePath:"/dev/usb/lp0"}),[d,u]=N.useState(!1),[f,p]=N.useState([]),[m,x]=N.useState(!1),[v,j]=N.useState(null);N.useEffect(()=>{const O=localStorage.getItem("thermalPrinterSettings");O&&l({...s,...JSON.parse(O)})},[]);const b=()=>{localStorage.setItem("thermalPrinterSettings",JSON.stringify(s)),alert("Printer settings saved successfully!"),r?r==="/counter/bill-generation"&&i?e(r,{state:i}):e(r,{state:{paymentData:a}}):e("/counter/branch-selection")},y=async()=>{u(!0),p([]);try{const T=await(await fetch("https://hotelvirat.com/api/v1/hotel/print-thermal/discover")).json();T.success?(p(T.printers),T.printers.length===0&&alert("No thermal printers found on the network. Make sure your thermal printer is connected to the same network and powered on.")):alert("Failed to discover printers: "+T.message)}catch(O){console.error("Discovery error:",O),alert("Failed to discover printers. Make sure the backend server is running on port 9000.")}finally{u(!1)}},C=async()=>{x(!0),j(null);try{const O={selectedBranch:{name:"Test Restaurant",address:"123 Test Street, Test City",phone:"123-456-7890"},invoiceNumber:"TEST-"+Date.now(),date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),customerName:"Test Customer",phoneNumber:"1234567890",cartItems:[{name:"Test Item 1",price:10,quantity:2},{name:"Test Item 2",price:15.5,quantity:1}],total:35.5,paymentMethod:"cash",amountReceived:40,change:4.5};await ji.printReceipt(O,{method:s.method,printerIP:s.ip,port:parseInt(s.port)}),j({type:"success",message:"Test receipt printed successfully!"})}catch(O){console.error("Test print error:",O),j({type:"error",message:O.message})}finally{x(!1)}},E=O=>{l({...s,ip:O.ip,port:O.port.toString(),method:"network"})};return n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Thermal Printer Settings"}),n.jsx("p",{className:"counter-subtitle",children:"Configure your thermal printer for receipt printing"})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{className:"counter-label",children:"Print Method"}),n.jsxs("select",{className:"counter-input",value:s.method,onChange:O=>l({...s,method:O.target.value}),children:[n.jsx("option",{value:"auto",children:"Auto (Try all methods)"}),n.jsx("option",{value:"network",children:"Network Printer"}),n.jsx("option",{value:"serial",children:"USB/Serial Printer"}),n.jsx("option",{value:"browser",children:"Browser Print (Fallback)"})]})]}),(s.method==="network"||s.method==="auto")&&n.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[n.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1rem"},children:"Network Printer Settings"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"16px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{className:"counter-label",children:"Printer IP Address"}),n.jsx("input",{type:"text",className:"counter-input",value:s.ip,onChange:O=>l({...s,ip:O.target.value}),placeholder:"192.168.1.100"}),n.jsx("p",{style:{fontSize:"0.75rem",color:"#718096",margin:"4px 0 0 0"},children:"Enter your thermal printer's IP address. Leave as default (192.168.1.100) to skip network printing and use browser fallback."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"counter-label",children:"Port"}),n.jsx("input",{type:"number",className:"counter-input",value:s.port,onChange:O=>l({...s,port:O.target.value}),placeholder:"9100"})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:y,disabled:d,style:{flex:1},children:d?" Discovering...":" Discover Printers"}),n.jsx("button",{className:"counter-button-secondary",onClick:C,disabled:m,style:{flex:1},children:m?" Testing...":" Test Print"})]}),f.length>0&&n.jsxs("div",{children:[n.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"0.875rem",color:"#4a5568"},children:"Found Printers:"}),n.jsx("div",{style:{display:"grid",gap:"8px"},children:f.map((O,S)=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"white",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer"},onClick:()=>E(O),children:[n.jsxs("span",{style:{fontWeight:"500"},children:[O.ip,":",O.port]}),n.jsxs("span",{style:{fontSize:"0.75rem",color:"#718096"},children:[O.responseTime,"ms"]})]},S))})]})]}),(s.method==="serial"||s.method==="auto")&&n.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[n.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1rem"},children:"USB/Serial Printer Settings"}),n.jsxs("div",{children:[n.jsx("label",{className:"counter-label",children:"Device Path"}),n.jsx("input",{type:"text",className:"counter-input",value:s.devicePath,onChange:O=>l({...s,devicePath:O.target.value}),placeholder:"/dev/usb/lp0"}),n.jsx("p",{style:{fontSize:"0.75rem",color:"#718096",margin:"4px 0 0 0"},children:"Common paths: /dev/usb/lp0, /dev/ttyUSB0, COM1 (Windows)"})]})]}),v&&n.jsx("div",{style:{background:v.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${v.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"24px",textAlign:"center"},children:n.jsxs("div",{style:{color:v.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[v.type==="success"?"":""," ",v.message]})}),n.jsxs("div",{style:{background:"#e6fffa",padding:"16px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #81e6d9"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#234e52"},children:" Setup Instructions"}),n.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",color:"#2d3748",fontSize:"0.875rem"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Network Printer:"})," Connect your thermal printer to the same network and note its IP address"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"USB Printer:"})," Connect via USB and check device path in system settings"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Auto Mode:"})," Tries all methods automatically, recommended for most users"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Browser Fallback:"})," Uses regular browser printing with thermal-optimized formatting"]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"16px"},children:[n.jsx("button",{className:"counter-button-secondary",onClick:()=>e(r||"/counter/branch-selection",{state:r==="/counter/bill-generation"?i:{paymentData:a}}),style:{flex:1},children:" Cancel"}),n.jsx("button",{className:"counter-button",onClick:b,style:{flex:2},children:" Save Settings"})]})]})})},whe=()=>{const[e,t]=N.useState(!1),[r,a]=N.useState(null),i=async()=>{t(!0),a(null);try{const d={selectedBranch:{name:"Hotel Virat Test",address:"123 Test Street, Test City",phone:"123-456-7890"},invoiceNumber:"TEST-"+Date.now(),date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),customerName:"Test Customer",phoneNumber:"1234567890",cartItems:[{name:"Test Item 1",price:10,quantity:2},{name:"Test Item 2",price:15.5,quantity:1}],total:35.5,paymentMethod:"cash",amountReceived:40,change:4.5};console.log(" Testing thermal printer with data:",d);const u=await ji.printReceipt(d,{method:"auto",printerIP:"192.168.1.100",port:9100});a({type:"success",message:"Test print successful!",details:u})}catch(d){console.error("Test print error:",d),a({type:"error",message:d.message,details:d})}finally{t(!1)}},s=async()=>{t(!0),a(null);try{const d={selectedBranch:{name:"Hotel Virat Test",address:"123 Test Street, Test City",phone:"123-456-7890"},invoiceNumber:"BILL-"+Date.now(),date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),customerName:"Test Customer",phoneNumber:"1234567890",cartItems:[{name:"Test Item 1",price:10,quantity:2},{name:"Test Item 2",price:15.5,quantity:1}],total:35.5};console.log(" Testing thermal bill with data:",d);const u=await ji.printBill(d,{method:"auto",printerIP:"192.168.1.100",port:9100});a({type:"success",message:"Test bill print successful!",details:u})}catch(d){console.error("Test bill error:",d),a({type:"error",message:d.message,details:d})}finally{t(!1)}},l=async()=>{t(!0),a(null);try{const d="https://hotelvirat.com/api/v1/hotel";console.log(" Testing endpoint:",`${d}/print-thermal/network`);const u=await fetch(`${d}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:"Test endpoint connection",printerIP:"192.168.1.100",port:9100})}),f=await u.json();u.ok?a({type:"success",message:"Endpoint accessible!",details:f}):a({type:"info",message:"Endpoint accessible (printer not found is expected)",details:f})}catch(d){console.error("Endpoint test error:",d),a({type:"error",message:"Endpoint not accessible: "+d.message,details:d})}finally{t(!1)}};return n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsxs("div",{className:"counter-header",children:[n.jsx("h1",{className:"counter-title",children:"Thermal Printer Test"}),n.jsx("p",{className:"counter-subtitle",children:"Test thermal printing functionality"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"24px"},children:[n.jsx("button",{className:"counter-button",onClick:l,disabled:e,children:e?" Testing...":" Test Endpoint"}),n.jsx("button",{className:"counter-button",onClick:s,disabled:e,children:e?" Testing...":" Test Bill"}),n.jsx("button",{className:"counter-button",onClick:i,disabled:e,children:e?" Testing...":" Test Receipt"})]}),n.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem"},children:"Environment Info"}),n.jsxs("p",{style:{margin:"0 0 8px 0",fontSize:"0.875rem"},children:[n.jsx("strong",{children:"Backend URL:"})," ","https://hotelvirat.com/api/v1/hotel"]}),n.jsxs("p",{style:{margin:"0 0 8px 0",fontSize:"0.875rem"},children:[n.jsx("strong",{children:"Print Endpoint:"})," ","https://hotelvirat.com/api/v1/hotel/print-thermal/network"]}),n.jsxs("p",{style:{margin:"0",fontSize:"0.875rem"},children:[n.jsx("strong",{children:"Web Serial Support:"})," ","serial"in navigator?" Supported":" Not Supported"]})]}),r&&n.jsxs("div",{style:{background:r.type==="success"?"#f0fff4":r.type==="info"?"#e6fffa":"#fed7d7",padding:"16px",borderRadius:"8px",border:`1px solid ${r.type==="success"?"#68d391":r.type==="info"?"#81e6d9":"#fc8181"}`,marginBottom:"24px"},children:[n.jsxs("div",{style:{color:r.type==="success"?"#22543d":r.type==="info"?"#234e52":"#742a2a",fontWeight:"600",marginBottom:"8px"},children:[r.type==="success"?"":r.type==="info"?"":""," ",r.message]}),r.details&&n.jsxs("details",{style:{fontSize:"0.875rem",color:"#4a5568"},children:[n.jsx("summary",{style:{cursor:"pointer",marginBottom:"8px"},children:"View Details"}),n.jsx("pre",{style:{background:"rgba(0,0,0,0.1)",padding:"8px",borderRadius:"4px",overflow:"auto",fontSize:"0.75rem"},children:JSON.stringify(r.details,null,2)})]})]}),n.jsxs("div",{style:{background:"#e6fffa",padding:"16px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #81e6d9"},children:[n.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#234e52"},children:" Test Instructions"}),n.jsxs("ol",{style:{margin:"0",paddingLeft:"20px",color:"#2d3748",fontSize:"0.875rem"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Test Endpoint:"})," Checks if backend API is accessible"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Test Bill:"})," Tests bill printing (before payment)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Test Receipt:"})," Tests receipt printing (after payment)"]})]})]}),n.jsx("div",{style:{textAlign:"center"},children:n.jsx("button",{className:"counter-button-secondary",onClick:()=>window.history.back(),children:" Back"})})]})})},She=()=>{var U;const e=An(),[t,r]=N.useState(null),[a,i]=N.useState("daily"),[s,l]=N.useState(!0),[d,u]=N.useState(null),[f,p]=N.useState({daily:null,weekly:null,monthly:null,all:null}),[m,x]=N.useState([]),[v,j]=N.useState(new Date().toISOString().split("T")[0]),[b,y]=N.useState(!1),[C,E]=N.useState(!1);N.useEffect(()=>{const P=localStorage.getItem("selectedBranch");if(P){const I=JSON.parse(P);r(I),O(I._id)}else e("/counter/branch-selection")},[e]);const O=async P=>{try{l(!0),u(null);let I=[];try{const W=await Qt.getOrders();let Q=[];W.success&&Array.isArray(W.data)?Q=W.data:W.orders&&Array.isArray(W.orders)?Q=W.orders:Array.isArray(W)&&(Q=W),P?I=Q.filter(ge=>{var Y,z;return(((Y=ge.branch)==null?void 0:Y.id)||((z=ge.branchId)==null?void 0:z._id)||ge.branchId)===P}):I=Q,console.log(" Loaded counter orders:",I.length)}catch(W){console.log(" Error loading orders from database:",W),u(`Failed to load orders: ${W.message}`);return}const R=I.map(W=>{var Q,ge,q;return{_id:W.id,invoiceNumber:(Q=W.invoice)!=null&&Q.invoiceNumber?`BILL-${W.invoice.invoiceNumber}`:W.invoiceNumber||"N/A",customerName:W.customerName||"Walk-in Customer",phoneNumber:W.phoneNumber||"0000000000",orderDate:W.createdAt,createdAt:W.createdAt,items:W.items||[],total:W.grandTotal||W.totalAmount||0,subtotal:W.subtotal||W.totalAmount||0,tax:W.tax||0,serviceCharge:W.serviceCharge||0,status:W.orderStatus==="completed"?"completed":"pending",paymentMethod:W.paymentMethod||"cash",paymentStatus:W.paymentStatus||"pending",branchName:((ge=W.branch)==null?void 0:ge.name)||"Unknown Branch",counterUser:((q=W.userId)==null?void 0:q.name)||"Counter User",orderSource:"counter"}});if(console.log(" SalesReports - Transformed counter orders:",R.map(W=>({id:W._id,invoice:W.invoiceNumber,customer:W.customerName,date:W.createdAt,dateFormatted:new Date(W.createdAt).toISOString().split("T")[0],total:W.total,source:W.orderSource}))),x(R),!C&&R.length>0){const W=R[0],Q=new Date(W.orderDate||W.createdAt).toISOString().split("T")[0];j(Q),E(!0);const ge=new Date(Q),q=S(R,ge),Y=T(R,ge),z=k(R,ge),ee=R.reduce((pe,Se)=>pe+(Se.total||0),0),H=R.filter(pe=>pe.status==="completed"),re=R.filter(pe=>pe.status==="pending"),le={totalOrders:R.length,completedOrders:H.length,pendingOrders:re.length,totalSales:ee,orders:R.sort((pe,Se)=>new Date(Se.orderDate||Se.createdAt)-new Date(pe.orderDate||pe.createdAt))};p({daily:q,weekly:Y,monthly:z,all:le})}else{const W=new Date(v),Q=S(R,W),ge=T(R,W),q=k(R,W),Y=R.reduce((re,le)=>re+(le.total||0),0),z=R.filter(re=>re.status==="completed"),ee=R.filter(re=>re.status==="pending"),H={totalOrders:R.length,completedOrders:z.length,pendingOrders:ee.length,totalSales:Y,orders:R.sort((re,le)=>new Date(le.orderDate||le.createdAt)-new Date(re.orderDate||re.createdAt))};p({daily:Q,weekly:ge,monthly:q,all:H})}}catch(I){console.error("Error loading sales data:",I),u("Failed to load sales data. Please try again.")}finally{l(!1)}},S=(P,I)=>{const R=I.toISOString().split("T")[0],W=P.filter(z=>new Date(z.orderDate||z.createdAt).toISOString().split("T")[0]===R),Q=W.reduce((z,ee)=>z+(ee.total||0),0),ge=W.filter(z=>z.status==="completed"),q=W.filter(z=>z.status==="pending");return{totalOrders:W.length,completedOrders:ge.length,pendingOrders:q.length,totalSales:Q,orders:W.sort((z,ee)=>new Date(ee.orderDate||ee.createdAt)-new Date(z.orderDate||z.createdAt))}},T=(P,I)=>{const R=new Date(I),W=R.getDay();R.setDate(R.getDate()-W),R.setHours(0,0,0,0);const Q=new Date(R);Q.setDate(R.getDate()+6),Q.setHours(23,59,59,999);const ge=P.filter(ee=>{const H=new Date(ee.orderDate||ee.createdAt);return H>=R&&H<=Q}),q=ge.reduce((ee,H)=>ee+(H.total||0),0),Y=ge.filter(ee=>ee.status==="completed"),z=ge.filter(ee=>ee.status==="pending");return{totalOrders:ge.length,completedOrders:Y.length,pendingOrders:z.length,totalSales:q,orders:ge.sort((ee,H)=>new Date(H.orderDate||H.createdAt)-new Date(ee.orderDate||ee.createdAt)),startDate:R.toLocaleDateString("en-IN"),endDate:Q.toLocaleDateString("en-IN")}},k=(P,I)=>{const R=new Date(I.getFullYear(),I.getMonth(),1);R.setHours(0,0,0,0);const W=new Date(I.getFullYear(),I.getMonth()+1,0);W.setHours(23,59,59,999);const Q=P.filter(z=>{const ee=new Date(z.orderDate||z.createdAt);return ee>=R&&ee<=W}),ge=Q.reduce((z,ee)=>z+(ee.total||0),0),q=Q.filter(z=>z.status==="completed"),Y=Q.filter(z=>z.status==="pending");return{totalOrders:Q.length,completedOrders:q.length,pendingOrders:Y.length,totalSales:ge,orders:Q.sort((z,ee)=>new Date(ee.orderDate||ee.createdAt)-new Date(z.orderDate||z.createdAt)),monthName:I.toLocaleDateString("en-IN",{month:"long",year:"numeric"})}},D=P=>{if(j(P),y(!1),t){const I=new Date(P),R=S(m,I);p(W=>({...W,daily:R}))}},F=P=>{if(i(P),y(!1),t&&m.length>0){const I=new Date;let R={};if(P==="daily"){const W=new Date(v);R.daily=S(m,W)}else if(P==="weekly")R.weekly=T(m,I);else if(P==="monthly")R.monthly=k(m,I);else if(P==="all"){const W=m.reduce((q,Y)=>q+(Y.total||0),0),Q=m.filter(q=>q.status==="completed"),ge=m.filter(q=>q.status==="pending");R.all={totalOrders:m.length,completedOrders:Q.length,pendingOrders:ge.length,totalSales:W,orders:m.sort((q,Y)=>new Date(Y.orderDate||Y.createdAt)-new Date(q.orderDate||q.createdAt))}}p(W=>({...W,...R}))}},B=()=>{e("/counter/menu")},M=P=>{try{const I=new Date(P);return I.toLocaleDateString("en-IN")+" "+I.toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}catch{return P}},L=P=>{switch(P==null?void 0:P.toLowerCase()){case"completed":return"#48bb78";case"pending":return"#ed8936";case"cancelled":return"#f56565";default:return"#718096"}};if(s)return n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-loading",children:[n.jsx("div",{className:"counter-spinner"}),n.jsx("p",{children:"Loading sales data..."})]})})});if(d)return n.jsx("div",{className:"counter-container",children:n.jsx("div",{className:"counter-card",children:n.jsxs("div",{className:"counter-error",children:[n.jsx("h3",{children:"Error"}),n.jsx("p",{children:d}),n.jsx("button",{className:"counter-button",onClick:()=>t&&O(t._id),children:"Retry"})]})})});const A=f[a];return n.jsx("div",{className:"counter-container",children:n.jsxs("div",{className:"counter-card",children:[n.jsx("div",{className:"counter-header",style:{marginBottom:"24px"},children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("h1",{className:"counter-title",children:" Sales & Reports"}),n.jsxs("p",{className:"counter-subtitle",children:[t==null?void 0:t.name," - Track your business performance"]}),n.jsx("div",{style:{background:m.length>0?"#e6fffa":"#fef2f2",border:`1px solid ${m.length>0?"#38b2ac":"#f87171"}`,borderRadius:"8px",padding:"8px 12px",marginTop:"8px",fontSize:"0.75rem",color:m.length>0?"#234e52":"#991b1b"},children:m.length>0?n.jsxs(n.Fragment,{children:[" Live Data: Showing ",m.length," real orders from your counter system."]}):n.jsx(n.Fragment,{children:" No Orders Yet: Place orders through the counter menu to see sales data here."})})]}),n.jsx("button",{className:"counter-button-secondary",onClick:B,style:{padding:"8px 16px"},children:" Back to Menu"})]})}),n.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"2px solid #e2e8f0",paddingBottom:"16px"},children:[{key:"daily",label:" Daily",icon:""},{key:"weekly",label:" Weekly",icon:""},{key:"monthly",label:" Monthly",icon:""},{key:"all",label:" All Orders",icon:""}].map(P=>n.jsx("button",{onClick:()=>F(P.key),style:{background:a===P.key?"#667eea":"white",color:a===P.key?"white":"#4a5568",border:`2px solid ${a===P.key?"#667eea":"#e2e8f0"}`,borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1,textAlign:"center"},children:P.label},P.key))}),a==="daily"&&n.jsxs("div",{style:{marginBottom:"24px",textAlign:"center"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#4a5568"},children:"Select Date:"}),n.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",alignItems:"center"},children:[n.jsx("input",{type:"date",value:v,onChange:P=>D(P.target.value),style:{padding:"8px 12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"500"}}),n.jsxs("button",{onClick:()=>{const P=new Date().toISOString().split("T")[0];D(P)},style:{background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"500"},title:"Set to today's date and refresh",children:[" Today (",new Date().toLocaleDateString(),")"]})]}),m.length>0&&n.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"#718096"},children:[" Tip: Your orders are from ",new Date(m[m.length-1].orderDate||m[m.length-1].createdAt).toLocaleDateString()," to ",new Date(m[0].orderDate||m[0].createdAt).toLocaleDateString()]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[n.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"24px",borderRadius:"16px",textAlign:"center",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"4px"},children:(A==null?void 0:A.totalOrders)||0}),n.jsx("div",{style:{fontSize:"0.875rem",opacity:.9,marginBottom:"4px"},children:"Total Orders"}),n.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[(A==null?void 0:A.completedOrders)||0," completed  ",(A==null?void 0:A.pendingOrders)||0," pending"]})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"24px",borderRadius:"16px",textAlign:"center",boxShadow:"0 8px 32px rgba(240, 147, 251, 0.3)"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"4px"},children:["",((A==null?void 0:A.totalSales)||0).toFixed(2)]}),n.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:"Total Sales"}),n.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:"(all orders included)"})]}),n.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",padding:"24px",borderRadius:"16px",textAlign:"center",boxShadow:"0 8px 32px rgba(79, 172, 254, 0.3)"},children:[n.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"4px"},children:["",((A==null?void 0:A.totalOrders)||0)>0?(((A==null?void 0:A.totalSales)||0)/((A==null?void 0:A.totalOrders)||1)).toFixed(2):"0.00"]}),n.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:"Average Order"}),n.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:"across all orders"})]})]}),n.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},children:[n.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#2d3748"},children:[a==="daily"&&`Daily Report - ${new Date(v).toLocaleDateString()}`,a==="weekly"&&`Weekly Report - ${A==null?void 0:A.startDate} to ${A==null?void 0:A.endDate}`,a==="monthly"&&`Monthly Report - ${A==null?void 0:A.monthName}`,a==="all"&&"All Orders - Complete History"]}),n.jsxs("p",{style:{margin:"0",color:"#718096",fontSize:"0.875rem"},children:[a==="daily"&&"View sales performance for the selected day",a==="weekly"&&"View sales performance for the current week",a==="monthly"&&"View sales performance for the current month",a==="all"&&"View all orders from your database regardless of date"]})]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("h3",{style:{margin:"0 0 16px 0",color:"#2d3748"},children:["Recent Orders (",((U=A==null?void 0:A.orders)==null?void 0:U.length)||0,")"]}),!(A!=null&&A.orders)||A.orders.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#718096"},children:[n.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),n.jsx("h4",{style:{margin:"0 0 8px 0"},children:"No Orders Found"}),n.jsxs("p",{style:{margin:"0"},children:["No orders found for the selected ",a," period."]})]}):n.jsxs("div",{style:{display:"grid",gap:"12px",maxHeight:b?"none":"400px",overflowY:b?"visible":"auto"},children:[(b?A.orders:A.orders.slice(0,10)).map((P,I)=>n.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"12px",padding:"16px",transition:"all 0.2s"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[n.jsxs("div",{children:[n.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"1rem",color:"#1a202c"},children:P.invoiceNumber&&P.invoiceNumber!=="N/A"?P.invoiceNumber:`Order #${I+1}`}),n.jsxs("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:[P.customerName,"  ",P.phoneNumber]}),n.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#4a5568"},children:M(P.orderDate||P.createdAt)})]}),n.jsxs("div",{style:{textAlign:"right"},children:[n.jsx("div",{style:{background:L(P.status),color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",marginBottom:"8px"},children:P.status||"Completed"}),n.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"700",color:"#1a202c"},children:["",(P.total||0).toFixed(2)]})]})]}),P.items&&P.items.length>0&&n.jsxs("div",{style:{background:"#f7fafc",padding:"8px 12px",borderRadius:"8px",fontSize:"0.875rem"},children:[n.jsxs("strong",{children:[P.items.length," items:"]})," ",P.items.slice(0,2).map(R=>R.name).join(", "),P.items.length>2&&` +${P.items.length-2} more`]})]},P._id||I)),A.orders.length>10&&n.jsx("div",{style:{textAlign:"center",padding:"20px",background:"#f7fafc",borderRadius:"12px",border:"2px dashed #e2e8f0"},children:b?n.jsxs("div",{children:[n.jsxs("p",{style:{margin:"0 0 12px 0",color:"#718096",fontSize:"0.875rem"},children:["Showing all ",A.orders.length," orders"]}),n.jsx("button",{onClick:()=>y(!1),style:{background:"#718096",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:P=>P.target.style.background="#4a5568",onMouseOut:P=>P.target.style.background="#718096",children:" Show Less (Top 10 Only)"})]}):n.jsxs("div",{children:[n.jsxs("p",{style:{margin:"0 0 12px 0",color:"#718096",fontSize:"0.875rem"},children:["Showing 10 of ",A.orders.length," orders"]}),n.jsxs("button",{onClick:()=>y(!0),style:{background:"#667eea",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:P=>P.target.style.background="#5a67d8",onMouseOut:P=>P.target.style.background="#667eea",children:[" Show All ",A.orders.length," Orders"]})]})})]})]})]})})},Fi=({children:e})=>localStorage.getItem("counterAuthenticated")==="true"?e:n.jsx(am,{to:"/counter/login",replace:!0});function Nhe(){const[e,t]=N.useState(!1);return N.useEffect(()=>{console.log(" CounterApp loaded!");const r=localStorage.getItem("counterAuthenticated")==="true";t(r);const a=()=>{t(localStorage.getItem("counterAuthenticated")==="true")};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]),n.jsx("div",{className:"counter-app",children:n.jsxs(_j,{children:[n.jsx(zt,{path:"login",element:n.jsx(she,{})}),n.jsx(zt,{path:"branch-selection",element:n.jsx(Fi,{children:n.jsx(ohe,{})})}),n.jsx(zt,{path:"category-selection",element:n.jsx(Fi,{children:n.jsx(lhe,{})})}),n.jsx(zt,{path:"customer-details",element:n.jsx(am,{to:"/counter/branch-selection",replace:!0})}),n.jsx(zt,{path:"menu",element:n.jsx(Fi,{children:n.jsx(fhe,{})})}),n.jsx(zt,{path:"kot-generation",element:n.jsx(Fi,{children:n.jsx(hhe,{})})}),n.jsx(zt,{path:"bill-generation",element:n.jsx(Fi,{children:n.jsx(mhe,{})})}),n.jsx(zt,{path:"payment",element:n.jsx(Fi,{children:n.jsx(ghe,{})})}),n.jsx(zt,{path:"payment-success",element:n.jsx(Fi,{children:n.jsx(vhe,{})})}),n.jsx(zt,{path:"orders",element:n.jsx(Fi,{children:n.jsx(bhe,{})})}),n.jsx(zt,{path:"print-settings",element:n.jsx(Fi,{children:n.jsx(jhe,{})})}),n.jsx(zt,{path:"print-test",element:n.jsx(Fi,{children:n.jsx(whe,{})})}),n.jsx(zt,{path:"sales-reports",element:n.jsx(Fi,{children:n.jsx(She,{})})}),n.jsx(zt,{path:"",element:n.jsx(am,{to:"login",replace:!0})})]})})}const The=({children:e})=>localStorage.getItem("isAuthenticated")==="true"?e:n.jsx(am,{to:"/login",replace:!0});function Che(){const[e,t]=N.useState(!1),[r,a]=N.useState(!1);return N.useEffect(()=>{const i=localStorage.getItem("isAuthenticated")==="true";a(i);const s=()=>{a(localStorage.getItem("isAuthenticated")==="true")};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]),n.jsx(IL,{children:n.jsxs(_j,{children:[n.jsx(zt,{path:"/login",element:n.jsx(cae,{})}),n.jsx(zt,{path:"/menu",element:n.jsx(zI,{})}),n.jsx(zt,{path:"/public-menu",element:n.jsx(zI,{})}),n.jsx(zt,{path:"/privacy-policy",element:n.jsx(Rae,{})}),n.jsx(zt,{path:"/terms-conditions",element:n.jsx(Pae,{})}),n.jsx(zt,{path:"/category-orders",element:n.jsx(zfe,{})}),n.jsx(zt,{path:"/receptionist-dashboard",element:n.jsx(Xfe,{})}),n.jsx(zt,{path:"/counter/*",element:n.jsx(Nhe,{})}),n.jsx(zt,{path:"/*",element:n.jsx(The,{children:n.jsxs("div",{className:"app",children:[n.jsx(uz,{collapsed:e,setCollapsed:t}),n.jsx("main",{className:`content ${e?"content-expanded":""}`,children:n.jsxs(_j,{children:[n.jsx(zt,{path:"/",element:n.jsx(Rne,{})}),n.jsx(zt,{path:"/orders",element:n.jsx(Fne,{})}),n.jsx(zt,{path:"/products",element:n.jsx(Une,{})}),n.jsx(zt,{path:"/categories",element:n.jsx(Hne,{})}),n.jsx(zt,{path:"/branches",element:n.jsx(Vne,{})}),n.jsx(zt,{path:"/users",element:n.jsx(Qne,{})}),n.jsx(zt,{path:"/coupons",element:n.jsx(tae,{})}),n.jsx(zt,{path:"/payments",element:n.jsx(nae,{})}),n.jsx(zt,{path:"/help-support",element:n.jsx(aae,{})}),n.jsx(zt,{path:"/about-us",element:n.jsx(iae,{})}),n.jsx(zt,{path:"/terms-policies",element:n.jsx(lae,{})}),n.jsx(zt,{path:"/staff-users",element:n.jsx(fae,{})}),n.jsx(zt,{path:"/counter-users",element:n.jsx(mae,{})}),n.jsx(zt,{path:"/staff-orders",element:n.jsx(gae,{})}),n.jsx(zt,{path:"/counter-orders",element:n.jsx(xae,{})}),n.jsx(zt,{path:"/tables",element:n.jsx(yae,{})}),n.jsx(zt,{path:"/staff-invoices",element:n.jsx(vae,{})}),n.jsx(zt,{path:"/counter-bills",element:n.jsx(bae,{})}),n.jsx(zt,{path:"/staff-payment",element:n.jsx(wae,{})}),n.jsx(zt,{path:"/counter-payment",element:n.jsx(Nae,{})}),n.jsx(zt,{path:"/product-submissions",element:n.jsx(Tae,{})}),n.jsx(zt,{path:"/qr-uploads",element:n.jsx(Cae,{})}),n.jsx(zt,{path:"/purchase-users",element:n.jsx(Oae,{})}),n.jsx(zt,{path:"/qr-generator",element:n.jsx(Dae,{})}),n.jsx(zt,{path:"/subscription",element:n.jsx(Mae,{})}),n.jsx(zt,{path:"/subscription-management",element:n.jsx(Bae,{})}),n.jsx(zt,{path:"/meal-of-the-day",element:n.jsx(Fae,{})}),n.jsx(zt,{path:"/rooms",element:n.jsx(kfe,{})}),n.jsx(zt,{path:"/room-bookings",element:n.jsx(Dfe,{})}),n.jsx(zt,{path:"/room-payments",element:n.jsx(Mfe,{})}),n.jsx(zt,{path:"/category-access",element:n.jsx(Lfe,{})}),n.jsx(zt,{path:"/receptionist-access",element:n.jsx(Wfe,{})}),n.jsx(zt,{path:"/reservations",element:n.jsx(rhe,{})})]})})]})})})]})})}const Ahe=N.createContext(),Ehe=[{id:1,name:"Central Branch",address:"123 Main St, City Center",phone:"123-456-7890",isActive:!0},{id:2,name:"North Branch",address:"456 North Ave, Northside",phone:"234-567-8901",isActive:!0},{id:3,name:"South Branch",address:"789 South Blvd, Southside",phone:"345-678-9012",isActive:!0},{id:4,name:"East Branch",address:"101 East Rd, Eastville",phone:"456-789-0123",isActive:!0},{id:5,name:"West Branch",address:"202 West St, Westtown",phone:"567-890-1234",isActive:!0}],Ohe=[{id:1,name:"Appetizers",branchId:1,description:"Starters and small plates",isActive:!0},{id:2,name:"Main Course",branchId:1,description:"Primary dishes",isActive:!0},{id:3,name:"Desserts",branchId:1,description:"Sweet treats",isActive:!0},{id:4,name:"Beverages",branchId:1,description:"Drinks and refreshments",isActive:!0},{id:5,name:"Breakfast",branchId:2,description:"Morning meals",isActive:!0},{id:6,name:"Lunch",branchId:2,description:"Midday meals",isActive:!0},{id:7,name:"Dinner",branchId:2,description:"Evening meals",isActive:!0},{id:8,name:"Snacks",branchId:3,description:"Light bites",isActive:!0},{id:9,name:"Soups",branchId:3,description:"Warm and comforting",isActive:!0},{id:10,name:"Salads",branchId:3,description:"Fresh and healthy",isActive:!0},{id:11,name:"Specials",branchId:4,description:"Chef's recommendations",isActive:!0},{id:12,name:"Combos",branchId:4,description:"Value meals",isActive:!0},{id:13,name:"Vegetarian",branchId:5,description:"Plant-based options",isActive:!0},{id:14,name:"Non-Vegetarian",branchId:5,description:"Meat-based dishes",isActive:!0}],_he=[{id:1,name:"Spring Rolls",categoryId:1,branchId:1,price:120,description:"Crispy vegetable spring rolls served with sweet chili sauce",image:"https://images.unsplash.com/photo-1606505662538-0a89eb33e0d9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8c3ByaW5nJTIwcm9sbHN8ZW58MHx8MHx8fDA%3D",isAvailable:!0},{id:2,name:"Paneer Tikka",categoryId:1,branchId:1,price:180,description:"Marinated cottage cheese grilled to perfection",image:"https://images.unsplash.com/photo-1567188040759-fb8a883dc6d8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGFuZWVyJTIwdGlra2F8ZW58MHx8MHx8fDA%3D",isAvailable:!0},{id:3,name:"Butter Paneer",categoryId:2,branchId:1,price:250,description:"Tender PAneer in a rich buttery tomato sauce",image:"https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YnV0dGVyJTIwY2hpY2tlbnxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:4,name:"Vegetable Biryani",categoryId:2,branchId:1,price:220,description:"Fragrant rice cooked with mixed vegetables and spices",image:"https://images.unsplash.com/photo-1589302168068-964664d93dc0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YmlyeWFuaXxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:5,name:"Gulab Jamun",categoryId:3,branchId:1,price:100,description:"Sweet milk solids balls soaked in sugar syrup",image:"https://images.unsplash.com/photo-1605197161470-5d2a9af0ac7e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3VsYWIlMjBqYW11bnxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:6,name:"Mango Lassi",categoryId:4,branchId:1,price:80,description:"Refreshing yogurt drink with mango pulp",image:"https://images.unsplash.com/photo-1626078436898-7c7f4f6dccf4?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bWFuZ28lMjBsYXNzaXxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:7,name:"Masala Dosa",categoryId:5,branchId:2,price:150,description:"Crispy rice crepe filled with spiced potatoes",image:"https://images.unsplash.com/photo-1589301760014-d929f3979dbc?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8ZG9zYXxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:8,name:"Sandwich",categoryId:6,branchId:2,price:160,description:"Grilled Potato with lettuce and mayo in toasted bread",image:"https://images.unsplash.com/photo-1521390188846-e2a3a97453a0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y2hpY2tlbiUyMHNhbmR3aWNofGVufDB8fDB8fHww",isAvailable:!0},{id:9,name:"Tandoori Paneer",categoryId:7,branchId:2,price:280,description:"Paneer marinated in yogurt and spices, cooked in a tandoor",image:"https://images.unsplash.com/photo-1610057099431-d73a1c9d2f2f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dGFuZG9vcmklMjBjaGlja2VufGVufDB8fDB8fHww",isAvailable:!0},{id:10,name:"Samosa",categoryId:8,branchId:3,price:40,description:"Crispy pastry filled with spiced potatoes and peas",image:"https://images.unsplash.com/photo-1601050690597-df0568f70950?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c2Ftb3NhfGVufDB8fDB8fHww",isAvailable:!0}],khe=({children:e})=>{const[t,r]=N.useState(Ehe),[a,i]=N.useState(Ohe),[s,l]=N.useState(_he),[d,u]=N.useState(1),f=T=>{const k={...T,id:t.length>0?Math.max(...t.map(D=>D.id))+1:1,isActive:!0};return r([...t,k]),k},p=T=>{r(t.map(k=>k.id===T.id?T:k))},m=T=>{r(t.filter(k=>k.id!==T)),i(a.filter(k=>k.branchId!==T)),l(s.filter(k=>k.branchId!==T))},x=T=>{const k={...T,id:a.length>0?Math.max(...a.map(D=>D.id))+1:1,isActive:!0};return i([...a,k]),k},v=T=>{i(a.map(k=>k.id===T.id?T:k))},j=T=>{i(a.filter(k=>k.id!==T)),l(s.filter(k=>k.categoryId!==T))},b=T=>{const k={...T,id:s.length>0?Math.max(...s.map(D=>D.id))+1:1,isAvailable:!0};return l([...s,k]),k},y=T=>{l(s.map(k=>k.id===T.id?T:k))},C=T=>{l(s.filter(k=>k.id!==T))},E=T=>a.filter(k=>k.branchId===T),O=T=>s.filter(k=>k.categoryId===T),S=T=>s.filter(k=>k.branchId===T);return n.jsx(Ahe.Provider,{value:{branches:t,categories:a,products:s,selectedBranch:d,setSelectedBranch:u,addBranch:f,updateBranch:p,deleteBranch:m,addCategory:x,updateCategory:v,deleteCategory:j,addProduct:b,updateProduct:y,deleteProduct:C,getCategoriesByBranch:E,getProductsByCategory:O,getProductsByBranch:S},children:e})},Ihe=console.error;console.error=(...e)=>{typeof e[0]=="string"&&e[0].includes("Received `true` for a non-boolean attribute `jsx`")||Ihe.apply(console,e)};yF.createRoot(document.getElementById("root")).render(n.jsx(Ie.StrictMode,{children:n.jsx(khe,{children:n.jsx(Che,{})})}));

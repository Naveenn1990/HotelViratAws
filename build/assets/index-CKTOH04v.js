(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gy={exports:{}},Gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA;function vB(){if(AA)return Gu;AA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,s,i){var l=null;if(i!==void 0&&(l=""+i),s.key!==void 0&&(l=""+s.key),"key"in s){i={};for(var d in s)d!=="key"&&(i[d]=s[d])}else i=s;return s=i.ref,{$$typeof:e,type:a,key:l,ref:s!==void 0?s:null,props:i}}return Gu.Fragment=t,Gu.jsx=n,Gu.jsxs=n,Gu}var EA;function jB(){return EA||(EA=1,gy.exports=vB()),gy.exports}var r=jB(),yy={exports:{}},ar={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA;function wB(){if(OA)return ar;OA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,v={};function y(q,V,U){this.props=q,this.context=V,this.refs=v,this.updater=U||b}y.prototype.isReactComponent={},y.prototype.setState=function(q,V){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,V,"setState")},y.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function A(){}A.prototype=y.prototype;function E(q,V,U){this.props=q,this.context=V,this.refs=v,this.updater=U||b}var O=E.prototype=new A;O.constructor=E,j(O,y.prototype),O.isPureReactComponent=!0;var S=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function I(q,V,U,X,H,Q){return U=Q.ref,{$$typeof:e,type:q,key:V,ref:U!==void 0?U:null,props:Q}}function z(q,V){return I(q.type,V,void 0,void 0,void 0,q.props)}function B(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function M(q){var V={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(U){return V[U]})}var F=/\/+/g;function N(q,V){return typeof q=="object"&&q!==null&&q.key!=null?M(""+q.key):V.toString(36)}function L(){}function P(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(L,L):(q.status="pending",q.then(function(V){q.status==="pending"&&(q.status="fulfilled",q.value=V)},function(V){q.status==="pending"&&(q.status="rejected",q.reason=V)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function _(q,V,U,X,H){var Q=typeof q;(Q==="undefined"||Q==="boolean")&&(q=null);var le=!1;if(q===null)le=!0;else switch(Q){case"bigint":case"string":case"number":le=!0;break;case"object":switch(q.$$typeof){case e:case t:le=!0;break;case p:return le=q._init,_(le(q._payload),V,U,X,H)}}if(le)return H=H(q),le=X===""?"."+N(q,0):X,S(H)?(U="",le!=null&&(U=le.replace(F,"$&/")+"/"),_(H,V,U,"",function(ee){return ee})):H!=null&&(B(H)&&(H=z(H,U+(H.key==null||q&&q.key===H.key?"":(""+H.key).replace(F,"$&/")+"/")+le)),V.push(H)),1;le=0;var me=X===""?".":X+":";if(S(q))for(var je=0;je<q.length;je++)X=q[je],Q=me+N(X,je),le+=_(X,V,U,Q,H);else if(je=g(q),typeof je=="function")for(q=je.call(q),je=0;!(X=q.next()).done;)X=X.value,Q=me+N(X,je++),le+=_(X,V,U,Q,H);else if(Q==="object"){if(typeof q.then=="function")return _(P(q),V,U,X,H);throw V=String(q),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return le}function R(q,V,U){if(q==null)return q;var X=[],H=0;return _(q,X,"","",function(Q){return V.call(U,Q,H++)}),X}function W(q){if(q._status===-1){var V=q._result;V=V(),V.then(function(U){(q._status===0||q._status===-1)&&(q._status=1,q._result=U)},function(U){(q._status===0||q._status===-1)&&(q._status=2,q._result=U)}),q._status===-1&&(q._status=0,q._result=V)}if(q._status===1)return q._result.default;throw q._result}var G=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function oe(){}return ar.Children={map:R,forEach:function(q,V,U){R(q,function(){V.apply(this,arguments)},U)},count:function(q){var V=0;return R(q,function(){V++}),V},toArray:function(q){return R(q,function(V){return V})||[]},only:function(q){if(!B(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ar.Component=y,ar.Fragment=n,ar.Profiler=s,ar.PureComponent=E,ar.StrictMode=a,ar.Suspense=u,ar.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ar.__COMPILER_RUNTIME={__proto__:null,c:function(q){return C.H.useMemoCache(q)}},ar.cache=function(q){return function(){return q.apply(null,arguments)}},ar.cloneElement=function(q,V,U){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var X=j({},q.props),H=q.key,Q=void 0;if(V!=null)for(le in V.ref!==void 0&&(Q=void 0),V.key!==void 0&&(H=""+V.key),V)!k.call(V,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&V.ref===void 0||(X[le]=V[le]);var le=arguments.length-2;if(le===1)X.children=U;else if(1<le){for(var me=Array(le),je=0;je<le;je++)me[je]=arguments[je+2];X.children=me}return I(q.type,H,void 0,void 0,Q,X)},ar.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:i,_context:q},q},ar.createElement=function(q,V,U){var X,H={},Q=null;if(V!=null)for(X in V.key!==void 0&&(Q=""+V.key),V)k.call(V,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(H[X]=V[X]);var le=arguments.length-2;if(le===1)H.children=U;else if(1<le){for(var me=Array(le),je=0;je<le;je++)me[je]=arguments[je+2];H.children=me}if(q&&q.defaultProps)for(X in le=q.defaultProps,le)H[X]===void 0&&(H[X]=le[X]);return I(q,Q,void 0,void 0,null,H)},ar.createRef=function(){return{current:null}},ar.forwardRef=function(q){return{$$typeof:d,render:q}},ar.isValidElement=B,ar.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:W}},ar.memo=function(q,V){return{$$typeof:h,type:q,compare:V===void 0?null:V}},ar.startTransition=function(q){var V=C.T,U={};C.T=U;try{var X=q(),H=C.S;H!==null&&H(U,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(oe,G)}catch(Q){G(Q)}finally{C.T=V}},ar.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ar.use=function(q){return C.H.use(q)},ar.useActionState=function(q,V,U){return C.H.useActionState(q,V,U)},ar.useCallback=function(q,V){return C.H.useCallback(q,V)},ar.useContext=function(q){return C.H.useContext(q)},ar.useDebugValue=function(){},ar.useDeferredValue=function(q,V){return C.H.useDeferredValue(q,V)},ar.useEffect=function(q,V,U){var X=C.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(q,V)},ar.useId=function(){return C.H.useId()},ar.useImperativeHandle=function(q,V,U){return C.H.useImperativeHandle(q,V,U)},ar.useInsertionEffect=function(q,V){return C.H.useInsertionEffect(q,V)},ar.useLayoutEffect=function(q,V){return C.H.useLayoutEffect(q,V)},ar.useMemo=function(q,V){return C.H.useMemo(q,V)},ar.useOptimistic=function(q,V){return C.H.useOptimistic(q,V)},ar.useReducer=function(q,V,U){return C.H.useReducer(q,V,U)},ar.useRef=function(q){return C.H.useRef(q)},ar.useState=function(q){return C.H.useState(q)},ar.useSyncExternalStore=function(q,V,U){return C.H.useSyncExternalStore(q,V,U)},ar.useTransition=function(){return C.H.useTransition()},ar.version="19.1.0",ar}var kA;function kx(){return kA||(kA=1,yy.exports=wB()),yy.exports}var w=kx();const _e=$r(w);var by={exports:{}},Ku={},vy={exports:{}},jy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A;function SB(){return _A||(_A=1,function(e){function t(R,W){var G=R.length;R.push(W);e:for(;0<G;){var oe=G-1>>>1,q=R[oe];if(0<s(q,W))R[oe]=W,R[G]=q,G=oe;else break e}}function n(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var W=R[0],G=R.pop();if(G!==W){R[0]=G;e:for(var oe=0,q=R.length,V=q>>>1;oe<V;){var U=2*(oe+1)-1,X=R[U],H=U+1,Q=R[H];if(0>s(X,G))H<q&&0>s(Q,X)?(R[oe]=Q,R[H]=G,oe=H):(R[oe]=X,R[U]=G,oe=U);else if(H<q&&0>s(Q,G))R[oe]=Q,R[H]=G,oe=H;else break e}}return W}function s(R,W){var G=R.sortIndex-W.sortIndex;return G!==0?G:R.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],h=[],p=1,m=null,g=3,b=!1,j=!1,v=!1,y=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function S(R){for(var W=n(h);W!==null;){if(W.callback===null)a(h);else if(W.startTime<=R)a(h),W.sortIndex=W.expirationTime,t(u,W);else break;W=n(h)}}function C(R){if(v=!1,S(R),!j)if(n(u)!==null)j=!0,k||(k=!0,N());else{var W=n(h);W!==null&&_(C,W.startTime-R)}}var k=!1,I=-1,z=5,B=-1;function M(){return y?!0:!(e.unstable_now()-B<z)}function F(){if(y=!1,k){var R=e.unstable_now();B=R;var W=!0;try{e:{j=!1,v&&(v=!1,E(I),I=-1),b=!0;var G=g;try{t:{for(S(R),m=n(u);m!==null&&!(m.expirationTime>R&&M());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,g=m.priorityLevel;var q=oe(m.expirationTime<=R);if(R=e.unstable_now(),typeof q=="function"){m.callback=q,S(R),W=!0;break t}m===n(u)&&a(u),S(R)}else a(u);m=n(u)}if(m!==null)W=!0;else{var V=n(h);V!==null&&_(C,V.startTime-R),W=!1}}break e}finally{m=null,g=G,b=!1}W=void 0}}finally{W?N():k=!1}}}var N;if(typeof O=="function")N=function(){O(F)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,P=L.port2;L.port1.onmessage=F,N=function(){P.postMessage(null)}}else N=function(){A(F,0)};function _(R,W){I=A(function(){R(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(R){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var G=g;g=W;try{return R()}finally{g=G}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=g;g=R;try{return W()}finally{g=G}},e.unstable_scheduleCallback=function(R,W,G){var oe=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?oe+G:oe):G=oe,R){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=G+q,R={id:p++,callback:W,priorityLevel:R,startTime:G,expirationTime:q,sortIndex:-1},G>oe?(R.sortIndex=G,t(h,R),n(u)===null&&R===n(h)&&(v?(E(I),I=-1):v=!0,_(C,G-oe))):(R.sortIndex=q,t(u,R),j||b||(j=!0,k||(k=!0,N()))),R},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(R){var W=g;return function(){var G=g;g=W;try{return R.apply(this,arguments)}finally{g=G}}}}(jy)),jy}var IA;function NB(){return IA||(IA=1,vy.exports=SB()),vy.exports}var wy={exports:{}},xa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function TB(){if(DA)return xa;DA=1;var e=kx();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(u,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:u,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,xa.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(u,h,null,p)},xa.flushSync=function(u){var h=l.T,p=a.p;try{if(l.T=null,a.p=2,u)return u()}finally{l.T=h,a.p=p,a.d.f()}},xa.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(u,h))},xa.prefetchDNS=function(u){typeof u=="string"&&a.d.D(u)},xa.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,m=d(p,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:b}):p==="script"&&a.d.X(u,{crossOrigin:m,integrity:g,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xa.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);a.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(u)},xa.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=d(p,h.crossOrigin);a.d.L(u,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xa.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=d(h.as,h.crossOrigin);a.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(u)},xa.requestFormReset=function(u){a.d.r(u)},xa.unstable_batchedUpdates=function(u,h){return u(h)},xa.useFormState=function(u,h,p){return l.H.useFormState(u,h,p)},xa.useFormStatus=function(){return l.H.useHostTransitionStatus()},xa.version="19.1.0",xa}var RA;function CB(){if(RA)return wy.exports;RA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wy.exports=TB(),wy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function AB(){if(PA)return Ku;PA=1;var e=NB(),t=kx(),n=CB();function a(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(i(o)!==o)throw Error(a(188))}function u(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(a(188));return c!==o?null:o}for(var f=o,x=c;;){var T=f.return;if(T===null)break;var D=T.alternate;if(D===null){if(x=T.return,x!==null){f=x;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===f)return d(T),o;if(D===x)return d(T),c;D=D.sibling}throw Error(a(188))}if(f.return!==x.return)f=T,x=D;else{for(var Y=!1,ie=T.child;ie;){if(ie===f){Y=!0,f=T,x=D;break}if(ie===x){Y=!0,x=T,f=D;break}ie=ie.sibling}if(!Y){for(ie=D.child;ie;){if(ie===f){Y=!0,f=D,x=T;break}if(ie===x){Y=!0,x=D,f=T;break}ie=ie.sibling}if(!Y)throw Error(a(189))}}if(f.alternate!==x)throw Error(a(190))}if(f.tag!==3)throw Error(a(188));return f.stateNode.current===f?o:c}function h(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=h(o),c!==null)return c;o=o.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),O=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function N(o){return o===null||typeof o!="object"?null:(o=F&&o[F]||o["@@iterator"],typeof o=="function"?o:null)}var L=Symbol.for("react.client.reference");function P(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===L?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case C:return"Suspense";case k:return"SuspenseList";case B:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case O:return(o.displayName||"Context")+".Provider";case E:return(o._context.displayName||"Context")+".Consumer";case S:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return c=o.displayName||null,c!==null?c:P(o.type)||"Memo";case z:c=o._payload,o=o._init;try{return P(o(c))}catch{}}return null}var _=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},oe=[],q=-1;function V(o){return{current:o}}function U(o){0>q||(o.current=oe[q],oe[q]=null,q--)}function X(o,c){q++,oe[q]=o.current,o.current=c}var H=V(null),Q=V(null),le=V(null),me=V(null);function je(o,c){switch(X(le,c),X(Q,o),X(H,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?tA(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=tA(c),o=rA(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}U(H),X(H,o)}function ee(){U(H),U(Q),U(le)}function se(o){o.memoizedState!==null&&X(me,o);var c=H.current,f=rA(c,o.type);c!==f&&(X(Q,o),X(H,f))}function fe(o){Q.current===o&&(U(H),U(Q)),me.current===o&&(U(me),zu._currentValue=G)}var ue=Object.prototype.hasOwnProperty,We=e.unstable_scheduleCallback,we=e.unstable_cancelCallback,Me=e.unstable_shouldYield,Ee=e.unstable_requestPaint,Be=e.unstable_now,it=e.unstable_getCurrentPriorityLevel,re=e.unstable_ImmediatePriority,ce=e.unstable_UserBlockingPriority,Z=e.unstable_NormalPriority,de=e.unstable_LowPriority,te=e.unstable_IdlePriority,Se=e.log,Ve=e.unstable_setDisableYieldValue,tt=null,ze=null;function Ze(o){if(typeof Se=="function"&&Ve(o),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(tt,o)}catch{}}var Ae=Math.clz32?Math.clz32:Bt,Qe=Math.log,pt=Math.LN2;function Bt(o){return o>>>=0,o===0?32:31-(Qe(o)/pt|0)|0}var Pt=256,kt=4194304;function ae(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ie(o,c,f){var x=o.pendingLanes;if(x===0)return 0;var T=0,D=o.suspendedLanes,Y=o.pingedLanes;o=o.warmLanes;var ie=x&134217727;return ie!==0?(x=ie&~D,x!==0?T=ae(x):(Y&=ie,Y!==0?T=ae(Y):f||(f=ie&~o,f!==0&&(T=ae(f))))):(ie=x&~D,ie!==0?T=ae(ie):Y!==0?T=ae(Y):f||(f=x&~o,f!==0&&(T=ae(f)))),T===0?0:c!==0&&c!==T&&(c&D)===0&&(D=T&-T,f=c&-c,D>=f||D===32&&(f&4194048)!==0)?c:T}function Ye(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Ft(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var o=Pt;return Pt<<=1,(Pt&4194048)===0&&(Pt=256),o}function ke(){var o=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),o}function Re(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function ot(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function mt(o,c,f,x,T,D){var Y=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var ie=o.entanglements,Ne=o.expirationTimes,$e=o.hiddenUpdates;for(f=Y&~f;0<f;){var lt=31-Ae(f),dt=1<<lt;ie[lt]=0,Ne[lt]=-1;var qe=$e[lt];if(qe!==null)for($e[lt]=null,lt=0;lt<qe.length;lt++){var Ge=qe[lt];Ge!==null&&(Ge.lane&=-536870913)}f&=~dt}x!==0&&Tt(o,x,0),D!==0&&T===0&&o.tag!==0&&(o.suspendedLanes|=D&~(Y&~c))}function Tt(o,c,f){o.pendingLanes|=c,o.suspendedLanes&=~c;var x=31-Ae(c);o.entangledLanes|=c,o.entanglements[x]=o.entanglements[x]|1073741824|f&4194090}function _t(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var x=31-Ae(f),T=1<<x;T&c|o[x]&c&&(o[x]|=c),f&=~T}}function st(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function wt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function yt(){var o=W.p;return o!==0?o:(o=window.event,o===void 0?32:jA(o.type))}function Nt(o,c){var f=W.p;try{return W.p=o,c()}finally{W.p=f}}var Kt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Kt,Ut="__reactProps$"+Kt,zr="__reactContainer$"+Kt,Qt="__reactEvents$"+Kt,ln="__reactListeners$"+Kt,ne="__reactHandles$"+Kt,ge="__reactResources$"+Kt,he="__reactMarker$"+Kt;function pe(o){delete o[Lt],delete o[Ut],delete o[Qt],delete o[ln],delete o[ne]}function ye(o){var c=o[Lt];if(c)return c;for(var f=o.parentNode;f;){if(c=f[zr]||f[Lt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=iA(o);o!==null;){if(f=o[Lt])return f;o=iA(o)}return c}o=f,f=o.parentNode}return null}function ve(o){if(o=o[Lt]||o[zr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Le(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(a(33))}function et(o){var c=o[ge];return c||(c=o[ge]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Pe(o){o[he]=!0}var Ue=new Set,He={};function ht(o,c){xt(o,c),xt(o+"Capture",c)}function xt(o,c){for(He[o]=c,o=0;o<c.length;o++)Ue.add(c[o])}var At=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gt={},Ct={};function Yt(o){return ue.call(Ct,o)?!0:ue.call(gt,o)?!1:At.test(o)?Ct[o]=!0:(gt[o]=!0,!1)}function Or(o,c,f){if(Yt(c))if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+f)}}function kr(o,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+f)}}function Ur(o,c,f,x){if(x===null)o.removeAttribute(f);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(c,f,""+x)}}var Ls,di;function Da(o){if(Ls===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Ls=c&&c[1]||"",di=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ls+o+di}var Xa=!1;function $s(o,c){if(!o||Xa)return"";Xa=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Ge){var qe=Ge}Reflect.construct(o,[],dt)}else{try{dt.call()}catch(Ge){qe=Ge}o.call(dt.prototype)}}else{try{throw Error()}catch(Ge){qe=Ge}(dt=o())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Ge){if(Ge&&qe&&typeof Ge.stack=="string")return[Ge.stack,qe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=x.DetermineComponentFrameRoot(),Y=D[0],ie=D[1];if(Y&&ie){var Ne=Y.split(`
`),$e=ie.split(`
`);for(T=x=0;x<Ne.length&&!Ne[x].includes("DetermineComponentFrameRoot");)x++;for(;T<$e.length&&!$e[T].includes("DetermineComponentFrameRoot");)T++;if(x===Ne.length||T===$e.length)for(x=Ne.length-1,T=$e.length-1;1<=x&&0<=T&&Ne[x]!==$e[T];)T--;for(;1<=x&&0<=T;x--,T--)if(Ne[x]!==$e[T]){if(x!==1||T!==1)do if(x--,T--,0>T||Ne[x]!==$e[T]){var lt=`
`+Ne[x].replace(" at new "," at ");return o.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",o.displayName)),lt}while(1<=x&&0<=T);break}}}finally{Xa=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Da(f):""}function Qa(o){switch(o.tag){case 26:case 27:case 5:return Da(o.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 15:return $s(o.type,!1);case 11:return $s(o.type.render,!1);case 1:return $s(o.type,!0);case 31:return Da("Activity");default:return""}}function sl(o){try{var c="";do c+=Qa(o),o=o.return;while(o);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Na(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function tu(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Bf(o){var c=tu(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var T=f.get,D=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return T.call(this)},set:function(Y){x=""+Y,D.call(this,Y)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(Y){x=""+Y},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function il(o){o._valueTracker||(o._valueTracker=Bf(o))}function ru(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),x="";return o&&(x=tu(o)?o.checked?"true":"false":o.value),o=x,o!==f?(c.setValue(o),!0):!1}function ol(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var J=/[\n"\\]/g;function be(o){return o.replace(J,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Te(o,c,f,x,T,D,Y,ie){o.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.type=Y:o.removeAttribute("type"),c!=null?Y==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Na(c)):o.value!==""+Na(c)&&(o.value=""+Na(c)):Y!=="submit"&&Y!=="reset"||o.removeAttribute("value"),c!=null?Ke(o,Y,Na(c)):f!=null?Ke(o,Y,Na(f)):x!=null&&o.removeAttribute("value"),T==null&&D!=null&&(o.defaultChecked=!!D),T!=null&&(o.checked=T&&typeof T!="function"&&typeof T!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?o.name=""+Na(ie):o.removeAttribute("name")}function Ce(o,c,f,x,T,D,Y,ie){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(o.type=D),c!=null||f!=null){if(!(D!=="submit"&&D!=="reset"||c!=null))return;f=f!=null?""+Na(f):"",c=c!=null?""+Na(c):f,ie||c===o.value||(o.value=c),o.defaultValue=c}x=x??T,x=typeof x!="function"&&typeof x!="symbol"&&!!x,o.checked=ie?o.checked:!!x,o.defaultChecked=!!x,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(o.name=Y)}function Ke(o,c,f){c==="number"&&ol(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Xe(o,c,f,x){if(o=o.options,c){c={};for(var T=0;T<f.length;T++)c["$"+f[T]]=!0;for(f=0;f<o.length;f++)T=c.hasOwnProperty("$"+o[f].value),o[f].selected!==T&&(o[f].selected=T),T&&x&&(o[f].defaultSelected=!0)}else{for(f=""+Na(f),c=null,T=0;T<o.length;T++){if(o[T].value===f){o[T].selected=!0,x&&(o[T].defaultSelected=!0);return}c!==null||o[T].disabled||(c=o[T])}c!==null&&(c.selected=!0)}}function rt(o,c,f){if(c!=null&&(c=""+Na(c),c!==o.value&&(o.value=c),f==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=f!=null?""+Na(f):""}function Dt(o,c,f,x){if(c==null){if(x!=null){if(f!=null)throw Error(a(92));if(_(x)){if(1<x.length)throw Error(a(93));x=x[0]}f=x}f==null&&(f=""),c=f}f=Na(c),o.defaultValue=f,x=o.textContent,x===f&&x!==""&&x!==null&&(o.value=x)}function zt(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tr(o,c,f){var x=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?x?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":x?o.setProperty(c,f):typeof f!="number"||f===0||br.has(c)?c==="float"?o.cssFloat=f:o[c]=(""+f).trim():o[c]=f+"px"}function Mt(o,c,f){if(c!=null&&typeof c!="object")throw Error(a(62));if(o=o.style,f!=null){for(var x in f)!f.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?o.setProperty(x,""):x==="float"?o.cssFloat="":o[x]="");for(var T in c)x=c[T],c.hasOwnProperty(T)&&f[T]!==x&&tr(o,T,x)}else for(var D in c)c.hasOwnProperty(D)&&tr(o,D,c[D])}function sr(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ra(o){return Fn.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Ai=null;function nu(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var mo=null,gs=null;function xo(o){var c=ve(o);if(c&&(o=c.stateNode)){var f=o[Ut]||null;e:switch(o=c.stateNode,c.type){case"input":if(Te(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+be(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var x=f[c];if(x!==o&&x.form===o.form){var T=x[Ut]||null;if(!T)throw Error(a(90));Te(x,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(c=0;c<f.length;c++)x=f[c],x.form===o.form&&ru(x)}break e;case"textarea":rt(o,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Xe(o,!!f.multiple,c,!1)}}}var ic=!1;function K(o,c,f){if(ic)return o(c,f);ic=!0;try{var x=o(c);return x}finally{if(ic=!1,(mo!==null||gs!==null)&&(gp(),mo&&(c=mo,o=gs,gs=mo=null,xo(c),o)))for(c=0;c<o.length;c++)xo(o[c])}}function Ot(o,c){var f=o.stateNode;if(f===null)return null;var x=f[Ut]||null;if(x===null)return null;f=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(a(231,c,typeof f));return f}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zt=!1;if(bt)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){Zt=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{Zt=!1}var qr=null,Ln=null,jn=null;function Qn(){if(jn)return jn;var o,c=Ln,f=c.length,x,T="value"in qr?qr.value:qr.textContent,D=T.length;for(o=0;o<f&&c[o]===T[o];o++);var Y=f-o;for(x=1;x<=Y&&c[f-x]===T[D-x];x++);return jn=T.slice(o,1<x?1-x:void 0)}function ha(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Ja(){return!0}function Pa(){return!1}function wn(o){function c(f,x,T,D,Y){this._reactName=f,this._targetInst=T,this.type=x,this.nativeEvent=D,this.target=Y,this.currentTarget=null;for(var ie in o)o.hasOwnProperty(ie)&&(f=o[ie],this[ie]=f?f(D):D[ie]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Ja:Pa,this.isPropagationStopped=Pa,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),c}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=wn(lr),cn=p({},lr,{view:0,detail:0}),Ma=wn(cn),Ta,ys,pr,dn=p({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T0,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==pr&&(pr&&o.type==="mousemove"?(Ta=o.screenX-pr.screenX,ys=o.screenY-pr.screenY):ys=Ta=0,pr=o),Ta)},movementY:function(o){return"movementY"in o?o.movementY:ys}}),$n=wn(dn),gn=p({},dn,{dataTransfer:0}),Qr=wn(gn),fa=p({},cn,{relatedTarget:0}),pa=wn(fa),N9=p({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),T9=wn(N9),C9=p({},lr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),A9=wn(C9),E9=p({},lr,{data:0}),lN=wn(E9),O9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I9(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=_9[o])?!!c[o]:!1}function T0(){return I9}var D9=p({},cn,{key:function(o){if(o.key){var c=O9[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=ha(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?k9[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T0,charCode:function(o){return o.type==="keypress"?ha(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ha(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),R9=wn(D9),P9=p({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cN=wn(P9),M9=p({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T0}),B9=wn(M9),F9=p({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),L9=wn(F9),$9=p({},dn,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),z9=wn($9),U9=p({},lr,{newState:0,oldState:0}),q9=wn(U9),W9=[9,13,27,32],C0=bt&&"CompositionEvent"in window,au=null;bt&&"documentMode"in document&&(au=document.documentMode);var H9=bt&&"TextEvent"in window&&!au,dN=bt&&(!C0||au&&8<au&&11>=au),uN=" ",hN=!1;function fN(o,c){switch(o){case"keyup":return W9.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pN(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var oc=!1;function G9(o,c){switch(o){case"compositionend":return pN(c);case"keypress":return c.which!==32?null:(hN=!0,uN);case"textInput":return o=c.data,o===uN&&hN?null:o;default:return null}}function K9(o,c){if(oc)return o==="compositionend"||!C0&&fN(o,c)?(o=Qn(),jn=Ln=qr=null,oc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return dN&&c.locale!=="ko"?null:c.data;default:return null}}var V9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mN(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!V9[o.type]:c==="textarea"}function xN(o,c,f,x){mo?gs?gs.push(x):gs=[x]:mo=x,c=Sp(c,"onChange"),0<c.length&&(f=new Xt("onChange","change",null,f,x),o.push({event:f,listeners:c}))}var su=null,iu=null;function Y9(o){XC(o,0)}function Ff(o){var c=Le(o);if(ru(c))return o}function gN(o,c){if(o==="change")return c}var yN=!1;if(bt){var A0;if(bt){var E0="oninput"in document;if(!E0){var bN=document.createElement("div");bN.setAttribute("oninput","return;"),E0=typeof bN.oninput=="function"}A0=E0}else A0=!1;yN=A0&&(!document.documentMode||9<document.documentMode)}function vN(){su&&(su.detachEvent("onpropertychange",jN),iu=su=null)}function jN(o){if(o.propertyName==="value"&&Ff(iu)){var c=[];xN(c,iu,o,nu(o)),K(Y9,c)}}function X9(o,c,f){o==="focusin"?(vN(),su=c,iu=f,su.attachEvent("onpropertychange",jN)):o==="focusout"&&vN()}function Q9(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ff(iu)}function J9(o,c){if(o==="click")return Ff(c)}function Z9(o,c){if(o==="input"||o==="change")return Ff(c)}function eM(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Za=typeof Object.is=="function"?Object.is:eM;function ou(o,c){if(Za(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var T=f[x];if(!ue.call(c,T)||!Za(o[T],c[T]))return!1}return!0}function wN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function SN(o,c){var f=wN(o);o=0;for(var x;f;){if(f.nodeType===3){if(x=o+f.textContent.length,o<=c&&x>=c)return{node:f,offset:c-o};o=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=wN(f)}}function NN(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?NN(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function TN(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=ol(o.document);c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=ol(o.document)}return c}function O0(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var tM=bt&&"documentMode"in document&&11>=document.documentMode,lc=null,k0=null,lu=null,_0=!1;function CN(o,c,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;_0||lc==null||lc!==ol(x)||(x=lc,"selectionStart"in x&&O0(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),lu&&ou(lu,x)||(lu=x,x=Sp(k0,"onSelect"),0<x.length&&(c=new Xt("onSelect","select",null,c,f),o.push({event:c,listeners:x}),c.target=lc)))}function ll(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var cc={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionrun:ll("Transition","TransitionRun"),transitionstart:ll("Transition","TransitionStart"),transitioncancel:ll("Transition","TransitionCancel"),transitionend:ll("Transition","TransitionEnd")},I0={},AN={};bt&&(AN=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function cl(o){if(I0[o])return I0[o];if(!cc[o])return o;var c=cc[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in AN)return I0[o]=c[f];return o}var EN=cl("animationend"),ON=cl("animationiteration"),kN=cl("animationstart"),rM=cl("transitionrun"),nM=cl("transitionstart"),aM=cl("transitioncancel"),_N=cl("transitionend"),IN=new Map,D0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");D0.push("scrollEnd");function zs(o,c){IN.set(o,c),ht(c,[o])}var DN=new WeakMap;function bs(o,c){if(typeof o=="object"&&o!==null){var f=DN.get(o);return f!==void 0?f:(c={value:o,source:c,stack:sl(c)},DN.set(o,c),c)}return{value:o,source:c,stack:sl(c)}}var vs=[],dc=0,R0=0;function Lf(){for(var o=dc,c=R0=dc=0;c<o;){var f=vs[c];vs[c++]=null;var x=vs[c];vs[c++]=null;var T=vs[c];vs[c++]=null;var D=vs[c];if(vs[c++]=null,x!==null&&T!==null){var Y=x.pending;Y===null?T.next=T:(T.next=Y.next,Y.next=T),x.pending=T}D!==0&&RN(f,T,D)}}function $f(o,c,f,x){vs[dc++]=o,vs[dc++]=c,vs[dc++]=f,vs[dc++]=x,R0|=x,o.lanes|=x,o=o.alternate,o!==null&&(o.lanes|=x)}function P0(o,c,f,x){return $f(o,c,f,x),zf(o)}function uc(o,c){return $f(o,null,null,c),zf(o)}function RN(o,c,f){o.lanes|=f;var x=o.alternate;x!==null&&(x.lanes|=f);for(var T=!1,D=o.return;D!==null;)D.childLanes|=f,x=D.alternate,x!==null&&(x.childLanes|=f),D.tag===22&&(o=D.stateNode,o===null||o._visibility&1||(T=!0)),o=D,D=D.return;return o.tag===3?(D=o.stateNode,T&&c!==null&&(T=31-Ae(f),o=D.hiddenUpdates,x=o[T],x===null?o[T]=[c]:x.push(c),c.lane=f|536870912),D):null}function zf(o){if(50<Du)throw Du=0,zg=null,Error(a(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var hc={};function sM(o,c,f,x){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(o,c,f,x){return new sM(o,c,f,x)}function M0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ei(o,c){var f=o.alternate;return f===null?(f=es(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function PN(o,c){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,c=f.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Uf(o,c,f,x,T,D){var Y=0;if(x=o,typeof o=="function")M0(o)&&(Y=1);else if(typeof o=="string")Y=oB(o,f,H.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case B:return o=es(31,f,c,T),o.elementType=B,o.lanes=D,o;case j:return dl(f.children,T,D,c);case v:Y=8,T|=24;break;case y:return o=es(12,f,c,T|2),o.elementType=y,o.lanes=D,o;case C:return o=es(13,f,c,T),o.elementType=C,o.lanes=D,o;case k:return o=es(19,f,c,T),o.elementType=k,o.lanes=D,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:case O:Y=10;break e;case E:Y=9;break e;case S:Y=11;break e;case I:Y=14;break e;case z:Y=16,x=null;break e}Y=29,f=Error(a(130,o===null?"null":typeof o,"")),x=null}return c=es(Y,f,c,T),c.elementType=o,c.type=x,c.lanes=D,c}function dl(o,c,f,x){return o=es(7,o,x,c),o.lanes=f,o}function B0(o,c,f){return o=es(6,o,null,c),o.lanes=f,o}function F0(o,c,f){return c=es(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var fc=[],pc=0,qf=null,Wf=0,js=[],ws=0,ul=null,Oi=1,ki="";function hl(o,c){fc[pc++]=Wf,fc[pc++]=qf,qf=o,Wf=c}function MN(o,c,f){js[ws++]=Oi,js[ws++]=ki,js[ws++]=ul,ul=o;var x=Oi;o=ki;var T=32-Ae(x)-1;x&=~(1<<T),f+=1;var D=32-Ae(c)+T;if(30<D){var Y=T-T%5;D=(x&(1<<Y)-1).toString(32),x>>=Y,T-=Y,Oi=1<<32-Ae(c)+T|f<<T|x,ki=D+o}else Oi=1<<D|f<<T|x,ki=o}function L0(o){o.return!==null&&(hl(o,1),MN(o,1,0))}function $0(o){for(;o===qf;)qf=fc[--pc],fc[pc]=null,Wf=fc[--pc],fc[pc]=null;for(;o===ul;)ul=js[--ws],js[ws]=null,ki=js[--ws],js[ws]=null,Oi=js[--ws],js[ws]=null}var Ca=null,hn=null,Ar=!1,fl=null,ui=!1,z0=Error(a(519));function pl(o){var c=Error(a(418,""));throw uu(bs(c,o)),z0}function BN(o){var c=o.stateNode,f=o.type,x=o.memoizedProps;switch(c[Lt]=o,c[Ut]=x,f){case"dialog":fr("cancel",c),fr("close",c);break;case"iframe":case"object":case"embed":fr("load",c);break;case"video":case"audio":for(f=0;f<Pu.length;f++)fr(Pu[f],c);break;case"source":fr("error",c);break;case"img":case"image":case"link":fr("error",c),fr("load",c);break;case"details":fr("toggle",c);break;case"input":fr("invalid",c),Ce(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),il(c);break;case"select":fr("invalid",c);break;case"textarea":fr("invalid",c),Dt(c,x.value,x.defaultValue,x.children),il(c)}f=x.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||x.suppressHydrationWarning===!0||eA(c.textContent,f)?(x.popover!=null&&(fr("beforetoggle",c),fr("toggle",c)),x.onScroll!=null&&fr("scroll",c),x.onScrollEnd!=null&&fr("scrollend",c),x.onClick!=null&&(c.onclick=Np),c=!0):c=!1,c||pl(o)}function FN(o){for(Ca=o.return;Ca;)switch(Ca.tag){case 5:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:Ca=Ca.return}}function cu(o){if(o!==Ca)return!1;if(!Ar)return FN(o),Ar=!0,!1;var c=o.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||ny(o.type,o.memoizedProps)),f=!f),f&&hn&&pl(o),FN(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(c===0){hn=qs(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;o=o.nextSibling}hn=null}}else c===27?(c=hn,Io(o.type)?(o=oy,oy=null,hn=o):hn=c):hn=Ca?qs(o.stateNode.nextSibling):null;return!0}function du(){hn=Ca=null,Ar=!1}function LN(){var o=fl;return o!==null&&(La===null?La=o:La.push.apply(La,o),fl=null),o}function uu(o){fl===null?fl=[o]:fl.push(o)}var U0=V(null),ml=null,_i=null;function go(o,c,f){X(U0,c._currentValue),c._currentValue=f}function Ii(o){o._currentValue=U0.current,U(U0)}function q0(o,c,f){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===f)break;o=o.return}}function W0(o,c,f,x){var T=o.child;for(T!==null&&(T.return=o);T!==null;){var D=T.dependencies;if(D!==null){var Y=T.child;D=D.firstContext;e:for(;D!==null;){var ie=D;D=T;for(var Ne=0;Ne<c.length;Ne++)if(ie.context===c[Ne]){D.lanes|=f,ie=D.alternate,ie!==null&&(ie.lanes|=f),q0(D.return,f,o),x||(Y=null);break e}D=ie.next}}else if(T.tag===18){if(Y=T.return,Y===null)throw Error(a(341));Y.lanes|=f,D=Y.alternate,D!==null&&(D.lanes|=f),q0(Y,f,o),Y=null}else Y=T.child;if(Y!==null)Y.return=T;else for(Y=T;Y!==null;){if(Y===o){Y=null;break}if(T=Y.sibling,T!==null){T.return=Y.return,Y=T;break}Y=Y.return}T=Y}}function hu(o,c,f,x){o=null;for(var T=c,D=!1;T!==null;){if(!D){if((T.flags&524288)!==0)D=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var Y=T.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ie=T.type;Za(T.pendingProps.value,Y.value)||(o!==null?o.push(ie):o=[ie])}}else if(T===me.current){if(Y=T.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(o!==null?o.push(zu):o=[zu])}T=T.return}o!==null&&W0(c,o,f,x),c.flags|=262144}function Hf(o){for(o=o.firstContext;o!==null;){if(!Za(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function xl(o){ml=o,_i=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ma(o){return $N(ml,o)}function Gf(o,c){return ml===null&&xl(o),$N(o,c)}function $N(o,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},_i===null){if(o===null)throw Error(a(308));_i=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else _i=_i.next=c;return f}var iM=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(f,x){o.push(x)}};this.abort=function(){c.aborted=!0,o.forEach(function(f){return f()})}},oM=e.unstable_scheduleCallback,lM=e.unstable_NormalPriority,In={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function H0(){return{controller:new iM,data:new Map,refCount:0}}function fu(o){o.refCount--,o.refCount===0&&oM(lM,function(){o.controller.abort()})}var pu=null,G0=0,mc=0,xc=null;function cM(o,c){if(pu===null){var f=pu=[];G0=0,mc=Vg(),xc={status:"pending",value:void 0,then:function(x){f.push(x)}}}return G0++,c.then(zN,zN),c}function zN(){if(--G0===0&&pu!==null){xc!==null&&(xc.status="fulfilled");var o=pu;pu=null,mc=0,xc=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function dM(o,c){var f=[],x={status:"pending",value:null,reason:null,then:function(T){f.push(T)}};return o.then(function(){x.status="fulfilled",x.value=c;for(var T=0;T<f.length;T++)(0,f[T])(c)},function(T){for(x.status="rejected",x.reason=T,T=0;T<f.length;T++)(0,f[T])(void 0)}),x}var UN=R.S;R.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&cM(o,c),UN!==null&&UN(o,c)};var gl=V(null);function K0(){var o=gl.current;return o!==null?o:Jr.pooledCache}function Kf(o,c){c===null?X(gl,gl.current):X(gl,c.pool)}function qN(){var o=K0();return o===null?null:{parent:In._currentValue,pool:o}}var mu=Error(a(460)),WN=Error(a(474)),Vf=Error(a(542)),V0={then:function(){}};function HN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Yf(){}function GN(o,c,f){switch(f=o[f],f===void 0?o.push(c):f!==c&&(c.then(Yf,Yf),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,VN(o),o;default:if(typeof c.status=="string")c.then(Yf,Yf);else{if(o=Jr,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=c,o.status="pending",o.then(function(x){if(c.status==="pending"){var T=c;T.status="fulfilled",T.value=x}},function(x){if(c.status==="pending"){var T=c;T.status="rejected",T.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,VN(o),o}throw xu=c,mu}}var xu=null;function KN(){if(xu===null)throw Error(a(459));var o=xu;return xu=null,o}function VN(o){if(o===mu||o===Vf)throw Error(a(483))}var yo=!1;function Y0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function X0(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function bo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function vo(o,c,f){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(Rr&2)!==0){var T=x.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),x.pending=c,c=zf(o),RN(o,null,f),c}return $f(o,x,c,f),zf(o)}function gu(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,_t(o,f)}}function Q0(o,c){var f=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var T=null,D=null;if(f=f.firstBaseUpdate,f!==null){do{var Y={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};D===null?T=D=Y:D=D.next=Y,f=f.next}while(f!==null);D===null?T=D=c:D=D.next=c}else T=D=c;f={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:x.shared,callbacks:x.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}var J0=!1;function yu(){if(J0){var o=xc;if(o!==null)throw o}}function bu(o,c,f,x){J0=!1;var T=o.updateQueue;yo=!1;var D=T.firstBaseUpdate,Y=T.lastBaseUpdate,ie=T.shared.pending;if(ie!==null){T.shared.pending=null;var Ne=ie,$e=Ne.next;Ne.next=null,Y===null?D=$e:Y.next=$e,Y=Ne;var lt=o.alternate;lt!==null&&(lt=lt.updateQueue,ie=lt.lastBaseUpdate,ie!==Y&&(ie===null?lt.firstBaseUpdate=$e:ie.next=$e,lt.lastBaseUpdate=Ne))}if(D!==null){var dt=T.baseState;Y=0,lt=$e=Ne=null,ie=D;do{var qe=ie.lane&-536870913,Ge=qe!==ie.lane;if(Ge?(yr&qe)===qe:(x&qe)===qe){qe!==0&&qe===mc&&(J0=!0),lt!==null&&(lt=lt.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Vt=o,Wt=ie;qe=c;var Gr=f;switch(Wt.tag){case 1:if(Vt=Wt.payload,typeof Vt=="function"){dt=Vt.call(Gr,dt,qe);break e}dt=Vt;break e;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=Wt.payload,qe=typeof Vt=="function"?Vt.call(Gr,dt,qe):Vt,qe==null)break e;dt=p({},dt,qe);break e;case 2:yo=!0}}qe=ie.callback,qe!==null&&(o.flags|=64,Ge&&(o.flags|=8192),Ge=T.callbacks,Ge===null?T.callbacks=[qe]:Ge.push(qe))}else Ge={lane:qe,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},lt===null?($e=lt=Ge,Ne=dt):lt=lt.next=Ge,Y|=qe;if(ie=ie.next,ie===null){if(ie=T.shared.pending,ie===null)break;Ge=ie,ie=Ge.next,Ge.next=null,T.lastBaseUpdate=Ge,T.shared.pending=null}}while(!0);lt===null&&(Ne=dt),T.baseState=Ne,T.firstBaseUpdate=$e,T.lastBaseUpdate=lt,D===null&&(T.shared.lanes=0),Eo|=Y,o.lanes=Y,o.memoizedState=dt}}function YN(o,c){if(typeof o!="function")throw Error(a(191,o));o.call(c)}function XN(o,c){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)YN(f[o],c)}var gc=V(null),Xf=V(0);function QN(o,c){o=Li,X(Xf,o),X(gc,c),Li=o|c.baseLanes}function Z0(){X(Xf,Li),X(gc,gc.current)}function eg(){Li=Xf.current,U(gc),U(Xf)}var jo=0,cr=null,Wr=null,Sn=null,Qf=!1,yc=!1,yl=!1,Jf=0,vu=0,bc=null,uM=0;function yn(){throw Error(a(321))}function tg(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!Za(o[f],c[f]))return!1;return!0}function rg(o,c,f,x,T,D){return jo=D,cr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=o===null||o.memoizedState===null?RT:PT,yl=!1,D=f(x,T),yl=!1,yc&&(D=ZN(c,f,x,T)),JN(o),D}function JN(o){R.H=ap;var c=Wr!==null&&Wr.next!==null;if(jo=0,Sn=Wr=cr=null,Qf=!1,vu=0,bc=null,c)throw Error(a(300));o===null||zn||(o=o.dependencies,o!==null&&Hf(o)&&(zn=!0))}function ZN(o,c,f,x){cr=o;var T=0;do{if(yc&&(bc=null),vu=0,yc=!1,25<=T)throw Error(a(301));if(T+=1,Sn=Wr=null,o.updateQueue!=null){var D=o.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}R.H=yM,D=c(f,x)}while(yc);return D}function hM(){var o=R.H,c=o.useState()[0];return c=typeof c.then=="function"?ju(c):c,o=o.useState()[0],(Wr!==null?Wr.memoizedState:null)!==o&&(cr.flags|=1024),c}function ng(){var o=Jf!==0;return Jf=0,o}function ag(o,c,f){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~f}function sg(o){if(Qf){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Qf=!1}jo=0,Sn=Wr=cr=null,yc=!1,vu=Jf=0,bc=null}function Ba(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?cr.memoizedState=Sn=o:Sn=Sn.next=o,Sn}function Nn(){if(Wr===null){var o=cr.alternate;o=o!==null?o.memoizedState:null}else o=Wr.next;var c=Sn===null?cr.memoizedState:Sn.next;if(c!==null)Sn=c,Wr=o;else{if(o===null)throw cr.alternate===null?Error(a(467)):Error(a(310));Wr=o,o={memoizedState:Wr.memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},Sn===null?cr.memoizedState=Sn=o:Sn=Sn.next=o}return Sn}function ig(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(o){var c=vu;return vu+=1,bc===null&&(bc=[]),o=GN(bc,o,c),c=cr,(Sn===null?c.memoizedState:Sn.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?RT:PT),o}function Zf(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ju(o);if(o.$$typeof===O)return ma(o)}throw Error(a(438,String(o)))}function og(o){var c=null,f=cr.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var x=cr.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(T){return T.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=ig(),cr.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(o),x=0;x<o;x++)f[x]=M;return c.index++,f}function Di(o,c){return typeof c=="function"?c(o):c}function ep(o){var c=Nn();return lg(c,Wr,o)}function lg(o,c,f){var x=o.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=f;var T=o.baseQueue,D=x.pending;if(D!==null){if(T!==null){var Y=T.next;T.next=D.next,D.next=Y}c.baseQueue=T=D,x.pending=null}if(D=o.baseState,T===null)o.memoizedState=D;else{c=T.next;var ie=Y=null,Ne=null,$e=c,lt=!1;do{var dt=$e.lane&-536870913;if(dt!==$e.lane?(yr&dt)===dt:(jo&dt)===dt){var qe=$e.revertLane;if(qe===0)Ne!==null&&(Ne=Ne.next={lane:0,revertLane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),dt===mc&&(lt=!0);else if((jo&qe)===qe){$e=$e.next,qe===mc&&(lt=!0);continue}else dt={lane:0,revertLane:$e.revertLane,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null},Ne===null?(ie=Ne=dt,Y=D):Ne=Ne.next=dt,cr.lanes|=qe,Eo|=qe;dt=$e.action,yl&&f(D,dt),D=$e.hasEagerState?$e.eagerState:f(D,dt)}else qe={lane:dt,revertLane:$e.revertLane,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null},Ne===null?(ie=Ne=qe,Y=D):Ne=Ne.next=qe,cr.lanes|=dt,Eo|=dt;$e=$e.next}while($e!==null&&$e!==c);if(Ne===null?Y=D:Ne.next=ie,!Za(D,o.memoizedState)&&(zn=!0,lt&&(f=xc,f!==null)))throw f;o.memoizedState=D,o.baseState=Y,o.baseQueue=Ne,x.lastRenderedState=D}return T===null&&(x.lanes=0),[o.memoizedState,x.dispatch]}function cg(o){var c=Nn(),f=c.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=o;var x=f.dispatch,T=f.pending,D=c.memoizedState;if(T!==null){f.pending=null;var Y=T=T.next;do D=o(D,Y.action),Y=Y.next;while(Y!==T);Za(D,c.memoizedState)||(zn=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),f.lastRenderedState=D}return[D,x]}function eT(o,c,f){var x=cr,T=Nn(),D=Ar;if(D){if(f===void 0)throw Error(a(407));f=f()}else f=c();var Y=!Za((Wr||T).memoizedState,f);Y&&(T.memoizedState=f,zn=!0),T=T.queue;var ie=nT.bind(null,x,T,o);if(wu(2048,8,ie,[o]),T.getSnapshot!==c||Y||Sn!==null&&Sn.memoizedState.tag&1){if(x.flags|=2048,vc(9,tp(),rT.bind(null,x,T,f,c),null),Jr===null)throw Error(a(349));D||(jo&124)!==0||tT(x,c,f)}return f}function tT(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=cr.updateQueue,c===null?(c=ig(),cr.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function rT(o,c,f,x){c.value=f,c.getSnapshot=x,aT(c)&&sT(o)}function nT(o,c,f){return f(function(){aT(c)&&sT(o)})}function aT(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!Za(o,f)}catch{return!0}}function sT(o){var c=uc(o,2);c!==null&&ss(c,o,2)}function dg(o){var c=Ba();if(typeof o=="function"){var f=o;if(o=f(),yl){Ze(!0);try{f()}finally{Ze(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:o},c}function iT(o,c,f,x){return o.baseState=f,lg(o,Wr,typeof x=="function"?x:Di)}function fM(o,c,f,x,T){if(np(o))throw Error(a(485));if(o=c.action,o!==null){var D={payload:T,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){D.listeners.push(Y)}};R.T!==null?f(!0):D.isTransition=!1,x(D),f=c.pending,f===null?(D.next=c.pending=D,oT(c,D)):(D.next=f.next,c.pending=f.next=D)}}function oT(o,c){var f=c.action,x=c.payload,T=o.state;if(c.isTransition){var D=R.T,Y={};R.T=Y;try{var ie=f(T,x),Ne=R.S;Ne!==null&&Ne(Y,ie),lT(o,c,ie)}catch($e){ug(o,c,$e)}finally{R.T=D}}else try{D=f(T,x),lT(o,c,D)}catch($e){ug(o,c,$e)}}function lT(o,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){cT(o,c,x)},function(x){return ug(o,c,x)}):cT(o,c,f)}function cT(o,c,f){c.status="fulfilled",c.value=f,dT(c),o.state=f,c=o.pending,c!==null&&(f=c.next,f===c?o.pending=null:(f=f.next,c.next=f,oT(o,f)))}function ug(o,c,f){var x=o.pending;if(o.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=f,dT(c),c=c.next;while(c!==x)}o.action=null}function dT(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function uT(o,c){return c}function hT(o,c){if(Ar){var f=Jr.formState;if(f!==null){e:{var x=cr;if(Ar){if(hn){t:{for(var T=hn,D=ui;T.nodeType!==8;){if(!D){T=null;break t}if(T=qs(T.nextSibling),T===null){T=null;break t}}D=T.data,T=D==="F!"||D==="F"?T:null}if(T){hn=qs(T.nextSibling),x=T.data==="F!";break e}}pl(x)}x=!1}x&&(c=f[0])}}return f=Ba(),f.memoizedState=f.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uT,lastRenderedState:c},f.queue=x,f=_T.bind(null,cr,x),x.dispatch=f,x=dg(!1),D=xg.bind(null,cr,!1,x.queue),x=Ba(),T={state:c,dispatch:null,action:o,pending:null},x.queue=T,f=fM.bind(null,cr,T,D,f),T.dispatch=f,x.memoizedState=o,[c,f,!1]}function fT(o){var c=Nn();return pT(c,Wr,o)}function pT(o,c,f){if(c=lg(o,c,uT)[0],o=ep(Di)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=ju(c)}catch(Y){throw Y===mu?Vf:Y}else x=c;c=Nn();var T=c.queue,D=T.dispatch;return f!==c.memoizedState&&(cr.flags|=2048,vc(9,tp(),pM.bind(null,T,f),null)),[x,D,o]}function pM(o,c){o.action=c}function mT(o){var c=Nn(),f=Wr;if(f!==null)return pT(c,f,o);Nn(),c=c.memoizedState,f=Nn();var x=f.queue.dispatch;return f.memoizedState=o,[c,x,!1]}function vc(o,c,f,x){return o={tag:o,create:f,deps:x,inst:c,next:null},c=cr.updateQueue,c===null&&(c=ig(),cr.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=o.next=o:(x=f.next,f.next=o,o.next=x,c.lastEffect=o),o}function tp(){return{destroy:void 0,resource:void 0}}function xT(){return Nn().memoizedState}function rp(o,c,f,x){var T=Ba();x=x===void 0?null:x,cr.flags|=o,T.memoizedState=vc(1|c,tp(),f,x)}function wu(o,c,f,x){var T=Nn();x=x===void 0?null:x;var D=T.memoizedState.inst;Wr!==null&&x!==null&&tg(x,Wr.memoizedState.deps)?T.memoizedState=vc(c,D,f,x):(cr.flags|=o,T.memoizedState=vc(1|c,D,f,x))}function gT(o,c){rp(8390656,8,o,c)}function yT(o,c){wu(2048,8,o,c)}function bT(o,c){return wu(4,2,o,c)}function vT(o,c){return wu(4,4,o,c)}function jT(o,c){if(typeof c=="function"){o=o();var f=c(o);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function wT(o,c,f){f=f!=null?f.concat([o]):null,wu(4,4,jT.bind(null,c,o),f)}function hg(){}function ST(o,c){var f=Nn();c=c===void 0?null:c;var x=f.memoizedState;return c!==null&&tg(c,x[1])?x[0]:(f.memoizedState=[o,c],o)}function NT(o,c){var f=Nn();c=c===void 0?null:c;var x=f.memoizedState;if(c!==null&&tg(c,x[1]))return x[0];if(x=o(),yl){Ze(!0);try{o()}finally{Ze(!1)}}return f.memoizedState=[x,c],x}function fg(o,c,f){return f===void 0||(jo&1073741824)!==0?o.memoizedState=c:(o.memoizedState=f,o=AC(),cr.lanes|=o,Eo|=o,f)}function TT(o,c,f,x){return Za(f,c)?f:gc.current!==null?(o=fg(o,f,x),Za(o,c)||(zn=!0),o):(jo&42)===0?(zn=!0,o.memoizedState=f):(o=AC(),cr.lanes|=o,Eo|=o,c)}function CT(o,c,f,x,T){var D=W.p;W.p=D!==0&&8>D?D:8;var Y=R.T,ie={};R.T=ie,xg(o,!1,c,f);try{var Ne=T(),$e=R.S;if($e!==null&&$e(ie,Ne),Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var lt=dM(Ne,x);Su(o,c,lt,as(o))}else Su(o,c,x,as(o))}catch(dt){Su(o,c,{then:function(){},status:"rejected",reason:dt},as())}finally{W.p=D,R.T=Y}}function mM(){}function pg(o,c,f,x){if(o.tag!==5)throw Error(a(476));var T=AT(o).queue;CT(o,T,c,G,f===null?mM:function(){return ET(o),f(x)})}function AT(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:G},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:f},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function ET(o){var c=AT(o).next.queue;Su(o,c,{},as())}function mg(){return ma(zu)}function OT(){return Nn().memoizedState}function kT(){return Nn().memoizedState}function xM(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var f=as();o=bo(f);var x=vo(c,o,f);x!==null&&(ss(x,c,f),gu(x,c,f)),c={cache:H0()},o.payload=c;return}c=c.return}}function gM(o,c,f){var x=as();f={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},np(o)?IT(c,f):(f=P0(o,c,f,x),f!==null&&(ss(f,o,x),DT(f,c,x)))}function _T(o,c,f){var x=as();Su(o,c,f,x)}function Su(o,c,f,x){var T={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(np(o))IT(c,T);else{var D=o.alternate;if(o.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var Y=c.lastRenderedState,ie=D(Y,f);if(T.hasEagerState=!0,T.eagerState=ie,Za(ie,Y))return $f(o,c,T,0),Jr===null&&Lf(),!1}catch{}finally{}if(f=P0(o,c,T,x),f!==null)return ss(f,o,x),DT(f,c,x),!0}return!1}function xg(o,c,f,x){if(x={lane:2,revertLane:Vg(),action:x,hasEagerState:!1,eagerState:null,next:null},np(o)){if(c)throw Error(a(479))}else c=P0(o,f,x,2),c!==null&&ss(c,o,2)}function np(o){var c=o.alternate;return o===cr||c!==null&&c===cr}function IT(o,c){yc=Qf=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function DT(o,c,f){if((f&4194048)!==0){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,_t(o,f)}}var ap={readContext:ma,use:Zf,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn},RT={readContext:ma,use:Zf,useCallback:function(o,c){return Ba().memoizedState=[o,c===void 0?null:c],o},useContext:ma,useEffect:gT,useImperativeHandle:function(o,c,f){f=f!=null?f.concat([o]):null,rp(4194308,4,jT.bind(null,c,o),f)},useLayoutEffect:function(o,c){return rp(4194308,4,o,c)},useInsertionEffect:function(o,c){rp(4,2,o,c)},useMemo:function(o,c){var f=Ba();c=c===void 0?null:c;var x=o();if(yl){Ze(!0);try{o()}finally{Ze(!1)}}return f.memoizedState=[x,c],x},useReducer:function(o,c,f){var x=Ba();if(f!==void 0){var T=f(c);if(yl){Ze(!0);try{f(c)}finally{Ze(!1)}}}else T=c;return x.memoizedState=x.baseState=T,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:T},x.queue=o,o=o.dispatch=gM.bind(null,cr,o),[x.memoizedState,o]},useRef:function(o){var c=Ba();return o={current:o},c.memoizedState=o},useState:function(o){o=dg(o);var c=o.queue,f=_T.bind(null,cr,c);return c.dispatch=f,[o.memoizedState,f]},useDebugValue:hg,useDeferredValue:function(o,c){var f=Ba();return fg(f,o,c)},useTransition:function(){var o=dg(!1);return o=CT.bind(null,cr,o.queue,!0,!1),Ba().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,f){var x=cr,T=Ba();if(Ar){if(f===void 0)throw Error(a(407));f=f()}else{if(f=c(),Jr===null)throw Error(a(349));(yr&124)!==0||tT(x,c,f)}T.memoizedState=f;var D={value:f,getSnapshot:c};return T.queue=D,gT(nT.bind(null,x,D,o),[o]),x.flags|=2048,vc(9,tp(),rT.bind(null,x,D,f,c),null),f},useId:function(){var o=Ba(),c=Jr.identifierPrefix;if(Ar){var f=ki,x=Oi;f=(x&~(1<<32-Ae(x)-1)).toString(32)+f,c=""+c+"R"+f,f=Jf++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=uM++,c=""+c+"r"+f.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:mg,useFormState:hT,useActionState:hT,useOptimistic:function(o){var c=Ba();c.memoizedState=c.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=xg.bind(null,cr,!0,f),f.dispatch=c,[o,c]},useMemoCache:og,useCacheRefresh:function(){return Ba().memoizedState=xM.bind(null,cr)}},PT={readContext:ma,use:Zf,useCallback:ST,useContext:ma,useEffect:yT,useImperativeHandle:wT,useInsertionEffect:bT,useLayoutEffect:vT,useMemo:NT,useReducer:ep,useRef:xT,useState:function(){return ep(Di)},useDebugValue:hg,useDeferredValue:function(o,c){var f=Nn();return TT(f,Wr.memoizedState,o,c)},useTransition:function(){var o=ep(Di)[0],c=Nn().memoizedState;return[typeof o=="boolean"?o:ju(o),c]},useSyncExternalStore:eT,useId:OT,useHostTransitionStatus:mg,useFormState:fT,useActionState:fT,useOptimistic:function(o,c){var f=Nn();return iT(f,Wr,o,c)},useMemoCache:og,useCacheRefresh:kT},yM={readContext:ma,use:Zf,useCallback:ST,useContext:ma,useEffect:yT,useImperativeHandle:wT,useInsertionEffect:bT,useLayoutEffect:vT,useMemo:NT,useReducer:cg,useRef:xT,useState:function(){return cg(Di)},useDebugValue:hg,useDeferredValue:function(o,c){var f=Nn();return Wr===null?fg(f,o,c):TT(f,Wr.memoizedState,o,c)},useTransition:function(){var o=cg(Di)[0],c=Nn().memoizedState;return[typeof o=="boolean"?o:ju(o),c]},useSyncExternalStore:eT,useId:OT,useHostTransitionStatus:mg,useFormState:mT,useActionState:mT,useOptimistic:function(o,c){var f=Nn();return Wr!==null?iT(f,Wr,o,c):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:og,useCacheRefresh:kT},jc=null,Nu=0;function sp(o){var c=Nu;return Nu+=1,jc===null&&(jc=[]),GN(jc,o,c)}function Tu(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function ip(o,c){throw c.$$typeof===m?Error(a(525)):(o=Object.prototype.toString.call(c),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function MT(o){var c=o._init;return c(o._payload)}function BT(o){function c(De,Oe){if(o){var Fe=De.deletions;Fe===null?(De.deletions=[Oe],De.flags|=16):Fe.push(Oe)}}function f(De,Oe){if(!o)return null;for(;Oe!==null;)c(De,Oe),Oe=Oe.sibling;return null}function x(De){for(var Oe=new Map;De!==null;)De.key!==null?Oe.set(De.key,De):Oe.set(De.index,De),De=De.sibling;return Oe}function T(De,Oe){return De=Ei(De,Oe),De.index=0,De.sibling=null,De}function D(De,Oe,Fe){return De.index=Fe,o?(Fe=De.alternate,Fe!==null?(Fe=Fe.index,Fe<Oe?(De.flags|=67108866,Oe):Fe):(De.flags|=67108866,Oe)):(De.flags|=1048576,Oe)}function Y(De){return o&&De.alternate===null&&(De.flags|=67108866),De}function ie(De,Oe,Fe,ct){return Oe===null||Oe.tag!==6?(Oe=B0(Fe,De.mode,ct),Oe.return=De,Oe):(Oe=T(Oe,Fe),Oe.return=De,Oe)}function Ne(De,Oe,Fe,ct){var Rt=Fe.type;return Rt===j?lt(De,Oe,Fe.props.children,ct,Fe.key):Oe!==null&&(Oe.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===z&&MT(Rt)===Oe.type)?(Oe=T(Oe,Fe.props),Tu(Oe,Fe),Oe.return=De,Oe):(Oe=Uf(Fe.type,Fe.key,Fe.props,null,De.mode,ct),Tu(Oe,Fe),Oe.return=De,Oe)}function $e(De,Oe,Fe,ct){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Fe.containerInfo||Oe.stateNode.implementation!==Fe.implementation?(Oe=F0(Fe,De.mode,ct),Oe.return=De,Oe):(Oe=T(Oe,Fe.children||[]),Oe.return=De,Oe)}function lt(De,Oe,Fe,ct,Rt){return Oe===null||Oe.tag!==7?(Oe=dl(Fe,De.mode,ct,Rt),Oe.return=De,Oe):(Oe=T(Oe,Fe),Oe.return=De,Oe)}function dt(De,Oe,Fe){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=B0(""+Oe,De.mode,Fe),Oe.return=De,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case g:return Fe=Uf(Oe.type,Oe.key,Oe.props,null,De.mode,Fe),Tu(Fe,Oe),Fe.return=De,Fe;case b:return Oe=F0(Oe,De.mode,Fe),Oe.return=De,Oe;case z:var ct=Oe._init;return Oe=ct(Oe._payload),dt(De,Oe,Fe)}if(_(Oe)||N(Oe))return Oe=dl(Oe,De.mode,Fe,null),Oe.return=De,Oe;if(typeof Oe.then=="function")return dt(De,sp(Oe),Fe);if(Oe.$$typeof===O)return dt(De,Gf(De,Oe),Fe);ip(De,Oe)}return null}function qe(De,Oe,Fe,ct){var Rt=Oe!==null?Oe.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Rt!==null?null:ie(De,Oe,""+Fe,ct);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case g:return Fe.key===Rt?Ne(De,Oe,Fe,ct):null;case b:return Fe.key===Rt?$e(De,Oe,Fe,ct):null;case z:return Rt=Fe._init,Fe=Rt(Fe._payload),qe(De,Oe,Fe,ct)}if(_(Fe)||N(Fe))return Rt!==null?null:lt(De,Oe,Fe,ct,null);if(typeof Fe.then=="function")return qe(De,Oe,sp(Fe),ct);if(Fe.$$typeof===O)return qe(De,Oe,Gf(De,Fe),ct);ip(De,Fe)}return null}function Ge(De,Oe,Fe,ct,Rt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return De=De.get(Fe)||null,ie(Oe,De,""+ct,Rt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case g:return De=De.get(ct.key===null?Fe:ct.key)||null,Ne(Oe,De,ct,Rt);case b:return De=De.get(ct.key===null?Fe:ct.key)||null,$e(Oe,De,ct,Rt);case z:var ur=ct._init;return ct=ur(ct._payload),Ge(De,Oe,Fe,ct,Rt)}if(_(ct)||N(ct))return De=De.get(Fe)||null,lt(Oe,De,ct,Rt,null);if(typeof ct.then=="function")return Ge(De,Oe,Fe,sp(ct),Rt);if(ct.$$typeof===O)return Ge(De,Oe,Fe,Gf(Oe,ct),Rt);ip(Oe,ct)}return null}function Vt(De,Oe,Fe,ct){for(var Rt=null,ur=null,$t=Oe,Ht=Oe=0,qn=null;$t!==null&&Ht<Fe.length;Ht++){$t.index>Ht?(qn=$t,$t=null):qn=$t.sibling;var wr=qe(De,$t,Fe[Ht],ct);if(wr===null){$t===null&&($t=qn);break}o&&$t&&wr.alternate===null&&c(De,$t),Oe=D(wr,Oe,Ht),ur===null?Rt=wr:ur.sibling=wr,ur=wr,$t=qn}if(Ht===Fe.length)return f(De,$t),Ar&&hl(De,Ht),Rt;if($t===null){for(;Ht<Fe.length;Ht++)$t=dt(De,Fe[Ht],ct),$t!==null&&(Oe=D($t,Oe,Ht),ur===null?Rt=$t:ur.sibling=$t,ur=$t);return Ar&&hl(De,Ht),Rt}for($t=x($t);Ht<Fe.length;Ht++)qn=Ge($t,De,Ht,Fe[Ht],ct),qn!==null&&(o&&qn.alternate!==null&&$t.delete(qn.key===null?Ht:qn.key),Oe=D(qn,Oe,Ht),ur===null?Rt=qn:ur.sibling=qn,ur=qn);return o&&$t.forEach(function(Bo){return c(De,Bo)}),Ar&&hl(De,Ht),Rt}function Wt(De,Oe,Fe,ct){if(Fe==null)throw Error(a(151));for(var Rt=null,ur=null,$t=Oe,Ht=Oe=0,qn=null,wr=Fe.next();$t!==null&&!wr.done;Ht++,wr=Fe.next()){$t.index>Ht?(qn=$t,$t=null):qn=$t.sibling;var Bo=qe(De,$t,wr.value,ct);if(Bo===null){$t===null&&($t=qn);break}o&&$t&&Bo.alternate===null&&c(De,$t),Oe=D(Bo,Oe,Ht),ur===null?Rt=Bo:ur.sibling=Bo,ur=Bo,$t=qn}if(wr.done)return f(De,$t),Ar&&hl(De,Ht),Rt;if($t===null){for(;!wr.done;Ht++,wr=Fe.next())wr=dt(De,wr.value,ct),wr!==null&&(Oe=D(wr,Oe,Ht),ur===null?Rt=wr:ur.sibling=wr,ur=wr);return Ar&&hl(De,Ht),Rt}for($t=x($t);!wr.done;Ht++,wr=Fe.next())wr=Ge($t,De,Ht,wr.value,ct),wr!==null&&(o&&wr.alternate!==null&&$t.delete(wr.key===null?Ht:wr.key),Oe=D(wr,Oe,Ht),ur===null?Rt=wr:ur.sibling=wr,ur=wr);return o&&$t.forEach(function(bB){return c(De,bB)}),Ar&&hl(De,Ht),Rt}function Gr(De,Oe,Fe,ct){if(typeof Fe=="object"&&Fe!==null&&Fe.type===j&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case g:e:{for(var Rt=Fe.key;Oe!==null;){if(Oe.key===Rt){if(Rt=Fe.type,Rt===j){if(Oe.tag===7){f(De,Oe.sibling),ct=T(Oe,Fe.props.children),ct.return=De,De=ct;break e}}else if(Oe.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===z&&MT(Rt)===Oe.type){f(De,Oe.sibling),ct=T(Oe,Fe.props),Tu(ct,Fe),ct.return=De,De=ct;break e}f(De,Oe);break}else c(De,Oe);Oe=Oe.sibling}Fe.type===j?(ct=dl(Fe.props.children,De.mode,ct,Fe.key),ct.return=De,De=ct):(ct=Uf(Fe.type,Fe.key,Fe.props,null,De.mode,ct),Tu(ct,Fe),ct.return=De,De=ct)}return Y(De);case b:e:{for(Rt=Fe.key;Oe!==null;){if(Oe.key===Rt)if(Oe.tag===4&&Oe.stateNode.containerInfo===Fe.containerInfo&&Oe.stateNode.implementation===Fe.implementation){f(De,Oe.sibling),ct=T(Oe,Fe.children||[]),ct.return=De,De=ct;break e}else{f(De,Oe);break}else c(De,Oe);Oe=Oe.sibling}ct=F0(Fe,De.mode,ct),ct.return=De,De=ct}return Y(De);case z:return Rt=Fe._init,Fe=Rt(Fe._payload),Gr(De,Oe,Fe,ct)}if(_(Fe))return Vt(De,Oe,Fe,ct);if(N(Fe)){if(Rt=N(Fe),typeof Rt!="function")throw Error(a(150));return Fe=Rt.call(Fe),Wt(De,Oe,Fe,ct)}if(typeof Fe.then=="function")return Gr(De,Oe,sp(Fe),ct);if(Fe.$$typeof===O)return Gr(De,Oe,Gf(De,Fe),ct);ip(De,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint"?(Fe=""+Fe,Oe!==null&&Oe.tag===6?(f(De,Oe.sibling),ct=T(Oe,Fe),ct.return=De,De=ct):(f(De,Oe),ct=B0(Fe,De.mode,ct),ct.return=De,De=ct),Y(De)):f(De,Oe)}return function(De,Oe,Fe,ct){try{Nu=0;var Rt=Gr(De,Oe,Fe,ct);return jc=null,Rt}catch($t){if($t===mu||$t===Vf)throw $t;var ur=es(29,$t,null,De.mode);return ur.lanes=ct,ur.return=De,ur}finally{}}}var wc=BT(!0),FT=BT(!1),Ss=V(null),hi=null;function wo(o){var c=o.alternate;X(Dn,Dn.current&1),X(Ss,o),hi===null&&(c===null||gc.current!==null||c.memoizedState!==null)&&(hi=o)}function LT(o){if(o.tag===22){if(X(Dn,Dn.current),X(Ss,o),hi===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(hi=o)}}else So()}function So(){X(Dn,Dn.current),X(Ss,Ss.current)}function Ri(o){U(Ss),hi===o&&(hi=null),U(Dn)}var Dn=V(0);function op(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||iy(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function gg(o,c,f,x){c=o.memoizedState,f=f(x,c),f=f==null?c:p({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var yg={enqueueSetState:function(o,c,f){o=o._reactInternals;var x=as(),T=bo(x);T.payload=c,f!=null&&(T.callback=f),c=vo(o,T,x),c!==null&&(ss(c,o,x),gu(c,o,x))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var x=as(),T=bo(x);T.tag=1,T.payload=c,f!=null&&(T.callback=f),c=vo(o,T,x),c!==null&&(ss(c,o,x),gu(c,o,x))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=as(),x=bo(f);x.tag=2,c!=null&&(x.callback=c),c=vo(o,x,f),c!==null&&(ss(c,o,f),gu(c,o,f))}};function $T(o,c,f,x,T,D,Y){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,D,Y):c.prototype&&c.prototype.isPureReactComponent?!ou(f,x)||!ou(T,D):!0}function zT(o,c,f,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==o&&yg.enqueueReplaceState(c,c.state,null)}function bl(o,c){var f=c;if("ref"in c){f={};for(var x in c)x!=="ref"&&(f[x]=c[x])}if(o=o.defaultProps){f===c&&(f=p({},f));for(var T in o)f[T]===void 0&&(f[T]=o[T])}return f}var lp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function UT(o){lp(o)}function qT(o){console.error(o)}function WT(o){lp(o)}function cp(o,c){try{var f=o.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function HT(o,c,f){try{var x=o.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function bg(o,c,f){return f=bo(f),f.tag=3,f.payload={element:null},f.callback=function(){cp(o,c)},f}function GT(o){return o=bo(o),o.tag=3,o}function KT(o,c,f,x){var T=f.type.getDerivedStateFromError;if(typeof T=="function"){var D=x.value;o.payload=function(){return T(D)},o.callback=function(){HT(c,f,x)}}var Y=f.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(o.callback=function(){HT(c,f,x),typeof T!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var ie=x.stack;this.componentDidCatch(x.value,{componentStack:ie!==null?ie:""})})}function bM(o,c,f,x,T){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=f.alternate,c!==null&&hu(c,f,T,!0),f=Ss.current,f!==null){switch(f.tag){case 13:return hi===null?qg():f.alternate===null&&fn===0&&(fn=3),f.flags&=-257,f.flags|=65536,f.lanes=T,x===V0?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([x]):c.add(x),Hg(o,x,T)),!1;case 22:return f.flags|=65536,x===V0?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([x]):f.add(x)),Hg(o,x,T)),!1}throw Error(a(435,f.tag))}return Hg(o,x,T),qg(),!1}if(Ar)return c=Ss.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=T,x!==z0&&(o=Error(a(422),{cause:x}),uu(bs(o,f)))):(x!==z0&&(c=Error(a(423),{cause:x}),uu(bs(c,f))),o=o.current.alternate,o.flags|=65536,T&=-T,o.lanes|=T,x=bs(x,f),T=bg(o.stateNode,x,T),Q0(o,T),fn!==4&&(fn=2)),!1;var D=Error(a(520),{cause:x});if(D=bs(D,f),Iu===null?Iu=[D]:Iu.push(D),fn!==4&&(fn=2),c===null)return!0;x=bs(x,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,o=T&-T,f.lanes|=o,o=bg(f.stateNode,x,o),Q0(f,o),!1;case 1:if(c=f.type,D=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Oo===null||!Oo.has(D))))return f.flags|=65536,T&=-T,f.lanes|=T,T=GT(T),KT(T,o,f,x),Q0(f,T),!1}f=f.return}while(f!==null);return!1}var VT=Error(a(461)),zn=!1;function Jn(o,c,f,x){c.child=o===null?FT(c,null,f,x):wc(c,o.child,f,x)}function YT(o,c,f,x,T){f=f.render;var D=c.ref;if("ref"in x){var Y={};for(var ie in x)ie!=="ref"&&(Y[ie]=x[ie])}else Y=x;return xl(c),x=rg(o,c,f,Y,D,T),ie=ng(),o!==null&&!zn?(ag(o,c,T),Pi(o,c,T)):(Ar&&ie&&L0(c),c.flags|=1,Jn(o,c,x,T),c.child)}function XT(o,c,f,x,T){if(o===null){var D=f.type;return typeof D=="function"&&!M0(D)&&D.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=D,QT(o,c,D,x,T)):(o=Uf(f.type,null,x,c,c.mode,T),o.ref=c.ref,o.return=c,c.child=o)}if(D=o.child,!Ag(o,T)){var Y=D.memoizedProps;if(f=f.compare,f=f!==null?f:ou,f(Y,x)&&o.ref===c.ref)return Pi(o,c,T)}return c.flags|=1,o=Ei(D,x),o.ref=c.ref,o.return=c,c.child=o}function QT(o,c,f,x,T){if(o!==null){var D=o.memoizedProps;if(ou(D,x)&&o.ref===c.ref)if(zn=!1,c.pendingProps=x=D,Ag(o,T))(o.flags&131072)!==0&&(zn=!0);else return c.lanes=o.lanes,Pi(o,c,T)}return vg(o,c,f,x,T)}function JT(o,c,f){var x=c.pendingProps,T=x.children,D=o!==null?o.memoizedState:null;if(x.mode==="hidden"){if((c.flags&128)!==0){if(x=D!==null?D.baseLanes|f:f,o!==null){for(T=c.child=o.child,D=0;T!==null;)D=D|T.lanes|T.childLanes,T=T.sibling;c.childLanes=D&~x}else c.childLanes=0,c.child=null;return ZT(o,c,x,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Kf(c,D!==null?D.cachePool:null),D!==null?QN(c,D):Z0(),LT(c);else return c.lanes=c.childLanes=536870912,ZT(o,c,D!==null?D.baseLanes|f:f,f)}else D!==null?(Kf(c,D.cachePool),QN(c,D),So(),c.memoizedState=null):(o!==null&&Kf(c,null),Z0(),So());return Jn(o,c,T,f),c.child}function ZT(o,c,f,x){var T=K0();return T=T===null?null:{parent:In._currentValue,pool:T},c.memoizedState={baseLanes:f,cachePool:T},o!==null&&Kf(c,null),Z0(),LT(c),o!==null&&hu(o,c,x,!0),null}function dp(o,c){var f=c.ref;if(f===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(a(284));(o===null||o.ref!==f)&&(c.flags|=4194816)}}function vg(o,c,f,x,T){return xl(c),f=rg(o,c,f,x,void 0,T),x=ng(),o!==null&&!zn?(ag(o,c,T),Pi(o,c,T)):(Ar&&x&&L0(c),c.flags|=1,Jn(o,c,f,T),c.child)}function eC(o,c,f,x,T,D){return xl(c),c.updateQueue=null,f=ZN(c,x,f,T),JN(o),x=ng(),o!==null&&!zn?(ag(o,c,D),Pi(o,c,D)):(Ar&&x&&L0(c),c.flags|=1,Jn(o,c,f,D),c.child)}function tC(o,c,f,x,T){if(xl(c),c.stateNode===null){var D=hc,Y=f.contextType;typeof Y=="object"&&Y!==null&&(D=ma(Y)),D=new f(x,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=yg,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=x,D.state=c.memoizedState,D.refs={},Y0(c),Y=f.contextType,D.context=typeof Y=="object"&&Y!==null?ma(Y):hc,D.state=c.memoizedState,Y=f.getDerivedStateFromProps,typeof Y=="function"&&(gg(c,f,Y,x),D.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(Y=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),Y!==D.state&&yg.enqueueReplaceState(D,D.state,null),bu(c,x,D,T),yu(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(o===null){D=c.stateNode;var ie=c.memoizedProps,Ne=bl(f,ie);D.props=Ne;var $e=D.context,lt=f.contextType;Y=hc,typeof lt=="object"&&lt!==null&&(Y=ma(lt));var dt=f.getDerivedStateFromProps;lt=typeof dt=="function"||typeof D.getSnapshotBeforeUpdate=="function",ie=c.pendingProps!==ie,lt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ie||$e!==Y)&&zT(c,D,x,Y),yo=!1;var qe=c.memoizedState;D.state=qe,bu(c,x,D,T),yu(),$e=c.memoizedState,ie||qe!==$e||yo?(typeof dt=="function"&&(gg(c,f,dt,x),$e=c.memoizedState),(Ne=yo||$T(c,f,Ne,x,qe,$e,Y))?(lt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=$e),D.props=x,D.state=$e,D.context=Y,x=Ne):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{D=c.stateNode,X0(o,c),Y=c.memoizedProps,lt=bl(f,Y),D.props=lt,dt=c.pendingProps,qe=D.context,$e=f.contextType,Ne=hc,typeof $e=="object"&&$e!==null&&(Ne=ma($e)),ie=f.getDerivedStateFromProps,($e=typeof ie=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==dt||qe!==Ne)&&zT(c,D,x,Ne),yo=!1,qe=c.memoizedState,D.state=qe,bu(c,x,D,T),yu();var Ge=c.memoizedState;Y!==dt||qe!==Ge||yo||o!==null&&o.dependencies!==null&&Hf(o.dependencies)?(typeof ie=="function"&&(gg(c,f,ie,x),Ge=c.memoizedState),(lt=yo||$T(c,f,lt,x,qe,Ge,Ne)||o!==null&&o.dependencies!==null&&Hf(o.dependencies))?($e||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(x,Ge,Ne),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(x,Ge,Ne)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||Y===o.memoizedProps&&qe===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&qe===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Ge),D.props=x,D.state=Ge,D.context=Ne,x=lt):(typeof D.componentDidUpdate!="function"||Y===o.memoizedProps&&qe===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&qe===o.memoizedState||(c.flags|=1024),x=!1)}return D=x,dp(o,c),x=(c.flags&128)!==0,D||x?(D=c.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,o!==null&&x?(c.child=wc(c,o.child,null,T),c.child=wc(c,null,f,T)):Jn(o,c,f,T),c.memoizedState=D.state,o=c.child):o=Pi(o,c,T),o}function rC(o,c,f,x){return du(),c.flags|=256,Jn(o,c,f,x),c.child}var jg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wg(o){return{baseLanes:o,cachePool:qN()}}function Sg(o,c,f){return o=o!==null?o.childLanes&~f:0,c&&(o|=Ns),o}function nC(o,c,f){var x=c.pendingProps,T=!1,D=(c.flags&128)!==0,Y;if((Y=D)||(Y=o!==null&&o.memoizedState===null?!1:(Dn.current&2)!==0),Y&&(T=!0,c.flags&=-129),Y=(c.flags&32)!==0,c.flags&=-33,o===null){if(Ar){if(T?wo(c):So(),Ar){var ie=hn,Ne;if(Ne=ie){e:{for(Ne=ie,ie=ui;Ne.nodeType!==8;){if(!ie){ie=null;break e}if(Ne=qs(Ne.nextSibling),Ne===null){ie=null;break e}}ie=Ne}ie!==null?(c.memoizedState={dehydrated:ie,treeContext:ul!==null?{id:Oi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},Ne=es(18,null,null,0),Ne.stateNode=ie,Ne.return=c,c.child=Ne,Ca=c,hn=null,Ne=!0):Ne=!1}Ne||pl(c)}if(ie=c.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return iy(ie)?c.lanes=32:c.lanes=536870912,null;Ri(c)}return ie=x.children,x=x.fallback,T?(So(),T=c.mode,ie=up({mode:"hidden",children:ie},T),x=dl(x,T,f,null),ie.return=c,x.return=c,ie.sibling=x,c.child=ie,T=c.child,T.memoizedState=wg(f),T.childLanes=Sg(o,Y,f),c.memoizedState=jg,x):(wo(c),Ng(c,ie))}if(Ne=o.memoizedState,Ne!==null&&(ie=Ne.dehydrated,ie!==null)){if(D)c.flags&256?(wo(c),c.flags&=-257,c=Tg(o,c,f)):c.memoizedState!==null?(So(),c.child=o.child,c.flags|=128,c=null):(So(),T=x.fallback,ie=c.mode,x=up({mode:"visible",children:x.children},ie),T=dl(T,ie,f,null),T.flags|=2,x.return=c,T.return=c,x.sibling=T,c.child=x,wc(c,o.child,null,f),x=c.child,x.memoizedState=wg(f),x.childLanes=Sg(o,Y,f),c.memoizedState=jg,c=T);else if(wo(c),iy(ie)){if(Y=ie.nextSibling&&ie.nextSibling.dataset,Y)var $e=Y.dgst;Y=$e,x=Error(a(419)),x.stack="",x.digest=Y,uu({value:x,source:null,stack:null}),c=Tg(o,c,f)}else if(zn||hu(o,c,f,!1),Y=(f&o.childLanes)!==0,zn||Y){if(Y=Jr,Y!==null&&(x=f&-f,x=(x&42)!==0?1:st(x),x=(x&(Y.suspendedLanes|f))!==0?0:x,x!==0&&x!==Ne.retryLane))throw Ne.retryLane=x,uc(o,x),ss(Y,o,x),VT;ie.data==="$?"||qg(),c=Tg(o,c,f)}else ie.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=Ne.treeContext,hn=qs(ie.nextSibling),Ca=c,Ar=!0,fl=null,ui=!1,o!==null&&(js[ws++]=Oi,js[ws++]=ki,js[ws++]=ul,Oi=o.id,ki=o.overflow,ul=c),c=Ng(c,x.children),c.flags|=4096);return c}return T?(So(),T=x.fallback,ie=c.mode,Ne=o.child,$e=Ne.sibling,x=Ei(Ne,{mode:"hidden",children:x.children}),x.subtreeFlags=Ne.subtreeFlags&65011712,$e!==null?T=Ei($e,T):(T=dl(T,ie,f,null),T.flags|=2),T.return=c,x.return=c,x.sibling=T,c.child=x,x=T,T=c.child,ie=o.child.memoizedState,ie===null?ie=wg(f):(Ne=ie.cachePool,Ne!==null?($e=In._currentValue,Ne=Ne.parent!==$e?{parent:$e,pool:$e}:Ne):Ne=qN(),ie={baseLanes:ie.baseLanes|f,cachePool:Ne}),T.memoizedState=ie,T.childLanes=Sg(o,Y,f),c.memoizedState=jg,x):(wo(c),f=o.child,o=f.sibling,f=Ei(f,{mode:"visible",children:x.children}),f.return=c,f.sibling=null,o!==null&&(Y=c.deletions,Y===null?(c.deletions=[o],c.flags|=16):Y.push(o)),c.child=f,c.memoizedState=null,f)}function Ng(o,c){return c=up({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function up(o,c){return o=es(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Tg(o,c,f){return wc(c,o.child,null,f),o=Ng(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function aC(o,c,f){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),q0(o.return,c,f)}function Cg(o,c,f,x,T){var D=o.memoizedState;D===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:T}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=x,D.tail=f,D.tailMode=T)}function sC(o,c,f){var x=c.pendingProps,T=x.revealOrder,D=x.tail;if(Jn(o,c,x.children,f),x=Dn.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&aC(o,f,c);else if(o.tag===19)aC(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}switch(X(Dn,x),T){case"forwards":for(f=c.child,T=null;f!==null;)o=f.alternate,o!==null&&op(o)===null&&(T=f),f=f.sibling;f=T,f===null?(T=c.child,c.child=null):(T=f.sibling,f.sibling=null),Cg(c,!1,T,f,D);break;case"backwards":for(f=null,T=c.child,c.child=null;T!==null;){if(o=T.alternate,o!==null&&op(o)===null){c.child=T;break}o=T.sibling,T.sibling=f,f=T,T=o}Cg(c,!0,f,null,D);break;case"together":Cg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pi(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),Eo|=c.lanes,(f&c.childLanes)===0)if(o!==null){if(hu(o,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(a(153));if(c.child!==null){for(o=c.child,f=Ei(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=Ei(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function Ag(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Hf(o)))}function vM(o,c,f){switch(c.tag){case 3:je(c,c.stateNode.containerInfo),go(c,In,o.memoizedState.cache),du();break;case 27:case 5:se(c);break;case 4:je(c,c.stateNode.containerInfo);break;case 10:go(c,c.type,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(wo(c),c.flags|=128,null):(f&c.child.childLanes)!==0?nC(o,c,f):(wo(c),o=Pi(o,c,f),o!==null?o.sibling:null);wo(c);break;case 19:var T=(o.flags&128)!==0;if(x=(f&c.childLanes)!==0,x||(hu(o,c,f,!1),x=(f&c.childLanes)!==0),T){if(x)return sC(o,c,f);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),X(Dn,Dn.current),x)break;return null;case 22:case 23:return c.lanes=0,JT(o,c,f);case 24:go(c,In,o.memoizedState.cache)}return Pi(o,c,f)}function iC(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps)zn=!0;else{if(!Ag(o,f)&&(c.flags&128)===0)return zn=!1,vM(o,c,f);zn=(o.flags&131072)!==0}else zn=!1,Ar&&(c.flags&1048576)!==0&&MN(c,Wf,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var x=c.elementType,T=x._init;if(x=T(x._payload),c.type=x,typeof x=="function")M0(x)?(o=bl(x,o),c.tag=1,c=tC(null,c,x,o,f)):(c.tag=0,c=vg(null,c,x,o,f));else{if(x!=null){if(T=x.$$typeof,T===S){c.tag=11,c=YT(null,c,x,o,f);break e}else if(T===I){c.tag=14,c=XT(null,c,x,o,f);break e}}throw c=P(x)||x,Error(a(306,c,""))}}return c;case 0:return vg(o,c,c.type,c.pendingProps,f);case 1:return x=c.type,T=bl(x,c.pendingProps),tC(o,c,x,T,f);case 3:e:{if(je(c,c.stateNode.containerInfo),o===null)throw Error(a(387));x=c.pendingProps;var D=c.memoizedState;T=D.element,X0(o,c),bu(c,x,null,f);var Y=c.memoizedState;if(x=Y.cache,go(c,In,x),x!==D.cache&&W0(c,[In],f,!0),yu(),x=Y.element,D.isDehydrated)if(D={element:x,isDehydrated:!1,cache:Y.cache},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){c=rC(o,c,x,f);break e}else if(x!==T){T=bs(Error(a(424)),c),uu(T),c=rC(o,c,x,f);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(hn=qs(o.firstChild),Ca=c,Ar=!0,fl=null,ui=!0,f=FT(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(du(),x===T){c=Pi(o,c,f);break e}Jn(o,c,x,f)}c=c.child}return c;case 26:return dp(o,c),o===null?(f=dA(c.type,null,c.pendingProps,null))?c.memoizedState=f:Ar||(f=c.type,o=c.pendingProps,x=Tp(le.current).createElement(f),x[Lt]=c,x[Ut]=o,ea(x,f,o),Pe(x),c.stateNode=x):c.memoizedState=dA(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return se(c),o===null&&Ar&&(x=c.stateNode=oA(c.type,c.pendingProps,le.current),Ca=c,ui=!0,T=hn,Io(c.type)?(oy=T,hn=qs(x.firstChild)):hn=T),Jn(o,c,c.pendingProps.children,f),dp(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Ar&&((T=x=hn)&&(x=VM(x,c.type,c.pendingProps,ui),x!==null?(c.stateNode=x,Ca=c,hn=qs(x.firstChild),ui=!1,T=!0):T=!1),T||pl(c)),se(c),T=c.type,D=c.pendingProps,Y=o!==null?o.memoizedProps:null,x=D.children,ny(T,D)?x=null:Y!==null&&ny(T,Y)&&(c.flags|=32),c.memoizedState!==null&&(T=rg(o,c,hM,null,null,f),zu._currentValue=T),dp(o,c),Jn(o,c,x,f),c.child;case 6:return o===null&&Ar&&((o=f=hn)&&(f=YM(f,c.pendingProps,ui),f!==null?(c.stateNode=f,Ca=c,hn=null,o=!0):o=!1),o||pl(c)),null;case 13:return nC(o,c,f);case 4:return je(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=wc(c,null,x,f):Jn(o,c,x,f),c.child;case 11:return YT(o,c,c.type,c.pendingProps,f);case 7:return Jn(o,c,c.pendingProps,f),c.child;case 8:return Jn(o,c,c.pendingProps.children,f),c.child;case 12:return Jn(o,c,c.pendingProps.children,f),c.child;case 10:return x=c.pendingProps,go(c,c.type,x.value),Jn(o,c,x.children,f),c.child;case 9:return T=c.type._context,x=c.pendingProps.children,xl(c),T=ma(T),x=x(T),c.flags|=1,Jn(o,c,x,f),c.child;case 14:return XT(o,c,c.type,c.pendingProps,f);case 15:return QT(o,c,c.type,c.pendingProps,f);case 19:return sC(o,c,f);case 31:return x=c.pendingProps,f=c.mode,x={mode:x.mode,children:x.children},o===null?(f=up(x,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Ei(o.child,x),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return JT(o,c,f);case 24:return xl(c),x=ma(In),o===null?(T=K0(),T===null&&(T=Jr,D=H0(),T.pooledCache=D,D.refCount++,D!==null&&(T.pooledCacheLanes|=f),T=D),c.memoizedState={parent:x,cache:T},Y0(c),go(c,In,T)):((o.lanes&f)!==0&&(X0(o,c),bu(c,null,null,f),yu()),T=o.memoizedState,D=c.memoizedState,T.parent!==x?(T={parent:x,cache:x},c.memoizedState=T,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=T),go(c,In,x)):(x=D.cache,go(c,In,x),x!==T.cache&&W0(c,[In],f,!0))),Jn(o,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function Mi(o){o.flags|=4}function oC(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!mA(c)){if(c=Ss.current,c!==null&&((yr&4194048)===yr?hi!==null:(yr&62914560)!==yr&&(yr&536870912)===0||c!==hi))throw xu=V0,WN;o.flags|=8192}}function hp(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ke():536870912,o.lanes|=c,Cc|=c)}function Cu(o,c){if(!Ar)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function un(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,x=0;if(c)for(var T=o.child;T!==null;)f|=T.lanes|T.childLanes,x|=T.subtreeFlags&65011712,x|=T.flags&65011712,T.return=o,T=T.sibling;else for(T=o.child;T!==null;)f|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=o,T=T.sibling;return o.subtreeFlags|=x,o.childLanes=f,c}function jM(o,c,f){var x=c.pendingProps;switch($0(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(c),null;case 1:return un(c),null;case 3:return f=c.stateNode,x=null,o!==null&&(x=o.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Ii(In),ee(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(cu(c)?Mi(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,LN())),un(c),null;case 26:return f=c.memoizedState,o===null?(Mi(c),f!==null?(un(c),oC(c,f)):(un(c),c.flags&=-16777217)):f?f!==o.memoizedState?(Mi(c),un(c),oC(c,f)):(un(c),c.flags&=-16777217):(o.memoizedProps!==x&&Mi(c),un(c),c.flags&=-16777217),null;case 27:fe(c),f=le.current;var T=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==x&&Mi(c);else{if(!x){if(c.stateNode===null)throw Error(a(166));return un(c),null}o=H.current,cu(c)?BN(c):(o=oA(T,x,f),c.stateNode=o,Mi(c))}return un(c),null;case 5:if(fe(c),f=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==x&&Mi(c);else{if(!x){if(c.stateNode===null)throw Error(a(166));return un(c),null}if(o=H.current,cu(c))BN(c);else{switch(T=Tp(le.current),o){case 1:o=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=T.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof x.is=="string"?T.createElement("select",{is:x.is}):T.createElement("select"),x.multiple?o.multiple=!0:x.size&&(o.size=x.size);break;default:o=typeof x.is=="string"?T.createElement(f,{is:x.is}):T.createElement(f)}}o[Lt]=c,o[Ut]=x;e:for(T=c.child;T!==null;){if(T.tag===5||T.tag===6)o.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===c)break e;for(;T.sibling===null;){if(T.return===null||T.return===c)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}c.stateNode=o;e:switch(ea(o,f,x),f){case"button":case"input":case"select":case"textarea":o=!!x.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Mi(c)}}return un(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==x&&Mi(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(a(166));if(o=le.current,cu(c)){if(o=c.stateNode,f=c.memoizedProps,x=null,T=Ca,T!==null)switch(T.tag){case 27:case 5:x=T.memoizedProps}o[Lt]=c,o=!!(o.nodeValue===f||x!==null&&x.suppressHydrationWarning===!0||eA(o.nodeValue,f)),o||pl(c)}else o=Tp(o).createTextNode(x),o[Lt]=c,c.stateNode=o}return un(c),null;case 13:if(x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(T=cu(c),x!==null&&x.dehydrated!==null){if(o===null){if(!T)throw Error(a(318));if(T=c.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));T[Lt]=c}else du(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;un(c),T=!1}else T=LN(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=T),T=!0;if(!T)return c.flags&256?(Ri(c),c):(Ri(c),null)}if(Ri(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=x!==null,o=o!==null&&o.memoizedState!==null,f){x=c.child,T=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(T=x.alternate.memoizedState.cachePool.pool);var D=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(D=x.memoizedState.cachePool.pool),D!==T&&(x.flags|=2048)}return f!==o&&f&&(c.child.flags|=8192),hp(c,c.updateQueue),un(c),null;case 4:return ee(),o===null&&Jg(c.stateNode.containerInfo),un(c),null;case 10:return Ii(c.type),un(c),null;case 19:if(U(Dn),T=c.memoizedState,T===null)return un(c),null;if(x=(c.flags&128)!==0,D=T.rendering,D===null)if(x)Cu(T,!1);else{if(fn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(D=op(o),D!==null){for(c.flags|=128,Cu(T,!1),o=D.updateQueue,c.updateQueue=o,hp(c,o),c.subtreeFlags=0,o=f,f=c.child;f!==null;)PN(f,o),f=f.sibling;return X(Dn,Dn.current&1|2),c.child}o=o.sibling}T.tail!==null&&Be()>mp&&(c.flags|=128,x=!0,Cu(T,!1),c.lanes=4194304)}else{if(!x)if(o=op(D),o!==null){if(c.flags|=128,x=!0,o=o.updateQueue,c.updateQueue=o,hp(c,o),Cu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!D.alternate&&!Ar)return un(c),null}else 2*Be()-T.renderingStartTime>mp&&f!==536870912&&(c.flags|=128,x=!0,Cu(T,!1),c.lanes=4194304);T.isBackwards?(D.sibling=c.child,c.child=D):(o=T.last,o!==null?o.sibling=D:c.child=D,T.last=D)}return T.tail!==null?(c=T.tail,T.rendering=c,T.tail=c.sibling,T.renderingStartTime=Be(),c.sibling=null,o=Dn.current,X(Dn,x?o&1|2:o&1),c):(un(c),null);case 22:case 23:return Ri(c),eg(),x=c.memoizedState!==null,o!==null?o.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(f&536870912)!==0&&(c.flags&128)===0&&(un(c),c.subtreeFlags&6&&(c.flags|=8192)):un(c),f=c.updateQueue,f!==null&&hp(c,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==f&&(c.flags|=2048),o!==null&&U(gl),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Ii(In),un(c),null;case 25:return null;case 30:return null}throw Error(a(156,c.tag))}function wM(o,c){switch($0(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Ii(In),ee(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return fe(c),null;case 13:if(Ri(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(a(340));du()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return U(Dn),null;case 4:return ee(),null;case 10:return Ii(c.type),null;case 22:case 23:return Ri(c),eg(),o!==null&&U(gl),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Ii(In),null;case 25:return null;default:return null}}function lC(o,c){switch($0(c),c.tag){case 3:Ii(In),ee();break;case 26:case 27:case 5:fe(c);break;case 4:ee();break;case 13:Ri(c);break;case 19:U(Dn);break;case 10:Ii(c.type);break;case 22:case 23:Ri(c),eg(),o!==null&&U(gl);break;case 24:Ii(In)}}function Au(o,c){try{var f=c.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var T=x.next;f=T;do{if((f.tag&o)===o){x=void 0;var D=f.create,Y=f.inst;x=D(),Y.destroy=x}f=f.next}while(f!==T)}}catch(ie){Yr(c,c.return,ie)}}function No(o,c,f){try{var x=c.updateQueue,T=x!==null?x.lastEffect:null;if(T!==null){var D=T.next;x=D;do{if((x.tag&o)===o){var Y=x.inst,ie=Y.destroy;if(ie!==void 0){Y.destroy=void 0,T=c;var Ne=f,$e=ie;try{$e()}catch(lt){Yr(T,Ne,lt)}}}x=x.next}while(x!==D)}}catch(lt){Yr(c,c.return,lt)}}function cC(o){var c=o.updateQueue;if(c!==null){var f=o.stateNode;try{XN(c,f)}catch(x){Yr(o,o.return,x)}}}function dC(o,c,f){f.props=bl(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(x){Yr(o,c,x)}}function Eu(o,c){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var x=o.stateNode;break;case 30:x=o.stateNode;break;default:x=o.stateNode}typeof f=="function"?o.refCleanup=f(x):f.current=x}}catch(T){Yr(o,c,T)}}function fi(o,c){var f=o.ref,x=o.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(T){Yr(o,c,T)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(T){Yr(o,c,T)}else f.current=null}function uC(o){var c=o.type,f=o.memoizedProps,x=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&x.focus();break e;case"img":f.src?x.src=f.src:f.srcSet&&(x.srcset=f.srcSet)}}catch(T){Yr(o,o.return,T)}}function Eg(o,c,f){try{var x=o.stateNode;qM(x,o.type,f,c),x[Ut]=c}catch(T){Yr(o,o.return,T)}}function hC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Io(o.type)||o.tag===4}function Og(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||hC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Io(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function kg(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(o),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Np));else if(x!==4&&(x===27&&Io(o.type)&&(f=o.stateNode,c=null),o=o.child,o!==null))for(kg(o,c,f),o=o.sibling;o!==null;)kg(o,c,f),o=o.sibling}function fp(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(x!==4&&(x===27&&Io(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(fp(o,c,f),o=o.sibling;o!==null;)fp(o,c,f),o=o.sibling}function fC(o){var c=o.stateNode,f=o.memoizedProps;try{for(var x=o.type,T=c.attributes;T.length;)c.removeAttributeNode(T[0]);ea(c,x,f),c[Lt]=o,c[Ut]=f}catch(D){Yr(o,o.return,D)}}var Bi=!1,bn=!1,_g=!1,pC=typeof WeakSet=="function"?WeakSet:Set,Un=null;function SM(o,c){if(o=o.containerInfo,ty=_p,o=TN(o),O0(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var T=x.anchorOffset,D=x.focusNode;x=x.focusOffset;try{f.nodeType,D.nodeType}catch{f=null;break e}var Y=0,ie=-1,Ne=-1,$e=0,lt=0,dt=o,qe=null;t:for(;;){for(var Ge;dt!==f||T!==0&&dt.nodeType!==3||(ie=Y+T),dt!==D||x!==0&&dt.nodeType!==3||(Ne=Y+x),dt.nodeType===3&&(Y+=dt.nodeValue.length),(Ge=dt.firstChild)!==null;)qe=dt,dt=Ge;for(;;){if(dt===o)break t;if(qe===f&&++$e===T&&(ie=Y),qe===D&&++lt===x&&(Ne=Y),(Ge=dt.nextSibling)!==null)break;dt=qe,qe=dt.parentNode}dt=Ge}f=ie===-1||Ne===-1?null:{start:ie,end:Ne}}else f=null}f=f||{start:0,end:0}}else f=null;for(ry={focusedElem:o,selectionRange:f},_p=!1,Un=c;Un!==null;)if(c=Un,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,Un=o;else for(;Un!==null;){switch(c=Un,D=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&D!==null){o=void 0,f=c,T=D.memoizedProps,D=D.memoizedState,x=f.stateNode;try{var Vt=bl(f.type,T,f.elementType===f.type);o=x.getSnapshotBeforeUpdate(Vt,D),x.__reactInternalSnapshotBeforeUpdate=o}catch(Wt){Yr(f,f.return,Wt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,f=o.nodeType,f===9)sy(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":sy(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=c.sibling,o!==null){o.return=c.return,Un=o;break}Un=c.return}}function mC(o,c,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:To(o,f),x&4&&Au(5,f);break;case 1:if(To(o,f),x&4)if(o=f.stateNode,c===null)try{o.componentDidMount()}catch(Y){Yr(f,f.return,Y)}else{var T=bl(f.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(T,c,o.__reactInternalSnapshotBeforeUpdate)}catch(Y){Yr(f,f.return,Y)}}x&64&&cC(f),x&512&&Eu(f,f.return);break;case 3:if(To(o,f),x&64&&(o=f.updateQueue,o!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{XN(o,c)}catch(Y){Yr(f,f.return,Y)}}break;case 27:c===null&&x&4&&fC(f);case 26:case 5:To(o,f),c===null&&x&4&&uC(f),x&512&&Eu(f,f.return);break;case 12:To(o,f);break;case 13:To(o,f),x&4&&yC(o,f),x&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=IM.bind(null,f),XM(o,f))));break;case 22:if(x=f.memoizedState!==null||Bi,!x){c=c!==null&&c.memoizedState!==null||bn,T=Bi;var D=bn;Bi=x,(bn=c)&&!D?Co(o,f,(f.subtreeFlags&8772)!==0):To(o,f),Bi=T,bn=D}break;case 30:break;default:To(o,f)}}function xC(o){var c=o.alternate;c!==null&&(o.alternate=null,xC(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&pe(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var an=null,Fa=!1;function Fi(o,c,f){for(f=f.child;f!==null;)gC(o,c,f),f=f.sibling}function gC(o,c,f){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(tt,f)}catch{}switch(f.tag){case 26:bn||fi(f,c),Fi(o,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:bn||fi(f,c);var x=an,T=Fa;Io(f.type)&&(an=f.stateNode,Fa=!1),Fi(o,c,f),Bu(f.stateNode),an=x,Fa=T;break;case 5:bn||fi(f,c);case 6:if(x=an,T=Fa,an=null,Fi(o,c,f),an=x,Fa=T,an!==null)if(Fa)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(f.stateNode)}catch(D){Yr(f,c,D)}else try{an.removeChild(f.stateNode)}catch(D){Yr(f,c,D)}break;case 18:an!==null&&(Fa?(o=an,sA(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Hu(o)):sA(an,f.stateNode));break;case 4:x=an,T=Fa,an=f.stateNode.containerInfo,Fa=!0,Fi(o,c,f),an=x,Fa=T;break;case 0:case 11:case 14:case 15:bn||No(2,f,c),bn||No(4,f,c),Fi(o,c,f);break;case 1:bn||(fi(f,c),x=f.stateNode,typeof x.componentWillUnmount=="function"&&dC(f,c,x)),Fi(o,c,f);break;case 21:Fi(o,c,f);break;case 22:bn=(x=bn)||f.memoizedState!==null,Fi(o,c,f),bn=x;break;default:Fi(o,c,f)}}function yC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Hu(o)}catch(f){Yr(c,c.return,f)}}function NM(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new pC),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new pC),c;default:throw Error(a(435,o.tag))}}function Ig(o,c){var f=NM(o);c.forEach(function(x){var T=DM.bind(null,o,x);f.has(x)||(f.add(x),x.then(T,T))})}function ts(o,c){var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var T=f[x],D=o,Y=c,ie=Y;e:for(;ie!==null;){switch(ie.tag){case 27:if(Io(ie.type)){an=ie.stateNode,Fa=!1;break e}break;case 5:an=ie.stateNode,Fa=!1;break e;case 3:case 4:an=ie.stateNode.containerInfo,Fa=!0;break e}ie=ie.return}if(an===null)throw Error(a(160));gC(D,Y,T),an=null,Fa=!1,D=T.alternate,D!==null&&(D.return=null),T.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)bC(c,o),c=c.sibling}var Us=null;function bC(o,c){var f=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ts(c,o),rs(o),x&4&&(No(3,o,o.return),Au(3,o),No(5,o,o.return));break;case 1:ts(c,o),rs(o),x&512&&(bn||f===null||fi(f,f.return)),x&64&&Bi&&(o=o.updateQueue,o!==null&&(x=o.callbacks,x!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:var T=Us;if(ts(c,o),rs(o),x&512&&(bn||f===null||fi(f,f.return)),x&4){var D=f!==null?f.memoizedState:null;if(x=o.memoizedState,f===null)if(x===null)if(o.stateNode===null){e:{x=o.type,f=o.memoizedProps,T=T.ownerDocument||T;t:switch(x){case"title":D=T.getElementsByTagName("title")[0],(!D||D[he]||D[Lt]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=T.createElement(x),T.head.insertBefore(D,T.querySelector("head > title"))),ea(D,x,f),D[Lt]=o,Pe(D),x=D;break e;case"link":var Y=fA("link","href",T).get(x+(f.href||""));if(Y){for(var ie=0;ie<Y.length;ie++)if(D=Y[ie],D.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&D.getAttribute("rel")===(f.rel==null?null:f.rel)&&D.getAttribute("title")===(f.title==null?null:f.title)&&D.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){Y.splice(ie,1);break t}}D=T.createElement(x),ea(D,x,f),T.head.appendChild(D);break;case"meta":if(Y=fA("meta","content",T).get(x+(f.content||""))){for(ie=0;ie<Y.length;ie++)if(D=Y[ie],D.getAttribute("content")===(f.content==null?null:""+f.content)&&D.getAttribute("name")===(f.name==null?null:f.name)&&D.getAttribute("property")===(f.property==null?null:f.property)&&D.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&D.getAttribute("charset")===(f.charSet==null?null:f.charSet)){Y.splice(ie,1);break t}}D=T.createElement(x),ea(D,x,f),T.head.appendChild(D);break;default:throw Error(a(468,x))}D[Lt]=o,Pe(D),x=D}o.stateNode=x}else pA(T,o.type,o.stateNode);else o.stateNode=hA(T,x,o.memoizedProps);else D!==x?(D===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):D.count--,x===null?pA(T,o.type,o.stateNode):hA(T,x,o.memoizedProps)):x===null&&o.stateNode!==null&&Eg(o,o.memoizedProps,f.memoizedProps)}break;case 27:ts(c,o),rs(o),x&512&&(bn||f===null||fi(f,f.return)),f!==null&&x&4&&Eg(o,o.memoizedProps,f.memoizedProps);break;case 5:if(ts(c,o),rs(o),x&512&&(bn||f===null||fi(f,f.return)),o.flags&32){T=o.stateNode;try{zt(T,"")}catch(Ge){Yr(o,o.return,Ge)}}x&4&&o.stateNode!=null&&(T=o.memoizedProps,Eg(o,T,f!==null?f.memoizedProps:T)),x&1024&&(_g=!0);break;case 6:if(ts(c,o),rs(o),x&4){if(o.stateNode===null)throw Error(a(162));x=o.memoizedProps,f=o.stateNode;try{f.nodeValue=x}catch(Ge){Yr(o,o.return,Ge)}}break;case 3:if(Ep=null,T=Us,Us=Cp(c.containerInfo),ts(c,o),Us=T,rs(o),x&4&&f!==null&&f.memoizedState.isDehydrated)try{Hu(c.containerInfo)}catch(Ge){Yr(o,o.return,Ge)}_g&&(_g=!1,vC(o));break;case 4:x=Us,Us=Cp(o.stateNode.containerInfo),ts(c,o),rs(o),Us=x;break;case 12:ts(c,o),rs(o);break;case 13:ts(c,o),rs(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Fg=Be()),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Ig(o,x)));break;case 22:T=o.memoizedState!==null;var Ne=f!==null&&f.memoizedState!==null,$e=Bi,lt=bn;if(Bi=$e||T,bn=lt||Ne,ts(c,o),bn=lt,Bi=$e,rs(o),x&8192)e:for(c=o.stateNode,c._visibility=T?c._visibility&-2:c._visibility|1,T&&(f===null||Ne||Bi||bn||vl(o)),f=null,c=o;;){if(c.tag===5||c.tag===26){if(f===null){Ne=f=c;try{if(D=Ne.stateNode,T)Y=D.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ie=Ne.stateNode;var dt=Ne.memoizedProps.style,qe=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;ie.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(Ge){Yr(Ne,Ne.return,Ge)}}}else if(c.tag===6){if(f===null){Ne=c;try{Ne.stateNode.nodeValue=T?"":Ne.memoizedProps}catch(Ge){Yr(Ne,Ne.return,Ge)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=o.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,Ig(o,f))));break;case 19:ts(c,o),rs(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Ig(o,x)));break;case 30:break;case 21:break;default:ts(c,o),rs(o)}}function rs(o){var c=o.flags;if(c&2){try{for(var f,x=o.return;x!==null;){if(hC(x)){f=x;break}x=x.return}if(f==null)throw Error(a(160));switch(f.tag){case 27:var T=f.stateNode,D=Og(o);fp(o,D,T);break;case 5:var Y=f.stateNode;f.flags&32&&(zt(Y,""),f.flags&=-33);var ie=Og(o);fp(o,ie,Y);break;case 3:case 4:var Ne=f.stateNode.containerInfo,$e=Og(o);kg(o,$e,Ne);break;default:throw Error(a(161))}}catch(lt){Yr(o,o.return,lt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function vC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;vC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function To(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)mC(o,c.alternate,c),c=c.sibling}function vl(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:No(4,c,c.return),vl(c);break;case 1:fi(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&dC(c,c.return,f),vl(c);break;case 27:Bu(c.stateNode);case 26:case 5:fi(c,c.return),vl(c);break;case 22:c.memoizedState===null&&vl(c);break;case 30:vl(c);break;default:vl(c)}o=o.sibling}}function Co(o,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,T=o,D=c,Y=D.flags;switch(D.tag){case 0:case 11:case 15:Co(T,D,f),Au(4,D);break;case 1:if(Co(T,D,f),x=D,T=x.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch($e){Yr(x,x.return,$e)}if(x=D,T=x.updateQueue,T!==null){var ie=x.stateNode;try{var Ne=T.shared.hiddenCallbacks;if(Ne!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Ne.length;T++)YN(Ne[T],ie)}catch($e){Yr(x,x.return,$e)}}f&&Y&64&&cC(D),Eu(D,D.return);break;case 27:fC(D);case 26:case 5:Co(T,D,f),f&&x===null&&Y&4&&uC(D),Eu(D,D.return);break;case 12:Co(T,D,f);break;case 13:Co(T,D,f),f&&Y&4&&yC(T,D);break;case 22:D.memoizedState===null&&Co(T,D,f),Eu(D,D.return);break;case 30:break;default:Co(T,D,f)}c=c.sibling}}function Dg(o,c){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&fu(f))}function Rg(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&fu(o))}function pi(o,c,f,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)jC(o,c,f,x),c=c.sibling}function jC(o,c,f,x){var T=c.flags;switch(c.tag){case 0:case 11:case 15:pi(o,c,f,x),T&2048&&Au(9,c);break;case 1:pi(o,c,f,x);break;case 3:pi(o,c,f,x),T&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&fu(o)));break;case 12:if(T&2048){pi(o,c,f,x),o=c.stateNode;try{var D=c.memoizedProps,Y=D.id,ie=D.onPostCommit;typeof ie=="function"&&ie(Y,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Ne){Yr(c,c.return,Ne)}}else pi(o,c,f,x);break;case 13:pi(o,c,f,x);break;case 23:break;case 22:D=c.stateNode,Y=c.alternate,c.memoizedState!==null?D._visibility&2?pi(o,c,f,x):Ou(o,c):D._visibility&2?pi(o,c,f,x):(D._visibility|=2,Sc(o,c,f,x,(c.subtreeFlags&10256)!==0)),T&2048&&Dg(Y,c);break;case 24:pi(o,c,f,x),T&2048&&Rg(c.alternate,c);break;default:pi(o,c,f,x)}}function Sc(o,c,f,x,T){for(T=T&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var D=o,Y=c,ie=f,Ne=x,$e=Y.flags;switch(Y.tag){case 0:case 11:case 15:Sc(D,Y,ie,Ne,T),Au(8,Y);break;case 23:break;case 22:var lt=Y.stateNode;Y.memoizedState!==null?lt._visibility&2?Sc(D,Y,ie,Ne,T):Ou(D,Y):(lt._visibility|=2,Sc(D,Y,ie,Ne,T)),T&&$e&2048&&Dg(Y.alternate,Y);break;case 24:Sc(D,Y,ie,Ne,T),T&&$e&2048&&Rg(Y.alternate,Y);break;default:Sc(D,Y,ie,Ne,T)}c=c.sibling}}function Ou(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=o,x=c,T=x.flags;switch(x.tag){case 22:Ou(f,x),T&2048&&Dg(x.alternate,x);break;case 24:Ou(f,x),T&2048&&Rg(x.alternate,x);break;default:Ou(f,x)}c=c.sibling}}var ku=8192;function Nc(o){if(o.subtreeFlags&ku)for(o=o.child;o!==null;)wC(o),o=o.sibling}function wC(o){switch(o.tag){case 26:Nc(o),o.flags&ku&&o.memoizedState!==null&&cB(Us,o.memoizedState,o.memoizedProps);break;case 5:Nc(o);break;case 3:case 4:var c=Us;Us=Cp(o.stateNode.containerInfo),Nc(o),Us=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=ku,ku=16777216,Nc(o),ku=c):Nc(o));break;default:Nc(o)}}function SC(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function _u(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];Un=x,TC(x,o)}SC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)NC(o),o=o.sibling}function NC(o){switch(o.tag){case 0:case 11:case 15:_u(o),o.flags&2048&&No(9,o,o.return);break;case 3:_u(o);break;case 12:_u(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,pp(o)):_u(o);break;default:_u(o)}}function pp(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];Un=x,TC(x,o)}SC(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:No(8,c,c.return),pp(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,pp(c));break;default:pp(c)}o=o.sibling}}function TC(o,c){for(;Un!==null;){var f=Un;switch(f.tag){case 0:case 11:case 15:No(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:fu(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,Un=x;else e:for(f=o;Un!==null;){x=Un;var T=x.sibling,D=x.return;if(xC(x),x===f){Un=null;break e}if(T!==null){T.return=D,Un=T;break e}Un=D}}}var TM={getCacheForType:function(o){var c=ma(In),f=c.data.get(o);return f===void 0&&(f=o(),c.data.set(o,f)),f}},CM=typeof WeakMap=="function"?WeakMap:Map,Rr=0,Jr=null,hr=null,yr=0,Pr=0,ns=null,Ao=!1,Tc=!1,Pg=!1,Li=0,fn=0,Eo=0,jl=0,Mg=0,Ns=0,Cc=0,Iu=null,La=null,Bg=!1,Fg=0,mp=1/0,xp=null,Oo=null,Zn=0,ko=null,Ac=null,Ec=0,Lg=0,$g=null,CC=null,Du=0,zg=null;function as(){if((Rr&2)!==0&&yr!==0)return yr&-yr;if(R.T!==null){var o=mc;return o!==0?o:Vg()}return yt()}function AC(){Ns===0&&(Ns=(yr&536870912)===0||Ar?xe():536870912);var o=Ss.current;return o!==null&&(o.flags|=32),Ns}function ss(o,c,f){(o===Jr&&(Pr===2||Pr===9)||o.cancelPendingCommit!==null)&&(Oc(o,0),_o(o,yr,Ns,!1)),ot(o,f),((Rr&2)===0||o!==Jr)&&(o===Jr&&((Rr&2)===0&&(jl|=f),fn===4&&_o(o,yr,Ns,!1)),mi(o))}function EC(o,c,f){if((Rr&6)!==0)throw Error(a(327));var x=!f&&(c&124)===0&&(c&o.expiredLanes)===0||Ye(o,c),T=x?OM(o,c):Wg(o,c,!0),D=x;do{if(T===0){Tc&&!x&&_o(o,c,0,!1);break}else{if(f=o.current.alternate,D&&!AM(f)){T=Wg(o,c,!1),D=!1;continue}if(T===2){if(D=c,o.errorRecoveryDisabledLanes&D)var Y=0;else Y=o.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){c=Y;e:{var ie=o;T=Iu;var Ne=ie.current.memoizedState.isDehydrated;if(Ne&&(Oc(ie,Y).flags|=256),Y=Wg(ie,Y,!1),Y!==2){if(Pg&&!Ne){ie.errorRecoveryDisabledLanes|=D,jl|=D,T=4;break e}D=La,La=T,D!==null&&(La===null?La=D:La.push.apply(La,D))}T=Y}if(D=!1,T!==2)continue}}if(T===1){Oc(o,0),_o(o,c,0,!0);break}e:{switch(x=o,D=T,D){case 0:case 1:throw Error(a(345));case 4:if((c&4194048)!==c)break;case 6:_o(x,c,Ns,!Ao);break e;case 2:La=null;break;case 3:case 5:break;default:throw Error(a(329))}if((c&62914560)===c&&(T=Fg+300-Be(),10<T)){if(_o(x,c,Ns,!Ao),Ie(x,0,!0)!==0)break e;x.timeoutHandle=nA(OC.bind(null,x,f,La,xp,Bg,c,Ns,jl,Cc,Ao,D,2,-0,0),T);break e}OC(x,f,La,xp,Bg,c,Ns,jl,Cc,Ao,D,0,-0,0)}}break}while(!0);mi(o)}function OC(o,c,f,x,T,D,Y,ie,Ne,$e,lt,dt,qe,Ge){if(o.timeoutHandle=-1,dt=c.subtreeFlags,(dt&8192||(dt&16785408)===16785408)&&($u={stylesheets:null,count:0,unsuspend:lB},wC(c),dt=dB(),dt!==null)){o.cancelPendingCommit=dt(MC.bind(null,o,c,D,f,x,T,Y,ie,Ne,lt,1,qe,Ge)),_o(o,D,Y,!$e);return}MC(o,c,D,f,x,T,Y,ie,Ne)}function AM(o){for(var c=o;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var T=f[x],D=T.getSnapshot;T=T.value;try{if(!Za(D(),T))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function _o(o,c,f,x){c&=~Mg,c&=~jl,o.suspendedLanes|=c,o.pingedLanes&=~c,x&&(o.warmLanes|=c),x=o.expirationTimes;for(var T=c;0<T;){var D=31-Ae(T),Y=1<<D;x[D]=-1,T&=~Y}f!==0&&Tt(o,f,c)}function gp(){return(Rr&6)===0?(Ru(0),!1):!0}function Ug(){if(hr!==null){if(Pr===0)var o=hr.return;else o=hr,_i=ml=null,sg(o),jc=null,Nu=0,o=hr;for(;o!==null;)lC(o.alternate,o),o=o.return;hr=null}}function Oc(o,c){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,HM(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),Ug(),Jr=o,hr=f=Ei(o.current,null),yr=c,Pr=0,ns=null,Ao=!1,Tc=Ye(o,c),Pg=!1,Cc=Ns=Mg=jl=Eo=fn=0,La=Iu=null,Bg=!1,(c&8)!==0&&(c|=c&32);var x=o.entangledLanes;if(x!==0)for(o=o.entanglements,x&=c;0<x;){var T=31-Ae(x),D=1<<T;c|=o[T],x&=~D}return Li=c,Lf(),f}function kC(o,c){cr=null,R.H=ap,c===mu||c===Vf?(c=KN(),Pr=3):c===WN?(c=KN(),Pr=4):Pr=c===VT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ns=c,hr===null&&(fn=1,cp(o,bs(c,o.current)))}function _C(){var o=R.H;return R.H=ap,o===null?ap:o}function IC(){var o=R.A;return R.A=TM,o}function qg(){fn=4,Ao||(yr&4194048)!==yr&&Ss.current!==null||(Tc=!0),(Eo&134217727)===0&&(jl&134217727)===0||Jr===null||_o(Jr,yr,Ns,!1)}function Wg(o,c,f){var x=Rr;Rr|=2;var T=_C(),D=IC();(Jr!==o||yr!==c)&&(xp=null,Oc(o,c)),c=!1;var Y=fn;e:do try{if(Pr!==0&&hr!==null){var ie=hr,Ne=ns;switch(Pr){case 8:Ug(),Y=6;break e;case 3:case 2:case 9:case 6:Ss.current===null&&(c=!0);var $e=Pr;if(Pr=0,ns=null,kc(o,ie,Ne,$e),f&&Tc){Y=0;break e}break;default:$e=Pr,Pr=0,ns=null,kc(o,ie,Ne,$e)}}EM(),Y=fn;break}catch(lt){kC(o,lt)}while(!0);return c&&o.shellSuspendCounter++,_i=ml=null,Rr=x,R.H=T,R.A=D,hr===null&&(Jr=null,yr=0,Lf()),Y}function EM(){for(;hr!==null;)DC(hr)}function OM(o,c){var f=Rr;Rr|=2;var x=_C(),T=IC();Jr!==o||yr!==c?(xp=null,mp=Be()+500,Oc(o,c)):Tc=Ye(o,c);e:do try{if(Pr!==0&&hr!==null){c=hr;var D=ns;t:switch(Pr){case 1:Pr=0,ns=null,kc(o,c,D,1);break;case 2:case 9:if(HN(D)){Pr=0,ns=null,RC(c);break}c=function(){Pr!==2&&Pr!==9||Jr!==o||(Pr=7),mi(o)},D.then(c,c);break e;case 3:Pr=7;break e;case 4:Pr=5;break e;case 7:HN(D)?(Pr=0,ns=null,RC(c)):(Pr=0,ns=null,kc(o,c,D,7));break;case 5:var Y=null;switch(hr.tag){case 26:Y=hr.memoizedState;case 5:case 27:var ie=hr;if(!Y||mA(Y)){Pr=0,ns=null;var Ne=ie.sibling;if(Ne!==null)hr=Ne;else{var $e=ie.return;$e!==null?(hr=$e,yp($e)):hr=null}break t}}Pr=0,ns=null,kc(o,c,D,5);break;case 6:Pr=0,ns=null,kc(o,c,D,6);break;case 8:Ug(),fn=6;break e;default:throw Error(a(462))}}kM();break}catch(lt){kC(o,lt)}while(!0);return _i=ml=null,R.H=x,R.A=T,Rr=f,hr!==null?0:(Jr=null,yr=0,Lf(),fn)}function kM(){for(;hr!==null&&!Me();)DC(hr)}function DC(o){var c=iC(o.alternate,o,Li);o.memoizedProps=o.pendingProps,c===null?yp(o):hr=c}function RC(o){var c=o,f=c.alternate;switch(c.tag){case 15:case 0:c=eC(f,c,c.pendingProps,c.type,void 0,yr);break;case 11:c=eC(f,c,c.pendingProps,c.type.render,c.ref,yr);break;case 5:sg(c);default:lC(f,c),c=hr=PN(c,Li),c=iC(f,c,Li)}o.memoizedProps=o.pendingProps,c===null?yp(o):hr=c}function kc(o,c,f,x){_i=ml=null,sg(c),jc=null,Nu=0;var T=c.return;try{if(bM(o,T,c,f,yr)){fn=1,cp(o,bs(f,o.current)),hr=null;return}}catch(D){if(T!==null)throw hr=T,D;fn=1,cp(o,bs(f,o.current)),hr=null;return}c.flags&32768?(Ar||x===1?o=!0:Tc||(yr&536870912)!==0?o=!1:(Ao=o=!0,(x===2||x===9||x===3||x===6)&&(x=Ss.current,x!==null&&x.tag===13&&(x.flags|=16384))),PC(c,o)):yp(c)}function yp(o){var c=o;do{if((c.flags&32768)!==0){PC(c,Ao);return}o=c.return;var f=jM(c.alternate,c,Li);if(f!==null){hr=f;return}if(c=c.sibling,c!==null){hr=c;return}hr=c=o}while(c!==null);fn===0&&(fn=5)}function PC(o,c){do{var f=wM(o.alternate,o);if(f!==null){f.flags&=32767,hr=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(o=o.sibling,o!==null)){hr=o;return}hr=o=f}while(o!==null);fn=6,hr=null}function MC(o,c,f,x,T,D,Y,ie,Ne){o.cancelPendingCommit=null;do bp();while(Zn!==0);if((Rr&6)!==0)throw Error(a(327));if(c!==null){if(c===o.current)throw Error(a(177));if(D=c.lanes|c.childLanes,D|=R0,mt(o,f,D,Y,ie,Ne),o===Jr&&(hr=Jr=null,yr=0),Ac=c,ko=o,Ec=f,Lg=D,$g=T,CC=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,RM(Z,function(){return zC(),null})):(o.callbackNode=null,o.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=R.T,R.T=null,T=W.p,W.p=2,Y=Rr,Rr|=4;try{SM(o,c,f)}finally{Rr=Y,W.p=T,R.T=x}}Zn=1,BC(),FC(),LC()}}function BC(){if(Zn===1){Zn=0;var o=ko,c=Ac,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=R.T,R.T=null;var x=W.p;W.p=2;var T=Rr;Rr|=4;try{bC(c,o);var D=ry,Y=TN(o.containerInfo),ie=D.focusedElem,Ne=D.selectionRange;if(Y!==ie&&ie&&ie.ownerDocument&&NN(ie.ownerDocument.documentElement,ie)){if(Ne!==null&&O0(ie)){var $e=Ne.start,lt=Ne.end;if(lt===void 0&&(lt=$e),"selectionStart"in ie)ie.selectionStart=$e,ie.selectionEnd=Math.min(lt,ie.value.length);else{var dt=ie.ownerDocument||document,qe=dt&&dt.defaultView||window;if(qe.getSelection){var Ge=qe.getSelection(),Vt=ie.textContent.length,Wt=Math.min(Ne.start,Vt),Gr=Ne.end===void 0?Wt:Math.min(Ne.end,Vt);!Ge.extend&&Wt>Gr&&(Y=Gr,Gr=Wt,Wt=Y);var De=SN(ie,Wt),Oe=SN(ie,Gr);if(De&&Oe&&(Ge.rangeCount!==1||Ge.anchorNode!==De.node||Ge.anchorOffset!==De.offset||Ge.focusNode!==Oe.node||Ge.focusOffset!==Oe.offset)){var Fe=dt.createRange();Fe.setStart(De.node,De.offset),Ge.removeAllRanges(),Wt>Gr?(Ge.addRange(Fe),Ge.extend(Oe.node,Oe.offset)):(Fe.setEnd(Oe.node,Oe.offset),Ge.addRange(Fe))}}}}for(dt=[],Ge=ie;Ge=Ge.parentNode;)Ge.nodeType===1&&dt.push({element:Ge,left:Ge.scrollLeft,top:Ge.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<dt.length;ie++){var ct=dt[ie];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}_p=!!ty,ry=ty=null}finally{Rr=T,W.p=x,R.T=f}}o.current=c,Zn=2}}function FC(){if(Zn===2){Zn=0;var o=ko,c=Ac,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=R.T,R.T=null;var x=W.p;W.p=2;var T=Rr;Rr|=4;try{mC(o,c.alternate,c)}finally{Rr=T,W.p=x,R.T=f}}Zn=3}}function LC(){if(Zn===4||Zn===3){Zn=0,Ee();var o=ko,c=Ac,f=Ec,x=CC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Zn=5:(Zn=0,Ac=ko=null,$C(o,o.pendingLanes));var T=o.pendingLanes;if(T===0&&(Oo=null),wt(f),c=c.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(tt,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=R.T,T=W.p,W.p=2,R.T=null;try{for(var D=o.onRecoverableError,Y=0;Y<x.length;Y++){var ie=x[Y];D(ie.value,{componentStack:ie.stack})}}finally{R.T=c,W.p=T}}(Ec&3)!==0&&bp(),mi(o),T=o.pendingLanes,(f&4194090)!==0&&(T&42)!==0?o===zg?Du++:(Du=0,zg=o):Du=0,Ru(0)}}function $C(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,fu(c)))}function bp(o){return BC(),FC(),LC(),zC()}function zC(){if(Zn!==5)return!1;var o=ko,c=Lg;Lg=0;var f=wt(Ec),x=R.T,T=W.p;try{W.p=32>f?32:f,R.T=null,f=$g,$g=null;var D=ko,Y=Ec;if(Zn=0,Ac=ko=null,Ec=0,(Rr&6)!==0)throw Error(a(331));var ie=Rr;if(Rr|=4,NC(D.current),jC(D,D.current,Y,f),Rr=ie,Ru(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(tt,D)}catch{}return!0}finally{W.p=T,R.T=x,$C(o,c)}}function UC(o,c,f){c=bs(f,c),c=bg(o.stateNode,c,2),o=vo(o,c,2),o!==null&&(ot(o,2),mi(o))}function Yr(o,c,f){if(o.tag===3)UC(o,o,f);else for(;c!==null;){if(c.tag===3){UC(c,o,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Oo===null||!Oo.has(x))){o=bs(f,o),f=GT(2),x=vo(c,f,2),x!==null&&(KT(f,x,c,o),ot(x,2),mi(x));break}}c=c.return}}function Hg(o,c,f){var x=o.pingCache;if(x===null){x=o.pingCache=new CM;var T=new Set;x.set(c,T)}else T=x.get(c),T===void 0&&(T=new Set,x.set(c,T));T.has(f)||(Pg=!0,T.add(f),o=_M.bind(null,o,c,f),c.then(o,o))}function _M(o,c,f){var x=o.pingCache;x!==null&&x.delete(c),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,Jr===o&&(yr&f)===f&&(fn===4||fn===3&&(yr&62914560)===yr&&300>Be()-Fg?(Rr&2)===0&&Oc(o,0):Mg|=f,Cc===yr&&(Cc=0)),mi(o)}function qC(o,c){c===0&&(c=ke()),o=uc(o,c),o!==null&&(ot(o,c),mi(o))}function IM(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),qC(o,f)}function DM(o,c){var f=0;switch(o.tag){case 13:var x=o.stateNode,T=o.memoizedState;T!==null&&(f=T.retryLane);break;case 19:x=o.stateNode;break;case 22:x=o.stateNode._retryCache;break;default:throw Error(a(314))}x!==null&&x.delete(c),qC(o,f)}function RM(o,c){return We(o,c)}var vp=null,_c=null,Gg=!1,jp=!1,Kg=!1,wl=0;function mi(o){o!==_c&&o.next===null&&(_c===null?vp=_c=o:_c=_c.next=o),jp=!0,Gg||(Gg=!0,MM())}function Ru(o,c){if(!Kg&&jp){Kg=!0;do for(var f=!1,x=vp;x!==null;){if(o!==0){var T=x.pendingLanes;if(T===0)var D=0;else{var Y=x.suspendedLanes,ie=x.pingedLanes;D=(1<<31-Ae(42|o)+1)-1,D&=T&~(Y&~ie),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(f=!0,KC(x,D))}else D=yr,D=Ie(x,x===Jr?D:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(D&3)===0||Ye(x,D)||(f=!0,KC(x,D));x=x.next}while(f);Kg=!1}}function PM(){WC()}function WC(){jp=Gg=!1;var o=0;wl!==0&&(WM()&&(o=wl),wl=0);for(var c=Be(),f=null,x=vp;x!==null;){var T=x.next,D=HC(x,c);D===0?(x.next=null,f===null?vp=T:f.next=T,T===null&&(_c=f)):(f=x,(o!==0||(D&3)!==0)&&(jp=!0)),x=T}Ru(o)}function HC(o,c){for(var f=o.suspendedLanes,x=o.pingedLanes,T=o.expirationTimes,D=o.pendingLanes&-62914561;0<D;){var Y=31-Ae(D),ie=1<<Y,Ne=T[Y];Ne===-1?((ie&f)===0||(ie&x)!==0)&&(T[Y]=Ft(ie,c)):Ne<=c&&(o.expiredLanes|=ie),D&=~ie}if(c=Jr,f=yr,f=Ie(o,o===c?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x=o.callbackNode,f===0||o===c&&(Pr===2||Pr===9)||o.cancelPendingCommit!==null)return x!==null&&x!==null&&we(x),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Ye(o,f)){if(c=f&-f,c===o.callbackPriority)return c;switch(x!==null&&we(x),wt(f)){case 2:case 8:f=ce;break;case 32:f=Z;break;case 268435456:f=te;break;default:f=Z}return x=GC.bind(null,o),f=We(f,x),o.callbackPriority=c,o.callbackNode=f,c}return x!==null&&x!==null&&we(x),o.callbackPriority=2,o.callbackNode=null,2}function GC(o,c){if(Zn!==0&&Zn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(bp()&&o.callbackNode!==f)return null;var x=yr;return x=Ie(o,o===Jr?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x===0?null:(EC(o,x,c),HC(o,Be()),o.callbackNode!=null&&o.callbackNode===f?GC.bind(null,o):null)}function KC(o,c){if(bp())return null;EC(o,c,!0)}function MM(){GM(function(){(Rr&6)!==0?We(re,PM):WC()})}function Vg(){return wl===0&&(wl=xe()),wl}function VC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ra(""+o)}function YC(o,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,o.id&&f.setAttribute("form",o.id),c.parentNode.insertBefore(f,c),o=new FormData(o),f.parentNode.removeChild(f),o}function BM(o,c,f,x,T){if(c==="submit"&&f&&f.stateNode===T){var D=VC((T[Ut]||null).action),Y=x.submitter;Y&&(c=(c=Y[Ut]||null)?VC(c.formAction):Y.getAttribute("formAction"),c!==null&&(D=c,Y=null));var ie=new Xt("action","action",null,x,T);o.push({event:ie,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(wl!==0){var Ne=Y?YC(T,Y):new FormData(T);pg(f,{pending:!0,data:Ne,method:T.method,action:D},null,Ne)}}else typeof D=="function"&&(ie.preventDefault(),Ne=Y?YC(T,Y):new FormData(T),pg(f,{pending:!0,data:Ne,method:T.method,action:D},D,Ne))},currentTarget:T}]})}}for(var Yg=0;Yg<D0.length;Yg++){var Xg=D0[Yg],FM=Xg.toLowerCase(),LM=Xg[0].toUpperCase()+Xg.slice(1);zs(FM,"on"+LM)}zs(EN,"onAnimationEnd"),zs(ON,"onAnimationIteration"),zs(kN,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(rM,"onTransitionRun"),zs(nM,"onTransitionStart"),zs(aM,"onTransitionCancel"),zs(_N,"onTransitionEnd"),xt("onMouseEnter",["mouseout","mouseover"]),xt("onMouseLeave",["mouseout","mouseover"]),xt("onPointerEnter",["pointerout","pointerover"]),xt("onPointerLeave",["pointerout","pointerover"]),ht("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ht("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ht("onBeforeInput",["compositionend","keypress","textInput","paste"]),ht("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ht("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ht("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$M=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function XC(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var x=o[f],T=x.event;x=x.listeners;e:{var D=void 0;if(c)for(var Y=x.length-1;0<=Y;Y--){var ie=x[Y],Ne=ie.instance,$e=ie.currentTarget;if(ie=ie.listener,Ne!==D&&T.isPropagationStopped())break e;D=ie,T.currentTarget=$e;try{D(T)}catch(lt){lp(lt)}T.currentTarget=null,D=Ne}else for(Y=0;Y<x.length;Y++){if(ie=x[Y],Ne=ie.instance,$e=ie.currentTarget,ie=ie.listener,Ne!==D&&T.isPropagationStopped())break e;D=ie,T.currentTarget=$e;try{D(T)}catch(lt){lp(lt)}T.currentTarget=null,D=Ne}}}}function fr(o,c){var f=c[Qt];f===void 0&&(f=c[Qt]=new Set);var x=o+"__bubble";f.has(x)||(QC(c,o,2,!1),f.add(x))}function Qg(o,c,f){var x=0;c&&(x|=4),QC(f,o,x,c)}var wp="_reactListening"+Math.random().toString(36).slice(2);function Jg(o){if(!o[wp]){o[wp]=!0,Ue.forEach(function(f){f!=="selectionchange"&&($M.has(f)||Qg(f,!1,o),Qg(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[wp]||(c[wp]=!0,Qg("selectionchange",!1,c))}}function QC(o,c,f,x){switch(jA(c)){case 2:var T=fB;break;case 8:T=pB;break;default:T=hy}f=T.bind(null,c,f,o),T=void 0,!Zt||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),x?T!==void 0?o.addEventListener(c,f,{capture:!0,passive:T}):o.addEventListener(c,f,!0):T!==void 0?o.addEventListener(c,f,{passive:T}):o.addEventListener(c,f,!1)}function Zg(o,c,f,x,T){var D=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var Y=x.tag;if(Y===3||Y===4){var ie=x.stateNode.containerInfo;if(ie===T)break;if(Y===4)for(Y=x.return;Y!==null;){var Ne=Y.tag;if((Ne===3||Ne===4)&&Y.stateNode.containerInfo===T)return;Y=Y.return}for(;ie!==null;){if(Y=ye(ie),Y===null)return;if(Ne=Y.tag,Ne===5||Ne===6||Ne===26||Ne===27){x=D=Y;continue e}ie=ie.parentNode}}x=x.return}K(function(){var $e=D,lt=nu(f),dt=[];e:{var qe=IN.get(o);if(qe!==void 0){var Ge=Xt,Vt=o;switch(o){case"keypress":if(ha(f)===0)break e;case"keydown":case"keyup":Ge=R9;break;case"focusin":Vt="focus",Ge=pa;break;case"focusout":Vt="blur",Ge=pa;break;case"beforeblur":case"afterblur":Ge=pa;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=Qr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=B9;break;case EN:case ON:case kN:Ge=T9;break;case _N:Ge=L9;break;case"scroll":case"scrollend":Ge=Ma;break;case"wheel":Ge=z9;break;case"copy":case"cut":case"paste":Ge=A9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=cN;break;case"toggle":case"beforetoggle":Ge=q9}var Wt=(c&4)!==0,Gr=!Wt&&(o==="scroll"||o==="scrollend"),De=Wt?qe!==null?qe+"Capture":null:qe;Wt=[];for(var Oe=$e,Fe;Oe!==null;){var ct=Oe;if(Fe=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Fe===null||De===null||(ct=Ot(Oe,De),ct!=null&&Wt.push(Mu(Oe,ct,Fe))),Gr)break;Oe=Oe.return}0<Wt.length&&(qe=new Ge(qe,Vt,null,f,lt),dt.push({event:qe,listeners:Wt}))}}if((c&7)===0){e:{if(qe=o==="mouseover"||o==="pointerover",Ge=o==="mouseout"||o==="pointerout",qe&&f!==Ai&&(Vt=f.relatedTarget||f.fromElement)&&(ye(Vt)||Vt[zr]))break e;if((Ge||qe)&&(qe=lt.window===lt?lt:(qe=lt.ownerDocument)?qe.defaultView||qe.parentWindow:window,Ge?(Vt=f.relatedTarget||f.toElement,Ge=$e,Vt=Vt?ye(Vt):null,Vt!==null&&(Gr=i(Vt),Wt=Vt.tag,Vt!==Gr||Wt!==5&&Wt!==27&&Wt!==6)&&(Vt=null)):(Ge=null,Vt=$e),Ge!==Vt)){if(Wt=$n,ct="onMouseLeave",De="onMouseEnter",Oe="mouse",(o==="pointerout"||o==="pointerover")&&(Wt=cN,ct="onPointerLeave",De="onPointerEnter",Oe="pointer"),Gr=Ge==null?qe:Le(Ge),Fe=Vt==null?qe:Le(Vt),qe=new Wt(ct,Oe+"leave",Ge,f,lt),qe.target=Gr,qe.relatedTarget=Fe,ct=null,ye(lt)===$e&&(Wt=new Wt(De,Oe+"enter",Vt,f,lt),Wt.target=Fe,Wt.relatedTarget=Gr,ct=Wt),Gr=ct,Ge&&Vt)t:{for(Wt=Ge,De=Vt,Oe=0,Fe=Wt;Fe;Fe=Ic(Fe))Oe++;for(Fe=0,ct=De;ct;ct=Ic(ct))Fe++;for(;0<Oe-Fe;)Wt=Ic(Wt),Oe--;for(;0<Fe-Oe;)De=Ic(De),Fe--;for(;Oe--;){if(Wt===De||De!==null&&Wt===De.alternate)break t;Wt=Ic(Wt),De=Ic(De)}Wt=null}else Wt=null;Ge!==null&&JC(dt,qe,Ge,Wt,!1),Vt!==null&&Gr!==null&&JC(dt,Gr,Vt,Wt,!0)}}e:{if(qe=$e?Le($e):window,Ge=qe.nodeName&&qe.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&qe.type==="file")var Rt=gN;else if(mN(qe))if(yN)Rt=Z9;else{Rt=Q9;var ur=X9}else Ge=qe.nodeName,!Ge||Ge.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?$e&&sr($e.elementType)&&(Rt=gN):Rt=J9;if(Rt&&(Rt=Rt(o,$e))){xN(dt,Rt,f,lt);break e}ur&&ur(o,qe,$e),o==="focusout"&&$e&&qe.type==="number"&&$e.memoizedProps.value!=null&&Ke(qe,"number",qe.value)}switch(ur=$e?Le($e):window,o){case"focusin":(mN(ur)||ur.contentEditable==="true")&&(lc=ur,k0=$e,lu=null);break;case"focusout":lu=k0=lc=null;break;case"mousedown":_0=!0;break;case"contextmenu":case"mouseup":case"dragend":_0=!1,CN(dt,f,lt);break;case"selectionchange":if(tM)break;case"keydown":case"keyup":CN(dt,f,lt)}var $t;if(C0)e:{switch(o){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else oc?fN(o,f)&&(Ht="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Ht="onCompositionStart");Ht&&(dN&&f.locale!=="ko"&&(oc||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&oc&&($t=Qn()):(qr=lt,Ln="value"in qr?qr.value:qr.textContent,oc=!0)),ur=Sp($e,Ht),0<ur.length&&(Ht=new lN(Ht,o,null,f,lt),dt.push({event:Ht,listeners:ur}),$t?Ht.data=$t:($t=pN(f),$t!==null&&(Ht.data=$t)))),($t=H9?G9(o,f):K9(o,f))&&(Ht=Sp($e,"onBeforeInput"),0<Ht.length&&(ur=new lN("onBeforeInput","beforeinput",null,f,lt),dt.push({event:ur,listeners:Ht}),ur.data=$t)),BM(dt,o,$e,f,lt)}XC(dt,c)})}function Mu(o,c,f){return{instance:o,listener:c,currentTarget:f}}function Sp(o,c){for(var f=c+"Capture",x=[];o!==null;){var T=o,D=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||D===null||(T=Ot(o,f),T!=null&&x.unshift(Mu(o,T,D)),T=Ot(o,c),T!=null&&x.push(Mu(o,T,D))),o.tag===3)return x;o=o.return}return[]}function Ic(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function JC(o,c,f,x,T){for(var D=c._reactName,Y=[];f!==null&&f!==x;){var ie=f,Ne=ie.alternate,$e=ie.stateNode;if(ie=ie.tag,Ne!==null&&Ne===x)break;ie!==5&&ie!==26&&ie!==27||$e===null||(Ne=$e,T?($e=Ot(f,D),$e!=null&&Y.unshift(Mu(f,$e,Ne))):T||($e=Ot(f,D),$e!=null&&Y.push(Mu(f,$e,Ne)))),f=f.return}Y.length!==0&&o.push({event:c,listeners:Y})}var zM=/\r\n?/g,UM=/\u0000|\uFFFD/g;function ZC(o){return(typeof o=="string"?o:""+o).replace(zM,`
`).replace(UM,"")}function eA(o,c){return c=ZC(c),ZC(o)===c}function Np(){}function Hr(o,c,f,x,T,D){switch(f){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||zt(o,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&zt(o,""+x);break;case"className":kr(o,"class",x);break;case"tabIndex":kr(o,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(o,f,x);break;case"style":Mt(o,x,D);break;case"data":if(c!=="object"){kr(o,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||f!=="href")){o.removeAttribute(f);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(f);break}x=Ra(""+x),o.setAttribute(f,x);break;case"action":case"formAction":if(typeof x=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(f==="formAction"?(c!=="input"&&Hr(o,c,"name",T.name,T,null),Hr(o,c,"formEncType",T.formEncType,T,null),Hr(o,c,"formMethod",T.formMethod,T,null),Hr(o,c,"formTarget",T.formTarget,T,null)):(Hr(o,c,"encType",T.encType,T,null),Hr(o,c,"method",T.method,T,null),Hr(o,c,"target",T.target,T,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(f);break}x=Ra(""+x),o.setAttribute(f,x);break;case"onClick":x!=null&&(o.onclick=Np);break;case"onScroll":x!=null&&fr("scroll",o);break;case"onScrollEnd":x!=null&&fr("scrollend",o);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(a(61));if(f=x.__html,f!=null){if(T.children!=null)throw Error(a(60));o.innerHTML=f}}break;case"multiple":o.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":o.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){o.removeAttribute("xlink:href");break}f=Ra(""+x),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(f,""+x):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":x===!0?o.setAttribute(f,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(f,x):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?o.setAttribute(f,x):o.removeAttribute(f);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?o.removeAttribute(f):o.setAttribute(f,x);break;case"popover":fr("beforetoggle",o),fr("toggle",o),Or(o,"popover",x);break;case"xlinkActuate":Ur(o,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Ur(o,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Ur(o,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Ur(o,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Ur(o,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Ur(o,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Ur(o,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Ur(o,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Ur(o,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Or(o,"is",x);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=jr.get(f)||f,Or(o,f,x))}}function ey(o,c,f,x,T,D){switch(f){case"style":Mt(o,x,D);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(a(61));if(f=x.__html,f!=null){if(T.children!=null)throw Error(a(60));o.innerHTML=f}}break;case"children":typeof x=="string"?zt(o,x):(typeof x=="number"||typeof x=="bigint")&&zt(o,""+x);break;case"onScroll":x!=null&&fr("scroll",o);break;case"onScrollEnd":x!=null&&fr("scrollend",o);break;case"onClick":x!=null&&(o.onclick=Np);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!He.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(T=f.endsWith("Capture"),c=f.slice(2,T?f.length-7:void 0),D=o[Ut]||null,D=D!=null?D[f]:null,typeof D=="function"&&o.removeEventListener(c,D,T),typeof x=="function")){typeof D!="function"&&D!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(c,x,T);break e}f in o?o[f]=x:x===!0?o.setAttribute(f,""):Or(o,f,x)}}}function ea(o,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fr("error",o),fr("load",o);var x=!1,T=!1,D;for(D in f)if(f.hasOwnProperty(D)){var Y=f[D];if(Y!=null)switch(D){case"src":x=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:Hr(o,c,D,Y,f,null)}}T&&Hr(o,c,"srcSet",f.srcSet,f,null),x&&Hr(o,c,"src",f.src,f,null);return;case"input":fr("invalid",o);var ie=D=Y=T=null,Ne=null,$e=null;for(x in f)if(f.hasOwnProperty(x)){var lt=f[x];if(lt!=null)switch(x){case"name":T=lt;break;case"type":Y=lt;break;case"checked":Ne=lt;break;case"defaultChecked":$e=lt;break;case"value":D=lt;break;case"defaultValue":ie=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(a(137,c));break;default:Hr(o,c,x,lt,f,null)}}Ce(o,D,ie,Ne,$e,Y,T,!1),il(o);return;case"select":fr("invalid",o),x=Y=D=null;for(T in f)if(f.hasOwnProperty(T)&&(ie=f[T],ie!=null))switch(T){case"value":D=ie;break;case"defaultValue":Y=ie;break;case"multiple":x=ie;default:Hr(o,c,T,ie,f,null)}c=D,f=Y,o.multiple=!!x,c!=null?Xe(o,!!x,c,!1):f!=null&&Xe(o,!!x,f,!0);return;case"textarea":fr("invalid",o),D=T=x=null;for(Y in f)if(f.hasOwnProperty(Y)&&(ie=f[Y],ie!=null))switch(Y){case"value":x=ie;break;case"defaultValue":T=ie;break;case"children":D=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(91));break;default:Hr(o,c,Y,ie,f,null)}Dt(o,x,T,D),il(o);return;case"option":for(Ne in f)if(f.hasOwnProperty(Ne)&&(x=f[Ne],x!=null))switch(Ne){case"selected":o.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Hr(o,c,Ne,x,f,null)}return;case"dialog":fr("beforetoggle",o),fr("toggle",o),fr("cancel",o),fr("close",o);break;case"iframe":case"object":fr("load",o);break;case"video":case"audio":for(x=0;x<Pu.length;x++)fr(Pu[x],o);break;case"image":fr("error",o),fr("load",o);break;case"details":fr("toggle",o);break;case"embed":case"source":case"link":fr("error",o),fr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($e in f)if(f.hasOwnProperty($e)&&(x=f[$e],x!=null))switch($e){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,c));default:Hr(o,c,$e,x,f,null)}return;default:if(sr(c)){for(lt in f)f.hasOwnProperty(lt)&&(x=f[lt],x!==void 0&&ey(o,c,lt,x,f,void 0));return}}for(ie in f)f.hasOwnProperty(ie)&&(x=f[ie],x!=null&&Hr(o,c,ie,x,f,null))}function qM(o,c,f,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,D=null,Y=null,ie=null,Ne=null,$e=null,lt=null;for(Ge in f){var dt=f[Ge];if(f.hasOwnProperty(Ge)&&dt!=null)switch(Ge){case"checked":break;case"value":break;case"defaultValue":Ne=dt;default:x.hasOwnProperty(Ge)||Hr(o,c,Ge,null,x,dt)}}for(var qe in x){var Ge=x[qe];if(dt=f[qe],x.hasOwnProperty(qe)&&(Ge!=null||dt!=null))switch(qe){case"type":D=Ge;break;case"name":T=Ge;break;case"checked":$e=Ge;break;case"defaultChecked":lt=Ge;break;case"value":Y=Ge;break;case"defaultValue":ie=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(a(137,c));break;default:Ge!==dt&&Hr(o,c,qe,Ge,x,dt)}}Te(o,Y,ie,Ne,$e,lt,D,T);return;case"select":Ge=Y=ie=qe=null;for(D in f)if(Ne=f[D],f.hasOwnProperty(D)&&Ne!=null)switch(D){case"value":break;case"multiple":Ge=Ne;default:x.hasOwnProperty(D)||Hr(o,c,D,null,x,Ne)}for(T in x)if(D=x[T],Ne=f[T],x.hasOwnProperty(T)&&(D!=null||Ne!=null))switch(T){case"value":qe=D;break;case"defaultValue":ie=D;break;case"multiple":Y=D;default:D!==Ne&&Hr(o,c,T,D,x,Ne)}c=ie,f=Y,x=Ge,qe!=null?Xe(o,!!f,qe,!1):!!x!=!!f&&(c!=null?Xe(o,!!f,c,!0):Xe(o,!!f,f?[]:"",!1));return;case"textarea":Ge=qe=null;for(ie in f)if(T=f[ie],f.hasOwnProperty(ie)&&T!=null&&!x.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:Hr(o,c,ie,null,x,T)}for(Y in x)if(T=x[Y],D=f[Y],x.hasOwnProperty(Y)&&(T!=null||D!=null))switch(Y){case"value":qe=T;break;case"defaultValue":Ge=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:T!==D&&Hr(o,c,Y,T,x,D)}rt(o,qe,Ge);return;case"option":for(var Vt in f)if(qe=f[Vt],f.hasOwnProperty(Vt)&&qe!=null&&!x.hasOwnProperty(Vt))switch(Vt){case"selected":o.selected=!1;break;default:Hr(o,c,Vt,null,x,qe)}for(Ne in x)if(qe=x[Ne],Ge=f[Ne],x.hasOwnProperty(Ne)&&qe!==Ge&&(qe!=null||Ge!=null))switch(Ne){case"selected":o.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Hr(o,c,Ne,qe,x,Ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in f)qe=f[Wt],f.hasOwnProperty(Wt)&&qe!=null&&!x.hasOwnProperty(Wt)&&Hr(o,c,Wt,null,x,qe);for($e in x)if(qe=x[$e],Ge=f[$e],x.hasOwnProperty($e)&&qe!==Ge&&(qe!=null||Ge!=null))switch($e){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(a(137,c));break;default:Hr(o,c,$e,qe,x,Ge)}return;default:if(sr(c)){for(var Gr in f)qe=f[Gr],f.hasOwnProperty(Gr)&&qe!==void 0&&!x.hasOwnProperty(Gr)&&ey(o,c,Gr,void 0,x,qe);for(lt in x)qe=x[lt],Ge=f[lt],!x.hasOwnProperty(lt)||qe===Ge||qe===void 0&&Ge===void 0||ey(o,c,lt,qe,x,Ge);return}}for(var De in f)qe=f[De],f.hasOwnProperty(De)&&qe!=null&&!x.hasOwnProperty(De)&&Hr(o,c,De,null,x,qe);for(dt in x)qe=x[dt],Ge=f[dt],!x.hasOwnProperty(dt)||qe===Ge||qe==null&&Ge==null||Hr(o,c,dt,qe,x,Ge)}var ty=null,ry=null;function Tp(o){return o.nodeType===9?o:o.ownerDocument}function tA(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rA(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function ny(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var ay=null;function WM(){var o=window.event;return o&&o.type==="popstate"?o===ay?!1:(ay=o,!0):(ay=null,!1)}var nA=typeof setTimeout=="function"?setTimeout:void 0,HM=typeof clearTimeout=="function"?clearTimeout:void 0,aA=typeof Promise=="function"?Promise:void 0,GM=typeof queueMicrotask=="function"?queueMicrotask:typeof aA<"u"?function(o){return aA.resolve(null).then(o).catch(KM)}:nA;function KM(o){setTimeout(function(){throw o})}function Io(o){return o==="head"}function sA(o,c){var f=c,x=0,T=0;do{var D=f.nextSibling;if(o.removeChild(f),D&&D.nodeType===8)if(f=D.data,f==="/$"){if(0<x&&8>x){f=x;var Y=o.ownerDocument;if(f&1&&Bu(Y.documentElement),f&2&&Bu(Y.body),f&4)for(f=Y.head,Bu(f),Y=f.firstChild;Y;){var ie=Y.nextSibling,Ne=Y.nodeName;Y[he]||Ne==="SCRIPT"||Ne==="STYLE"||Ne==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||f.removeChild(Y),Y=ie}}if(T===0){o.removeChild(D),Hu(c);return}T--}else f==="$"||f==="$?"||f==="$!"?T++:x=f.charCodeAt(0)-48;else x=0;f=D}while(f);Hu(c)}function sy(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":sy(f),pe(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function VM(o,c,f,x){for(;o.nodeType===1;){var T=f;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(x){if(!o[he])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(D=o.getAttribute("rel"),D==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(D!==T.rel||o.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||o.getAttribute("title")!==(T.title==null?null:T.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(D=o.getAttribute("src"),(D!==(T.src==null?null:T.src)||o.getAttribute("type")!==(T.type==null?null:T.type)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&D&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var D=T.name==null?null:""+T.name;if(T.type==="hidden"&&o.getAttribute("name")===D)return o}else return o;if(o=qs(o.nextSibling),o===null)break}return null}function YM(o,c,f){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=qs(o.nextSibling),o===null))return null;return o}function iy(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function XM(o,c){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")c();else{var x=function(){c(),f.removeEventListener("DOMContentLoaded",x)};f.addEventListener("DOMContentLoaded",x),o._reactRetry=x}}function qs(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var oy=null;function iA(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}function oA(o,c,f){switch(c=Tp(f),o){case"html":if(o=c.documentElement,!o)throw Error(a(452));return o;case"head":if(o=c.head,!o)throw Error(a(453));return o;case"body":if(o=c.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function Bu(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);pe(o)}var Ts=new Map,lA=new Set;function Cp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var $i=W.d;W.d={f:QM,r:JM,D:ZM,C:eB,L:tB,m:rB,X:aB,S:nB,M:sB};function QM(){var o=$i.f(),c=gp();return o||c}function JM(o){var c=ve(o);c!==null&&c.tag===5&&c.type==="form"?ET(c):$i.r(o)}var Dc=typeof document>"u"?null:document;function cA(o,c,f){var x=Dc;if(x&&typeof c=="string"&&c){var T=be(c);T='link[rel="'+o+'"][href="'+T+'"]',typeof f=="string"&&(T+='[crossorigin="'+f+'"]'),lA.has(T)||(lA.add(T),o={rel:o,crossOrigin:f,href:c},x.querySelector(T)===null&&(c=x.createElement("link"),ea(c,"link",o),Pe(c),x.head.appendChild(c)))}}function ZM(o){$i.D(o),cA("dns-prefetch",o,null)}function eB(o,c){$i.C(o,c),cA("preconnect",o,c)}function tB(o,c,f){$i.L(o,c,f);var x=Dc;if(x&&o&&c){var T='link[rel="preload"][as="'+be(c)+'"]';c==="image"&&f&&f.imageSrcSet?(T+='[imagesrcset="'+be(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(T+='[imagesizes="'+be(f.imageSizes)+'"]')):T+='[href="'+be(o)+'"]';var D=T;switch(c){case"style":D=Rc(o);break;case"script":D=Pc(o)}Ts.has(D)||(o=p({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:o,as:c},f),Ts.set(D,o),x.querySelector(T)!==null||c==="style"&&x.querySelector(Fu(D))||c==="script"&&x.querySelector(Lu(D))||(c=x.createElement("link"),ea(c,"link",o),Pe(c),x.head.appendChild(c)))}}function rB(o,c){$i.m(o,c);var f=Dc;if(f&&o){var x=c&&typeof c.as=="string"?c.as:"script",T='link[rel="modulepreload"][as="'+be(x)+'"][href="'+be(o)+'"]',D=T;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Pc(o)}if(!Ts.has(D)&&(o=p({rel:"modulepreload",href:o},c),Ts.set(D,o),f.querySelector(T)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Lu(D)))return}x=f.createElement("link"),ea(x,"link",o),Pe(x),f.head.appendChild(x)}}}function nB(o,c,f){$i.S(o,c,f);var x=Dc;if(x&&o){var T=et(x).hoistableStyles,D=Rc(o);c=c||"default";var Y=T.get(D);if(!Y){var ie={loading:0,preload:null};if(Y=x.querySelector(Fu(D)))ie.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":c},f),(f=Ts.get(D))&&ly(o,f);var Ne=Y=x.createElement("link");Pe(Ne),ea(Ne,"link",o),Ne._p=new Promise(function($e,lt){Ne.onload=$e,Ne.onerror=lt}),Ne.addEventListener("load",function(){ie.loading|=1}),Ne.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,Ap(Y,c,x)}Y={type:"stylesheet",instance:Y,count:1,state:ie},T.set(D,Y)}}}function aB(o,c){$i.X(o,c);var f=Dc;if(f&&o){var x=et(f).hoistableScripts,T=Pc(o),D=x.get(T);D||(D=f.querySelector(Lu(T)),D||(o=p({src:o,async:!0},c),(c=Ts.get(T))&&cy(o,c),D=f.createElement("script"),Pe(D),ea(D,"link",o),f.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},x.set(T,D))}}function sB(o,c){$i.M(o,c);var f=Dc;if(f&&o){var x=et(f).hoistableScripts,T=Pc(o),D=x.get(T);D||(D=f.querySelector(Lu(T)),D||(o=p({src:o,async:!0,type:"module"},c),(c=Ts.get(T))&&cy(o,c),D=f.createElement("script"),Pe(D),ea(D,"link",o),f.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},x.set(T,D))}}function dA(o,c,f,x){var T=(T=le.current)?Cp(T):null;if(!T)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Rc(f.href),f=et(T).hoistableStyles,x=f.get(c),x||(x={type:"style",instance:null,count:0,state:null},f.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Rc(f.href);var D=et(T).hoistableStyles,Y=D.get(o);if(Y||(T=T.ownerDocument||T,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(o,Y),(D=T.querySelector(Fu(o)))&&!D._p&&(Y.instance=D,Y.state.loading=5),Ts.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ts.set(o,f),D||iB(T,o,f,Y.state))),c&&x===null)throw Error(a(528,""));return Y}if(c&&x!==null)throw Error(a(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Pc(f),f=et(T).hoistableScripts,x=f.get(c),x||(x={type:"script",instance:null,count:0,state:null},f.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function Rc(o){return'href="'+be(o)+'"'}function Fu(o){return'link[rel="stylesheet"]['+o+"]"}function uA(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function iB(o,c,f,x){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=o.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),ea(c,"link",f),Pe(c),o.head.appendChild(c))}function Pc(o){return'[src="'+be(o)+'"]'}function Lu(o){return"script[async]"+o}function hA(o,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var x=o.querySelector('style[data-href~="'+be(f.href)+'"]');if(x)return c.instance=x,Pe(x),x;var T=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return x=(o.ownerDocument||o).createElement("style"),Pe(x),ea(x,"style",T),Ap(x,f.precedence,o),c.instance=x;case"stylesheet":T=Rc(f.href);var D=o.querySelector(Fu(T));if(D)return c.state.loading|=4,c.instance=D,Pe(D),D;x=uA(f),(T=Ts.get(T))&&ly(x,T),D=(o.ownerDocument||o).createElement("link"),Pe(D);var Y=D;return Y._p=new Promise(function(ie,Ne){Y.onload=ie,Y.onerror=Ne}),ea(D,"link",x),c.state.loading|=4,Ap(D,f.precedence,o),c.instance=D;case"script":return D=Pc(f.src),(T=o.querySelector(Lu(D)))?(c.instance=T,Pe(T),T):(x=f,(T=Ts.get(D))&&(x=p({},f),cy(x,T)),o=o.ownerDocument||o,T=o.createElement("script"),Pe(T),ea(T,"link",x),o.head.appendChild(T),c.instance=T);case"void":return null;default:throw Error(a(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,Ap(x,f.precedence,o));return c.instance}function Ap(o,c,f){for(var x=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=x.length?x[x.length-1]:null,D=T,Y=0;Y<x.length;Y++){var ie=x[Y];if(ie.dataset.precedence===c)D=ie;else if(D!==T)break}D?D.parentNode.insertBefore(o,D.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(o,c.firstChild))}function ly(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function cy(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Ep=null;function fA(o,c,f){if(Ep===null){var x=new Map,T=Ep=new Map;T.set(f,x)}else T=Ep,x=T.get(f),x||(x=new Map,T.set(f,x));if(x.has(o))return x;for(x.set(o,null),f=f.getElementsByTagName(o),T=0;T<f.length;T++){var D=f[T];if(!(D[he]||D[Lt]||o==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=D.getAttribute(c)||"";Y=o+Y;var ie=x.get(Y);ie?ie.push(D):x.set(Y,[D])}}return x}function pA(o,c,f){o=o.ownerDocument||o,o.head.insertBefore(f,c==="title"?o.querySelector("head > title"):null)}function oB(o,c,f){if(f===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function mA(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var $u=null;function lB(){}function cB(o,c,f){if($u===null)throw Error(a(475));var x=$u;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var T=Rc(f.href),D=o.querySelector(Fu(T));if(D){o=D._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(x.count++,x=Op.bind(x),o.then(x,x)),c.state.loading|=4,c.instance=D,Pe(D);return}D=o.ownerDocument||o,f=uA(f),(T=Ts.get(T))&&ly(f,T),D=D.createElement("link"),Pe(D);var Y=D;Y._p=new Promise(function(ie,Ne){Y.onload=ie,Y.onerror=Ne}),ea(D,"link",f),c.instance=D}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(x.count++,c=Op.bind(x),o.addEventListener("load",c),o.addEventListener("error",c))}}function dB(){if($u===null)throw Error(a(475));var o=$u;return o.stylesheets&&o.count===0&&dy(o,o.stylesheets),0<o.count?function(c){var f=setTimeout(function(){if(o.stylesheets&&dy(o,o.stylesheets),o.unsuspend){var x=o.unsuspend;o.unsuspend=null,x()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(f)}}:null}function Op(){if(this.count--,this.count===0){if(this.stylesheets)dy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var kp=null;function dy(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,kp=new Map,c.forEach(uB,o),kp=null,Op.call(o))}function uB(o,c){if(!(c.state.loading&4)){var f=kp.get(o);if(f)var x=f.get(null);else{f=new Map,kp.set(o,f);for(var T=o.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<T.length;D++){var Y=T[D];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(f.set(Y.dataset.precedence,Y),x=Y)}x&&f.set(null,x)}T=c.instance,Y=T.getAttribute("data-precedence"),D=f.get(Y)||x,D===x&&f.set(null,T),f.set(Y,T),this.count++,x=Op.bind(this),T.addEventListener("load",x),T.addEventListener("error",x),D?D.parentNode.insertBefore(T,D.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(T,o.firstChild)),c.state.loading|=4}}var zu={$$typeof:O,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function hB(o,c,f,x,T,D,Y,ie){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=x,this.onUncaughtError=T,this.onCaughtError=D,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function xA(o,c,f,x,T,D,Y,ie,Ne,$e,lt,dt){return o=new hB(o,c,f,Y,ie,Ne,$e,dt),c=1,D===!0&&(c|=24),D=es(3,null,null,c),o.current=D,D.stateNode=o,c=H0(),c.refCount++,o.pooledCache=c,c.refCount++,D.memoizedState={element:x,isDehydrated:f,cache:c},Y0(D),o}function gA(o){return o?(o=hc,o):hc}function yA(o,c,f,x,T,D){T=gA(T),x.context===null?x.context=T:x.pendingContext=T,x=bo(c),x.payload={element:f},D=D===void 0?null:D,D!==null&&(x.callback=D),f=vo(o,x,c),f!==null&&(ss(f,o,c),gu(f,o,c))}function bA(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function uy(o,c){bA(o,c),(o=o.alternate)&&bA(o,c)}function vA(o){if(o.tag===13){var c=uc(o,67108864);c!==null&&ss(c,o,67108864),uy(o,67108864)}}var _p=!0;function fB(o,c,f,x){var T=R.T;R.T=null;var D=W.p;try{W.p=2,hy(o,c,f,x)}finally{W.p=D,R.T=T}}function pB(o,c,f,x){var T=R.T;R.T=null;var D=W.p;try{W.p=8,hy(o,c,f,x)}finally{W.p=D,R.T=T}}function hy(o,c,f,x){if(_p){var T=fy(x);if(T===null)Zg(o,c,x,Ip,f),wA(o,x);else if(xB(T,o,c,f,x))x.stopPropagation();else if(wA(o,x),c&4&&-1<mB.indexOf(o)){for(;T!==null;){var D=ve(T);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var Y=ae(D.pendingLanes);if(Y!==0){var ie=D;for(ie.pendingLanes|=2,ie.entangledLanes|=2;Y;){var Ne=1<<31-Ae(Y);ie.entanglements[1]|=Ne,Y&=~Ne}mi(D),(Rr&6)===0&&(mp=Be()+500,Ru(0))}}break;case 13:ie=uc(D,2),ie!==null&&ss(ie,D,2),gp(),uy(D,2)}if(D=fy(x),D===null&&Zg(o,c,x,Ip,f),D===T)break;T=D}T!==null&&x.stopPropagation()}else Zg(o,c,x,null,f)}}function fy(o){return o=nu(o),py(o)}var Ip=null;function py(o){if(Ip=null,o=ye(o),o!==null){var c=i(o);if(c===null)o=null;else{var f=c.tag;if(f===13){if(o=l(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Ip=o,null}function jA(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case re:return 2;case ce:return 8;case Z:case de:return 32;case te:return 268435456;default:return 32}default:return 32}}var my=!1,Do=null,Ro=null,Po=null,Uu=new Map,qu=new Map,Mo=[],mB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wA(o,c){switch(o){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":Ro=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":Uu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":qu.delete(c.pointerId)}}function Wu(o,c,f,x,T,D){return o===null||o.nativeEvent!==D?(o={blockedOn:c,domEventName:f,eventSystemFlags:x,nativeEvent:D,targetContainers:[T]},c!==null&&(c=ve(c),c!==null&&vA(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),o)}function xB(o,c,f,x,T){switch(c){case"focusin":return Do=Wu(Do,o,c,f,x,T),!0;case"dragenter":return Ro=Wu(Ro,o,c,f,x,T),!0;case"mouseover":return Po=Wu(Po,o,c,f,x,T),!0;case"pointerover":var D=T.pointerId;return Uu.set(D,Wu(Uu.get(D)||null,o,c,f,x,T)),!0;case"gotpointercapture":return D=T.pointerId,qu.set(D,Wu(qu.get(D)||null,o,c,f,x,T)),!0}return!1}function SA(o){var c=ye(o.target);if(c!==null){var f=i(c);if(f!==null){if(c=f.tag,c===13){if(c=l(f),c!==null){o.blockedOn=c,Nt(o.priority,function(){if(f.tag===13){var x=as();x=st(x);var T=uc(f,x);T!==null&&ss(T,f,x),uy(f,x)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Dp(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=fy(o.nativeEvent);if(f===null){f=o.nativeEvent;var x=new f.constructor(f.type,f);Ai=x,f.target.dispatchEvent(x),Ai=null}else return c=ve(f),c!==null&&vA(c),o.blockedOn=f,!1;c.shift()}return!0}function NA(o,c,f){Dp(o)&&f.delete(c)}function gB(){my=!1,Do!==null&&Dp(Do)&&(Do=null),Ro!==null&&Dp(Ro)&&(Ro=null),Po!==null&&Dp(Po)&&(Po=null),Uu.forEach(NA),qu.forEach(NA)}function Rp(o,c){o.blockedOn===c&&(o.blockedOn=null,my||(my=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gB)))}var Pp=null;function TA(o){Pp!==o&&(Pp=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Pp===o&&(Pp=null);for(var c=0;c<o.length;c+=3){var f=o[c],x=o[c+1],T=o[c+2];if(typeof x!="function"){if(py(x||f)===null)continue;break}var D=ve(f);D!==null&&(o.splice(c,3),c-=3,pg(D,{pending:!0,data:T,method:f.method,action:x},x,T))}}))}function Hu(o){function c(Ne){return Rp(Ne,o)}Do!==null&&Rp(Do,o),Ro!==null&&Rp(Ro,o),Po!==null&&Rp(Po,o),Uu.forEach(c),qu.forEach(c);for(var f=0;f<Mo.length;f++){var x=Mo[f];x.blockedOn===o&&(x.blockedOn=null)}for(;0<Mo.length&&(f=Mo[0],f.blockedOn===null);)SA(f),f.blockedOn===null&&Mo.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(x=0;x<f.length;x+=3){var T=f[x],D=f[x+1],Y=T[Ut]||null;if(typeof D=="function")Y||TA(f);else if(Y){var ie=null;if(D&&D.hasAttribute("formAction")){if(T=D,Y=D[Ut]||null)ie=Y.formAction;else if(py(T)!==null)continue}else ie=Y.action;typeof ie=="function"?f[x+1]=ie:(f.splice(x,3),x-=3),TA(f)}}}function xy(o){this._internalRoot=o}Mp.prototype.render=xy.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(a(409));var f=c.current,x=as();yA(f,x,o,c,null,null)},Mp.prototype.unmount=xy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;yA(o.current,2,null,o,null,null),gp(),c[zr]=null}};function Mp(o){this._internalRoot=o}Mp.prototype.unstable_scheduleHydration=function(o){if(o){var c=yt();o={blockedOn:null,target:o,priority:c};for(var f=0;f<Mo.length&&c!==0&&c<Mo[f].priority;f++);Mo.splice(f,0,o),f===0&&SA(o)}};var CA=t.version;if(CA!=="19.1.0")throw Error(a(527,CA,"19.1.0"));W.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=u(c),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var yB={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{tt=Bp.inject(yB),ze=Bp}catch{}}return Ku.createRoot=function(o,c){if(!s(o))throw Error(a(299));var f=!1,x="",T=UT,D=qT,Y=WT,ie=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(Y=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ie=c.unstable_transitionCallbacks)),c=xA(o,1,!1,null,null,f,x,T,D,Y,ie,null),o[zr]=c.current,Jg(o),new xy(c)},Ku.hydrateRoot=function(o,c,f){if(!s(o))throw Error(a(299));var x=!1,T="",D=UT,Y=qT,ie=WT,Ne=null,$e=null;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onUncaughtError!==void 0&&(D=f.onUncaughtError),f.onCaughtError!==void 0&&(Y=f.onCaughtError),f.onRecoverableError!==void 0&&(ie=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Ne=f.unstable_transitionCallbacks),f.formState!==void 0&&($e=f.formState)),c=xA(o,1,!0,c,f??null,x,T,D,Y,ie,Ne,$e),c.context=gA(null),f=c.current,x=as(),x=st(x),T=bo(x),T.callback=null,vo(f,T,x),f=x,c.current.lanes=f,ot(c,f),mi(c),o[zr]=c.current,Jg(o),new Mp(c)},Ku.version="19.1.0",Ku}var MA;function EB(){if(MA)return by.exports;MA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),by.exports=AB(),by.exports}var OB=EB();const kB=$r(OB);var Vu={},BA;function _B(){if(BA)return Vu;BA=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.parse=l,Vu.serialize=h;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function l(g,b){const j=new i,v=g.length;if(v<2)return j;const y=(b==null?void 0:b.decode)||p;let A=0;do{const E=g.indexOf("=",A);if(E===-1)break;const O=g.indexOf(";",A),S=O===-1?v:O;if(E>S){A=g.lastIndexOf(";",E-1)+1;continue}const C=d(g,A,E),k=u(g,E,C),I=g.slice(C,k);if(j[I]===void 0){let z=d(g,E+1,S),B=u(g,S,z);const M=y(g.slice(z,B));j[I]=M}A=S+1}while(A<v);return j}function d(g,b,j){do{const v=g.charCodeAt(b);if(v!==32&&v!==9)return b}while(++b<j);return j}function u(g,b,j){for(;b>j;){const v=g.charCodeAt(--b);if(v!==32&&v!==9)return b+1}return j}function h(g,b,j){const v=(j==null?void 0:j.encode)||encodeURIComponent;if(!e.test(g))throw new TypeError(`argument name is invalid: ${g}`);const y=v(b);if(!t.test(y))throw new TypeError(`argument val is invalid: ${b}`);let A=g+"="+y;if(!j)return A;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);A+="; Max-Age="+j.maxAge}if(j.domain){if(!n.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);A+="; Domain="+j.domain}if(j.path){if(!a.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);A+="; Path="+j.path}if(j.expires){if(!m(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);A+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(A+="; HttpOnly"),j.secure&&(A+="; Secure"),j.partitioned&&(A+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return A}function p(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function m(g){return s.call(g)==="[object Date]"}return Vu}_B();var FA="popstate";function IB(e={}){function t(a,s){let{pathname:i,search:l,hash:d}=a.location;return Lj("",{pathname:i,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:Sh(s)}return RB(t,n,null,e)}function on(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ii(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DB(){return Math.random().toString(36).substring(2,10)}function LA(e,t){return{usr:e.state,key:e.key,idx:t}}function Lj(e,t,n=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Pd(t):t,state:n,key:t&&t.key||a||DB()}}function Sh({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Pd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function RB(e,t,n,a={}){let{window:s=document.defaultView,v5Compat:i=!1}=a,l=s.history,d="POP",u=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){d="POP";let y=p(),A=y==null?null:y-h;h=y,u&&u({action:d,location:v.location,delta:A})}function g(y,A){d="PUSH";let E=Lj(v.location,y,A);h=p()+1;let O=LA(E,h),S=v.createHref(E);try{l.pushState(O,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(S)}i&&u&&u({action:d,location:v.location,delta:1})}function b(y,A){d="REPLACE";let E=Lj(v.location,y,A);h=p();let O=LA(E,h),S=v.createHref(E);l.replaceState(O,"",S),i&&u&&u({action:d,location:v.location,delta:0})}function j(y){return PB(y)}let v={get action(){return d},get location(){return e(s,l)},listen(y){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(FA,m),u=y,()=>{s.removeEventListener(FA,m),u=null}},createHref(y){return t(s,y)},createURL:j,encodeLocation(y){let A=j(y);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:g,replace:b,go(y){return l.go(y)}};return v}function PB(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),on(n,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Sh(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function zI(e,t,n="/"){return MB(e,t,n,!1)}function MB(e,t,n,a){let s=typeof t=="string"?Pd(t):t,i=ro(s.pathname||"/",n);if(i==null)return null;let l=UI(e);BB(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=VB(i);d=GB(l[u],h,a)}return d}function UI(e,t=[],n=[],a=""){let s=(i,l,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(on(u.relativePath.startsWith(a),`Absolute route path "${u.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(a.length));let h=Ki([a,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(on(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),UI(i.children,t,p,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:WB(h,i.index),routesMeta:p})};return e.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))s(i,l);else for(let u of qI(i.path))s(i,l,u)}),t}function qI(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(a.length===0)return s?[i,""]:[i];let l=qI(a.join("/")),d=[];return d.push(...l.map(u=>u===""?i:[i,u].join("/"))),s&&d.push(...l),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function BB(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:HB(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var FB=/^:[\w-]+$/,LB=3,$B=2,zB=1,UB=10,qB=-2,$A=e=>e==="*";function WB(e,t){let n=e.split("/"),a=n.length;return n.some($A)&&(a+=qB),t&&(a+=$B),n.filter(s=>!$A(s)).reduce((s,i)=>s+(FB.test(i)?LB:i===""?zB:UB),a)}function HB(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function GB(e,t,n=!1){let{routesMeta:a}=e,s={},i="/",l=[];for(let d=0;d<a.length;++d){let u=a[d],h=d===a.length-1,p=i==="/"?t:t.slice(i.length)||"/",m=fm({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),g=u.route;if(!m&&h&&n&&!a[a.length-1].route.index&&(m=fm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:Ki([i,m.pathname]),pathnameBase:JB(Ki([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Ki([i,m.pathnameBase]))}return l}function fm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=KB(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((h,{paramName:p,isOptional:m},g)=>{if(p==="*"){let j=d[g]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const b=d[g];return m&&!b?h[p]=void 0:h[p]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:e}}function KB(e,t=!1,n=!0){ii(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(a.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function VB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ii(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ro(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function YB(e,t="/"){let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?Pd(e):e;return{pathname:n?n.startsWith("/")?n:XB(n,t):t,search:ZB(a),hash:eF(s)}}function XB(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sy(e,t,n,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Sw(e){let t=QB(e);return t.map((n,a)=>a===t.length-1?n.pathname:n.pathnameBase)}function Nw(e,t,n,a=!1){let s;typeof e=="string"?s=Pd(e):(s={...e},on(!s.pathname||!s.pathname.includes("?"),Sy("?","pathname","search",s)),on(!s.pathname||!s.pathname.includes("#"),Sy("#","pathname","hash",s)),on(!s.search||!s.search.includes("#"),Sy("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,d;if(l==null)d=n;else{let m=t.length-1;if(!a&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}d=m>=0?t[m]:"/"}let u=YB(s,d),h=l&&l!=="/"&&l.endsWith("/"),p=(i||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Ki=e=>e.join("/").replace(/\/\/+/g,"/"),JB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var WI=["POST","PUT","PATCH","DELETE"];new Set(WI);var rF=["GET",...WI];new Set(rF);var Md=w.createContext(null);Md.displayName="DataRouter";var _x=w.createContext(null);_x.displayName="DataRouterState";var HI=w.createContext({isTransitioning:!1});HI.displayName="ViewTransition";var nF=w.createContext(new Map);nF.displayName="Fetchers";var aF=w.createContext(null);aF.displayName="Await";var oi=w.createContext(null);oi.displayName="Navigation";var gf=w.createContext(null);gf.displayName="Location";var Ti=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var Tw=w.createContext(null);Tw.displayName="RouteError";function sF(e,{relative:t}={}){on(Bd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=w.useContext(oi),{hash:s,pathname:i,search:l}=yf(e,{relative:t}),d=i;return n!=="/"&&(d=i==="/"?n:Ki([n,i])),a.createHref({pathname:d,search:l,hash:s})}function Bd(){return w.useContext(gf)!=null}function ua(){return on(Bd(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(gf).location}var GI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KI(e){w.useContext(oi).static||w.useLayoutEffect(e)}function kn(){let{isDataRoute:e}=w.useContext(Ti);return e?yF():iF()}function iF(){on(Bd(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Md),{basename:t,navigator:n}=w.useContext(oi),{matches:a}=w.useContext(Ti),{pathname:s}=ua(),i=JSON.stringify(Sw(a)),l=w.useRef(!1);return KI(()=>{l.current=!0}),w.useCallback((u,h={})=>{if(ii(l.current,GI),!l.current)return;if(typeof u=="number"){n.go(u);return}let p=Nw(u,JSON.parse(i),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Ki([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,i,s,e])}w.createContext(null);function yf(e,{relative:t}={}){let{matches:n}=w.useContext(Ti),{pathname:a}=ua(),s=JSON.stringify(Sw(n));return w.useMemo(()=>Nw(e,JSON.parse(s),a,t==="path"),[e,s,a,t])}function oF(e,t){return VI(e,t)}function VI(e,t,n,a){var A;on(Bd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(oi),{matches:i}=w.useContext(Ti),l=i[i.length-1],d=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let E=p&&p.path||"";YI(u,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=ua(),g;if(t){let E=typeof t=="string"?Pd(t):t;on(h==="/"||((A=E.pathname)==null?void 0:A.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=m;let b=g.pathname||"/",j=b;if(h!=="/"){let E=h.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=zI(e,{pathname:j});ii(p||v!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ii(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=hF(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},d,E.params),pathname:Ki([h,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:Ki([h,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,a);return t&&y?w.createElement(gf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function lF(){let e=gF(),t=tF(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:s},n):null,l)}var cF=w.createElement(lF,null),dF=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(Ti.Provider,{value:this.props.routeContext},w.createElement(Tw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uF({routeContext:e,match:t,children:n}){let a=w.useContext(Md);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Ti.Provider,{value:e},n)}function hF(e,t=[],n=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);on(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,d=-1;if(n)for(let u=0;u<s.length;u++){let h=s[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:p,errors:m}=n,g=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){l=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((u,h,p)=>{let m,g=!1,b=null,j=null;n&&(m=i&&h.route.id?i[h.route.id]:void 0,b=h.route.errorElement||cF,l&&(d<0&&p===0?(YI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,j=null):d===p&&(g=!0,j=h.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,p+1)),y=()=>{let A;return m?A=b:g?A=j:h.route.Component?A=w.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=u,w.createElement(uF,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?w.createElement(dF,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}function Cw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fF(e){let t=w.useContext(Md);return on(t,Cw(e)),t}function pF(e){let t=w.useContext(_x);return on(t,Cw(e)),t}function mF(e){let t=w.useContext(Ti);return on(t,Cw(e)),t}function Aw(e){let t=mF(e),n=t.matches[t.matches.length-1];return on(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function xF(){return Aw("useRouteId")}function gF(){var a;let e=w.useContext(Tw),t=pF("useRouteError"),n=Aw("useRouteError");return e!==void 0?e:(a=t.errors)==null?void 0:a[n]}function yF(){let{router:e}=fF("useNavigate"),t=Aw("useNavigate"),n=w.useRef(!1);return KI(()=>{n.current=!0}),w.useCallback(async(s,i={})=>{ii(n.current,GI),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var zA={};function YI(e,t,n){!t&&!zA[e]&&(zA[e]=!0,ii(!1,n))}w.memo(bF);function bF({routes:e,future:t,state:n}){return VI(e,void 0,n,t)}function rr({to:e,replace:t,state:n,relative:a}){on(Bd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(oi);ii(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(Ti),{pathname:l}=ua(),d=kn(),u=Nw(e,Sw(i),l,a==="path"),h=JSON.stringify(u);return w.useEffect(()=>{d(JSON.parse(h),{replace:t,state:n,relative:a})},[d,h,a,t,n]),null}function ft(e){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vF({basename:e="/",children:t=null,location:n,navigationType:a="POP",navigator:s,static:i=!1}){on(!Bd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof n=="string"&&(n=Pd(n));let{pathname:u="/",search:h="",hash:p="",state:m=null,key:g="default"}=n,b=w.useMemo(()=>{let j=ro(u,l);return j==null?null:{location:{pathname:j,search:h,hash:p,state:m,key:g},navigationType:a}},[l,u,h,p,m,g,a]);return ii(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:w.createElement(oi.Provider,{value:d},w.createElement(gf.Provider,{children:t,value:b}))}function $j({children:e,location:t}){return oF(zj(e),t)}function zj(e,t=[]){let n=[];return w.Children.forEach(e,(a,s)=>{if(!w.isValidElement(a))return;let i=[...t,s];if(a.type===w.Fragment){n.push.apply(n,zj(a.props.children,i));return}on(a.type===ft,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=zj(a.props.children,i)),n.push(l)}),n}var om="get",lm="application/x-www-form-urlencoded";function Ix(e){return e!=null&&typeof e.tagName=="string"}function jF(e){return Ix(e)&&e.tagName.toLowerCase()==="button"}function wF(e){return Ix(e)&&e.tagName.toLowerCase()==="form"}function SF(e){return Ix(e)&&e.tagName.toLowerCase()==="input"}function NF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function TF(e,t){return e.button===0&&(!t||t==="_self")&&!NF(e)}var Lp=null;function CF(){if(Lp===null)try{new FormData(document.createElement("form"),0),Lp=!1}catch{Lp=!0}return Lp}var AF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ny(e){return e!=null&&!AF.has(e)?(ii(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lm}"`),null):e}function EF(e,t){let n,a,s,i,l;if(wF(e)){let d=e.getAttribute("action");a=d?ro(d,t):null,n=e.getAttribute("method")||om,s=Ny(e.getAttribute("enctype"))||lm,i=new FormData(e)}else if(jF(e)||SF(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||d.getAttribute("action");if(a=u?ro(u,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||om,s=Ny(e.getAttribute("formenctype"))||Ny(d.getAttribute("enctype"))||lm,i=new FormData(d,e),!CF()){let{name:h,type:p,value:m}=e;if(p==="image"){let g=h?`${h}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else h&&i.append(h,m)}}else{if(Ix(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=om,a=null,s=lm,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:a,method:n.toLowerCase(),encType:s,formData:i,body:l}}function Ew(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function OF(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kF(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _F(e,t,n){let a=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await OF(i,n);return l.links?l.links():[]}return[]}));return PF(a.flat(1).filter(kF).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function UA(e,t,n,a,s,i){let l=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,d=(u,h)=>{var p;return n[h].pathname!==u.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return i==="assets"?t.filter((u,h)=>l(u,h)||d(u,h)):i==="data"?t.filter((u,h)=>{var m;let p=a.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(l(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function IF(e,t,{includeHydrateFallback:n}={}){return DF(e.map(a=>{let s=t.routes[a.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function DF(e){return[...new Set(e)]}function RF(e){let t={},n=Object.keys(e).sort();for(let a of n)t[a]=e[a];return t}function PF(e,t){let n=new Set;return new Set(t),e.reduce((a,s)=>{let i=JSON.stringify(RF(s));return n.has(i)||(n.add(i),a.push({key:i,link:s})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var MF=new Set([100,101,204,205]);function BF(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&ro(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function XI(){let e=w.useContext(Md);return Ew(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function FF(){let e=w.useContext(_x);return Ew(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ow=w.createContext(void 0);Ow.displayName="FrameworkContext";function QI(){let e=w.useContext(Ow);return Ew(e,"You must render this element inside a <HydratedRouter> element"),e}function LF(e,t){let n=w.useContext(Ow),[a,s]=w.useState(!1),[i,l]=w.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=t,g=w.useRef(null);w.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let v=A=>{A.forEach(E=>{l(E.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return g.current&&y.observe(g.current),()=>{y.disconnect()}}},[e]),w.useEffect(()=>{if(a){let v=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(v)}}},[a]);let b=()=>{s(!0)},j=()=>{s(!1),l(!1)};return n?e!=="intent"?[i,g,{}]:[i,g,{onFocus:Yu(d,b),onBlur:Yu(u,j),onMouseEnter:Yu(h,b),onMouseLeave:Yu(p,j),onTouchStart:Yu(m,b)}]:[!1,g,{}]}function Yu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $F({page:e,...t}){let{router:n}=XI(),a=w.useMemo(()=>zI(n.routes,e,n.basename),[n.routes,e,n.basename]);return a?w.createElement(UF,{page:e,matches:a,...t}):null}function zF(e){let{manifest:t,routeModules:n}=QI(),[a,s]=w.useState([]);return w.useEffect(()=>{let i=!1;return _F(e,t,n).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,n]),a}function UF({page:e,matches:t,...n}){let a=ua(),{manifest:s,routeModules:i}=QI(),{basename:l}=XI(),{loaderData:d,matches:u}=FF(),h=w.useMemo(()=>UA(e,t,u,s,a,"data"),[e,t,u,s,a]),p=w.useMemo(()=>UA(e,t,u,s,a,"assets"),[e,t,u,s,a]),m=w.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let j=new Set,v=!1;if(t.forEach(A=>{var O;let E=s.routes[A.route.id];!E||!E.hasLoader||(!h.some(S=>S.route.id===A.route.id)&&A.route.id in d&&((O=i[A.route.id])!=null&&O.shouldRevalidate)||E.hasClientLoader?v=!0:j.add(A.route.id))}),j.size===0)return[];let y=BF(e,l);return v&&j.size>0&&y.searchParams.set("_routes",t.filter(A=>j.has(A.route.id)).map(A=>A.route.id).join(",")),[y.pathname+y.search]},[l,d,a,s,h,t,e,i]),g=w.useMemo(()=>IF(p,s),[p,s]),b=zF(p);return w.createElement(w.Fragment,null,m.map(j=>w.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),g.map(j=>w.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),b.map(({key:j,link:v})=>w.createElement("link",{key:j,...v})))}function qF(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var JI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JI&&(window.__reactRouterVersion="7.6.2")}catch{}function WF({basename:e,children:t,window:n}){let a=w.useRef();a.current==null&&(a.current=IB({window:n,v5Compat:!0}));let s=a.current,[i,l]=w.useState({action:s.action,location:s.location}),d=w.useCallback(u=>{w.startTransition(()=>l(u))},[l]);return w.useLayoutEffect(()=>s.listen(d),[s,d]),w.createElement(vF,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var ZI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kw=w.forwardRef(function({onClick:t,discover:n="render",prefetch:a="none",relative:s,reloadDocument:i,replace:l,state:d,target:u,to:h,preventScrollReset:p,viewTransition:m,...g},b){let{basename:j}=w.useContext(oi),v=typeof h=="string"&&ZI.test(h),y,A=!1;if(typeof h=="string"&&v&&(y=h,JI))try{let B=new URL(window.location.href),M=h.startsWith("//")?new URL(B.protocol+h):new URL(h),F=ro(M.pathname,j);M.origin===B.origin&&F!=null?h=F+M.search+M.hash:A=!0}catch{ii(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=sF(h,{relative:s}),[O,S,C]=LF(a,g),k=VF(h,{replace:l,state:d,target:u,preventScrollReset:p,relative:s,viewTransition:m});function I(B){t&&t(B),B.defaultPrevented||k(B)}let z=w.createElement("a",{...g,...C,href:y||E,onClick:A||i?t:I,ref:qF(b,S),target:u,"data-discover":!v&&n==="render"?"true":void 0});return O&&!v?w.createElement(w.Fragment,null,z,w.createElement($F,{page:E})):z});kw.displayName="Link";var HF=w.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:a="",end:s=!1,style:i,to:l,viewTransition:d,children:u,...h},p){let m=yf(l,{relative:h.relative}),g=ua(),b=w.useContext(_x),{navigator:j,basename:v}=w.useContext(oi),y=b!=null&&ZF(m)&&d===!0,A=j.encodeLocation?j.encodeLocation(m).pathname:m.pathname,E=g.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(E=E.toLowerCase(),O=O?O.toLowerCase():null,A=A.toLowerCase()),O&&v&&(O=ro(O,v)||O);const S=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let C=E===A||!s&&E.startsWith(A)&&E.charAt(S)==="/",k=O!=null&&(O===A||!s&&O.startsWith(A)&&O.charAt(A.length)==="/"),I={isActive:C,isPending:k,isTransitioning:y},z=C?t:void 0,B;typeof a=="function"?B=a(I):B=[a,C?"active":null,k?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let M=typeof i=="function"?i(I):i;return w.createElement(kw,{...h,"aria-current":z,className:B,ref:p,style:M,to:l,viewTransition:d},typeof u=="function"?u(I):u)});HF.displayName="NavLink";var GF=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:a,replace:s,state:i,method:l=om,action:d,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:m,...g},b)=>{let j=QF(),v=JF(d,{relative:h}),y=l.toLowerCase()==="get"?"get":"post",A=typeof d=="string"&&ZI.test(d),E=O=>{if(u&&u(O),O.defaultPrevented)return;O.preventDefault();let S=O.nativeEvent.submitter,C=(S==null?void 0:S.getAttribute("formmethod"))||l;j(S||O.currentTarget,{fetcherKey:t,method:C,navigate:n,replace:s,state:i,relative:h,preventScrollReset:p,viewTransition:m})};return w.createElement("form",{ref:b,method:y,action:v,onSubmit:a?u:E,...g,"data-discover":!A&&e==="render"?"true":void 0})});GF.displayName="Form";function KF(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e5(e){let t=w.useContext(Md);return on(t,KF(e)),t}function VF(e,{target:t,replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:l}={}){let d=kn(),u=ua(),h=yf(e,{relative:i});return w.useCallback(p=>{if(TF(p,t)){p.preventDefault();let m=n!==void 0?n:Sh(u)===Sh(h);d(e,{replace:m,state:a,preventScrollReset:s,relative:i,viewTransition:l})}},[u,d,h,n,a,t,e,s,i,l])}var YF=0,XF=()=>`__${String(++YF)}__`;function QF(){let{router:e}=e5("useSubmit"),{basename:t}=w.useContext(oi),n=xF();return w.useCallback(async(a,s={})=>{let{action:i,method:l,encType:d,formData:u,body:h}=EF(a,t);if(s.navigate===!1){let p=s.fetcherKey||XF();await e.fetch(p,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||l,formEncType:s.encType||d,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||l,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function JF(e,{relative:t}={}){let{basename:n}=w.useContext(oi),a=w.useContext(Ti);on(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),i={...yf(e||".",{relative:t})},l=ua();if(e==null){i.search=l.search;let d=new URLSearchParams(i.search),u=d.getAll("index");if(u.some(p=>p==="")){d.delete("index"),u.filter(m=>m).forEach(m=>d.append("index",m));let p=d.toString();i.search=p?`?${p}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ki([n,i.pathname])),Sh(i)}function ZF(e,t={}){let n=w.useContext(HI);on(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=e5("useViewTransitionState"),s=yf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=ro(n.currentLocation.pathname,a)||n.currentLocation.pathname,l=ro(n.nextLocation.pathname,a)||n.nextLocation.pathname;return fm(s.pathname,l)!=null||fm(s.pathname,i)!=null}[...MF];/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tL=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase()),qA=e=>{const t=tL(e);return t.charAt(0).toUpperCase()+t.slice(1)},t5=(...e)=>e.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim(),rL=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:l,...d},u)=>w.createElement("svg",{ref:u,...nL,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:t5("lucide",s),...!i&&!rL(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,p])=>w.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(e,t)=>{const n=w.forwardRef(({className:a,...s},i)=>w.createElement(aL,{ref:i,iconNode:t,className:t5(`lucide-${eL(qA(e))}`,`lucide-${e}`,a),...s}));return n.displayName=qA(e),n};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Go=Et("arrow-down",sL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ko=Et("arrow-up",iL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],lL=Et("banknote",oL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],bi=Et("bed",cL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rn=Et("calendar",dL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Jc=Et("chart-column",uL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ca=Et("check",hL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fd=Et("chevron-left",fL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ld=Et("chevron-right",pL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xr=Et("circle-alert",mL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],od=Et("circle-check-big",xL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yL=Et("circle-help",gL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vL=Et("circle-x",bL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Kc=Et("clock",jL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ua=Et("credit-card",wL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],r5=Et("dollar-sign",SL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Sa=Et("download",NL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],CL=Et("external-link",TL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_w=Et("eye-off",AL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xs=Et("eye",EL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],kL=Et("facebook",OL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ld=Et("file-text",_L);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cd=Et("funnel",IL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],WA=Et("heart",DL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],co=Et("image",RL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],Vi=Et("indian-rupee",PL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],BL=Et("info",ML);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],LL=Et("instagram",FL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],HA=Et("key-round",$L);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],n5=Et("key",zL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],qL=Et("layout-dashboard",UL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],HL=Et("linkedin",WL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$a=Et("loader",GL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],VL=Et("lock",KL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],pm=Et("log-out",YL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ps=Et("mail",XL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$l=Et("map-pin",QL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],ZL=Et("menu",JL);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],a5=Et("message-square",e7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M5 12h14",key:"1ays0h"}]],GA=Et("minus",t7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],s5=Et("package",r7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Ia=Et("phone",n7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qa=Et("plus",a7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],_s=Et("printer",s7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Ui=Et("qr-code",i7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Nh=Et("receipt",o7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ai=Et("refresh-cw",l7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],d7=Et("rotate-cw",c7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],i5=Et("save",u7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Tr=Et("search",h7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],p7=Et("send",f7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],x7=Et("shopping-bag",m7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Th=Et("shopping-cart",g7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],o5=Et("smartphone",y7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Vn=Et("square-pen",b7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],j7=Et("star",v7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Uj=Et("store",w7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],N7=Et("table",S7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],C7=Et("tags",T7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Yn=Et("trash-2",A7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],mm=Et("trending-up",E7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],k7=Et("twitter",O7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],qi=Et("upload",_7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$d=Et("user-plus",I7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vo=Et("user",D7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ei=Et("users",R7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],xm=Et("utensils",P7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ch=Et("wallet",M7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],On=Et("x",B7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],L7=Et("zoom-in",F7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],z7=Et("zoom-out",$7),U7=({collapsed:e,setCollapsed:t})=>{const n=ua(),a=kn(),[s,i]=w.useState(n.pathname),[l,d]=w.useState(null);w.useEffect(()=>{i(n.pathname);const p=localStorage.getItem("userData");p&&d(JSON.parse(p))},[n.pathname]);const u=[{path:"/",name:"Dashboard",icon:r.jsx(qL,{size:20})},{path:"/branches",name:"Branches",icon:r.jsx(Uj,{size:20})},{path:"/rooms",name:"Rooms",icon:r.jsx(bi,{size:20})},{path:"/room-bookings",name:"Room Bookings",icon:r.jsx(rn,{size:20})},{path:"/categories",name:"Categories",icon:r.jsx(C7,{size:20})},{path:"/products",name:"Menu",icon:r.jsx(s5,{size:20})},{path:"/tables",name:"Tables",icon:r.jsx(N7,{size:20})},{path:"/categorized-orders",name:"Categorized Orders",icon:r.jsx(Th,{size:20})},{path:"/qr-uploads",name:"QR Uploads",icon:r.jsx(Nh,{size:20})},{path:"/website-carousel",name:"Carousel Images",icon:r.jsx(co,{size:20})},{path:"/website-catering",name:"Catering Content",icon:r.jsx(xm,{size:20})},{path:"/website-app",name:"App Download",icon:r.jsx(o5,{size:20})},{path:"/website-messages",name:"Contact Messages",icon:r.jsx(a5,{size:20})},{path:"/users",name:"Users",icon:r.jsx(ei,{size:20})},{path:"/staff-users",name:"Staff Users",icon:r.jsx(ei,{size:20})},{path:"/counter-users",name:"Counter Users",icon:r.jsx(ei,{size:20})},{path:"/purchase-users",name:"Purchase Users",icon:r.jsx(ei,{size:20})},{path:"/category-access",name:"Category Access",icon:r.jsx(HA,{size:20})},{path:"/receptionist-access",name:"Receptionist Access",icon:r.jsx(HA,{size:20})},{path:"/help-support",name:"Help & Support",icon:r.jsx(yL,{size:20})},{path:"/about-us",name:"About Us",icon:r.jsx(BL,{size:20})},{path:"/terms-policies",name:"Terms & Policies",icon:r.jsx(ld,{size:20})}],h=()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userData"),localStorage.removeItem("authToken"),a("/login")};return r.jsxs("aside",{className:`sidebar ${e?"sidebar-collapsed":""}`,children:[r.jsxs("div",{className:"sidebar-header",children:[!e&&r.jsxs("div",{className:"logo",children:[r.jsx("div",{className:"logo-icon",children:r.jsx(Uj,{size:24})}),r.jsx("h2",{children:"Hotel Virat"})]}),r.jsx("button",{className:"collapse-btn",onClick:()=>t(!e),children:e?r.jsx(Ld,{size:20}):r.jsx(Fd,{size:20})})]}),r.jsx("nav",{className:"sidebar-nav",children:r.jsx("ul",{children:u.map(p=>r.jsx("li",{children:r.jsxs(kw,{to:p.path,className:`nav-link ${s===p.path?"active":""}`,onClick:()=>i(p.path),children:[r.jsx("span",{className:"icon",children:p.icon}),!e&&r.jsx("span",{className:"text",children:p.name})]})},p.path))})}),r.jsxs("div",{className:"sidebar-footer",children:[e?r.jsx("div",{className:"avatar-small",children:r.jsx("img",{src:(l==null?void 0:l.profileImage)||`https://ui-avatars.com/api/?name=${(l==null?void 0:l.name)||"Admin"}&background=f0f0f0&color=333`,alt:(l==null?void 0:l.name)||"Admin"})}):r.jsxs("div",{className:"user-info",children:[r.jsx("div",{className:"avatar",children:r.jsx("img",{src:(l==null?void 0:l.profileImage)||`https://ui-avatars.com/api/?name=${(l==null?void 0:l.name)||"Admin"}&background=f0f0f0&color=333`,alt:(l==null?void 0:l.name)||"Admin"})}),r.jsxs("div",{className:"user-details",children:[r.jsx("h4",{children:(l==null?void 0:l.name)||"Admin"}),r.jsx("p",{children:(l==null?void 0:l.email)||""})]})]}),r.jsxs("button",{className:"logout-btn",onClick:h,children:[r.jsx(pm,{size:18}),!e&&r.jsx("span",{children:"Logout"})]})]})]})};function l5(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=l5(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Nr(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=l5(e))&&(a&&(a+=" "),a+=t);return a}var Ty,KA;function Ya(){if(KA)return Ty;KA=1;var e=Array.isArray;return Ty=e,Ty}var Cy,VA;function c5(){if(VA)return Cy;VA=1;var e=typeof Fp=="object"&&Fp&&Fp.Object===Object&&Fp;return Cy=e,Cy}var Ay,YA;function Ci(){if(YA)return Ay;YA=1;var e=c5(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Ay=n,Ay}var Ey,XA;function bf(){if(XA)return Ey;XA=1;var e=Ci(),t=e.Symbol;return Ey=t,Ey}var Oy,QA;function q7(){if(QA)return Oy;QA=1;var e=bf(),t=Object.prototype,n=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(l){var d=n.call(l,s),u=l[s];try{l[s]=void 0;var h=!0}catch{}var p=a.call(l);return h&&(d?l[s]=u:delete l[s]),p}return Oy=i,Oy}var ky,JA;function W7(){if(JA)return ky;JA=1;var e=Object.prototype,t=e.toString;function n(a){return t.call(a)}return ky=n,ky}var _y,ZA;function uo(){if(ZA)return _y;ZA=1;var e=bf(),t=q7(),n=W7(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function l(d){return d==null?d===void 0?s:a:i&&i in Object(d)?t(d):n(d)}return _y=l,_y}var Iy,eE;function ho(){if(eE)return Iy;eE=1;function e(t){return t!=null&&typeof t=="object"}return Iy=e,Iy}var Dy,tE;function zd(){if(tE)return Dy;tE=1;var e=uo(),t=ho(),n="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==n}return Dy=a,Dy}var Ry,rE;function Iw(){if(rE)return Ry;rE=1;var e=Ya(),t=zd(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,l){if(e(i))return!1;var d=typeof i;return d=="number"||d=="symbol"||d=="boolean"||i==null||t(i)?!0:a.test(i)||!n.test(i)||l!=null&&i in Object(l)}return Ry=s,Ry}var Py,nE;function Zo(){if(nE)return Py;nE=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Py=e,Py}var My,aE;function Dw(){if(aE)return My;aE=1;var e=uo(),t=Zo(),n="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function l(d){if(!t(d))return!1;var u=e(d);return u==a||u==s||u==n||u==i}return My=l,My}var By,sE;function H7(){if(sE)return By;sE=1;var e=Ci(),t=e["__core-js_shared__"];return By=t,By}var Fy,iE;function G7(){if(iE)return Fy;iE=1;var e=H7(),t=function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function n(a){return!!t&&t in a}return Fy=n,Fy}var Ly,oE;function d5(){if(oE)return Ly;oE=1;var e=Function.prototype,t=e.toString;function n(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return Ly=n,Ly}var $y,lE;function K7(){if(lE)return $y;lE=1;var e=Dw(),t=G7(),n=Zo(),a=d5(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,u=l.toString,h=d.hasOwnProperty,p=RegExp("^"+u.call(h).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(g){if(!n(g)||t(g))return!1;var b=e(g)?p:i;return b.test(a(g))}return $y=m,$y}var zy,cE;function V7(){if(cE)return zy;cE=1;function e(t,n){return t==null?void 0:t[n]}return zy=e,zy}var Uy,dE;function Xl(){if(dE)return Uy;dE=1;var e=K7(),t=V7();function n(a,s){var i=t(a,s);return e(i)?i:void 0}return Uy=n,Uy}var qy,uE;function Dx(){if(uE)return qy;uE=1;var e=Xl(),t=e(Object,"create");return qy=t,qy}var Wy,hE;function Y7(){if(hE)return Wy;hE=1;var e=Dx();function t(){this.__data__=e?e(null):{},this.size=0}return Wy=t,Wy}var Hy,fE;function X7(){if(fE)return Hy;fE=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Hy=e,Hy}var Gy,pE;function Q7(){if(pE)return Gy;pE=1;var e=Dx(),t="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function s(i){var l=this.__data__;if(e){var d=l[i];return d===t?void 0:d}return a.call(l,i)?l[i]:void 0}return Gy=s,Gy}var Ky,mE;function J7(){if(mE)return Ky;mE=1;var e=Dx(),t=Object.prototype,n=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return Ky=a,Ky}var Vy,xE;function Z7(){if(xE)return Vy;xE=1;var e=Dx(),t="__lodash_hash_undefined__";function n(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return Vy=n,Vy}var Yy,gE;function e$(){if(gE)return Yy;gE=1;var e=Y7(),t=X7(),n=Q7(),a=J7(),s=Z7();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var h=l[d];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Yy=i,Yy}var Xy,yE;function t$(){if(yE)return Xy;yE=1;function e(){this.__data__=[],this.size=0}return Xy=e,Xy}var Qy,bE;function Rw(){if(bE)return Qy;bE=1;function e(t,n){return t===n||t!==t&&n!==n}return Qy=e,Qy}var Jy,vE;function Rx(){if(vE)return Jy;vE=1;var e=Rw();function t(n,a){for(var s=n.length;s--;)if(e(n[s][0],a))return s;return-1}return Jy=t,Jy}var Zy,jE;function r$(){if(jE)return Zy;jE=1;var e=Rx(),t=Array.prototype,n=t.splice;function a(s){var i=this.__data__,l=e(i,s);if(l<0)return!1;var d=i.length-1;return l==d?i.pop():n.call(i,l,1),--this.size,!0}return Zy=a,Zy}var eb,wE;function n$(){if(wE)return eb;wE=1;var e=Rx();function t(n){var a=this.__data__,s=e(a,n);return s<0?void 0:a[s][1]}return eb=t,eb}var tb,SE;function a$(){if(SE)return tb;SE=1;var e=Rx();function t(n){return e(this.__data__,n)>-1}return tb=t,tb}var rb,NE;function s$(){if(NE)return rb;NE=1;var e=Rx();function t(n,a){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,a])):s[i][1]=a,this}return rb=t,rb}var nb,TE;function Px(){if(TE)return nb;TE=1;var e=t$(),t=r$(),n=n$(),a=a$(),s=s$();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var h=l[d];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,nb=i,nb}var ab,CE;function Pw(){if(CE)return ab;CE=1;var e=Xl(),t=Ci(),n=e(t,"Map");return ab=n,ab}var sb,AE;function i$(){if(AE)return sb;AE=1;var e=e$(),t=Px(),n=Pw();function a(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return sb=a,sb}var ib,EE;function o$(){if(EE)return ib;EE=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return ib=e,ib}var ob,OE;function Mx(){if(OE)return ob;OE=1;var e=o$();function t(n,a){var s=n.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return ob=t,ob}var lb,kE;function l$(){if(kE)return lb;kE=1;var e=Mx();function t(n){var a=e(this,n).delete(n);return this.size-=a?1:0,a}return lb=t,lb}var cb,_E;function c$(){if(_E)return cb;_E=1;var e=Mx();function t(n){return e(this,n).get(n)}return cb=t,cb}var db,IE;function d$(){if(IE)return db;IE=1;var e=Mx();function t(n){return e(this,n).has(n)}return db=t,db}var ub,DE;function u$(){if(DE)return ub;DE=1;var e=Mx();function t(n,a){var s=e(this,n),i=s.size;return s.set(n,a),this.size+=s.size==i?0:1,this}return ub=t,ub}var hb,RE;function Mw(){if(RE)return hb;RE=1;var e=i$(),t=l$(),n=c$(),a=d$(),s=u$();function i(l){var d=-1,u=l==null?0:l.length;for(this.clear();++d<u;){var h=l[d];this.set(h[0],h[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,hb=i,hb}var fb,PE;function u5(){if(PE)return fb;PE=1;var e=Mw(),t="Expected a function";function n(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var l=arguments,d=s?s.apply(this,l):l[0],u=i.cache;if(u.has(d))return u.get(d);var h=a.apply(this,l);return i.cache=u.set(d,h)||u,h};return i.cache=new(n.Cache||e),i}return n.Cache=e,fb=n,fb}var pb,ME;function h$(){if(ME)return pb;ME=1;var e=u5(),t=500;function n(a){var s=e(a,function(l){return i.size===t&&i.clear(),l}),i=s.cache;return s}return pb=n,pb}var mb,BE;function f$(){if(BE)return mb;BE=1;var e=h$(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(l,d,u,h){i.push(u?h.replace(n,"$1"):d||l)}),i});return mb=a,mb}var xb,FE;function Bw(){if(FE)return xb;FE=1;function e(t,n){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=n(t[a],a,t);return i}return xb=e,xb}var gb,LE;function p$(){if(LE)return gb;LE=1;var e=bf(),t=Bw(),n=Ya(),a=zd(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function l(d){if(typeof d=="string")return d;if(n(d))return t(d,l)+"";if(a(d))return i?i.call(d):"";var u=d+"";return u=="0"&&1/d==-1/0?"-0":u}return gb=l,gb}var yb,$E;function h5(){if($E)return yb;$E=1;var e=p$();function t(n){return n==null?"":e(n)}return yb=t,yb}var bb,zE;function f5(){if(zE)return bb;zE=1;var e=Ya(),t=Iw(),n=f$(),a=h5();function s(i,l){return e(i)?i:t(i,l)?[i]:n(a(i))}return bb=s,bb}var vb,UE;function Bx(){if(UE)return vb;UE=1;var e=zd();function t(n){if(typeof n=="string"||e(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return vb=t,vb}var jb,qE;function Fw(){if(qE)return jb;qE=1;var e=f5(),t=Bx();function n(a,s){s=e(s,a);for(var i=0,l=s.length;a!=null&&i<l;)a=a[t(s[i++])];return i&&i==l?a:void 0}return jb=n,jb}var wb,WE;function p5(){if(WE)return wb;WE=1;var e=Fw();function t(n,a,s){var i=n==null?void 0:e(n,a);return i===void 0?s:i}return wb=t,wb}var m$=p5();const Ds=$r(m$);var Sb,HE;function x$(){if(HE)return Sb;HE=1;function e(t){return t==null}return Sb=e,Sb}var g$=x$();const mr=$r(g$);var Nb,GE;function y$(){if(GE)return Nb;GE=1;var e=uo(),t=Ya(),n=ho(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&n(i)&&e(i)==a}return Nb=s,Nb}var b$=y$();const zl=$r(b$);var v$=Dw();const dr=$r(v$);var j$=Zo();const Ud=$r(j$);var Tb={exports:{}},Ir={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function w$(){if(KE)return Ir;KE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),j;j=Symbol.for("react.module.reference");function v(y){if(typeof y=="object"&&y!==null){var A=y.$$typeof;switch(A){case e:switch(y=y.type,y){case n:case s:case a:case h:case p:return y;default:switch(y=y&&y.$$typeof,y){case d:case l:case u:case g:case m:case i:return y;default:return A}}case t:return A}}}return Ir.ContextConsumer=l,Ir.ContextProvider=i,Ir.Element=e,Ir.ForwardRef=u,Ir.Fragment=n,Ir.Lazy=g,Ir.Memo=m,Ir.Portal=t,Ir.Profiler=s,Ir.StrictMode=a,Ir.Suspense=h,Ir.SuspenseList=p,Ir.isAsyncMode=function(){return!1},Ir.isConcurrentMode=function(){return!1},Ir.isContextConsumer=function(y){return v(y)===l},Ir.isContextProvider=function(y){return v(y)===i},Ir.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Ir.isForwardRef=function(y){return v(y)===u},Ir.isFragment=function(y){return v(y)===n},Ir.isLazy=function(y){return v(y)===g},Ir.isMemo=function(y){return v(y)===m},Ir.isPortal=function(y){return v(y)===t},Ir.isProfiler=function(y){return v(y)===s},Ir.isStrictMode=function(y){return v(y)===a},Ir.isSuspense=function(y){return v(y)===h},Ir.isSuspenseList=function(y){return v(y)===p},Ir.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===s||y===a||y===h||y===p||y===b||typeof y=="object"&&y!==null&&(y.$$typeof===g||y.$$typeof===m||y.$$typeof===i||y.$$typeof===l||y.$$typeof===u||y.$$typeof===j||y.getModuleId!==void 0)},Ir.typeOf=v,Ir}var VE;function S$(){return VE||(VE=1,Tb.exports=w$()),Tb.exports}var N$=S$(),Cb,YE;function m5(){if(YE)return Cb;YE=1;var e=uo(),t=ho(),n="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==n}return Cb=a,Cb}var Ab,XE;function T$(){if(XE)return Ab;XE=1;var e=m5();function t(n){return e(n)&&n!=+n}return Ab=t,Ab}var C$=T$();const vf=$r(C$);var A$=m5();const E$=$r(A$);var ti=function(t){return t===0?0:t>0?1:-1},kl=function(t){return zl(t)&&t.indexOf("%")===t.length-1},St=function(t){return E$(t)&&!vf(t)},Mn=function(t){return St(t)||zl(t)},O$=0,jf=function(t){var n=++O$;return"".concat(t||"").concat(n)},Ul=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!St(t)&&!zl(t))return a;var i;if(kl(t)){var l=t.indexOf("%");i=n*parseFloat(t.slice(0,l))/100}else i=+t;return vf(i)&&(i=a),s&&i>n&&(i=n),i},$o=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},k$=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,a={},s=0;s<n;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},Qs=function(t,n){return St(t)&&St(n)?function(a){return t+a*(n-t)}:function(){return n}};function gm(e,t,n){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):Ds(a,t))===n})}var _$=function(t,n){return St(t)&&St(n)?t-n:zl(t)&&zl(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Zc(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function qj(e){"@babel/helpers - typeof";return qj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qj(e)}var I$=["viewBox","children"],D$=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],QE=["points","pathLength"],Eb={svg:I$,polygon:QE,polyline:QE},Lw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ym=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(w.isValidElement(t)&&(a=t.props),!Ud(a))return null;var s={};return Object.keys(a).forEach(function(i){Lw.includes(i)&&(s[i]=n||function(l){return a[i](a,l)})}),s},R$=function(t,n,a){return function(s){return t(n,a,s),null}},bm=function(t,n,a){if(!Ud(t)||qj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var l=t[i];Lw.includes(i)&&typeof l=="function"&&(s||(s={}),s[i]=R$(l,n,a))}),s},P$=["children"],M$=["children"];function JE(e,t){if(e==null)return{};var n=B$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function B$(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Wj(e){"@babel/helpers - typeof";return Wj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wj(e)}var ZE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Yi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},eO=null,Ob=null,$w=function e(t){if(t===eO&&Array.isArray(Ob))return Ob;var n=[];return w.Children.forEach(t,function(a){mr(a)||(N$.isFragment(a)?n=n.concat(e(a.props.children)):n.push(a))}),Ob=n,eO=t,n};function Rs(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(function(s){return Yi(s)}):a=[Yi(t)],$w(e).forEach(function(s){var i=Ds(s,"type.displayName")||Ds(s,"type.name");a.indexOf(i)!==-1&&n.push(s)}),n}function cs(e,t){var n=Rs(e,t);return n&&n[0]}var tO=function(t){if(!t||!t.props)return!1;var n=t.props,a=n.width,s=n.height;return!(!St(a)||a<=0||!St(s)||s<=0)},F$=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],L$=function(t){return t&&t.type&&zl(t.type)&&F$.indexOf(t.type)>=0},$$=function(t){return t&&Wj(t)==="object"&&"clipDot"in t},z$=function(t,n,a,s){var i,l=(i=Eb==null?void 0:Eb[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!dr(t)&&(s&&l.includes(n)||D$.includes(n))||a&&Lw.includes(n)},gr=function(t,n,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(w.isValidElement(t)&&(s=t.props),!Ud(s))return null;var i={};return Object.keys(s).forEach(function(l){var d;z$((d=s)===null||d===void 0?void 0:d[l],l,n,a)&&(i[l]=s[l])}),i},Hj=function e(t,n){if(t===n)return!0;var a=w.Children.count(t);if(a!==w.Children.count(n))return!1;if(a===0)return!0;if(a===1)return rO(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<a;s++){var i=t[s],l=n[s];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!rO(i,l))return!1}return!0},rO=function(t,n){if(mr(t)&&mr(n))return!0;if(!mr(t)&&!mr(n)){var a=t.props||{},s=a.children,i=JE(a,P$),l=n.props||{},d=l.children,u=JE(l,M$);return s&&d?Zc(i,u)&&Hj(s,d):!s&&!d?Zc(i,u):!1}return!1},nO=function(t,n){var a=[],s={};return $w(t).forEach(function(i,l){if(L$(i))a.push(i);else if(i){var d=Yi(i.type),u=n[d]||{},h=u.handler,p=u.once;if(h&&(!p||!s[d])){var m=h(i,d,l);a.push(m),s[d]=!0}}}),a},U$=function(t){var n=t&&t.type;return n&&ZE[n]?ZE[n]:null},q$=function(t,n){return $w(n).indexOf(t)},W$=["children","width","height","viewBox","className","style","title","desc"];function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gj.apply(this,arguments)}function H$(e,t){if(e==null)return{};var n=G$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function G$(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Kj(e){var t=e.children,n=e.width,a=e.height,s=e.viewBox,i=e.className,l=e.style,d=e.title,u=e.desc,h=H$(e,W$),p=s||{width:n,height:a,x:0,y:0},m=Nr("recharts-surface",i);return _e.createElement("svg",Gj({},gr(h,!0,"svg"),{className:m,width:n,height:a,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),_e.createElement("title",null,d),_e.createElement("desc",null,u),t)}var K$=["children","className"];function Vj(){return Vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vj.apply(this,arguments)}function V$(e,t){if(e==null)return{};var n=Y$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Y$(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var vn=_e.forwardRef(function(e,t){var n=e.children,a=e.className,s=V$(e,K$),i=Nr("recharts-layer",a);return _e.createElement("g",Vj({className:i},gr(s,!0),{ref:t}),n)}),Xi=function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},kb,aO;function X$(){if(aO)return kb;aO=1;function e(t,n,a){var s=-1,i=t.length;n<0&&(n=-n>i?0:i+n),a=a>i?i:a,a<0&&(a+=i),i=n>a?0:a-n>>>0,n>>>=0;for(var l=Array(i);++s<i;)l[s]=t[s+n];return l}return kb=e,kb}var _b,sO;function Q$(){if(sO)return _b;sO=1;var e=X$();function t(n,a,s){var i=n.length;return s=s===void 0?i:s,!a&&s>=i?n:e(n,a,s)}return _b=t,_b}var Ib,iO;function x5(){if(iO)return Ib;iO=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+n+a,i="\\ufe0e\\ufe0f",l="\\u200d",d=RegExp("["+l+e+s+i+"]");function u(h){return d.test(h)}return Ib=u,Ib}var Db,oO;function J$(){if(oO)return Db;oO=1;function e(t){return t.split("")}return Db=e,Db}var Rb,lO;function Z$(){if(lO)return Rb;lO=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+n+a,i="\\ufe0e\\ufe0f",l="["+e+"]",d="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",h="(?:"+d+"|"+u+")",p="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",j=h+"?",v="["+i+"]?",y="(?:"+b+"(?:"+[p,m,g].join("|")+")"+v+j+")*",A=v+j+y,E="(?:"+[p+d+"?",d,m,g,l].join("|")+")",O=RegExp(u+"(?="+u+")|"+E+A,"g");function S(C){return C.match(O)||[]}return Rb=S,Rb}var Pb,cO;function ez(){if(cO)return Pb;cO=1;var e=J$(),t=x5(),n=Z$();function a(s){return t(s)?n(s):e(s)}return Pb=a,Pb}var Mb,dO;function tz(){if(dO)return Mb;dO=1;var e=Q$(),t=x5(),n=ez(),a=h5();function s(i){return function(l){l=a(l);var d=t(l)?n(l):void 0,u=d?d[0]:l.charAt(0),h=d?e(d,1).join(""):l.slice(1);return u[i]()+h}}return Mb=s,Mb}var Bb,uO;function rz(){if(uO)return Bb;uO=1;var e=tz(),t=e("toUpperCase");return Bb=t,Bb}var nz=rz();const Fx=$r(nz);function Zr(e){return function(){return e}}const g5=Math.cos,vm=Math.sin,li=Math.sqrt,jm=Math.PI,Lx=2*jm,Yj=Math.PI,Xj=2*Yj,Al=1e-6,az=Xj-Al;function y5(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function sz(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return y5;const n=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class iz{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?y5:sz(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,i,l){this._append`C${+t},${+n},${+a},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,n,a,s,i){if(t=+t,n=+n,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,d=this._y1,u=a-t,h=s-n,p=l-t,m=d-n,g=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Al)if(!(Math.abs(m*u-h*p)>Al)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let b=a-l,j=s-d,v=u*u+h*h,y=b*b+j*j,A=Math.sqrt(v),E=Math.sqrt(g),O=i*Math.tan((Yj-Math.acos((v+g-y)/(2*A*E)))/2),S=O/E,C=O/A;Math.abs(S-1)>Al&&this._append`L${t+S*p},${n+S*m}`,this._append`A${i},${i},0,0,${+(m*b>p*j)},${this._x1=t+C*u},${this._y1=n+C*h}`}}arc(t,n,a,s,i,l){if(t=+t,n=+n,a=+a,l=!!l,a<0)throw new Error(`negative radius: ${a}`);let d=a*Math.cos(s),u=a*Math.sin(s),h=t+d,p=n+u,m=1^l,g=l?s-i:i-s;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Al||Math.abs(this._y1-p)>Al)&&this._append`L${h},${p}`,a&&(g<0&&(g=g%Xj+Xj),g>az?this._append`A${a},${a},0,1,${m},${t-d},${n-u}A${a},${a},0,1,${m},${this._x1=h},${this._y1=p}`:g>Al&&this._append`A${a},${a},0,${+(g>=Yj)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=n+a*Math.sin(i)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function zw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new iz(t)}function Uw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function b5(e){this._context=e}b5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $x(e){return new b5(e)}function v5(e){return e[0]}function j5(e){return e[1]}function w5(e,t){var n=Zr(!0),a=null,s=$x,i=null,l=zw(d);e=typeof e=="function"?e:e===void 0?v5:Zr(e),t=typeof t=="function"?t:t===void 0?j5:Zr(t);function d(u){var h,p=(u=Uw(u)).length,m,g=!1,b;for(a==null&&(i=s(b=l())),h=0;h<=p;++h)!(h<p&&n(m=u[h],h,u))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(m,h,u),+t(m,h,u));if(b)return i=null,b+""||null}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:Zr(+u),d):e},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:Zr(+u),d):t},d.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Zr(!!u),d):n},d.curve=function(u){return arguments.length?(s=u,a!=null&&(i=s(a)),d):s},d.context=function(u){return arguments.length?(u==null?a=i=null:i=s(a=u),d):a},d}function $p(e,t,n){var a=null,s=Zr(!0),i=null,l=$x,d=null,u=zw(h);e=typeof e=="function"?e:e===void 0?v5:Zr(+e),t=typeof t=="function"?t:Zr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?j5:Zr(+n);function h(m){var g,b,j,v=(m=Uw(m)).length,y,A=!1,E,O=new Array(v),S=new Array(v);for(i==null&&(d=l(E=u())),g=0;g<=v;++g){if(!(g<v&&s(y=m[g],g,m))===A)if(A=!A)b=g,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=g-1;j>=b;--j)d.point(O[j],S[j]);d.lineEnd(),d.areaEnd()}A&&(O[g]=+e(y,g,m),S[g]=+t(y,g,m),d.point(a?+a(y,g,m):O[g],n?+n(y,g,m):S[g]))}if(E)return d=null,E+""||null}function p(){return w5().defined(s).curve(l).context(i)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:Zr(+m),a=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Zr(+m),h):e},h.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:Zr(+m),h):a},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:Zr(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Zr(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Zr(+m),h):n},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(n)},h.lineX1=function(){return p().x(a).y(t)},h.defined=function(m){return arguments.length?(s=typeof m=="function"?m:Zr(!!m),h):s},h.curve=function(m){return arguments.length?(l=m,i!=null&&(d=l(i)),h):l},h.context=function(m){return arguments.length?(m==null?i=d=null:d=l(i=m),h):i},h}class S5{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function oz(e){return new S5(e,!0)}function lz(e){return new S5(e,!1)}const qw={draw(e,t){const n=li(t/jm);e.moveTo(n,0),e.arc(0,0,n,0,Lx)}},cz={draw(e,t){const n=li(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},N5=li(1/3),dz=N5*2,uz={draw(e,t){const n=li(t/dz),a=n*N5;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},hz={draw(e,t){const n=li(t),a=-n/2;e.rect(a,a,n,n)}},fz=.8908130915292852,T5=vm(jm/10)/vm(7*jm/10),pz=vm(Lx/10)*T5,mz=-g5(Lx/10)*T5,xz={draw(e,t){const n=li(t*fz),a=pz*n,s=mz*n;e.moveTo(0,-n),e.lineTo(a,s);for(let i=1;i<5;++i){const l=Lx*i/5,d=g5(l),u=vm(l);e.lineTo(u*n,-d*n),e.lineTo(d*a-u*s,u*a+d*s)}e.closePath()}},Fb=li(3),gz={draw(e,t){const n=-li(t/(Fb*3));e.moveTo(0,n*2),e.lineTo(-Fb*n,-n),e.lineTo(Fb*n,-n),e.closePath()}},Cs=-.5,As=li(3)/2,Qj=1/li(12),yz=(Qj/2+1)*3,bz={draw(e,t){const n=li(t/yz),a=n/2,s=n*Qj,i=a,l=n*Qj+n,d=-i,u=l;e.moveTo(a,s),e.lineTo(i,l),e.lineTo(d,u),e.lineTo(Cs*a-As*s,As*a+Cs*s),e.lineTo(Cs*i-As*l,As*i+Cs*l),e.lineTo(Cs*d-As*u,As*d+Cs*u),e.lineTo(Cs*a+As*s,Cs*s-As*a),e.lineTo(Cs*i+As*l,Cs*l-As*i),e.lineTo(Cs*d+As*u,Cs*u-As*d),e.closePath()}};function vz(e,t){let n=null,a=zw(s);e=typeof e=="function"?e:Zr(e||qw),t=typeof t=="function"?t:Zr(t===void 0?64:+t);function s(){let i;if(n||(n=i=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Zr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Zr(+i),s):t},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function wm(){}function Sm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function C5(e){this._context=e}C5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jz(e){return new C5(e)}function A5(e){this._context=e}A5.prototype={areaStart:wm,areaEnd:wm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Sm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wz(e){return new A5(e)}function E5(e){this._context=e}E5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Sm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Sz(e){return new E5(e)}function O5(e){this._context=e}O5.prototype={areaStart:wm,areaEnd:wm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Nz(e){return new O5(e)}function hO(e){return e<0?-1:1}function fO(e,t,n){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),l=(n-e._y1)/(s||a<0&&-0),d=(i*s+l*a)/(a+s);return(hO(i)+hO(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(d))||0}function pO(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Lb(e,t,n){var a=e._x0,s=e._y0,i=e._x1,l=e._y1,d=(i-a)/3;e._context.bezierCurveTo(a+d,s+d*t,i-d,l-d*n,i,l)}function Nm(e){this._context=e}Nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lb(this,this._t0,pO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lb(this,pO(this,n=fO(this,e,t)),n);break;default:Lb(this,this._t0,n=fO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function k5(e){this._context=new _5(e)}(k5.prototype=Object.create(Nm.prototype)).point=function(e,t){Nm.prototype.point.call(this,t,e)};function _5(e){this._context=e}_5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,s,i){this._context.bezierCurveTo(t,e,a,n,i,s)}};function Tz(e){return new Nm(e)}function Cz(e){return new k5(e)}function I5(e){this._context=e}I5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=mO(e),s=mO(t),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mO(e){var t,n=e.length-1,a,s=new Array(n),i=new Array(n),l=new Array(n);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=s[t]/i[t-1],i[t]-=a,l[t]-=a*l[t-1];for(s[n-1]=l[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Az(e){return new I5(e)}function zx(e,t){this._context=e,this._t=t}zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Ez(e){return new zx(e,.5)}function Oz(e){return new zx(e,0)}function kz(e){return new zx(e,1)}function dd(e,t){if((l=e.length)>1)for(var n=1,a,s,i=e[t[0]],l,d=i.length;n<l;++n)for(s=i,i=e[t[n]],a=0;a<d;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function Jj(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function _z(e,t){return e[t]}function Iz(e){const t=[];return t.key=e,t}function Dz(){var e=Zr([]),t=Jj,n=dd,a=_z;function s(i){var l=Array.from(e.apply(this,arguments),Iz),d,u=l.length,h=-1,p;for(const m of i)for(d=0,++h;d<u;++d)(l[d][h]=[0,+a(m,l[d].key,h,i)]).data=m;for(d=0,p=Uw(t(l));d<u;++d)l[p[d]].index=d;return n(l,p),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Zr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Zr(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?Jj:typeof i=="function"?i:Zr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(n=i??dd,s):n},s}function Rz(e,t){if((a=e.length)>0){for(var n,a,s=0,i=e[0].length,l;s<i;++s){for(l=n=0;n<a;++n)l+=e[n][s][1]||0;if(l)for(n=0;n<a;++n)e[n][s][1]/=l}dd(e,t)}}function Pz(e,t){if((s=e.length)>0){for(var n=0,a=e[t[0]],s,i=a.length;n<i;++n){for(var l=0,d=0;l<s;++l)d+=e[l][n][1]||0;a[n][1]+=a[n][0]=-d/2}dd(e,t)}}function Mz(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var n=0,a=1,s,i,l;a<i;++a){for(var d=0,u=0,h=0;d<l;++d){for(var p=e[t[d]],m=p[a][1]||0,g=p[a-1][1]||0,b=(m-g)/2,j=0;j<d;++j){var v=e[t[j]],y=v[a][1]||0,A=v[a-1][1]||0;b+=y-A}u+=m,h+=b*m}s[a-1][1]+=s[a-1][0]=n,u&&(n-=h/u)}s[a-1][1]+=s[a-1][0]=n,dd(e,t)}}function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}var Bz=["type","size","sizeType"];function Zj(){return Zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zj.apply(this,arguments)}function xO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function gO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(n),!0).forEach(function(a){Fz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fz(e,t,n){return t=Lz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lz(e){var t=$z(e,"string");return Ah(t)=="symbol"?t:t+""}function $z(e,t){if(Ah(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ah(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zz(e,t){if(e==null)return{};var n=Uz(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Uz(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var D5={symbolCircle:qw,symbolCross:cz,symbolDiamond:uz,symbolSquare:hz,symbolStar:xz,symbolTriangle:gz,symbolWye:bz},qz=Math.PI/180,Wz=function(t){var n="symbol".concat(Fx(t));return D5[n]||qw},Hz=function(t,n,a){if(n==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*qz;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Gz=function(t,n){D5["symbol".concat(Fx(t))]=n},Ww=function(t){var n=t.type,a=n===void 0?"circle":n,s=t.size,i=s===void 0?64:s,l=t.sizeType,d=l===void 0?"area":l,u=zz(t,Bz),h=gO(gO({},u),{},{type:a,size:i,sizeType:d}),p=function(){var y=Wz(a),A=vz().type(y).size(Hz(i,d,a));return A()},m=h.className,g=h.cx,b=h.cy,j=gr(h,!0);return g===+g&&b===+b&&i===+i?_e.createElement("path",Zj({},j,{className:Nr("recharts-symbols",m),transform:"translate(".concat(g,", ").concat(b,")"),d:p()})):null};Ww.registerSymbol=Gz;function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e2.apply(this,arguments)}function yO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Kz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(n),!0).forEach(function(a){Eh(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yO(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Vz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yz(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P5(a.key),a)}}function Xz(e,t,n){return t&&Yz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qz(e,t,n){return t=Tm(t),Jz(e,R5()?Reflect.construct(t,n||[],Tm(e).constructor):t.apply(e,n))}function Jz(e,t){if(t&&(ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zz(e)}function Zz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R5=function(){return!!e})()}function Tm(e){return Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tm(e)}function eU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t2(e,t)}function t2(e,t){return t2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},t2(e,t)}function Eh(e,t,n){return t=P5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P5(e){var t=tU(e,"string");return ud(t)=="symbol"?t:t+""}function tU(e,t){if(ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ud(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Es=32,Hw=function(e){function t(){return Vz(this,t),Qz(this,t,arguments)}return eU(t,e),Xz(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Es/2,l=Es/6,d=Es/3,u=a.inactive?s:a.color;if(a.type==="plainline")return _e.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Es,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return _e.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(d,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*d,",").concat(i,`
            H`).concat(Es,"M").concat(2*d,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(d,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return _e.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Es/8,"h").concat(Es,"v").concat(Es*3/4,"h").concat(-Es,"z"),className:"recharts-legend-icon"});if(_e.isValidElement(a.legendIcon)){var h=Kz({},a);return delete h.legendIcon,_e.cloneElement(a.legendIcon,h)}return _e.createElement(Ww,{fill:u,cx:i,cy:i,size:Es,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,l=s.iconSize,d=s.layout,u=s.formatter,h=s.inactiveColor,p={x:0,y:0,width:Es,height:Es},m={display:d==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(b,j){var v=b.formatter||u,y=Nr(Eh(Eh({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",b.inactive));if(b.type==="none")return null;var A=dr(b.value)?null:b.value;Xi(!dr(b.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var E=b.inactive?h:b.color;return _e.createElement("li",e2({className:y,style:m,key:"legend-item-".concat(j)},bm(a.props,b,j)),_e.createElement(Kj,{width:l,height:l,viewBox:p,style:g},a.renderIcon(b)),_e.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},v?v(A,b,j):A))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,l=a.align;if(!s||!s.length)return null;var d={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return _e.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}])}(w.PureComponent);Eh(Hw,"displayName","Legend");Eh(Hw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var $b,bO;function rU(){if(bO)return $b;bO=1;var e=Px();function t(){this.__data__=new e,this.size=0}return $b=t,$b}var zb,vO;function nU(){if(vO)return zb;vO=1;function e(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}return zb=e,zb}var Ub,jO;function aU(){if(jO)return Ub;jO=1;function e(t){return this.__data__.get(t)}return Ub=e,Ub}var qb,wO;function sU(){if(wO)return qb;wO=1;function e(t){return this.__data__.has(t)}return qb=e,qb}var Wb,SO;function iU(){if(SO)return Wb;SO=1;var e=Px(),t=Pw(),n=Mw(),a=200;function s(i,l){var d=this.__data__;if(d instanceof e){var u=d.__data__;if(!t||u.length<a-1)return u.push([i,l]),this.size=++d.size,this;d=this.__data__=new n(u)}return d.set(i,l),this.size=d.size,this}return Wb=s,Wb}var Hb,NO;function M5(){if(NO)return Hb;NO=1;var e=Px(),t=rU(),n=nU(),a=aU(),s=sU(),i=iU();function l(d){var u=this.__data__=new e(d);this.size=u.size}return l.prototype.clear=t,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=s,l.prototype.set=i,Hb=l,Hb}var Gb,TO;function oU(){if(TO)return Gb;TO=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Gb=t,Gb}var Kb,CO;function lU(){if(CO)return Kb;CO=1;function e(t){return this.__data__.has(t)}return Kb=e,Kb}var Vb,AO;function B5(){if(AO)return Vb;AO=1;var e=Mw(),t=oU(),n=lU();function a(s){var i=-1,l=s==null?0:s.length;for(this.__data__=new e;++i<l;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=n,Vb=a,Vb}var Yb,EO;function F5(){if(EO)return Yb;EO=1;function e(t,n){for(var a=-1,s=t==null?0:t.length;++a<s;)if(n(t[a],a,t))return!0;return!1}return Yb=e,Yb}var Xb,OO;function L5(){if(OO)return Xb;OO=1;function e(t,n){return t.has(n)}return Xb=e,Xb}var Qb,kO;function $5(){if(kO)return Qb;kO=1;var e=B5(),t=F5(),n=L5(),a=1,s=2;function i(l,d,u,h,p,m){var g=u&a,b=l.length,j=d.length;if(b!=j&&!(g&&j>b))return!1;var v=m.get(l),y=m.get(d);if(v&&y)return v==d&&y==l;var A=-1,E=!0,O=u&s?new e:void 0;for(m.set(l,d),m.set(d,l);++A<b;){var S=l[A],C=d[A];if(h)var k=g?h(C,S,A,d,l,m):h(S,C,A,l,d,m);if(k!==void 0){if(k)continue;E=!1;break}if(O){if(!t(d,function(I,z){if(!n(O,z)&&(S===I||p(S,I,u,h,m)))return O.push(z)})){E=!1;break}}else if(!(S===C||p(S,C,u,h,m))){E=!1;break}}return m.delete(l),m.delete(d),E}return Qb=i,Qb}var Jb,_O;function cU(){if(_O)return Jb;_O=1;var e=Ci(),t=e.Uint8Array;return Jb=t,Jb}var Zb,IO;function dU(){if(IO)return Zb;IO=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(s,i){a[++n]=[i,s]}),a}return Zb=e,Zb}var ev,DO;function Gw(){if(DO)return ev;DO=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(s){a[++n]=s}),a}return ev=e,ev}var tv,RO;function uU(){if(RO)return tv;RO=1;var e=bf(),t=cU(),n=Rw(),a=$5(),s=dU(),i=Gw(),l=1,d=2,u="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",g="[object Number]",b="[object RegExp]",j="[object Set]",v="[object String]",y="[object Symbol]",A="[object ArrayBuffer]",E="[object DataView]",O=e?e.prototype:void 0,S=O?O.valueOf:void 0;function C(k,I,z,B,M,F,N){switch(z){case E:if(k.byteLength!=I.byteLength||k.byteOffset!=I.byteOffset)return!1;k=k.buffer,I=I.buffer;case A:return!(k.byteLength!=I.byteLength||!F(new t(k),new t(I)));case u:case h:case g:return n(+k,+I);case p:return k.name==I.name&&k.message==I.message;case b:case v:return k==I+"";case m:var L=s;case j:var P=B&l;if(L||(L=i),k.size!=I.size&&!P)return!1;var _=N.get(k);if(_)return _==I;B|=d,N.set(k,I);var R=a(L(k),L(I),B,M,F,N);return N.delete(k),R;case y:if(S)return S.call(k)==S.call(I)}return!1}return tv=C,tv}var rv,PO;function z5(){if(PO)return rv;PO=1;function e(t,n){for(var a=-1,s=n.length,i=t.length;++a<s;)t[i+a]=n[a];return t}return rv=e,rv}var nv,MO;function hU(){if(MO)return nv;MO=1;var e=z5(),t=Ya();function n(a,s,i){var l=s(a);return t(a)?l:e(l,i(a))}return nv=n,nv}var av,BO;function fU(){if(BO)return av;BO=1;function e(t,n){for(var a=-1,s=t==null?0:t.length,i=0,l=[];++a<s;){var d=t[a];n(d,a,t)&&(l[i++]=d)}return l}return av=e,av}var sv,FO;function pU(){if(FO)return sv;FO=1;function e(){return[]}return sv=e,sv}var iv,LO;function mU(){if(LO)return iv;LO=1;var e=fU(),t=pU(),n=Object.prototype,a=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(l){return l==null?[]:(l=Object(l),e(s(l),function(d){return a.call(l,d)}))}:t;return iv=i,iv}var ov,$O;function xU(){if($O)return ov;$O=1;function e(t,n){for(var a=-1,s=Array(t);++a<t;)s[a]=n(a);return s}return ov=e,ov}var lv,zO;function gU(){if(zO)return lv;zO=1;var e=uo(),t=ho(),n="[object Arguments]";function a(s){return t(s)&&e(s)==n}return lv=a,lv}var cv,UO;function Kw(){if(UO)return cv;UO=1;var e=gU(),t=ho(),n=Object.prototype,a=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(l){return t(l)&&a.call(l,"callee")&&!s.call(l,"callee")};return cv=i,cv}var lh={exports:{}},dv,qO;function yU(){if(qO)return dv;qO=1;function e(){return!1}return dv=e,dv}lh.exports;var WO;function U5(){return WO||(WO=1,function(e,t){var n=Ci(),a=yU(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===s,d=l?n.Buffer:void 0,u=d?d.isBuffer:void 0,h=u||a;e.exports=h}(lh,lh.exports)),lh.exports}var uv,HO;function Vw(){if(HO)return uv;HO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return uv=n,uv}var hv,GO;function Yw(){if(GO)return hv;GO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return hv=t,hv}var fv,KO;function bU(){if(KO)return fv;KO=1;var e=uo(),t=Yw(),n=ho(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",l="[object Date]",d="[object Error]",u="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",g="[object RegExp]",b="[object Set]",j="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",A="[object DataView]",E="[object Float32Array]",O="[object Float64Array]",S="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",I="[object Uint8Array]",z="[object Uint8ClampedArray]",B="[object Uint16Array]",M="[object Uint32Array]",F={};F[E]=F[O]=F[S]=F[C]=F[k]=F[I]=F[z]=F[B]=F[M]=!0,F[a]=F[s]=F[y]=F[i]=F[A]=F[l]=F[d]=F[u]=F[h]=F[p]=F[m]=F[g]=F[b]=F[j]=F[v]=!1;function N(L){return n(L)&&t(L.length)&&!!F[e(L)]}return fv=N,fv}var pv,VO;function q5(){if(VO)return pv;VO=1;function e(t){return function(n){return t(n)}}return pv=e,pv}var ch={exports:{}};ch.exports;var YO;function vU(){return YO||(YO=1,function(e,t){var n=c5(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i&&n.process,d=function(){try{var u=s&&s.require&&s.require("util").types;return u||l&&l.binding&&l.binding("util")}catch{}}();e.exports=d}(ch,ch.exports)),ch.exports}var mv,XO;function W5(){if(XO)return mv;XO=1;var e=bU(),t=q5(),n=vU(),a=n&&n.isTypedArray,s=a?t(a):e;return mv=s,mv}var xv,QO;function jU(){if(QO)return xv;QO=1;var e=xU(),t=Kw(),n=Ya(),a=U5(),s=Vw(),i=W5(),l=Object.prototype,d=l.hasOwnProperty;function u(h,p){var m=n(h),g=!m&&t(h),b=!m&&!g&&a(h),j=!m&&!g&&!b&&i(h),v=m||g||b||j,y=v?e(h.length,String):[],A=y.length;for(var E in h)(p||d.call(h,E))&&!(v&&(E=="length"||b&&(E=="offset"||E=="parent")||j&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||s(E,A)))&&y.push(E);return y}return xv=u,xv}var gv,JO;function wU(){if(JO)return gv;JO=1;var e=Object.prototype;function t(n){var a=n&&n.constructor,s=typeof a=="function"&&a.prototype||e;return n===s}return gv=t,gv}var yv,ZO;function H5(){if(ZO)return yv;ZO=1;function e(t,n){return function(a){return t(n(a))}}return yv=e,yv}var bv,e3;function SU(){if(e3)return bv;e3=1;var e=H5(),t=e(Object.keys,Object);return bv=t,bv}var vv,t3;function NU(){if(t3)return vv;t3=1;var e=wU(),t=SU(),n=Object.prototype,a=n.hasOwnProperty;function s(i){if(!e(i))return t(i);var l=[];for(var d in Object(i))a.call(i,d)&&d!="constructor"&&l.push(d);return l}return vv=s,vv}var jv,r3;function wf(){if(r3)return jv;r3=1;var e=Dw(),t=Yw();function n(a){return a!=null&&t(a.length)&&!e(a)}return jv=n,jv}var wv,n3;function Ux(){if(n3)return wv;n3=1;var e=jU(),t=NU(),n=wf();function a(s){return n(s)?e(s):t(s)}return wv=a,wv}var Sv,a3;function TU(){if(a3)return Sv;a3=1;var e=hU(),t=mU(),n=Ux();function a(s){return e(s,n,t)}return Sv=a,Sv}var Nv,s3;function CU(){if(s3)return Nv;s3=1;var e=TU(),t=1,n=Object.prototype,a=n.hasOwnProperty;function s(i,l,d,u,h,p){var m=d&t,g=e(i),b=g.length,j=e(l),v=j.length;if(b!=v&&!m)return!1;for(var y=b;y--;){var A=g[y];if(!(m?A in l:a.call(l,A)))return!1}var E=p.get(i),O=p.get(l);if(E&&O)return E==l&&O==i;var S=!0;p.set(i,l),p.set(l,i);for(var C=m;++y<b;){A=g[y];var k=i[A],I=l[A];if(u)var z=m?u(I,k,A,l,i,p):u(k,I,A,i,l,p);if(!(z===void 0?k===I||h(k,I,d,u,p):z)){S=!1;break}C||(C=A=="constructor")}if(S&&!C){var B=i.constructor,M=l.constructor;B!=M&&"constructor"in i&&"constructor"in l&&!(typeof B=="function"&&B instanceof B&&typeof M=="function"&&M instanceof M)&&(S=!1)}return p.delete(i),p.delete(l),S}return Nv=s,Nv}var Tv,i3;function AU(){if(i3)return Tv;i3=1;var e=Xl(),t=Ci(),n=e(t,"DataView");return Tv=n,Tv}var Cv,o3;function EU(){if(o3)return Cv;o3=1;var e=Xl(),t=Ci(),n=e(t,"Promise");return Cv=n,Cv}var Av,l3;function G5(){if(l3)return Av;l3=1;var e=Xl(),t=Ci(),n=e(t,"Set");return Av=n,Av}var Ev,c3;function OU(){if(c3)return Ev;c3=1;var e=Xl(),t=Ci(),n=e(t,"WeakMap");return Ev=n,Ev}var Ov,d3;function kU(){if(d3)return Ov;d3=1;var e=AU(),t=Pw(),n=EU(),a=G5(),s=OU(),i=uo(),l=d5(),d="[object Map]",u="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",g="[object DataView]",b=l(e),j=l(t),v=l(n),y=l(a),A=l(s),E=i;return(e&&E(new e(new ArrayBuffer(1)))!=g||t&&E(new t)!=d||n&&E(n.resolve())!=h||a&&E(new a)!=p||s&&E(new s)!=m)&&(E=function(O){var S=i(O),C=S==u?O.constructor:void 0,k=C?l(C):"";if(k)switch(k){case b:return g;case j:return d;case v:return h;case y:return p;case A:return m}return S}),Ov=E,Ov}var kv,u3;function _U(){if(u3)return kv;u3=1;var e=M5(),t=$5(),n=uU(),a=CU(),s=kU(),i=Ya(),l=U5(),d=W5(),u=1,h="[object Arguments]",p="[object Array]",m="[object Object]",g=Object.prototype,b=g.hasOwnProperty;function j(v,y,A,E,O,S){var C=i(v),k=i(y),I=C?p:s(v),z=k?p:s(y);I=I==h?m:I,z=z==h?m:z;var B=I==m,M=z==m,F=I==z;if(F&&l(v)){if(!l(y))return!1;C=!0,B=!1}if(F&&!B)return S||(S=new e),C||d(v)?t(v,y,A,E,O,S):n(v,y,I,A,E,O,S);if(!(A&u)){var N=B&&b.call(v,"__wrapped__"),L=M&&b.call(y,"__wrapped__");if(N||L){var P=N?v.value():v,_=L?y.value():y;return S||(S=new e),O(P,_,A,E,S)}}return F?(S||(S=new e),a(v,y,A,E,O,S)):!1}return kv=j,kv}var _v,h3;function Xw(){if(h3)return _v;h3=1;var e=_U(),t=ho();function n(a,s,i,l,d){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,l,n,d)}return _v=n,_v}var Iv,f3;function IU(){if(f3)return Iv;f3=1;var e=M5(),t=Xw(),n=1,a=2;function s(i,l,d,u){var h=d.length,p=h,m=!u;if(i==null)return!p;for(i=Object(i);h--;){var g=d[h];if(m&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++h<p;){g=d[h];var b=g[0],j=i[b],v=g[1];if(m&&g[2]){if(j===void 0&&!(b in i))return!1}else{var y=new e;if(u)var A=u(j,v,b,i,l,y);if(!(A===void 0?t(v,j,n|a,u,y):A))return!1}}return!0}return Iv=s,Iv}var Dv,p3;function K5(){if(p3)return Dv;p3=1;var e=Zo();function t(n){return n===n&&!e(n)}return Dv=t,Dv}var Rv,m3;function DU(){if(m3)return Rv;m3=1;var e=K5(),t=Ux();function n(a){for(var s=t(a),i=s.length;i--;){var l=s[i],d=a[l];s[i]=[l,d,e(d)]}return s}return Rv=n,Rv}var Pv,x3;function V5(){if(x3)return Pv;x3=1;function e(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==void 0||t in Object(a))}}return Pv=e,Pv}var Mv,g3;function RU(){if(g3)return Mv;g3=1;var e=IU(),t=DU(),n=V5();function a(s){var i=t(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(l){return l===s||e(l,s,i)}}return Mv=a,Mv}var Bv,y3;function PU(){if(y3)return Bv;y3=1;function e(t,n){return t!=null&&n in Object(t)}return Bv=e,Bv}var Fv,b3;function MU(){if(b3)return Fv;b3=1;var e=f5(),t=Kw(),n=Ya(),a=Vw(),s=Yw(),i=Bx();function l(d,u,h){u=e(u,d);for(var p=-1,m=u.length,g=!1;++p<m;){var b=i(u[p]);if(!(g=d!=null&&h(d,b)))break;d=d[b]}return g||++p!=m?g:(m=d==null?0:d.length,!!m&&s(m)&&a(b,m)&&(n(d)||t(d)))}return Fv=l,Fv}var Lv,v3;function BU(){if(v3)return Lv;v3=1;var e=PU(),t=MU();function n(a,s){return a!=null&&t(a,s,e)}return Lv=n,Lv}var $v,j3;function FU(){if(j3)return $v;j3=1;var e=Xw(),t=p5(),n=BU(),a=Iw(),s=K5(),i=V5(),l=Bx(),d=1,u=2;function h(p,m){return a(p)&&s(m)?i(l(p),m):function(g){var b=t(g,p);return b===void 0&&b===m?n(g,p):e(m,b,d|u)}}return $v=h,$v}var zv,w3;function qd(){if(w3)return zv;w3=1;function e(t){return t}return zv=e,zv}var Uv,S3;function LU(){if(S3)return Uv;S3=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Uv=e,Uv}var qv,N3;function $U(){if(N3)return qv;N3=1;var e=Fw();function t(n){return function(a){return e(a,n)}}return qv=t,qv}var Wv,T3;function zU(){if(T3)return Wv;T3=1;var e=LU(),t=$U(),n=Iw(),a=Bx();function s(i){return n(i)?e(a(i)):t(i)}return Wv=s,Wv}var Hv,C3;function el(){if(C3)return Hv;C3=1;var e=RU(),t=FU(),n=qd(),a=Ya(),s=zU();function i(l){return typeof l=="function"?l:l==null?n:typeof l=="object"?a(l)?t(l[0],l[1]):e(l):s(l)}return Hv=i,Hv}var Gv,A3;function Y5(){if(A3)return Gv;A3=1;function e(t,n,a,s){for(var i=t.length,l=a+(s?1:-1);s?l--:++l<i;)if(n(t[l],l,t))return l;return-1}return Gv=e,Gv}var Kv,E3;function UU(){if(E3)return Kv;E3=1;function e(t){return t!==t}return Kv=e,Kv}var Vv,O3;function qU(){if(O3)return Vv;O3=1;function e(t,n,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===n)return s;return-1}return Vv=e,Vv}var Yv,k3;function WU(){if(k3)return Yv;k3=1;var e=Y5(),t=UU(),n=qU();function a(s,i,l){return i===i?n(s,i,l):e(s,t,l)}return Yv=a,Yv}var Xv,_3;function HU(){if(_3)return Xv;_3=1;var e=WU();function t(n,a){var s=n==null?0:n.length;return!!s&&e(n,a,0)>-1}return Xv=t,Xv}var Qv,I3;function GU(){if(I3)return Qv;I3=1;function e(t,n,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(n,t[s]))return!0;return!1}return Qv=e,Qv}var Jv,D3;function KU(){if(D3)return Jv;D3=1;function e(){}return Jv=e,Jv}var Zv,R3;function VU(){if(R3)return Zv;R3=1;var e=G5(),t=KU(),n=Gw(),a=1/0,s=e&&1/n(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return Zv=s,Zv}var e1,P3;function YU(){if(P3)return e1;P3=1;var e=B5(),t=HU(),n=GU(),a=L5(),s=VU(),i=Gw(),l=200;function d(u,h,p){var m=-1,g=t,b=u.length,j=!0,v=[],y=v;if(p)j=!1,g=n;else if(b>=l){var A=h?null:s(u);if(A)return i(A);j=!1,g=a,y=new e}else y=h?[]:v;e:for(;++m<b;){var E=u[m],O=h?h(E):E;if(E=p||E!==0?E:0,j&&O===O){for(var S=y.length;S--;)if(y[S]===O)continue e;h&&y.push(O),v.push(E)}else g(y,O,p)||(y!==v&&y.push(O),v.push(E))}return v}return e1=d,e1}var t1,M3;function XU(){if(M3)return t1;M3=1;var e=el(),t=YU();function n(a,s){return a&&a.length?t(a,e(s,2)):[]}return t1=n,t1}var QU=XU();const B3=$r(QU);function X5(e,t,n){return t===!0?B3(e,n):dr(t)?B3(e,t):e}function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}var JU=["ref"];function F3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(n),!0).forEach(function(a){qx(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L3(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,J5(a.key),a)}}function eq(e,t,n){return t&&L3(e.prototype,t),n&&L3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tq(e,t,n){return t=Cm(t),rq(e,Q5()?Reflect.construct(t,n||[],Cm(e).constructor):t.apply(e,n))}function rq(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nq(e)}function nq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q5=function(){return!!e})()}function Cm(e){return Cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cm(e)}function aq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t)}function r2(e,t){return r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},r2(e,t)}function qx(e,t,n){return t=J5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J5(e){var t=sq(e,"string");return hd(t)=="symbol"?t:t+""}function sq(e,t){if(hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(hd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iq(e,t){if(e==null)return{};var n=oq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function oq(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function lq(e){return e.value}function cq(e,t){if(_e.isValidElement(e))return _e.cloneElement(e,t);if(typeof e=="function")return _e.createElement(e,t);t.ref;var n=iq(t,JU);return _e.createElement(Hw,n)}var $3=1,ed=function(e){function t(){var n;ZU(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=tq(this,t,[].concat(s)),qx(n,"lastBoundingBox",{width:-1,height:-1}),n}return aq(t,e),eq(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>$3||Math.abs(s.height-this.lastBoundingBox.height)>$3)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?zi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,l=s.align,d=s.verticalAlign,u=s.margin,h=s.chartWidth,p=s.chartHeight,m,g;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(l==="center"&&i==="vertical"){var b=this.getBBoxSnapshot();m={left:((h||0)-b.width)/2}}else m=l==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(d==="middle"){var j=this.getBBoxSnapshot();g={top:((p||0)-j.height)/2}}else g=d==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return zi(zi({},m),g)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,l=s.width,d=s.height,u=s.wrapperStyle,h=s.payloadUniqBy,p=s.payload,m=zi(zi({position:"absolute",width:l||"auto",height:d||"auto"},this.getDefaultPosition(u)),u);return _e.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(b){a.wrapperNode=b}},cq(i,zi(zi({},this.props),{},{payload:X5(p,h,lq)})))}}],[{key:"getWithHeight",value:function(a,s){var i=zi(zi({},this.defaultProps),a.props),l=i.layout;return l==="vertical"&&St(a.props.height)?{height:a.props.height}:l==="horizontal"?{width:a.props.width||s}:null}}])}(w.PureComponent);qx(ed,"displayName","Legend");qx(ed,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var r1,z3;function dq(){if(z3)return r1;z3=1;var e=bf(),t=Kw(),n=Ya(),a=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||t(i)||!!(a&&i&&i[a])}return r1=s,r1}var n1,U3;function Z5(){if(U3)return n1;U3=1;var e=z5(),t=dq();function n(a,s,i,l,d){var u=-1,h=a.length;for(i||(i=t),d||(d=[]);++u<h;){var p=a[u];s>0&&i(p)?s>1?n(p,s-1,i,l,d):e(d,p):l||(d[d.length]=p)}return d}return n1=n,n1}var a1,q3;function uq(){if(q3)return a1;q3=1;function e(t){return function(n,a,s){for(var i=-1,l=Object(n),d=s(n),u=d.length;u--;){var h=d[t?u:++i];if(a(l[h],h,l)===!1)break}return n}}return a1=e,a1}var s1,W3;function hq(){if(W3)return s1;W3=1;var e=uq(),t=e();return s1=t,s1}var i1,H3;function e8(){if(H3)return i1;H3=1;var e=hq(),t=Ux();function n(a,s){return a&&e(a,s,t)}return i1=n,i1}var o1,G3;function fq(){if(G3)return o1;G3=1;var e=wf();function t(n,a){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var l=s.length,d=a?l:-1,u=Object(s);(a?d--:++d<l)&&i(u[d],d,u)!==!1;);return s}}return o1=t,o1}var l1,K3;function Qw(){if(K3)return l1;K3=1;var e=e8(),t=fq(),n=t(e);return l1=n,l1}var c1,V3;function t8(){if(V3)return c1;V3=1;var e=Qw(),t=wf();function n(a,s){var i=-1,l=t(a)?Array(a.length):[];return e(a,function(d,u,h){l[++i]=s(d,u,h)}),l}return c1=n,c1}var d1,Y3;function pq(){if(Y3)return d1;Y3=1;function e(t,n){var a=t.length;for(t.sort(n);a--;)t[a]=t[a].value;return t}return d1=e,d1}var u1,X3;function mq(){if(X3)return u1;X3=1;var e=zd();function t(n,a){if(n!==a){var s=n!==void 0,i=n===null,l=n===n,d=e(n),u=a!==void 0,h=a===null,p=a===a,m=e(a);if(!h&&!m&&!d&&n>a||d&&u&&p&&!h&&!m||i&&u&&p||!s&&p||!l)return 1;if(!i&&!d&&!m&&n<a||m&&s&&l&&!i&&!d||h&&s&&l||!u&&l||!p)return-1}return 0}return u1=t,u1}var h1,Q3;function xq(){if(Q3)return h1;Q3=1;var e=mq();function t(n,a,s){for(var i=-1,l=n.criteria,d=a.criteria,u=l.length,h=s.length;++i<u;){var p=e(l[i],d[i]);if(p){if(i>=h)return p;var m=s[i];return p*(m=="desc"?-1:1)}}return n.index-a.index}return h1=t,h1}var f1,J3;function gq(){if(J3)return f1;J3=1;var e=Bw(),t=Fw(),n=el(),a=t8(),s=pq(),i=q5(),l=xq(),d=qd(),u=Ya();function h(p,m,g){m.length?m=e(m,function(v){return u(v)?function(y){return t(y,v.length===1?v[0]:v)}:v}):m=[d];var b=-1;m=e(m,i(n));var j=a(p,function(v,y,A){var E=e(m,function(O){return O(v)});return{criteria:E,index:++b,value:v}});return s(j,function(v,y){return l(v,y,g)})}return f1=h,f1}var p1,Z3;function yq(){if(Z3)return p1;Z3=1;function e(t,n,a){switch(a.length){case 0:return t.call(n);case 1:return t.call(n,a[0]);case 2:return t.call(n,a[0],a[1]);case 3:return t.call(n,a[0],a[1],a[2])}return t.apply(n,a)}return p1=e,p1}var m1,ek;function bq(){if(ek)return m1;ek=1;var e=yq(),t=Math.max;function n(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var l=arguments,d=-1,u=t(l.length-s,0),h=Array(u);++d<u;)h[d]=l[s+d];d=-1;for(var p=Array(s+1);++d<s;)p[d]=l[d];return p[s]=i(h),e(a,this,p)}}return m1=n,m1}var x1,tk;function vq(){if(tk)return x1;tk=1;function e(t){return function(){return t}}return x1=e,x1}var g1,rk;function r8(){if(rk)return g1;rk=1;var e=Xl(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return g1=t,g1}var y1,nk;function jq(){if(nk)return y1;nk=1;var e=vq(),t=r8(),n=qd(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return y1=a,y1}var b1,ak;function wq(){if(ak)return b1;ak=1;var e=800,t=16,n=Date.now;function a(s){var i=0,l=0;return function(){var d=n(),u=t-(d-l);if(l=d,u>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return b1=a,b1}var v1,sk;function Sq(){if(sk)return v1;sk=1;var e=jq(),t=wq(),n=t(e);return v1=n,v1}var j1,ik;function Nq(){if(ik)return j1;ik=1;var e=qd(),t=bq(),n=Sq();function a(s,i){return n(t(s,i,e),s+"")}return j1=a,j1}var w1,ok;function Wx(){if(ok)return w1;ok=1;var e=Rw(),t=wf(),n=Vw(),a=Zo();function s(i,l,d){if(!a(d))return!1;var u=typeof l;return(u=="number"?t(d)&&n(l,d.length):u=="string"&&l in d)?e(d[l],i):!1}return w1=s,w1}var S1,lk;function Tq(){if(lk)return S1;lk=1;var e=Z5(),t=gq(),n=Nq(),a=Wx(),s=n(function(i,l){if(i==null)return[];var d=l.length;return d>1&&a(i,l[0],l[1])?l=[]:d>2&&a(l[0],l[1],l[2])&&(l=[l[0]]),t(i,e(l,1),[])});return S1=s,S1}var Cq=Tq();const Jw=$r(Cq);function Oh(e){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh(e)}function n2(){return n2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n2.apply(this,arguments)}function Aq(e,t){return _q(e)||kq(e,t)||Oq(e,t)||Eq()}function Eq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oq(e,t){if(e){if(typeof e=="string")return ck(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ck(e,t)}}function ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function kq(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function _q(e){if(Array.isArray(e))return e}function dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function N1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(n),!0).forEach(function(a){Iq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Iq(e,t,n){return t=Dq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dq(e){var t=Rq(e,"string");return Oh(t)=="symbol"?t:t+""}function Rq(e,t){if(Oh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Oh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pq(e){return Array.isArray(e)&&Mn(e[0])&&Mn(e[1])?e.join(" ~ "):e}var Mq=function(t){var n=t.separator,a=n===void 0?" : ":n,s=t.contentStyle,i=s===void 0?{}:s,l=t.itemStyle,d=l===void 0?{}:l,u=t.labelStyle,h=u===void 0?{}:u,p=t.payload,m=t.formatter,g=t.itemSorter,b=t.wrapperClassName,j=t.labelClassName,v=t.label,y=t.labelFormatter,A=t.accessibilityLayer,E=A===void 0?!1:A,O=function(){if(p&&p.length){var N={padding:0,margin:0},L=(g?Jw(p,g):p).map(function(P,_){if(P.type==="none")return null;var R=N1({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},d),W=P.formatter||m||Pq,G=P.value,oe=P.name,q=G,V=oe;if(W&&q!=null&&V!=null){var U=W(G,oe,P,_,p);if(Array.isArray(U)){var X=Aq(U,2);q=X[0],V=X[1]}else q=U}return _e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:R},Mn(V)?_e.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Mn(V)?_e.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,_e.createElement("span",{className:"recharts-tooltip-item-value"},q),_e.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return _e.createElement("ul",{className:"recharts-tooltip-item-list",style:N},L)}return null},S=N1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=N1({margin:0},h),k=!mr(v),I=k?v:"",z=Nr("recharts-default-tooltip",b),B=Nr("recharts-tooltip-label",j);k&&y&&p!==void 0&&p!==null&&(I=y(v,p));var M=E?{role:"status","aria-live":"assertive"}:{};return _e.createElement("div",n2({className:z,style:S},M),_e.createElement("p",{className:B,style:C},_e.isValidElement(I)?I:"".concat(I)),O())};function kh(e){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh(e)}function zp(e,t,n){return t=Bq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bq(e){var t=Fq(e,"string");return kh(t)=="symbol"?t:t+""}function Fq(e,t){if(kh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(kh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xu="recharts-tooltip-wrapper",Lq={visibility:"hidden"};function $q(e){var t=e.coordinate,n=e.translateX,a=e.translateY;return Nr(Xu,zp(zp(zp(zp({},"".concat(Xu,"-right"),St(n)&&t&&St(t.x)&&n>=t.x),"".concat(Xu,"-left"),St(n)&&t&&St(t.x)&&n<t.x),"".concat(Xu,"-bottom"),St(a)&&t&&St(t.y)&&a>=t.y),"".concat(Xu,"-top"),St(a)&&t&&St(t.y)&&a<t.y))}function uk(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,l=e.reverseDirection,d=e.tooltipDimension,u=e.viewBox,h=e.viewBoxDimension;if(i&&St(i[a]))return i[a];var p=n[a]-d-s,m=n[a]+s;if(t[a])return l[a]?p:m;if(l[a]){var g=p,b=u[a];return g<b?Math.max(m,u[a]):Math.max(p,u[a])}var j=m+d,v=u[a]+h;return j>v?Math.max(p,u[a]):Math.max(m,u[a])}function zq(e){var t=e.translateX,n=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Uq(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,l=e.tooltipBox,d=e.useTranslate3d,u=e.viewBox,h,p,m;return l.height>0&&l.width>0&&n?(p=uk({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),m=uk({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),h=zq({translateX:p,translateY:m,useTranslate3d:d})):h=Lq,{cssProperties:h,cssClasses:$q({translateX:p,translateY:m,coordinate:n})}}function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function hk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function fk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hk(Object(n),!0).forEach(function(a){s2(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wq(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a8(a.key),a)}}function Hq(e,t,n){return t&&Wq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gq(e,t,n){return t=Am(t),Kq(e,n8()?Reflect.construct(t,n||[],Am(e).constructor):t.apply(e,n))}function Kq(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vq(e)}function Vq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n8=function(){return!!e})()}function Am(e){return Am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Am(e)}function Yq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a2(e,t)}function a2(e,t){return a2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},a2(e,t)}function s2(e,t,n){return t=a8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a8(e){var t=Xq(e,"string");return fd(t)=="symbol"?t:t+""}function Xq(e,t){if(fd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(fd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pk=1,Qq=function(e){function t(){var n;qq(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=Gq(this,t,[].concat(s)),s2(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),s2(n,"handleKeyDown",function(l){if(l.key==="Escape"){var d,u,h,p;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&d!==void 0?d:0,y:(h=(p=n.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),n}return Yq(t,e),Hq(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>pk||Math.abs(a.height-this.state.lastBoundingBox.height)>pk)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,h=s.children,p=s.coordinate,m=s.hasPayload,g=s.isAnimationActive,b=s.offset,j=s.position,v=s.reverseDirection,y=s.useTranslate3d,A=s.viewBox,E=s.wrapperStyle,O=Uq({allowEscapeViewBox:l,coordinate:p,offsetTopLeft:b,position:j,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:A}),S=O.cssClasses,C=O.cssProperties,k=fk(fk({transition:g&&i?"transform ".concat(d,"ms ").concat(u):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},E);return _e.createElement("div",{tabIndex:-1,className:S,style:k,ref:function(z){a.wrapperNode=z}},h)}}])}(w.PureComponent),Jq=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Wd={isSsr:Jq()};function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function xk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mk(Object(n),!0).forEach(function(a){Zw(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Zq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eW(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i8(a.key),a)}}function tW(e,t,n){return t&&eW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rW(e,t,n){return t=Em(t),nW(e,s8()?Reflect.construct(t,n||[],Em(e).constructor):t.apply(e,n))}function nW(e,t){if(t&&(pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aW(e)}function aW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s8=function(){return!!e})()}function Em(e){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Em(e)}function sW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i2(e,t)}function i2(e,t){return i2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},i2(e,t)}function Zw(e,t,n){return t=i8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i8(e){var t=iW(e,"string");return pd(t)=="symbol"?t:t+""}function iW(e,t){if(pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(pd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function oW(e){return e.dataKey}function lW(e,t){return _e.isValidElement(e)?_e.cloneElement(e,t):typeof e=="function"?_e.createElement(e,t):_e.createElement(Mq,t)}var Vs=function(e){function t(){return Zq(this,t),rW(this,t,arguments)}return sW(t,e),tW(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,l=s.allowEscapeViewBox,d=s.animationDuration,u=s.animationEasing,h=s.content,p=s.coordinate,m=s.filterNull,g=s.isAnimationActive,b=s.offset,j=s.payload,v=s.payloadUniqBy,y=s.position,A=s.reverseDirection,E=s.useTranslate3d,O=s.viewBox,S=s.wrapperStyle,C=j??[];m&&C.length&&(C=X5(j.filter(function(I){return I.value!=null&&(I.hide!==!0||a.props.includeHidden)}),v,oW));var k=C.length>0;return _e.createElement(Qq,{allowEscapeViewBox:l,animationDuration:d,animationEasing:u,isAnimationActive:g,active:i,coordinate:p,hasPayload:k,offset:b,position:y,reverseDirection:A,useTranslate3d:E,viewBox:O,wrapperStyle:S},lW(h,xk(xk({},this.props),{},{payload:C})))}}])}(w.PureComponent);Zw(Vs,"displayName","Tooltip");Zw(Vs,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Wd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var T1,gk;function cW(){if(gk)return T1;gk=1;var e=Ci(),t=function(){return e.Date.now()};return T1=t,T1}var C1,yk;function dW(){if(yk)return C1;yk=1;var e=/\s/;function t(n){for(var a=n.length;a--&&e.test(n.charAt(a)););return a}return C1=t,C1}var A1,bk;function uW(){if(bk)return A1;bk=1;var e=dW(),t=/^\s+/;function n(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return A1=n,A1}var E1,vk;function o8(){if(vk)return E1;vk=1;var e=uW(),t=Zo(),n=zd(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;function u(h){if(typeof h=="number")return h;if(n(h))return a;if(t(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=t(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=e(h);var m=i.test(h);return m||l.test(h)?d(h.slice(2),m?2:8):s.test(h)?a:+h}return E1=u,E1}var O1,jk;function hW(){if(jk)return O1;jk=1;var e=Zo(),t=cW(),n=o8(),a="Expected a function",s=Math.max,i=Math.min;function l(d,u,h){var p,m,g,b,j,v,y=0,A=!1,E=!1,O=!0;if(typeof d!="function")throw new TypeError(a);u=n(u)||0,e(h)&&(A=!!h.leading,E="maxWait"in h,g=E?s(n(h.maxWait)||0,u):g,O="trailing"in h?!!h.trailing:O);function S(L){var P=p,_=m;return p=m=void 0,y=L,b=d.apply(_,P),b}function C(L){return y=L,j=setTimeout(z,u),A?S(L):b}function k(L){var P=L-v,_=L-y,R=u-P;return E?i(R,g-_):R}function I(L){var P=L-v,_=L-y;return v===void 0||P>=u||P<0||E&&_>=g}function z(){var L=t();if(I(L))return B(L);j=setTimeout(z,k(L))}function B(L){return j=void 0,O&&p?S(L):(p=m=void 0,b)}function M(){j!==void 0&&clearTimeout(j),y=0,p=v=m=j=void 0}function F(){return j===void 0?b:B(t())}function N(){var L=t(),P=I(L);if(p=arguments,m=this,v=L,P){if(j===void 0)return C(v);if(E)return clearTimeout(j),j=setTimeout(z,u),S(v)}return j===void 0&&(j=setTimeout(z,u)),b}return N.cancel=M,N.flush=F,N}return O1=l,O1}var k1,wk;function fW(){if(wk)return k1;wk=1;var e=hW(),t=Zo(),n="Expected a function";function a(s,i,l){var d=!0,u=!0;if(typeof s!="function")throw new TypeError(n);return t(l)&&(d="leading"in l?!!l.leading:d,u="trailing"in l?!!l.trailing:u),e(s,i,{leading:d,maxWait:i,trailing:u})}return k1=a,k1}var pW=fW();const l8=$r(pW);function _h(e){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function Sk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Up(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sk(Object(n),!0).forEach(function(a){mW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mW(e,t,n){return t=xW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xW(e){var t=gW(e,"string");return _h(t)=="symbol"?t:t+""}function gW(e,t){if(_h(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(_h(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yW(e,t){return wW(e)||jW(e,t)||vW(e,t)||bW()}function bW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vW(e,t){if(e){if(typeof e=="string")return Nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nk(e,t)}}function Nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function jW(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function wW(e){if(Array.isArray(e))return e}var Tk=w.forwardRef(function(e,t){var n=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,l=i===void 0?"100%":i,d=e.height,u=d===void 0?"100%":d,h=e.minWidth,p=h===void 0?0:h,m=e.minHeight,g=e.maxHeight,b=e.children,j=e.debounce,v=j===void 0?0:j,y=e.id,A=e.className,E=e.onResize,O=e.style,S=O===void 0?{}:O,C=w.useRef(null),k=w.useRef();k.current=E,w.useImperativeHandle(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var I=w.useState({containerWidth:s.width,containerHeight:s.height}),z=yW(I,2),B=z[0],M=z[1],F=w.useCallback(function(L,P){M(function(_){var R=Math.round(L),W=Math.round(P);return _.containerWidth===R&&_.containerHeight===W?_:{containerWidth:R,containerHeight:W}})},[]);w.useEffect(function(){var L=function(oe){var q,V=oe[0].contentRect,U=V.width,X=V.height;F(U,X),(q=k.current)===null||q===void 0||q.call(k,U,X)};v>0&&(L=l8(L,v,{trailing:!0,leading:!1}));var P=new ResizeObserver(L),_=C.current.getBoundingClientRect(),R=_.width,W=_.height;return F(R,W),P.observe(C.current),function(){P.disconnect()}},[F,v]);var N=w.useMemo(function(){var L=B.containerWidth,P=B.containerHeight;if(L<0||P<0)return null;Xi(kl(l)||kl(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,u),Xi(!n||n>0,"The aspect(%s) must be greater than zero.",n);var _=kl(l)?L:l,R=kl(u)?P:u;n&&n>0&&(_?R=_/n:R&&(_=R*n),g&&R>g&&(R=g)),Xi(_>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,R,l,u,p,m,n);var W=!Array.isArray(b)&&Yi(b.type).endsWith("Chart");return _e.Children.map(b,function(G){return _e.isValidElement(G)?w.cloneElement(G,Up({width:_,height:R},W?{style:Up({height:"100%",width:"100%",maxHeight:R,maxWidth:_},G.props.style)}:{})):G})},[n,b,u,g,m,p,B,l]);return _e.createElement("div",{id:y?"".concat(y):void 0,className:Nr("recharts-responsive-container",A),style:Up(Up({},S),{},{width:l,height:u,minWidth:p,minHeight:m,maxHeight:g}),ref:C},N)}),c8=function(t){return null};c8.displayName="Cell";function Ih(e){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ih(e)}function Ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function o2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(n),!0).forEach(function(a){SW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SW(e,t,n){return t=NW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NW(e){var t=TW(e,"string");return Ih(t)=="symbol"?t:t+""}function TW(e,t){if(Ih(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ih(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mc={widthCache:{},cacheCount:0},CW=2e3,AW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ak="recharts_measurement_span";function EW(e){var t=o2({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var hh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Wd.isSsr)return{width:0,height:0};var a=EW(n),s=JSON.stringify({text:t,copyStyle:a});if(Mc.widthCache[s])return Mc.widthCache[s];try{var i=document.getElementById(Ak);i||(i=document.createElement("span"),i.setAttribute("id",Ak),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=o2(o2({},AW),a);Object.assign(i.style,l),i.textContent="".concat(t);var d=i.getBoundingClientRect(),u={width:d.width,height:d.height};return Mc.widthCache[s]=u,++Mc.cacheCount>CW&&(Mc.cacheCount=0,Mc.widthCache={}),u}catch{return{width:0,height:0}}},OW=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Dh(e){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(e)}function Om(e,t){return DW(e)||IW(e,t)||_W(e,t)||kW()}function kW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _W(e,t){if(e){if(typeof e=="string")return Ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ek(e,t)}}function Ek(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function IW(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function DW(e){if(Array.isArray(e))return e}function RW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ok(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,MW(a.key),a)}}function PW(e,t,n){return t&&Ok(e.prototype,t),n&&Ok(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function MW(e){var t=BW(e,"string");return Dh(t)=="symbol"?t:t+""}function BW(e,t){if(Dh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Dh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_k=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,d8={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$W=Object.keys(d8),Vc="NaN";function zW(e,t){return e*d8[t]}var qp=function(){function e(t,n){RW(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!FW.test(n)&&(this.num=NaN,this.unit=""),$W.includes(n)&&(this.num=zW(t,n),this.unit="px")}return PW(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,s=(a=LW.exec(n))!==null&&a!==void 0?a:[],i=Om(s,3),l=i[1],d=i[2];return new e(parseFloat(l),d??"")}}])}();function u8(e){if(e.includes(Vc))return Vc;for(var t=e;t.includes("*")||t.includes("/");){var n,a=(n=kk.exec(t))!==null&&n!==void 0?n:[],s=Om(a,4),i=s[1],l=s[2],d=s[3],u=qp.parse(i??""),h=qp.parse(d??""),p=l==="*"?u.multiply(h):u.divide(h);if(p.isNaN())return Vc;t=t.replace(kk,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,g=(m=_k.exec(t))!==null&&m!==void 0?m:[],b=Om(g,4),j=b[1],v=b[2],y=b[3],A=qp.parse(j??""),E=qp.parse(y??""),O=v==="+"?A.add(E):A.subtract(E);if(O.isNaN())return Vc;t=t.replace(_k,O.toString())}return t}var Ik=/\(([^()]*)\)/;function UW(e){for(var t=e;t.includes("(");){var n=Ik.exec(t),a=Om(n,2),s=a[1];t=t.replace(Ik,u8(s))}return t}function qW(e){var t=e.replace(/\s+/g,"");return t=UW(t),t=u8(t),t}function WW(e){try{return qW(e)}catch{return Vc}}function _1(e){var t=WW(e.slice(5,-1));return t===Vc?"":t}var HW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],GW=["dx","dy","angle","className","breakAll"];function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l2.apply(this,arguments)}function Dk(e,t){if(e==null)return{};var n=KW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function KW(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Rk(e,t){return QW(e)||XW(e,t)||YW(e,t)||VW()}function VW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YW(e,t){if(e){if(typeof e=="string")return Pk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pk(e,t)}}function Pk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function XW(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function QW(e){if(Array.isArray(e))return e}var h8=/[ \f\n\r\t\v\u2028\u2029]+/,f8=function(t){var n=t.children,a=t.breakAll,s=t.style;try{var i=[];mr(n)||(a?i=n.toString().split(""):i=n.toString().split(h8));var l=i.map(function(u){return{word:u,width:hh(u,s).width}}),d=a?0:hh("",s).width;return{wordsWithComputedWidth:l,spaceWidth:d}}catch{return null}},JW=function(t,n,a,s,i){var l=t.maxLines,d=t.children,u=t.style,h=t.breakAll,p=St(l),m=d,g=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return _.reduce(function(R,W){var G=W.word,oe=W.width,q=R[R.length-1];if(q&&(s==null||i||q.width+oe+a<Number(s)))q.words.push(G),q.width+=oe+a;else{var V={words:[G],width:oe};R.push(V)}return R},[])},b=g(n),j=function(_){return _.reduce(function(R,W){return R.width>W.width?R:W})};if(!p)return b;for(var v="",y=function(_){var R=m.slice(0,_),W=f8({breakAll:h,style:u,children:R+v}).wordsWithComputedWidth,G=g(W),oe=G.length>l||j(G).width>Number(s);return[oe,G]},A=0,E=m.length-1,O=0,S;A<=E&&O<=m.length-1;){var C=Math.floor((A+E)/2),k=C-1,I=y(k),z=Rk(I,2),B=z[0],M=z[1],F=y(C),N=Rk(F,1),L=N[0];if(!B&&!L&&(A=C+1),B&&L&&(E=C-1),!B&&L){S=M;break}O++}return S||b},Mk=function(t){var n=mr(t)?[]:t.toString().split(h8);return[{words:n}]},ZW=function(t){var n=t.width,a=t.scaleToFit,s=t.children,i=t.style,l=t.breakAll,d=t.maxLines;if((n||a)&&!Wd.isSsr){var u,h,p=f8({breakAll:l,children:s,style:i});if(p){var m=p.wordsWithComputedWidth,g=p.spaceWidth;u=m,h=g}else return Mk(s);return JW({breakAll:l,children:s,maxLines:d,style:i},u,h,n,a)}return Mk(s)},Bk="#808080",km=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,l=t.lineHeight,d=l===void 0?"1em":l,u=t.capHeight,h=u===void 0?"0.71em":u,p=t.scaleToFit,m=p===void 0?!1:p,g=t.textAnchor,b=g===void 0?"start":g,j=t.verticalAnchor,v=j===void 0?"end":j,y=t.fill,A=y===void 0?Bk:y,E=Dk(t,HW),O=w.useMemo(function(){return ZW({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:m,style:E.style,width:E.width})},[E.breakAll,E.children,E.maxLines,m,E.style,E.width]),S=E.dx,C=E.dy,k=E.angle,I=E.className,z=E.breakAll,B=Dk(E,GW);if(!Mn(a)||!Mn(i))return null;var M=a+(St(S)?S:0),F=i+(St(C)?C:0),N;switch(v){case"start":N=_1("calc(".concat(h,")"));break;case"middle":N=_1("calc(".concat((O.length-1)/2," * -").concat(d," + (").concat(h," / 2))"));break;default:N=_1("calc(".concat(O.length-1," * -").concat(d,")"));break}var L=[];if(m){var P=O[0].width,_=E.width;L.push("scale(".concat((St(_)?_/P:1)/P,")"))}return k&&L.push("rotate(".concat(k,", ").concat(M,", ").concat(F,")")),L.length&&(B.transform=L.join(" ")),_e.createElement("text",l2({},gr(B,!0),{x:M,y:F,className:Nr("recharts-text",I),textAnchor:b,fill:A.includes("url")?Bk:A}),O.map(function(R,W){var G=R.words.join(z?"":" ");return _e.createElement("tspan",{x:M,dy:W===0?N:d,key:"".concat(G,"-").concat(W)},G)}))};function Wo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eS(e){let t,n,a;e.length!==2?(t=Wo,n=(d,u)=>Wo(e(d),u),a=(d,u)=>e(d)-u):(t=e===Wo||e===eH?e:tH,n=e,a=e);function s(d,u,h=0,p=d.length){if(h<p){if(t(u,u)!==0)return p;do{const m=h+p>>>1;n(d[m],u)<0?h=m+1:p=m}while(h<p)}return h}function i(d,u,h=0,p=d.length){if(h<p){if(t(u,u)!==0)return p;do{const m=h+p>>>1;n(d[m],u)<=0?h=m+1:p=m}while(h<p)}return h}function l(d,u,h=0,p=d.length){const m=s(d,u,h,p-1);return m>h&&a(d[m-1],u)>-a(d[m],u)?m-1:m}return{left:s,center:l,right:i}}function tH(){return 0}function p8(e){return e===null?NaN:+e}function*rH(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const nH=eS(Wo),Sf=nH.right;eS(p8).center;class Fk extends Map{constructor(t,n=iH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(Lk(this,t))}has(t){return super.has(Lk(this,t))}set(t,n){return super.set(aH(this,t),n)}delete(t){return super.delete(sH(this,t))}}function Lk({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function aH({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function sH({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function iH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oH(e=Wo){if(e===Wo)return m8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function m8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const lH=Math.sqrt(50),cH=Math.sqrt(10),dH=Math.sqrt(2);function _m(e,t,n){const a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),l=i>=lH?10:i>=cH?5:i>=dH?2:1;let d,u,h;return s<0?(h=Math.pow(10,-s)/l,d=Math.round(e*h),u=Math.round(t*h),d/h<e&&++d,u/h>t&&--u,h=-h):(h=Math.pow(10,s)*l,d=Math.round(e/h),u=Math.round(t/h),d*h<e&&++d,u*h>t&&--u),u<d&&.5<=n&&n<2?_m(e,t,n*2):[d,u,h]}function c2(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[s,i,l]=a?_m(t,e,n):_m(e,t,n);if(!(i>=s))return[];const d=i-s+1,u=new Array(d);if(a)if(l<0)for(let h=0;h<d;++h)u[h]=(i-h)/-l;else for(let h=0;h<d;++h)u[h]=(i-h)*l;else if(l<0)for(let h=0;h<d;++h)u[h]=(s+h)/-l;else for(let h=0;h<d;++h)u[h]=(s+h)*l;return u}function d2(e,t,n){return t=+t,e=+e,n=+n,_m(e,t,n)[2]}function u2(e,t,n){t=+t,e=+e,n=+n;const a=t<e,s=a?d2(t,e,n):d2(e,t,n);return(a?-1:1)*(s<0?1/-s:s)}function $k(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function zk(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function x8(e,t,n=0,a=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(s=s===void 0?m8:oH(s);a>n;){if(a-n>600){const u=a-n+1,h=t-n+1,p=Math.log(u),m=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*m*(u-m)/u)*(h-u/2<0?-1:1),b=Math.max(n,Math.floor(t-h*m/u+g)),j=Math.min(a,Math.floor(t+(u-h)*m/u+g));x8(e,t,b,j,s)}const i=e[t];let l=n,d=a;for(Qu(e,n,t),s(e[a],i)>0&&Qu(e,n,a);l<d;){for(Qu(e,l,d),++l,--d;s(e[l],i)<0;)++l;for(;s(e[d],i)>0;)--d}s(e[n],i)===0?Qu(e,n,d):(++d,Qu(e,d,a)),d<=t&&(n=d+1),t<=d&&(a=d-1)}return e}function Qu(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function uH(e,t,n){if(e=Float64Array.from(rH(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return zk(e);if(t>=1)return $k(e);var a,s=(a-1)*t,i=Math.floor(s),l=$k(x8(e,i).subarray(0,i+1)),d=zk(e.subarray(i+1));return l+(d-l)*(s-i)}}function hH(e,t,n=p8){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),l=+n(e[i],i,e),d=+n(e[i+1],i+1,e);return l+(d-l)*(s-i)}}function fH(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++a<s;)i[a]=e+a*n;return i}function Bs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function fo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const h2=Symbol("implicit");function tS(){var e=new Fk,t=[],n=[],a=h2;function s(i){let l=e.get(i);if(l===void 0){if(a!==h2)return a;e.set(i,l=t.push(i)-1)}return n[l%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Fk;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return tS(t,n).unknown(a)},Bs.apply(s,arguments),s}function Rh(){var e=tS().unknown(void 0),t=e.domain,n=e.range,a=0,s=1,i,l,d=!1,u=0,h=0,p=.5;delete e.unknown;function m(){var g=t().length,b=s<a,j=b?s:a,v=b?a:s;i=(v-j)/Math.max(1,g-u+h*2),d&&(i=Math.floor(i)),j+=(v-j-i*(g-u))*p,l=i*(1-u),d&&(j=Math.round(j),l=Math.round(l));var y=fH(g).map(function(A){return j+i*A});return n(b?y.reverse():y)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([a,s]=g,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(g){return[a,s]=g,a=+a,s=+s,d=!0,m()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(g){return arguments.length?(d=!!g,m()):d},e.padding=function(g){return arguments.length?(u=Math.min(1,h=+g),m()):u},e.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),m()):u},e.paddingOuter=function(g){return arguments.length?(h=+g,m()):h},e.align=function(g){return arguments.length?(p=Math.max(0,Math.min(1,g)),m()):p},e.copy=function(){return Rh(t(),[a,s]).round(d).paddingInner(u).paddingOuter(h).align(p)},Bs.apply(m(),arguments)}function g8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return g8(t())},e}function fh(){return g8(Rh.apply(null,arguments).paddingInner(1))}function rS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function y8(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Nf(){}var Ph=.7,Im=1/Ph,td="\\s*([+-]?\\d+)\\s*",Mh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pH=/^#([0-9a-f]{3,8})$/,mH=new RegExp(`^rgb\\(${td},${td},${td}\\)$`),xH=new RegExp(`^rgb\\(${ji},${ji},${ji}\\)$`),gH=new RegExp(`^rgba\\(${td},${td},${td},${Mh}\\)$`),yH=new RegExp(`^rgba\\(${ji},${ji},${ji},${Mh}\\)$`),bH=new RegExp(`^hsl\\(${Mh},${ji},${ji}\\)$`),vH=new RegExp(`^hsla\\(${Mh},${ji},${ji},${Mh}\\)$`),Uk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rS(Nf,Bh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qk,formatHex:qk,formatHex8:jH,formatHsl:wH,formatRgb:Wk,toString:Wk});function qk(){return this.rgb().formatHex()}function jH(){return this.rgb().formatHex8()}function wH(){return b8(this).formatHsl()}function Wk(){return this.rgb().formatRgb()}function Bh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Hk(t):n===3?new za(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mH.exec(e))?new za(t[1],t[2],t[3],1):(t=xH.exec(e))?new za(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gH.exec(e))?Wp(t[1],t[2],t[3],t[4]):(t=yH.exec(e))?Wp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bH.exec(e))?Vk(t[1],t[2]/100,t[3]/100,1):(t=vH.exec(e))?Vk(t[1],t[2]/100,t[3]/100,t[4]):Uk.hasOwnProperty(e)?Hk(Uk[e]):e==="transparent"?new za(NaN,NaN,NaN,0):null}function Hk(e){return new za(e>>16&255,e>>8&255,e&255,1)}function Wp(e,t,n,a){return a<=0&&(e=t=n=NaN),new za(e,t,n,a)}function SH(e){return e instanceof Nf||(e=Bh(e)),e?(e=e.rgb(),new za(e.r,e.g,e.b,e.opacity)):new za}function f2(e,t,n,a){return arguments.length===1?SH(e):new za(e,t,n,a??1)}function za(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}rS(za,f2,y8(Nf,{brighter(e){return e=e==null?Im:Math.pow(Im,e),new za(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ph:Math.pow(Ph,e),new za(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new za(Ml(this.r),Ml(this.g),Ml(this.b),Dm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gk,formatHex:Gk,formatHex8:NH,formatRgb:Kk,toString:Kk}));function Gk(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function NH(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kk(){const e=Dm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ml(this.r)}, ${Ml(this.g)}, ${Ml(this.b)}${e===1?")":`, ${e})`}`}function Dm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ml(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _l(e){return e=Ml(e),(e<16?"0":"")+e.toString(16)}function Vk(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Js(e,t,n,a)}function b8(e){if(e instanceof Js)return new Js(e.h,e.s,e.l,e.opacity);if(e instanceof Nf||(e=Bh(e)),!e)return new Js;if(e instanceof Js)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(t,n,a),i=Math.max(t,n,a),l=NaN,d=i-s,u=(i+s)/2;return d?(t===i?l=(n-a)/d+(n<a)*6:n===i?l=(a-t)/d+2:l=(t-n)/d+4,d/=u<.5?i+s:2-i-s,l*=60):d=u>0&&u<1?0:l,new Js(l,d,u,e.opacity)}function TH(e,t,n,a){return arguments.length===1?b8(e):new Js(e,t,n,a??1)}function Js(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}rS(Js,TH,y8(Nf,{brighter(e){return e=e==null?Im:Math.pow(Im,e),new Js(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ph:Math.pow(Ph,e),new Js(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,s=2*n-a;return new za(I1(e>=240?e-240:e+120,s,a),I1(e,s,a),I1(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Js(Yk(this.h),Hp(this.s),Hp(this.l),Dm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dm(this.opacity);return`${e===1?"hsl(":"hsla("}${Yk(this.h)}, ${Hp(this.s)*100}%, ${Hp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yk(e){return e=(e||0)%360,e<0?e+360:e}function Hp(e){return Math.max(0,Math.min(1,e||0))}function I1(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const nS=e=>()=>e;function CH(e,t){return function(n){return e+n*t}}function AH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function EH(e){return(e=+e)==1?v8:function(t,n){return n-t?AH(t,n,e):nS(isNaN(t)?n:t)}}function v8(e,t){var n=t-e;return n?CH(e,n):nS(isNaN(e)?t:e)}const Xk=function e(t){var n=EH(t);function a(s,i){var l=n((s=f2(s)).r,(i=f2(i)).r),d=n(s.g,i.g),u=n(s.b,i.b),h=v8(s.opacity,i.opacity);return function(p){return s.r=l(p),s.g=d(p),s.b=u(p),s.opacity=h(p),s+""}}return a.gamma=e,a}(1);function OH(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<n;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function kH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _H(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n),l;for(l=0;l<a;++l)s[l]=Hd(e[l],t[l]);for(;l<n;++l)i[l]=t[l];return function(d){for(l=0;l<a;++l)i[l]=s[l](d);return i}}function IH(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Rm(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function DH(e,t){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Hd(e[s],t[s]):a[s]=t[s];return function(i){for(s in n)a[s]=n[s](i);return a}}var p2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D1=new RegExp(p2.source,"g");function RH(e){return function(){return e}}function PH(e){return function(t){return e(t)+""}}function MH(e,t){var n=p2.lastIndex=D1.lastIndex=0,a,s,i,l=-1,d=[],u=[];for(e=e+"",t=t+"";(a=p2.exec(e))&&(s=D1.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),d[l]?d[l]+=i:d[++l]=i),(a=a[0])===(s=s[0])?d[l]?d[l]+=s:d[++l]=s:(d[++l]=null,u.push({i:l,x:Rm(a,s)})),n=D1.lastIndex;return n<t.length&&(i=t.slice(n),d[l]?d[l]+=i:d[++l]=i),d.length<2?u[0]?PH(u[0].x):RH(t):(t=u.length,function(h){for(var p=0,m;p<t;++p)d[(m=u[p]).i]=m.x(h);return d.join("")})}function Hd(e,t){var n=typeof t,a;return t==null||n==="boolean"?nS(t):(n==="number"?Rm:n==="string"?(a=Bh(t))?(t=a,Xk):MH:t instanceof Bh?Xk:t instanceof Date?IH:kH(t)?OH:Array.isArray(t)?_H:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?DH:Rm)(e,t)}function aS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function BH(e,t){t===void 0&&(t=e,e=Hd);for(var n=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);n<a;)i[n]=e(s,s=t[++n]);return function(l){var d=Math.max(0,Math.min(a-1,Math.floor(l*=a)));return i[d](l-d)}}function FH(e){return function(){return e}}function Pm(e){return+e}var Qk=[0,1];function ka(e){return e}function m2(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:FH(isNaN(t)?NaN:.5)}function LH(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function $H(e,t,n){var a=e[0],s=e[1],i=t[0],l=t[1];return s<a?(a=m2(s,a),i=n(l,i)):(a=m2(a,s),i=n(i,l)),function(d){return i(a(d))}}function zH(e,t,n){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)s[l]=m2(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(d){var u=Sf(e,d,1,a)-1;return i[u](s[u](d))}}function Tf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hx(){var e=Qk,t=Qk,n=Hd,a,s,i,l=ka,d,u,h;function p(){var g=Math.min(e.length,t.length);return l!==ka&&(l=LH(e[0],e[g-1])),d=g>2?zH:$H,u=h=null,m}function m(g){return g==null||isNaN(g=+g)?i:(u||(u=d(e.map(a),t,n)))(a(l(g)))}return m.invert=function(g){return l(s((h||(h=d(t,e.map(a),Rm)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,Pm),p()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),p()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=aS,p()},m.clamp=function(g){return arguments.length?(l=g?!0:ka,p()):l!==ka},m.interpolate=function(g){return arguments.length?(n=g,p()):n},m.unknown=function(g){return arguments.length?(i=g,m):i},function(g,b){return a=g,s=b,p()}}function sS(){return Hx()(ka,ka)}function UH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function md(e){return e=Mm(Math.abs(e)),e?e[1]:NaN}function qH(e,t){return function(n,a){for(var s=n.length,i=[],l=0,d=e[0],u=0;s>0&&d>0&&(u+d+1>a&&(d=Math.max(1,a-u)),i.push(n.substring(s-=d,s+d)),!((u+=d+1)>a));)d=e[l=(l+1)%e.length];return i.reverse().join(t)}}function WH(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var HH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fh(e){if(!(t=HH.exec(e)))throw new Error("invalid format: "+e);var t;return new iS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fh.prototype=iS.prototype;function iS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}iS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GH(e){e:for(var t=e.length,n=1,a=-1,s;n<t;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var j8;function KH(e,t){var n=Mm(e,t);if(!n)return e+"";var a=n[0],s=n[1],i=s-(j8=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=a.length;return i===l?a:i>l?a+new Array(i-l+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Mm(e,Math.max(0,t+i-1))[0]}function Jk(e,t){var n=Mm(e,t);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const Zk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Jk(e*100,t),r:Jk,s:KH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function e_(e){return e}var t_=Array.prototype.map,r_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function VH(e){var t=e.grouping===void 0||e.thousands===void 0?e_:qH(t_.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?e_:WH(t_.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function h(m){m=Fh(m);var g=m.fill,b=m.align,j=m.sign,v=m.symbol,y=m.zero,A=m.width,E=m.comma,O=m.precision,S=m.trim,C=m.type;C==="n"?(E=!0,C="g"):Zk[C]||(O===void 0&&(O=12),S=!0,C="g"),(y||g==="0"&&b==="=")&&(y=!0,g="0",b="=");var k=v==="$"?n:v==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",I=v==="$"?a:/[%p]/.test(C)?l:"",z=Zk[C],B=/[defgprs%]/.test(C);O=O===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function M(F){var N=k,L=I,P,_,R;if(C==="c")L=z(F)+L,F="";else{F=+F;var W=F<0||1/F<0;if(F=isNaN(F)?u:z(Math.abs(F),O),S&&(F=GH(F)),W&&+F==0&&j!=="+"&&(W=!1),N=(W?j==="("?j:d:j==="-"||j==="("?"":j)+N,L=(C==="s"?r_[8+j8/3]:"")+L+(W&&j==="("?")":""),B){for(P=-1,_=F.length;++P<_;)if(R=F.charCodeAt(P),48>R||R>57){L=(R===46?s+F.slice(P+1):F.slice(P))+L,F=F.slice(0,P);break}}}E&&!y&&(F=t(F,1/0));var G=N.length+F.length+L.length,oe=G<A?new Array(A-G+1).join(g):"";switch(E&&y&&(F=t(oe+F,oe.length?A-L.length:1/0),oe=""),b){case"<":F=N+F+L+oe;break;case"=":F=N+oe+F+L;break;case"^":F=oe.slice(0,G=oe.length>>1)+N+F+L+oe.slice(G);break;default:F=oe+N+F+L;break}return i(F)}return M.toString=function(){return m+""},M}function p(m,g){var b=h((m=Fh(m),m.type="f",m)),j=Math.max(-8,Math.min(8,Math.floor(md(g)/3)))*3,v=Math.pow(10,-j),y=r_[8+j/3];return function(A){return b(v*A)+y}}return{format:h,formatPrefix:p}}var Gp,oS,w8;YH({thousands:",",grouping:[3],currency:["$",""]});function YH(e){return Gp=VH(e),oS=Gp.format,w8=Gp.formatPrefix,Gp}function XH(e){return Math.max(0,-md(Math.abs(e)))}function QH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(md(t)/3)))*3-md(Math.abs(e)))}function JH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,md(t)-md(e))+1}function S8(e,t,n,a){var s=u2(e,t,n),i;switch(a=Fh(a??",f"),a.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=QH(s,l))&&(a.precision=i),w8(a,l)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=JH(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=XH(s))&&(a.precision=i-(a.type==="%")*2);break}}return oS(a)}function tl(e){var t=e.domain;return e.ticks=function(n){var a=t();return c2(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var s=t();return S8(s[0],s[s.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),s=0,i=a.length-1,l=a[s],d=a[i],u,h,p=10;for(d<l&&(h=l,l=d,d=h,h=s,s=i,i=h);p-- >0;){if(h=d2(l,d,n),h===u)return a[s]=l,a[i]=d,t(a);if(h>0)l=Math.floor(l/h)*h,d=Math.ceil(d/h)*h;else if(h<0)l=Math.ceil(l*h)/h,d=Math.floor(d*h)/h;else break;u=h}return e},e}function Bm(){var e=sS();return e.copy=function(){return Tf(e,Bm())},Bs.apply(e,arguments),tl(e)}function N8(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Pm),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return N8(e).unknown(t)},e=arguments.length?Array.from(e,Pm):[0,1],tl(n)}function T8(e,t){e=e.slice();var n=0,a=e.length-1,s=e[n],i=e[a],l;return i<s&&(l=n,n=a,a=l,l=s,s=i,i=l),e[n]=t.floor(s),e[a]=t.ceil(i),e}function n_(e){return Math.log(e)}function a_(e){return Math.exp(e)}function ZH(e){return-Math.log(-e)}function eG(e){return-Math.exp(-e)}function tG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function rG(e){return e===10?tG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function s_(e){return(t,n)=>-e(-t,n)}function lS(e){const t=e(n_,a_),n=t.domain;let a=10,s,i;function l(){return s=nG(a),i=rG(a),n()[0]<0?(s=s_(s),i=s_(i),e(ZH,eG)):e(n_,a_),t}return t.base=function(d){return arguments.length?(a=+d,l()):a},t.domain=function(d){return arguments.length?(n(d),l()):n()},t.ticks=d=>{const u=n();let h=u[0],p=u[u.length-1];const m=p<h;m&&([h,p]=[p,h]);let g=s(h),b=s(p),j,v;const y=d==null?10:+d;let A=[];if(!(a%1)&&b-g<y){if(g=Math.floor(g),b=Math.ceil(b),h>0){for(;g<=b;++g)for(j=1;j<a;++j)if(v=g<0?j/i(-g):j*i(g),!(v<h)){if(v>p)break;A.push(v)}}else for(;g<=b;++g)for(j=a-1;j>=1;--j)if(v=g>0?j/i(-g):j*i(g),!(v<h)){if(v>p)break;A.push(v)}A.length*2<y&&(A=c2(h,p,y))}else A=c2(g,b,Math.min(b-g,y)).map(i);return m?A.reverse():A},t.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=a===10?"s":","),typeof u!="function"&&(!(a%1)&&(u=Fh(u)).precision==null&&(u.trim=!0),u=oS(u)),d===1/0)return u;const h=Math.max(1,a*d/t.ticks().length);return p=>{let m=p/i(Math.round(s(p)));return m*a<a-.5&&(m*=a),m<=h?u(p):""}},t.nice=()=>n(T8(n(),{floor:d=>i(Math.floor(s(d))),ceil:d=>i(Math.ceil(s(d)))})),t}function C8(){const e=lS(Hx()).domain([1,10]);return e.copy=()=>Tf(e,C8()).base(e.base()),Bs.apply(e,arguments),e}function i_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function o_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cS(e){var t=1,n=e(i_(t),o_(t));return n.constant=function(a){return arguments.length?e(i_(t=+a),o_(t)):t},tl(n)}function A8(){var e=cS(Hx());return e.copy=function(){return Tf(e,A8()).constant(e.constant())},Bs.apply(e,arguments)}function l_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function aG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sG(e){return e<0?-e*e:e*e}function dS(e){var t=e(ka,ka),n=1;function a(){return n===1?e(ka,ka):n===.5?e(aG,sG):e(l_(n),l_(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,a()):n},tl(t)}function uS(){var e=dS(Hx());return e.copy=function(){return Tf(e,uS()).exponent(e.exponent())},Bs.apply(e,arguments),e}function iG(){return uS.apply(null,arguments).exponent(.5)}function c_(e){return Math.sign(e)*e*e}function oG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function E8(){var e=sS(),t=[0,1],n=!1,a;function s(i){var l=oG(e(i));return isNaN(l)?a:n?Math.round(l):l}return s.invert=function(i){return e.invert(c_(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Pm)).map(c_)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return E8(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Bs.apply(s,arguments),tl(s)}function O8(){var e=[],t=[],n=[],a;function s(){var l=0,d=Math.max(1,t.length);for(n=new Array(d-1);++l<d;)n[l-1]=hH(e,l/d);return i}function i(l){return l==null||isNaN(l=+l)?a:t[Sf(n,l)]}return i.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Wo),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(a=l,i):a},i.quantiles=function(){return n.slice()},i.copy=function(){return O8().domain(e).range(t).unknown(a)},Bs.apply(i,arguments)}function k8(){var e=0,t=1,n=1,a=[.5],s=[0,1],i;function l(u){return u!=null&&u<=u?s[Sf(a,u,0,n)]:i}function d(){var u=-1;for(a=new Array(n);++u<n;)a[u]=((u+1)*t-(u-n)*e)/(n+1);return l}return l.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,d()):[e,t]},l.range=function(u){return arguments.length?(n=(s=Array.from(u)).length-1,d()):s.slice()},l.invertExtent=function(u){var h=s.indexOf(u);return h<0?[NaN,NaN]:h<1?[e,a[0]]:h>=n?[a[n-1],t]:[a[h-1],a[h]]},l.unknown=function(u){return arguments.length&&(i=u),l},l.thresholds=function(){return a.slice()},l.copy=function(){return k8().domain([e,t]).range(s).unknown(i)},Bs.apply(tl(l),arguments)}function _8(){var e=[.5],t=[0,1],n,a=1;function s(i){return i!=null&&i<=i?t[Sf(e,i,0,a)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return _8().domain(e).range(t).unknown(n)},Bs.apply(s,arguments)}const R1=new Date,P1=new Date;function Bn(e,t,n,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),d=s.ceil(i);return i-l<d-i?l:d},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,d)=>{const u=[];if(i=s.ceil(i),d=d==null?1:Math.floor(d),!(i<l)||!(d>0))return u;let h;do u.push(h=new Date(+i)),t(i,d),e(i);while(h<i&&i<l);return u},s.filter=i=>Bn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!i(l););else for(;--d>=0;)for(;t(l,1),!i(l););}),n&&(s.count=(i,l)=>(R1.setTime(+i),P1.setTime(+l),e(R1),e(P1),Math.floor(n(R1,P1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?l=>a(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Fm=Bn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Fm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Fm);Fm.range;const Wi=1e3,Is=Wi*60,Hi=Is*60,no=Hi*24,hS=no*7,d_=no*30,M1=no*365,Il=Bn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wi)},(e,t)=>(t-e)/Wi,e=>e.getUTCSeconds());Il.range;const fS=Bn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wi)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getMinutes());fS.range;const pS=Bn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCMinutes());pS.range;const mS=Bn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wi-e.getMinutes()*Is)},(e,t)=>{e.setTime(+e+t*Hi)},(e,t)=>(t-e)/Hi,e=>e.getHours());mS.range;const xS=Bn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Hi)},(e,t)=>(t-e)/Hi,e=>e.getUTCHours());xS.range;const Cf=Bn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Is)/no,e=>e.getDate()-1);Cf.range;const Gx=Bn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/no,e=>e.getUTCDate()-1);Gx.range;const I8=Bn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/no,e=>Math.floor(e/no));I8.range;function Ql(e){return Bn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Is)/hS)}const Kx=Ql(0),Lm=Ql(1),lG=Ql(2),cG=Ql(3),xd=Ql(4),dG=Ql(5),uG=Ql(6);Kx.range;Lm.range;lG.range;cG.range;xd.range;dG.range;uG.range;function Jl(e){return Bn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/hS)}const Vx=Jl(0),$m=Jl(1),hG=Jl(2),fG=Jl(3),gd=Jl(4),pG=Jl(5),mG=Jl(6);Vx.range;$m.range;hG.range;fG.range;gd.range;pG.range;mG.range;const gS=Bn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());gS.range;const yS=Bn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yS.range;const ao=Bn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ao.range;const so=Bn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());so.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});so.range;function D8(e,t,n,a,s,i){const l=[[Il,1,Wi],[Il,5,5*Wi],[Il,15,15*Wi],[Il,30,30*Wi],[i,1,Is],[i,5,5*Is],[i,15,15*Is],[i,30,30*Is],[s,1,Hi],[s,3,3*Hi],[s,6,6*Hi],[s,12,12*Hi],[a,1,no],[a,2,2*no],[n,1,hS],[t,1,d_],[t,3,3*d_],[e,1,M1]];function d(h,p,m){const g=p<h;g&&([h,p]=[p,h]);const b=m&&typeof m.range=="function"?m:u(h,p,m),j=b?b.range(h,+p+1):[];return g?j.reverse():j}function u(h,p,m){const g=Math.abs(p-h)/m,b=eS(([,,y])=>y).right(l,g);if(b===l.length)return e.every(u2(h/M1,p/M1,m));if(b===0)return Fm.every(Math.max(u2(h,p,m),1));const[j,v]=l[g/l[b-1][2]<l[b][2]/g?b-1:b];return j.every(v)}return[d,u]}const[xG,gG]=D8(so,yS,Vx,I8,xS,pS),[yG,bG]=D8(ao,gS,Kx,Cf,mS,fS);function B1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function F1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ju(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vG(e){var t=e.dateTime,n=e.date,a=e.time,s=e.periods,i=e.days,l=e.shortDays,d=e.months,u=e.shortMonths,h=Zu(s),p=eh(s),m=Zu(i),g=eh(i),b=Zu(l),j=eh(l),v=Zu(d),y=eh(d),A=Zu(u),E=eh(u),O={a:W,A:G,b:oe,B:q,c:null,d:x_,e:x_,f:qG,g:ZG,G:tK,H:$G,I:zG,j:UG,L:R8,m:WG,M:HG,p:V,q:U,Q:b_,s:v_,S:GG,u:KG,U:VG,V:YG,w:XG,W:QG,x:null,X:null,y:JG,Y:eK,Z:rK,"%":y_},S={a:X,A:H,b:Q,B:le,c:null,d:g_,e:g_,f:iK,g:xK,G:yK,H:nK,I:aK,j:sK,L:M8,m:oK,M:lK,p:me,q:je,Q:b_,s:v_,S:cK,u:dK,U:uK,V:hK,w:fK,W:pK,x:null,X:null,y:mK,Y:gK,Z:bK,"%":y_},C={a:M,A:F,b:N,B:L,c:P,d:p_,e:p_,f:MG,g:f_,G:h_,H:m_,I:m_,j:IG,L:PG,m:_G,M:DG,p:B,q:kG,Q:FG,s:LG,S:RG,u:TG,U:CG,V:AG,w:NG,W:EG,x:_,X:R,y:f_,Y:h_,Z:OG,"%":BG};O.x=k(n,O),O.X=k(a,O),O.c=k(t,O),S.x=k(n,S),S.X=k(a,S),S.c=k(t,S);function k(ee,se){return function(fe){var ue=[],We=-1,we=0,Me=ee.length,Ee,Be,it;for(fe instanceof Date||(fe=new Date(+fe));++We<Me;)ee.charCodeAt(We)===37&&(ue.push(ee.slice(we,We)),(Be=u_[Ee=ee.charAt(++We)])!=null?Ee=ee.charAt(++We):Be=Ee==="e"?" ":"0",(it=se[Ee])&&(Ee=it(fe,Be)),ue.push(Ee),we=We+1);return ue.push(ee.slice(we,We)),ue.join("")}}function I(ee,se){return function(fe){var ue=Ju(1900,void 0,1),We=z(ue,ee,fe+="",0),we,Me;if(We!=fe.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(se&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(we=F1(Ju(ue.y,0,1)),Me=we.getUTCDay(),we=Me>4||Me===0?$m.ceil(we):$m(we),we=Gx.offset(we,(ue.V-1)*7),ue.y=we.getUTCFullYear(),ue.m=we.getUTCMonth(),ue.d=we.getUTCDate()+(ue.w+6)%7):(we=B1(Ju(ue.y,0,1)),Me=we.getDay(),we=Me>4||Me===0?Lm.ceil(we):Lm(we),we=Cf.offset(we,(ue.V-1)*7),ue.y=we.getFullYear(),ue.m=we.getMonth(),ue.d=we.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Me="Z"in ue?F1(Ju(ue.y,0,1)).getUTCDay():B1(Ju(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Me+5)%7:ue.w+ue.U*7-(Me+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,F1(ue)):B1(ue)}}function z(ee,se,fe,ue){for(var We=0,we=se.length,Me=fe.length,Ee,Be;We<we;){if(ue>=Me)return-1;if(Ee=se.charCodeAt(We++),Ee===37){if(Ee=se.charAt(We++),Be=C[Ee in u_?se.charAt(We++):Ee],!Be||(ue=Be(ee,fe,ue))<0)return-1}else if(Ee!=fe.charCodeAt(ue++))return-1}return ue}function B(ee,se,fe){var ue=h.exec(se.slice(fe));return ue?(ee.p=p.get(ue[0].toLowerCase()),fe+ue[0].length):-1}function M(ee,se,fe){var ue=b.exec(se.slice(fe));return ue?(ee.w=j.get(ue[0].toLowerCase()),fe+ue[0].length):-1}function F(ee,se,fe){var ue=m.exec(se.slice(fe));return ue?(ee.w=g.get(ue[0].toLowerCase()),fe+ue[0].length):-1}function N(ee,se,fe){var ue=A.exec(se.slice(fe));return ue?(ee.m=E.get(ue[0].toLowerCase()),fe+ue[0].length):-1}function L(ee,se,fe){var ue=v.exec(se.slice(fe));return ue?(ee.m=y.get(ue[0].toLowerCase()),fe+ue[0].length):-1}function P(ee,se,fe){return z(ee,t,se,fe)}function _(ee,se,fe){return z(ee,n,se,fe)}function R(ee,se,fe){return z(ee,a,se,fe)}function W(ee){return l[ee.getDay()]}function G(ee){return i[ee.getDay()]}function oe(ee){return u[ee.getMonth()]}function q(ee){return d[ee.getMonth()]}function V(ee){return s[+(ee.getHours()>=12)]}function U(ee){return 1+~~(ee.getMonth()/3)}function X(ee){return l[ee.getUTCDay()]}function H(ee){return i[ee.getUTCDay()]}function Q(ee){return u[ee.getUTCMonth()]}function le(ee){return d[ee.getUTCMonth()]}function me(ee){return s[+(ee.getUTCHours()>=12)]}function je(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var se=k(ee+="",O);return se.toString=function(){return ee},se},parse:function(ee){var se=I(ee+="",!1);return se.toString=function(){return ee},se},utcFormat:function(ee){var se=k(ee+="",S);return se.toString=function(){return ee},se},utcParse:function(ee){var se=I(ee+="",!0);return se.toString=function(){return ee},se}}}var u_={"-":"",_:" ",0:"0"},Xn=/^\s*\d+/,jG=/^%/,wG=/[\\^$*+?|[\]().{}]/g;function Cr(e,t,n){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<n?new Array(n-i+1).join(t)+s:s)}function SG(e){return e.replace(wG,"\\$&")}function Zu(e){return new RegExp("^(?:"+e.map(SG).join("|")+")","i")}function eh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function NG(e,t,n){var a=Xn.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function TG(e,t,n){var a=Xn.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function CG(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function AG(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function EG(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function h_(e,t,n){var a=Xn.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function f_(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function OG(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function kG(e,t,n){var a=Xn.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function _G(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function p_(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function IG(e,t,n){var a=Xn.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function m_(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function DG(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function RG(e,t,n){var a=Xn.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function PG(e,t,n){var a=Xn.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function MG(e,t,n){var a=Xn.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function BG(e,t,n){var a=jG.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function FG(e,t,n){var a=Xn.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function LG(e,t,n){var a=Xn.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function x_(e,t){return Cr(e.getDate(),t,2)}function $G(e,t){return Cr(e.getHours(),t,2)}function zG(e,t){return Cr(e.getHours()%12||12,t,2)}function UG(e,t){return Cr(1+Cf.count(ao(e),e),t,3)}function R8(e,t){return Cr(e.getMilliseconds(),t,3)}function qG(e,t){return R8(e,t)+"000"}function WG(e,t){return Cr(e.getMonth()+1,t,2)}function HG(e,t){return Cr(e.getMinutes(),t,2)}function GG(e,t){return Cr(e.getSeconds(),t,2)}function KG(e){var t=e.getDay();return t===0?7:t}function VG(e,t){return Cr(Kx.count(ao(e)-1,e),t,2)}function P8(e){var t=e.getDay();return t>=4||t===0?xd(e):xd.ceil(e)}function YG(e,t){return e=P8(e),Cr(xd.count(ao(e),e)+(ao(e).getDay()===4),t,2)}function XG(e){return e.getDay()}function QG(e,t){return Cr(Lm.count(ao(e)-1,e),t,2)}function JG(e,t){return Cr(e.getFullYear()%100,t,2)}function ZG(e,t){return e=P8(e),Cr(e.getFullYear()%100,t,2)}function eK(e,t){return Cr(e.getFullYear()%1e4,t,4)}function tK(e,t){var n=e.getDay();return e=n>=4||n===0?xd(e):xd.ceil(e),Cr(e.getFullYear()%1e4,t,4)}function rK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Cr(t/60|0,"0",2)+Cr(t%60,"0",2)}function g_(e,t){return Cr(e.getUTCDate(),t,2)}function nK(e,t){return Cr(e.getUTCHours(),t,2)}function aK(e,t){return Cr(e.getUTCHours()%12||12,t,2)}function sK(e,t){return Cr(1+Gx.count(so(e),e),t,3)}function M8(e,t){return Cr(e.getUTCMilliseconds(),t,3)}function iK(e,t){return M8(e,t)+"000"}function oK(e,t){return Cr(e.getUTCMonth()+1,t,2)}function lK(e,t){return Cr(e.getUTCMinutes(),t,2)}function cK(e,t){return Cr(e.getUTCSeconds(),t,2)}function dK(e){var t=e.getUTCDay();return t===0?7:t}function uK(e,t){return Cr(Vx.count(so(e)-1,e),t,2)}function B8(e){var t=e.getUTCDay();return t>=4||t===0?gd(e):gd.ceil(e)}function hK(e,t){return e=B8(e),Cr(gd.count(so(e),e)+(so(e).getUTCDay()===4),t,2)}function fK(e){return e.getUTCDay()}function pK(e,t){return Cr($m.count(so(e)-1,e),t,2)}function mK(e,t){return Cr(e.getUTCFullYear()%100,t,2)}function xK(e,t){return e=B8(e),Cr(e.getUTCFullYear()%100,t,2)}function gK(e,t){return Cr(e.getUTCFullYear()%1e4,t,4)}function yK(e,t){var n=e.getUTCDay();return e=n>=4||n===0?gd(e):gd.ceil(e),Cr(e.getUTCFullYear()%1e4,t,4)}function bK(){return"+0000"}function y_(){return"%"}function b_(e){return+e}function v_(e){return Math.floor(+e/1e3)}var Bc,F8,L8;vK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vK(e){return Bc=vG(e),F8=Bc.format,Bc.parse,L8=Bc.utcFormat,Bc.utcParse,Bc}function jK(e){return new Date(e)}function wK(e){return e instanceof Date?+e:+new Date(+e)}function bS(e,t,n,a,s,i,l,d,u,h){var p=sS(),m=p.invert,g=p.domain,b=h(".%L"),j=h(":%S"),v=h("%I:%M"),y=h("%I %p"),A=h("%a %d"),E=h("%b %d"),O=h("%B"),S=h("%Y");function C(k){return(u(k)<k?b:d(k)<k?j:l(k)<k?v:i(k)<k?y:a(k)<k?s(k)<k?A:E:n(k)<k?O:S)(k)}return p.invert=function(k){return new Date(m(k))},p.domain=function(k){return arguments.length?g(Array.from(k,wK)):g().map(jK)},p.ticks=function(k){var I=g();return e(I[0],I[I.length-1],k??10)},p.tickFormat=function(k,I){return I==null?C:h(I)},p.nice=function(k){var I=g();return(!k||typeof k.range!="function")&&(k=t(I[0],I[I.length-1],k??10)),k?g(T8(I,k)):p},p.copy=function(){return Tf(p,bS(e,t,n,a,s,i,l,d,u,h))},p}function SK(){return Bs.apply(bS(yG,bG,ao,gS,Kx,Cf,mS,fS,Il,F8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NK(){return Bs.apply(bS(xG,gG,so,yS,Vx,Gx,xS,pS,Il,L8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yx(){var e=0,t=1,n,a,s,i,l=ka,d=!1,u;function h(m){return m==null||isNaN(m=+m)?u:l(s===0?.5:(m=(i(m)-n)*s,d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=i(e=+e),a=i(t=+t),s=n===a?0:1/(a-n),h):[e,t]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var b,j;return arguments.length?([b,j]=g,l=m(b,j),h):[l(0),l(1)]}}return h.range=p(Hd),h.rangeRound=p(aS),h.unknown=function(m){return arguments.length?(u=m,h):u},function(m){return i=m,n=m(e),a=m(t),s=n===a?0:1/(a-n),h}}function rl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $8(){var e=tl(Yx()(ka));return e.copy=function(){return rl(e,$8())},fo.apply(e,arguments)}function z8(){var e=lS(Yx()).domain([1,10]);return e.copy=function(){return rl(e,z8()).base(e.base())},fo.apply(e,arguments)}function U8(){var e=cS(Yx());return e.copy=function(){return rl(e,U8()).constant(e.constant())},fo.apply(e,arguments)}function vS(){var e=dS(Yx());return e.copy=function(){return rl(e,vS()).exponent(e.exponent())},fo.apply(e,arguments)}function TK(){return vS.apply(null,arguments).exponent(.5)}function q8(){var e=[],t=ka;function n(a){if(a!=null&&!isNaN(a=+a))return t((Sf(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Wo),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,i)=>uH(e,i/a))},n.copy=function(){return q8(t).domain(e)},fo.apply(n,arguments)}function Xx(){var e=0,t=.5,n=1,a=1,s,i,l,d,u,h=ka,p,m=!1,g;function b(v){return isNaN(v=+v)?g:(v=.5+((v=+p(v))-i)*(a*v<a*i?d:u),h(m?Math.max(0,Math.min(1,v)):v))}b.domain=function(v){return arguments.length?([e,t,n]=v,s=p(e=+e),i=p(t=+t),l=p(n=+n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,b):[e,t,n]},b.clamp=function(v){return arguments.length?(m=!!v,b):m},b.interpolator=function(v){return arguments.length?(h=v,b):h};function j(v){return function(y){var A,E,O;return arguments.length?([A,E,O]=y,h=BH(v,[A,E,O]),b):[h(0),h(.5),h(1)]}}return b.range=j(Hd),b.rangeRound=j(aS),b.unknown=function(v){return arguments.length?(g=v,b):g},function(v){return p=v,s=v(e),i=v(t),l=v(n),d=s===i?0:.5/(i-s),u=i===l?0:.5/(l-i),a=i<s?-1:1,b}}function W8(){var e=tl(Xx()(ka));return e.copy=function(){return rl(e,W8())},fo.apply(e,arguments)}function H8(){var e=lS(Xx()).domain([.1,1,10]);return e.copy=function(){return rl(e,H8()).base(e.base())},fo.apply(e,arguments)}function G8(){var e=cS(Xx());return e.copy=function(){return rl(e,G8()).constant(e.constant())},fo.apply(e,arguments)}function jS(){var e=dS(Xx());return e.copy=function(){return rl(e,jS()).exponent(e.exponent())},fo.apply(e,arguments)}function CK(){return jS.apply(null,arguments).exponent(.5)}const j_=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Rh,scaleDiverging:W8,scaleDivergingLog:H8,scaleDivergingPow:jS,scaleDivergingSqrt:CK,scaleDivergingSymlog:G8,scaleIdentity:N8,scaleImplicit:h2,scaleLinear:Bm,scaleLog:C8,scaleOrdinal:tS,scalePoint:fh,scalePow:uS,scaleQuantile:O8,scaleQuantize:k8,scaleRadial:E8,scaleSequential:$8,scaleSequentialLog:z8,scaleSequentialPow:vS,scaleSequentialQuantile:q8,scaleSequentialSqrt:TK,scaleSequentialSymlog:U8,scaleSqrt:iG,scaleSymlog:A8,scaleThreshold:_8,scaleTime:SK,scaleUtc:NK,tickFormat:S8},Symbol.toStringTag,{value:"Module"}));var L1,w_;function K8(){if(w_)return L1;w_=1;var e=zd();function t(n,a,s){for(var i=-1,l=n.length;++i<l;){var d=n[i],u=a(d);if(u!=null&&(h===void 0?u===u&&!e(u):s(u,h)))var h=u,p=d}return p}return L1=t,L1}var $1,S_;function AK(){if(S_)return $1;S_=1;function e(t,n){return t>n}return $1=e,$1}var z1,N_;function EK(){if(N_)return z1;N_=1;var e=K8(),t=AK(),n=qd();function a(s){return s&&s.length?e(s,n,t):void 0}return z1=a,z1}var OK=EK();const Qx=$r(OK);var U1,T_;function kK(){if(T_)return U1;T_=1;function e(t,n){return t<n}return U1=e,U1}var q1,C_;function _K(){if(C_)return q1;C_=1;var e=K8(),t=kK(),n=qd();function a(s){return s&&s.length?e(s,n,t):void 0}return q1=a,q1}var IK=_K();const Jx=$r(IK);var W1,A_;function DK(){if(A_)return W1;A_=1;var e=Bw(),t=el(),n=t8(),a=Ya();function s(i,l){var d=a(i)?e:n;return d(i,t(l,3))}return W1=s,W1}var H1,E_;function RK(){if(E_)return H1;E_=1;var e=Z5(),t=DK();function n(a,s){return e(t(a,s),1)}return H1=n,H1}var PK=RK();const MK=$r(PK);var G1,O_;function BK(){if(O_)return G1;O_=1;var e=Xw();function t(n,a){return e(n,a)}return G1=t,G1}var FK=BK();const Zx=$r(FK);var Gd=1e9,LK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SS,sn=!0,Ms="[DecimalError] ",Bl=Ms+"Invalid argument: ",wS=Ms+"Exponent out of range: ",Kd=Math.floor,El=Math.pow,$K=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fs,Wn=1e7,tn=7,V8=9007199254740991,zm=Kd(V8/tn),It={};It.absoluteValue=It.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};It.comparedTo=It.cmp=function(e){var t,n,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,n=a<s?a:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};It.decimalPlaces=It.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*tn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};It.dividedBy=It.div=function(e){return Qi(this,new this.constructor(e))};It.dividedToIntegerBy=It.idiv=function(e){var t=this,n=t.constructor;return Xr(Qi(t,new n(e),0,1),n.precision)};It.equals=It.eq=function(e){return!this.cmp(e)};It.exponent=function(){return An(this)};It.greaterThan=It.gt=function(e){return this.cmp(e)>0};It.greaterThanOrEqualTo=It.gte=function(e){return this.cmp(e)>=0};It.isInteger=It.isint=function(){return this.e>this.d.length-2};It.isNegative=It.isneg=function(){return this.s<0};It.isPositive=It.ispos=function(){return this.s>0};It.isZero=function(){return this.s===0};It.lessThan=It.lt=function(e){return this.cmp(e)<0};It.lessThanOrEqualTo=It.lte=function(e){return this.cmp(e)<1};It.logarithm=It.log=function(e){var t,n=this,a=n.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(fs))throw Error(Ms+"NaN");if(n.s<1)throw Error(Ms+(n.s?"NaN":"-Infinity"));return n.eq(fs)?new a(0):(sn=!1,t=Qi(Lh(n,i),Lh(e,i),i),sn=!0,Xr(t,s))};It.minus=It.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Q8(t,e):Y8(t,(e.s=-e.s,e))};It.modulo=It.mod=function(e){var t,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Ms+"NaN");return n.s?(sn=!1,t=Qi(n,e,0,1).times(e),sn=!0,n.minus(t)):Xr(new a(n),s)};It.naturalExponential=It.exp=function(){return X8(this)};It.naturalLogarithm=It.ln=function(){return Lh(this)};It.negated=It.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};It.plus=It.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y8(t,e):Q8(t,(e.s=-e.s,e))};It.precision=It.sd=function(e){var t,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bl+e);if(t=An(s)+1,a=s.d.length-1,n=a*tn+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};It.squareRoot=It.sqrt=function(){var e,t,n,a,s,i,l,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(Ms+"NaN")}for(e=An(d),sn=!1,s=Math.sqrt(+d),s==0||s==1/0?(t=vi(d.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Kd((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new u(t)):a=new u(s.toString()),n=u.precision,s=l=n+3;;)if(i=a,a=i.plus(Qi(d,i,l+2)).times(.5),vi(i.d).slice(0,l)===(t=vi(a.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Xr(i,n+1,0),i.times(i).eq(d)){a=i;break}}else if(t!="9999")break;l+=4}return sn=!0,Xr(a,n)};It.times=It.mul=function(e){var t,n,a,s,i,l,d,u,h,p=this,m=p.constructor,g=p.d,b=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,n=p.e+e.e,u=g.length,h=b.length,u<h&&(i=g,g=b,b=i,l=u,u=h,h=l),i=[],l=u+h,a=l;a--;)i.push(0);for(a=h;--a>=0;){for(t=0,s=u+a;s>a;)d=i[s]+b[a]*g[s-a-1]+t,i[s--]=d%Wn|0,t=d/Wn|0;i[s]=(i[s]+t)%Wn|0}for(;!i[--l];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,sn?Xr(e,m.precision):e};It.toDecimalPlaces=It.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Si(e,0,Gd),t===void 0?t=a.rounding:Si(t,0,8),Xr(n,e+An(n)+1,t))};It.toExponential=function(e,t){var n,a=this,s=a.constructor;return e===void 0?n=ql(a,!0):(Si(e,0,Gd),t===void 0?t=s.rounding:Si(t,0,8),a=Xr(new s(a),e+1,t),n=ql(a,!0,e+1)),n};It.toFixed=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?ql(s):(Si(e,0,Gd),t===void 0?t=i.rounding:Si(t,0,8),a=Xr(new i(s),e+An(s)+1,t),n=ql(a.abs(),!1,e+An(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};It.toInteger=It.toint=function(){var e=this,t=e.constructor;return Xr(new t(e),An(e)+1,t.rounding)};It.toNumber=function(){return+this};It.toPower=It.pow=function(e){var t,n,a,s,i,l,d=this,u=d.constructor,h=12,p=+(e=new u(e));if(!e.s)return new u(fs);if(d=new u(d),!d.s){if(e.s<1)throw Error(Ms+"Infinity");return d}if(d.eq(fs))return d;if(a=u.precision,e.eq(fs))return Xr(d,a);if(t=e.e,n=e.d.length-1,l=t>=n,i=d.s,l){if((n=p<0?-p:p)<=V8){for(s=new u(fs),t=Math.ceil(a/tn+4),sn=!1;n%2&&(s=s.times(d),__(s.d,t)),n=Kd(n/2),n!==0;)d=d.times(d),__(d.d,t);return sn=!0,e.s<0?new u(fs).div(s):Xr(s,a)}}else if(i<0)throw Error(Ms+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,sn=!1,s=e.times(Lh(d,a+h)),sn=!0,s=X8(s),s.s=i,s};It.toPrecision=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?(n=An(s),a=ql(s,n<=i.toExpNeg||n>=i.toExpPos)):(Si(e,1,Gd),t===void 0?t=i.rounding:Si(t,0,8),s=Xr(new i(s),e,t),n=An(s),a=ql(s,e<=n||n<=i.toExpNeg,e)),a};It.toSignificantDigits=It.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Si(e,1,Gd),t===void 0?t=a.rounding:Si(t,0,8)),Xr(new a(n),e,t)};It.toString=It.valueOf=It.val=It.toJSON=It[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=An(e),n=e.constructor;return ql(e,t<=n.toExpNeg||t>=n.toExpPos)};function Y8(e,t){var n,a,s,i,l,d,u,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),sn?Xr(t,m):t;if(u=e.d,h=t.d,l=e.e,s=t.e,u=u.slice(),i=l-s,i){for(i<0?(a=u,i=-i,d=h.length):(a=h,s=l,d=u.length),l=Math.ceil(m/tn),d=l>d?l+1:d+1,i>d&&(i=d,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(d=u.length,i=h.length,d-i<0&&(i=d,a=h,h=u,u=a),n=0;i;)n=(u[--i]=u[i]+h[i]+n)/Wn|0,u[i]%=Wn;for(n&&(u.unshift(n),++s),d=u.length;u[--d]==0;)u.pop();return t.d=u,t.e=s,sn?Xr(t,m):t}function Si(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Bl+e)}function vi(e){var t,n,a,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)a=e[t]+"",n=tn-a.length,n&&(i+=Lo(n)),i+=a;l=e[t],a=l+"",n=tn-a.length,n&&(i+=Lo(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Qi=function(){function e(a,s){var i,l=0,d=a.length;for(a=a.slice();d--;)i=a[d]*s+l,a[d]=i%Wn|0,l=i/Wn|0;return l&&a.unshift(l),a}function t(a,s,i,l){var d,u;if(i!=l)u=i>l?1:-1;else for(d=u=0;d<i;d++)if(a[d]!=s[d]){u=a[d]>s[d]?1:-1;break}return u}function n(a,s,i){for(var l=0;i--;)a[i]-=l,l=a[i]<s[i]?1:0,a[i]=l*Wn+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,l){var d,u,h,p,m,g,b,j,v,y,A,E,O,S,C,k,I,z,B=a.constructor,M=a.s==s.s?1:-1,F=a.d,N=s.d;if(!a.s)return new B(a);if(!s.s)throw Error(Ms+"Division by zero");for(u=a.e-s.e,I=N.length,C=F.length,b=new B(M),j=b.d=[],h=0;N[h]==(F[h]||0);)++h;if(N[h]>(F[h]||0)&&--u,i==null?E=i=B.precision:l?E=i+(An(a)-An(s))+1:E=i,E<0)return new B(0);if(E=E/tn+2|0,h=0,I==1)for(p=0,N=N[0],E++;(h<C||p)&&E--;h++)O=p*Wn+(F[h]||0),j[h]=O/N|0,p=O%N|0;else{for(p=Wn/(N[0]+1)|0,p>1&&(N=e(N,p),F=e(F,p),I=N.length,C=F.length),S=I,v=F.slice(0,I),y=v.length;y<I;)v[y++]=0;z=N.slice(),z.unshift(0),k=N[0],N[1]>=Wn/2&&++k;do p=0,d=t(N,v,I,y),d<0?(A=v[0],I!=y&&(A=A*Wn+(v[1]||0)),p=A/k|0,p>1?(p>=Wn&&(p=Wn-1),m=e(N,p),g=m.length,y=v.length,d=t(m,v,g,y),d==1&&(p--,n(m,I<g?z:N,g))):(p==0&&(d=p=1),m=N.slice()),g=m.length,g<y&&m.unshift(0),n(v,m,y),d==-1&&(y=v.length,d=t(N,v,I,y),d<1&&(p++,n(v,I<y?z:N,y))),y=v.length):d===0&&(p++,v=[0]),j[h++]=p,d&&v[0]?v[y++]=F[S]||0:(v=[F[S]],y=1);while((S++<C||v[0]!==void 0)&&E--)}return j[0]||j.shift(),b.e=u,Xr(b,l?i+An(b)+1:i)}}();function X8(e,t){var n,a,s,i,l,d,u=0,h=0,p=e.constructor,m=p.precision;if(An(e)>16)throw Error(wS+An(e));if(!e.s)return new p(fs);for(sn=!1,d=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(a=Math.log(El(2,h))/Math.LN10*2+5|0,d+=a,n=s=i=new p(fs),p.precision=d;;){if(s=Xr(s.times(e),d),n=n.times(++u),l=i.plus(Qi(s,n,d)),vi(l.d).slice(0,d)===vi(i.d).slice(0,d)){for(;h--;)i=Xr(i.times(i),d);return p.precision=m,t==null?(sn=!0,Xr(i,m)):i}i=l}}function An(e){for(var t=e.e*tn,n=e.d[0];n>=10;n/=10)t++;return t}function K1(e,t,n){if(t>e.LN10.sd())throw sn=!0,n&&(e.precision=n),Error(Ms+"LN10 precision limit exceeded");return Xr(new e(e.LN10),t)}function Lo(e){for(var t="";e--;)t+="0";return t}function Lh(e,t){var n,a,s,i,l,d,u,h,p,m=1,g=10,b=e,j=b.d,v=b.constructor,y=v.precision;if(b.s<1)throw Error(Ms+(b.s?"NaN":"-Infinity"));if(b.eq(fs))return new v(0);if(t==null?(sn=!1,h=y):h=t,b.eq(10))return t==null&&(sn=!0),K1(v,h);if(h+=g,v.precision=h,n=vi(j),a=n.charAt(0),i=An(b),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)b=b.times(e),n=vi(b.d),a=n.charAt(0),m++;i=An(b),a>1?(b=new v("0."+n),i++):b=new v(a+"."+n.slice(1))}else return u=K1(v,h+2,y).times(i+""),b=Lh(new v(a+"."+n.slice(1)),h-g).plus(u),v.precision=y,t==null?(sn=!0,Xr(b,y)):b;for(d=l=b=Qi(b.minus(fs),b.plus(fs),h),p=Xr(b.times(b),h),s=3;;){if(l=Xr(l.times(p),h),u=d.plus(Qi(l,new v(s),h)),vi(u.d).slice(0,h)===vi(d.d).slice(0,h))return d=d.times(2),i!==0&&(d=d.plus(K1(v,h+2,y).times(i+""))),d=Qi(d,new v(m),h),v.precision=y,t==null?(sn=!0,Xr(d,y)):d;d=u,s+=2}}function k_(e,t){var n,a,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,n=n-a-1,e.e=Kd(n/tn),e.d=[],a=(n+1)%tn,n<0&&(a+=tn),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=tn;a<s;)e.d.push(+t.slice(a,a+=tn));t=t.slice(a),a=tn-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),sn&&(e.e>zm||e.e<-zm))throw Error(wS+n)}else e.s=0,e.e=0,e.d=[0];return e}function Xr(e,t,n){var a,s,i,l,d,u,h,p,m=e.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(a=t-l,a<0)a+=tn,s=t,h=m[p=0];else{if(p=Math.ceil((a+1)/tn),i=m.length,p>=i)return e;for(h=i=m[p],l=1;i>=10;i/=10)l++;a%=tn,s=a-tn+l}if(n!==void 0&&(i=El(10,l-s-1),d=h/i%10|0,u=t<0||m[p+1]!==void 0||h%i,u=n<4?(d||u)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||u||n==6&&(a>0?s>0?h/El(10,l-s):0:m[p-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return u?(i=An(e),m.length=1,t=t-i-1,m[0]=El(10,(tn-t%tn)%tn),e.e=Kd(-t/tn)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=p,i=1,p--):(m.length=p+1,i=El(10,tn-a),m[p]=s>0?(h/El(10,l-s)%El(10,s)|0)*i:0),u)for(;;)if(p==0){(m[0]+=i)==Wn&&(m[0]=1,++e.e);break}else{if(m[p]+=i,m[p]!=Wn)break;m[p--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(sn&&(e.e>zm||e.e<-zm))throw Error(wS+An(e));return e}function Q8(e,t){var n,a,s,i,l,d,u,h,p,m,g=e.constructor,b=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),sn?Xr(t,b):t;if(u=e.d,m=t.d,a=t.e,h=e.e,u=u.slice(),l=h-a,l){for(p=l<0,p?(n=u,l=-l,d=m.length):(n=m,a=h,d=u.length),s=Math.max(Math.ceil(b/tn),d)+2,l>s&&(l=s,n.length=1),n.reverse(),s=l;s--;)n.push(0);n.reverse()}else{for(s=u.length,d=m.length,p=s<d,p&&(d=s),s=0;s<d;s++)if(u[s]!=m[s]){p=u[s]<m[s];break}l=0}for(p&&(n=u,u=m,m=n,t.s=-t.s),d=u.length,s=m.length-d;s>0;--s)u[d++]=0;for(s=m.length;s>l;){if(u[--s]<m[s]){for(i=s;i&&u[--i]===0;)u[i]=Wn-1;--u[i],u[s]+=Wn}u[s]-=m[s]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--a;return u[0]?(t.d=u,t.e=a,sn?Xr(t,b):t):new g(0)}function ql(e,t,n){var a,s=An(e),i=vi(e.d),l=i.length;return t?(n&&(a=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+Lo(a):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Lo(-s-1)+i,n&&(a=n-l)>0&&(i+=Lo(a))):s>=l?(i+=Lo(s+1-l),n&&(a=n-s-1)>0&&(i=i+"."+Lo(a))):((a=s+1)<l&&(i=i.slice(0,a)+"."+i.slice(a)),n&&(a=n-l)>0&&(s+1===l&&(i+="."),i+=Lo(a))),e.s<0?"-"+i:i}function __(e,t){if(e.length>t)return e.length=t,!0}function J8(e){var t,n,a;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Bl+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return k_(l,i.toString())}else if(typeof i!="string")throw Error(Bl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,$K.test(i))k_(l,i);else throw Error(Bl+i)}if(s.prototype=It,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=J8,s.config=s.set=zK,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return s.config(e),s}function zK(e){if(!e||typeof e!="object")throw Error(Ms+"Object expected");var t,n,a,s=["precision",1,Gd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[n=s[t]])!==void 0)if(Kd(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(Bl+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(Bl+n+": "+a);return this}var SS=J8(LK);fs=new SS(1);const Kr=SS;function UK(e){return GK(e)||HK(e)||WK(e)||qK()}function qK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WK(e,t){if(e){if(typeof e=="string")return x2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x2(e,t)}}function HK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function GK(e){if(Array.isArray(e))return x2(e)}function x2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var KK=function(t){return t},Z8={},eD=function(t){return t===Z8},I_=function(t){return function n(){return arguments.length===0||arguments.length===1&&eD(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},VK=function e(t,n){return t===1?n:I_(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var l=s.filter(function(d){return d!==Z8}).length;return l>=t?n.apply(void 0,s):e(t-l,I_(function(){for(var d=arguments.length,u=new Array(d),h=0;h<d;h++)u[h]=arguments[h];var p=s.map(function(m){return eD(m)?u.shift():m});return n.apply(void 0,UK(p).concat(u))}))})},e0=function(t){return VK(t.length,t)},g2=function(t,n){for(var a=[],s=t;s<n;++s)a[s-t]=s;return a},YK=e0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),XK=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return KK;var s=n.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce(function(d,u){return u(d)},i.apply(void 0,arguments))}},y2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},tD=function(t){var n=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return n&&i.every(function(d,u){return d===n[u]})||(n=i,a=t.apply(void 0,i)),a}};function QK(e){var t;return e===0?t=1:t=Math.floor(new Kr(e).abs().log(10).toNumber())+1,t}function JK(e,t,n){for(var a=new Kr(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(n),s++;return i}var ZK=e0(function(e,t,n){var a=+e,s=+t;return a+n*(s-a)}),eV=e0(function(e,t,n){var a=t-+e;return a=a||1/0,(n-e)/a}),tV=e0(function(e,t,n){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});const t0={rangeStep:JK,getDigitCount:QK,interpolateNumber:ZK,uninterpolateNumber:eV,uninterpolateTruncation:tV};function b2(e){return aV(e)||nV(e)||rD(e)||rV()}function rV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function aV(e){if(Array.isArray(e))return v2(e)}function $h(e,t){return oV(e)||iV(e,t)||rD(e,t)||sV()}function sV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rD(e,t){if(e){if(typeof e=="string")return v2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v2(e,t)}}function v2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function iV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,s=!1,i=void 0;try{for(var l=e[Symbol.iterator](),d;!(a=(d=l.next()).done)&&(n.push(d.value),!(t&&n.length===t));a=!0);}catch(u){s=!0,i=u}finally{try{!a&&l.return!=null&&l.return()}finally{if(s)throw i}}return n}}function oV(e){if(Array.isArray(e))return e}function nD(e){var t=$h(e,2),n=t[0],a=t[1],s=n,i=a;return n>a&&(s=a,i=n),[s,i]}function aD(e,t,n){if(e.lte(0))return new Kr(0);var a=t0.getDigitCount(e.toNumber()),s=new Kr(10).pow(a),i=e.div(s),l=a!==1?.05:.1,d=new Kr(Math.ceil(i.div(l).toNumber())).add(n).mul(l),u=d.mul(s);return t?u:new Kr(Math.ceil(u))}function lV(e,t,n){var a=1,s=new Kr(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(a=new Kr(10).pow(t0.getDigitCount(e)-1),s=new Kr(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Kr(Math.floor(e)))}else e===0?s=new Kr(Math.floor((t-1)/2)):n||(s=new Kr(Math.floor(e)));var l=Math.floor((t-1)/2),d=XK(YK(function(u){return s.add(new Kr(u-l).mul(a)).toNumber()}),g2);return d(0,t)}function sD(e,t,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Kr(0),tickMin:new Kr(0),tickMax:new Kr(0)};var i=aD(new Kr(t).sub(e).div(n-1),a,s),l;e<=0&&t>=0?l=new Kr(0):(l=new Kr(e).add(t).div(2),l=l.sub(new Kr(l).mod(i)));var d=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new Kr(t).sub(l).div(i).toNumber()),h=d+u+1;return h>n?sD(e,t,n,a,s+1):(h<n&&(u=t>0?u+(n-h):u,d=t>0?d:d+(n-h)),{step:i,tickMin:l.sub(new Kr(d).mul(i)),tickMax:l.add(new Kr(u).mul(i))})}function cV(e){var t=$h(e,2),n=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),d=nD([n,a]),u=$h(d,2),h=u[0],p=u[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(b2(g2(0,s-1).map(function(){return 1/0}))):[].concat(b2(g2(0,s-1).map(function(){return-1/0})),[p]);return n>a?y2(m):m}if(h===p)return lV(h,s,i);var g=sD(h,p,l,i),b=g.step,j=g.tickMin,v=g.tickMax,y=t0.rangeStep(j,v.add(new Kr(.1).mul(b)),b);return n>a?y2(y):y}function dV(e,t){var n=$h(e,2),a=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=nD([a,s]),d=$h(l,2),u=d[0],h=d[1];if(u===-1/0||h===1/0)return[a,s];if(u===h)return[u];var p=Math.max(t,2),m=aD(new Kr(h).sub(u).div(p-1),i,0),g=[].concat(b2(t0.rangeStep(new Kr(u),new Kr(h).sub(new Kr(.99).mul(m)),m)),[h]);return a>s?y2(g):g}var uV=tD(cV),hV=tD(dV),fV="Invariant failed";function Wl(e,t){throw new Error(fV)}var pV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Um.apply(this,arguments)}function mV(e,t){return bV(e)||yV(e,t)||gV(e,t)||xV()}function xV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gV(e,t){if(e){if(typeof e=="string")return D_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D_(e,t)}}function D_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function yV(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function bV(e){if(Array.isArray(e))return e}function vV(e,t){if(e==null)return{};var n=jV(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function jV(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function wV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SV(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lD(a.key),a)}}function NV(e,t,n){return t&&SV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TV(e,t,n){return t=qm(t),CV(e,iD()?Reflect.construct(t,n||[],qm(e).constructor):t.apply(e,n))}function CV(e,t){if(t&&(yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AV(e)}function AV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iD=function(){return!!e})()}function qm(e){return qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qm(e)}function EV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j2(e,t)}function j2(e,t){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},j2(e,t)}function oD(e,t,n){return t=lD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lD(e){var t=OV(e,"string");return yd(t)=="symbol"?t:t+""}function OV(e,t){if(yd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(yd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Af=function(e){function t(){return wV(this,t),TV(this,t,arguments)}return EV(t,e),NV(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,l=a.width,d=a.dataKey,u=a.data,h=a.dataPointFormatter,p=a.xAxis,m=a.yAxis,g=vV(a,pV),b=gr(g,!1);this.props.direction==="x"&&p.type!=="number"&&Wl();var j=u.map(function(v){var y=h(v,d),A=y.x,E=y.y,O=y.value,S=y.errorVal;if(!S)return null;var C=[],k,I;if(Array.isArray(S)){var z=mV(S,2);k=z[0],I=z[1]}else k=I=S;if(i==="vertical"){var B=p.scale,M=E+s,F=M+l,N=M-l,L=B(O-k),P=B(O+I);C.push({x1:P,y1:F,x2:P,y2:N}),C.push({x1:L,y1:M,x2:P,y2:M}),C.push({x1:L,y1:F,x2:L,y2:N})}else if(i==="horizontal"){var _=m.scale,R=A+s,W=R-l,G=R+l,oe=_(O-k),q=_(O+I);C.push({x1:W,y1:q,x2:G,y2:q}),C.push({x1:R,y1:oe,x2:R,y2:q}),C.push({x1:W,y1:oe,x2:G,y2:oe})}return _e.createElement(vn,Um({className:"recharts-errorBar",key:"bar-".concat(C.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},b),C.map(function(V){return _e.createElement("line",Um({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return _e.createElement(vn,{className:"recharts-errorBars"},j)}}])}(_e.Component);oD(Af,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});oD(Af,"displayName","ErrorBar");function zh(e){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}function R_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(n),!0).forEach(function(a){kV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kV(e,t,n){return t=_V(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _V(e){var t=IV(e,"string");return zh(t)=="symbol"?t:t+""}function IV(e,t){if(zh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(zh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cD=function(t){var n=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,l=cs(n,ed);if(!l)return null;var d=ed.defaultProps,u=d!==void 0?Sl(Sl({},d),l.props):{},h;return l.props&&l.props.payload?h=l.props&&l.props.payload:i==="children"?h=(a||[]).reduce(function(p,m){var g=m.item,b=m.props,j=b.sectors||b.data||[];return p.concat(j.map(function(v){return{type:l.props.iconType||g.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):h=(a||[]).map(function(p){var m=p.item,g=m.type.defaultProps,b=g!==void 0?Sl(Sl({},g),m.props):{},j=b.dataKey,v=b.name,y=b.legendType,A=b.hide;return{inactive:A,dataKey:j,type:u.iconType||y||"square",color:NS(m),value:v||j,payload:b}}),Sl(Sl(Sl({},u),ed.getWithHeight(l,s)),{},{payload:h,item:l})};function Uh(e){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uh(e)}function P_(e){return MV(e)||PV(e)||RV(e)||DV()}function DV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RV(e,t){if(e){if(typeof e=="string")return w2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w2(e,t)}}function PV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MV(e){if(Array.isArray(e))return w2(e)}function w2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function M_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(n),!0).forEach(function(a){rd(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rd(e,t,n){return t=BV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BV(e){var t=FV(e,"string");return Uh(t)=="symbol"?t:t+""}function FV(e,t){if(Uh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Uh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ps(e,t,n){return mr(e)||mr(t)?n:Mn(t)?Ds(e,t,n):dr(t)?t(e):n}function ph(e,t,n,a){var s=MK(e,function(d){return ps(d,t)});if(n==="number"){var i=s.filter(function(d){return St(d)||parseFloat(d)});return i.length?[Jx(i),Qx(i)]:[1/0,-1/0]}var l=a?s.filter(function(d){return!mr(d)}):s;return l.map(function(d){return Mn(d)||d instanceof Date?d:""})}var LV=function(t){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,d=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(d<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var u=i.range,h=0;h<d;h++){var p=h>0?s[h-1].coordinate:s[d-1].coordinate,m=s[h].coordinate,g=h>=d-1?s[0].coordinate:s[h+1].coordinate,b=void 0;if(ti(m-p)!==ti(g-m)){var j=[];if(ti(g-m)===ti(u[1]-u[0])){b=g;var v=m+u[1]-u[0];j[0]=Math.min(v,(v+p)/2),j[1]=Math.max(v,(v+p)/2)}else{b=p;var y=g+u[1]-u[0];j[0]=Math.min(m,(y+m)/2),j[1]=Math.max(m,(y+m)/2)}var A=[Math.min(m,(b+m)/2),Math.max(m,(b+m)/2)];if(t>A[0]&&t<=A[1]||t>=j[0]&&t<=j[1]){l=s[h].index;break}}else{var E=Math.min(p,g),O=Math.max(p,g);if(t>(E+m)/2&&t<=(O+m)/2){l=s[h].index;break}}}else for(var S=0;S<d;S++)if(S===0&&t<=(a[S].coordinate+a[S+1].coordinate)/2||S>0&&S<d-1&&t>(a[S].coordinate+a[S-1].coordinate)/2&&t<=(a[S].coordinate+a[S+1].coordinate)/2||S===d-1&&t>(a[S].coordinate+a[S-1].coordinate)/2){l=a[S].index;break}return l},NS=function(t){var n,a=t,s=a.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,l=i.stroke,d=i.fill,u;switch(s){case"Line":u=l;break;case"Area":case"Radar":u=l&&l!=="none"?l:d;break;default:u=d;break}return u},$V=function(t){var n=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var l={},d=Object.keys(i),u=0,h=d.length;u<h;u++)for(var p=i[d[u]].stackGroups,m=Object.keys(p),g=0,b=m.length;g<b;g++){var j=p[m[g]],v=j.items,y=j.cateAxisId,A=v.filter(function(I){return Yi(I.type).indexOf("Bar")>=0});if(A&&A.length){var E=A[0].type.defaultProps,O=E!==void 0?pn(pn({},E),A[0].props):A[0].props,S=O.barSize,C=O[y];l[C]||(l[C]=[]);var k=mr(S)?n:S;l[C].push({item:A[0],stackList:A.slice(1),barSize:mr(k)?void 0:Ul(k,a,0)})}}return l},zV=function(t){var n=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,l=i===void 0?[]:i,d=t.maxBarSize,u=l.length;if(u<1)return null;var h=Ul(n,s,0,!0),p,m=[];if(l[0].barSize===+l[0].barSize){var g=!1,b=s/u,j=l.reduce(function(S,C){return S+C.barSize||0},0);j+=(u-1)*h,j>=s&&(j-=(u-1)*h,h=0),j>=s&&b>0&&(g=!0,b*=.9,j=u*b);var v=(s-j)/2>>0,y={offset:v-h,size:0};p=l.reduce(function(S,C){var k={item:C.item,position:{offset:y.offset+y.size+h,size:g?b:C.barSize}},I=[].concat(P_(S),[k]);return y=I[I.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(z){I.push({item:z,position:y})}),I},m)}else{var A=Ul(a,s,0,!0);s-2*A-(u-1)*h<=0&&(h=0);var E=(s-2*A-(u-1)*h)/u;E>1&&(E>>=0);var O=d===+d?Math.min(E,d):E;p=l.reduce(function(S,C,k){var I=[].concat(P_(S),[{item:C.item,position:{offset:A+(E+h)*k+(E-O)/2,size:O}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(z){I.push({item:z,position:I[I.length-1].position})}),I},m)}return p},UV=function(t,n,a,s){var i=a.children,l=a.width,d=a.margin,u=l-(d.left||0)-(d.right||0),h=cD({children:i,legendWidth:u});if(h){var p=s||{},m=p.width,g=p.height,b=h.align,j=h.verticalAlign,v=h.layout;if((v==="vertical"||v==="horizontal"&&j==="middle")&&b!=="center"&&St(t[b]))return pn(pn({},t),{},rd({},b,t[b]+(m||0)));if((v==="horizontal"||v==="vertical"&&b==="center")&&j!=="middle"&&St(t[j]))return pn(pn({},t),{},rd({},j,t[j]+(g||0)))}return t},qV=function(t,n,a){return mr(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},dD=function(t,n,a,s,i){var l=n.props.children,d=Rs(l,Af).filter(function(h){return qV(s,i,h.props.direction)});if(d&&d.length){var u=d.map(function(h){return h.props.dataKey});return t.reduce(function(h,p){var m=ps(p,a);if(mr(m))return h;var g=Array.isArray(m)?[Jx(m),Qx(m)]:[m,m],b=u.reduce(function(j,v){var y=ps(p,v,0),A=g[0]-Math.abs(Array.isArray(y)?y[0]:y),E=g[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(A,j[0]),Math.max(E,j[1])]},[1/0,-1/0]);return[Math.min(b[0],h[0]),Math.max(b[1],h[1])]},[1/0,-1/0])}return null},WV=function(t,n,a,s,i){var l=n.map(function(d){return dD(t,d,a,i,s)}).filter(function(d){return!mr(d)});return l&&l.length?l.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]):null},uD=function(t,n,a,s,i){var l=n.map(function(u){var h=u.props.dataKey;return a==="number"&&h&&dD(t,u,h,s)||ph(t,h,a,i)});if(a==="number")return l.reduce(function(u,h){return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);var d={};return l.reduce(function(u,h){for(var p=0,m=h.length;p<m;p++)d[h[p]]||(d[h[p]]=!0,u.push(h[p]));return u},[])},hD=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},fD=function(t,n,a,s){if(s)return t.map(function(u){return u.coordinate});var i,l,d=t.map(function(u){return u.coordinate===n&&(i=!0),u.coordinate===a&&(l=!0),u.coordinate});return i||d.push(n),l||d.push(a),d},Gi=function(t,n,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,l=t.type,d=t.range,u=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,h=(n||a)&&l==="category"&&s.bandwidth?s.bandwidth()/u:0;if(h=t.axisType==="angleAxis"&&(d==null?void 0:d.length)>=2?ti(d[0]-d[1])*2*h:h,n&&(t.ticks||t.niceTicks)){var p=(t.ticks||t.niceTicks).map(function(m){var g=i?i.indexOf(m):m;return{coordinate:s(g)+h,value:m,offset:h}});return p.filter(function(m){return!vf(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,g){return{coordinate:s(m)+h,value:m,index:g,offset:h}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+h,value:m,offset:h}}):s.domain().map(function(m,g){return{coordinate:s(m)+h,value:i?i[m]:m,index:g,offset:h}})},V1=new WeakMap,Kp=function(t,n){if(typeof n!="function")return t;V1.has(t)||V1.set(t,new WeakMap);var a=V1.get(t);if(a.has(n))return a.get(n);var s=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,s),s},HV=function(t,n,a){var s=t.scale,i=t.type,l=t.layout,d=t.axisType;if(s==="auto")return l==="radial"&&d==="radiusAxis"?{scale:Rh(),realScaleType:"band"}:l==="radial"&&d==="angleAxis"?{scale:Bm(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:fh(),realScaleType:"point"}:i==="category"?{scale:Rh(),realScaleType:"band"}:{scale:Bm(),realScaleType:"linear"};if(zl(s)){var u="scale".concat(Fx(s));return{scale:(j_[u]||fh)(),realScaleType:j_[u]?u:"point"}}return dr(s)?{scale:s}:{scale:fh(),realScaleType:"point"}},B_=1e-4,GV=function(t){var n=t.domain();if(!(!n||n.length<=2)){var a=n.length,s=t.range(),i=Math.min(s[0],s[1])-B_,l=Math.max(s[0],s[1])+B_,d=t(n[0]),u=t(n[a-1]);(d<i||d>l||u<i||u>l)&&t.domain([n[0],n[a-1]])}},KV=function(t,n){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===n)return t[a].position;return null},VV=function(t,n){if(!n||n.length!==2||!St(n[0])||!St(n[1]))return t;var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!St(t[0])||t[0]<a)&&(i[0]=a),(!St(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},YV=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,l=0,d=0;d<n;++d){var u=vf(t[d][a][1])?t[d][a][0]:t[d][a][1];u>=0?(t[d][a][0]=i,t[d][a][1]=i+u,i=t[d][a][1]):(t[d][a][0]=l,t[d][a][1]=l+u,l=t[d][a][1])}},XV=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,l=0;l<n;++l){var d=vf(t[l][a][1])?t[l][a][0]:t[l][a][1];d>=0?(t[l][a][0]=i,t[l][a][1]=i+d,i=t[l][a][1]):(t[l][a][0]=0,t[l][a][1]=0)}},QV={sign:YV,expand:Rz,none:dd,silhouette:Pz,wiggle:Mz,positive:XV},JV=function(t,n,a){var s=n.map(function(d){return d.props.dataKey}),i=QV[a],l=Dz().keys(s).value(function(d,u){return+ps(d,u,0)}).order(Jj).offset(i);return l(t)},ZV=function(t,n,a,s,i,l){if(!t)return null;var d=l?n.reverse():n,u={},h=d.reduce(function(m,g){var b,j=(b=g.type)!==null&&b!==void 0&&b.defaultProps?pn(pn({},g.type.defaultProps),g.props):g.props,v=j.stackId,y=j.hide;if(y)return m;var A=j[a],E=m[A]||{hasStack:!1,stackGroups:{}};if(Mn(v)){var O=E.stackGroups[v]||{numericAxisId:a,cateAxisId:s,items:[]};O.items.push(g),E.hasStack=!0,E.stackGroups[v]=O}else E.stackGroups[jf("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[g]};return pn(pn({},m),{},rd({},A,E))},u),p={};return Object.keys(h).reduce(function(m,g){var b=h[g];if(b.hasStack){var j={};b.stackGroups=Object.keys(b.stackGroups).reduce(function(v,y){var A=b.stackGroups[y];return pn(pn({},v),{},rd({},y,{numericAxisId:a,cateAxisId:s,items:A.items,stackedData:JV(t,A.items,i)}))},j)}return pn(pn({},m),{},rd({},g,b))},p)},eY=function(t,n){var a=n.realScaleType,s=n.type,i=n.tickCount,l=n.originalDomain,d=n.allowDecimals,u=a||n.scale;if(u!=="auto"&&u!=="linear")return null;if(i&&s==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var h=t.domain();if(!h.length)return null;var p=uV(h,i,d);return t.domain([Jx(p),Qx(p)]),{niceTicks:p}}if(i&&s==="number"){var m=t.domain(),g=hV(m,i,d);return{niceTicks:g}}return null};function F_(e){var t=e.axis,n=e.ticks,a=e.bandSize,s=e.entry,i=e.index,l=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!mr(s[t.dataKey])){var d=gm(n,"value",s[t.dataKey]);if(d)return d.coordinate+a/2}return n[i]?n[i].coordinate+a/2:null}var u=ps(s,mr(l)?t.dataKey:l);return mr(u)?null:t.scale(u)}var L_=function(t){var n=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,l=t.entry,d=t.index;if(n.type==="category")return a[d]?a[d].coordinate+s:null;var u=ps(l,n.dataKey,n.domain[d]);return mr(u)?null:n.scale(u)-i/2+s},tY=function(t){var n=t.numericAxis,a=n.scale.domain();if(n.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},rY=function(t,n){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Mn(i)){var l=n[i];if(l){var d=l.items.indexOf(t);return d>=0?l.stackedData[d]:null}}return null},nY=function(t){return t.reduce(function(n,a){return[Jx(a.concat([n[0]]).filter(St)),Qx(a.concat([n[1]]).filter(St))]},[1/0,-1/0])},pD=function(t,n,a){return Object.keys(t).reduce(function(s,i){var l=t[i],d=l.stackedData,u=d.reduce(function(h,p){var m=nY(p.slice(n,a+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},$_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,z_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,S2=function(t,n,a){if(dr(t))return t(n,a);if(!Array.isArray(t))return n;var s=[];if(St(t[0]))s[0]=a?t[0]:Math.min(t[0],n[0]);else if($_.test(t[0])){var i=+$_.exec(t[0])[1];s[0]=n[0]-i}else dr(t[0])?s[0]=t[0](n[0]):s[0]=n[0];if(St(t[1]))s[1]=a?t[1]:Math.max(t[1],n[1]);else if(z_.test(t[1])){var l=+z_.exec(t[1])[1];s[1]=n[1]+l}else dr(t[1])?s[1]=t[1](n[1]):s[1]=n[1];return s},Wm=function(t,n,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&n&&n.length>=2){for(var i=Jw(n,function(m){return m.coordinate}),l=1/0,d=1,u=i.length;d<u;d++){var h=i[d],p=i[d-1];l=Math.min((h.coordinate||0)-(p.coordinate||0),l)}return l===1/0?0:l}return a?void 0:0},U_=function(t,n,a){return!t||!t.length||Zx(t,Ds(a,"type.defaultProps.domain"))?n:t},mD=function(t,n){var a=t.type.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,l=a.unit,d=a.formatter,u=a.tooltipType,h=a.chartType,p=a.hide;return pn(pn({},gr(t,!1)),{},{dataKey:s,unit:l,formatter:d,name:i||s,color:NS(t),value:ps(n,s),type:u,payload:n,chartType:h,hide:p})};function qh(e){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(e)}function q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function W_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(n),!0).forEach(function(a){aY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aY(e,t,n){return t=sY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sY(e){var t=iY(e,"string");return qh(t)=="symbol"?t:t+""}function iY(e,t){if(qh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(qh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hm=Math.PI/180,oY=function(t){return t*180/Math.PI},oa=function(t,n,a,s){return{x:t+Math.cos(-Hm*s)*a,y:n+Math.sin(-Hm*s)*a}},lY=function(t,n){var a=t.x,s=t.y,i=n.x,l=n.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-l,2))},cY=function(t,n){var a=t.x,s=t.y,i=n.cx,l=n.cy,d=lY({x:a,y:s},{x:i,y:l});if(d<=0)return{radius:d};var u=(a-i)/d,h=Math.acos(u);return s>l&&(h=2*Math.PI-h),{radius:d,angle:oY(h),angleInRadian:h}},dY=function(t){var n=t.startAngle,a=t.endAngle,s=Math.floor(n/360),i=Math.floor(a/360),l=Math.min(s,i);return{startAngle:n-l*360,endAngle:a-l*360}},uY=function(t,n){var a=n.startAngle,s=n.endAngle,i=Math.floor(a/360),l=Math.floor(s/360),d=Math.min(i,l);return t+d*360},H_=function(t,n){var a=t.x,s=t.y,i=cY({x:a,y:s},n),l=i.radius,d=i.angle,u=n.innerRadius,h=n.outerRadius;if(l<u||l>h)return!1;if(l===0)return!0;var p=dY(n),m=p.startAngle,g=p.endAngle,b=d,j;if(m<=g){for(;b>g;)b-=360;for(;b<m;)b+=360;j=b>=m&&b<=g}else{for(;b>m;)b-=360;for(;b<g;)b+=360;j=b>=g&&b<=m}return j?W_(W_({},n),{},{radius:l,angle:uY(b,n)}):null};function Wh(e){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(e)}var hY=["offset"];function fY(e){return gY(e)||xY(e)||mY(e)||pY()}function pY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mY(e,t){if(e){if(typeof e=="string")return N2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N2(e,t)}}function xY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gY(e){if(Array.isArray(e))return N2(e)}function N2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function yY(e,t){if(e==null)return{};var n=bY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function bY(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function G_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(n),!0).forEach(function(a){vY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vY(e,t,n){return t=jY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jY(e){var t=wY(e,"string");return Wh(t)=="symbol"?t:t+""}function wY(e,t){if(Wh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Wh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hh(){return Hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hh.apply(this,arguments)}var SY=function(t){var n=t.value,a=t.formatter,s=mr(t.children)?n:t.children;return dr(a)?a(s):s},NY=function(t,n){var a=ti(n-t),s=Math.min(Math.abs(n-t),360);return a*s},TY=function(t,n,a){var s=t.position,i=t.viewBox,l=t.offset,d=t.className,u=i,h=u.cx,p=u.cy,m=u.innerRadius,g=u.outerRadius,b=u.startAngle,j=u.endAngle,v=u.clockWise,y=(m+g)/2,A=NY(b,j),E=A>=0?1:-1,O,S;s==="insideStart"?(O=b+E*l,S=v):s==="insideEnd"?(O=j-E*l,S=!v):s==="end"&&(O=j+E*l,S=v),S=A<=0?S:!S;var C=oa(h,p,y,O),k=oa(h,p,y,O+(S?1:-1)*359),I="M".concat(C.x,",").concat(C.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),z=mr(t.id)?jf("recharts-radial-line-"):t.id;return _e.createElement("text",Hh({},a,{dominantBaseline:"central",className:Nr("recharts-radial-bar-label",d)}),_e.createElement("defs",null,_e.createElement("path",{id:z,d:I})),_e.createElement("textPath",{xlinkHref:"#".concat(z)},n))},CY=function(t){var n=t.viewBox,a=t.offset,s=t.position,i=n,l=i.cx,d=i.cy,u=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,g=(p+m)/2;if(s==="outside"){var b=oa(l,d,h+a,g),j=b.x,v=b.y;return{x:j,y:v,textAnchor:j>=l?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:l,y:d,textAnchor:"middle",verticalAnchor:"end"};var y=(u+h)/2,A=oa(l,d,y,g),E=A.x,O=A.y;return{x:E,y:O,textAnchor:"middle",verticalAnchor:"middle"}},AY=function(t){var n=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,l=n,d=l.x,u=l.y,h=l.width,p=l.height,m=p>=0?1:-1,g=m*s,b=m>0?"end":"start",j=m>0?"start":"end",v=h>=0?1:-1,y=v*s,A=v>0?"end":"start",E=v>0?"start":"end";if(i==="top"){var O={x:d+h/2,y:u-m*s,textAnchor:"middle",verticalAnchor:b};return Rn(Rn({},O),a?{height:Math.max(u-a.y,0),width:h}:{})}if(i==="bottom"){var S={x:d+h/2,y:u+p+g,textAnchor:"middle",verticalAnchor:j};return Rn(Rn({},S),a?{height:Math.max(a.y+a.height-(u+p),0),width:h}:{})}if(i==="left"){var C={x:d-y,y:u+p/2,textAnchor:A,verticalAnchor:"middle"};return Rn(Rn({},C),a?{width:Math.max(C.x-a.x,0),height:p}:{})}if(i==="right"){var k={x:d+h+y,y:u+p/2,textAnchor:E,verticalAnchor:"middle"};return Rn(Rn({},k),a?{width:Math.max(a.x+a.width-k.x,0),height:p}:{})}var I=a?{width:h,height:p}:{};return i==="insideLeft"?Rn({x:d+y,y:u+p/2,textAnchor:E,verticalAnchor:"middle"},I):i==="insideRight"?Rn({x:d+h-y,y:u+p/2,textAnchor:A,verticalAnchor:"middle"},I):i==="insideTop"?Rn({x:d+h/2,y:u+g,textAnchor:"middle",verticalAnchor:j},I):i==="insideBottom"?Rn({x:d+h/2,y:u+p-g,textAnchor:"middle",verticalAnchor:b},I):i==="insideTopLeft"?Rn({x:d+y,y:u+g,textAnchor:E,verticalAnchor:j},I):i==="insideTopRight"?Rn({x:d+h-y,y:u+g,textAnchor:A,verticalAnchor:j},I):i==="insideBottomLeft"?Rn({x:d+y,y:u+p-g,textAnchor:E,verticalAnchor:b},I):i==="insideBottomRight"?Rn({x:d+h-y,y:u+p-g,textAnchor:A,verticalAnchor:b},I):Ud(i)&&(St(i.x)||kl(i.x))&&(St(i.y)||kl(i.y))?Rn({x:d+Ul(i.x,h),y:u+Ul(i.y,p),textAnchor:"end",verticalAnchor:"end"},I):Rn({x:d+h/2,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},I)},EY=function(t){return"cx"in t&&St(t.cx)};function ya(e){var t=e.offset,n=t===void 0?5:t,a=yY(e,hY),s=Rn({offset:n},a),i=s.viewBox,l=s.position,d=s.value,u=s.children,h=s.content,p=s.className,m=p===void 0?"":p,g=s.textBreakAll;if(!i||mr(d)&&mr(u)&&!w.isValidElement(h)&&!dr(h))return null;if(w.isValidElement(h))return w.cloneElement(h,s);var b;if(dr(h)){if(b=w.createElement(h,s),w.isValidElement(b))return b}else b=SY(s);var j=EY(i),v=gr(s,!0);if(j&&(l==="insideStart"||l==="insideEnd"||l==="end"))return TY(s,b,v);var y=j?CY(s):AY(s);return _e.createElement(km,Hh({className:Nr("recharts-label",m)},v,y,{breakAll:g}),b)}ya.displayName="Label";var xD=function(t){var n=t.cx,a=t.cy,s=t.angle,i=t.startAngle,l=t.endAngle,d=t.r,u=t.radius,h=t.innerRadius,p=t.outerRadius,m=t.x,g=t.y,b=t.top,j=t.left,v=t.width,y=t.height,A=t.clockWise,E=t.labelViewBox;if(E)return E;if(St(v)&&St(y)){if(St(m)&&St(g))return{x:m,y:g,width:v,height:y};if(St(b)&&St(j))return{x:b,y:j,width:v,height:y}}return St(m)&&St(g)?{x:m,y:g,width:0,height:0}:St(n)&&St(a)?{cx:n,cy:a,startAngle:i||s||0,endAngle:l||s||0,innerRadius:h||0,outerRadius:p||u||d||0,clockWise:A}:t.viewBox?t.viewBox:{}},OY=function(t,n){return t?t===!0?_e.createElement(ya,{key:"label-implicit",viewBox:n}):Mn(t)?_e.createElement(ya,{key:"label-implicit",viewBox:n,value:t}):w.isValidElement(t)?t.type===ya?w.cloneElement(t,{key:"label-implicit",viewBox:n}):_e.createElement(ya,{key:"label-implicit",content:t,viewBox:n}):dr(t)?_e.createElement(ya,{key:"label-implicit",content:t,viewBox:n}):Ud(t)?_e.createElement(ya,Hh({viewBox:n},t,{key:"label-implicit"})):null:null},kY=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=xD(t),l=Rs(s,ya).map(function(u,h){return w.cloneElement(u,{viewBox:n||i,key:"label-".concat(h)})});if(!a)return l;var d=OY(t.label,n||i);return[d].concat(fY(l))};ya.parseViewBox=xD;ya.renderCallByParent=kY;var Y1,K_;function _Y(){if(K_)return Y1;K_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Y1=e,Y1}var IY=_Y();const DY=$r(IY);function Gh(e){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}var RY=["valueAccessor"],PY=["data","dataKey","clockWise","id","textBreakAll"];function MY(e){return $Y(e)||LY(e)||FY(e)||BY()}function BY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FY(e,t){if(e){if(typeof e=="string")return T2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T2(e,t)}}function LY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Y(e){if(Array.isArray(e))return T2(e)}function T2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gm.apply(this,arguments)}function V_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Y_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V_(Object(n),!0).forEach(function(a){zY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zY(e,t,n){return t=UY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UY(e){var t=qY(e,"string");return Gh(t)=="symbol"?t:t+""}function qY(e,t){if(Gh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Gh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X_(e,t){if(e==null)return{};var n=WY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function WY(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var HY=function(t){return Array.isArray(t.value)?DY(t.value):t.value};function Ho(e){var t=e.valueAccessor,n=t===void 0?HY:t,a=X_(e,RY),s=a.data,i=a.dataKey,l=a.clockWise,d=a.id,u=a.textBreakAll,h=X_(a,PY);return!s||!s.length?null:_e.createElement(vn,{className:"recharts-label-list"},s.map(function(p,m){var g=mr(i)?n(p,m):ps(p&&p.payload,i),b=mr(d)?{}:{id:"".concat(d,"-").concat(m)};return _e.createElement(ya,Gm({},gr(p,!0),h,b,{parentViewBox:p.parentViewBox,value:g,textBreakAll:u,viewBox:ya.parseViewBox(mr(l)?p:Y_(Y_({},p),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}Ho.displayName="LabelList";function GY(e,t){return e?e===!0?_e.createElement(Ho,{key:"labelList-implicit",data:t}):_e.isValidElement(e)||dr(e)?_e.createElement(Ho,{key:"labelList-implicit",data:t,content:e}):Ud(e)?_e.createElement(Ho,Gm({data:t},e,{key:"labelList-implicit"})):null:null}function KY(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=Rs(a,Ho).map(function(l,d){return w.cloneElement(l,{data:t,key:"labelList-".concat(d)})});if(!n)return s;var i=GY(e.label,t);return[i].concat(MY(s))}Ho.renderCallByParent=KY;function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function C2(){return C2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},C2.apply(this,arguments)}function Q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function J_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q_(Object(n),!0).forEach(function(a){VY(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function VY(e,t,n){return t=YY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YY(e){var t=XY(e,"string");return Kh(t)=="symbol"?t:t+""}function XY(e,t){if(Kh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Kh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QY=function(t,n){var a=ti(n-t),s=Math.min(Math.abs(n-t),359.999);return a*s},Vp=function(t){var n=t.cx,a=t.cy,s=t.radius,i=t.angle,l=t.sign,d=t.isExternal,u=t.cornerRadius,h=t.cornerIsExternal,p=u*(d?1:-1)+s,m=Math.asin(u/p)/Hm,g=h?i:i+l*m,b=oa(n,a,p,g),j=oa(n,a,s,g),v=h?i-l*m:i,y=oa(n,a,p*Math.cos(m*Hm),v);return{center:b,circleTangency:j,lineTangency:y,theta:m}},gD=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,l=t.startAngle,d=t.endAngle,u=QY(l,d),h=l+u,p=oa(n,a,i,l),m=oa(n,a,i,h),g="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var b=oa(n,a,s,l),j=oa(n,a,s,h);g+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=h),`,
            `).concat(b.x,",").concat(b.y," Z")}else g+="L ".concat(n,",").concat(a," Z");return g},JY=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,l=t.cornerRadius,d=t.forceCornerRadius,u=t.cornerIsExternal,h=t.startAngle,p=t.endAngle,m=ti(p-h),g=Vp({cx:n,cy:a,radius:i,angle:h,sign:m,cornerRadius:l,cornerIsExternal:u}),b=g.circleTangency,j=g.lineTangency,v=g.theta,y=Vp({cx:n,cy:a,radius:i,angle:p,sign:-m,cornerRadius:l,cornerIsExternal:u}),A=y.circleTangency,E=y.lineTangency,O=y.theta,S=u?Math.abs(h-p):Math.abs(h-p)-v-O;if(S<0)return d?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):gD({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:h,endAngle:p});var C="M ".concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(m<0),",").concat(A.x,",").concat(A.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
  `);if(s>0){var k=Vp({cx:n,cy:a,radius:s,angle:h,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),I=k.circleTangency,z=k.lineTangency,B=k.theta,M=Vp({cx:n,cy:a,radius:s,angle:p,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),F=M.circleTangency,N=M.lineTangency,L=M.theta,P=u?Math.abs(h-p):Math.abs(h-p)-B-L;if(P<0&&l===0)return"".concat(C,"L").concat(n,",").concat(a,"Z");C+="L".concat(N.x,",").concat(N.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(m>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(z.x,",").concat(z.y,"Z")}else C+="L".concat(n,",").concat(a,"Z");return C},ZY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yD=function(t){var n=J_(J_({},ZY),t),a=n.cx,s=n.cy,i=n.innerRadius,l=n.outerRadius,d=n.cornerRadius,u=n.forceCornerRadius,h=n.cornerIsExternal,p=n.startAngle,m=n.endAngle,g=n.className;if(l<i||p===m)return null;var b=Nr("recharts-sector",g),j=l-i,v=Ul(d,j,0,!0),y;return v>0&&Math.abs(p-m)<360?y=JY({cx:a,cy:s,innerRadius:i,outerRadius:l,cornerRadius:Math.min(v,j/2),forceCornerRadius:u,cornerIsExternal:h,startAngle:p,endAngle:m}):y=gD({cx:a,cy:s,innerRadius:i,outerRadius:l,startAngle:p,endAngle:m}),_e.createElement("path",C2({},gr(n,!0),{className:b,d:y,role:"img"}))};function Vh(e){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(e)}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},A2.apply(this,arguments)}function Z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function e4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(n),!0).forEach(function(a){eX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z_(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eX(e,t,n){return t=tX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tX(e){var t=rX(e,"string");return Vh(t)=="symbol"?t:t+""}function rX(e,t){if(Vh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Vh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t4={curveBasisClosed:wz,curveBasisOpen:Sz,curveBasis:jz,curveBumpX:oz,curveBumpY:lz,curveLinearClosed:Nz,curveLinear:$x,curveMonotoneX:Tz,curveMonotoneY:Cz,curveNatural:Az,curveStep:Ez,curveStepAfter:kz,curveStepBefore:Oz},Yp=function(t){return t.x===+t.x&&t.y===+t.y},th=function(t){return t.x},rh=function(t){return t.y},nX=function(t,n){if(dr(t))return t;var a="curve".concat(Fx(t));return(a==="curveMonotone"||a==="curveBump")&&n?t4["".concat(a).concat(n==="vertical"?"Y":"X")]:t4[a]||$x},aX=function(t){var n=t.type,a=n===void 0?"linear":n,s=t.points,i=s===void 0?[]:s,l=t.baseLine,d=t.layout,u=t.connectNulls,h=u===void 0?!1:u,p=nX(a,d),m=h?i.filter(function(v){return Yp(v)}):i,g;if(Array.isArray(l)){var b=h?l.filter(function(v){return Yp(v)}):l,j=m.map(function(v,y){return e4(e4({},v),{},{base:b[y]})});return d==="vertical"?g=$p().y(rh).x1(th).x0(function(v){return v.base.x}):g=$p().x(th).y1(rh).y0(function(v){return v.base.y}),g.defined(Yp).curve(p),g(j)}return d==="vertical"&&St(l)?g=$p().y(rh).x1(th).x0(l):St(l)?g=$p().x(th).y1(rh).y0(l):g=w5().x(th).y(rh),g.defined(Yp).curve(p),g(m)},E2=function(t){var n=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var l=a&&a.length?aX(t):s;return _e.createElement("path",A2({},gr(t,!1),ym(t),{className:Nr("recharts-curve",n),d:l,ref:i}))},X1={exports:{}},Q1,r4;function sX(){if(r4)return Q1;r4=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Q1=e,Q1}var J1,n4;function iX(){if(n4)return J1;n4=1;var e=sX();function t(){}function n(){}return n.resetWarningCache=t,J1=function(){function a(l,d,u,h,p,m){if(m!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},J1}var a4;function oX(){return a4||(a4=1,X1.exports=iX()()),X1.exports}var lX=oX();const Dr=$r(lX);var cX=Object.getOwnPropertyNames,dX=Object.getOwnPropertySymbols,uX=Object.prototype.hasOwnProperty;function s4(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function Xp(e){return function(n,a,s){if(!n||!a||typeof n!="object"||typeof a!="object")return e(n,a,s);var i=s.cache,l=i.get(n),d=i.get(a);if(l&&d)return l===a&&d===n;i.set(n,a),i.set(a,n);var u=e(n,a,s);return i.delete(n),i.delete(a),u}}function i4(e){return cX(e).concat(dX(e))}var hX=Object.hasOwn||function(e,t){return uX.call(e,t)};function Zl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var fX="__v",pX="__o",mX="_owner",o4=Object.getOwnPropertyDescriptor,l4=Object.keys;function xX(e,t,n){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function gX(e,t){return Zl(e.getTime(),t.getTime())}function yX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function bX(e,t){return e===t}function c4(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),l,d,u=0;(l=i.next())&&!l.done;){for(var h=t.entries(),p=!1,m=0;(d=h.next())&&!d.done;){if(s[m]){m++;continue}var g=l.value,b=d.value;if(n.equals(g[0],b[0],u,m,e,t,n)&&n.equals(g[1],b[1],g[0],b[0],e,t,n)){p=s[m]=!0;break}m++}if(!p)return!1;u++}return!0}var vX=Zl;function jX(e,t,n){var a=l4(e),s=a.length;if(l4(t).length!==s)return!1;for(;s-- >0;)if(!bD(e,t,n,a[s]))return!1;return!0}function nh(e,t,n){var a=i4(e),s=a.length;if(i4(t).length!==s)return!1;for(var i,l,d;s-- >0;)if(i=a[s],!bD(e,t,n,i)||(l=o4(e,i),d=o4(t,i),(l||d)&&(!l||!d||l.configurable!==d.configurable||l.enumerable!==d.enumerable||l.writable!==d.writable)))return!1;return!0}function wX(e,t){return Zl(e.valueOf(),t.valueOf())}function SX(e,t){return e.source===t.source&&e.flags===t.flags}function d4(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),l,d;(l=i.next())&&!l.done;){for(var u=t.values(),h=!1,p=0;(d=u.next())&&!d.done;){if(!s[p]&&n.equals(l.value,d.value,l.value,d.value,e,t,n)){h=s[p]=!0;break}p++}if(!h)return!1}return!0}function NX(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function TX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function bD(e,t,n,a){return(a===mX||a===pX||a===fX)&&(e.$$typeof||t.$$typeof)?!0:hX(t,a)&&n.equals(e[a],t[a],a,a,e,t,n)}var CX="[object Arguments]",AX="[object Boolean]",EX="[object Date]",OX="[object Error]",kX="[object Map]",_X="[object Number]",IX="[object Object]",DX="[object RegExp]",RX="[object Set]",PX="[object String]",MX="[object URL]",BX=Array.isArray,u4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,h4=Object.assign,FX=Object.prototype.toString.call.bind(Object.prototype.toString);function LX(e){var t=e.areArraysEqual,n=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,d=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,h=e.areRegExpsEqual,p=e.areSetsEqual,m=e.areTypedArraysEqual,g=e.areUrlsEqual;return function(j,v,y){if(j===v)return!0;if(j==null||v==null)return!1;var A=typeof j;if(A!==typeof v)return!1;if(A!=="object")return A==="number"?l(j,v,y):A==="function"?s(j,v,y):!1;var E=j.constructor;if(E!==v.constructor)return!1;if(E===Object)return d(j,v,y);if(BX(j))return t(j,v,y);if(u4!=null&&u4(j))return m(j,v,y);if(E===Date)return n(j,v,y);if(E===RegExp)return h(j,v,y);if(E===Map)return i(j,v,y);if(E===Set)return p(j,v,y);var O=FX(j);return O===EX?n(j,v,y):O===DX?h(j,v,y):O===kX?i(j,v,y):O===RX?p(j,v,y):O===IX?typeof j.then!="function"&&typeof v.then!="function"&&d(j,v,y):O===MX?g(j,v,y):O===OX?a(j,v,y):O===CX?d(j,v,y):O===AX||O===_X||O===PX?u(j,v,y):!1}}function $X(e){var t=e.circular,n=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?nh:xX,areDatesEqual:gX,areErrorsEqual:yX,areFunctionsEqual:bX,areMapsEqual:a?s4(c4,nh):c4,areNumbersEqual:vX,areObjectsEqual:a?nh:jX,arePrimitiveWrappersEqual:wX,areRegExpsEqual:SX,areSetsEqual:a?s4(d4,nh):d4,areTypedArraysEqual:a?nh:NX,areUrlsEqual:TX};if(n&&(s=h4({},s,n(s))),t){var i=Xp(s.areArraysEqual),l=Xp(s.areMapsEqual),d=Xp(s.areObjectsEqual),u=Xp(s.areSetsEqual);s=h4({},s,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:d,areSetsEqual:u})}return s}function zX(e){return function(t,n,a,s,i,l,d){return e(t,n,d)}}function UX(e){var t=e.circular,n=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(u,h){var p=a(),m=p.cache,g=m===void 0?t?new WeakMap:void 0:m,b=p.meta;return n(u,h,{cache:g,equals:s,meta:b,strict:i})};if(t)return function(u,h){return n(u,h,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var l={cache:void 0,equals:s,meta:void 0,strict:i};return function(u,h){return n(u,h,l)}}var qX=nl();nl({strict:!0});nl({circular:!0});nl({circular:!0,strict:!0});nl({createInternalComparator:function(){return Zl}});nl({strict:!0,createInternalComparator:function(){return Zl}});nl({circular:!0,createInternalComparator:function(){return Zl}});nl({circular:!0,createInternalComparator:function(){return Zl},strict:!0});function nl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,a=e.createInternalComparator,s=e.createState,i=e.strict,l=i===void 0?!1:i,d=$X(e),u=LX(d),h=a?a(u):zX(u);return UX({circular:n,comparator:u,createState:s,equals:h,strict:l})}function WX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function f4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function s(i){n<0&&(n=i),i-n>t?(e(i),n=-1):WX(s)};requestAnimationFrame(a)}function O2(e){"@babel/helpers - typeof";return O2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O2(e)}function HX(e){return YX(e)||VX(e)||KX(e)||GX()}function GX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KX(e,t){if(e){if(typeof e=="string")return p4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p4(e,t)}}function p4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function VX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YX(e){if(Array.isArray(e))return e}function XX(){var e={},t=function(){return null},n=!1,a=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,d=HX(l),u=d[0],h=d.slice(1);if(typeof u=="number"){f4(s.bind(null,h),u);return}s(u),f4(s.bind(null,h));return}O2(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function m4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function x4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(n),!0).forEach(function(a){vD(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vD(e,t,n){return t=QX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QX(e){var t=JX(e,"string");return Yh(t)==="symbol"?t:String(t)}function JX(e,t){if(Yh(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Yh(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZX=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},eQ=function(t){return t},tQ=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},mh=function(t,n){return Object.keys(n).reduce(function(a,s){return x4(x4({},a),{},vD({},s,t(s,n[s])))},{})},g4=function(t,n,a){return t.map(function(s){return"".concat(tQ(s)," ").concat(n,"ms ").concat(a)}).join(",")};function rQ(e,t){return sQ(e)||aQ(e,t)||jD(e,t)||nQ()}function nQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aQ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function sQ(e){if(Array.isArray(e))return e}function iQ(e){return cQ(e)||lQ(e)||jD(e)||oQ()}function oQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jD(e,t){if(e){if(typeof e=="string")return k2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k2(e,t)}}function lQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cQ(e){if(Array.isArray(e))return k2(e)}function k2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Km=1e-4,wD=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},SD=function(t,n){return t.map(function(a,s){return a*Math.pow(n,s)}).reduce(function(a,s){return a+s})},y4=function(t,n){return function(a){var s=wD(t,n);return SD(s,a)}},dQ=function(t,n){return function(a){var s=wD(t,n),i=[].concat(iQ(s.map(function(l,d){return l*d}).slice(1)),[0]);return SD(i,a)}},b4=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0],i=n[1],l=n[2],d=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,l=1,d=1;break;case"ease":s=.25,i=.1,l=.25,d=1;break;case"ease-in":s=.42,i=0,l=1,d=1;break;case"ease-out":s=.42,i=0,l=.58,d=1;break;case"ease-in-out":s=0,i=0,l=.58,d=1;break;default:{var u=n[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var h=u[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),p=rQ(h,4);s=p[0],i=p[1],l=p[2],d=p[3]}}}var m=y4(s,l),g=y4(i,d),b=dQ(s,l),j=function(A){return A>1?1:A<0?0:A},v=function(A){for(var E=A>1?1:A,O=E,S=0;S<8;++S){var C=m(O)-E,k=b(O);if(Math.abs(C-E)<Km||k<Km)return g(O);O=j(O-C/k)}return g(O)};return v.isStepper=!1,v},uQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,a=n===void 0?100:n,s=t.damping,i=s===void 0?8:s,l=t.dt,d=l===void 0?17:l,u=function(p,m,g){var b=-(p-m)*a,j=g*i,v=g+(b-j)*d/1e3,y=g*d/1e3+p;return Math.abs(y-m)<Km&&Math.abs(v)<Km?[m,0]:[y,v]};return u.isStepper=!0,u.dt=d,u},hQ=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return b4(s);case"spring":return uQ();default:if(s.split("(")[0]==="cubic-bezier")return b4(s)}return typeof s=="function"?s:null};function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function v4(e){return mQ(e)||pQ(e)||ND(e)||fQ()}function fQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mQ(e){if(Array.isArray(e))return I2(e)}function j4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(n),!0).forEach(function(a){_2(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _2(e,t,n){return t=xQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xQ(e){var t=gQ(e,"string");return Xh(t)==="symbol"?t:String(t)}function gQ(e,t){if(Xh(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Xh(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yQ(e,t){return jQ(e)||vQ(e,t)||ND(e,t)||bQ()}function bQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ND(e,t){if(e){if(typeof e=="string")return I2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I2(e,t)}}function I2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function vQ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function jQ(e){if(Array.isArray(e))return e}var Vm=function(t,n,a){return t+(n-t)*a},D2=function(t){var n=t.from,a=t.to;return n!==a},wQ=function e(t,n,a){var s=mh(function(i,l){if(D2(l)){var d=t(l.from,l.to,l.velocity),u=yQ(d,2),h=u[0],p=u[1];return na(na({},l),{},{from:h,velocity:p})}return l},n);return a<1?mh(function(i,l){return D2(l)?na(na({},l),{},{velocity:Vm(l.velocity,s[i].velocity,a),from:Vm(l.from,s[i].from,a)}):l},n):e(t,s,a-1)};const SQ=function(e,t,n,a,s){var i=ZX(e,t),l=i.reduce(function(y,A){return na(na({},y),{},_2({},A,[e[A],t[A]]))},{}),d=i.reduce(function(y,A){return na(na({},y),{},_2({},A,{from:e[A],velocity:0,to:t[A]}))},{}),u=-1,h,p,m=function(){return null},g=function(){return mh(function(A,E){return E.from},d)},b=function(){return!Object.values(d).filter(D2).length},j=function(A){h||(h=A);var E=A-h,O=E/n.dt;d=wQ(n,d,O),s(na(na(na({},e),t),g())),h=A,b()||(u=requestAnimationFrame(m))},v=function(A){p||(p=A);var E=(A-p)/a,O=mh(function(C,k){return Vm.apply(void 0,v4(k).concat([n(E)]))},l);if(s(na(na(na({},e),t),O)),E<1)u=requestAnimationFrame(m);else{var S=mh(function(C,k){return Vm.apply(void 0,v4(k).concat([n(1)]))},l);s(na(na(na({},e),t),S))}};return m=n.isStepper?j:v,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(u)}}};function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}var NQ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function TQ(e,t){if(e==null)return{};var n=CQ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function CQ(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Z1(e){return kQ(e)||OQ(e)||EQ(e)||AQ()}function AQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(e,t){if(e){if(typeof e=="string")return R2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R2(e,t)}}function OQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kQ(e){if(Array.isArray(e))return R2(e)}function R2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function w4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w4(Object(n),!0).forEach(function(a){dh(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dh(e,t,n){return t=TD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IQ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,TD(a.key),a)}}function DQ(e,t,n){return t&&IQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TD(e){var t=RQ(e,"string");return bd(t)==="symbol"?t:String(t)}function RQ(e,t){if(bd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(bd(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P2(e,t)}function P2(e,t){return P2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},P2(e,t)}function MQ(e){var t=BQ();return function(){var a=Ym(e),s;if(t){var i=Ym(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return M2(this,s)}}function M2(e,t){if(t&&(bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B2(e)}function B2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ym(e)}var io=function(e){PQ(n,e);var t=MQ(n);function n(a,s){var i;_Q(this,n),i=t.call(this,a,s);var l=i.props,d=l.isActive,u=l.attributeName,h=l.from,p=l.to,m=l.steps,g=l.children,b=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(B2(i)),i.changeStyle=i.changeStyle.bind(B2(i)),!d||b<=0)return i.state={style:{}},typeof g=="function"&&(i.state={style:p}),M2(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof g=="function")return i.state={style:h},M2(i);i.state={style:u?dh({},u,h):h}}else i.state={style:{}};return i}return DQ(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,l=s.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,l=i.isActive,d=i.canBegin,u=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,g=this.state.style;if(d){if(!l){var b={style:u?dh({},u,p):p};this.state&&g&&(u&&g[u]!==p||!u&&g!==p)&&this.setState(b);return}if(!(qX(s.to,p)&&s.canBegin&&s.isActive)){var j=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=j||h?m:s.to;if(this.state&&g){var y={style:u?dh({},u,v):v};(u&&g[u]!==v||!u&&g!==v)&&this.setState(y)}this.runAnimation(Ws(Ws({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,l=s.from,d=s.to,u=s.duration,h=s.easing,p=s.begin,m=s.onAnimationEnd,g=s.onAnimationStart,b=SQ(l,d,hQ(h),u,this.changeStyle),j=function(){i.stopJSAnimation=b()};this.manager.start([g,p,j,u,m])}},{key:"runStepAnimation",value:function(s){var i=this,l=s.steps,d=s.begin,u=s.onAnimationStart,h=l[0],p=h.style,m=h.duration,g=m===void 0?0:m,b=function(v,y,A){if(A===0)return v;var E=y.duration,O=y.easing,S=O===void 0?"ease":O,C=y.style,k=y.properties,I=y.onAnimationEnd,z=A>0?l[A-1]:y,B=k||Object.keys(C);if(typeof S=="function"||S==="spring")return[].concat(Z1(v),[i.runJSAnimation.bind(i,{from:z.style,to:C,duration:E,easing:S}),E]);var M=g4(B,E,S),F=Ws(Ws(Ws({},z.style),C),{},{transition:M});return[].concat(Z1(v),[F,E,I]).filter(eQ)};return this.manager.start([u].concat(Z1(l.reduce(b,[p,Math.max(g,d)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=XX());var i=s.begin,l=s.duration,d=s.attributeName,u=s.to,h=s.easing,p=s.onAnimationStart,m=s.onAnimationEnd,g=s.steps,b=s.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof h=="function"||typeof b=="function"||h==="spring"){this.runJSAnimation(s);return}if(g.length>1){this.runStepAnimation(s);return}var v=d?dh({},d,u):u,y=g4(Object.keys(v),l,h);j.start([p,i,Ws(Ws({},v),{},{transition:y}),l,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var l=s.duration;s.attributeName,s.easing;var d=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var u=TQ(s,NQ),h=w.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!d||h===0||l<=0)return i;var m=function(b){var j=b.props,v=j.style,y=v===void 0?{}:v,A=j.className,E=w.cloneElement(b,Ws(Ws({},u),{},{style:Ws(Ws({},y),p),className:A}));return E};return h===1?m(w.Children.only(i)):_e.createElement("div",null,w.Children.map(i,function(g){return m(g)}))}}]),n}(w.PureComponent);io.displayName="Animate";io.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};io.propTypes={from:Dr.oneOfType([Dr.object,Dr.string]),to:Dr.oneOfType([Dr.object,Dr.string]),attributeName:Dr.string,duration:Dr.number,begin:Dr.number,easing:Dr.oneOfType([Dr.string,Dr.func]),steps:Dr.arrayOf(Dr.shape({duration:Dr.number.isRequired,style:Dr.object.isRequired,easing:Dr.oneOfType([Dr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Dr.func]),properties:Dr.arrayOf("string"),onAnimationEnd:Dr.func})),children:Dr.oneOfType([Dr.node,Dr.func]),isActive:Dr.bool,canBegin:Dr.bool,onAnimationEnd:Dr.func,shouldReAnimate:Dr.bool,onAnimationStart:Dr.func,onAnimationReStart:Dr.func};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xm.apply(this,arguments)}function FQ(e,t){return UQ(e)||zQ(e,t)||$Q(e,t)||LQ()}function LQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Q(e,t){if(e){if(typeof e=="string")return S4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S4(e,t)}}function S4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function zQ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function UQ(e){if(Array.isArray(e))return e}function N4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function T4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N4(Object(n),!0).forEach(function(a){qQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qQ(e,t,n){return t=WQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WQ(e){var t=HQ(e,"string");return Qh(t)=="symbol"?t:t+""}function HQ(e,t){if(Qh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Qh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C4=function(t,n,a,s,i){var l=Math.min(Math.abs(a)/2,Math.abs(s)/2),d=s>=0?1:-1,u=a>=0?1:-1,h=s>=0&&a>=0||s<0&&a<0?1:0,p;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,b=4;g<b;g++)m[g]=i[g]>l?l:i[g];p="M".concat(t,",").concat(n+d*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(t+u*m[0],",").concat(n)),p+="L ".concat(t+a-u*m[1],",").concat(n),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(t+a,",").concat(n+d*m[1])),p+="L ".concat(t+a,",").concat(n+s-d*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(t+a-u*m[2],",").concat(n+s)),p+="L ".concat(t+u*m[3],",").concat(n+s),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(t,",").concat(n+s-d*m[3])),p+="Z"}else if(l>0&&i===+i&&i>0){var j=Math.min(l,i);p="M ".concat(t,",").concat(n+d*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(t+u*j,",").concat(n,`
            L `).concat(t+a-u*j,",").concat(n,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(t+a,",").concat(n+d*j,`
            L `).concat(t+a,",").concat(n+s-d*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(t+a-u*j,",").concat(n+s,`
            L `).concat(t+u*j,",").concat(n+s,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(t,",").concat(n+s-d*j," Z")}else p="M ".concat(t,",").concat(n," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return p},GQ=function(t,n){if(!t||!n)return!1;var a=t.x,s=t.y,i=n.x,l=n.y,d=n.width,u=n.height;if(Math.abs(d)>0&&Math.abs(u)>0){var h=Math.min(i,i+d),p=Math.max(i,i+d),m=Math.min(l,l+u),g=Math.max(l,l+u);return a>=h&&a<=p&&s>=m&&s<=g}return!1},KQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TS=function(t){var n=T4(T4({},KQ),t),a=w.useRef(),s=w.useState(-1),i=FQ(s,2),l=i[0],d=i[1];w.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var S=a.current.getTotalLength();S&&d(S)}catch{}},[]);var u=n.x,h=n.y,p=n.width,m=n.height,g=n.radius,b=n.className,j=n.animationEasing,v=n.animationDuration,y=n.animationBegin,A=n.isAnimationActive,E=n.isUpdateAnimationActive;if(u!==+u||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var O=Nr("recharts-rectangle",b);return E?_e.createElement(io,{canBegin:l>0,from:{width:p,height:m,x:u,y:h},to:{width:p,height:m,x:u,y:h},duration:v,animationEasing:j,isActive:E},function(S){var C=S.width,k=S.height,I=S.x,z=S.y;return _e.createElement(io,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:A,easing:j},_e.createElement("path",Xm({},gr(n,!0),{className:O,d:C4(I,z,C,k,g),ref:a})))}):_e.createElement("path",Xm({},gr(n,!0),{className:O,d:C4(u,h,p,m,g)}))};function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},F2.apply(this,arguments)}var CS=function(t){var n=t.cx,a=t.cy,s=t.r,i=t.className,l=Nr("recharts-dot",i);return n===+n&&a===+a&&s===+s?_e.createElement("circle",F2({},gr(t,!1),ym(t),{className:l,cx:n,cy:a,r:s})):null};function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}var VQ=["x","y","top","left","width","height","className"];function L2(){return L2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},L2.apply(this,arguments)}function A4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function YQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A4(Object(n),!0).forEach(function(a){XQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XQ(e,t,n){return t=QQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QQ(e){var t=JQ(e,"string");return Jh(t)=="symbol"?t:t+""}function JQ(e,t){if(Jh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Jh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZQ(e,t){if(e==null)return{};var n=eJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function eJ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var tJ=function(t,n,a,s,i,l){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(l,",").concat(n,"h").concat(a)},rJ=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,l=t.top,d=l===void 0?0:l,u=t.left,h=u===void 0?0:u,p=t.width,m=p===void 0?0:p,g=t.height,b=g===void 0?0:g,j=t.className,v=ZQ(t,VQ),y=YQ({x:a,y:i,top:d,left:h,width:m,height:b},v);return!St(a)||!St(i)||!St(m)||!St(b)||!St(d)||!St(h)?null:_e.createElement("path",L2({},gr(y,!0),{className:Nr("recharts-cross",j),d:tJ(a,i,m,b,d,h)}))},ej,E4;function nJ(){if(E4)return ej;E4=1;var e=H5(),t=e(Object.getPrototypeOf,Object);return ej=t,ej}var tj,O4;function aJ(){if(O4)return tj;O4=1;var e=uo(),t=nJ(),n=ho(),a="[object Object]",s=Function.prototype,i=Object.prototype,l=s.toString,d=i.hasOwnProperty,u=l.call(Object);function h(p){if(!n(p)||e(p)!=a)return!1;var m=t(p);if(m===null)return!0;var g=d.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&l.call(g)==u}return tj=h,tj}var sJ=aJ();const iJ=$r(sJ);var rj,k4;function oJ(){if(k4)return rj;k4=1;var e=uo(),t=ho(),n="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==n}return rj=a,rj}var lJ=oJ();const cJ=$r(lJ);function Zh(e){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(e)}function Qm(){return Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qm.apply(this,arguments)}function dJ(e,t){return pJ(e)||fJ(e,t)||hJ(e,t)||uJ()}function uJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hJ(e,t){if(e){if(typeof e=="string")return _4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _4(e,t)}}function _4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function fJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function pJ(e){if(Array.isArray(e))return e}function I4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function D4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I4(Object(n),!0).forEach(function(a){mJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mJ(e,t,n){return t=xJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xJ(e){var t=gJ(e,"string");return Zh(t)=="symbol"?t:t+""}function gJ(e,t){if(Zh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Zh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R4=function(t,n,a,s,i){var l=a-s,d;return d="M ".concat(t,",").concat(n),d+="L ".concat(t+a,",").concat(n),d+="L ".concat(t+a-l/2,",").concat(n+i),d+="L ".concat(t+a-l/2-s,",").concat(n+i),d+="L ".concat(t,",").concat(n," Z"),d},yJ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bJ=function(t){var n=D4(D4({},yJ),t),a=w.useRef(),s=w.useState(-1),i=dJ(s,2),l=i[0],d=i[1];w.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var O=a.current.getTotalLength();O&&d(O)}catch{}},[]);var u=n.x,h=n.y,p=n.upperWidth,m=n.lowerWidth,g=n.height,b=n.className,j=n.animationEasing,v=n.animationDuration,y=n.animationBegin,A=n.isUpdateAnimationActive;if(u!==+u||h!==+h||p!==+p||m!==+m||g!==+g||p===0&&m===0||g===0)return null;var E=Nr("recharts-trapezoid",b);return A?_e.createElement(io,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:g,x:u,y:h},to:{upperWidth:p,lowerWidth:m,height:g,x:u,y:h},duration:v,animationEasing:j,isActive:A},function(O){var S=O.upperWidth,C=O.lowerWidth,k=O.height,I=O.x,z=O.y;return _e.createElement(io,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:j},_e.createElement("path",Qm({},gr(n,!0),{className:E,d:R4(I,z,S,C,k),ref:a})))}):_e.createElement("g",null,_e.createElement("path",Qm({},gr(n,!0),{className:E,d:R4(u,h,p,m,g)})))},vJ=["option","shapeType","propTransformer","activeClassName","isActive"];function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function jJ(e,t){if(e==null)return{};var n=wJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function wJ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function P4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Jm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(n),!0).forEach(function(a){SJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SJ(e,t,n){return t=NJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NJ(e){var t=TJ(e,"string");return ef(t)=="symbol"?t:t+""}function TJ(e,t){if(ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ef(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CJ(e,t){return Jm(Jm({},t),e)}function AJ(e,t){return e==="symbols"}function M4(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return _e.createElement(TS,n);case"trapezoid":return _e.createElement(bJ,n);case"sector":return _e.createElement(yD,n);case"symbols":if(AJ(t))return _e.createElement(Ww,n);break;default:return null}}function EJ(e){return w.isValidElement(e)?e.props:e}function OJ(e){var t=e.option,n=e.shapeType,a=e.propTransformer,s=a===void 0?CJ:a,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,d=e.isActive,u=jJ(e,vJ),h;if(w.isValidElement(t))h=w.cloneElement(t,Jm(Jm({},u),EJ(t)));else if(dr(t))h=t(u);else if(iJ(t)&&!cJ(t)){var p=s(t,u);h=_e.createElement(M4,{shapeType:n,elementProps:p})}else{var m=u;h=_e.createElement(M4,{shapeType:n,elementProps:m})}return d?_e.createElement(vn,{className:l},h):h}function r0(e,t){return t!=null&&"trapezoids"in e.props}function n0(e,t){return t!=null&&"sectors"in e.props}function tf(e,t){return t!=null&&"points"in e.props}function kJ(e,t){var n,a,s=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function _J(e,t){var n=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return n&&a}function IJ(e,t){var n=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return n&&a&&s}function DJ(e,t){var n;return r0(e,t)?n=kJ:n0(e,t)?n=_J:tf(e,t)&&(n=IJ),n}function RJ(e,t){var n;return r0(e,t)?n="trapezoids":n0(e,t)?n="sectors":tf(e,t)&&(n="points"),n}function PJ(e,t){if(r0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(n0(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return tf(e,t)?t.payload:{}}function MJ(e){var t=e.activeTooltipItem,n=e.graphicalItem,a=e.itemData,s=RJ(n,t),i=PJ(n,t),l=a.filter(function(u,h){var p=Zx(i,u),m=n.props[s].filter(function(j){var v=DJ(n,t);return v(j,t)}),g=n.props[s].indexOf(m[m.length-1]),b=h===g;return p&&b}),d=a.indexOf(l[l.length-1]);return d}var nj,B4;function BJ(){if(B4)return nj;B4=1;var e=Math.ceil,t=Math.max;function n(a,s,i,l){for(var d=-1,u=t(e((s-a)/(i||1)),0),h=Array(u);u--;)h[l?u:++d]=a,a+=i;return h}return nj=n,nj}var aj,F4;function CD(){if(F4)return aj;F4=1;var e=o8(),t=1/0,n=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*n}return s===s?s:0}return aj=a,aj}var sj,L4;function FJ(){if(L4)return sj;L4=1;var e=BJ(),t=Wx(),n=CD();function a(s){return function(i,l,d){return d&&typeof d!="number"&&t(i,l,d)&&(l=d=void 0),i=n(i),l===void 0?(l=i,i=0):l=n(l),d=d===void 0?i<l?1:-1:n(d),e(i,l,d,s)}}return sj=a,sj}var ij,$4;function LJ(){if($4)return ij;$4=1;var e=FJ(),t=e();return ij=t,ij}var $J=LJ();const Zm=$r($J);function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function z4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function U4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z4(Object(n),!0).forEach(function(a){AD(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AD(e,t,n){return t=zJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zJ(e){var t=UJ(e,"string");return rf(t)=="symbol"?t:t+""}function UJ(e,t){if(rf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(rf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qJ=["Webkit","Moz","O","ms"],WJ=function(t,n){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=qJ.reduce(function(i,l){return U4(U4({},i),{},AD({},l+a,n))},{});return s[t]=n,s};function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ex.apply(this,arguments)}function q4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function oj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(n),!0).forEach(function(a){os(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function HJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W4(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,OD(a.key),a)}}function GJ(e,t,n){return t&&W4(e.prototype,t),n&&W4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function KJ(e,t,n){return t=tx(t),VJ(e,ED()?Reflect.construct(t,n||[],tx(e).constructor):t.apply(e,n))}function VJ(e,t){if(t&&(vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YJ(e)}function YJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ED(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ED=function(){return!!e})()}function tx(e){return tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tx(e)}function XJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$2(e,t)}function $2(e,t){return $2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},$2(e,t)}function os(e,t,n){return t=OD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OD(e){var t=QJ(e,"string");return vd(t)=="symbol"?t:t+""}function QJ(e,t){if(vd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(vd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JJ=function(t){var n=t.data,a=t.startIndex,s=t.endIndex,i=t.x,l=t.width,d=t.travellerWidth;if(!n||!n.length)return{};var u=n.length,h=fh().domain(Zm(0,u)).range([i,i+l-d]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(a),endX:h(s),scale:h,scaleValues:p}},H4=function(t){return t.changedTouches&&!!t.changedTouches.length},jd=function(e){function t(n){var a;return HJ(this,t),a=KJ(this,t,[n]),os(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),os(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),os(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,l=s.onDragEnd,d=s.startIndex;l==null||l({endIndex:i,startIndex:d})}),a.detachDragEndListener()}),os(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),os(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),os(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),os(a,"handleSlideDragStart",function(s){var i=H4(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return XJ(t,e),GJ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,l=this.state.scaleValues,d=this.props,u=d.gap,h=d.data,p=h.length-1,m=Math.min(s,i),g=Math.max(s,i),b=t.getIndexInRange(l,m),j=t.getIndexInRange(l,g);return{startIndex:b-b%u,endIndex:j===p?p:j-j%u}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,l=s.tickFormatter,d=s.dataKey,u=ps(i[a],d,a);return dr(l)?l(u,a):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,l=s.startX,d=s.endX,u=this.props,h=u.x,p=u.width,m=u.travellerWidth,g=u.startIndex,b=u.endIndex,j=u.onChange,v=a.pageX-i;v>0?v=Math.min(v,h+p-m-d,h+p-m-l):v<0&&(v=Math.max(v,h-l,h-d));var y=this.getIndex({startX:l+v,endX:d+v});(y.startIndex!==g||y.endIndex!==b)&&j&&j(y),this.setState({startX:l+v,endX:d+v,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=H4(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,l=s.movingTravellerId,d=s.endX,u=s.startX,h=this.state[l],p=this.props,m=p.x,g=p.width,b=p.travellerWidth,j=p.onChange,v=p.gap,y=p.data,A={startX:this.state.startX,endX:this.state.endX},E=a.pageX-i;E>0?E=Math.min(E,m+g-b-h):E<0&&(E=Math.max(E,m-h)),A[l]=h+E;var O=this.getIndex(A),S=O.startIndex,C=O.endIndex,k=function(){var z=y.length-1;return l==="startX"&&(d>u?S%v===0:C%v===0)||d<u&&C===z||l==="endX"&&(d>u?C%v===0:S%v===0)||d>u&&C===z};this.setState(os(os({},l,h+E),"brushMoveStartX",a.pageX),function(){j&&k()&&j(O)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,l=this.state,d=l.scaleValues,u=l.startX,h=l.endX,p=this.state[s],m=d.indexOf(p);if(m!==-1){var g=m+a;if(!(g===-1||g>=d.length)){var b=d[g];s==="startX"&&b>=h||s==="endX"&&b<=u||this.setState(os({},s,b),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.fill,h=a.stroke;return _e.createElement("rect",{stroke:h,fill:u,x:s,y:i,width:l,height:d})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.data,h=a.children,p=a.padding,m=w.Children.only(h);return m?_e.cloneElement(m,{x:s,y:i,width:l,height:d,margin:p,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,l,d=this,u=this.props,h=u.y,p=u.travellerWidth,m=u.height,g=u.traveller,b=u.ariaLabel,j=u.data,v=u.startIndex,y=u.endIndex,A=Math.max(a,this.props.x),E=oj(oj({},gr(this.props,!1)),{},{x:A,y:h,width:p,height:m}),O=b||"Min value: ".concat((i=j[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=j[y])===null||l===void 0?void 0:l.name);return _e.createElement(vn,{tabIndex:0,role:"slider","aria-label":O,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),d.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,s))},onFocus:function(){d.setState({isTravellerFocused:!0})},onBlur:function(){d.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,E))}},{key:"renderSlide",value:function(a,s){var i=this.props,l=i.y,d=i.height,u=i.stroke,h=i.travellerWidth,p=Math.min(a,s)+h,m=Math.max(Math.abs(s-a)-h,0);return _e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:p,y:l,width:m,height:d})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,l=a.y,d=a.height,u=a.travellerWidth,h=a.stroke,p=this.state,m=p.startX,g=p.endX,b=5,j={pointerEvents:"none",fill:h};return _e.createElement(vn,{className:"recharts-brush-texts"},_e.createElement(km,ex({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,g)-b,y:l+d/2},j),this.getTextOfTick(s)),_e.createElement(km,ex({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,g)+u+b,y:l+d/2},j),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,l=a.children,d=a.x,u=a.y,h=a.width,p=a.height,m=a.alwaysShowText,g=this.state,b=g.startX,j=g.endX,v=g.isTextActive,y=g.isSlideMoving,A=g.isTravellerMoving,E=g.isTravellerFocused;if(!s||!s.length||!St(d)||!St(u)||!St(h)||!St(p)||h<=0||p<=0)return null;var O=Nr("recharts-brush",i),S=_e.Children.count(l)===1,C=WJ("userSelect","none");return _e.createElement(vn,{className:O,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(b,j),this.renderTravellerLayer(b,"startX"),this.renderTravellerLayer(j,"endX"),(v||y||A||E||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,l=a.width,d=a.height,u=a.stroke,h=Math.floor(i+d/2)-1;return _e.createElement(_e.Fragment,null,_e.createElement("rect",{x:s,y:i,width:l,height:d,fill:u,stroke:"none"}),_e.createElement("line",{x1:s+1,y1:h,x2:s+l-1,y2:h,fill:"none",stroke:"#fff"}),_e.createElement("line",{x1:s+1,y1:h+2,x2:s+l-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return _e.isValidElement(a)?i=_e.cloneElement(a,s):dr(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,l=a.width,d=a.x,u=a.travellerWidth,h=a.updateId,p=a.startIndex,m=a.endIndex;if(i!==s.prevData||h!==s.prevUpdateId)return oj({prevData:i,prevTravellerWidth:u,prevUpdateId:h,prevX:d,prevWidth:l},i&&i.length?JJ({data:i,width:l,x:d,travellerWidth:u,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(l!==s.prevWidth||d!==s.prevX||u!==s.prevTravellerWidth)){s.scale.range([d,d+l-u]);var g=s.scale.domain().map(function(b){return s.scale(b)});return{prevData:i,prevTravellerWidth:u,prevUpdateId:h,prevX:d,prevWidth:l,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,l=0,d=i-1;d-l>1;){var u=Math.floor((l+d)/2);a[u]>s?d=u:l=u}return s>=a[d]?d:l}}])}(w.PureComponent);os(jd,"displayName","Brush");os(jd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var lj,G4;function ZJ(){if(G4)return lj;G4=1;var e=Qw();function t(n,a){var s;return e(n,function(i,l,d){return s=a(i,l,d),!s}),!!s}return lj=t,lj}var cj,K4;function eZ(){if(K4)return cj;K4=1;var e=F5(),t=el(),n=ZJ(),a=Ya(),s=Wx();function i(l,d,u){var h=a(l)?e:n;return u&&s(l,d,u)&&(d=void 0),h(l,t(d,3))}return cj=i,cj}var tZ=eZ();const rZ=$r(tZ);var wi=function(t,n){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===n},dj,V4;function nZ(){if(V4)return dj;V4=1;var e=r8();function t(n,a,s){a=="__proto__"&&e?e(n,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[a]=s}return dj=t,dj}var uj,Y4;function aZ(){if(Y4)return uj;Y4=1;var e=nZ(),t=e8(),n=el();function a(s,i){var l={};return i=n(i,3),t(s,function(d,u,h){e(l,u,i(d,u,h))}),l}return uj=a,uj}var sZ=aZ();const iZ=$r(sZ);var hj,X4;function oZ(){if(X4)return hj;X4=1;function e(t,n){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!n(t[a],a,t))return!1;return!0}return hj=e,hj}var fj,Q4;function lZ(){if(Q4)return fj;Q4=1;var e=Qw();function t(n,a){var s=!0;return e(n,function(i,l,d){return s=!!a(i,l,d),s}),s}return fj=t,fj}var pj,J4;function cZ(){if(J4)return pj;J4=1;var e=oZ(),t=lZ(),n=el(),a=Ya(),s=Wx();function i(l,d,u){var h=a(l)?e:t;return u&&s(l,d,u)&&(d=void 0),h(l,n(d,3))}return pj=i,pj}var dZ=cZ();const kD=$r(dZ);var uZ=["x","y"];function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function z2(){return z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z2.apply(this,arguments)}function Z4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ah(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z4(Object(n),!0).forEach(function(a){hZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hZ(e,t,n){return t=fZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fZ(e){var t=pZ(e,"string");return nf(t)=="symbol"?t:t+""}function pZ(e,t){if(nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(nf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mZ(e,t){if(e==null)return{};var n=xZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xZ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function gZ(e,t){var n=e.x,a=e.y,s=mZ(e,uZ),i="".concat(n),l=parseInt(i,10),d="".concat(a),u=parseInt(d,10),h="".concat(t.height||s.height),p=parseInt(h,10),m="".concat(t.width||s.width),g=parseInt(m,10);return ah(ah(ah(ah(ah({},t),s),l?{x:l}:{}),u?{y:u}:{}),{},{height:p,width:g,name:t.name,radius:t.radius})}function e6(e){return _e.createElement(OJ,z2({shapeType:"rectangle",propTransformer:gZ,activeClassName:"recharts-active-bar"},e))}var yZ=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=typeof a=="number";return i?t(a,s):(i||Wl(),n)}},bZ=["value","background"],_D;function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function vZ(e,t){if(e==null)return{};var n=jZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function jZ(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rx.apply(this,arguments)}function t6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(n),!0).forEach(function(a){zo(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,DD(a.key),a)}}function SZ(e,t,n){return t&&r6(e.prototype,t),n&&r6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function NZ(e,t,n){return t=nx(t),TZ(e,ID()?Reflect.construct(t,n||[],nx(e).constructor):t.apply(e,n))}function TZ(e,t){if(t&&(wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CZ(e)}function CZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ID(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ID=function(){return!!e})()}function nx(e){return nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nx(e)}function AZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U2(e,t)}function U2(e,t){return U2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},U2(e,t)}function zo(e,t,n){return t=DD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DD(e){var t=EZ(e,"string");return wd(t)=="symbol"?t:t+""}function EZ(e,t){if(wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(wd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ec=function(e){function t(){var n;wZ(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=NZ(this,t,[].concat(s)),zo(n,"state",{isAnimationFinished:!1}),zo(n,"id",jf("recharts-bar-")),zo(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),l&&l()}),zo(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),l&&l()}),n}return AZ(t,e),SZ(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,l=i.shape,d=i.dataKey,u=i.activeIndex,h=i.activeBar,p=gr(this.props,!1);return a&&a.map(function(m,g){var b=g===u,j=b?h:l,v=Cn(Cn(Cn({},p),m),{},{isActive:b,option:j,index:g,dataKey:d,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return _e.createElement(vn,rx({className:"recharts-bar-rectangle"},bm(s.props,m,g),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(g)}),_e.createElement(e6,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,l=s.layout,d=s.isAnimationActive,u=s.animationBegin,h=s.animationDuration,p=s.animationEasing,m=s.animationId,g=this.state.prevData;return _e.createElement(io,{begin:u,duration:h,isActive:d,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var j=b.t,v=i.map(function(y,A){var E=g&&g[A];if(E){var O=Qs(E.x,y.x),S=Qs(E.y,y.y),C=Qs(E.width,y.width),k=Qs(E.height,y.height);return Cn(Cn({},y),{},{x:O(j),y:S(j),width:C(j),height:k(j)})}if(l==="horizontal"){var I=Qs(0,y.height),z=I(j);return Cn(Cn({},y),{},{y:y.y+y.height-z,height:z})}var B=Qs(0,y.width),M=B(j);return Cn(Cn({},y),{},{width:M})});return _e.createElement(vn,null,a.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,l=this.state.prevData;return i&&s&&s.length&&(!l||!Zx(l,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,l=s.dataKey,d=s.activeIndex,u=gr(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,g=vZ(h,bZ);if(!m)return null;var b=Cn(Cn(Cn(Cn(Cn({},g),{},{fill:"#eee"},m),u),bm(a.props,h,p)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:l,index:p,className:"recharts-bar-background-rectangle"});return _e.createElement(e6,rx({key:"background-bar-".concat(p),option:a.props.background,isActive:p===d},b))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,d=i.xAxis,u=i.yAxis,h=i.layout,p=i.children,m=Rs(p,Af);if(!m)return null;var g=h==="vertical"?l[0].height/2:l[0].width/2,b=function(y,A){var E=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:E,errorVal:ps(y,A)}},j={clipPath:a?"url(#clipPath-".concat(s,")"):null};return _e.createElement(vn,j,m.map(function(v){return _e.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:l,xAxis:d,yAxis:u,layout:h,offset:g,dataPointFormatter:b})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,l=a.className,d=a.xAxis,u=a.yAxis,h=a.left,p=a.top,m=a.width,g=a.height,b=a.isAnimationActive,j=a.background,v=a.id;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,A=Nr("recharts-bar",l),E=d&&d.allowDataOverflow,O=u&&u.allowDataOverflow,S=E||O,C=mr(v)?this.id:v;return _e.createElement(vn,{className:A},E||O?_e.createElement("defs",null,_e.createElement("clipPath",{id:"clipPath-".concat(C)},_e.createElement("rect",{x:E?h:h-m/2,y:O?p:p-g/2,width:E?m:m*2,height:O?g:g*2}))):null,_e.createElement(vn,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(C,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,C),(!b||y)&&Ho.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])}(w.PureComponent);_D=ec;zo(ec,"displayName","Bar");zo(ec,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Wd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});zo(ec,"getComposedData",function(e){var t=e.props,n=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,l=e.yAxis,d=e.xAxisTicks,u=e.yAxisTicks,h=e.stackedData,p=e.dataStartIndex,m=e.displayedData,g=e.offset,b=KV(a,n);if(!b)return null;var j=t.layout,v=n.type.defaultProps,y=v!==void 0?Cn(Cn({},v),n.props):n.props,A=y.dataKey,E=y.children,O=y.minPointSize,S=j==="horizontal"?l:i,C=h?S.scale.domain():null,k=tY({numericAxis:S}),I=Rs(E,c8),z=m.map(function(B,M){var F,N,L,P,_,R;h?F=VV(h[p+M],C):(F=ps(B,A),Array.isArray(F)||(F=[k,F]));var W=yZ(O,_D.defaultProps.minPointSize)(F[1],M);if(j==="horizontal"){var G,oe=[l.scale(F[0]),l.scale(F[1])],q=oe[0],V=oe[1];N=L_({axis:i,ticks:d,bandSize:s,offset:b.offset,entry:B,index:M}),L=(G=V??q)!==null&&G!==void 0?G:void 0,P=b.size;var U=q-V;if(_=Number.isNaN(U)?0:U,R={x:N,y:l.y,width:P,height:l.height},Math.abs(W)>0&&Math.abs(_)<Math.abs(W)){var X=ti(_||W)*(Math.abs(W)-Math.abs(_));L-=X,_+=X}}else{var H=[i.scale(F[0]),i.scale(F[1])],Q=H[0],le=H[1];if(N=Q,L=L_({axis:l,ticks:u,bandSize:s,offset:b.offset,entry:B,index:M}),P=le-Q,_=b.size,R={x:i.x,y:L,width:i.width,height:_},Math.abs(W)>0&&Math.abs(P)<Math.abs(W)){var me=ti(P||W)*(Math.abs(W)-Math.abs(P));P+=me}}return Cn(Cn(Cn({},B),{},{x:N,y:L,width:P,height:_,value:h?F:F[1],payload:B,background:R},I&&I[M]&&I[M].props),{},{tooltipPayload:[mD(n,B)],tooltipPosition:{x:N+P/2,y:L+_/2}})});return Cn({data:z,layout:j},g)});function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function OZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RD(a.key),a)}}function kZ(e,t,n){return t&&n6(e.prototype,t),n&&n6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ys(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(n),!0).forEach(function(a){a0(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function a0(e,t,n){return t=RD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RD(e){var t=_Z(e,"string");return af(t)=="symbol"?t:t+""}function _Z(e,t){if(af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(af(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PD=function(t,n,a,s,i){var l=t.width,d=t.height,u=t.layout,h=t.children,p=Object.keys(n),m={left:a.left,leftMirror:a.left,right:l-a.right,rightMirror:l-a.right,top:a.top,topMirror:a.top,bottom:d-a.bottom,bottomMirror:d-a.bottom},g=!!cs(h,ec);return p.reduce(function(b,j){var v=n[j],y=v.orientation,A=v.domain,E=v.padding,O=E===void 0?{}:E,S=v.mirror,C=v.reversed,k="".concat(y).concat(S?"Mirror":""),I,z,B,M,F;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var N=A[1]-A[0],L=1/0,P=v.categoricalDomain.sort(_$);if(P.forEach(function(H,Q){Q>0&&(L=Math.min((H||0)-(P[Q-1]||0),L))}),Number.isFinite(L)){var _=L/N,R=v.layout==="vertical"?a.height:a.width;if(v.padding==="gap"&&(I=_*R/2),v.padding==="no-gap"){var W=Ul(t.barCategoryGap,_*R),G=_*R/2;I=G-W-(G-W)/R*W}}}s==="xAxis"?z=[a.left+(O.left||0)+(I||0),a.left+a.width-(O.right||0)-(I||0)]:s==="yAxis"?z=u==="horizontal"?[a.top+a.height-(O.bottom||0),a.top+(O.top||0)]:[a.top+(O.top||0)+(I||0),a.top+a.height-(O.bottom||0)-(I||0)]:z=v.range,C&&(z=[z[1],z[0]]);var oe=HV(v,i,g),q=oe.scale,V=oe.realScaleType;q.domain(A).range(z),GV(q);var U=eY(q,Ys(Ys({},v),{},{realScaleType:V}));s==="xAxis"?(F=y==="top"&&!S||y==="bottom"&&S,B=a.left,M=m[k]-F*v.height):s==="yAxis"&&(F=y==="left"&&!S||y==="right"&&S,B=m[k]-F*v.width,M=a.top);var X=Ys(Ys(Ys({},v),U),{},{realScaleType:V,x:B,y:M,scale:q,width:s==="xAxis"?a.width:v.width,height:s==="yAxis"?a.height:v.height});return X.bandSize=Wm(X,U),!v.hide&&s==="xAxis"?m[k]+=(F?-1:1)*X.height:v.hide||(m[k]+=(F?-1:1)*X.width),Ys(Ys({},b),{},a0({},j,X))},{})},MD=function(t,n){var a=t.x,s=t.y,i=n.x,l=n.y;return{x:Math.min(a,i),y:Math.min(s,l),width:Math.abs(i-a),height:Math.abs(l-s)}},IZ=function(t){var n=t.x1,a=t.y1,s=t.x2,i=t.y2;return MD({x:n,y:a},{x:s,y:i})},BD=function(){function e(t){OZ(this,e),this.scale=t}return kZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}case"end":{var d=this.bandwidth?this.bandwidth():0;return this.scale(n)+d}default:return this.scale(n)}if(s){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+u}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new e(n)}}])}();a0(BD,"EPS",1e-4);var AS=function(t){var n=Object.keys(t).reduce(function(a,s){return Ys(Ys({},a),{},a0({},s,BD.create(t[s])))},{});return Ys(Ys({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,d=i.position;return iZ(s,function(u,h){return n[h].apply(u,{bandAware:l,position:d})})},isInRange:function(s){return kD(s,function(i,l){return n[l].isInRange(i)})}})};function DZ(e){return(e%180+180)%180}var RZ=function(t){var n=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=DZ(s),l=i*Math.PI/180,d=Math.atan(a/n),u=l>d&&l<Math.PI-d?a/Math.sin(l):n/Math.cos(l);return Math.abs(u)},mj,s6;function PZ(){if(s6)return mj;s6=1;var e=el(),t=wf(),n=Ux();function a(s){return function(i,l,d){var u=Object(i);if(!t(i)){var h=e(l,3);i=n(i),l=function(m){return h(u[m],m,u)}}var p=s(i,l,d);return p>-1?u[h?i[p]:p]:void 0}}return mj=a,mj}var xj,i6;function MZ(){if(i6)return xj;i6=1;var e=CD();function t(n){var a=e(n),s=a%1;return a===a?s?a-s:a:0}return xj=t,xj}var gj,o6;function BZ(){if(o6)return gj;o6=1;var e=Y5(),t=el(),n=MZ(),a=Math.max;function s(i,l,d){var u=i==null?0:i.length;if(!u)return-1;var h=d==null?0:n(d);return h<0&&(h=a(u+h,0)),e(i,t(l,3),h)}return gj=s,gj}var yj,l6;function FZ(){if(l6)return yj;l6=1;var e=PZ(),t=BZ(),n=e(t);return yj=n,yj}var LZ=FZ();const $Z=$r(LZ);var zZ=u5();const UZ=$r(zZ);var qZ=UZ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),ES=w.createContext(void 0),OS=w.createContext(void 0),FD=w.createContext(void 0),LD=w.createContext({}),$D=w.createContext(void 0),zD=w.createContext(0),UD=w.createContext(0),c6=function(t){var n=t.state,a=n.xAxisMap,s=n.yAxisMap,i=n.offset,l=t.clipPathId,d=t.children,u=t.width,h=t.height,p=qZ(i);return _e.createElement(ES.Provider,{value:a},_e.createElement(OS.Provider,{value:s},_e.createElement(LD.Provider,{value:i},_e.createElement(FD.Provider,{value:p},_e.createElement($D.Provider,{value:l},_e.createElement(zD.Provider,{value:h},_e.createElement(UD.Provider,{value:u},d)))))))},WZ=function(){return w.useContext($D)},qD=function(t){var n=w.useContext(ES);n==null&&Wl();var a=n[t];return a==null&&Wl(),a},HZ=function(){var t=w.useContext(ES);return $o(t)},GZ=function(){var t=w.useContext(OS),n=$Z(t,function(a){return kD(a.domain,Number.isFinite)});return n||$o(t)},WD=function(t){var n=w.useContext(OS);n==null&&Wl();var a=n[t];return a==null&&Wl(),a},KZ=function(){var t=w.useContext(FD);return t},VZ=function(){return w.useContext(LD)},kS=function(){return w.useContext(UD)},_S=function(){return w.useContext(zD)};function Sd(e){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}function YZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XZ(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GD(a.key),a)}}function QZ(e,t,n){return t&&XZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JZ(e,t,n){return t=ax(t),ZZ(e,HD()?Reflect.construct(t,n||[],ax(e).constructor):t.apply(e,n))}function ZZ(e,t){if(t&&(Sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eee(e)}function eee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HD=function(){return!!e})()}function ax(e){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ax(e)}function tee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q2(e,t)}function q2(e,t){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},q2(e,t)}function d6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function u6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d6(Object(n),!0).forEach(function(a){IS(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function IS(e,t,n){return t=GD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GD(e){var t=ree(e,"string");return Sd(t)=="symbol"?t:t+""}function ree(e,t){if(Sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Sd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nee(e,t){return oee(e)||iee(e,t)||see(e,t)||aee()}function aee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function see(e,t){if(e){if(typeof e=="string")return h6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h6(e,t)}}function h6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function iee(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function oee(e){if(Array.isArray(e))return e}function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},W2.apply(this,arguments)}var lee=function(t,n){var a;return _e.isValidElement(t)?a=_e.cloneElement(t,n):dr(t)?a=t(n):a=_e.createElement("line",W2({},n,{className:"recharts-reference-line-line"})),a},cee=function(t,n,a,s,i,l,d,u,h){var p=i.x,m=i.y,g=i.width,b=i.height;if(a){var j=h.y,v=t.y.apply(j,{position:l});if(wi(h,"discard")&&!t.y.isInRange(v))return null;var y=[{x:p+g,y:v},{x:p,y:v}];return u==="left"?y.reverse():y}if(n){var A=h.x,E=t.x.apply(A,{position:l});if(wi(h,"discard")&&!t.x.isInRange(E))return null;var O=[{x:E,y:m+b},{x:E,y:m}];return d==="top"?O.reverse():O}if(s){var S=h.segment,C=S.map(function(k){return t.apply(k,{position:l})});return wi(h,"discard")&&rZ(C,function(k){return!t.isInRange(k)})?null:C}return null};function dee(e){var t=e.x,n=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,l=e.shape,d=e.className,u=e.alwaysShow,h=WZ(),p=qD(s),m=WD(i),g=KZ();if(!h||!g)return null;Xi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=AS({x:p.scale,y:m.scale}),j=Mn(t),v=Mn(n),y=a&&a.length===2,A=cee(b,j,v,y,g,e.position,p.orientation,m.orientation,e);if(!A)return null;var E=nee(A,2),O=E[0],S=O.x,C=O.y,k=E[1],I=k.x,z=k.y,B=wi(e,"hidden")?"url(#".concat(h,")"):void 0,M=u6(u6({clipPath:B},gr(e,!0)),{},{x1:S,y1:C,x2:I,y2:z});return _e.createElement(vn,{className:Nr("recharts-reference-line",d)},lee(l,M),ya.renderCallByParent(e,IZ({x1:S,y1:C,x2:I,y2:z})))}var DS=function(e){function t(){return YZ(this,t),JZ(this,t,arguments)}return tee(t,e),QZ(t,[{key:"render",value:function(){return _e.createElement(dee,this.props)}}])}(_e.Component);IS(DS,"displayName","ReferenceLine");IS(DS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},H2.apply(this,arguments)}function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function f6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function p6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f6(Object(n),!0).forEach(function(a){s0(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,VD(a.key),a)}}function fee(e,t,n){return t&&hee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pee(e,t,n){return t=sx(t),mee(e,KD()?Reflect.construct(t,n||[],sx(e).constructor):t.apply(e,n))}function mee(e,t){if(t&&(Nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xee(e)}function xee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KD=function(){return!!e})()}function sx(e){return sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sx(e)}function gee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},G2(e,t)}function s0(e,t,n){return t=VD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VD(e){var t=yee(e,"string");return Nd(t)=="symbol"?t:t+""}function yee(e,t){if(Nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Nd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bee=function(t){var n=t.x,a=t.y,s=t.xAxis,i=t.yAxis,l=AS({x:s.scale,y:i.scale}),d=l.apply({x:n,y:a},{bandAware:!0});return wi(t,"discard")&&!l.isInRange(d)?null:d},i0=function(e){function t(){return uee(this,t),pee(this,t,arguments)}return gee(t,e),fee(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,l=a.r,d=a.alwaysShow,u=a.clipPathId,h=Mn(s),p=Mn(i);if(Xi(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=bee(this.props);if(!m)return null;var g=m.x,b=m.y,j=this.props,v=j.shape,y=j.className,A=wi(this.props,"hidden")?"url(#".concat(u,")"):void 0,E=p6(p6({clipPath:A},gr(this.props,!0)),{},{cx:g,cy:b});return _e.createElement(vn,{className:Nr("recharts-reference-dot",y)},t.renderDot(v,E),ya.renderCallByParent(this.props,{x:g-l,y:b-l,width:2*l,height:2*l}))}}])}(_e.Component);s0(i0,"displayName","ReferenceDot");s0(i0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});s0(i0,"renderDot",function(e,t){var n;return _e.isValidElement(e)?n=_e.cloneElement(e,t):dr(e)?n=e(t):n=_e.createElement(CS,H2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},K2.apply(this,arguments)}function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function m6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function x6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(n),!0).forEach(function(a){o0(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,XD(a.key),a)}}function wee(e,t,n){return t&&jee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function See(e,t,n){return t=ix(t),Nee(e,YD()?Reflect.construct(t,n||[],ix(e).constructor):t.apply(e,n))}function Nee(e,t){if(t&&(Td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tee(e)}function Tee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YD=function(){return!!e})()}function ix(e){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ix(e)}function Cee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V2(e,t)}function V2(e,t){return V2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},V2(e,t)}function o0(e,t,n){return t=XD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XD(e){var t=Aee(e,"string");return Td(t)=="symbol"?t:t+""}function Aee(e,t){if(Td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Td(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eee=function(t,n,a,s,i){var l=i.x1,d=i.x2,u=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var g=AS({x:p.scale,y:m.scale}),b={x:t?g.x.apply(l,{position:"start"}):g.x.rangeMin,y:a?g.y.apply(u,{position:"start"}):g.y.rangeMin},j={x:n?g.x.apply(d,{position:"end"}):g.x.rangeMax,y:s?g.y.apply(h,{position:"end"}):g.y.rangeMax};return wi(i,"discard")&&(!g.isInRange(b)||!g.isInRange(j))?null:MD(b,j)},l0=function(e){function t(){return vee(this,t),See(this,t,arguments)}return Cee(t,e),wee(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,l=a.y1,d=a.y2,u=a.className,h=a.alwaysShow,p=a.clipPathId;Xi(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Mn(s),g=Mn(i),b=Mn(l),j=Mn(d),v=this.props.shape;if(!m&&!g&&!b&&!j&&!v)return null;var y=Eee(m,g,b,j,this.props);if(!y&&!v)return null;var A=wi(this.props,"hidden")?"url(#".concat(p,")"):void 0;return _e.createElement(vn,{className:Nr("recharts-reference-area",u)},t.renderRect(v,x6(x6({clipPath:A},gr(this.props,!0)),y)),ya.renderCallByParent(this.props,y))}}])}(_e.Component);o0(l0,"displayName","ReferenceArea");o0(l0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});o0(l0,"renderRect",function(e,t){var n;return _e.isValidElement(e)?n=_e.cloneElement(e,t):dr(e)?n=e(t):n=_e.createElement(TS,K2({},t,{className:"recharts-reference-area-rect"})),n});function QD(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function Oee(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return RZ(a,n)}function kee(e,t,n){var a=n==="width",s=e.x,i=e.y,l=e.width,d=e.height;return t===1?{start:a?s:i,end:a?s+l:i+d}:{start:a?s+l:i+d,end:a?s:i}}function ox(e,t,n,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function _ee(e,t){return QD(e,t+1)}function Iee(e,t,n,a,s){for(var i=(a||[]).slice(),l=t.start,d=t.end,u=0,h=1,p=l,m=function(){var j=a==null?void 0:a[u];if(j===void 0)return{v:QD(a,h)};var v=u,y,A=function(){return y===void 0&&(y=n(j,v)),y},E=j.coordinate,O=u===0||ox(e,E,A,p,d);O||(u=0,p=l,h+=1),O&&(p=E+e*(A()/2+s),u+=h)},g;h<=i.length;)if(g=m(),g)return g.v;return[]}function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function g6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(n),!0).forEach(function(a){Dee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Dee(e,t,n){return t=Ree(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ree(e){var t=Pee(e,"string");return sf(t)=="symbol"?t:t+""}function Pee(e,t){if(sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(sf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mee(e,t,n,a,s){for(var i=(a||[]).slice(),l=i.length,d=t.start,u=t.end,h=function(g){var b=i[g],j,v=function(){return j===void 0&&(j=n(b,g)),j};if(g===l-1){var y=e*(b.coordinate+e*v()/2-u);i[g]=b=ga(ga({},b),{},{tickCoord:y>0?b.coordinate-y*e:b.coordinate})}else i[g]=b=ga(ga({},b),{},{tickCoord:b.coordinate});var A=ox(e,b.tickCoord,v,d,u);A&&(u=b.tickCoord-e*(v()/2+s),i[g]=ga(ga({},b),{},{isShow:!0}))},p=l-1;p>=0;p--)h(p);return i}function Bee(e,t,n,a,s,i){var l=(a||[]).slice(),d=l.length,u=t.start,h=t.end;if(i){var p=a[d-1],m=n(p,d-1),g=e*(p.coordinate+e*m/2-h);l[d-1]=p=ga(ga({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate});var b=ox(e,p.tickCoord,function(){return m},u,h);b&&(h=p.tickCoord-e*(m/2+s),l[d-1]=ga(ga({},p),{},{isShow:!0}))}for(var j=i?d-1:d,v=function(E){var O=l[E],S,C=function(){return S===void 0&&(S=n(O,E)),S};if(E===0){var k=e*(O.coordinate-e*C()/2-u);l[E]=O=ga(ga({},O),{},{tickCoord:k<0?O.coordinate-k*e:O.coordinate})}else l[E]=O=ga(ga({},O),{},{tickCoord:O.coordinate});var I=ox(e,O.tickCoord,C,u,h);I&&(u=O.tickCoord+e*(C()/2+s),l[E]=ga(ga({},O),{},{isShow:!0}))},y=0;y<j;y++)v(y);return l}function RS(e,t,n){var a=e.tick,s=e.ticks,i=e.viewBox,l=e.minTickGap,d=e.orientation,u=e.interval,h=e.tickFormatter,p=e.unit,m=e.angle;if(!s||!s.length||!a)return[];if(St(u)||Wd.isSsr)return _ee(s,typeof u=="number"&&St(u)?u:0);var g=[],b=d==="top"||d==="bottom"?"width":"height",j=p&&b==="width"?hh(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(O,S){var C=dr(h)?h(O.value,S):O.value;return b==="width"?Oee(hh(C,{fontSize:t,letterSpacing:n}),j,m):hh(C,{fontSize:t,letterSpacing:n})[b]},y=s.length>=2?ti(s[1].coordinate-s[0].coordinate):1,A=kee(i,y,b);return u==="equidistantPreserveStart"?Iee(y,A,v,s,l):(u==="preserveStart"||u==="preserveStartEnd"?g=Bee(y,A,v,s,l,u==="preserveStartEnd"):g=Mee(y,A,v,s,l),g.filter(function(E){return E.isShow}))}var Fee=["viewBox"],Lee=["viewBox"],$ee=["ticks"];function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}function Yc(){return Yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yc.apply(this,arguments)}function y6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y6(Object(n),!0).forEach(function(a){PS(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bj(e,t){if(e==null)return{};var n=zee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function zee(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ZD(a.key),a)}}function qee(e,t,n){return t&&b6(e.prototype,t),n&&b6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wee(e,t,n){return t=lx(t),Hee(e,JD()?Reflect.construct(t,n||[],lx(e).constructor):t.apply(e,n))}function Hee(e,t){if(t&&(Cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gee(e)}function Gee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JD=function(){return!!e})()}function lx(e){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lx(e)}function Kee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y2(e,t)}function Y2(e,t){return Y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Y2(e,t)}function PS(e,t,n){return t=ZD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZD(e){var t=Vee(e,"string");return Cd(t)=="symbol"?t:t+""}function Vee(e,t){if(Cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Cd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vd=function(e){function t(n){var a;return Uee(this,t),a=Wee(this,t,[n]),a.state={fontSize:"",letterSpacing:""},a}return Kee(t,e),qee(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,l=bj(a,Fee),d=this.props,u=d.viewBox,h=bj(d,Lee);return!Zc(i,u)||!Zc(l,h)||!Zc(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,l=s.y,d=s.width,u=s.height,h=s.orientation,p=s.tickSize,m=s.mirror,g=s.tickMargin,b,j,v,y,A,E,O=m?-1:1,S=a.tickSize||p,C=St(a.tickCoord)?a.tickCoord:a.coordinate;switch(h){case"top":b=j=a.coordinate,y=l+ +!m*u,v=y-O*S,E=v-O*g,A=C;break;case"left":v=y=a.coordinate,j=i+ +!m*d,b=j-O*S,A=b-O*g,E=C;break;case"right":v=y=a.coordinate,j=i+ +m*d,b=j+O*S,A=b+O*g,E=C;break;default:b=j=a.coordinate,y=l+ +m*u,v=y+O*S,E=v+O*g,A=C;break}return{line:{x1:b,y1:v,x2:j,y2:y},tick:{x:A,y:E}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l;switch(s){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,l="end";switch(s){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,l=a.width,d=a.height,u=a.orientation,h=a.mirror,p=a.axisLine,m=Aa(Aa(Aa({},gr(this.props,!1)),gr(p,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var g=+(u==="top"&&!h||u==="bottom"&&h);m=Aa(Aa({},m),{},{x1:s,y1:i+g*d,x2:s+l,y2:i+g*d})}else{var b=+(u==="left"&&!h||u==="right"&&h);m=Aa(Aa({},m),{},{x1:s+b*l,y1:i,x2:s+b*l,y2:i+d})}return _e.createElement("line",Yc({},m,{className:Nr("recharts-cartesian-axis-line",Ds(p,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var l=this,d=this.props,u=d.tickLine,h=d.stroke,p=d.tick,m=d.tickFormatter,g=d.unit,b=RS(Aa(Aa({},this.props),{},{ticks:a}),s,i),j=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=gr(this.props,!1),A=gr(p,!1),E=Aa(Aa({},y),{},{fill:"none"},gr(u,!1)),O=b.map(function(S,C){var k=l.getTickLineCoord(S),I=k.line,z=k.tick,B=Aa(Aa(Aa(Aa({textAnchor:j,verticalAnchor:v},y),{},{stroke:"none",fill:h},A),z),{},{index:C,payload:S,visibleTicksCount:b.length,tickFormatter:m});return _e.createElement(vn,Yc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},bm(l.props,S,C)),u&&_e.createElement("line",Yc({},E,I,{className:Nr("recharts-cartesian-axis-tick-line",Ds(u,"className"))})),p&&t.renderTickItem(p,B,"".concat(dr(m)?m(S.value,C):S.value).concat(g||"")))});return _e.createElement("g",{className:"recharts-cartesian-axis-ticks"},O)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,l=s.width,d=s.height,u=s.ticksGenerator,h=s.className,p=s.hide;if(p)return null;var m=this.props,g=m.ticks,b=bj(m,$ee),j=g;return dr(u)&&(j=g&&g.length>0?u(this.props):u(b)),l<=0||d<=0||!j||!j.length?null:_e.createElement(vn,{className:Nr("recharts-cartesian-axis",h),ref:function(y){a.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),ya.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var l;return _e.isValidElement(a)?l=_e.cloneElement(a,s):dr(a)?l=a(s):l=_e.createElement(km,Yc({},s,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(w.Component);PS(Vd,"displayName","CartesianAxis");PS(Vd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Yee=["x1","y1","x2","y2","key"],Xee=["offset"];function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function v6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v6(Object(n),!0).forEach(function(a){Qee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Qee(e,t,n){return t=Jee(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jee(e){var t=Zee(e,"string");return Hl(t)=="symbol"?t:t+""}function Zee(e,t){if(Hl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Hl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dl.apply(this,arguments)}function j6(e,t){if(e==null)return{};var n=ete(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function ete(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var tte=function(t){var n=t.fill;if(!n||n==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,l=t.width,d=t.height,u=t.ry;return _e.createElement("rect",{x:s,y:i,ry:u,width:l,height:d,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function eR(e,t){var n;if(_e.isValidElement(e))n=_e.cloneElement(e,t);else if(dr(e))n=e(t);else{var a=t.x1,s=t.y1,i=t.x2,l=t.y2,d=t.key,u=j6(t,Yee),h=gr(u,!1);h.offset;var p=j6(h,Xee);n=_e.createElement("line",Dl({},p,{x1:a,y1:s,x2:i,y2:l,fill:"none",key:d}))}return n}function rte(e){var t=e.x,n=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var h=ba(ba({},e),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(u),index:u});return eR(s,h)});return _e.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function nte(e){var t=e.y,n=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var l=i.map(function(d,u){var h=ba(ba({},e),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(u),index:u});return eR(s,h)});return _e.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function ate(e){var t=e.horizontalFill,n=e.fillOpacity,a=e.x,s=e.y,i=e.width,l=e.height,d=e.horizontalPoints,u=e.horizontal,h=u===void 0?!0:u;if(!h||!t||!t.length)return null;var p=d.map(function(g){return Math.round(g+s-s)}).sort(function(g,b){return g-b});s!==p[0]&&p.unshift(0);var m=p.map(function(g,b){var j=!p[b+1],v=j?s+l-g:p[b+1]-g;if(v<=0)return null;var y=b%t.length;return _e.createElement("rect",{key:"react-".concat(b),y:g,x:a,height:v,width:i,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _e.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function ste(e){var t=e.vertical,n=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,l=e.y,d=e.width,u=e.height,h=e.verticalPoints;if(!n||!a||!a.length)return null;var p=h.map(function(g){return Math.round(g+i-i)}).sort(function(g,b){return g-b});i!==p[0]&&p.unshift(0);var m=p.map(function(g,b){var j=!p[b+1],v=j?i+d-g:p[b+1]-g;if(v<=0)return null;var y=b%a.length;return _e.createElement("rect",{key:"react-".concat(b),x:g,y:l,width:v,height:u,stroke:"none",fill:a[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return _e.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var ite=function(t,n){var a=t.xAxis,s=t.width,i=t.height,l=t.offset;return fD(RS(ba(ba(ba({},Vd.defaultProps),a),{},{ticks:Gi(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.left,l.left+l.width,n)},ote=function(t,n){var a=t.yAxis,s=t.width,i=t.height,l=t.offset;return fD(RS(ba(ba(ba({},Vd.defaultProps),a),{},{ticks:Gi(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),l.top,l.top+l.height,n)},Fc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function X2(e){var t,n,a,s,i,l,d=kS(),u=_S(),h=VZ(),p=ba(ba({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Fc.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Fc.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Fc.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Fc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Fc.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:Fc.verticalFill,x:St(e.x)?e.x:h.left,y:St(e.y)?e.y:h.top,width:St(e.width)?e.width:h.width,height:St(e.height)?e.height:h.height}),m=p.x,g=p.y,b=p.width,j=p.height,v=p.syncWithTicks,y=p.horizontalValues,A=p.verticalValues,E=HZ(),O=GZ();if(!St(b)||b<=0||!St(j)||j<=0||!St(m)||m!==+m||!St(g)||g!==+g)return null;var S=p.verticalCoordinatesGenerator||ite,C=p.horizontalCoordinatesGenerator||ote,k=p.horizontalPoints,I=p.verticalPoints;if((!k||!k.length)&&dr(C)){var z=y&&y.length,B=C({yAxis:O?ba(ba({},O),{},{ticks:z?y:O.ticks}):void 0,width:d,height:u,offset:h},z?!0:v);Xi(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Hl(B),"]")),Array.isArray(B)&&(k=B)}if((!I||!I.length)&&dr(S)){var M=A&&A.length,F=S({xAxis:E?ba(ba({},E),{},{ticks:M?A:E.ticks}):void 0,width:d,height:u,offset:h},M?!0:v);Xi(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Hl(F),"]")),Array.isArray(F)&&(I=F)}return _e.createElement("g",{className:"recharts-cartesian-grid"},_e.createElement(tte,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),_e.createElement(rte,Dl({},p,{offset:h,horizontalPoints:k,xAxis:E,yAxis:O})),_e.createElement(nte,Dl({},p,{offset:h,verticalPoints:I,xAxis:E,yAxis:O})),_e.createElement(ate,Dl({},p,{horizontalPoints:k})),_e.createElement(ste,Dl({},p,{verticalPoints:I})))}X2.displayName="CartesianGrid";var lte=["type","layout","connectNulls","ref"],cte=["key"];function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function w6(e,t){if(e==null)return{};var n=dte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dte(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xh.apply(this,arguments)}function S6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(n),!0).forEach(function(a){Xs(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Lc(e){return pte(e)||fte(e)||hte(e)||ute()}function ute(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hte(e,t){if(e){if(typeof e=="string")return Q2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q2(e,t)}}function fte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pte(e){if(Array.isArray(e))return Q2(e)}function Q2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function mte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,rR(a.key),a)}}function xte(e,t,n){return t&&N6(e.prototype,t),n&&N6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gte(e,t,n){return t=cx(t),yte(e,tR()?Reflect.construct(t,n||[],cx(e).constructor):t.apply(e,n))}function yte(e,t){if(t&&(Ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bte(e)}function bte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tR=function(){return!!e})()}function cx(e){return cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cx(e)}function vte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J2(e,t)}function J2(e,t){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},J2(e,t)}function Xs(e,t,n){return t=rR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rR(e){var t=jte(e,"string");return Ad(t)=="symbol"?t:t+""}function jte(e,t){if(Ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ad(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ef=function(e){function t(){var n;mte(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=gte(this,t,[].concat(s)),Xs(n,"state",{isAnimationFinished:!0,totalLength:0}),Xs(n,"generateSimpleStrokeDasharray",function(l,d){return"".concat(d,"px ").concat(l-d,"px")}),Xs(n,"getStrokeDasharray",function(l,d,u){var h=u.reduce(function(A,E){return A+E});if(!h)return n.generateSimpleStrokeDasharray(d,l);for(var p=Math.floor(l/h),m=l%h,g=d-l,b=[],j=0,v=0;j<u.length;v+=u[j],++j)if(v+u[j]>m){b=[].concat(Lc(u.slice(0,j)),[m-v]);break}var y=b.length%2===0?[0,g]:[g];return[].concat(Lc(t.repeat(u,p)),Lc(b),y).map(function(A){return"".concat(A,"px")}).join(", ")}),Xs(n,"id",jf("recharts-line-")),Xs(n,"pathRef",function(l){n.mainCurve=l}),Xs(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Xs(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return vte(t,e),xte(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,d=i.xAxis,u=i.yAxis,h=i.layout,p=i.children,m=Rs(p,Af);if(!m)return null;var g=function(v,y){return{x:v.x,y:v.y,value:v.value,errorVal:ps(v.payload,y)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return _e.createElement(vn,b,m.map(function(j){return _e.cloneElement(j,{key:"bar-".concat(j.props.dataKey),data:l,xAxis:d,yAxis:u,layout:h,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,s,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var d=this.props,u=d.dot,h=d.points,p=d.dataKey,m=gr(this.props,!1),g=gr(u,!0),b=h.map(function(v,y){var A=is(is(is({key:"dot-".concat(y),r:3},m),g),{},{index:y,cx:v.x,cy:v.y,value:v.value,dataKey:p,payload:v.payload,points:h});return t.renderDotItem(u,A)}),j={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return _e.createElement(vn,xh({className:"recharts-line-dots",key:"dots"},j),b)}},{key:"renderCurveStatically",value:function(a,s,i,l){var d=this.props,u=d.type,h=d.layout,p=d.connectNulls;d.ref;var m=w6(d,lte),g=is(is(is({},gr(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},l),{},{type:u,layout:h,connectNulls:p});return _e.createElement(E2,xh({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,l=this.props,d=l.points,u=l.strokeDasharray,h=l.isAnimationActive,p=l.animationBegin,m=l.animationDuration,g=l.animationEasing,b=l.animationId,j=l.animateNewValues,v=l.width,y=l.height,A=this.state,E=A.prevPoints,O=A.totalLength;return _e.createElement(io,{begin:p,duration:m,isActive:h,easing:g,from:{t:0},to:{t:1},key:"line-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var C=S.t;if(E){var k=E.length/d.length,I=d.map(function(N,L){var P=Math.floor(L*k);if(E[P]){var _=E[P],R=Qs(_.x,N.x),W=Qs(_.y,N.y);return is(is({},N),{},{x:R(C),y:W(C)})}if(j){var G=Qs(v*2,N.x),oe=Qs(y/2,N.y);return is(is({},N),{},{x:G(C),y:oe(C)})}return is(is({},N),{},{x:N.x,y:N.y})});return i.renderCurveStatically(I,a,s)}var z=Qs(0,O),B=z(C),M;if(u){var F="".concat(u).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});M=i.getStrokeDasharray(B,O,F)}else M=i.generateSimpleStrokeDasharray(O,B);return i.renderCurveStatically(d,a,s,{strokeDasharray:M})})}},{key:"renderCurve",value:function(a,s){var i=this.props,l=i.points,d=i.isAnimationActive,u=this.state,h=u.prevPoints,p=u.totalLength;return d&&l&&l.length&&(!h&&p>0||!Zx(h,l))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,l=s.dot,d=s.points,u=s.className,h=s.xAxis,p=s.yAxis,m=s.top,g=s.left,b=s.width,j=s.height,v=s.isAnimationActive,y=s.id;if(i||!d||!d.length)return null;var A=this.state.isAnimationFinished,E=d.length===1,O=Nr("recharts-line",u),S=h&&h.allowDataOverflow,C=p&&p.allowDataOverflow,k=S||C,I=mr(y)?this.id:y,z=(a=gr(l,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},B=z.r,M=B===void 0?3:B,F=z.strokeWidth,N=F===void 0?2:F,L=$$(l)?l:{},P=L.clipDot,_=P===void 0?!0:P,R=M*2+N;return _e.createElement(vn,{className:O},S||C?_e.createElement("defs",null,_e.createElement("clipPath",{id:"clipPath-".concat(I)},_e.createElement("rect",{x:S?g:g-b/2,y:C?m:m-j/2,width:S?b:b*2,height:C?j:j*2})),!_&&_e.createElement("clipPath",{id:"clipPath-dots-".concat(I)},_e.createElement("rect",{x:g-R/2,y:m-R/2,width:b+R,height:j+R}))):null,!E&&this.renderCurve(k,I),this.renderErrorBar(k,I),(E||l)&&this.renderDots(k,_,I),(!v||A)&&Ho.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(Lc(a),[0]):a,l=[],d=0;d<s;++d)l=[].concat(Lc(l),Lc(i));return l}},{key:"renderDotItem",value:function(a,s){var i;if(_e.isValidElement(a))i=_e.cloneElement(a,s);else if(dr(a))i=a(s);else{var l=s.key,d=w6(s,cte),u=Nr("recharts-line-dot",typeof a!="boolean"?a.className:"");i=_e.createElement(CS,xh({key:l},d,{className:u}))}return i}}])}(w.PureComponent);Xs(Ef,"displayName","Line");Xs(Ef,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Wd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Xs(Ef,"getComposedData",function(e){var t=e.props,n=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,l=e.dataKey,d=e.bandSize,u=e.displayedData,h=e.offset,p=t.layout,m=u.map(function(g,b){var j=ps(g,l);return p==="horizontal"?{x:F_({axis:n,ticks:s,bandSize:d,entry:g,index:b}),y:mr(j)?null:a.scale(j),value:j,payload:g}:{x:mr(j)?null:n.scale(j),y:F_({axis:a,ticks:i,bandSize:d,entry:g,index:b}),value:j,payload:g}});return is({points:m,layout:p},h)});function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function wte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ste(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sR(a.key),a)}}function Nte(e,t,n){return t&&Ste(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tte(e,t,n){return t=dx(t),Cte(e,nR()?Reflect.construct(t,n||[],dx(e).constructor):t.apply(e,n))}function Cte(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ate(e)}function Ate(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nR=function(){return!!e})()}function dx(e){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dx(e)}function Ete(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z2(e,t)}function Z2(e,t){return Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Z2(e,t)}function aR(e,t,n){return t=sR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sR(e){var t=Ote(e,"string");return Ed(t)=="symbol"?t:t+""}function Ote(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ed(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ew.apply(this,arguments)}function kte(e){var t=e.xAxisId,n=kS(),a=_S(),s=qD(t);return s==null?null:_e.createElement(Vd,ew({},s,{className:Nr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Gi(l,!0)}}))}var Od=function(e){function t(){return wte(this,t),Tte(this,t,arguments)}return Ete(t,e),Nte(t,[{key:"render",value:function(){return _e.createElement(kte,this.props)}}])}(_e.Component);aR(Od,"displayName","XAxis");aR(Od,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function kd(e){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(e)}function _te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ite(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,lR(a.key),a)}}function Dte(e,t,n){return t&&Ite(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rte(e,t,n){return t=ux(t),Pte(e,iR()?Reflect.construct(t,n||[],ux(e).constructor):t.apply(e,n))}function Pte(e,t){if(t&&(kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mte(e)}function Mte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iR=function(){return!!e})()}function ux(e){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ux(e)}function Bte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tw(e,t)}function tw(e,t){return tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tw(e,t)}function oR(e,t,n){return t=lR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lR(e){var t=Fte(e,"string");return kd(t)=="symbol"?t:t+""}function Fte(e,t){if(kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(kd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function rw(){return rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rw.apply(this,arguments)}var Lte=function(t){var n=t.yAxisId,a=kS(),s=_S(),i=WD(n);return i==null?null:_e.createElement(Vd,rw({},i,{className:Nr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(d){return Gi(d,!0)}}))},_d=function(e){function t(){return _te(this,t),Rte(this,t,arguments)}return Bte(t,e),Dte(t,[{key:"render",value:function(){return _e.createElement(Lte,this.props)}}])}(_e.Component);oR(_d,"displayName","YAxis");oR(_d,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function T6(e){return qte(e)||Ute(e)||zte(e)||$te()}function $te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zte(e,t){if(e){if(typeof e=="string")return nw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nw(e,t)}}function Ute(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qte(e){if(Array.isArray(e))return nw(e)}function nw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var aw=function(t,n,a,s,i){var l=Rs(t,DS),d=Rs(t,i0),u=[].concat(T6(l),T6(d)),h=Rs(t,l0),p="".concat(s,"Id"),m=s[0],g=n;if(u.length&&(g=u.reduce(function(v,y){if(y.props[p]===a&&wi(y.props,"extendDomain")&&St(y.props[m])){var A=y.props[m];return[Math.min(v[0],A),Math.max(v[1],A)]}return v},g)),h.length){var b="".concat(m,"1"),j="".concat(m,"2");g=h.reduce(function(v,y){if(y.props[p]===a&&wi(y.props,"extendDomain")&&St(y.props[b])&&St(y.props[j])){var A=y.props[b],E=y.props[j];return[Math.min(v[0],A,E),Math.max(v[1],A,E)]}return v},g)}return i&&i.length&&(g=i.reduce(function(v,y){return St(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},g)),g},vj={exports:{}},C6;function Wte(){return C6||(C6=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(u,h,p){this.fn=u,this.context=h,this.once=p||!1}function i(u,h,p,m,g){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new s(p,m||u,g),j=n?n+h:h;return u._events[j]?u._events[j].fn?u._events[j]=[u._events[j],b]:u._events[j].push(b):(u._events[j]=b,u._eventsCount++),u}function l(u,h){--u._eventsCount===0?u._events=new a:delete u._events[h]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)t.call(p,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},d.prototype.listeners=function(h){var p=n?n+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,b=m.length,j=new Array(b);g<b;g++)j[g]=m[g].fn;return j},d.prototype.listenerCount=function(h){var p=n?n+h:h,m=this._events[p];return m?m.fn?1:m.length:0},d.prototype.emit=function(h,p,m,g,b,j){var v=n?n+h:h;if(!this._events[v])return!1;var y=this._events[v],A=arguments.length,E,O;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),A){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,p),!0;case 3:return y.fn.call(y.context,p,m),!0;case 4:return y.fn.call(y.context,p,m,g),!0;case 5:return y.fn.call(y.context,p,m,g,b),!0;case 6:return y.fn.call(y.context,p,m,g,b,j),!0}for(O=1,E=new Array(A-1);O<A;O++)E[O-1]=arguments[O];y.fn.apply(y.context,E)}else{var S=y.length,C;for(O=0;O<S;O++)switch(y[O].once&&this.removeListener(h,y[O].fn,void 0,!0),A){case 1:y[O].fn.call(y[O].context);break;case 2:y[O].fn.call(y[O].context,p);break;case 3:y[O].fn.call(y[O].context,p,m);break;case 4:y[O].fn.call(y[O].context,p,m,g);break;default:if(!E)for(C=1,E=new Array(A-1);C<A;C++)E[C-1]=arguments[C];y[O].fn.apply(y[O].context,E)}}return!0},d.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},d.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},d.prototype.removeListener=function(h,p,m,g){var b=n?n+h:h;if(!this._events[b])return this;if(!p)return l(this,b),this;var j=this._events[b];if(j.fn)j.fn===p&&(!g||j.once)&&(!m||j.context===m)&&l(this,b);else{for(var v=0,y=[],A=j.length;v<A;v++)(j[v].fn!==p||g&&!j[v].once||m&&j[v].context!==m)&&y.push(j[v]);y.length?this._events[b]=y.length===1?y[0]:y:l(this,b)}return this},d.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&l(this,p)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d}(vj)),vj.exports}var Hte=Wte();const Gte=$r(Hte);var jj=new Gte,wj="recharts.syncMouseEvents";function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function Kte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vte(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,cR(a.key),a)}}function Yte(e,t,n){return t&&Vte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sj(e,t,n){return t=cR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cR(e){var t=Xte(e,"string");return of(t)=="symbol"?t:t+""}function Xte(e,t){if(of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(of(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qte=function(){function e(){Kte(this,e),Sj(this,"activeIndex",0),Sj(this,"coordinateList",[]),Sj(this,"layout","horizontal")}return Yte(e,[{key:"setDetails",value:function(n){var a,s=n.coordinateList,i=s===void 0?null:s,l=n.container,d=l===void 0?null:l,u=n.layout,h=u===void 0?null:u,p=n.offset,m=p===void 0?null:p,g=n.mouseHandlerCallback,b=g===void 0?null:g;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=d??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,l=s.y,d=s.height,u=this.coordinateList[this.activeIndex].coordinate,h=((n=window)===null||n===void 0?void 0:n.scrollX)||0,p=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=i+u+h,g=l+this.offset.top+d/2+p;this.mouseHandlerCallback({pageX:m,pageY:g})}}}])}();function Jte(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&St(a)&&St(s))return!0}return!1}function Zte(e,t,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function dR(e){var t=e.cx,n=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,l=oa(t,n,a,s),d=oa(t,n,a,i);return{points:[l,d],cx:t,cy:n,radius:a,startAngle:s,endAngle:i}}function ere(e,t,n){var a,s,i,l;if(e==="horizontal")a=t.x,i=a,s=n.top,l=n.top+n.height;else if(e==="vertical")s=t.y,l=s,a=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var d=t.cx,u=t.cy,h=t.innerRadius,p=t.outerRadius,m=t.angle,g=oa(d,u,h,m),b=oa(d,u,p,m);a=g.x,s=g.y,i=b.x,l=b.y}else return dR(t);return[{x:a,y:s},{x:i,y:l}]}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function A6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Qp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(n),!0).forEach(function(a){tre(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tre(e,t,n){return t=rre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rre(e){var t=nre(e,"string");return lf(t)=="symbol"?t:t+""}function nre(e,t){if(lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(lf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function are(e){var t,n,a=e.element,s=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,d=e.activePayload,u=e.offset,h=e.activeTooltipIndex,p=e.tooltipAxisBandSize,m=e.layout,g=e.chartName,b=(t=a.props.cursor)!==null&&t!==void 0?t:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!b||!i||!l||g!=="ScatterChart"&&s!=="axis")return null;var j,v=E2;if(g==="ScatterChart")j=l,v=rJ;else if(g==="BarChart")j=Zte(m,l,u,p),v=TS;else if(m==="radial"){var y=dR(l),A=y.cx,E=y.cy,O=y.radius,S=y.startAngle,C=y.endAngle;j={cx:A,cy:E,startAngle:S,endAngle:C,innerRadius:O,outerRadius:O},v=yD}else j={points:ere(m,l,u)},v=E2;var k=Qp(Qp(Qp(Qp({stroke:"#ccc",pointerEvents:"none"},u),j),gr(b,!1)),{},{payload:d,payloadIndex:h,className:Nr("recharts-tooltip-cursor",b.className)});return w.isValidElement(b)?w.cloneElement(b,k):w.createElement(v,k)}var sre=["item"],ire=["children","className","width","height","style","compact","title","desc"];function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function Xc(){return Xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xc.apply(this,arguments)}function E6(e,t){return cre(e)||lre(e,t)||hR(e,t)||ore()}function ore(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,l,d=[],u=!0,h=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(u=(a=i.call(n)).done)&&(d.push(a.value),d.length!==t);u=!0);}catch(p){h=!0,s=p}finally{try{if(!u&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw s}}return d}}function cre(e){if(Array.isArray(e))return e}function O6(e,t){if(e==null)return{};var n=dre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dre(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function ure(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hre(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,fR(a.key),a)}}function fre(e,t,n){return t&&hre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pre(e,t,n){return t=hx(t),mre(e,uR()?Reflect.construct(t,n||[],hx(e).constructor):t.apply(e,n))}function mre(e,t){if(t&&(Id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xre(e)}function xre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uR=function(){return!!e})()}function hx(e){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hx(e)}function gre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sw(e,t)}function sw(e,t){return sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},sw(e,t)}function Dd(e){return vre(e)||bre(e)||hR(e)||yre()}function yre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hR(e,t){if(e){if(typeof e=="string")return iw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iw(e,t)}}function bre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vre(e){if(Array.isArray(e))return iw(e)}function iw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function k6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k6(Object(n),!0).forEach(function(a){Gt(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Gt(e,t,n){return t=fR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fR(e){var t=jre(e,"string");return Id(t)=="symbol"?t:t+""}function jre(e,t){if(Id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Id(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wre={xAxis:["bottom","top"],yAxis:["left","right"]},Sre={width:"100%",height:"100%"},pR={x:0,y:0};function Jp(e){return e}var Nre=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Tre=function(t,n,a,s){var i=n.find(function(p){return p&&p.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var l=i.coordinate,d=s.radius;return at(at(at({},s),oa(s.cx,s.cy,d,l)),{},{angle:l,radius:d})}var u=i.coordinate,h=s.angle;return at(at(at({},s),oa(s.cx,s.cy,u,h)),{},{angle:h,radius:u})}return pR},c0=function(t,n){var a=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,l=(a??[]).reduce(function(d,u){var h=u.props.data;return h&&h.length?[].concat(Dd(d),Dd(h)):d},[]);return l.length>0?l:t&&t.length&&St(s)&&St(i)?t.slice(s,i+1):[]};function mR(e){return e==="number"?[0,"auto"]:void 0}var ow=function(t,n,a,s){var i=t.graphicalItems,l=t.tooltipAxis,d=c0(n,t);return a<0||!i||!i.length||a>=d.length?null:i.reduce(function(u,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:n;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(l.dataKey&&!l.allowDuplicatedCategory){var b=m===void 0?d:m;g=gm(b,l.dataKey,s)}else g=m&&m[a]||d[a];return g?[].concat(Dd(u),[mD(h,g)]):u},[])},_6=function(t,n,a,s){var i=s||{x:t.chartX,y:t.chartY},l=Nre(i,a),d=t.orderedTooltipTicks,u=t.tooltipAxis,h=t.tooltipTicks,p=LV(l,d,h,u);if(p>=0&&h){var m=h[p]&&h[p].value,g=ow(t,n,p,m),b=Tre(a,d,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:g,activeCoordinate:b}}return null},Cre=function(t,n){var a=n.axes,s=n.graphicalItems,i=n.axisType,l=n.axisIdKey,d=n.stackGroups,u=n.dataStartIndex,h=n.dataEndIndex,p=t.layout,m=t.children,g=t.stackOffset,b=hD(p,i);return a.reduce(function(j,v){var y,A=v.type.defaultProps!==void 0?at(at({},v.type.defaultProps),v.props):v.props,E=A.type,O=A.dataKey,S=A.allowDataOverflow,C=A.allowDuplicatedCategory,k=A.scale,I=A.ticks,z=A.includeHidden,B=A[l];if(j[B])return j;var M=c0(t.data,{graphicalItems:s.filter(function(U){var X,H=l in U.props?U.props[l]:(X=U.type.defaultProps)===null||X===void 0?void 0:X[l];return H===B}),dataStartIndex:u,dataEndIndex:h}),F=M.length,N,L,P;Jte(A.domain,S,E)&&(N=S2(A.domain,null,S),b&&(E==="number"||k!=="auto")&&(P=ph(M,O,"category")));var _=mR(E);if(!N||N.length===0){var R,W=(R=A.domain)!==null&&R!==void 0?R:_;if(O){if(N=ph(M,O,E),E==="category"&&b){var G=k$(N);C&&G?(L=N,N=Zm(0,F)):C||(N=U_(W,N,v).reduce(function(U,X){return U.indexOf(X)>=0?U:[].concat(Dd(U),[X])},[]))}else if(E==="category")C?N=N.filter(function(U){return U!==""&&!mr(U)}):N=U_(W,N,v).reduce(function(U,X){return U.indexOf(X)>=0||X===""||mr(X)?U:[].concat(Dd(U),[X])},[]);else if(E==="number"){var oe=WV(M,s.filter(function(U){var X,H,Q=l in U.props?U.props[l]:(X=U.type.defaultProps)===null||X===void 0?void 0:X[l],le="hide"in U.props?U.props.hide:(H=U.type.defaultProps)===null||H===void 0?void 0:H.hide;return Q===B&&(z||!le)}),O,i,p);oe&&(N=oe)}b&&(E==="number"||k!=="auto")&&(P=ph(M,O,"category"))}else b?N=Zm(0,F):d&&d[B]&&d[B].hasStack&&E==="number"?N=g==="expand"?[0,1]:pD(d[B].stackGroups,u,h):N=uD(M,s.filter(function(U){var X=l in U.props?U.props[l]:U.type.defaultProps[l],H="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return X===B&&(z||!H)}),E,p,!0);if(E==="number")N=aw(m,N,B,i,I),W&&(N=S2(W,N,S));else if(E==="category"&&W){var q=W,V=N.every(function(U){return q.indexOf(U)>=0});V&&(N=q)}}return at(at({},j),{},Gt({},B,at(at({},A),{},{axisType:i,domain:N,categoricalDomain:P,duplicateDomain:L,originalDomain:(y=A.domain)!==null&&y!==void 0?y:_,isCategorical:b,layout:p})))},{})},Are=function(t,n){var a=n.graphicalItems,s=n.Axis,i=n.axisType,l=n.axisIdKey,d=n.stackGroups,u=n.dataStartIndex,h=n.dataEndIndex,p=t.layout,m=t.children,g=c0(t.data,{graphicalItems:a,dataStartIndex:u,dataEndIndex:h}),b=g.length,j=hD(p,i),v=-1;return a.reduce(function(y,A){var E=A.type.defaultProps!==void 0?at(at({},A.type.defaultProps),A.props):A.props,O=E[l],S=mR("number");if(!y[O]){v++;var C;return j?C=Zm(0,b):d&&d[O]&&d[O].hasStack?(C=pD(d[O].stackGroups,u,h),C=aw(m,C,O,i)):(C=S2(S,uD(g,a.filter(function(k){var I,z,B=l in k.props?k.props[l]:(I=k.type.defaultProps)===null||I===void 0?void 0:I[l],M="hide"in k.props?k.props.hide:(z=k.type.defaultProps)===null||z===void 0?void 0:z.hide;return B===O&&!M}),"number",p),s.defaultProps.allowDataOverflow),C=aw(m,C,O,i)),at(at({},y),{},Gt({},O,at(at({axisType:i},s.defaultProps),{},{hide:!0,orientation:Ds(wre,"".concat(i,".").concat(v%2),null),domain:C,originalDomain:S,isCategorical:j,layout:p})))}return y},{})},Ere=function(t,n){var a=n.axisType,s=a===void 0?"xAxis":a,i=n.AxisComp,l=n.graphicalItems,d=n.stackGroups,u=n.dataStartIndex,h=n.dataEndIndex,p=t.children,m="".concat(s,"Id"),g=Rs(p,i),b={};return g&&g.length?b=Cre(t,{axes:g,graphicalItems:l,axisType:s,axisIdKey:m,stackGroups:d,dataStartIndex:u,dataEndIndex:h}):l&&l.length&&(b=Are(t,{Axis:i,graphicalItems:l,axisType:s,axisIdKey:m,stackGroups:d,dataStartIndex:u,dataEndIndex:h})),b},Ore=function(t){var n=$o(t),a=Gi(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:Jw(a,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Wm(n,a)}},I6=function(t){var n=t.children,a=t.defaultShowTooltip,s=cs(n,jd),i=0,l=0;return t.data&&t.data.length!==0&&(l=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(l=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!a}},kre=function(t){return!t||!t.length?!1:t.some(function(n){var a=Yi(n&&n.type);return a&&a.indexOf("Bar")>=0})},D6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},_re=function(t,n){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,l=i===void 0?{}:i,d=t.yAxisMap,u=d===void 0?{}:d,h=a.width,p=a.height,m=a.children,g=a.margin||{},b=cs(m,jd),j=cs(m,ed),v=Object.keys(u).reduce(function(C,k){var I=u[k],z=I.orientation;return!I.mirror&&!I.hide?at(at({},C),{},Gt({},z,C[z]+I.width)):C},{left:g.left||0,right:g.right||0}),y=Object.keys(l).reduce(function(C,k){var I=l[k],z=I.orientation;return!I.mirror&&!I.hide?at(at({},C),{},Gt({},z,Ds(C,"".concat(z))+I.height)):C},{top:g.top||0,bottom:g.bottom||0}),A=at(at({},y),v),E=A.bottom;b&&(A.bottom+=b.props.height||jd.defaultProps.height),j&&n&&(A=UV(A,s,a,n));var O=h-A.left-A.right,S=p-A.top-A.bottom;return at(at({brushBottom:E},A),{},{width:Math.max(O,0),height:Math.max(S,0)})},Ire=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},xR=function(t){var n=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,l=t.validateTooltipEventTypes,d=l===void 0?["axis"]:l,u=t.axisComponents,h=t.legendContent,p=t.formatAxisMap,m=t.defaultProps,g=function(A,E){var O=E.graphicalItems,S=E.stackGroups,C=E.offset,k=E.updateId,I=E.dataStartIndex,z=E.dataEndIndex,B=A.barSize,M=A.layout,F=A.barGap,N=A.barCategoryGap,L=A.maxBarSize,P=D6(M),_=P.numericAxisName,R=P.cateAxisName,W=kre(O),G=[];return O.forEach(function(oe,q){var V=c0(A.data,{graphicalItems:[oe],dataStartIndex:I,dataEndIndex:z}),U=oe.type.defaultProps!==void 0?at(at({},oe.type.defaultProps),oe.props):oe.props,X=U.dataKey,H=U.maxBarSize,Q=U["".concat(_,"Id")],le=U["".concat(R,"Id")],me={},je=u.reduce(function(Z,de){var te=E["".concat(de.axisType,"Map")],Se=U["".concat(de.axisType,"Id")];te&&te[Se]||de.axisType==="zAxis"||Wl();var Ve=te[Se];return at(at({},Z),{},Gt(Gt({},de.axisType,Ve),"".concat(de.axisType,"Ticks"),Gi(Ve)))},me),ee=je[R],se=je["".concat(R,"Ticks")],fe=S&&S[Q]&&S[Q].hasStack&&rY(oe,S[Q].stackGroups),ue=Yi(oe.type).indexOf("Bar")>=0,We=Wm(ee,se),we=[],Me=W&&$V({barSize:B,stackGroups:S,totalSize:Ire(je,R)});if(ue){var Ee,Be,it=mr(H)?L:H,re=(Ee=(Be=Wm(ee,se,!0))!==null&&Be!==void 0?Be:it)!==null&&Ee!==void 0?Ee:0;we=zV({barGap:F,barCategoryGap:N,bandSize:re!==We?re:We,sizeList:Me[le],maxBarSize:it}),re!==We&&(we=we.map(function(Z){return at(at({},Z),{},{position:at(at({},Z.position),{},{offset:Z.position.offset-re/2})})}))}var ce=oe&&oe.type&&oe.type.getComposedData;ce&&G.push({props:at(at({},ce(at(at({},je),{},{displayedData:V,props:A,dataKey:X,item:oe,bandSize:We,barPosition:we,offset:C,stackedData:fe,layout:M,dataStartIndex:I,dataEndIndex:z}))),{},Gt(Gt(Gt({key:oe.key||"item-".concat(q)},_,je[_]),R,je[R]),"animationId",k)),childIndex:q$(oe,A.children),item:oe})}),G},b=function(A,E){var O=A.props,S=A.dataStartIndex,C=A.dataEndIndex,k=A.updateId;if(!tO({props:O}))return null;var I=O.children,z=O.layout,B=O.stackOffset,M=O.data,F=O.reverseStackOrder,N=D6(z),L=N.numericAxisName,P=N.cateAxisName,_=Rs(I,a),R=ZV(M,_,"".concat(L,"Id"),"".concat(P,"Id"),B,F),W=u.reduce(function(U,X){var H="".concat(X.axisType,"Map");return at(at({},U),{},Gt({},H,Ere(O,at(at({},X),{},{graphicalItems:_,stackGroups:X.axisType===L&&R,dataStartIndex:S,dataEndIndex:C}))))},{}),G=_re(at(at({},W),{},{props:O,graphicalItems:_}),E==null?void 0:E.legendBBox);Object.keys(W).forEach(function(U){W[U]=p(O,W[U],G,U.replace("Map",""),n)});var oe=W["".concat(P,"Map")],q=Ore(oe),V=g(O,at(at({},W),{},{dataStartIndex:S,dataEndIndex:C,updateId:k,graphicalItems:_,stackGroups:R,offset:G}));return at(at({formattedGraphicalItems:V,graphicalItems:_,offset:G,stackGroups:R},q),W)},j=function(y){function A(E){var O,S,C;return ure(this,A),C=pre(this,A,[E]),Gt(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gt(C,"accessibilityManager",new Qte),Gt(C,"handleLegendBBoxUpdate",function(k){if(k){var I=C.state,z=I.dataStartIndex,B=I.dataEndIndex,M=I.updateId;C.setState(at({legendBBox:k},b({props:C.props,dataStartIndex:z,dataEndIndex:B,updateId:M},at(at({},C.state),{},{legendBBox:k}))))}}),Gt(C,"handleReceiveSyncEvent",function(k,I,z){if(C.props.syncId===k){if(z===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(I)}}),Gt(C,"handleBrushChange",function(k){var I=k.startIndex,z=k.endIndex;if(I!==C.state.dataStartIndex||z!==C.state.dataEndIndex){var B=C.state.updateId;C.setState(function(){return at({dataStartIndex:I,dataEndIndex:z},b({props:C.props,dataStartIndex:I,dataEndIndex:z,updateId:B},C.state))}),C.triggerSyncEvent({dataStartIndex:I,dataEndIndex:z})}}),Gt(C,"handleMouseEnter",function(k){var I=C.getMouseInfo(k);if(I){var z=at(at({},I),{},{isTooltipActive:!0});C.setState(z),C.triggerSyncEvent(z);var B=C.props.onMouseEnter;dr(B)&&B(z,k)}}),Gt(C,"triggeredAfterMouseMove",function(k){var I=C.getMouseInfo(k),z=I?at(at({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(z),C.triggerSyncEvent(z);var B=C.props.onMouseMove;dr(B)&&B(z,k)}),Gt(C,"handleItemMouseEnter",function(k){C.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Gt(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),Gt(C,"handleMouseMove",function(k){k.persist(),C.throttleTriggeredAfterMouseMove(k)}),Gt(C,"handleMouseLeave",function(k){C.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};C.setState(I),C.triggerSyncEvent(I);var z=C.props.onMouseLeave;dr(z)&&z(I,k)}),Gt(C,"handleOuterEvent",function(k){var I=U$(k),z=Ds(C.props,"".concat(I));if(I&&dr(z)){var B,M;/.*touch.*/i.test(I)?M=C.getMouseInfo(k.changedTouches[0]):M=C.getMouseInfo(k),z((B=M)!==null&&B!==void 0?B:{},k)}}),Gt(C,"handleClick",function(k){var I=C.getMouseInfo(k);if(I){var z=at(at({},I),{},{isTooltipActive:!0});C.setState(z),C.triggerSyncEvent(z);var B=C.props.onClick;dr(B)&&B(z,k)}}),Gt(C,"handleMouseDown",function(k){var I=C.props.onMouseDown;if(dr(I)){var z=C.getMouseInfo(k);I(z,k)}}),Gt(C,"handleMouseUp",function(k){var I=C.props.onMouseUp;if(dr(I)){var z=C.getMouseInfo(k);I(z,k)}}),Gt(C,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Gt(C,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&C.handleMouseDown(k.changedTouches[0])}),Gt(C,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&C.handleMouseUp(k.changedTouches[0])}),Gt(C,"handleDoubleClick",function(k){var I=C.props.onDoubleClick;if(dr(I)){var z=C.getMouseInfo(k);I(z,k)}}),Gt(C,"handleContextMenu",function(k){var I=C.props.onContextMenu;if(dr(I)){var z=C.getMouseInfo(k);I(z,k)}}),Gt(C,"triggerSyncEvent",function(k){C.props.syncId!==void 0&&jj.emit(wj,C.props.syncId,k,C.eventEmitterSymbol)}),Gt(C,"applySyncEvent",function(k){var I=C.props,z=I.layout,B=I.syncMethod,M=C.state.updateId,F=k.dataStartIndex,N=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)C.setState(at({dataStartIndex:F,dataEndIndex:N},b({props:C.props,dataStartIndex:F,dataEndIndex:N,updateId:M},C.state)));else if(k.activeTooltipIndex!==void 0){var L=k.chartX,P=k.chartY,_=k.activeTooltipIndex,R=C.state,W=R.offset,G=R.tooltipTicks;if(!W)return;if(typeof B=="function")_=B(G,k);else if(B==="value"){_=-1;for(var oe=0;oe<G.length;oe++)if(G[oe].value===k.activeLabel){_=oe;break}}var q=at(at({},W),{},{x:W.left,y:W.top}),V=Math.min(L,q.x+q.width),U=Math.min(P,q.y+q.height),X=G[_]&&G[_].value,H=ow(C.state,C.props.data,_),Q=G[_]?{x:z==="horizontal"?G[_].coordinate:V,y:z==="horizontal"?U:G[_].coordinate}:pR;C.setState(at(at({},k),{},{activeLabel:X,activeCoordinate:Q,activePayload:H,activeTooltipIndex:_}))}else C.setState(k)}),Gt(C,"renderCursor",function(k){var I,z=C.state,B=z.isTooltipActive,M=z.activeCoordinate,F=z.activePayload,N=z.offset,L=z.activeTooltipIndex,P=z.tooltipAxisBandSize,_=C.getTooltipEventType(),R=(I=k.props.active)!==null&&I!==void 0?I:B,W=C.props.layout,G=k.key||"_recharts-cursor";return _e.createElement(are,{key:G,activeCoordinate:M,activePayload:F,activeTooltipIndex:L,chartName:n,element:k,isActive:R,layout:W,offset:N,tooltipAxisBandSize:P,tooltipEventType:_})}),Gt(C,"renderPolarAxis",function(k,I,z){var B=Ds(k,"type.axisType"),M=Ds(C.state,"".concat(B,"Map")),F=k.type.defaultProps,N=F!==void 0?at(at({},F),k.props):k.props,L=M&&M[N["".concat(B,"Id")]];return w.cloneElement(k,at(at({},L),{},{className:Nr(B,L.className),key:k.key||"".concat(I,"-").concat(z),ticks:Gi(L,!0)}))}),Gt(C,"renderPolarGrid",function(k){var I=k.props,z=I.radialLines,B=I.polarAngles,M=I.polarRadius,F=C.state,N=F.radiusAxisMap,L=F.angleAxisMap,P=$o(N),_=$o(L),R=_.cx,W=_.cy,G=_.innerRadius,oe=_.outerRadius;return w.cloneElement(k,{polarAngles:Array.isArray(B)?B:Gi(_,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(M)?M:Gi(P,!0).map(function(q){return q.coordinate}),cx:R,cy:W,innerRadius:G,outerRadius:oe,key:k.key||"polar-grid",radialLines:z})}),Gt(C,"renderLegend",function(){var k=C.state.formattedGraphicalItems,I=C.props,z=I.children,B=I.width,M=I.height,F=C.props.margin||{},N=B-(F.left||0)-(F.right||0),L=cD({children:z,formattedGraphicalItems:k,legendWidth:N,legendContent:h});if(!L)return null;var P=L.item,_=O6(L,sre);return w.cloneElement(P,at(at({},_),{},{chartWidth:B,chartHeight:M,margin:F,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),Gt(C,"renderTooltip",function(){var k,I=C.props,z=I.children,B=I.accessibilityLayer,M=cs(z,Vs);if(!M)return null;var F=C.state,N=F.isTooltipActive,L=F.activeCoordinate,P=F.activePayload,_=F.activeLabel,R=F.offset,W=(k=M.props.active)!==null&&k!==void 0?k:N;return w.cloneElement(M,{viewBox:at(at({},R),{},{x:R.left,y:R.top}),active:W,label:_,payload:W?P:[],coordinate:L,accessibilityLayer:B})}),Gt(C,"renderBrush",function(k){var I=C.props,z=I.margin,B=I.data,M=C.state,F=M.offset,N=M.dataStartIndex,L=M.dataEndIndex,P=M.updateId;return w.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Kp(C.handleBrushChange,k.props.onChange),data:B,x:St(k.props.x)?k.props.x:F.left,y:St(k.props.y)?k.props.y:F.top+F.height+F.brushBottom-(z.bottom||0),width:St(k.props.width)?k.props.width:F.width,startIndex:N,endIndex:L,updateId:"brush-".concat(P)})}),Gt(C,"renderReferenceElement",function(k,I,z){if(!k)return null;var B=C,M=B.clipPathId,F=C.state,N=F.xAxisMap,L=F.yAxisMap,P=F.offset,_=k.type.defaultProps||{},R=k.props,W=R.xAxisId,G=W===void 0?_.xAxisId:W,oe=R.yAxisId,q=oe===void 0?_.yAxisId:oe;return w.cloneElement(k,{key:k.key||"".concat(I,"-").concat(z),xAxis:N[G],yAxis:L[q],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:M})}),Gt(C,"renderActivePoints",function(k){var I=k.item,z=k.activePoint,B=k.basePoint,M=k.childIndex,F=k.isRange,N=[],L=I.props.key,P=I.item.type.defaultProps!==void 0?at(at({},I.item.type.defaultProps),I.item.props):I.item.props,_=P.activeDot,R=P.dataKey,W=at(at({index:M,dataKey:R,cx:z.x,cy:z.y,r:4,fill:NS(I.item),strokeWidth:2,stroke:"#fff",payload:z.payload,value:z.value},gr(_,!1)),ym(_));return N.push(A.renderActiveDot(_,W,"".concat(L,"-activePoint-").concat(M))),B?N.push(A.renderActiveDot(_,at(at({},W),{},{cx:B.x,cy:B.y}),"".concat(L,"-basePoint-").concat(M))):F&&N.push(null),N}),Gt(C,"renderGraphicChild",function(k,I,z){var B=C.filterFormatItem(k,I,z);if(!B)return null;var M=C.getTooltipEventType(),F=C.state,N=F.isTooltipActive,L=F.tooltipAxis,P=F.activeTooltipIndex,_=F.activeLabel,R=C.props.children,W=cs(R,Vs),G=B.props,oe=G.points,q=G.isRange,V=G.baseLine,U=B.item.type.defaultProps!==void 0?at(at({},B.item.type.defaultProps),B.item.props):B.item.props,X=U.activeDot,H=U.hide,Q=U.activeBar,le=U.activeShape,me=!!(!H&&N&&W&&(X||Q||le)),je={};M!=="axis"&&W&&W.props.trigger==="click"?je={onClick:Kp(C.handleItemMouseEnter,k.props.onClick)}:M!=="axis"&&(je={onMouseLeave:Kp(C.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Kp(C.handleItemMouseEnter,k.props.onMouseEnter)});var ee=w.cloneElement(k,at(at({},B.props),je));function se(de){return typeof L.dataKey=="function"?L.dataKey(de.payload):null}if(me)if(P>=0){var fe,ue;if(L.dataKey&&!L.allowDuplicatedCategory){var We=typeof L.dataKey=="function"?se:"payload.".concat(L.dataKey.toString());fe=gm(oe,We,_),ue=q&&V&&gm(V,We,_)}else fe=oe==null?void 0:oe[P],ue=q&&V&&V[P];if(le||Q){var we=k.props.activeIndex!==void 0?k.props.activeIndex:P;return[w.cloneElement(k,at(at(at({},B.props),je),{},{activeIndex:we})),null,null]}if(!mr(fe))return[ee].concat(Dd(C.renderActivePoints({item:B,activePoint:fe,basePoint:ue,childIndex:P,isRange:q})))}else{var Me,Ee=(Me=C.getItemByXY(C.state.activeCoordinate))!==null&&Me!==void 0?Me:{graphicalItem:ee},Be=Ee.graphicalItem,it=Be.item,re=it===void 0?k:it,ce=Be.childIndex,Z=at(at(at({},B.props),je),{},{activeIndex:ce});return[w.cloneElement(re,Z),null,null]}return q?[ee,null,null]:[ee,null]}),Gt(C,"renderCustomized",function(k,I,z){return w.cloneElement(k,at(at({key:"recharts-customized-".concat(z)},C.props),C.state))}),Gt(C,"renderMap",{CartesianGrid:{handler:Jp,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:Jp},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:Jp},YAxis:{handler:Jp},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((O=E.id)!==null&&O!==void 0?O:jf("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=l8(C.triggeredAfterMouseMove,(S=E.throttleDelay)!==null&&S!==void 0?S:1e3/60),C.state={},C}return gre(A,y),fre(A,[{key:"componentDidMount",value:function(){var O,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var O=this.props,S=O.children,C=O.data,k=O.height,I=O.layout,z=cs(S,Vs);if(z){var B=z.props.defaultIndex;if(!(typeof B!="number"||B<0||B>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[B]&&this.state.tooltipTicks[B].value,F=ow(this.state,C,B,M),N=this.state.tooltipTicks[B].coordinate,L=(this.state.offset.top+k)/2,P=I==="horizontal",_=P?{x:N,y:L}:{y:N,x:L},R=this.state.formattedGraphicalItems.find(function(G){var oe=G.item;return oe.type.name==="Scatter"});R&&(_=at(at({},_),R.props.points[B].tooltipPosition),F=R.props.points[B].tooltipPayload);var W={activeTooltipIndex:B,isTooltipActive:!0,activeLabel:M,activePayload:F,activeCoordinate:_};this.setState(W),this.renderCursor(z),this.accessibilityManager.setIndex(B)}}}},{key:"getSnapshotBeforeUpdate",value:function(O,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==O.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==O.margin){var C,k;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(O){Hj([cs(O.children,Vs)],[cs(this.props.children,Vs)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var O=cs(this.props.children,Vs);if(O&&typeof O.props.shared=="boolean"){var S=O.props.shared?"axis":"item";return d.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(O){if(!this.container)return null;var S=this.container,C=S.getBoundingClientRect(),k=OW(C),I={chartX:Math.round(O.pageX-k.left),chartY:Math.round(O.pageY-k.top)},z=C.width/S.offsetWidth||1,B=this.inRange(I.chartX,I.chartY,z);if(!B)return null;var M=this.state,F=M.xAxisMap,N=M.yAxisMap,L=this.getTooltipEventType(),P=_6(this.state,this.props.data,this.props.layout,B);if(L!=="axis"&&F&&N){var _=$o(F).scale,R=$o(N).scale,W=_&&_.invert?_.invert(I.chartX):null,G=R&&R.invert?R.invert(I.chartY):null;return at(at({},I),{},{xValue:W,yValue:G},P)}return P?at(at({},I),P):null}},{key:"inRange",value:function(O,S){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,I=O/C,z=S/C;if(k==="horizontal"||k==="vertical"){var B=this.state.offset,M=I>=B.left&&I<=B.left+B.width&&z>=B.top&&z<=B.top+B.height;return M?{x:I,y:z}:null}var F=this.state,N=F.angleAxisMap,L=F.radiusAxisMap;if(N&&L){var P=$o(N);return H_({x:I,y:z},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var O=this.props.children,S=this.getTooltipEventType(),C=cs(O,Vs),k={};C&&S==="axis"&&(C.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=ym(this.props,this.handleOuterEvent);return at(at({},I),k)}},{key:"addListener",value:function(){jj.on(wj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){jj.removeListener(wj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(O,S,C){for(var k=this.state.formattedGraphicalItems,I=0,z=k.length;I<z;I++){var B=k[I];if(B.item===O||B.props.key===O.key||S===Yi(B.item.type)&&C===B.childIndex)return B}return null}},{key:"renderClipPath",value:function(){var O=this.clipPathId,S=this.state.offset,C=S.left,k=S.top,I=S.height,z=S.width;return _e.createElement("defs",null,_e.createElement("clipPath",{id:O},_e.createElement("rect",{x:C,y:k,height:I,width:z})))}},{key:"getXScales",value:function(){var O=this.state.xAxisMap;return O?Object.entries(O).reduce(function(S,C){var k=E6(C,2),I=k[0],z=k[1];return at(at({},S),{},Gt({},I,z.scale))},{}):null}},{key:"getYScales",value:function(){var O=this.state.yAxisMap;return O?Object.entries(O).reduce(function(S,C){var k=E6(C,2),I=k[0],z=k[1];return at(at({},S),{},Gt({},I,z.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(O){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[O])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(O){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[O])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(O){var S=this.state,C=S.formattedGraphicalItems,k=S.activeItem;if(C&&C.length)for(var I=0,z=C.length;I<z;I++){var B=C[I],M=B.props,F=B.item,N=F.type.defaultProps!==void 0?at(at({},F.type.defaultProps),F.props):F.props,L=Yi(F.type);if(L==="Bar"){var P=(M.data||[]).find(function(G){return GQ(O,G)});if(P)return{graphicalItem:B,payload:P}}else if(L==="RadialBar"){var _=(M.data||[]).find(function(G){return H_(O,G)});if(_)return{graphicalItem:B,payload:_}}else if(r0(B,k)||n0(B,k)||tf(B,k)){var R=MJ({graphicalItem:B,activeTooltipItem:k,itemData:N.data}),W=N.activeIndex===void 0?R:N.activeIndex;return{graphicalItem:at(at({},B),{},{childIndex:W}),payload:tf(B,k)?N.data[R]:B.props.data[R]}}}return null}},{key:"render",value:function(){var O=this;if(!tO(this))return null;var S=this.props,C=S.children,k=S.className,I=S.width,z=S.height,B=S.style,M=S.compact,F=S.title,N=S.desc,L=O6(S,ire),P=gr(L,!1);if(M)return _e.createElement(c6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},_e.createElement(Kj,Xc({},P,{width:I,height:z,title:F,desc:N}),this.renderClipPath(),nO(C,this.renderMap)));if(this.props.accessibilityLayer){var _,R;P.tabIndex=(_=this.props.tabIndex)!==null&&_!==void 0?_:0,P.role=(R=this.props.role)!==null&&R!==void 0?R:"application",P.onKeyDown=function(G){O.accessibilityManager.keyboardEvent(G)},P.onFocus=function(){O.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return _e.createElement(c6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},_e.createElement("div",Xc({className:Nr("recharts-wrapper",k),style:at({position:"relative",cursor:"default",width:I,height:z},B)},W,{ref:function(oe){O.container=oe}}),_e.createElement(Kj,Xc({},P,{width:I,height:z,title:F,desc:N,style:Sre}),this.renderClipPath(),nO(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(w.Component);Gt(j,"displayName",n),Gt(j,"defaultProps",at({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Gt(j,"getDerivedStateFromProps",function(y,A){var E=y.dataKey,O=y.data,S=y.children,C=y.width,k=y.height,I=y.layout,z=y.stackOffset,B=y.margin,M=A.dataStartIndex,F=A.dataEndIndex;if(A.updateId===void 0){var N=I6(y);return at(at(at({},N),{},{updateId:0},b(at(at({props:y},N),{},{updateId:0}),A)),{},{prevDataKey:E,prevData:O,prevWidth:C,prevHeight:k,prevLayout:I,prevStackOffset:z,prevMargin:B,prevChildren:S})}if(E!==A.prevDataKey||O!==A.prevData||C!==A.prevWidth||k!==A.prevHeight||I!==A.prevLayout||z!==A.prevStackOffset||!Zc(B,A.prevMargin)){var L=I6(y),P={chartX:A.chartX,chartY:A.chartY,isTooltipActive:A.isTooltipActive},_=at(at({},_6(A,O,I)),{},{updateId:A.updateId+1}),R=at(at(at({},L),P),_);return at(at(at({},R),b(at({props:y},R),A)),{},{prevDataKey:E,prevData:O,prevWidth:C,prevHeight:k,prevLayout:I,prevStackOffset:z,prevMargin:B,prevChildren:S})}if(!Hj(S,A.prevChildren)){var W,G,oe,q,V=cs(S,jd),U=V&&(W=(G=V.props)===null||G===void 0?void 0:G.startIndex)!==null&&W!==void 0?W:M,X=V&&(oe=(q=V.props)===null||q===void 0?void 0:q.endIndex)!==null&&oe!==void 0?oe:F,H=U!==M||X!==F,Q=!mr(O),le=Q&&!H?A.updateId:A.updateId+1;return at(at({updateId:le},b(at(at({props:y},A),{},{updateId:le,dataStartIndex:U,dataEndIndex:X}),A)),{},{prevChildren:S,dataStartIndex:U,dataEndIndex:X})}return null}),Gt(j,"renderActiveDot",function(y,A,E){var O;return w.isValidElement(y)?O=w.cloneElement(y,A):dr(y)?O=y(A):O=_e.createElement(CS,A),_e.createElement(vn,{className:"recharts-active-dot",key:E},O)});var v=w.forwardRef(function(A,E){return _e.createElement(j,Xc({},A,{ref:E}))});return v.displayName=j.displayName,v},Dre=xR({chartName:"LineChart",GraphicalChild:Ef,axisComponents:[{axisType:"xAxis",AxisComp:Od},{axisType:"yAxis",AxisComp:_d}],formatAxisMap:PD}),Rre=xR({chartName:"BarChart",GraphicalChild:ec,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Od},{axisType:"yAxis",AxisComp:_d}],formatAxisMap:PD});function gR(e,t){return function(){return e.apply(t,arguments)}}const{toString:Pre}=Object.prototype,{getPrototypeOf:MS}=Object,{iterator:d0,toStringTag:yR}=Symbol,u0=(e=>t=>{const n=Pre.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ci=e=>(e=e.toLowerCase(),t=>u0(t)===e),h0=e=>t=>typeof t===e,{isArray:Yd}=Array,cf=h0("undefined");function Mre(e){return e!==null&&!cf(e)&&e.constructor!==null&&!cf(e.constructor)&&Wa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const bR=ci("ArrayBuffer");function Bre(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&bR(e.buffer),t}const Fre=h0("string"),Wa=h0("function"),vR=h0("number"),f0=e=>e!==null&&typeof e=="object",Lre=e=>e===!0||e===!1,cm=e=>{if(u0(e)!=="object")return!1;const t=MS(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(yR in e)&&!(d0 in e)},$re=ci("Date"),zre=ci("File"),Ure=ci("Blob"),qre=ci("FileList"),Wre=e=>f0(e)&&Wa(e.pipe),Hre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Wa(e.append)&&((t=u0(e))==="formdata"||t==="object"&&Wa(e.toString)&&e.toString()==="[object FormData]"))},Gre=ci("URLSearchParams"),[Kre,Vre,Yre,Xre]=["ReadableStream","Request","Response","Headers"].map(ci),Qre=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Of(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),Yd(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let d;for(a=0;a<l;a++)d=i[a],t.call(null,e[d],d,e)}}function jR(e,t){t=t.toLowerCase();const n=Object.keys(e);let a=n.length,s;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const Rl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wR=e=>!cf(e)&&e!==Rl;function lw(){const{caseless:e}=wR(this)&&this||{},t={},n=(a,s)=>{const i=e&&jR(t,s)||s;cm(t[i])&&cm(a)?t[i]=lw(t[i],a):cm(a)?t[i]=lw({},a):Yd(a)?t[i]=a.slice():t[i]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&Of(arguments[a],n);return t}const Jre=(e,t,n,{allOwnKeys:a}={})=>(Of(t,(s,i)=>{n&&Wa(s)?e[i]=gR(s,n):e[i]=s},{allOwnKeys:a}),e),Zre=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ene=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},tne=(e,t,n,a)=>{let s,i,l;const d={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)l=s[i],(!a||a(l,e,t))&&!d[l]&&(t[l]=e[l],d[l]=!0);e=n!==!1&&MS(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},rne=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},nne=e=>{if(!e)return null;if(Yd(e))return e;let t=e.length;if(!vR(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},ane=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&MS(Uint8Array)),sne=(e,t)=>{const a=(e&&e[d0]).call(e);let s;for(;(s=a.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},ine=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},one=ci("HTMLFormElement"),lne=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,s){return a.toUpperCase()+s}),R6=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),cne=ci("RegExp"),SR=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Of(n,(s,i)=>{let l;(l=t(s,i,e))!==!1&&(a[i]=l||s)}),Object.defineProperties(e,a)},dne=e=>{SR(e,(t,n)=>{if(Wa(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(Wa(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},une=(e,t)=>{const n={},a=s=>{s.forEach(i=>{n[i]=!0})};return Yd(e)?a(e):a(String(e).split(t)),n},hne=()=>{},fne=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pne(e){return!!(e&&Wa(e.append)&&e[yR]==="FormData"&&e[d0])}const mne=e=>{const t=new Array(10),n=(a,s)=>{if(f0(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[s]=a;const i=Yd(a)?[]:{};return Of(a,(l,d)=>{const u=n(l,s+1);!cf(u)&&(i[d]=u)}),t[s]=void 0,i}}return a};return n(e,0)},xne=ci("AsyncFunction"),gne=e=>e&&(f0(e)||Wa(e))&&Wa(e.then)&&Wa(e.catch),NR=((e,t)=>e?setImmediate:t?((n,a)=>(Rl.addEventListener("message",({source:s,data:i})=>{s===Rl&&i===n&&a.length&&a.shift()()},!1),s=>{a.push(s),Rl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Wa(Rl.postMessage)),yne=typeof queueMicrotask<"u"?queueMicrotask.bind(Rl):typeof process<"u"&&process.nextTick||NR,bne=e=>e!=null&&Wa(e[d0]),Je={isArray:Yd,isArrayBuffer:bR,isBuffer:Mre,isFormData:Hre,isArrayBufferView:Bre,isString:Fre,isNumber:vR,isBoolean:Lre,isObject:f0,isPlainObject:cm,isReadableStream:Kre,isRequest:Vre,isResponse:Yre,isHeaders:Xre,isUndefined:cf,isDate:$re,isFile:zre,isBlob:Ure,isRegExp:cne,isFunction:Wa,isStream:Wre,isURLSearchParams:Gre,isTypedArray:ane,isFileList:qre,forEach:Of,merge:lw,extend:Jre,trim:Qre,stripBOM:Zre,inherits:ene,toFlatObject:tne,kindOf:u0,kindOfTest:ci,endsWith:rne,toArray:nne,forEachEntry:sne,matchAll:ine,isHTMLForm:one,hasOwnProperty:R6,hasOwnProp:R6,reduceDescriptors:SR,freezeMethods:dne,toObjectSet:une,toCamelCase:lne,noop:hne,toFiniteNumber:fne,findKey:jR,global:Rl,isContextDefined:wR,isSpecCompliantForm:pne,toJSONObject:mne,isAsyncFn:xne,isThenable:gne,setImmediate:NR,asap:yne,isIterable:bne};function nr(e,t,n,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}Je.inherits(nr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Je.toJSONObject(this.config),code:this.code,status:this.status}}});const TR=nr.prototype,CR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{CR[e]={value:e}});Object.defineProperties(nr,CR);Object.defineProperty(TR,"isAxiosError",{value:!0});nr.from=(e,t,n,a,s,i)=>{const l=Object.create(TR);return Je.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError"),nr.call(l,e.message,t,n,a,s),l.cause=e,l.name=e.name,i&&Object.assign(l,i),l};const vne=null;function cw(e){return Je.isPlainObject(e)||Je.isArray(e)}function AR(e){return Je.endsWith(e,"[]")?e.slice(0,-2):e}function P6(e,t,n){return e?e.concat(t).map(function(s,i){return s=AR(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function jne(e){return Je.isArray(e)&&!e.some(cw)}const wne=Je.toFlatObject(Je,{},null,function(t){return/^is[A-Z]/.test(t)});function p0(e,t,n){if(!Je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Je.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!Je.isUndefined(y[v])});const a=n.metaTokens,s=n.visitor||p,i=n.dots,l=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Je.isSpecCompliantForm(t);if(!Je.isFunction(s))throw new TypeError("visitor must be a function");function h(j){if(j===null)return"";if(Je.isDate(j))return j.toISOString();if(Je.isBoolean(j))return j.toString();if(!u&&Je.isBlob(j))throw new nr("Blob is not supported. Use a Buffer instead.");return Je.isArrayBuffer(j)||Je.isTypedArray(j)?u&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function p(j,v,y){let A=j;if(j&&!y&&typeof j=="object"){if(Je.endsWith(v,"{}"))v=a?v:v.slice(0,-2),j=JSON.stringify(j);else if(Je.isArray(j)&&jne(j)||(Je.isFileList(j)||Je.endsWith(v,"[]"))&&(A=Je.toArray(j)))return v=AR(v),A.forEach(function(O,S){!(Je.isUndefined(O)||O===null)&&t.append(l===!0?P6([v],S,i):l===null?v:v+"[]",h(O))}),!1}return cw(j)?!0:(t.append(P6(y,v,i),h(j)),!1)}const m=[],g=Object.assign(wne,{defaultVisitor:p,convertValue:h,isVisitable:cw});function b(j,v){if(!Je.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+v.join("."));m.push(j),Je.forEach(j,function(A,E){(!(Je.isUndefined(A)||A===null)&&s.call(t,A,Je.isString(E)?E.trim():E,v,g))===!0&&b(A,v?v.concat(E):[E])}),m.pop()}}if(!Je.isObject(e))throw new TypeError("data must be an object");return b(e),t}function M6(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function BS(e,t){this._pairs=[],e&&p0(e,this,t)}const ER=BS.prototype;ER.append=function(t,n){this._pairs.push([t,n])};ER.toString=function(t){const n=t?function(a){return t.call(this,a,M6)}:M6;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Sne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function OR(e,t,n){if(!t)return e;const a=n&&n.encode||Sne;Je.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=Je.isURLSearchParams(t)?t.toString():new BS(t,n).toString(a),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class B6{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Je.forEach(this.handlers,function(a){a!==null&&t(a)})}}const kR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nne=typeof URLSearchParams<"u"?URLSearchParams:BS,Tne=typeof FormData<"u"?FormData:null,Cne=typeof Blob<"u"?Blob:null,Ane={isBrowser:!0,classes:{URLSearchParams:Nne,FormData:Tne,Blob:Cne},protocols:["http","https","file","blob","url","data"]},FS=typeof window<"u"&&typeof document<"u",dw=typeof navigator=="object"&&navigator||void 0,Ene=FS&&(!dw||["ReactNative","NativeScript","NS"].indexOf(dw.product)<0),One=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kne=FS&&window.location.href||"http://localhost",_ne=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:FS,hasStandardBrowserEnv:Ene,hasStandardBrowserWebWorkerEnv:One,navigator:dw,origin:kne},Symbol.toStringTag,{value:"Module"})),va={..._ne,...Ane};function Ine(e,t){return p0(e,new va.classes.URLSearchParams,Object.assign({visitor:function(n,a,s,i){return va.isNode&&Je.isBuffer(n)?(this.append(a,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Dne(e){return Je.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Rne(e){const t={},n=Object.keys(e);let a;const s=n.length;let i;for(a=0;a<s;a++)i=n[a],t[i]=e[i];return t}function _R(e){function t(n,a,s,i){let l=n[i++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),u=i>=n.length;return l=!l&&Je.isArray(s)?s.length:l,u?(Je.hasOwnProp(s,l)?s[l]=[s[l],a]:s[l]=a,!d):((!s[l]||!Je.isObject(s[l]))&&(s[l]=[]),t(n,a,s[l],i)&&Je.isArray(s[l])&&(s[l]=Rne(s[l])),!d)}if(Je.isFormData(e)&&Je.isFunction(e.entries)){const n={};return Je.forEachEntry(e,(a,s)=>{t(Dne(a),s,n,0)}),n}return null}function Pne(e,t,n){if(Je.isString(e))try{return(t||JSON.parse)(e),Je.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const kf={transitional:kR,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",s=a.indexOf("application/json")>-1,i=Je.isObject(t);if(i&&Je.isHTMLForm(t)&&(t=new FormData(t)),Je.isFormData(t))return s?JSON.stringify(_R(t)):t;if(Je.isArrayBuffer(t)||Je.isBuffer(t)||Je.isStream(t)||Je.isFile(t)||Je.isBlob(t)||Je.isReadableStream(t))return t;if(Je.isArrayBufferView(t))return t.buffer;if(Je.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Ine(t,this.formSerializer).toString();if((d=Je.isFileList(t))||a.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return p0(d?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Pne(t)):t}],transformResponse:[function(t){const n=this.transitional||kf.transitional,a=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Je.isResponse(t)||Je.isReadableStream(t))return t;if(t&&Je.isString(t)&&(a&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(d){if(l)throw d.name==="SyntaxError"?nr.from(d,nr.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:va.classes.FormData,Blob:va.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Je.forEach(["delete","get","head","post","put","patch"],e=>{kf.headers[e]={}});const Mne=Je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Bne=e=>{const t={};let n,a,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!n||t[n]&&Mne[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},F6=Symbol("internals");function sh(e){return e&&String(e).trim().toLowerCase()}function dm(e){return e===!1||e==null?e:Je.isArray(e)?e.map(dm):String(e)}function Fne(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const Lne=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Nj(e,t,n,a,s){if(Je.isFunction(a))return a.call(this,t,n);if(s&&(t=n),!!Je.isString(t)){if(Je.isString(a))return t.indexOf(a)!==-1;if(Je.isRegExp(a))return a.test(t)}}function $ne(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function zne(e,t){const n=Je.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(s,i,l){return this[a].call(this,t,s,i,l)},configurable:!0})})}let Ha=class{constructor(t){t&&this.set(t)}set(t,n,a){const s=this;function i(d,u,h){const p=sh(u);if(!p)throw new Error("header name must be a non-empty string");const m=Je.findKey(s,p);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||u]=dm(d))}const l=(d,u)=>Je.forEach(d,(h,p)=>i(h,p,u));if(Je.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(Je.isString(t)&&(t=t.trim())&&!Lne(t))l(Bne(t),n);else if(Je.isObject(t)&&Je.isIterable(t)){let d={},u,h;for(const p of t){if(!Je.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[h=p[0]]=(u=d[h])?Je.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}l(d,n)}else t!=null&&i(n,t,a);return this}get(t,n){if(t=sh(t),t){const a=Je.findKey(this,t);if(a){const s=this[a];if(!n)return s;if(n===!0)return Fne(s);if(Je.isFunction(n))return n.call(this,s,a);if(Je.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=sh(t),t){const a=Je.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||Nj(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let s=!1;function i(l){if(l=sh(l),l){const d=Je.findKey(a,l);d&&(!n||Nj(a,a[d],d,n))&&(delete a[d],s=!0)}}return Je.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let a=n.length,s=!1;for(;a--;){const i=n[a];(!t||Nj(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,a={};return Je.forEach(this,(s,i)=>{const l=Je.findKey(a,i);if(l){n[l]=dm(s),delete n[i];return}const d=t?$ne(i):String(i).trim();d!==i&&delete n[i],n[d]=dm(s),a[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Je.forEach(this,(a,s)=>{a!=null&&a!==!1&&(n[s]=t&&Je.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[F6]=this[F6]={accessors:{}}).accessors,s=this.prototype;function i(l){const d=sh(l);a[d]||(zne(s,l),a[d]=!0)}return Je.isArray(t)?t.forEach(i):i(t),this}};Ha.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Je.reduceDescriptors(Ha.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});Je.freezeMethods(Ha);function Tj(e,t){const n=this||kf,a=t||n,s=Ha.from(a.headers);let i=a.data;return Je.forEach(e,function(d){i=d.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function IR(e){return!!(e&&e.__CANCEL__)}function Xd(e,t,n){nr.call(this,e??"canceled",nr.ERR_CANCELED,t,n),this.name="CanceledError"}Je.inherits(Xd,nr,{__CANCEL__:!0});function DR(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new nr("Request failed with status code "+n.status,[nr.ERR_BAD_REQUEST,nr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Une(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qne(e,t){e=e||10;const n=new Array(e),a=new Array(e);let s=0,i=0,l;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),p=a[i];l||(l=h),n[s]=u,a[s]=h;let m=i,g=0;for(;m!==s;)g+=n[m++],m=m%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),h-l<t)return;const b=p&&h-p;return b?Math.round(g*1e3/b):void 0}}function Wne(e,t){let n=0,a=1e3/t,s,i;const l=(h,p=Date.now())=>{n=p,s=null,i&&(clearTimeout(i),i=null),e.apply(null,h)};return[(...h)=>{const p=Date.now(),m=p-n;m>=a?l(h,p):(s=h,i||(i=setTimeout(()=>{i=null,l(s)},a-m)))},()=>s&&l(s)]}const fx=(e,t,n=3)=>{let a=0;const s=qne(50,250);return Wne(i=>{const l=i.loaded,d=i.lengthComputable?i.total:void 0,u=l-a,h=s(u),p=l<=d;a=l;const m={loaded:l,total:d,progress:d?l/d:void 0,bytes:u,rate:h||void 0,estimated:h&&d&&p?(d-l)/h:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(m)},n)},L6=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},$6=e=>(...t)=>Je.asap(()=>e(...t)),Hne=va.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,va.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(va.origin),va.navigator&&/(msie|trident)/i.test(va.navigator.userAgent)):()=>!0,Gne=va.hasStandardBrowserEnv?{write(e,t,n,a,s,i){const l=[e+"="+encodeURIComponent(t)];Je.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),Je.isString(a)&&l.push("path="+a),Je.isString(s)&&l.push("domain="+s),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Kne(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Vne(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function RR(e,t,n){let a=!Kne(t);return e&&(a||n==!1)?Vne(e,t):t}const z6=e=>e instanceof Ha?{...e}:e;function Gl(e,t){t=t||{};const n={};function a(h,p,m,g){return Je.isPlainObject(h)&&Je.isPlainObject(p)?Je.merge.call({caseless:g},h,p):Je.isPlainObject(p)?Je.merge({},p):Je.isArray(p)?p.slice():p}function s(h,p,m,g){if(Je.isUndefined(p)){if(!Je.isUndefined(h))return a(void 0,h,m,g)}else return a(h,p,m,g)}function i(h,p){if(!Je.isUndefined(p))return a(void 0,p)}function l(h,p){if(Je.isUndefined(p)){if(!Je.isUndefined(h))return a(void 0,h)}else return a(void 0,p)}function d(h,p,m){if(m in t)return a(h,p);if(m in e)return a(void 0,h)}const u={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(h,p,m)=>s(z6(h),z6(p),m,!0)};return Je.forEach(Object.keys(Object.assign({},e,t)),function(p){const m=u[p]||s,g=m(e[p],t[p],p);Je.isUndefined(g)&&m!==d||(n[p]=g)}),n}const PR=e=>{const t=Gl({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:l,auth:d}=t;t.headers=l=Ha.from(l),t.url=OR(RR(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(Je.isFormData(n)){if(va.hasStandardBrowserEnv||va.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[h,...p]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...p].join("; "))}}if(va.hasStandardBrowserEnv&&(a&&Je.isFunction(a)&&(a=a(t)),a||a!==!1&&Hne(t.url))){const h=s&&i&&Gne.read(i);h&&l.set(s,h)}return t},Yne=typeof XMLHttpRequest<"u",Xne=Yne&&function(e){return new Promise(function(n,a){const s=PR(e);let i=s.data;const l=Ha.from(s.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:h}=s,p,m,g,b,j;function v(){b&&b(),j&&j(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function A(){if(!y)return;const O=Ha.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),C={data:!d||d==="text"||d==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:O,config:e,request:y};DR(function(I){n(I),v()},function(I){a(I),v()},C),y=null}"onloadend"in y?y.onloadend=A:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(A)},y.onabort=function(){y&&(a(new nr("Request aborted",nr.ECONNABORTED,e,y)),y=null)},y.onerror=function(){a(new nr("Network Error",nr.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||kR;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),a(new nr(S,C.clarifyTimeoutError?nr.ETIMEDOUT:nr.ECONNABORTED,e,y)),y=null},i===void 0&&l.setContentType(null),"setRequestHeader"in y&&Je.forEach(l.toJSON(),function(S,C){y.setRequestHeader(C,S)}),Je.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),d&&d!=="json"&&(y.responseType=s.responseType),h&&([g,j]=fx(h,!0),y.addEventListener("progress",g)),u&&y.upload&&([m,b]=fx(u),y.upload.addEventListener("progress",m),y.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(p=O=>{y&&(a(!O||O.type?new Xd(null,e,y):O),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const E=Une(s.url);if(E&&va.protocols.indexOf(E)===-1){a(new nr("Unsupported protocol "+E+":",nr.ERR_BAD_REQUEST,e));return}y.send(i||null)})},Qne=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,s;const i=function(h){if(!s){s=!0,d();const p=h instanceof Error?h:this.reason;a.abort(p instanceof nr?p:new Xd(p instanceof Error?p.message:p))}};let l=t&&setTimeout(()=>{l=null,i(new nr(`timeout ${t} of ms exceeded`,nr.ETIMEDOUT))},t);const d=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),e=null)};e.forEach(h=>h.addEventListener("abort",i));const{signal:u}=a;return u.unsubscribe=()=>Je.asap(d),u}},Jne=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,s;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},Zne=async function*(e,t){for await(const n of eae(e))yield*Jne(n,t)},eae=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},U6=(e,t,n,a)=>{const s=Zne(e,t);let i=0,l,d=u=>{l||(l=!0,a&&a(u))};return new ReadableStream({async pull(u){try{const{done:h,value:p}=await s.next();if(h){d(),u.close();return}let m=p.byteLength;if(n){let g=i+=m;n(g)}u.enqueue(new Uint8Array(p))}catch(h){throw d(h),h}},cancel(u){return d(u),s.return()}},{highWaterMark:2})},m0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",MR=m0&&typeof ReadableStream=="function",tae=m0&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),BR=(e,...t)=>{try{return!!e(...t)}catch{return!1}},rae=MR&&BR(()=>{let e=!1;const t=new Request(va.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),q6=64*1024,uw=MR&&BR(()=>Je.isReadableStream(new Response("").body)),px={stream:uw&&(e=>e.body)};m0&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!px[t]&&(px[t]=Je.isFunction(e[t])?n=>n[t]():(n,a)=>{throw new nr(`Response type '${t}' is not supported`,nr.ERR_NOT_SUPPORT,a)})})})(new Response);const nae=async e=>{if(e==null)return 0;if(Je.isBlob(e))return e.size;if(Je.isSpecCompliantForm(e))return(await new Request(va.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Je.isArrayBufferView(e)||Je.isArrayBuffer(e))return e.byteLength;if(Je.isURLSearchParams(e)&&(e=e+""),Je.isString(e))return(await tae(e)).byteLength},aae=async(e,t)=>{const n=Je.toFiniteNumber(e.getContentLength());return n??nae(t)},sae=m0&&(async e=>{let{url:t,method:n,data:a,signal:s,cancelToken:i,timeout:l,onDownloadProgress:d,onUploadProgress:u,responseType:h,headers:p,withCredentials:m="same-origin",fetchOptions:g}=PR(e);h=h?(h+"").toLowerCase():"text";let b=Qne([s,i&&i.toAbortSignal()],l),j;const v=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let y;try{if(u&&rae&&n!=="get"&&n!=="head"&&(y=await aae(p,a))!==0){let C=new Request(t,{method:"POST",body:a,duplex:"half"}),k;if(Je.isFormData(a)&&(k=C.headers.get("content-type"))&&p.setContentType(k),C.body){const[I,z]=L6(y,fx($6(u)));a=U6(C.body,q6,I,z)}}Je.isString(m)||(m=m?"include":"omit");const A="credentials"in Request.prototype;j=new Request(t,{...g,signal:b,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:a,duplex:"half",credentials:A?m:void 0});let E=await fetch(j,g);const O=uw&&(h==="stream"||h==="response");if(uw&&(d||O&&v)){const C={};["status","statusText","headers"].forEach(B=>{C[B]=E[B]});const k=Je.toFiniteNumber(E.headers.get("content-length")),[I,z]=d&&L6(k,fx($6(d),!0))||[];E=new Response(U6(E.body,q6,I,()=>{z&&z(),v&&v()}),C)}h=h||"text";let S=await px[Je.findKey(px,h)||"text"](E,e);return!O&&v&&v(),await new Promise((C,k)=>{DR(C,k,{data:S,headers:Ha.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:j})})}catch(A){throw v&&v(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new nr("Network Error",nr.ERR_NETWORK,e,j),{cause:A.cause||A}):nr.from(A,A&&A.code,e,j)}}),hw={http:vne,xhr:Xne,fetch:sae};Je.forEach(hw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const W6=e=>`- ${e}`,iae=e=>Je.isFunction(e)||e===null||e===!1,FR={getAdapter:e=>{e=Je.isArray(e)?e:[e];const{length:t}=e;let n,a;const s={};for(let i=0;i<t;i++){n=e[i];let l;if(a=n,!iae(n)&&(a=hw[(l=String(n)).toLowerCase()],a===void 0))throw new nr(`Unknown adapter '${l}'`);if(a)break;s[l||"#"+i]=a}if(!a){const i=Object.entries(s).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?i.length>1?`since :
`+i.map(W6).join(`
`):" "+W6(i[0]):"as no adapter specified";throw new nr("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:hw};function Cj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xd(null,e)}function H6(e){return Cj(e),e.headers=Ha.from(e.headers),e.data=Tj.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),FR.getAdapter(e.adapter||kf.adapter)(e).then(function(a){return Cj(e),a.data=Tj.call(e,e.transformResponse,a),a.headers=Ha.from(a.headers),a},function(a){return IR(a)||(Cj(e),a&&a.response&&(a.response.data=Tj.call(e,e.transformResponse,a.response),a.response.headers=Ha.from(a.response.headers))),Promise.reject(a)})}const LR="1.10.0",x0={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{x0[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const G6={};x0.transitional=function(t,n,a){function s(i,l){return"[Axios v"+LR+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,d)=>{if(t===!1)throw new nr(s(l," has been removed"+(n?" in "+n:"")),nr.ERR_DEPRECATED);return n&&!G6[l]&&(G6[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,l,d):!0}};x0.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function oae(e,t,n){if(typeof e!="object")throw new nr("options must be an object",nr.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const i=a[s],l=t[i];if(l){const d=e[i],u=d===void 0||l(d,i,e);if(u!==!0)throw new nr("option "+i+" must be "+u,nr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new nr("Unknown option "+i,nr.ERR_BAD_OPTION)}}const um={assertOptions:oae,validators:x0},xi=um.validators;let Fl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new B6,response:new B6}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Gl(this.defaults,n);const{transitional:a,paramsSerializer:s,headers:i}=n;a!==void 0&&um.assertOptions(a,{silentJSONParsing:xi.transitional(xi.boolean),forcedJSONParsing:xi.transitional(xi.boolean),clarifyTimeoutError:xi.transitional(xi.boolean)},!1),s!=null&&(Je.isFunction(s)?n.paramsSerializer={serialize:s}:um.assertOptions(s,{encode:xi.function,serialize:xi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),um.assertOptions(n,{baseUrl:xi.spelling("baseURL"),withXsrfToken:xi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&Je.merge(i.common,i[n.method]);i&&Je.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),n.headers=Ha.concat(l,i);const d=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(u=u&&v.synchronous,d.unshift(v.fulfilled,v.rejected))});const h=[];this.interceptors.response.forEach(function(v){h.push(v.fulfilled,v.rejected)});let p,m=0,g;if(!u){const j=[H6.bind(this),void 0];for(j.unshift.apply(j,d),j.push.apply(j,h),g=j.length,p=Promise.resolve(n);m<g;)p=p.then(j[m++],j[m++]);return p}g=d.length;let b=n;for(m=0;m<g;){const j=d[m++],v=d[m++];try{b=j(b)}catch(y){v.call(this,y);break}}try{p=H6.call(this,b)}catch(j){return Promise.reject(j)}for(m=0,g=h.length;m<g;)p=p.then(h[m++],h[m++]);return p}getUri(t){t=Gl(this.defaults,t);const n=RR(t.baseURL,t.url,t.allowAbsoluteUrls);return OR(n,t.params,t.paramsSerializer)}};Je.forEach(["delete","get","head","options"],function(t){Fl.prototype[t]=function(n,a){return this.request(Gl(a||{},{method:t,url:n,data:(a||{}).data}))}});Je.forEach(["post","put","patch"],function(t){function n(a){return function(i,l,d){return this.request(Gl(d||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Fl.prototype[t]=n(),Fl.prototype[t+"Form"]=n(!0)});let lae=class $R{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const a=this;this.promise.then(s=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](s);a._listeners=null}),this.promise.then=s=>{let i;const l=new Promise(d=>{a.subscribe(d),i=d}).then(s);return l.cancel=function(){a.unsubscribe(i)},l},t(function(i,l,d){a.reason||(a.reason=new Xd(i,l,d),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new $R(function(s){t=s}),cancel:t}}};function cae(e){return function(n){return e.apply(null,n)}}function dae(e){return Je.isObject(e)&&e.isAxiosError===!0}const fw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fw).forEach(([e,t])=>{fw[t]=e});function zR(e){const t=new Fl(e),n=gR(Fl.prototype.request,t);return Je.extend(n,Fl.prototype,t,{allOwnKeys:!0}),Je.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return zR(Gl(e,s))},n}const Jt=zR(kf);Jt.Axios=Fl;Jt.CanceledError=Xd;Jt.CancelToken=lae;Jt.isCancel=IR;Jt.VERSION=LR;Jt.toFormData=p0;Jt.AxiosError=nr;Jt.Cancel=Jt.CanceledError;Jt.all=function(t){return Promise.all(t)};Jt.spread=cae;Jt.isAxiosError=dae;Jt.mergeConfig=Gl;Jt.AxiosHeaders=Ha;Jt.formToJSON=e=>_R(Je.isHTMLForm(e)?new FormData(e):e);Jt.getAdapter=FR.getAdapter;Jt.HttpStatusCode=fw;Jt.default=Jt;const{Axios:Ipe,AxiosError:Dpe,CanceledError:Rpe,isCancel:Ppe,CancelToken:Mpe,VERSION:Bpe,all:Fpe,Cancel:Lpe,isAxiosError:$pe,spread:zpe,toFormData:Upe,AxiosHeaders:qpe,HttpStatusCode:Wpe,formToJSON:Hpe,getAdapter:Gpe,mergeConfig:Kpe}=Jt,ih=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),uae=()=>{const[e,t]=w.useState(!0),[n,a]=w.useState(""),[s,i]=w.useState("overview"),[l,d]=w.useState({totalOrders:0,totalRevenue:0,counterOrders:0,staffOrders:0,guestOrders:0,regularOrders:0,counterRevenue:0,staffRevenue:0,guestRevenue:0,regularRevenue:0,totalUsers:0,todayOrders:0,todayRevenue:0}),[u,h]=w.useState([]),[p,m]=w.useState([]),[g,b]=w.useState([]),[j,v]=w.useState([]),[y,A]=w.useState([]),[E,O]=w.useState([]),[S,C]=w.useState(""),[k,I]=w.useState("all"),[z,B]=w.useState("all"),[M,F]=w.useState("all"),[N,L]=w.useState("date"),[P,_]=w.useState("desc"),[R,W]=w.useState(1),[G,oe]=w.useState(1),q=10,[V,U]=w.useState(null),[X,H]=w.useState(!1);w.useEffect(()=>{Q()},[]),w.useEffect(()=>{je()},[g,j,S,k,z,M,N,P,s]),w.useEffect(()=>{ee()},[y,R]);const Q=async()=>{var we;t(!0),a("");try{const[Me,Ee,Be,it]=await Promise.allSettled([ih.get("/counter-order/orders"),ih.get("/staff-order"),ih.get("/user-auth"),ih.get("/branch")]),re=await ih.get("/order",{params:{limit:1e3,sortBy:"createdAt",sortOrder:"desc"}}),ce=Me.status==="fulfilled"?Me.value.data:{orders:[]},Z=Ee.status==="fulfilled"?Ee.value.data:{orders:[]},de=Be.status==="fulfilled"?Be.value.data:[],te=it.status==="fulfilled"?it.value.data:[],Se=((we=ce.orders)==null?void 0:we.map(Ae=>{var Qe,pt,Bt;return{id:Ae.id,type:"counter",orderId:((Qe=Ae.invoice)==null?void 0:Qe.invoiceNumber)||Ae.id,customer:Ae.customerName||"Unknown Customer",staff:((pt=Ae.userId)==null?void 0:pt.name)||"Unknown Counter User",date:new Date(Ae.createdAt),dateString:new Date(Ae.createdAt).toLocaleDateString(),branch:((Bt=Ae.branch)==null?void 0:Bt.name)||"Unknown Branch",amount:Ae.grandTotal||Ae.totalAmount||0,status:Ae.orderStatus||"pending",paymentStatus:Ae.paymentStatus||"pending",paymentMethod:Ae.paymentMethod||"cash",items:Ae.items||[],subtotal:Ae.subtotal||0,tax:Ae.tax||0,serviceCharge:Ae.serviceCharge||0,isGuestOrder:!0,originalOrder:Ae}}))||[],Ve=[],ze=(re.data.orders||re.data.data||[]).map(Ae=>{var Qe,pt;return{id:Ae._id,type:"online",orderId:Ae.orderNumber,customer:Ae.name,staff:((Qe=Ae.userId)==null?void 0:Qe.name)||"Online Order",date:new Date(Ae.createdAt),dateString:new Date(Ae.createdAt).toLocaleDateString(),branch:((pt=Ae.branchId)==null?void 0:pt.name)||"Online",amount:Ae.total||0,status:Ae.status||"pending",paymentStatus:Ae.paymentStatus||"completed",paymentMethod:Ae.paymentMethod||"online",items:Ae.items||[],subtotal:Ae.subtotal||0,tax:Ae.tax||0,serviceCharge:0,discount:Ae.discount||0,deliveryFee:Ae.deliveryFee||0,phone:Ae.phone||"",email:Ae.email||"",deliveryOption:Ae.deliveryOption||"delivery",deliveryAddress:Ae.deliveryAddress||"",specialInstructions:Ae.specialInstructions||"",isGuestOrder:!0,originalOrder:Ae}}),Ze=[...Se,...Ve,...ze];b(Ze),v(Ze),le(Ze,de.users||de||[],null),me(Ze)}catch(Me){console.error("Error fetching dashboard data:",Me),a("Failed to load dashboard data. Please refresh the page and try again.")}finally{t(!1)}},le=(we,Me,Ee)=>{const Be=new Date().toDateString(),it=Array.isArray(we)?we:[],re=Array.isArray(Me)?Me:[],ce=it.filter(Ae=>Ae.type==="counter"),Z=it.filter(Ae=>Ae.type==="Staff Order"),de=it.filter(Ae=>Ae.type==="Guest Order"),te=it.filter(Ae=>Ae.type==="online"),Se=it.filter(Ae=>Ae.date&&Ae.date.toDateString()===Be),Ve=ce.length+Z.length+de.length+te.length,tt=ce.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0)+Z.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0)+de.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0)+te.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0),ze=Se.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0),Ze={totalOrders:Ve,totalRevenue:tt,counterOrders:ce.length,staffOrders:Z.length,guestOrders:de.length,regularOrders:te.length,counterRevenue:ce.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0),staffRevenue:Z.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0),guestRevenue:de.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0),regularRevenue:te.reduce((Ae,Qe)=>Ae+(Qe.amount||0),0),totalUsers:re.length,todayOrders:Se.length,todayRevenue:ze};d(Ze)},me=we=>{const Me=Array.isArray(we)?we:[],Ee={},Be=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Me.forEach(ce=>{if(ce.date&&ce.date.getMonth){const Z=Be[ce.date.getMonth()];Ee[Z]||(Ee[Z]={month:Z,revenue:0,orders:0}),Ee[Z].revenue+=ce.amount||0,Ee[Z].orders+=1}});const it=Object.values(Ee);m(it);const re=[{name:"Counter Orders",revenue:Me.filter(ce=>ce.type==="counter").reduce((ce,Z)=>ce+(Z.amount||0),0),orders:Me.filter(ce=>ce.type==="counter").length},{name:"Staff Orders",revenue:Me.filter(ce=>ce.type==="Staff Order").reduce((ce,Z)=>ce+(Z.amount||0),0),orders:Me.filter(ce=>ce.type==="Staff Order").length},{name:"Guest Orders",revenue:Me.filter(ce=>ce.type==="Guest Order").reduce((ce,Z)=>ce+(Z.amount||0),0),orders:Me.filter(ce=>ce.type==="Guest Order").length},{name:"Online Orders",revenue:Me.filter(ce=>ce.type==="online").reduce((ce,Z)=>ce+(Z.amount||0),0),orders:Me.filter(ce=>ce.type==="online").length}];h(re)},je=()=>{let we=s==="orders"?g:j;if(S.trim()){const Me=S.toLowerCase();we=we.filter(Ee=>Ee.orderId.toLowerCase().includes(Me)||Ee.customer.toLowerCase().includes(Me)||Ee.staff.toLowerCase().includes(Me)||Ee.branch.toLowerCase().includes(Me))}if(z!=="all"&&(we=we.filter(Me=>Me.type===z)),M!=="all"&&(we=we.filter(Me=>Me.status===M)),k!=="all"){const Me=new Date,Ee=new Date;switch(k){case"today":we=we.filter(Be=>Be.date.toDateString()===Me.toDateString());break;case"week":Ee.setDate(Me.getDate()-7),we=we.filter(Be=>Be.date>=Ee);break;case"month":Ee.setMonth(Me.getMonth()-1),we=we.filter(Be=>Be.date>=Ee);break}}we.sort((Me,Ee)=>N==="date"?P==="asc"?Me.date-Ee.date:Ee.date-Me.date:N==="amount"?P==="asc"?Me.amount-Ee.amount:Ee.amount-Me.amount:0),A(we),oe(Math.ceil(we.length/q)),W(1)},ee=()=>{const we=(R-1)*q,Me=we+q;O(y.slice(we,Me))},se=we=>{N===we?_(P==="asc"?"desc":"asc"):(L(we),_("desc"))},fe=we=>{U(we),H(!0)},ue=we=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(we),We=we=>{switch(we==null?void 0:we.toLowerCase()){case"card":return r.jsx(Ua,{size:16});case"upi":return r.jsx(Ch,{size:16});case"online":return r.jsx(Ua,{size:16});default:return r.jsx(Vi,{size:16})}};return e?r.jsxs("div",{className:"dashboard-loading",children:[r.jsx($a,{size:32,className:"animate-spin"}),r.jsx("p",{children:"Loading dashboard..."})]}):r.jsxs("div",{className:"comprehensive-dashboard",children:[n&&r.jsx("div",{className:"error-banner",children:r.jsx("span",{children:n})}),r.jsx("div",{className:"dashboard-header",children:r.jsx("h1",{children:"Dashboard"})}),r.jsxs("div",{className:"tab-navigation",children:[r.jsx("button",{className:`tab-btn ${s==="overview"?"active":""}`,onClick:()=>i("overview"),children:"Overview"}),r.jsx("button",{className:`tab-btn ${s==="orders"?"active":""}`,onClick:()=>i("orders"),children:"All Orders"}),r.jsx("button",{className:`tab-btn ${s==="payments"?"active":""}`,onClick:()=>i("payments"),children:"All Payments"})]}),s==="overview"&&r.jsxs("div",{className:"overview-content",children:[r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card primary",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(x7,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:l.totalOrders.toLocaleString()}),r.jsx("p",{children:"Total Orders"}),r.jsx("div",{className:"stat-breakdown",children:r.jsxs("span",{children:["Today: ",l.todayOrders]})})]})]}),r.jsxs("div",{className:"stat-card success",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(Vi,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:ue(l.totalRevenue)}),r.jsx("p",{children:"Total Revenue"}),r.jsx("div",{className:"stat-breakdown",children:r.jsxs("span",{children:["Today: ",ue(l.todayRevenue)]})})]})]}),r.jsxs("div",{className:"stat-card info",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(ei,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:l.totalUsers.toLocaleString()}),r.jsx("p",{children:"Total Users"})]})]})]}),r.jsxs("div",{className:"breakdown-grid",children:[r.jsxs("div",{className:"breakdown-card",children:[r.jsx("h3",{children:"Counter Orders"}),r.jsxs("div",{className:"breakdown-stats",children:[r.jsx("div",{className:"breakdown-number",children:l.counterOrders}),r.jsx("div",{className:"breakdown-revenue",children:ue(l.counterRevenue)})]})]}),r.jsxs("div",{className:"breakdown-card",children:[r.jsx("h3",{children:"Staff Orders"}),r.jsxs("div",{className:"breakdown-stats",children:[r.jsx("div",{className:"breakdown-number",children:l.staffOrders}),r.jsx("div",{className:"breakdown-revenue",children:ue(l.staffRevenue)})]})]}),r.jsxs("div",{className:"breakdown-card",children:[r.jsx("h3",{children:"Guest Orders"}),r.jsxs("div",{className:"breakdown-stats",children:[r.jsx("div",{className:"breakdown-number",children:l.guestOrders}),r.jsx("div",{className:"breakdown-revenue",children:ue(l.guestRevenue)})]})]}),r.jsxs("div",{className:"breakdown-card",children:[r.jsx("h3",{children:"Online Orders"}),r.jsxs("div",{className:"breakdown-stats",children:[r.jsx("div",{className:"breakdown-number",children:l.regularOrders}),r.jsx("div",{className:"breakdown-revenue",children:ue(l.regularRevenue)})]})]})]}),r.jsxs("div",{className:"charts-grid",children:[r.jsxs("div",{className:"chart-card",children:[r.jsx("div",{className:"chart-header",children:r.jsx("h3",{children:"Monthly Revenue Trend"})}),r.jsx("div",{className:"chart-container",children:r.jsx(Tk,{width:"100%",height:300,children:r.jsxs(Dre,{data:p,children:[r.jsx(X2,{strokeDasharray:"3 3"}),r.jsx(Od,{dataKey:"month"}),r.jsx(_d,{}),r.jsx(Vs,{formatter:we=>[ue(we),"Revenue"]}),r.jsx(Ef,{type:"monotone",dataKey:"revenue",stroke:"#FF7E47",strokeWidth:2})]})})})]}),r.jsxs("div",{className:"chart-card",children:[r.jsx("div",{className:"chart-header",children:r.jsx("h3",{children:"Revenue by Type"})}),r.jsx("div",{className:"chart-container",children:r.jsx(Tk,{width:"100%",height:300,children:r.jsxs(Rre,{data:u,children:[r.jsx(X2,{strokeDasharray:"3 3"}),r.jsx(Od,{dataKey:"name"}),r.jsx(_d,{}),r.jsx(Vs,{formatter:we=>[ue(we),"Revenue"]}),r.jsx(ec,{dataKey:"revenue",fill:"#FF7E47"})]})})})]})]})]}),(s==="orders"||s==="payments")&&r.jsxs("div",{className:"data-content",children:[r.jsxs("div",{className:"filters-section",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by order ID, customer, or branch...",className:"search-input",value:S,onChange:we=>C(we.target.value)})]}),r.jsxs("div",{className:"filter-controls",children:[r.jsxs("select",{className:"filter-select",value:z,onChange:we=>B(we.target.value),children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"counter",children:"Counter"}),r.jsx("option",{value:"Staff Order",children:"Staff"}),r.jsx("option",{value:"Guest Order",children:"Guest"}),r.jsx("option",{value:"online",children:"Online"})]}),r.jsxs("select",{className:"filter-select",value:M,onChange:we=>F(we.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs("select",{className:"filter-select",value:k,onChange:we=>I(we.target.value),children:[r.jsx("option",{value:"all",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"This Week"}),r.jsx("option",{value:"month",children:"This Month"})]})]})]}),r.jsx("div",{className:"data-table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order ID"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Order By"}),r.jsx("th",{className:"sortable-header",onClick:()=>se("date"),children:r.jsxs("div",{className:"sort-header",children:[r.jsx("span",{children:"Date"}),N==="date"&&(P==="asc"?r.jsx(Ko,{size:16}):r.jsx(Go,{size:16}))]})}),r.jsx("th",{children:"Branch"}),r.jsx("th",{className:"sortable-header",onClick:()=>se("amount"),children:r.jsxs("div",{className:"sort-header",children:[r.jsx("span",{children:"Amount"}),N==="amount"&&(P==="asc"?r.jsx(Ko,{size:16}):r.jsx(Go,{size:16}))]})}),s==="orders"&&r.jsx("th",{children:"Status"}),s==="payments"&&r.jsx("th",{children:"Payment Method"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:E.length>0?E.map(we=>r.jsxs("tr",{children:[r.jsx("td",{children:we.orderId}),r.jsx("td",{children:we.type==="Staff Order"||we.type==="Guest Order"?we.type:we.type.charAt(0).toUpperCase()+we.type.slice(1)+" Order"}),r.jsx("td",{children:we.customer}),r.jsx("td",{children:we.dateString}),r.jsx("td",{children:we.branch}),r.jsxs("td",{children:["",we.amount.toFixed(2)]}),s==="orders"&&r.jsx("td",{children:r.jsx("span",{className:`status-badge ${we.status}`,children:we.status.charAt(0).toUpperCase()+we.status.slice(1)})}),s==="payments"&&r.jsx("td",{children:r.jsxs("div",{className:"payment-method",children:[We(we.paymentMethod),r.jsx("span",{children:we.paymentMethod.charAt(0).toUpperCase()+we.paymentMethod.slice(1)})]})}),r.jsx("td",{children:r.jsxs("button",{className:"action-btn view",onClick:()=>fe(we),children:[r.jsx(xs,{size:16}),"View"]})})]},`${we.type}-${we.id}`)):r.jsx("tr",{children:r.jsxs("td",{colSpan:"8",className:"no-data",children:["No ",s," found matching your criteria"]})})})]})}),G>1&&r.jsxs("div",{className:"pagination",children:[r.jsxs("button",{className:"pagination-btn",onClick:()=>W(we=>Math.max(we-1,1)),disabled:R===1,children:[r.jsx(Fd,{size:16}),"Previous"]}),r.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.min(5,G)},(we,Me)=>{let Ee;return G<=5||R<=3?Ee=Me+1:R>=G-2?Ee=G-4+Me:Ee=R-2+Me,r.jsx("button",{className:`pagination-page ${R===Ee?"active":""}`,onClick:()=>W(Ee),children:Ee},Ee)})}),r.jsxs("button",{className:"pagination-btn",onClick:()=>W(we=>Math.min(we+1,G)),disabled:R===G,children:["Next",r.jsx(Ld,{size:16})]})]})]}),X&&V&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{children:[V.type==="Staff Order"||V.type==="Guest Order"?V.type:V.type.charAt(0).toUpperCase()+V.type.slice(1)," ",s==="orders"?"Order":"Payment"," Details"]}),r.jsx("button",{className:"modal-close",onClick:()=>H(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"details-grid",children:[r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Basic Information"}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Order ID:"}),r.jsx("span",{className:"detail-value",children:V.orderId})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Type:"}),r.jsx("span",{className:"detail-value",children:V.type})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Customer:"}),r.jsx("span",{className:"detail-value",children:V.customer})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Date:"}),r.jsx("span",{className:"detail-value",children:V.date.toLocaleString()})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Branch:"}),r.jsx("span",{className:"detail-value",children:V.branch})]}),V.tableNumber&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Table:"}),r.jsx("span",{className:"detail-value",children:V.tableNumber})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Payment Information"}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Subtotal:"}),r.jsxs("span",{className:"detail-value",children:["",V.subtotal.toFixed(2)]})]}),V.discount>0&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Discount:"}),r.jsxs("span",{className:"detail-value",style:{color:"#22c55e"},children:["-",V.discount.toFixed(2)]})]}),V.tax>0&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Tax:"}),r.jsxs("span",{className:"detail-value",children:["",V.tax.toFixed(2)]})]}),V.type!=="online"&&V.serviceCharge>0&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Service Charge:"}),r.jsxs("span",{className:"detail-value",children:["",V.serviceCharge.toFixed(2)]})]}),V.deliveryFee>0&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Delivery Fee:"}),r.jsxs("span",{className:"detail-value",children:["",V.deliveryFee.toFixed(2)]})]}),r.jsxs("div",{className:"detail-row total",children:[r.jsx("span",{className:"detail-label",children:"Total Amount:"}),r.jsxs("span",{className:"detail-value",children:["",V.amount.toFixed(2)]})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Payment Method:"}),r.jsx("span",{className:"detail-value",children:r.jsxs("div",{className:"payment-method",children:[We(V.paymentMethod),r.jsx("span",{children:V.paymentMethod.charAt(0).toUpperCase()+V.paymentMethod.slice(1)})]})})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Payment Status:"}),r.jsx("span",{className:"detail-value",children:r.jsx("span",{className:`status-badge ${V.paymentStatus}`,children:V.paymentStatus})})]})]}),V.type==="online"&&r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Delivery Information"}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Delivery Option:"}),r.jsx("span",{className:"detail-value",children:V.deliveryOption})]}),V.phone&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Phone:"}),r.jsx("span",{className:"detail-value",children:V.phone})]}),V.type==="online"&&V.email&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Email:"}),r.jsx("span",{className:"detail-value",children:V.email})]}),V.type==="online"&&V.deliveryAddress&&r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"detail-label",children:"Delivery Address:"}),r.jsx("span",{className:"detail-value",children:V.deliveryAddress})]})]})]}),V.items&&V.items.length>0&&r.jsxs("div",{className:"items-section",children:[r.jsx("h4",{children:"Order Items"}),r.jsxs("table",{className:"items-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:V.items.map((we,Me)=>r.jsxs("tr",{children:[r.jsx("td",{children:we.name}),r.jsx("td",{children:we.quantity}),r.jsxs("td",{children:["",we.price.toFixed(2)]}),r.jsxs("td",{children:["",(we.quantity*we.price).toFixed(2)]})]},Me))})]})]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn btn-outline",onClick:()=>H(!1),children:"Close"})})]})})]})},hae=async e=>{const t=e.headers.get("content-type");if(!t||!t.includes("application/json")){const n=await e.text();throw new Error(`Expected JSON but received ${t||"unknown content type"}. Response: ${n.substring(0,200)}`)}try{return await e.json()}catch(n){throw new Error(`Failed to parse JSON: ${n.message}`)}},fae=async(e,t={})=>{try{const n=await fetch(e,t);if(!n.ok){const a=n.headers.get("content-type");if(a&&a.includes("application/json")){const i=await n.json();throw console.error("Backend error response:",i),new Error(i.message||`HTTP ${n.status}: ${n.statusText}`)}const s=await n.text();throw console.error("Backend error text:",s),new Error(`HTTP ${n.status}: ${s.substring(0,200)}`)}return await hae(n)}catch(n){throw n.message.includes("Failed to fetch")?new Error(`Network error: Unable to reach ${e}. Please check your connection.`):n}},pae=()=>{const e="https://hotelvirat.com/api/v1/hotel",t="https://hotelvirat.com/api/v1/hotel";return console.log(" Using backends:",{primary:e,secondary:t,mode:"production"}),[e,t]},vr=async(e,t={},n=!1)=>{var l;const a=pae(),[s]=a,i=t.method||"GET";(i==="POST"||i==="PUT")&&t.body&&!((l=t.headers)!=null&&l["Content-Type"])&&(t.body instanceof FormData||(t.headers={...t.headers,"Content-Type":"application/json"}));try{const d=`${s}${e}`;console.log(` ${i} ${d}`),console.log(` Endpoint: "${e}"`),console.log(` Primary URL: "${s}"`);const u=await fae(d,t),h=u.menuItem||u.category||u.data||u;return console.log(` ${i} successful`),h}catch(d){throw console.error(` ${i} failed:`,d.message),d.message.includes("400")&&(console.error("400 Bad Request - likely validation error"),console.error("Full error:",d)),d}},mae=()=>{var O;const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState("all"),[l,d]=w.useState("all"),[u,h]=w.useState(null),[p,m]=w.useState(null);w.useEffect(()=>{JSON.parse(localStorage.getItem("user")||"{}");const S=localStorage.getItem("categoryAccess");console.log(" Orders Component Loaded - Build Version: 2026-01-05-v2"),console.log("User category access:",S),m(S),g();const C=setInterval(g,3e4);return()=>clearInterval(C)},[]);const g=async()=>{try{console.log(" Fetching orders from mobile app only...");const S=N=>{var R,W,G;const L=((R=N.categoryName)==null?void 0:R.toLowerCase().trim())||"";if(L){if(L.includes("temple")||L.includes("meal"))return"temple";if(L.includes("self")||L.includes("service"))return"self-service";if(L.includes("restaurant"))return"restaurant"}const P=(N.orderId||N.orderNumber||N._id||"").toLowerCase();if(P.includes("-tm-")||P.includes("temple"))return"temple";if(P.includes("-ss-")||P.includes("counter"))return"self-service";if(P.includes("-res-"))return"restaurant";if(N.items&&Array.isArray(N.items)&&N.items.length>0){const oe={"692fe2788b36a58df247e06f":"restaurant","692fe2978b36a58df247e072":"self-service","692fe2ae8b36a58df247e075":"temple"},q=N.items.map(V=>{var X;const U=typeof V.categoryId=="string"?V.categoryId:((X=V.categoryId)==null?void 0:X._id)||V.categoryId;return oe[U]}).filter(Boolean);if(q.length>0){const V={};return q.forEach(X=>{V[X]=(V[X]||0)+1}),Object.keys(V).reduce((X,H)=>V[X]>V[H]?X:H)}}const _=((W=N.tableNumber)==null?void 0:W.toString().toLowerCase())||"";return _.includes("counter")||_.includes("self")?"self-service":(console.log(" No clear category found, defaulting to restaurant for order:",{orderId:N.orderId||N.orderNumber||N._id,categoryName:N.categoryName,hasItems:!!((G=N.items)!=null&&G.length),tableNumber:N.tableNumber}),"restaurant")},C=await vr("/order",{},!0).catch(N=>(console.log("Mobile app order endpoint failed:",N.message),[]));let k=[];const I=C;k=Array.isArray(I)?I:I.orders||[],console.log(` Mobile app orders found: ${k.length}`),k=k.map(N=>{var _,R;let L="Restaurant";const P=(N.orderId||N.orderNumber||N._id||"").toLowerCase();if(P.includes("-tm-")||P.includes("temple")?L="Temple Meals":P.includes("-ss-")||P.includes("counter")?L="Self Service":P.includes("-res-")&&(L="Restaurant"),N.items&&N.items.length>0){const W=N.items.map(G=>G.categoryId).filter(Boolean);if(W.length>0){const G={};W.forEach(V=>{G[V]=(G[V]||0)+1});const oe=Object.keys(G).reduce((V,U)=>G[V]>G[U]?V:U),q={"692fe2788b36a58df247e06f":"Restaurant","692fe2978b36a58df247e072":"Self Service","692fe2ae8b36a58df247e075":"Temple Meals"};q[oe]&&(L=q[oe])}}return{...N,customerName:N.name||N.customerName||"Mobile User",customerMobile:N.phone||N.customerMobile||N.customerPhone,customerPhone:N.phone||N.customerPhone||N.customerMobile,tableNumber:N.tableNumber||"Mobile Order",branchName:((_=N.branchId)==null?void 0:_.name)||N.branchName||"Hotel Virat",grandTotal:N.total||N.grandTotal||N.totalAmount,totalAmount:N.total||N.totalAmount||N.grandTotal,status:N.status||"pending",items:N.items||[],subtotal:N.subtotal||N.total||0,tax:N.tax||0,serviceCharge:N.serviceCharge||0,deliveryFee:N.deliveryFee||0,deliveryOption:N.deliveryOption||"delivery",deliveryAddress:N.deliveryAddress||"",paymentMethod:N.paymentMethod||"cash",specialInstructions:N.specialInstructions||"",couponCode:N.couponCode||"",discount:N.discount||0,categoryName:N.categoryName||L,orderType:S({...N,categoryName:N.categoryName||L})}}),console.log(" Mobile Orders by Type:",{restaurant:k.filter(N=>N.orderType==="restaurant").length,selfService:k.filter(N=>N.orderType==="self-service").length,temple:k.filter(N=>N.orderType==="temple").length});const z=k;console.log(` Total mobile app orders: ${z.length}`),console.log(" Final Order Type Distribution:",{restaurant:z.filter(N=>N.orderType==="restaurant").length,selfService:z.filter(N=>N.orderType==="self-service").length,temple:z.filter(N=>N.orderType==="temple").length,undefined:z.filter(N=>!N.orderType).length});const B=localStorage.getItem("categoryAccess");let M=z;B&&B!=="All"&&(M=z.filter(N=>N.categoryName===B),console.log(` Filtered ${z.length} orders to ${M.length} for category: ${B}`));const F=Array.isArray(M)?M.sort((N,L)=>{const P=new Date(N.createdAt||N.orderTime||N.updatedAt||0),_=new Date(L.createdAt||L.orderTime||L.updatedAt||0),R=_-P;return(M.indexOf(N)<3||M.indexOf(L)<3)&&console.log(" Sorting Debug:",{orderA:N.orderId||N.orderNumber||N._id,dateA:P.toISOString(),orderB:L.orderId||L.orderNumber||L._id,dateB:_.toISOString(),result:R>0?"B is newer":"A is newer"}),R}):[];console.log(" Final sorted orders (first 5):",F.slice(0,5).map(N=>({orderId:N.orderId||N.orderNumber||N._id,orderType:N.orderType,createdAt:N.createdAt,status:N.status}))),t(F),console.log(` Orders loaded successfully: ${F.length} orders`)}catch(S){console.error(" Error fetching orders:",S),t([])}finally{a(!1)}},b=async(S,C)=>{try{console.log(` Updating order ${S} status to ${C}`);const[k,I]=await Promise.allSettled([vr(`/staff-order/${S}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:C})}).catch(M=>(console.log("Staff order update failed:",M.message),null)),vr(`/order/${S}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:C})}).catch(M=>(console.log("Regular order update failed:",M.message),null))]),z=k.status==="fulfilled"&&k.value,B=I.status==="fulfilled"&&I.value;if(z||B)console.log(` Order ${S} status updated successfully`),await g(),h(null);else throw new Error("Failed to update order in both endpoints")}catch(k){console.error(" Error updating order:",k),alert("Failed to update order status. Please try again.")}},j=S=>{switch(S){case"temple":return"";case"self-service":return"";case"restaurant":return"";default:return""}},v=S=>{switch(S){case"temple":return"Temple Meals";case"self-service":return"Self Service";case"restaurant":return"Restaurant Order";default:return"Order"}},y=e.filter(S=>(e.indexOf(S)<5&&console.log(" Order Filter Debug:",{orderId:S.orderId||S.orderNumber||S._id,orderType:S.orderType,orderTypeTab:l,willShow:l==="all"||S.orderType===l}),l!=="all"&&S.orderType!==l?!1:s==="all"?!0:S.status===s)),A=S=>{switch(S){case"pending":return"#f59e0b";case"confirmed":return"#3b82f6";case"preparing":return"#8b5cf6";case"out for delivery":return"#06b6d4";case"delivered":return"#10b981";case"cancelled":return"#ef4444";default:return"#6b7280"}},E=S=>{switch(S){case"pending":return r.jsx(Kc,{size:20});case"confirmed":return r.jsx(od,{size:20});case"preparing":return r.jsx(Kc,{size:20});case"out for delivery":return r.jsx(Kc,{size:20});case"delivered":return r.jsx(od,{size:20});case"cancelled":return r.jsx(vL,{size:20});default:return r.jsx(Kc,{size:20})}};return r.jsxs("div",{style:qt.container,children:[r.jsxs("div",{style:qt.header,children:[r.jsxs("div",{children:[r.jsx("h1",{style:qt.title,children:"Mobile App Orders"}),r.jsx("p",{style:{margin:"5px 0 0",opacity:.7,fontSize:"14px"},children:"Orders placed from the Hotel Virat mobile app"}),p&&p!=="All"&&r.jsxs("p",{style:qt.categoryBadge,children:["Showing: ",p," orders only"]})]}),r.jsx("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:r.jsx("button",{onClick:g,style:qt.refreshBtn,children:"Refresh"})})]}),r.jsx("div",{style:qt.orderTypeTabs,children:[{key:"all",label:"All Orders",icon:""},{key:"restaurant",label:"Restaurant Orders",icon:""},{key:"temple",label:"Temple Meals",icon:""},{key:"self-service",label:"Self Service",icon:""}].map(S=>{const C=e.filter(k=>S.key==="all"||k.orderType===S.key).length;return console.log(` Tab ${S.key} count: ${C}`),r.jsxs("button",{onClick:()=>{console.log(` Switching to tab: ${S.key}`),d(S.key)},style:{...qt.orderTypeTab,...l===S.key?qt.orderTypeTabActive:{}},children:[r.jsx("span",{style:{marginRight:"8px"},children:S.icon}),S.label,r.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px",opacity:.8},children:["(",C,")"]})]},S.key)})}),r.jsx("div",{style:qt.filterTabs,children:["all","pending","confirmed","preparing","out for delivery","delivered","cancelled"].map(S=>{const C=e.filter(I=>l==="all"||I.orderType===l),k=S==="all"?C.length:C.filter(I=>I.status===S).length;return r.jsxs("button",{onClick:()=>i(S),style:{...qt.filterTab,...s===S?qt.filterTabActive:{}},children:[S==="out for delivery"?"Out for Delivery":S.charAt(0).toUpperCase()+S.slice(1),r.jsxs("span",{style:{marginLeft:"6px"},children:["(",k,")"]})]},S)})}),n?r.jsx("div",{style:qt.loading,children:"Loading orders..."}):y.length===0?r.jsx("div",{style:qt.empty,children:"No orders found"}):r.jsx("div",{style:qt.ordersList,children:y.map(S=>{var C;return r.jsxs("div",{style:qt.orderCard,children:[r.jsxs("div",{style:qt.orderHeader,children:[r.jsxs("div",{children:[r.jsxs("h3",{style:qt.orderTitle,children:[j(S.orderType)," ",S.tableNumber==="Mobile Order"?"Mobile Order":`Table ${S.tableNumber}`]}),r.jsx("p",{style:qt.orderTime,children:new Date(S.createdAt||S.orderTime||S.updatedAt).toLocaleString()}),r.jsx("p",{style:qt.orderTypeLabel,children:v(S.orderType)})]}),r.jsxs("div",{style:{...qt.statusBadge,backgroundColor:A(S.status)},children:[E(S.status),r.jsx("span",{children:S.status})]})]}),r.jsxs("div",{style:qt.orderDetails,children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Customer:"})," ",S.customerName||"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",S.customerMobile||S.customerPhone||"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Branch:"})," ",S.branchName||"Hotel Virat"]}),S.deliveryOption&&r.jsxs("p",{children:[r.jsx("strong",{children:"Type:"})," ",S.deliveryOption==="delivery"?" Delivery":" Pickup"]}),S.deliveryAddress&&r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," ",S.deliveryAddress]}),S.paymentMethod&&r.jsxs("p",{children:[r.jsx("strong",{children:"Payment:"})," ",S.paymentMethod.toUpperCase()]}),S.categoryName&&r.jsxs("p",{children:[r.jsx("strong",{children:"Category:"})," ",S.categoryName]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Items:"})," ",((C=S.items)==null?void 0:C.length)||0]}),S.couponCode&&r.jsxs("p",{children:[r.jsx("strong",{children:"Coupon:"})," ",S.couponCode," (-",S.discount||0,")"]}),r.jsxs("p",{style:qt.orderTotal,children:[r.jsx("strong",{children:"Total:"})," ",(S.grandTotal||S.totalAmount||S.total||0).toFixed(2)]})]}),r.jsxs("div",{style:qt.orderActions,children:[r.jsxs("button",{onClick:()=>h(S),style:qt.viewBtn,children:[r.jsx(xs,{size:16}),"View Details"]}),S.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>b(S._id,"delivered"),style:qt.completeBtn,children:"Complete"}),r.jsx("button",{onClick:()=>b(S._id,"cancelled"),style:qt.cancelBtn,children:"Cancel"})]})]})]},S._id)})}),u&&r.jsx("div",{style:qt.modalOverlay,onClick:()=>h(null),children:r.jsxs("div",{style:qt.modal,onClick:S=>S.stopPropagation(),children:[r.jsxs("div",{style:qt.modalHeader,children:[r.jsx("h2",{children:"Order Details"}),r.jsx("button",{onClick:()=>h(null),style:qt.closeBtn,children:""})]}),r.jsxs("div",{style:qt.modalBody,children:[r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Order Type:"}),r.jsx("span",{children:u.tableNumber==="Mobile Order"?" Mobile App Order":` Table ${u.tableNumber}`})]}),r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Customer:"}),r.jsx("span",{children:u.customerName||"N/A"})]}),r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Phone:"}),r.jsx("span",{children:u.customerMobile||u.customerPhone||"N/A"})]}),r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Status:"}),r.jsx("span",{style:{color:A(u.status),fontWeight:"bold"},children:u.status})]}),u.deliveryOption&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Delivery Type:"}),r.jsx("span",{children:u.deliveryOption==="delivery"?" Delivery":" Pickup"})]}),u.deliveryAddress&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Delivery Address:"}),r.jsx("span",{children:u.deliveryAddress})]}),u.paymentMethod&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Payment Method:"}),r.jsx("span",{children:u.paymentMethod.toUpperCase()})]}),u.couponCode&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Coupon Applied:"}),r.jsx("span",{children:u.couponCode})]}),u.specialInstructions&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Special Instructions:"}),r.jsx("span",{children:u.specialInstructions})]}),u.notes&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Notes:"}),r.jsx("span",{children:u.notes})]}),r.jsx("h3",{style:qt.itemsTitle,children:"Items:"}),(O=u.items)==null?void 0:O.map((S,C)=>r.jsxs("div",{style:qt.itemRow,children:[r.jsxs("div",{children:[r.jsx("div",{style:qt.itemName,children:S.name}),r.jsxs("div",{style:qt.itemQty,children:[S.quantity||S.count||1,"  ",S.price]})]}),r.jsxs("div",{style:qt.itemPrice,children:["",((S.price||0)*(S.quantity||S.count||1)).toFixed(2)]})]},C)),r.jsxs("div",{style:qt.totalRow,children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["",(u.subtotal||u.totalAmount||u.total||0).toFixed(2)]})]}),u.discount>0&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Discount:"}),r.jsxs("span",{style:{color:"#10b981"},children:["-",u.discount.toFixed(2)]})]}),u.deliveryFee>0&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Delivery Fee:"}),r.jsxs("span",{children:["",u.deliveryFee.toFixed(2)]})]}),u.tax>0&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Tax (5%):"}),r.jsxs("span",{children:["",u.tax.toFixed(2)]})]}),u.serviceCharge>0&&r.jsxs("div",{style:qt.detailRow,children:[r.jsx("span",{children:"Service Charge (10%):"}),r.jsxs("span",{children:["",u.serviceCharge.toFixed(2)]})]}),r.jsxs("div",{style:qt.totalRow,children:[r.jsx("span",{children:"Grand Total:"}),r.jsxs("span",{children:["",(u.grandTotal||u.totalAmount||u.total||0).toFixed(2)]})]})]})]})})]})},qt={container:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},title:{fontSize:"28px",fontWeight:"bold",margin:0},categoryBadge:{display:"inline-block",marginTop:"8px",padding:"6px 12px",backgroundColor:"#10b981",color:"white",borderRadius:"6px",fontSize:"14px",fontWeight:"600"},refreshBtn:{padding:"10px 20px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},orderTypeTabs:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap",borderBottom:"2px solid #f3f4f6",paddingBottom:"16px"},orderTypeTab:{display:"flex",alignItems:"center",padding:"10px 16px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",whiteSpace:"nowrap",transition:"all 0.2s ease"},orderTypeTabActive:{backgroundColor:"#3b82f6",color:"white",borderColor:"#3b82f6"},orderTypeLabel:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},filterTabs:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},filterTab:{padding:"8px 16px",backgroundColor:"#f3f4f6",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",whiteSpace:"nowrap"},filterTabActive:{backgroundColor:"#10b981",color:"white"},loading:{textAlign:"center",padding:"40px",color:"#6b7280"},empty:{textAlign:"center",padding:"40px",color:"#6b7280"},ordersList:{display:"grid",gap:"16px"},orderCard:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"20px"},orderHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},orderTitle:{fontSize:"20px",fontWeight:"bold",margin:"0 0 4px 0"},orderTime:{fontSize:"14px",color:"#6b7280",margin:0},statusBadge:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",color:"white",fontSize:"14px",fontWeight:"600"},orderDetails:{marginBottom:"16px",fontSize:"14px",lineHeight:"1.8"},orderTotal:{fontSize:"18px",color:"#10b981",marginTop:"8px"},orderActions:{display:"flex",gap:"8px",flexWrap:"wrap"},viewBtn:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},completeBtn:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},cancelBtn:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modal:{backgroundColor:"white",borderRadius:"12px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #e5e7eb"},closeBtn:{background:"none",border:"none",fontSize:"32px",cursor:"pointer",color:"#6b7280",lineHeight:1},modalBody:{padding:"20px",overflowY:"auto"},detailRow:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #f3f4f6"},itemsTitle:{marginTop:"20px",marginBottom:"12px",fontSize:"18px",fontWeight:"bold"},itemRow:{display:"flex",justifyContent:"space-between",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px",marginBottom:"8px"},itemName:{fontWeight:"600",marginBottom:"4px"},itemQty:{fontSize:"14px",color:"#6b7280"},itemPrice:{fontWeight:"bold",color:"#10b981"},totalRow:{display:"flex",justifyContent:"space-between",marginTop:"20px",padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"8px",fontSize:"20px",fontWeight:"bold",color:"#10b981"}},hm=e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","")||"https://hotelvirat.com";let n=e.toString().trim().replace(/\\/g,"/"),a;if(n.startsWith("/"))a=`${t}${n}`;else if(n.startsWith("uploads/"))a=`${t}/${n}`;else{const s=n.split("/").pop();a=`${t}/uploads/menu/${s}`}return a},xae=e=>{if(!e)return null;if(e.startsWith("http://localhost"))return e.replace("https://hotelvirat.com","https://hotelvirat.com");if(e.startsWith("https://hotelvirat.com")||e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com";let n=e.toString().trim().replace(/\\/g,"/"),a;if(n.startsWith("/"))a=`${t}${n}`;else if(n.startsWith("uploads/"))a=`${t}/${n}`;else{const s=n.split("/").pop();a=`${t}/uploads/menu/${s}`}return a},gae=({product:e,onClose:t,onSave:n,branches:a,categories:s,selectedBranch:i})=>{var F,N,L;const l=!!e,d=["Small","Medium","Large"],[u,h]=w.useState({menuItemNumber:(e==null?void 0:e.menuItemNumber)||"",name:(e==null?void 0:e.name)||"",branchId:typeof(e==null?void 0:e.branchId)=="object"?((F=e==null?void 0:e.branchId)==null?void 0:F._id)||i:(e==null?void 0:e.branchId)||i,categoryId:typeof(e==null?void 0:e.categoryId)=="object"?((N=e==null?void 0:e.categoryId)==null?void 0:N._id)||"":(e==null?void 0:e.categoryId)||"",subcategoryId:typeof(e==null?void 0:e.subcategoryId)=="object"?((L=e==null?void 0:e.subcategoryId)==null?void 0:L._id)||"":(e==null?void 0:e.subcategoryId)||"",quantities:(e==null?void 0:e.quantities)||[],prices:(e==null?void 0:e.prices)||{},image:null,subscriptionEnabled:(e==null?void 0:e.subscriptionEnabled)||!1,subscriptionPlans:(e==null?void 0:e.subscriptionPlans)||[],subscriptionAmount:(e==null?void 0:e.subscriptionAmount)||0,subscriptionDiscount:(e==null?void 0:e.subscriptionDiscount)||0,subscriptionDuration:(e==null?void 0:e.subscriptionDuration)||"3days",subscription3DaysDiscount:(e==null?void 0:e.subscription3DaysDiscount)||5,subscription1WeekDiscount:(e==null?void 0:e.subscription1WeekDiscount)||10,subscription1MonthDiscount:(e==null?void 0:e.subscription1MonthDiscount)||15,subscription3DaysPrice:(e==null?void 0:e.subscription3DaysPrice)||100,subscription1WeekPrice:(e==null?void 0:e.subscription1WeekPrice)||250,subscription1MonthPrice:(e==null?void 0:e.subscription1MonthPrice)||500}),[p,m]=w.useState([]),[g,b]=w.useState([]),[j,v]=w.useState([]),[y,A]=w.useState(null),[E,O]=w.useState(!1),[S,C]=w.useState("");w.useEffect(()=>{(async()=>{try{const _=await vr("/subcategory");b(_||[])}catch(_){console.error("Error fetching subcategories:",_)}})()},[]),w.useEffect(()=>{var P,_,R;e&&h({name:e.name||"",branchId:typeof e.branchId=="object"?((P=e.branchId)==null?void 0:P._id)||i:e.branchId||i,categoryId:typeof e.categoryId=="object"?((_=e.categoryId)==null?void 0:_._id)||"":e.categoryId||"",subcategoryId:typeof e.subcategoryId=="object"?((R=e.subcategoryId)==null?void 0:R._id)||"":e.subcategoryId||"",quantities:e.quantities||[],prices:e.prices||{},image:null,subscriptionEnabled:e.subscriptionEnabled||!1,subscriptionPlans:e.subscriptionPlans||[],subscriptionAmount:e.subscriptionAmount||0,subscriptionDiscount:e.subscriptionDiscount||0,subscriptionDuration:e.subscriptionDuration||"3days",subscription3DaysDiscount:e.subscription3DaysDiscount||5,subscription1WeekDiscount:e.subscription1WeekDiscount||10,subscription1MonthDiscount:e.subscription1MonthDiscount||15,subscription3DaysPrice:e.subscription3DaysPrice||100,subscription1WeekPrice:e.subscription1WeekPrice||250,subscription1MonthPrice:e.subscription1MonthPrice||500})},[e,i]),w.useEffect(()=>{if(e!=null&&e.image){const P=hm(e.image);A(P)}else A(null)},[e]),w.useEffect(()=>{if(console.log(" Categories changed or branch changed:",{totalCategories:s.length,selectedBranchId:u.branchId,categories:s.map(P=>{var _;return{name:P.name,branchId:P.branchId,branchObjId:(_=P.branch)==null?void 0:_.id,_id:P._id}})}),s.length>0&&u.branchId){const P=s.filter(_=>{var G;const R=_.branchId||((G=_.branch)==null?void 0:G.id),W=R===u.branchId;return console.log(`Category "${_.name}": branchId=${R}, matches=${W}`),W});console.log(` Filtered ${P.length} categories for branch ${u.branchId}`),m(P),u.categoryId&&(P.some(R=>R._id===u.categoryId)||h(R=>({...R,categoryId:""})))}else console.log(" No branch selected, showing all categories"),m(s)},[u.branchId,s]),w.useEffect(()=>{if(g.length>0&&u.categoryId){const P=g.filter(_=>{var W;return(((W=_.categoryId)==null?void 0:W._id)||_.categoryId)===u.categoryId});v(P),u.subcategoryId&&(P.some(R=>R._id===u.subcategoryId)||h(R=>({...R,subcategoryId:""})))}else v([]),h(P=>({...P,subcategoryId:""}))},[u.categoryId,g]);const k=P=>{const{name:_,value:R}=P.target;h({...u,[_]:R})},I=P=>{const _=P.target.value;h(R=>{const W=R.quantities.includes(_)?R.quantities.filter(oe=>oe!==_):[...R.quantities,_],G={...R.prices};return W.includes(_)||delete G[_],{...R,quantities:W,prices:G}})},z=P=>{const{name:_,value:R}=P.target;h(W=>({...W,prices:{...W.prices,[_]:parseFloat(R)||""}}))},B=P=>{const _=P.target.files[0];if(_){if(_.size>5*1024*1024){C("Image size must be less than 5MB");return}if(!_.type.startsWith("image/")){C("Please select a valid image file");return}h(R=>({...R,image:_})),C("")}},M=async P=>{if(P.preventDefault(),O(!0),C(""),u.quantities.length===0){C("Please select at least one quantity"),O(!1);return}for(const _ of u.quantities)if(!u.prices[_]||u.prices[_]<=0){C(`Please enter a valid price for ${_}`),O(!1);return}try{await n(u),t()}catch(_){C(_.message||"Failed to save product. Please try again.")}finally{O(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:[r.jsx(qa,{size:20,style:{marginRight:"8px"}}),e?"Edit Item":"Add Item"]}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:M,children:[r.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[S&&r.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:S})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"branchId",children:"Branch *"}),r.jsxs("select",{id:"branchId",name:"branchId",className:"form-select",value:u.branchId,onChange:k,required:!0,disabled:l,style:l?{backgroundColor:"#f3f4f6",cursor:"not-allowed"}:{},children:[r.jsx("option",{value:"",children:"Select Branch"}),a.map(P=>r.jsx("option",{value:P._id,children:P.name},P._id))]}),l&&r.jsx("p",{style:{marginTop:"4px",fontSize:"12px",color:"#6b7280"},children:"Branch cannot be changed after creation"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"categoryId",children:"Category *"}),r.jsxs("select",{id:"categoryId",name:"categoryId",className:"form-select",value:u.categoryId,onChange:k,required:!0,children:[r.jsx("option",{value:"",children:"Select Category"}),p.map(P=>r.jsx("option",{value:P._id,children:P.name},P._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"subcategoryId",children:"Subcategory (Optional)"}),r.jsxs("select",{id:"subcategoryId",name:"subcategoryId",className:"form-select",value:u.subcategoryId,onChange:k,disabled:!u.categoryId,style:u.categoryId?{}:{backgroundColor:"#f3f4f6",cursor:"not-allowed"},children:[r.jsx("option",{value:"",children:"Select Subcategory (Optional)"}),j.map(P=>r.jsx("option",{value:P._id,children:P.name},P._id))]}),!u.categoryId&&r.jsx("p",{style:{marginTop:"4px",fontSize:"12px",color:"#6b7280"},children:"Please select a category first"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"name",children:"Item Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:u.name,onChange:k,required:!0,placeholder:"Enter item name (e.g., Pizza, Sandwich, Pasta)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Quantities *"}),r.jsx("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:d.map(P=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("input",{type:"checkbox",name:"quantities",value:P,checked:u.quantities.includes(P),onChange:I,style:{width:"16px",height:"16px"}}),r.jsx("span",{style:{fontSize:"14px",color:"#374151"},children:P})]},P))})]}),u.quantities.length>0&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Prices *"}),u.quantities.map(P=>r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsxs("label",{style:{display:"block",fontSize:"14px",color:"#6b7280",marginBottom:"4px"},children:["Price for ",P]}),r.jsx("input",{type:"number",name:P,value:u.prices[P]||"",onChange:z,className:"form-input",required:!0,min:"0",step:"0.01",placeholder:`Enter price for ${P}`})]},P))]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Menu Item Image"}),(e==null?void 0:e.image)&&!u.image&&r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:"Current Image:"}),r.jsx("img",{src:hm(e.image),alt:"Current menu item",style:{width:"100%",height:"192px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"},onError:P=>{console.error("Failed to load existing image:",hm(e.image)),P.target.style.display="none"}})]}),r.jsx("input",{type:"file",name:"image",onChange:B,accept:"image/*",className:"form-input",style:{padding:"8px"}}),u.image&&r.jsx("div",{style:{marginTop:"12px"},children:u.image instanceof File?r.jsxs("div",{children:[r.jsx("img",{src:URL.createObjectURL(u.image),alt:"Preview",style:{width:"100%",height:"192px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}),r.jsxs("p",{style:{marginTop:"8px",fontSize:"12px",color:"#10b981"},children:[" New image selected: ",u.image.name]})]}):r.jsx("p",{style:{marginTop:"8px",fontSize:"12px",color:"#10b981"},children:" Image selected"})}),r.jsx("p",{style:{marginTop:"4px",fontSize:"12px",color:"#6b7280"},children:e!=null&&e.image&&!u.image?"Upload a new image to replace the current one (optional)":"Upload an image for this menu item (JPEG, PNG, GIF, WEBP, AVIF up to 5MB)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",name:"subscriptionEnabled",checked:u.subscriptionEnabled,onChange:P=>h({...u,subscriptionEnabled:P.target.checked}),style:{width:"18px",height:"18px",cursor:"pointer"}}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Enable Subscription for this item"})]}),r.jsx("p",{style:{marginTop:"4px",marginLeft:"26px",fontSize:"12px",color:"#6b7280"},children:"Allow customers to subscribe to this menu item for regular delivery"})]}),u.subscriptionEnabled&&r.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[r.jsxs("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{children:""})," Subscription Configuration"]}),r.jsxs("div",{className:"form-group",style:{marginBottom:"16px"},children:[r.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px",display:"block"},children:"Subscription Pricing"}),r.jsxs("div",{style:{display:"grid",gap:"16px"},children:[r.jsxs("div",{style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[r.jsx("h5",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"3 Days Plan"}),r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Subscription Fee ()"}),r.jsx("input",{type:"number",min:"0",value:u.subscription3DaysPrice||"",onChange:P=>{const _=parseFloat(P.target.value)||0;h({...u,subscription3DaysPrice:_})},placeholder:"100",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),r.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"4px 0 0 0"},children:"Amount users pay to buy this subscription"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Discount Percentage (%)"}),r.jsx("input",{type:"number",min:"0",max:"50",value:u.subscription3DaysDiscount||"",onChange:P=>{const _=parseFloat(P.target.value)||0;h({...u,subscription3DaysDiscount:_})},placeholder:"5",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},step:"0.01"})]})]}),r.jsxs("div",{style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[r.jsx("h5",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"1 Week Plan"}),r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Subscription Fee ()"}),r.jsx("input",{type:"number",min:"0",value:u.subscription1WeekPrice||"",onChange:P=>{const _=parseFloat(P.target.value)||0;h({...u,subscription1WeekPrice:_})},placeholder:"250",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),r.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"4px 0 0 0"},children:"Amount users pay to buy this subscription"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Discount Percentage (%)"}),r.jsx("input",{type:"number",min:"0",max:"50",value:u.subscription1WeekDiscount||"",onChange:P=>{const _=parseFloat(P.target.value)||0;h({...u,subscription1WeekDiscount:_})},placeholder:"10",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},step:"0.01"})]})]}),r.jsxs("div",{style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[r.jsx("h5",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"1 Month Plan"}),r.jsxs("div",{style:{marginBottom:"12px"},children:[r.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Subscription Fee ()"}),r.jsx("input",{type:"number",min:"0",value:u.subscription1MonthPrice||"",onChange:P=>{const _=parseFloat(P.target.value)||0;h({...u,subscription1MonthPrice:_})},placeholder:"500",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),r.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"4px 0 0 0"},children:"Amount users pay to buy this subscription"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",display:"block"},children:"Discount Percentage (%)"}),r.jsx("input",{type:"number",min:"0",max:"50",value:u.subscription1MonthDiscount||"",onChange:P=>{const _=parseFloat(P.target.value)||0;h({...u,subscription1MonthDiscount:_})},placeholder:"15",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},step:"0.01"})]})]})]}),r.jsx("p",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:" Set discount percentages for each subscription plan"})]}),(u.subscription3DaysDiscount>0||u.subscription1WeekDiscount>0||u.subscription1MonthDiscount>0)&&r.jsxs("div",{style:{padding:"12px",backgroundColor:"#e0f2fe",borderRadius:"6px",border:"1px solid #0891b2"},children:[r.jsx("p",{style:{fontSize:"13px",color:"#0c4a6e",margin:0,marginBottom:"8px"},children:r.jsx("strong",{children:" Subscription Plans Preview:"})}),u.subscription3DaysDiscount>0&&r.jsxs("p",{style:{fontSize:"12px",color:"#0c4a6e",margin:"4px 0"},children:[" 3 Days: Pay ",u.subscription3DaysPrice||100,"  Get ",u.subscription3DaysDiscount,"% discount",Object.keys(u.prices).length>0&&r.jsxs("span",{style:{color:"#059669",fontWeight:"bold"},children:[" ","(",Math.round(Object.values(u.prices)[0]*(1-u.subscription3DaysDiscount/100)),")"]})]}),u.subscription1WeekDiscount>0&&r.jsxs("p",{style:{fontSize:"12px",color:"#0c4a6e",margin:"4px 0"},children:[" 1 Week: Pay ",u.subscription1WeekPrice||250,"  Get ",u.subscription1WeekDiscount,"% discount",Object.keys(u.prices).length>0&&r.jsxs("span",{style:{color:"#059669",fontWeight:"bold"},children:[" ","(",Math.round(Object.values(u.prices)[0]*(1-u.subscription1WeekDiscount/100)),")"]})]}),u.subscription1MonthDiscount>0&&r.jsxs("p",{style:{fontSize:"12px",color:"#0c4a6e",margin:"4px 0"},children:[" 1 Month: Pay ",u.subscription1MonthPrice||500,"  Get ",u.subscription1MonthDiscount,"% discount",Object.keys(u.prices).length>0&&r.jsxs("span",{style:{color:"#059669",fontWeight:"bold"},children:[" ","(",Math.round(Object.values(u.prices)[0]*(1-u.subscription1MonthDiscount/100)),")"]})]}),r.jsx("p",{style:{fontSize:"11px",color:"#6b7280",margin:"8px 0 0 0",fontStyle:"italic"},children:"* Users pay subscription fee upfront, then get discounted prices during subscription period"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:E,style:{padding:"12px 24px",borderRadius:"8px"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E,style:{padding:"12px 24px",borderRadius:"8px",backgroundColor:"#6366f1"},children:E?"Saving...":e?"Update Item":"Add Item"})]})]})]})})},yae=({product:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),[i,l]=w.useState(""),d=async()=>{s(!0),l("");try{await n(e._id),t()}catch(u){l(u.message||"Failed to delete product. Please try again.")}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Product"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("div",{className:"modal-body",children:[i&&r.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:i})]}),r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:d,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},bae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState([]),[u,h]=w.useState(""),[p,m]=w.useState(""),[g,b]=w.useState(""),[j,v]=w.useState(""),[y,A]=w.useState(!1),[E,O]=w.useState(null),[S,C]=w.useState(!1),[k,I]=w.useState(null),[z,B]=w.useState([]),[M,F]=w.useState([]),[N,L]=w.useState(!0),[P,_]=w.useState(!0),[R,W]=w.useState(""),[G,oe]=w.useState(""),[q,V]=w.useState(""),[U,X]=w.useState(!1),[H,Q]=w.useState(null),[le,me]=w.useState(null);w.useEffect(()=>{(async()=>{try{await je(),await ee(),await se(),await fe()}catch(ce){console.error("Error loading data:",ce),W("Failed to load data. Please refresh the page and try again.")}})()},[]),w.useEffect(()=>{ue()},[e,p,g,j,u]),w.useEffect(()=>{if(g){const re=l.filter(ce=>{var de;return(((de=ce.categoryId)==null?void 0:de._id)||ce.categoryId)===g});F(re),j&&(re.some(Z=>Z._id===j)||v(""))}else F([]),v("")},[g,l]),w.useEffect(()=>{ue()},[e,p,g,u]);const je=async()=>{try{const re=await vr("/branch",{},!0);a(re),re.length>0&&!p&&m(re[0]._id)}catch(re){console.error("Error fetching branches:",re),W("Failed to load branches. Please refresh the page and try again.")}},ee=async()=>{_(!0);try{const re=await vr("/category",{},!0);i(re),re.length===0&&W("No categories found. Please add a category first.")}catch(re){console.error("Error fetching categories:",re),W("Failed to load categories. Please refresh the page and try again.")}finally{_(!1)}},se=async()=>{try{const re=await vr("/subcategory",{},!0);d(re||[])}catch(re){console.error("Error fetching subcategories:",re)}},fe=async()=>{L(!0),W("");try{const re=await vr("/menu",{},!0);console.log("Fetched products:",re),re&&re.length>0&&(console.log("Full product object:",re[0]),console.log("All product keys:",Object.keys(re[0])),console.log("Product fields:",{itemName:re[0].itemName,name:re[0].name,image:re[0].image,price:re[0].price,quantities:re[0].quantities,prices:re[0].prices})),t(re)}catch(re){console.error("Error fetching products:",re),W("Failed to load products. Please refresh the page and try again.")}finally{L(!1)}},ue=()=>{let re=e;p&&(re=re.filter(ce=>!ce||!ce.branchId?!1:(typeof ce.branchId=="object"?ce.branchId._id:ce.branchId)===p)),g&&(re=re.filter(ce=>!ce||!ce.categoryId?!1:(typeof ce.categoryId=="object"?ce.categoryId._id:ce.categoryId)===g)),j&&(re=re.filter(ce=>!ce||!ce.subcategoryId?!1:(typeof ce.subcategoryId=="object"?ce.subcategoryId._id:ce.subcategoryId)===j)),u&&(re=re.filter(ce=>ce&&ce.name&&ce.name.toLowerCase().includes(u.toLowerCase())||ce&&ce.description&&ce.description.toLowerCase().includes(u.toLowerCase()))),B(re)},We=()=>{O(null),A(!0)},we=re=>{O(re),A(!0)},Me=re=>{I(re),C(!0)},Ee=async re=>{try{const ce=new FormData;ce.append("itemName",re.name);const Z=typeof re.branchId=="object"?re.branchId._id:re.branchId,de=typeof re.categoryId=="object"?re.categoryId._id:re.categoryId;if(console.log("Extracted IDs:",{branchId:Z,categoryId:de}),console.log("Original formData:",{branchId:re.branchId,categoryId:re.categoryId}),ce.append("branchId",Z),ce.append("categoryId",de),re.subcategoryId){const Se=typeof re.subcategoryId=="object"?re.subcategoryId._id:re.subcategoryId;ce.append("subcategoryId",Se)}ce.append("menuTypes",JSON.stringify(re.quantities)),ce.append("quantities",JSON.stringify(re.quantities)),ce.append("prices",JSON.stringify(re.prices)),ce.append("subscriptionEnabled",re.subscriptionEnabled),re.menuItemNumber&&re.menuItemNumber!==""&&re.menuItemNumber!=="0"&&ce.append("menuItemNumber",re.menuItemNumber),ce.append("subscriptionPlans",JSON.stringify(re.subscriptionPlans)),ce.append("subscriptionAmount",re.subscriptionAmount||0),ce.append("subscriptionDiscount",re.subscriptionDiscount||0),ce.append("subscriptionDuration",re.subscriptionDuration||"3days"),ce.append("subscription3DaysDiscount",re.subscription3DaysDiscount||0),ce.append("subscription1WeekDiscount",re.subscription1WeekDiscount||0),ce.append("subscription1MonthDiscount",re.subscription1MonthDiscount||0),ce.append("subscription3DaysPrice",re.subscription3DaysPrice||0),ce.append("subscription1WeekPrice",re.subscription1WeekPrice||0),ce.append("subscription1MonthPrice",re.subscription1MonthPrice||0),re.image&&re.image instanceof File?(console.log("Appending image to FormData:",re.image.name,re.image.size,"bytes"),ce.append("image",re.image)):console.log("No image to upload:",{hasImage:!!re.image,isFile:re.image instanceof File}),console.log("FormData entries being sent:");for(let[Se,Ve]of ce.entries())console.log(`${Se}:`,Ve);let te;return E?(console.log("Current product for update:",E),console.log("Current product ID:",E._id),console.log("Current product ID type:",typeof E._id),te=await vr(`/menu/${E._id}`,{method:"PUT",body:ce}),console.log("Product updated, response:",te),console.log("Image path in response:",te.image),await fe(),oe(`Item "${te.itemName||te.name}" updated successfully`)):(te=await vr("/menu",{method:"POST",body:ce}),console.log("Product created, response:",te),console.log("Image path in response:",te.image),await fe(),oe(`Item "${te.itemName||te.name}" created successfully`)),setTimeout(()=>{oe("")},3e3),te}catch(ce){throw console.error("Error saving product:",ce),new Error(ce.message||"Failed to save product")}},Be=async re=>{var ce,Z;try{await vr(`/menu/${re}`,{method:"DELETE"}),t(e.filter(de=>de._id!==re)),oe("Product deleted successfully"),setTimeout(()=>{oe("")},3e3)}catch(de){throw console.error("Error deleting product:",de),new Error(((Z=(ce=de.response)==null?void 0:ce.data)==null?void 0:Z.message)||"Failed to delete product")}},it=(re,ce)=>{if(ce&&ce.name)return ce.name;const Z=s.find(de=>de._id===re);return Z?Z.name:"Unknown"};return r.jsxs("div",{className:"products-page",children:[G&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:G}),r.jsx("button",{onClick:()=>oe(""),children:r.jsx("span",{children:""})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Products"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:We,children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Product"})]})})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>m(""),style:{padding:"10px 20px",borderRadius:"25px",border:"none",backgroundColor:p===""?"#6366f1":"#e5e7eb",color:p===""?"white":"#374151",cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},children:["All Branches (",e.length,")"]}),n.map(re=>{const ce=e.filter(Z=>Z.branchId?(typeof Z.branchId=="object"?Z.branchId._id:Z.branchId)===re._id:!1).length;return r.jsxs("button",{onClick:()=>m(re._id),style:{padding:"10px 20px",borderRadius:"25px",border:"none",backgroundColor:p===re._id?"#6366f1":"#e5e7eb",color:p===re._id?"white":"#374151",cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},children:[re.name," (",ce,")"]},re._id)})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Filter by Category:"}),r.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>b(""),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:g===""?"#10b981":"#f3f4f6",color:g===""?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:["All Categories (",p?z.length:e.length,")"]}),s.filter(re=>{var Z;return p?(re.branchId||((Z=re.branch)==null?void 0:Z.id))===p:!0}).map(re=>{const ce=(p?z:e).filter(Z=>Z.categoryId?(typeof Z.categoryId=="object"?Z.categoryId._id:Z.categoryId)===re._id:!1).length;return r.jsxs("button",{onClick:()=>b(re._id),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:g===re._id?"#10b981":"#f3f4f6",color:g===re._id?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:[re.name," (",ce,")"]},re._id)})]})]}),g&&M.length>0&&r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Filter by Subcategory:"}),r.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>v(""),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:j===""?"#8b5cf6":"#f3f4f6",color:j===""?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:"All Subcategories"}),M.map(re=>{const ce=z.filter(Z=>Z.subcategoryId?(typeof Z.subcategoryId=="object"?Z.subcategoryId._id:Z.subcategoryId)===re._id:!1).length;return r.jsxs("button",{onClick:()=>v(re._id),style:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:j===re._id?"#8b5cf6":"#f3f4f6",color:j===re._id?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:[re.name," (",ce,")"]},re._id)})]})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search products...",className:"search-input",value:u,onChange:re=>h(re.target.value)})]})}),R&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:R})]}),N||P?r.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"Loading data..."})}):r.jsx("div",{className:"grid-container",children:z.length>0?z.map(re=>{var ce;return r.jsxs("div",{id:`product-${re._id}`,className:"grid-item",style:{border:le===re._id?"3px solid #10b981":void 0,boxShadow:le===re._id?"0 0 20px rgba(16, 185, 129, 0.3)":void 0,transform:le===re._id?"scale(1.02)":void 0,transition:"all 0.3s ease"},children:[r.jsxs("div",{className:"grid-item-image-container",style:{position:"relative"},children:[r.jsx("img",{src:hm(re.image)||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23f3f4f6' width='300' height='200'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='18' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",alt:re.name||re.itemName,className:"grid-item-image",onError:Z=>{const de=xae(re.image);de&&Z.target.src!==de?Z.target.src=de:(Z.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23f3f4f6' width='300' height='200'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='16' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",Z.target.onerror=null)}}),re.subscriptionEnabled&&r.jsxs("div",{style:{position:"absolute",top:"8px",right:"8px",backgroundColor:"#10b981",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[r.jsx("span",{children:""}),r.jsx("span",{children:"SUBSCRIPTION"})]})]}),r.jsxs("div",{className:"grid-item-content",children:[r.jsxs("h3",{className:"grid-item-title",children:[re.menuItemNumber&&r.jsxs("span",{style:{display:"inline-block",backgroundColor:"#3b82f6",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",marginRight:"8px"},children:["#",re.menuItemNumber]}),re.name||re.itemName||((ce=re.categoryId)==null?void 0:ce.name)||"Unnamed Product"]}),r.jsx("p",{className:"grid-item-subtitle",children:it(re.categoryId,re.categoryId)}),re.quantities&&re.quantities.length>0?r.jsx("div",{style:{marginTop:"8px",marginBottom:"8px"},children:re.quantities.map(Z=>{var de;return r.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px"},children:[r.jsxs("span",{style:{fontWeight:"500"},children:[Z,":"]})," ",r.jsx("span",{style:{fontFamily:"Arial, sans-serif"},children:""}),(de=re.prices)!=null&&de[Z]?Number(re.prices[Z]).toFixed(2):"0.00"]},Z)})}):re.description&&r.jsx("p",{style:{fontSize:"13px",color:"#6b7280",marginTop:"8px",marginBottom:"8px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:re.description}),r.jsxs("div",{className:"grid-item-footer",children:[r.jsx("span",{className:"grid-item-price",children:re.quantities&&re.quantities.length>0?`${re.quantities.length} size${re.quantities.length>1?"s":""}`:re.price&&re.price>0?`${Number(re.price).toFixed(2)}`:r.jsx("span",{style:{color:"#9ca3af",fontSize:"13px"},children:"Price not set"})}),r.jsxs("div",{className:"grid-item-actions",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>we(re),children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>Me(re),children:r.jsx(Yn,{size:14})})]})]})]})]},re._id)}):r.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0",gridColumn:"1 / -1"},children:r.jsxs("p",{children:["No products found. ",u?"Try different search terms.":"Add a new product to get started."]})})}),y&&r.jsx(gae,{product:E,onClose:()=>A(!1),onSave:Ee,branches:n,categories:s,selectedBranch:p}),S&&r.jsx(yae,{product:k,onClose:()=>C(!1),onConfirm:Be})]})},pw=(e,t=!1)=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return t?`${e}?t=${Date.now()}`:e;const a="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","");let s=e.replace(/\\/g,"/");s.startsWith("/")||(s=`/${s}`);const i=`${a}${s}`;return t?`${i}?t=${Date.now()}`:i},vae=({category:e,onClose:t,onSave:n,branches:a,selectedBranch:s})=>{var A;const i=(e==null?void 0:e.branchId)||((A=e==null?void 0:e.branch)==null?void 0:A.id)||s||(a.length>0?a[0]._id:""),[l,d]=w.useState({name:(e==null?void 0:e.name)||"",branchId:i,image:(e==null?void 0:e.image)||""}),[u,h]=w.useState(null),[p,m]=w.useState(!1),[g,b]=w.useState("");w.useEffect(()=>{if(e!=null&&e.image){const E=pw(e.image);h(E)}else h(null)},[e]);const j=E=>{const{name:O,value:S}=E.target;d({...l,[O]:S})},v=E=>{const O=E.target.files[0];if(O){const S=new FileReader;S.onloadend=()=>{h(S.result),d({...l,image:S.result})},S.readAsDataURL(O)}},y=async E=>{E.preventDefault(),m(!0),b("");try{await n(l),t()}catch(O){b(O.message||"Failed to save category. Please try again.")}finally{m(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:e?"Edit Category":"Add New Category"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"modal-body",children:[g&&r.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:g})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"branchId",children:"Branch"}),r.jsx("select",{id:"branchId",name:"branchId",className:"form-select",value:l.branchId,onChange:j,required:!0,disabled:!!e,children:a.map(E=>r.jsx("option",{value:E._id,children:E.name},E._id))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Category Image"}),r.jsxs("div",{className:"image-upload-container",children:[r.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:u?r.jsxs("div",{className:"image-preview-wrapper",children:[r.jsx("img",{src:u,alt:"Category preview",className:"image-preview"}),r.jsx("div",{className:"image-overlay",children:r.jsx("span",{children:"Change Image"})})]}):r.jsxs("div",{className:"image-upload-placeholder",children:[r.jsx(co,{size:24}),r.jsx("span",{children:"Upload Category Image"})]})}),r.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:v,className:"image-upload-input"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"name",children:"Category Name"}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:l.name,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:p,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Saving...":e?"Update Category":"Add Category"})]})]})]})})},K6=({category:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),[i,l]=w.useState(""),d=async()=>{s(!0),l("");try{await n(e._id),t()}catch(u){l(u.message||"Failed to delete category. Please try again.")}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Category"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("div",{className:"modal-body",children:[i&&r.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:i})]}),r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"? This will also delete all associated products."]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This RESERVED cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:d,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},jae=({subcategory:e,onClose:t,onSave:n,categories:a,branches:s})=>{var v,y;const[i,l]=w.useState({name:(e==null?void 0:e.name)||"",categoryId:((v=e==null?void 0:e.categoryId)==null?void 0:v._id)||(e==null?void 0:e.categoryId)||"",branchId:((y=e==null?void 0:e.branchId)==null?void 0:y._id)||(e==null?void 0:e.branchId)||"",description:(e==null?void 0:e.description)||""}),[d,u]=w.useState([]),[h,p]=w.useState(!1),[m,g]=w.useState("");w.useEffect(()=>{if(i.branchId){const A=a.filter(E=>{var S;return(E.branchId||((S=E.branch)==null?void 0:S.id))===i.branchId});u(A)}else u(a)},[i.branchId,a]);const b=A=>{const{name:E,value:O}=A.target;l({...i,[E]:O})},j=async A=>{A.preventDefault(),p(!0),g("");try{await n(i),t()}catch(E){g(E.message||"Failed to save subcategory")}finally{p(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:e?"Edit Subcategory":"Add New Subcategory"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:j,children:[r.jsxs("div",{className:"modal-body",children:[m&&r.jsxs("div",{style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:m})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Branch *"}),r.jsxs("select",{name:"branchId",className:"form-select",value:i.branchId,onChange:b,required:!0,children:[r.jsx("option",{value:"",children:"Select Branch"}),s.map(A=>r.jsx("option",{value:A._id,children:A.name},A._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Category *"}),r.jsxs("select",{name:"categoryId",className:"form-select",value:i.categoryId,onChange:b,required:!0,disabled:!i.branchId,children:[r.jsx("option",{value:"",children:"Select Category"}),d.map(A=>r.jsx("option",{value:A._id,children:A.name},A._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Subcategory Name *"}),r.jsx("input",{type:"text",name:"name",className:"form-input",value:i.name,onChange:b,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",value:i.description,onChange:b,rows:"3"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:h,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Saving...":e?"Update":"Create"})]})]})]})})},wae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(""),[l,d]=w.useState(!1),[u,h]=w.useState(null),[p,m]=w.useState(!1),[g,b]=w.useState(null),[j,v]=w.useState(""),[y,A]=w.useState([]),[E,O]=w.useState(!0),[S,C]=w.useState(""),[k,I]=w.useState(""),[z,B]=w.useState([]),[M,F]=w.useState(!1),[N,L]=w.useState(null),[P,_]=w.useState(!1),[R,W]=w.useState(null),[G,oe]=w.useState(""),[q,V]=w.useState([]),[U,X]=w.useState("");w.useEffect(()=>{H(),We()},[]),w.useEffect(()=>{Q()},[j]),w.useEffect(()=>{le()},[e,j,s]),w.useEffect(()=>{we()},[z,G,U]);const H=async()=>{try{const ce=await vr("/branch",{},!0);a(ce)}catch(ce){console.error("Error fetching branches:",ce),C("Failed to load branches. Please refresh the page and try again.")}},Q=async()=>{O(!0),C("");try{const ce=j?`/category?branchId=${j}`:"/category",Z=!j;console.log(` Fetching categories for branch: ${j||"All"}, endpoint: ${ce}, merge: ${Z}`);const de=await vr(ce,{},Z);console.log(` Received ${de.length} categories:`,de.map(te=>{var Se;return{name:te.name,branchId:te.branchId||((Se=te.branch)==null?void 0:Se.id)}})),t(de)}catch(ce){console.error("Error fetching categories:",ce),C("Failed to load categories. Please refresh the page and try again.")}finally{O(!1)}},le=()=>{let ce=e;j&&(ce=ce.filter(Z=>{var te;return(Z.branchId||((te=Z.branch)==null?void 0:te.id))===j})),s&&(ce=ce.filter(Z=>Z.name.toLowerCase().includes(s.toLowerCase()))),A(ce)},me=()=>{h(null),d(!0)},je=ce=>{h(ce),d(!0)},ee=ce=>{b(ce),m(!0)},se=async ce=>{try{const Z=new FormData;Z.append("name",ce.name),Z.append("branchId",ce.branchId);const de=n.find(Se=>Se._id===ce.branchId);if(de&&(Z.append("branchName",de.name),Z.append("branchAddress",de.address||"")),ce.image&&ce.image.startsWith("data:image")){const Ve=await(await fetch(ce.image)).blob(),tt=new File([Ve],"category-image.jpg",{type:Ve.type});Z.append("image",tt)}else ce.image&&!ce.image.startsWith("http")&&Z.append("image",ce.image);let te;if(u){const Se=await vr(`/category/${u._id}`,{method:"PUT",body:Z});Se._imageTimestamp=Date.now(),t(Ve=>Ve.map(tt=>tt._id===u._id?{...Se,_imageTimestamp:Date.now()}:tt)),setTimeout(()=>{Q()},500),I(`Category "${Se.name}" updated successfully`)}else{const Se=await vr("/category",{method:"POST",body:Z});t([...e,Se]),I(`Category "${Se.name}" created successfully`)}return setTimeout(()=>{I("")},3e3),!0}catch(Z){throw console.error("Error saving category:",Z),new Error(Z.message||"Failed to save category")}},fe=async ce=>{try{await vr(`/category/${ce}`,{method:"DELETE"}),t(e.filter(Z=>Z._id!==ce)),I("Category deleted successfully"),setTimeout(()=>{I("")},3e3)}catch(Z){throw console.error("Error deleting category:",Z),new Error(Z.message||"Failed to delete category")}},ue=ce=>{var te,Se;if((te=ce.branch)!=null&&te.name)return ce.branch.name;const Z=ce.branchId||((Se=ce.branch)==null?void 0:Se.id),de=n.find(Ve=>Ve._id===Z);return de?de.name:`Unknown Branch (${(Z==null?void 0:Z.substring(0,6))||"N/A"})`},We=async()=>{try{const ce=await vr("/subcategory",{},!0);B(ce)}catch(ce){console.error("Error fetching subcategories:",ce)}},we=()=>{let ce=z;G&&(ce=ce.filter(Z=>{var te;return(((te=Z.categoryId)==null?void 0:te._id)||Z.categoryId)===G})),U&&(ce=ce.filter(Z=>Z.name.toLowerCase().includes(U.toLowerCase()))),V(ce)},Me=()=>{L(null),F(!0)},Ee=ce=>{L(ce),F(!0)},Be=ce=>{W(ce),_(!0)},it=async ce=>{try{N?(await vr(`/subcategory/${N._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),I("Subcategory updated successfully")):(await vr("/subcategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),I("Subcategory created successfully")),We(),setTimeout(()=>I(""),3e3)}catch(Z){throw console.error("Error saving subcategory:",Z),new Error(Z.message||"Failed to save subcategory")}},re=async ce=>{try{await vr(`/subcategory/${ce}`,{method:"DELETE"}),B(z.filter(Z=>Z._id!==ce)),I("Subcategory deleted successfully"),setTimeout(()=>I(""),3e3)}catch(Z){throw console.error("Error deleting subcategory:",Z),new Error(Z.message||"Failed to delete subcategory")}};return r.jsxs("div",{className:"categories-page",children:[k&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:k}),r.jsx("button",{onClick:()=>I(""),children:r.jsx("span",{children:""})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Categories"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:me,children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Category"})]})})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search categories...",className:"search-input",value:s,onChange:ce=>i(ce.target.value)})]}),r.jsxs("div",{className:"filter-buttons",children:[r.jsxs("div",{className:"filter-btn",children:[r.jsx(cd,{size:16}),r.jsx("span",{children:"Branch:"})]}),r.jsxs("select",{className:"filter-select",value:j,onChange:ce=>v(ce.target.value),children:[r.jsx("option",{value:"",children:"All Branches"}),n.map(ce=>r.jsx("option",{value:ce._id,children:ce.name},ce._id))]})]})]}),S&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:S})]}),E?r.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"Loading categories..."})}):r.jsx("div",{className:"data-card",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Image"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:y.map(ce=>r.jsxs("tr",{children:[r.jsxs("td",{children:[ce.image?r.jsx("img",{src:pw(ce.image,!0),alt:ce.name,className:"category-image",onLoad:()=>{console.log(` Category image loaded: ${ce.name}`,pw(ce.image))},onError:Z=>{const te="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","");let Se=ce.image.replace(/\\/g,"/");Se.startsWith("/")||(Se=`/${Se}`);const Ve=`${te}${Se}?t=${Date.now()}`;console.log(` Primary image failed for ${ce.name}, trying fallback:`,Ve),Z.target.dataset.fallbackAttempted?(console.error(` Both backends failed for ${ce.name}`),Z.target.style.display="none",Z.target.nextSibling.style.display="flex"):(Z.target.dataset.fallbackAttempted="true",Z.target.src=Ve)}}):null,r.jsx("div",{className:"category-image-placeholder",style:{display:ce.image?"none":"flex"},children:r.jsx(co,{size:16})})]}),r.jsx("td",{children:ce.name}),r.jsx("td",{children:ue(ce)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>je(ce),children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>ee(ce),children:r.jsx(Yn,{size:14})})]})})]},ce._id))})]})}),y.length===0&&!E&&r.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"No categories found for this branch. Add a new category to get started."})}),l&&r.jsx(vae,{category:u,onClose:()=>d(!1),onSave:se,branches:n,selectedBranch:j}),p&&r.jsx(K6,{category:g,onClose:()=>m(!1),onConfirm:fe}),r.jsxs("div",{style:{marginTop:"40px"},children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Subcategories"}),r.jsxs("button",{className:"btn btn-primary",onClick:Me,children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Subcategory"})]})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search subcategories...",className:"search-input",value:U,onChange:ce=>X(ce.target.value)})]}),r.jsxs("div",{className:"filter-buttons",children:[r.jsxs("div",{className:"filter-btn",children:[r.jsx(cd,{size:16}),r.jsx("span",{children:"Category:"})]}),r.jsxs("select",{className:"filter-select",value:G,onChange:ce=>oe(ce.target.value),children:[r.jsx("option",{value:"",children:"All Categories"}),e.map(ce=>r.jsx("option",{value:ce._id,children:ce.name},ce._id))]})]})]}),r.jsx("div",{className:"data-card",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Category"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:q.length>0?q.map(ce=>{var Z,de;return r.jsxs("tr",{children:[r.jsx("td",{children:ce.name}),r.jsx("td",{children:((Z=ce.categoryId)==null?void 0:Z.name)||"N/A"}),r.jsx("td",{children:((de=ce.branchId)==null?void 0:de.name)||"N/A"}),r.jsx("td",{children:ce.description||"-"}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>Ee(ce),children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>Be(ce),children:r.jsx(Yn,{size:14})})]})})]},ce._id)}):r.jsx("tr",{children:r.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"40px",color:"#999"},children:"No subcategories found"})})})]})})]}),M&&r.jsx(jae,{subcategory:N,onClose:()=>F(!1),onSave:it,categories:e,branches:n}),P&&r.jsx(K6,{category:R,onClose:()=>_(!1),onConfirm:re})]})};Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel"});const mw=e=>{if(!e)return null;if(e.startsWith("http"))return e;const n="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel","");let a=e.toString().trim().replace(/\\/g,"/");if(a.startsWith("uploads/")){const d=`${n}/${a}`;return console.log(`Image URL: ${e} -> ${d}`),d}if(a.startsWith("/")){const d=`${n}${a}`;return console.log(`Image URL: ${e} -> ${d}`),d}const s=a.split("/"),i=s[s.length-1],l=`${n}/uploads/branch/${i}`;return console.log(`Image URL: ${e} -> ${l}`),l},Sae=({branch:e,onClose:t,onSave:n})=>{var y,A,E,O,S;const a=C=>{if(typeof C=="string"){const k=C.split(",").map(I=>I.trim());return k.length>=4?{street:k.slice(0,-3).join(", "),city:k[k.length-3],state:k[k.length-2],country:k[k.length-1]}:k.length===3?{street:k[0],city:k[1]||"",state:k[2]||"",country:""}:k.length===2?{street:k[0],city:k[1]||"",state:"",country:""}:{street:C,city:"",state:"",country:""}}return C||{street:"",city:"",state:"",country:""}},[s,i]=w.useState({name:(e==null?void 0:e.name)||"",gstNumber:(e==null?void 0:e.gstNumber)||"",address:a(e==null?void 0:e.address),contact:{phone:((y=e==null?void 0:e.contact)==null?void 0:y.phone)||"",email:((A=e==null?void 0:e.contact)==null?void 0:A.email)||""},openingHours:{mondayToFriday:((E=e==null?void 0:e.openingHours)==null?void 0:E.mondayToFriday)||"11:00 AM - 11:00 PM",saturday:((O=e==null?void 0:e.openingHours)==null?void 0:O.saturday)||"11:00 AM - 12:00 AM",sunday:((S=e==null?void 0:e.openingHours)==null?void 0:S.sunday)||"12:00 PM - 10:00 PM"},image:null}),[l,d]=w.useState(e!=null&&e.image?mw(e.image):null),[u,h]=w.useState(!1),[p,m]=w.useState("");w.useEffect(()=>{e!=null&&e.image&&d(mw(e.image))},[e]);const g=C=>{const{name:k,value:I}=C.target;if(k.startsWith("address.")){const z=k.split(".")[1];i({...s,address:{...s.address,[z]:I}})}else if(k.startsWith("contact.")){const z=k.split(".")[1];i({...s,contact:{...s.contact,[z]:I}})}else if(k.startsWith("openingHours.")){const z=k.split(".")[1];i({...s,openingHours:{...s.openingHours,[z]:I}})}else i({...s,[k]:I})},b=C=>{const k=C.target.files[0];if(k){if(k.size>5*1024*1024){m("File size must be less than 5MB");return}if(!k.type.startsWith("image/")){m("Please select a valid image file");return}m(""),i({...s,image:k});const I=new FileReader;I.onloadend=()=>{d(I.result)},I.readAsDataURL(k)}},j=()=>{i({...s,image:null}),d(null);const C=document.getElementById("image-upload");C&&(C.value="")},v=async C=>{C.preventDefault(),h(!0),m("");try{const k=new FormData;k.append("name",s.name),k.append("gstNumber",s.gstNumber);const I=[s.address.street,s.address.city,s.address.state,s.address.country].filter(Boolean).join(", ");k.append("address",I),k.append("contact",JSON.stringify(s.contact)),k.append("openingHours",JSON.stringify(s.openingHours)),s.image&&s.image instanceof File&&k.append("image",s.image),await n(k),t()}catch(k){m(k.message||"Failed to save branch. Please try again.")}finally{h(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:e?"Edit Branch":"Add New Branch"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:v,children:[r.jsxs("div",{className:"modal-body",children:[p&&r.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:p})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Branch Image"}),r.jsxs("div",{className:"image-upload-container",children:[l?r.jsxs("div",{className:"image-preview-wrapper",children:[r.jsx("img",{src:l||"/placeholder.svg",alt:"Branch preview",className:"image-preview",onError:C=>{console.error("Image failed to load:",l),C.target.style.display="none",C.target.nextSibling.style.display="flex"}}),r.jsxs("div",{className:"category-image-placeholder",style:{display:"none",width:"100%",height:"150px",fontSize:"14px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",borderRadius:"8px"},children:[r.jsx(co,{size:24}),r.jsx("span",{children:"Image not found"})]}),r.jsx("div",{className:"image-overlay",children:r.jsx("button",{type:"button",onClick:j,style:{background:"rgba(220, 38, 38, 0.8)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:r.jsx(On,{size:16})})})]}):r.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:r.jsxs("div",{className:"image-upload-placeholder",children:[r.jsx(qi,{size:24}),r.jsx("span",{children:"Click to upload branch image"}),r.jsx("small",{style:{color:"#6b7280",marginTop:"4px"},children:"PNG, JPG up to 5MB"})]})}),r.jsx("input",{type:"file",id:"image-upload",className:"image-upload-input",accept:"image/*",onChange:b})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Basic Information"}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"name",children:["Branch Name ",r.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:g,placeholder:"Enter branch name",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"gstNumber",children:"GST Number"}),r.jsx("input",{type:"text",id:"gstNumber",name:"gstNumber",className:"form-input",value:s.gstNumber,onChange:g,placeholder:"Enter GST number"})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Address"}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"address.street",children:["Street Address ",r.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),r.jsx("textarea",{id:"address.street",name:"address.street",className:"form-textarea",value:s.address.street,onChange:g,placeholder:"Enter street address",required:!0,rows:"2"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"address.city",children:"City"}),r.jsx("input",{type:"text",id:"address.city",name:"address.city",className:"form-input",value:s.address.city,onChange:g,placeholder:"Enter city"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"address.state",children:"State"}),r.jsx("input",{type:"text",id:"address.state",name:"address.state",className:"form-input",value:s.address.state,onChange:g,placeholder:"Enter state"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"address.country",children:"Country"}),r.jsx("input",{type:"text",id:"address.country",name:"address.country",className:"form-input",value:s.address.country,onChange:g,placeholder:"Enter country"})]})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Contact Information"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"contact.phone",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"contact.phone",name:"contact.phone",className:"form-input",value:s.contact.phone,onChange:g,placeholder:"Enter phone number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"contact.email",children:"Email Address"}),r.jsx("input",{type:"email",id:"contact.email",name:"contact.email",className:"form-input",value:s.contact.email,onChange:g,placeholder:"Enter email address"})]})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"600"},children:"Opening Hours"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"10px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"openingHours.mondayToFriday",children:"Monday - Friday"}),r.jsx("input",{type:"text",id:"openingHours.mondayToFriday",name:"openingHours.mondayToFriday",className:"form-input",value:s.openingHours.mondayToFriday,onChange:g,placeholder:"11:00 AM - 11:00 PM"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"openingHours.saturday",children:"Saturday"}),r.jsx("input",{type:"text",id:"openingHours.saturday",name:"openingHours.saturday",className:"form-input",value:s.openingHours.saturday,onChange:g,placeholder:"11:00 AM - 12:00 AM"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"openingHours.sunday",children:"Sunday"}),r.jsx("input",{type:"text",id:"openingHours.sunday",name:"openingHours.sunday",className:"form-input",value:s.openingHours.sunday,onChange:g,placeholder:"12:00 PM - 10:00 PM"})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":e?"Update Branch":"Add Branch"})]})]})]})})},Nae=({branch:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),[i,l]=w.useState(""),d=async()=>{s(!0),l("");try{await n(e._id),t()}catch(u){l(u.message||"Failed to delete branch. Please try again.")}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Branch"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("div",{className:"modal-body",children:[i&&r.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:i})]}),r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"? This will also delete all associated categories and products."]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:d,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Tae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(""),[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,h]=w.useState(!1),[p,m]=w.useState(null),[g,b]=w.useState(!0),[j,v]=w.useState(""),[y,A]=w.useState("");w.useEffect(()=>{E()},[]);const E=async()=>{b(!0),v("");try{const B=await vr("/branch",{},!0);console.log("Fetched branches from BOTH backends:",B);const M=Array.isArray(B)?B:(B==null?void 0:B.branches)||[];t(M)}catch(B){console.error("Error fetching branches:",B),v("Failed to load branches. Please refresh the page and try again."),t([])}finally{b(!1)}},O=Array.isArray(e)?e.filter(B=>(B.name||"").toLowerCase().includes(n.toLowerCase())||(B.address||"").toLowerCase().includes(n.toLowerCase())):[],S=()=>{d(null),i(!0)},C=B=>{d(B),i(!0)},k=B=>{m(B),h(!0)},I=async B=>{try{let M;return l?(M=await vr(`/branch/${l._id}`,{method:"PUT",body:B}),t(F=>Array.isArray(F)?F.map(N=>N._id===l._id?M:N):[M]),A(`Branch "${M.name}" updated successfully`)):(M=await vr("/branch",{method:"POST",body:B}),t(F=>Array.isArray(F)?[...F,M]:[M]),A(`Branch "${M.name}" created successfully`)),setTimeout(()=>{A("")},3e3),!0}catch(M){console.error("Error saving branch:",M);let F="Failed to save branch";throw M.message&&(F=M.message),new Error(F)}},z=async B=>{try{const M=vr(`/branch/${B}`,{method:"DELETE"}).catch(N=>(console.warn("Branch endpoint delete failed:",N),null)),F=vr(`/hotel/${B}`,{method:"DELETE"}).catch(N=>(console.warn("Restaurant endpoint delete failed:",N),null));return await Promise.allSettled([M,F]),t(N=>Array.isArray(N)?N.filter(L=>L._id!==B):[]),A("Branch deleted successfully from all backends"),setTimeout(()=>{A("")},3e3),!0}catch(M){throw console.error("Error deleting branch:",M),new Error(M.message||"Failed to delete branch")}};return r.jsxs("div",{className:"branches-page",children:[y&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:y}),r.jsx("button",{onClick:()=>A(""),children:r.jsx("span",{children:""})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Branches"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:S,children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Branch"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search branches by name or address...",className:"search-input",value:n,onChange:B=>a(B.target.value)})]})}),j&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:j})]}),g?r.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"Loading branches..."})}):r.jsx("div",{className:"grid-container",children:O.length>0?O.filter(B=>B&&B._id).map((B,M)=>r.jsxs("div",{className:"grid-item",children:[r.jsx("div",{className:"grid-item-image-container",children:(()=>{const F=mw(B.image);return console.log("=== BRANCH DETAILS ==="),console.log(`Branch ID: ${B._id}`),console.log(`Branch Name: ${B.name}`),console.log(`Branch Address: ${B.address}`),console.log(`Branch Image Raw Path: ${B.image}`),console.log(`Branch Image Full URL: ${F}`),console.log(`Branch Created: ${B.createdAt}`),console.log("========================"),F?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:F||"/placeholder.svg",alt:B.name,className:"grid-item-image",onLoad:()=>console.log(`Image loaded successfully: ${F}`),onError:N=>{const P="https://hotelvirat.com/api/v1/hotel".replace("/api/v1/hotel",""),_=B.image.toString().trim().replace(/\\/g,"/").replace(/^\//,""),R=`${P}/${_}`;N.target.src!==R?(console.log(`Trying secondary backend: ${R}`),N.target.src=R):(console.error(`Image failed to load from both backends: ${F}`),N.target.style.display="none"),N.target.nextSibling&&(N.target.nextSibling.style.display="flex")}}),r.jsxs("div",{className:"category-image-placeholder",style:{display:"none",width:"100%",height:"200px",fontSize:"16px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[r.jsx(co,{size:24}),r.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"Image failed to load"})]})]}):r.jsxs("div",{className:"category-image-placeholder",style:{display:"flex",width:"100%",height:"200px",fontSize:"16px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[r.jsx($l,{size:24}),r.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"No Image"})]})})()}),r.jsxs("div",{className:"grid-item-content",children:[r.jsx("h3",{className:"grid-item-title",children:B.name}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px"},children:[r.jsx($l,{size:16,style:{marginRight:"8px",color:"#6b7280",marginTop:"2px",flexShrink:0}}),r.jsx("p",{className:"grid-item-subtitle",style:{lineHeight:"1.4"},children:B.address})]}),r.jsx("div",{className:"grid-item-footer",children:r.jsxs("div",{className:"grid-item-actions",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>C(B),children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>k(B),children:r.jsx(Yn,{size:14})})]})})]})]},B._id||`branch-${M}`)):r.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0",gridColumn:"1 / -1"},children:r.jsxs("p",{children:["No branches found. ",n?"Try a different search term.":"Add a new branch to get started."]})})}),s&&r.jsx(Sae,{branch:l,onClose:()=>i(!1),onSave:I}),u&&r.jsx(Nae,{branch:p,onClose:()=>h(!1),onConfirm:z})]})},Cae=({user:e,onClose:t,onSave:n,isEditMode:a})=>{const[s,i]=w.useState({name:(e==null?void 0:e.name)||"",mobile:(e==null?void 0:e.mobile)||"",email:(e==null?void 0:e.email)||"",image:null}),[l,d]=w.useState(e!=null&&e.image?`${e.image.startsWith("http")?"":"https://hotelvirat.com/"}${e.image}`:null),[u,h]=w.useState(null),p=b=>{const{name:j,value:v}=b.target;i({...s,[j]:v}),h(null)},m=b=>{const j=b.target.files[0];if(j){i({...s,image:j});const v=new FileReader;v.onloadend=()=>d(v.result),v.readAsDataURL(j)}},g=async b=>{b.preventDefault(),h(null);const j=new FormData;j.append("name",s.name),j.append("mobile",s.mobile),a&&s.email&&j.append("email",s.email),s.image&&j.append("image",s.image);try{await n(j,e==null?void 0:e._id),t()}catch(v){h(v.message||"Failed to save user")}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:a?"Edit User":"Add New User"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:g,children:[r.jsxs("div",{className:"modal-body",children:[u&&r.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:u}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:p,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"mobile",children:["Mobile ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:s.mobile,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit mobile number"})]}),a&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),r.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:s.email,onChange:p})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Profile Image"}),r.jsxs("div",{className:"image-upload-container",children:[r.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:l?r.jsxs("div",{className:"image-preview-wrapper",children:[r.jsx("img",{src:l,alt:"User preview",className:"image-preview"}),r.jsx("div",{className:"image-overlay",children:r.jsx("span",{children:"Change Image"})})]}):r.jsxs("div",{className:"image-upload-placeholder",children:[r.jsx(co,{size:24}),r.jsx("span",{children:"Upload Profile Image"})]})}),r.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:m,className:"image-upload-input"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:a?"Update User":"Add User"})]})]})]})})},Aae=({user:e,onClose:t,onConfirm:n})=>r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete User"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:()=>{n(e._id),t()},children:"Delete"})]})]})}),Eae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(""),[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,h]=w.useState(!1),[p,m]=w.useState(null),[g,b]=w.useState(""),[j,v]=w.useState(""),[y,A]=w.useState(!1),E=async()=>{A(!0);try{const M=await vr("/user-auth/all"),N=(Array.isArray(M)?M:[]).sort((L,P)=>new Date(P.createdAt)-new Date(L.createdAt));t(N)}catch(M){v(M.message),t([])}finally{A(!1)}};w.useEffect(()=>{E()},[]);const O=()=>{d(null),i(!0)},S=M=>{d(M),i(!0)},C=M=>{m(M),h(!0)},k=async(M,F)=>{try{const N=F?`/user-auth/${F}`:"/user-auth/";await vr(N,{method:F?"PUT":"POST",body:M}),b(`User ${F?"updated":"added"} successfully`),setTimeout(()=>b(""),3e3),await E()}catch(N){throw new Error(N.message)}},I=async M=>{try{await vr(`/user-auth/${M}`,{method:"DELETE"}),b("User deleted successfully"),setTimeout(()=>b(""),3e3),await E()}catch(F){v(F.message),setTimeout(()=>v(""),3e3)}},z=M=>{const F={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(M).toLocaleDateString(void 0,F)},B=Array.isArray(e)?e.filter(M=>M.name.toLowerCase().includes(n.toLowerCase())||M.mobile.includes(n)||M.email&&M.email.toLowerCase().includes(n.toLowerCase())):[];return r.jsxs("div",{className:"users-page",children:[g&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:g}),r.jsx("button",{onClick:()=>b(""),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&r.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>v(""),style:{color:"#dc2626"},children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Users"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:O,disabled:y,children:[r.jsx($d,{size:16}),r.jsx("span",{children:"Add User"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search users...",className:"search-input",value:n,onChange:M=>a(M.target.value)})]})}),r.jsx("div",{className:"data-card",children:y?r.jsx("div",{className:"empty-state",children:"Loading users..."}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"ID"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Mobile"}),r.jsx("th",{children:"Created At"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:B.map(M=>r.jsxs("tr",{children:[r.jsx("td",{children:M._id.slice(-6)}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[M.image?r.jsx("img",{src:`${M.image.startsWith("http")?"":"https://hotelvirat.com/"}${M.image}`,alt:M.name,className:"user-avatar"}):r.jsx("div",{className:"user-avatar-placeholder",children:M.name.charAt(0).toUpperCase()}),M.name]})}),r.jsx("td",{children:M.email?r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ps,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),M.email]}):r.jsx("span",{style:{color:"#9ca3af"},children:"Not provided"})}),r.jsx("td",{children:r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ia,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),M.mobile]})}),r.jsx("td",{children:z(M.createdAt)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>S(M),disabled:y,children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>C(M),disabled:y,children:r.jsx(Yn,{size:14})})]})})]},M._id))})]})}),B.length===0&&!y&&r.jsx("div",{className:"empty-state",children:r.jsxs("p",{children:["No users found. ",n?"Try a different search.":"Add a new user to get started."]})}),s&&r.jsx(Cae,{user:l,onClose:()=>i(!1),onSave:k,isEditMode:!!l}),u&&r.jsx(Aae,{user:p,onClose:()=>h(!1),onConfirm:I})]})},Oae=({coupon:e,onClose:t,onSave:n})=>{const[a,s]=w.useState({code:(e==null?void 0:e.code)||"",description:(e==null?void 0:e.description)||"",discountType:(e==null?void 0:e.discountType)||"percentage",discountValue:(e==null?void 0:e.discountValue)||"",minOrderValue:(e==null?void 0:e.minOrderValue)||"",startDate:e!=null&&e.startDate?new Date(e.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:e!=null&&e.endDate?new Date(e.endDate).toISOString().split("T")[0]:"",usageLimit:(e==null?void 0:e.usageLimit)||"",image:null}),[i,l]=w.useState(e==null?void 0:e.image),[d,u]=w.useState(!1),[h,p]=w.useState(null),[m,g]=w.useState([]),[b,j]=w.useState(!1);w.useEffect(()=>{(async()=>{try{const C=await fetch("https://hotelvirat.com/api/v1/hotel/coupon");if(C.ok){const k=await C.json();g(k.map(I=>I.code.toLowerCase()))}}catch(C){console.log("Could not fetch existing coupons:",C)}})()},[]);const v=S=>{const{name:C,value:k}=S.target;s({...a,[C]:["discountValue","minOrderValue","usageLimit"].includes(C)?k===""?"":Number.parseFloat(k):k})},y=S=>m.includes(S.toLowerCase()),A=()=>{const S=new Date().getFullYear(),C=new Date().getMonth()+1,k=new Date().getDate(),I=Date.now().toString().slice(-4),z=["WELCOME","SAVE","DISCOUNT","FIRST","NEWYEAR","HOTEL","VIRAT","SPECIAL","OFFER","DEAL"],B=[S.toString(),S.toString().slice(-2),`${C}${S.toString().slice(-2)}`,`${k}${C}`,I,Math.floor(Math.random()*1e3)+100,Math.floor(Math.random()*50)+10];for(let M=0;M<50;M++){const F=z[Math.floor(Math.random()*z.length)],N=B[Math.floor(Math.random()*B.length)],L=`${F}${N}`;if(!y(L))return L}return`UNIQUE${I}${Math.floor(Math.random()*100)}`},E=S=>{const C=S.target.files[0];if(C){s({...a,image:C});const k=new FileReader;k.onloadend=()=>{l(k.result)},k.readAsDataURL(C)}},O=async S=>{S.preventDefault(),u(!0),p(null);try{await n(a),t()}catch(C){p(C.message||"Failed to save coupon")}finally{u(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:e?"Edit Coupon":"Add New Coupon"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:O,children:[r.jsxs("div",{className:"modal-body",children:[h&&r.jsxs("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsxs("div",{children:[r.jsx("div",{children:h}),h.includes("already exists")&&r.jsx("div",{style:{marginTop:"5px",fontSize:"12px",color:"#991b1b"},children:" Try using a different code like: WELCOME2025, NEWYEAR25, DISCOUNT15, SAVE20, FIRST10"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"code",children:"Coupon Code"}),r.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsx("input",{type:"text",id:"code",name:"code",className:"form-input",value:a.code,onChange:v,required:!0,style:{flex:1,borderColor:a.code&&y(a.code)&&!e?"#ef4444":"#d1d5db"},placeholder:"Enter unique coupon code (e.g., WELCOME2025)"}),r.jsx("button",{type:"button",onClick:()=>{const S=A();s({...a,code:S})},style:{padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap",fontWeight:"500"},children:" Generate"})]}),a.code&&!e&&r.jsx("div",{style:{marginTop:"6px",fontSize:"12px"},children:y(a.code)?r.jsx("div",{style:{color:"#ef4444",display:"flex",alignItems:"center",gap:"4px"},children:" This code already exists! Try a different one."}):r.jsx("div",{style:{color:"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:" This code is available!"})}),r.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"6px"},children:' Click "Generate" for a guaranteed unique code'}),m.length>0&&r.jsxs("details",{style:{marginTop:"8px"},children:[r.jsxs("summary",{style:{fontSize:"12px",color:"#6b7280",cursor:"pointer"},children:[" View existing coupon codes (",m.length," total)"]}),r.jsxs("div",{style:{marginTop:"4px",padding:"8px",backgroundColor:"#f9fafb",borderRadius:"4px",fontSize:"11px",maxHeight:"100px",overflowY:"auto"},children:[m.slice(0,20).map((S,C)=>r.jsx("span",{style:{display:"inline-block",margin:"2px",padding:"2px 6px",backgroundColor:"#e5e7eb",borderRadius:"3px",textTransform:"uppercase"},children:S},C)),m.length>20&&r.jsxs("div",{style:{marginTop:"4px",color:"#6b7280"},children:["... and ",m.length-20," more"]})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",className:"form-textarea",value:a.description,onChange:v,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Coupon Image"}),r.jsxs("div",{className:"image-upload-container",children:[r.jsx("label",{htmlFor:"image-upload",className:"image-upload-label",children:i?r.jsxs("div",{className:"image-preview-wrapper",children:[r.jsx("img",{src:i||"/placeholder.svg",alt:"Coupon preview",className:"image-preview"}),r.jsx("div",{className:"image-overlay",children:r.jsx("span",{children:"Change Image"})})]}):r.jsxs("div",{className:"image-upload-placeholder",children:[r.jsx(co,{size:24}),r.jsx("span",{children:"Upload Coupon Image"})]})}),r.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:E,className:"image-upload-input"})]})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"discountType",children:"Discount Type"}),r.jsxs("select",{id:"discountType",name:"discountType",className:"form-select",value:a.discountType,onChange:v,required:!0,children:[r.jsx("option",{value:"percentage",children:"Percentage"}),r.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"discountValue",children:a.discountType==="percentage"?"Discount Percentage":"Discount Amount ()"}),r.jsx("input",{type:"number",id:"discountValue",name:"discountValue",className:"form-input",value:a.discountValue,onChange:v,min:"0",step:a.discountType==="percentage"?"1":"0.01",required:!0})]})]}),r.jsx("div",{className:"form-grid",children:r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"minOrderValue",children:"Minimum Order Value ()"}),r.jsx("input",{type:"number",id:"minOrderValue",name:"minOrderValue",className:"form-input",value:a.minOrderValue,onChange:v,min:"0",step:"0.01",required:!0})]})}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"startDate",children:"Valid From"}),r.jsx("input",{type:"date",id:"startDate",name:"startDate",className:"form-input",value:a.startDate,onChange:v,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"endDate",children:"Valid To"}),r.jsx("input",{type:"date",id:"endDate",name:"endDate",className:"form-input",value:a.endDate,onChange:v,required:!0})]})]}),r.jsx("div",{className:"form-grid",children:r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"usageLimit",children:"Usage Limit"}),r.jsx("input",{type:"number",id:"usageLimit",name:"usageLimit",className:"form-input",value:a.usageLimit,onChange:v,min:"1",step:"1",required:!0})]})})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:d,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Saving...":e?"Update Coupon":"Add Coupon"})]})]})]})})},kae=({coupon:e,onClose:t,onConfirm:n,loading:a})=>r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Coupon"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete coupon ",r.jsx("strong",{children:e.code}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:()=>n(e._id),disabled:a,children:a?"Deleting...":"Delete"})]})]})}),_ae=({message:e,onClose:t})=>(w.useEffect(()=>{const n=setTimeout(()=>{t()},3e3);return()=>clearTimeout(n)},[t]),r.jsxs("div",{className:"success-message",children:[e,r.jsx("button",{onClick:t,children:""})]})),Iae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(""),[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,h]=w.useState(!1),[p,m]=w.useState(null),[g,b]=w.useState(!1),[j,v]=w.useState(null),[y,A]=w.useState(null),[E,O]=w.useState(!0),S=async()=>{O(!0);try{const L=await fetch("https://hotelvirat.com/api/v1/hotel/coupon");if(!L.ok)throw new Error("Failed to fetch coupons");const P=await L.json();let _=[];P.success&&Array.isArray(P.data)?_=P.data:Array.isArray(P)?_=P:P.message&&P.message.includes("routes working")&&(_=[]),t(_)}catch(N){v(N.message||"Failed to fetch coupons"),console.error("Error fetching Coupons:",N),t([])}finally{O(!1)}};w.useEffect(()=>{S()},[]);const C=()=>{d(null),i(!0)},k=N=>{d(N),i(!0)},I=N=>{m(N),h(!0)},z=async N=>{b(!0);try{const L=new FormData;L.append("code",N.code),L.append("description",N.description),L.append("discountType",N.discountType),L.append("discountValue",N.discountValue),L.append("minOrderValue",N.minOrderValue),L.append("startDate",N.startDate),L.append("endDate",N.endDate),L.append("usageLimit",N.usageLimit),L.append("isActive","true"),N.image&&L.append("image",N.image);let P;if(l?P=await fetch(`https://hotelvirat.com/api/v1/hotel/coupon/${l._id}`,{method:"PUT",body:L}):P=await fetch("https://hotelvirat.com/api/v1/hotel/coupon",{method:"POST",body:L}),!P.ok){const R=await P.json();throw new Error(R.message||"Failed to save coupon")}const _=await P.json();return await S(),A(l?"Coupon updated successfully":"Coupon created successfully"),_}catch(L){throw console.error("Error saving coupon:",L),L}finally{b(!1)}},B=async N=>{b(!0);try{const L=await fetch(`https://hotelvirat.com/api/v1/hotel/coupon/${N}`,{method:"DELETE"});if(!L.ok){const P=await L.json();throw new Error(P.message||"Failed to delete coupon")}await S(),A("Coupon deleted successfully")}catch(L){console.error("Error deleting coupon:",L),v(L.message||"Failed to delete coupon")}finally{b(!1),h(!1)}},M=(Array.isArray(e)?e:[]).filter(N=>N.code.toLowerCase().includes(n.toLowerCase())||N.description.toLowerCase().includes(n.toLowerCase())),F=N=>N?new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return r.jsxs("div",{className:"coupons-page",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Coupons"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:C,children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Coupon"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search coupons...",className:"search-input",value:n,onChange:N=>a(N.target.value)})]})}),j&&r.jsxs("div",{style:{padding:"15px",marginBottom:"20px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),j,r.jsx("button",{onClick:()=>v(null),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),E?r.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"Loading coupons..."})}):r.jsx("div",{className:"data-card",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Image"}),r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Discount"}),r.jsx("th",{children:"Min. Order"}),r.jsx("th",{children:"Validity"}),r.jsx("th",{children:"Usage"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:M.map(N=>r.jsxs("tr",{children:[r.jsx("td",{children:N.image?r.jsx("div",{className:"coupon-image-cell",children:r.jsx("img",{src:`${N.image}`,alt:N.code,className:"coupon-image",onError:L=>{L.target.onerror=null,L.target.src="https://via.placeholder.com/50"}})}):r.jsx("div",{className:"coupon-image-placeholder",children:r.jsx(co,{size:16})})}),r.jsx("td",{children:r.jsx("span",{style:{fontWeight:"600",color:"#f97316"},children:N.code})}),r.jsx("td",{children:N.description}),r.jsx("td",{children:N.discountType==="percentage"?r.jsxs("span",{children:[N.discountValue,"%"]}):r.jsxs("span",{children:["",N.discountValue]})}),r.jsxs("td",{children:["",N.minOrderValue]}),r.jsx("td",{children:r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(rn,{size:14,style:{marginRight:"4px",color:"#6b7280"}}),F(N.startDate)," - ",F(N.endDate)]})}),r.jsxs("td",{children:[N.usageCount," / ",N.usageLimit||"",r.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",marginTop:"4px"},children:r.jsx("div",{style:{width:`${N.usageLimit?N.usageCount/N.usageLimit*100:0}%`,height:"100%",backgroundColor:"#f97316",borderRadius:"2px"}})})]}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>k(N),children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>I(N),children:r.jsx(Yn,{size:14})})]})})]},N._id))})]})}),!E&&M.length===0&&r.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"No coupons found. Add a new coupon to get started."})}),s&&r.jsx(Oae,{coupon:l,onClose:()=>i(!1),onSave:z}),u&&r.jsx(kae,{coupon:p,onClose:()=>h(!1),onConfirm:B,loading:g}),y&&r.jsx(_ae,{message:y,onClose:()=>A(null)})]})};var $c={},V6;function Dae(){if(V6)return $c;V6=1;var e={},t=kx();function n(M){return M&&typeof M=="object"&&"default"in M?M:{default:M}}var a=n(t);function s(M,F){for(var N=0;N<F.length;N++){var L=F[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(M,L.key,L)}}function i(M,F,N){return F&&s(M.prototype,F),M}var l=typeof process<"u"&&e&&!0,d=function(M){return Object.prototype.toString.call(M)==="[object String]"},u=function(){function M(N){var L=N===void 0?{}:N,P=L.name,_=P===void 0?"stylesheet":P,R=L.optimizeForSpeed,W=R===void 0?l:R;h(d(_),"`name` must be a string"),this._name=_,this._deletedRulePlaceholder="#"+_+"-deleted-rule____{}",h(typeof W=="boolean","`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=W,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var G=typeof window<"u"&&document.querySelector('meta[property="csp-nonce"]');this._nonce=G?G.getAttribute("content"):null}var F=M.prototype;return F.setOptimizeForSpeed=function(L){h(typeof L=="boolean","`setOptimizeForSpeed` accepts a boolean"),h(this._rulesCount===0,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=L,this.inject()},F.isOptimizeForSpeed=function(){return this._optimizeForSpeed},F.inject=function(){var L=this;if(h(!this._injected,"sheet already injected"),this._injected=!0,typeof window<"u"&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(l||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(P,_){return typeof _=="number"?L._serverSheet.cssRules[_]={cssText:P}:L._serverSheet.cssRules.push({cssText:P}),_},deleteRule:function(P){L._serverSheet.cssRules[P]=null}}},F.getSheetForTag=function(L){if(L.sheet)return L.sheet;for(var P=0;P<document.styleSheets.length;P++)if(document.styleSheets[P].ownerNode===L)return document.styleSheets[P]},F.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},F.insertRule=function(L,P){if(h(d(L),"`insertRule` accepts only strings"),typeof window>"u")return typeof P!="number"&&(P=this._serverSheet.cssRules.length),this._serverSheet.insertRule(L,P),this._rulesCount++;if(this._optimizeForSpeed){var _=this.getSheet();typeof P!="number"&&(P=_.cssRules.length);try{_.insertRule(L,P)}catch{return l||console.warn(`StyleSheet: illegal rule: 

`+L+`

See https://stackoverflow.com/q/20007992 for more info`),-1}}else{var R=this._tags[P];this._tags.push(this.makeStyleTag(this._name,L,R))}return this._rulesCount++},F.replaceRule=function(L,P){if(this._optimizeForSpeed||typeof window>"u"){var _=typeof window<"u"?this.getSheet():this._serverSheet;if(P.trim()||(P=this._deletedRulePlaceholder),!_.cssRules[L])return L;_.deleteRule(L);try{_.insertRule(P,L)}catch{l||console.warn(`StyleSheet: illegal rule: 

`+P+`

See https://stackoverflow.com/q/20007992 for more info`),_.insertRule(this._deletedRulePlaceholder,L)}}else{var R=this._tags[L];h(R,"old rule at index `"+L+"` not found"),R.textContent=P}return L},F.deleteRule=function(L){if(typeof window>"u"){this._serverSheet.deleteRule(L);return}if(this._optimizeForSpeed)this.replaceRule(L,"");else{var P=this._tags[L];h(P,"rule at index `"+L+"` not found"),P.parentNode.removeChild(P),this._tags[L]=null}},F.flush=function(){this._injected=!1,this._rulesCount=0,typeof window<"u"?(this._tags.forEach(function(L){return L&&L.parentNode.removeChild(L)}),this._tags=[]):this._serverSheet.cssRules=[]},F.cssRules=function(){var L=this;return typeof window>"u"?this._serverSheet.cssRules:this._tags.reduce(function(P,_){return _?P=P.concat(Array.prototype.map.call(L.getSheetForTag(_).cssRules,function(R){return R.cssText===L._deletedRulePlaceholder?null:R})):P.push(null),P},[])},F.makeStyleTag=function(L,P,_){P&&h(d(P),"makeStyleTag accepts only strings as second parameter");var R=document.createElement("style");this._nonce&&R.setAttribute("nonce",this._nonce),R.type="text/css",R.setAttribute("data-"+L,""),P&&R.appendChild(document.createTextNode(P));var W=document.head||document.getElementsByTagName("head")[0];return _?W.insertBefore(R,_):W.appendChild(R),R},i(M,[{key:"length",get:function(){return this._rulesCount}}]),M}();function h(M,F){if(!M)throw new Error("StyleSheet: "+F+".")}function p(M){for(var F=5381,N=M.length;N;)F=F*33^M.charCodeAt(--N);return F>>>0}var m=p,g=function(M){return M.replace(/\/style/gi,"\\/style")},b={};function j(M,F){if(!F)return"jsx-"+M;var N=String(F),L=M+N;return b[L]||(b[L]="jsx-"+m(M+"-"+N)),b[L]}function v(M,F){var N=/__jsx-style-dynamic-selector/g;typeof window>"u"&&(F=g(F));var L=M+F;return b[L]||(b[L]=F.replace(N,M)),b[L]}function y(M,F){return F===void 0&&(F={}),M.map(function(N){var L=N[0],P=N[1];return a.default.createElement("style",{id:"__"+L,key:"__"+L,nonce:F.nonce?F.nonce:void 0,dangerouslySetInnerHTML:{__html:P}})})}var A=function(){function M(N){var L=N===void 0?{}:N,P=L.styleSheet,_=P===void 0?null:P,R=L.optimizeForSpeed,W=R===void 0?!1:R;this._sheet=_||new u({name:"styled-jsx",optimizeForSpeed:W}),this._sheet.inject(),_&&typeof W=="boolean"&&(this._sheet.setOptimizeForSpeed(W),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var F=M.prototype;return F.add=function(L){var P=this;this._optimizeForSpeed===void 0&&(this._optimizeForSpeed=Array.isArray(L.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),typeof window<"u"&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(oe,q){return oe[q]=0,oe},{}));var _=this.getIdAndRules(L),R=_.styleId,W=_.rules;if(R in this._instancesCounts){this._instancesCounts[R]+=1;return}var G=W.map(function(oe){return P._sheet.insertRule(oe)}).filter(function(oe){return oe!==-1});this._indices[R]=G,this._instancesCounts[R]=1},F.remove=function(L){var P=this,_=this.getIdAndRules(L).styleId;if(E(_ in this._instancesCounts,"styleId: `"+_+"` not found"),this._instancesCounts[_]-=1,this._instancesCounts[_]<1){var R=this._fromServer&&this._fromServer[_];R?(R.parentNode.removeChild(R),delete this._fromServer[_]):(this._indices[_].forEach(function(W){return P._sheet.deleteRule(W)}),delete this._indices[_]),delete this._instancesCounts[_]}},F.update=function(L,P){this.add(P),this.remove(L)},F.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},F.cssRules=function(){var L=this,P=this._fromServer?Object.keys(this._fromServer).map(function(R){return[R,L._fromServer[R]]}):[],_=this._sheet.cssRules();return P.concat(Object.keys(this._indices).map(function(R){return[R,L._indices[R].map(function(W){return _[W].cssText}).join(L._optimizeForSpeed?"":`
`)]}).filter(function(R){return!!R[1]}))},F.styles=function(L){return y(this.cssRules(),L)},F.getIdAndRules=function(L){var P=L.children,_=L.dynamic,R=L.id;if(_){var W=j(R,_);return{styleId:W,rules:Array.isArray(P)?P.map(function(G){return v(W,G)}):[v(W,P)]}}return{styleId:j(R),rules:Array.isArray(P)?P:[P]}},F.selectFromServer=function(){var L=Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]'));return L.reduce(function(P,_){var R=_.id.slice(2);return P[R]=_,P},{})},M}();function E(M,F){if(!M)throw new Error("StyleSheetRegistry: "+F+".")}var O=t.createContext(null);O.displayName="StyleSheetContext";function S(){return new A}function C(M){var F=M.registry,N=M.children,L=t.useContext(O),P=t.useState(function(){return L||F||S()}),_=P[0];return a.default.createElement(O.Provider,{value:_},N)}function k(){return t.useContext(O)}var I=a.default.useInsertionEffect||t.useLayoutEffect,z=typeof window<"u"?S():void 0;function B(M){var F=z||k(),N=t.useRef(!1);return F?typeof window>"u"?(F.add(M),null):(I(function(){if(document.head)return F.add(M),N.current=!0,function(){N.current=!1,F.remove(M)}},[M.id,String(M.dynamic)]),t.useLayoutEffect(function(){if(!(!document.head||N.current))return F.add(M),function(){F.remove(M)}},[M.id,String(M.dynamic)]),null):null}return B.dynamic=function(M){return M.map(function(F){var N=F[0],L=F[1];return j(N,L)}).join(" ")},$c.StyleRegistry=C,$c.createStyleRegistry=S,$c.style=B,$c.useStyleRegistry=k,$c}var Aj,Y6;function Rae(){return Y6||(Y6=1,Aj=Dae().style),Aj}var Pae=Rae();const Pl=$r(Pae),Mae=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Bae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(""),[l,d]=w.useState(1),[u,h]=w.useState(1),[p,m]=w.useState(""),[g,b]=w.useState("date"),[j,v]=w.useState("desc"),[y,A]=w.useState(null),[E,O]=w.useState(!1),S=7;w.useEffect(()=>{(async()=>{a(!0),i("");try{const R={page:l,limit:S};p.trim()&&(R.search=p.trim());const W=await Mae.get("/order",{params:R});let G=[];W.data.success&&Array.isArray(W.data.data)?G=W.data.data:W.data.orders&&Array.isArray(W.data.orders)?G=W.data.orders:Array.isArray(W.data)?G=W.data:(console.error(" Unexpected response format:",W.data),G=[]);const oe=G.map(V=>({id:V._id,orderId:V.orderNumber,customer:V.name,date:new Date(V.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),amount:V.total,method:V.paymentMethod,items:V.items,discount:V.discount,tax:V.tax,subtotal:V.subtotal,deliveryFee:V.deliveryFee}));t(oe);let q=1;W.data&&W.data.pagination&&W.data.pagination.totalPages?q=W.data.pagination.totalPages:q=Math.ceil(G.length/S)||1,h(q)}catch(R){console.error("Error fetching payments:",R),i("Failed to load payments. Please try again."),t([]),h(1)}finally{a(!1)}})()},[l,p]);const I=[...e.filter(_=>{const R=p.toLowerCase();return _.orderId.toLowerCase().includes(R)||_.customer.toLowerCase().includes(R)})].sort((_,R)=>g==="date"?j==="asc"?new Date(_.date)-new Date(R.date):new Date(R.date)-new Date(_.date):g==="amount"?j==="asc"?_.amount-R.amount:R.amount-_.amount:0).slice(0,S),z=_=>{switch(_){case"card":return r.jsx(Ua,{className:"h-5 w-5"});case"upi":return r.jsx(Ch,{className:"h-5 w-5"});case"cash":return r.jsx("span",{className:"rupees-icon",children:""});default:return r.jsx(Ua,{className:"h-5 w-5"})}},B=_=>{A(_),O(!0)},M=()=>{O(!1),A(null)},F=_=>{g===_?v(j==="asc"?"desc":"asc"):(b(_),v("desc"))},N=_=>{if(_==null)return"";const R=_.toString();return R.includes(",")||R.includes('"')||R.includes(`
`)?`"${R.replace(/"/g,'""')}"`:R},L=()=>{let R=["Order ID","Customer","Date","Subtotal","Discount","Tax","Delivery Fee","Total","Payment Method"].map(N).join(",")+`
`;e.forEach(V=>{const U=[V.orderId,V.customer,V.date,`${V.subtotal.toFixed(2)}`,`${V.discount.toFixed(2)}`,`${V.tax.toFixed(2)}`,`${V.deliveryFee.toFixed(2)}`,`${V.amount.toFixed(2)}`,V.method.charAt(0).toUpperCase()+V.method.slice(1)];R+=U.map(N).join(",")+`
`});const W="\uFEFF",G=new Blob([W+R],{type:"text/csv;charset=utf-8;"}),oe=window.URL.createObjectURL(G),q=document.createElement("a");q.setAttribute("hidden",""),q.setAttribute("href",oe),q.setAttribute("download",`payments-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(q),q.click(),document.body.removeChild(q)},P=()=>{const _=[];if(u<=7)for(let R=1;R<=u;R++)_.push(R);else{_.push(1);let R=Math.max(2,l-2),W=Math.min(u-1,l+2);l<=4&&(W=5),l>=u-3&&(R=u-4),R>2&&_.push("...");for(let G=R;G<=W;G++)_.push(G);W<u-1&&_.push("..."),u>1&&_.push(u)}return _};return r.jsxs("div",{className:"jsx-1250299241 payment-ui",children:[r.jsx("div",{className:"jsx-1250299241 page-header",children:r.jsx("h1",{className:"jsx-1250299241",children:"Payments"})}),s&&r.jsx("div",{style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},className:"jsx-1250299241 error-container",children:r.jsx("span",{className:"jsx-1250299241",children:s})}),r.jsxs("div",{className:"jsx-1250299241 filters-bar",children:[r.jsxs("div",{className:"jsx-1250299241 search-container",children:[r.jsx(Tr,{className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by order ID or customer name",value:p,onChange:_=>m(_.target.value),className:"jsx-1250299241 search-input"})]}),r.jsx("div",{className:"jsx-1250299241 filter-buttons",children:r.jsxs("button",{onClick:L,className:"jsx-1250299241 filter-btn",children:[r.jsx(Sa,{className:"h-4 w-4"}),r.jsx("span",{className:"jsx-1250299241",children:"Export"})]})})]}),r.jsx("div",{className:"jsx-1250299241 data-card",children:r.jsx("div",{className:"jsx-1250299241 card-body",children:n?r.jsxs("div",{className:"jsx-1250299241 loading-container",children:[r.jsx("div",{className:"jsx-1250299241 loading-spinner"}),r.jsx("p",{className:"jsx-1250299241",children:"Loading payments..."})]}):I.length===0?r.jsx("div",{className:"jsx-1250299241 empty-state",children:r.jsx("p",{className:"jsx-1250299241",children:"No payments found matching your search."})}):r.jsxs("table",{className:"jsx-1250299241 data-table",children:[r.jsx("thead",{className:"jsx-1250299241",children:r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("th",{className:"jsx-1250299241",children:"Order ID"}),r.jsx("th",{className:"jsx-1250299241",children:"Customer"}),r.jsx("th",{onClick:()=>F("date"),className:"jsx-1250299241 sortable-header",children:r.jsxs("div",{className:"jsx-1250299241 sort-header",children:[r.jsx("span",{className:"jsx-1250299241",children:"Date"}),g==="date"&&(j==="asc"?r.jsx(Ko,{className:"h-4 w-4"}):r.jsx(Go,{className:"h-4 w-4"}))]})}),r.jsx("th",{onClick:()=>F("amount"),className:"jsx-1250299241 sortable-header",children:r.jsxs("div",{className:"jsx-1250299241 sort-header",children:[r.jsx("span",{className:"jsx-1250299241",children:"Amount"}),g==="amount"&&(j==="asc"?r.jsx(Ko,{className:"h-4 w-4"}):r.jsx(Go,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"jsx-1250299241",children:"Payment Method"}),r.jsx("th",{className:"jsx-1250299241",children:"Actions"})]})}),r.jsx("tbody",{className:"jsx-1250299241",children:I.map(_=>r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("td",{className:"jsx-1250299241",children:_.orderId}),r.jsx("td",{className:"jsx-1250299241",children:_.customer}),r.jsx("td",{className:"jsx-1250299241",children:_.date}),r.jsxs("td",{className:"jsx-1250299241",children:["",_.amount.toFixed(2)]}),r.jsx("td",{className:"jsx-1250299241",children:r.jsxs("div",{className:"jsx-1250299241 payment-method",children:[z(_.method),r.jsx("span",{className:"jsx-1250299241 payment-method-text",children:_.method.charAt(0).toUpperCase()+_.method.slice(1)})]})}),r.jsx("td",{className:"jsx-1250299241",children:r.jsx("div",{className:"jsx-1250299241 action-buttons",children:r.jsx("button",{onClick:()=>B(_),className:"jsx-1250299241 action-btn view",children:"View"})})})]},_.id))})]})})}),r.jsxs("div",{className:"jsx-1250299241 pagination",children:[r.jsxs("button",{disabled:l===1,onClick:()=>d(_=>Math.max(_-1,1)),className:"jsx-1250299241 pagination-btn flex items-center justify-center gap-1",children:[r.jsx(Fd,{className:"h-4 w-4"}),r.jsx("span",{className:"jsx-1250299241",children:"Previous"})]}),r.jsx("div",{className:"jsx-1250299241 pagination-pages",children:P().map((_,R)=>_==="..."?r.jsx("span",{className:"jsx-1250299241 pagination-ellipsis",children:"..."},R):r.jsx("button",{onClick:()=>d(_),className:`jsx-1250299241 pagination-page ${l===_?"active":""}`,children:_},R))}),r.jsxs("button",{disabled:l===u,onClick:()=>d(_=>Math.min(_+1,u)),className:"jsx-1250299241 pagination-btn flex items-center justify-center gap-1",children:[r.jsx("span",{className:"jsx-1250299241",children:"Next"}),r.jsx(Ld,{className:"h-4 w-4"})]})]}),E&&y&&r.jsx("div",{className:"jsx-1250299241 modal-overlay",children:r.jsxs("div",{className:"jsx-1250299241 modal",children:[r.jsxs("div",{className:"jsx-1250299241 modal-header",children:[r.jsx("h2",{className:"jsx-1250299241 modal-title",children:"Payment Details"}),r.jsx("button",{onClick:M,className:"jsx-1250299241 modal-close",children:""})]}),r.jsx("div",{className:"jsx-1250299241 modal-body",children:r.jsxs("div",{className:"jsx-1250299241 payment-details",children:[r.jsxs("div",{className:"jsx-1250299241 payment-info-grid",children:[r.jsxs("div",{className:"jsx-1250299241 payment-info-section",children:[r.jsx("h3",{className:"jsx-1250299241 payment-info-title",children:"Payment Information"}),r.jsxs("div",{className:"jsx-1250299241 payment-info-content",children:[r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Order ID:"}),r.jsx("span",{className:"jsx-1250299241 info-value",children:y.orderId})]}),r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Date:"}),r.jsx("span",{className:"jsx-1250299241 info-value",children:y.date})]}),r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Subtotal:"}),r.jsxs("span",{className:"jsx-1250299241 info-value",children:["",y.subtotal.toFixed(2)]})]}),y.discount>0&&r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Discount:"}),r.jsxs("span",{style:{color:"#22c55e"},className:"jsx-1250299241 info-value",children:["-",y.discount.toFixed(2)]})]}),y.tax>0&&r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Tax:"}),r.jsxs("span",{className:"jsx-1250299241 info-value",children:["",y.tax.toFixed(2)]})]}),y.deliveryFee>0&&r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Delivery Fee:"}),r.jsxs("span",{className:"jsx-1250299241 info-value",children:["",y.deliveryFee.toFixed(2)]})]}),r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Total Amount:"}),r.jsxs("span",{className:"jsx-1250299241 info-value",children:["",y.amount.toFixed(2)]})]}),r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Payment Method:"}),r.jsx("span",{className:"jsx-1250299241 info-value",children:r.jsxs("div",{className:"jsx-1250299241 payment-method",children:[z(y.method),r.jsx("span",{className:"jsx-1250299241 payment-method-text",children:y.method.charAt(0).toUpperCase()+y.method.slice(1)})]})})]})]})]}),r.jsxs("div",{className:"jsx-1250299241 payment-info-section",children:[r.jsx("h3",{className:"jsx-1250299241 payment-info-title",children:"Customer Information"}),r.jsx("div",{className:"jsx-1250299241 payment-info-content",children:r.jsxs("div",{className:"jsx-1250299241 info-row",children:[r.jsx("span",{className:"jsx-1250299241 info-label",children:"Name:"}),r.jsx("span",{className:"jsx-1250299241 info-value",children:y.customer})]})})]})]}),r.jsxs("div",{className:"jsx-1250299241 order-items-section",children:[r.jsx("h3",{className:"jsx-1250299241 payment-info-title",children:"Order Items"}),r.jsxs("table",{className:"jsx-1250299241 order-items-table",children:[r.jsx("thead",{className:"jsx-1250299241",children:r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("th",{className:"jsx-1250299241",children:"Item"}),r.jsx("th",{className:"jsx-1250299241",children:"Quantity"}),r.jsx("th",{className:"jsx-1250299241",children:"Price"}),r.jsx("th",{className:"jsx-1250299241",children:"Total"})]})}),r.jsx("tbody",{className:"jsx-1250299241",children:y.items.map((_,R)=>r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("td",{className:"jsx-1250299241",children:_.name}),r.jsx("td",{className:"jsx-1250299241",children:_.quantity}),r.jsxs("td",{className:"jsx-1250299241",children:["",_.price.toFixed(2)]}),r.jsxs("td",{className:"jsx-1250299241",children:["",(_.quantity*_.price).toFixed(2)]})]},R))}),r.jsxs("tfoot",{className:"jsx-1250299241",children:[r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("td",{colSpan:"3",className:"jsx-1250299241 total-label",children:"Subtotal"}),r.jsxs("td",{className:"jsx-1250299241 total-value",children:["",y.subtotal.toFixed(2)]})]}),y.discount>0&&r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("td",{colSpan:"3",className:"jsx-1250299241 total-label",children:"Discount"}),r.jsxs("td",{style:{color:"#22c55e"},className:"jsx-1250299241 total-value",children:["-",y.discount.toFixed(2)]})]}),y.tax>0&&r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("td",{colSpan:"3",className:"jsx-1250299241 total-label",children:"Tax"}),r.jsxs("td",{className:"jsx-1250299241 total-value",children:["",y.tax.toFixed(2)]})]}),y.deliveryFee>0&&r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("td",{colSpan:"3",className:"jsx-1250299241 total-label",children:"Delivery Fee"}),r.jsxs("td",{className:"jsx-1250299241 total-value",children:["",y.deliveryFee.toFixed(2)]})]}),r.jsxs("tr",{className:"jsx-1250299241",children:[r.jsx("td",{colSpan:"3",className:"jsx-1250299241 total-label",children:"Total"}),r.jsxs("td",{className:"jsx-1250299241 total-value",children:["",y.amount.toFixed(2)]})]})]})]})]})]})}),r.jsx("div",{className:"jsx-1250299241 modal-footer",children:r.jsx("button",{onClick:M,className:"jsx-1250299241 btn btn-outline",children:"Close"})})]})}),r.jsx(Pl,{id:"1250299241",children:[".loading-container.jsx-1250299241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:40px;}",".loading-spinner.jsx-1250299241{border:4px solid rgba(0,0,0,0.1);border-left-color:var(--primary-color);border-radius:50%;width:30px;height:30px;-webkit-animation:spin-jsx-1250299241 1s linear infinite;animation:spin-jsx-1250299241 1s linear infinite;margin-bottom:10px;}","@-webkit-keyframes spin-jsx-1250299241{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes spin-jsx-1250299241{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}",".sortable-header.jsx-1250299241{cursor:pointer;}",".sort-header.jsx-1250299241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:4px;}",".payment-method.jsx-1250299241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;}",".payment-method-text.jsx-1250299241{font-size:14px;}",".rupees-icon.jsx-1250299241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:18px;line-height:1;}",".payment-details.jsx-1250299241{padding:10px 0;}",".payment-info-grid.jsx-1250299241{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;}","@media (max-width:768px){.payment-info-grid.jsx-1250299241{grid-template-columns:1fr;}}",".payment-info-section.jsx-1250299241{background-color:var(--bg-light);border-radius:var(--radius-md);overflow:hidden;}",".payment-info-title.jsx-1250299241{font-size:16px;font-weight:600;padding:12px 16px;background-color:var(--bg-white);border-bottom:1px solid var(--border-color);}",".payment-info-content.jsx-1250299241{padding:16px;}",".info-row.jsx-1250299241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:10px;}",".info-label.jsx-1250299241{width:140px;font-weight:500;color:var(--text-light);}",".info-value.jsx-1250299241{-webkit-flex:1;-ms-flex:1;flex:1;font-weight:500;}",".order-items-section.jsx-1250299241{margin-top:20px;}",".order-items-table.jsx-1250299241{width:100%;border-collapse:collapse;margin-top:10px;}",".order-items-table.jsx-1250299241 th.jsx-1250299241{text-align:left;padding:12px;background-color:var(--bg-light);font-weight:500;color:var(--text-light);}",".order-items-table.jsx-1250299241 td.jsx-1250299241{padding:12px;border-bottom:1px solid var(--border-color);}",".order-items-table.jsx-1250299241 tfoot.jsx-1250299241 td.jsx-1250299241{padding:12px;font-weight:600;}",".total-label.jsx-1250299241{text-align:right;font-weight:600;}",".total-value.jsx-1250299241{font-weight:700;color:var(--primary-color);}",".pagination-btn.jsx-1250299241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;gap:4px;padding:8px 16px;border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--bg-white);cursor:pointer;}",".pagination-btn.jsx-1250299241:disabled{opacity:0.5;cursor:not-allowed;}",".pagination-page.jsx-1250299241{padding:8px 12px;border:1px solid var(--border-color);border-radius:var(--radius-md);background-color:var(--bg-white);cursor:pointer;}",".pagination-page.active.jsx-1250299241{background-color:var(--primary-color);color:white;border-color:var(--primary-color);}",".pagination-ellipsis.jsx-1250299241{padding:8px 12px;color:var(--text-light);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})},Fae=()=>{const[e,t]=w.useState(null),[n,a]=w.useState(!1),[s,i]=w.useState({title:"",mobile:"",email:""}),[l,d]=w.useState(!1),[u,h]=w.useState(null),[p,m]=w.useState(null);w.useEffect(()=>{(async()=>{var v,y,A;d(!0);try{const E=await Jt.get("https://hotelvirat.com/api/v1/hotel/help-support");t(E.data),i({title:E.data.title,mobile:E.data.mobile,email:E.data.email})}catch(E){((v=E.response)==null?void 0:v.status)!==404&&h(((A=(y=E.response)==null?void 0:y.data)==null?void 0:A.message)||"Failed to fetch help and support information")}finally{d(!1)}})()},[]);const g=j=>{const{name:v,value:y}=j.target;i({...s,[v]:y})},b=async j=>{var v,y;j.preventDefault(),d(!0),h(null),m(null);try{let A;e!=null&&e._id?A=await Jt.put(`https://hotelvirat.com/api/v1/hotel/help-support/${e._id}`,s):A=await Jt.post("https://hotelvirat.com/api/v1/hotel/help-support",s),t(A.data.helpSupport),i({title:A.data.helpSupport.title,mobile:A.data.helpSupport.mobile,email:A.data.helpSupport.email}),a(!1),m("Help and support information saved successfully!"),setTimeout(()=>m(null),3e3)}catch(A){h(((y=(v=A.response)==null?void 0:v.data)==null?void 0:y.message)||"Failed to save help and support information")}finally{d(!1)}};return l&&!e?r.jsx("div",{className:"empty-state",children:"Loading..."}):u&&!e?r.jsx("div",{className:"empty-state",children:u}):r.jsxs("div",{className:"help-support-page",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Help & Support"}),!n&&r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:()=>a(!0),children:[r.jsx(Vn,{size:16}),r.jsx("span",{children:"Edit Information"})]})})]}),p&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:p}),r.jsx("button",{onClick:()=>m(null),children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"card",children:n?r.jsx("form",{onSubmit:b,children:r.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[u&&r.jsxs("div",{className:"alert-message",children:[r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"title",children:"Title"}),r.jsx("input",{type:"text",id:"title",name:"title",className:"form-input",value:s.title,onChange:g,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"mobile",children:"Mobile Number"}),r.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:s.mobile,onChange:g,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"email",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:s.email,onChange:g,required:!0})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{i(e?{title:e.title,mobile:e.mobile,email:e.email}:{title:"",mobile:"",email:""}),a(!1),h(null)},disabled:l,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?r.jsx("span",{children:"Saving..."}):r.jsxs(r.Fragment,{children:[r.jsx(i5,{size:16}),r.jsx("span",{children:"Save Changes"})]})})]})]})}):r.jsx("div",{className:"card-body",style:{padding:"20px"},children:e?r.jsxs("div",{className:"contact-info-container",children:[r.jsx("div",{className:"contact-header",children:r.jsx("h3",{children:e.title})}),r.jsxs("div",{className:"contact-details",children:[r.jsxs("div",{className:"contact-item",children:[r.jsx("div",{className:"contact-icon",children:r.jsx(Ia,{size:20})}),r.jsxs("div",{className:"contact-content",children:[r.jsx("h4",{children:"Mobile Number"}),r.jsx("p",{children:e.mobile})]})]}),r.jsxs("div",{className:"contact-item",children:[r.jsx("div",{className:"contact-icon",children:r.jsx(Ps,{size:20})}),r.jsxs("div",{className:"contact-content",children:[r.jsx("h4",{children:"Email Address"}),r.jsx("p",{children:e.email})]})]})]})]}):r.jsx("div",{className:"empty-state",children:"No help and support information available."})})})]})},Lae=()=>{const[e,t]=w.useState(null),[n,a]=w.useState(!1),[s,i]=w.useState({description:"",mission:""}),[l,d]=w.useState(!1),[u,h]=w.useState(null),[p,m]=w.useState(null),g=async()=>{try{d(!0),h(null);const v=await fetch("https://hotelvirat.com/api/v1/hotel/about-us");if(v.ok){const y=await v.json(),A=y.data||y;A&&A._id?(t(A),i({description:A.description||"",mission:A.mission||""})):(t(null),i({description:"",mission:""}))}else if(v.status===404)t(null),i({description:"",mission:""}),h(null);else throw new Error("Failed to fetch About Us data")}catch(v){console.error("Fetch error:",v),h(v.message),t(null)}finally{d(!1)}};w.useEffect(()=>{g()},[]);const b=v=>{const{name:y,value:A}=v.target;i({...s,[y]:A})},j=async v=>{if(v.preventDefault(),d(!0),h(null),m(null),!s.description.trim()||!s.mission.trim()){h("Both description and mission are required"),d(!1);return}if(s.description.trim().length<10){h("Description must be at least 10 characters long"),d(!1);return}if(s.mission.trim().length<10){h("Mission must be at least 10 characters long"),d(!1);return}try{const y="https://hotelvirat.com/api/v1",A=e?`${y}/hotel/about-us/${e._id}`:`${y}/hotel/about-us`,E=e?"PUT":"POST";console.log(`Making ${E} request to:`,A);const O=await fetch(A,{method:E,headers:{"Content-Type":"application/json"},body:JSON.stringify({description:s.description.trim(),mission:s.mission.trim()})});if(!O.ok){const C=await O.json();throw new Error(C.message||(e?"Failed to update About Us information":"Failed to create About Us information"))}const S=await O.json();console.log("Submit result:",S),m(S.message||(e?"About Us information updated successfully!":"About Us information created successfully!")),a(!1),await g(),setTimeout(()=>m(null),5e3)}catch(y){console.error("Submit error:",y),h(y.message)}finally{d(!1)}};return l&&!e&&!n?r.jsx("div",{className:"empty-state",children:"Loading..."}):r.jsxs("div",{className:"about-us-page",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"About Us"}),!n&&r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:()=>a(!0),disabled:l,children:[r.jsx(Vn,{size:16}),r.jsx("span",{children:e?"Edit Information":"Add Information"})]})})]}),p&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:p}),r.jsx("button",{onClick:()=>m(null),children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),u&&!n&&r.jsxs("div",{className:"alert-message",style:{marginBottom:"16px"},children:[r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:u}),r.jsx("button",{onClick:()=>h(null),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer"},children:""})]}),r.jsx("div",{className:"card",children:n?r.jsx("form",{onSubmit:j,children:r.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[u&&r.jsxs("div",{className:"alert-message",style:{marginBottom:"16px"},children:[r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"description",children:"Description *"}),r.jsx("textarea",{id:"description",name:"description",className:"form-textarea",value:s.description,onChange:b,required:!0,rows:6,placeholder:"Enter a detailed description about your hotel...",minLength:10}),r.jsxs("small",{style:{color:"#666",fontSize:"12px",marginTop:"4px",display:"block"},children:[s.description.length," characters (minimum 10 required)"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"mission",children:"Mission *"}),r.jsx("textarea",{id:"mission",name:"mission",className:"form-textarea",value:s.mission,onChange:b,required:!0,rows:4,placeholder:"Enter your hotel's mission statement...",minLength:10}),r.jsxs("small",{style:{color:"#666",fontSize:"12px",marginTop:"4px",display:"block"},children:[s.mission.length," characters (minimum 10 required)"]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{i(e?{description:e.description,mission:e.mission}:{description:"",mission:""}),a(!1),h(null),m(null)},disabled:l,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l||s.description.trim().length<10||s.mission.trim().length<10,children:l?r.jsx("span",{children:"Saving..."}):r.jsxs(r.Fragment,{children:[r.jsx(i5,{size:16}),r.jsx("span",{children:"Save Changes"})]})})]})]})}):e?r.jsx("div",{className:"card-body",style:{padding:"20px"},children:r.jsxs("div",{className:"about-info-container",children:[r.jsx("div",{className:"about-header",children:r.jsx("h3",{children:"About Hotel Virat"})}),r.jsxs("div",{className:"about-section",children:[r.jsx("h4",{children:"Description"}),r.jsx("p",{children:e.description})]}),r.jsxs("div",{className:"about-section",children:[r.jsxs("div",{className:"mission-header",children:[r.jsx(WA,{size:20,color:"#ff7e47"}),r.jsx("h4",{children:"Our Mission"})]}),r.jsx("p",{children:e.mission})]}),e.updatedAt&&r.jsx("div",{className:"about-meta",style:{marginTop:"20px",paddingTop:"15px",borderTop:"1px solid #eee"},children:r.jsxs("small",{style:{color:"#666",fontSize:"0.875rem"},children:["Last updated: ",new Date(e.updatedAt).toLocaleDateString()]})})]})}):r.jsx("div",{className:"card-body",style:{padding:"20px"},children:r.jsxs("div",{className:"empty-state",children:[r.jsx(WA,{size:48,color:"#ddd",style:{marginBottom:"16px"}}),r.jsx("h3",{style:{color:"#999",marginBottom:"8px"},children:"No About Us Information"}),r.jsx("p",{style:{color:"#999",margin:0},children:'No About Us information available. Click "Add Information" to create one.'})]})})})]})},$ae=({term:e,onClose:t,onSave:n})=>{const[a,s]=w.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",category:(e==null?void 0:e.category)||"Terms of Service"}),i=d=>{const{name:u,value:h}=d.target;s({...a,[u]:h})},l=d=>{d.preventDefault(),n(a),t()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:e?"Edit Policy":"Add New Policy"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:l,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"title",children:"Title"}),r.jsx("input",{type:"text",id:"title",name:"title",className:"form-input",value:a.title,onChange:i,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"category",children:"Category"}),r.jsxs("select",{id:"category",name:"category",className:"form-select",value:a.category,onChange:i,required:!0,children:[r.jsx("option",{value:"Order Policy",children:"Order Policy"}),r.jsx("option",{value:"Delivery Policy",children:"Delivery Policy"}),r.jsx("option",{value:"Privacy Policy",children:"Privacy Policy"}),r.jsx("option",{value:"Terms of Service",children:"Terms of Service"}),r.jsx("option",{value:"Refund Policy",children:"Refund Policy"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",className:"form-textarea",value:a.description,onChange:i,required:!0,rows:8})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:e?"Update Policy":"Add Policy"})]})]})]})})},zae=({term:e,onClose:t,onConfirm:n})=>r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Policy"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete ",r.jsxs("strong",{children:['"',e.title,'"']}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:()=>{n(e._id),t()},children:"Delete"})]})]})}),Uae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(""),[s,i]=w.useState(""),[l,d]=w.useState(!1),[u,h]=w.useState(null),[p,m]=w.useState(!1),[g,b]=w.useState(null),[j,v]=w.useState(null),[y,A]=w.useState(!1),[E,O]=w.useState(null),S=async()=>{A(!0),O(null);try{const _=`https://hotelvirat.com/api/v1/hotel/terms${s?`?category=${s}`:""}`,R=await fetch(_);if(!R.ok)throw new Error("Failed to fetch terms");const W=await R.json();let G=[];W.success&&Array.isArray(W.data)?G=W.data:Array.isArray(W)?G=W:W.message&&W.message.includes("routes working")&&(G=[]),t(G)}catch(P){O(P.message)}finally{A(!1)}};w.useEffect(()=>{S()},[s]);const C=e.filter(P=>P.title.toLowerCase().includes(n.toLowerCase())||P.description.toLowerCase().includes(n.toLowerCase())),k=()=>{h(null),d(!0)},I=P=>{h(P),d(!0)},z=P=>{b(P),m(!0)},B=async P=>{A(!0),O(null);try{const _="https://hotelvirat.com/api/v1/hotel",R=u?`${_}/terms/${u._id}`:`${_}/terms`;if(!(await fetch(R,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok)throw new Error(u?"Failed to update term":"Failed to create term");await S()}catch(_){O(_.message)}finally{A(!1)}},M=async P=>{A(!0),O(null);try{if(!(await fetch(`https://hotelvirat.com/api/v1/hotel/terms/${P}`,{method:"DELETE"})).ok)throw new Error("Failed to delete term");await S()}catch(_){O(_.message)}finally{A(!1)}},F=P=>{v(j===P?null:P)},N=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),L=P=>{switch(P){case"Terms of Service":return{bg:"#e0f2fe",text:"#0284c7"};case"Privacy Policy":return{bg:"#dcfce7",text:"#16a34a"};case"Refund Policy":return{bg:"#fef3c7",text:"#d97706"};case"Delivery Policy":return{bg:"#f3e8ff",text:"#7e22ce"};case"Order Policy":return{bg:"#fee2e2",text:"#dc2626"};default:return{bg:"#f1f5f9",text:"#64748b"}}};return r.jsxs("div",{className:"terms-policies-page",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Terms & Policies"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:k,disabled:y,children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Policy"})]})})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search policies...",className:"search-input",value:n,onChange:P=>a(P.target.value)})]}),r.jsx("div",{className:"filter-buttons",children:r.jsxs("select",{className:"filter-select",value:s,onChange:P=>i(P.target.value),disabled:y,children:[r.jsx("option",{value:"",children:"All Categories"}),r.jsx("option",{value:"Order Policy",children:"Order Policy"}),r.jsx("option",{value:"Delivery Policy",children:"Delivery Policy"}),r.jsx("option",{value:"Privacy Policy",children:"Privacy Policy"}),r.jsx("option",{value:"Terms of Service",children:"Terms of Service"}),r.jsx("option",{value:"Refund Policy",children:"Refund Policy"}),r.jsx("option",{value:"Other",children:"Other"})]})})]}),E&&r.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:E}),y?r.jsx("div",{className:"empty-state",children:"Loading..."}):r.jsx("div",{className:"terms-list",children:C.map(P=>{const _=L(P.category);return r.jsxs("div",{className:"terms-item",children:[r.jsxs("div",{className:"terms-header",onClick:()=>F(P._id),children:[r.jsxs("div",{className:"terms-title-section",children:[r.jsx("div",{className:"terms-icon",style:{backgroundColor:_.bg,color:_.text},children:r.jsx(ld,{size:20})}),r.jsxs("div",{className:"terms-info",children:[r.jsx("h3",{className:"terms-title",children:P.title}),r.jsxs("div",{className:"terms-meta",children:[r.jsx("span",{className:"terms-category",style:{backgroundColor:_.bg,color:_.text},children:P.category}),r.jsxs("span",{className:"terms-date",children:["Last updated: ",N(P.updatedAt)]})]})]})]}),r.jsxs("div",{className:"terms-actions",children:[r.jsx("button",{className:"action-btn edit",onClick:R=>{R.stopPropagation(),I(P)},disabled:y,children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:R=>{R.stopPropagation(),z(P)},disabled:y,children:r.jsx(Yn,{size:14})})]})]}),j===P._id&&r.jsx("div",{className:"terms-content",children:r.jsx("p",{children:P.description})})]},P._id)})}),C.length===0&&!y&&r.jsx("div",{className:"empty-state",style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"No policies found. Add a new policy to get started."})}),l&&r.jsx($ae,{term:u,onClose:()=>d(!1),onSave:B}),p&&r.jsx(zae,{term:g,onClose:()=>m(!1),onConfirm:M})]})},Yo="/assets/logo4-BWe_iBAv.jpeg",qae=()=>{const[e,t]=w.useState("admin"),[n,a]=w.useState(""),[s,i]=w.useState(""),[l,d]=w.useState(""),[u,h]=w.useState(!1),[p,m]=w.useState(""),[g,b]=w.useState(!1),j=kn(),v=async E=>{var S,C;E.preventDefault(),m(""),b(!0);const O="https://hotelvirat.com/api/v1/hotel";try{if(e==="admin"){const k=await Jt.post(`${O}/admin-auth/login`,{email:n,password:l}),{token:I}=k.data;localStorage.setItem("authToken",I),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userType","admin"),j("/admin")}else if(e==="category"){const k=await Jt.post(`${O}/category-access/login`,{username:s,password:l}),{token:I,user:z}=k.data;localStorage.setItem("authToken",I),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userType","category-staff"),localStorage.setItem("categoryStaffData",JSON.stringify(z)),j("/category-orders")}else if(e==="receptionist"){const k=await Jt.post(`${O}/receptionist-access/login`,{username:s,password:l}),{token:I,user:z}=k.data;localStorage.setItem("authToken",I),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("userType","receptionist"),localStorage.setItem("receptionistData",JSON.stringify(z)),j("/receptionist-dashboard")}}catch(k){m(((C=(S=k.response)==null?void 0:S.data)==null?void 0:C.message)||"An error occurred during login"),b(!1)}},y=()=>{j("/privacy-policy")},A=()=>{j("/terms-conditions")};return r.jsx("div",{className:"login-container-centered",children:r.jsxs("div",{className:"login-card",children:[r.jsxs("div",{className:"login-header",children:[r.jsxs("div",{className:"login-logo",children:[r.jsx("img",{src:Yo,alt:"Hotel Virat Logo",className:"logo-image"}),r.jsx("h1",{children:"Hotel Virat"})]}),r.jsx("p",{children:"Sign in to your account"})]}),r.jsxs("div",{className:"login-type-toggle",style:{display:"flex",marginBottom:"20px",borderRadius:"8px",overflow:"hidden",border:"1px solid #e5e7eb"},children:[r.jsx("button",{type:"button",onClick:()=>{t("admin"),m("")},style:{flex:1,padding:"10px",border:"none",cursor:"pointer",backgroundColor:e==="admin"?"#4f46e5":"#f9fafb",color:e==="admin"?"white":"#374151",fontWeight:"500",transition:"all 0.2s",fontSize:"13px"},children:"Admin"}),r.jsx("button",{type:"button",onClick:()=>{t("category"),m("")},style:{flex:1,padding:"10px",border:"none",cursor:"pointer",backgroundColor:e==="category"?"#4f46e5":"#f9fafb",color:e==="category"?"white":"#374151",fontWeight:"500",transition:"all 0.2s",fontSize:"13px"},children:"Category"}),r.jsx("button",{type:"button",onClick:()=>{t("receptionist"),m("")},style:{flex:1,padding:"10px",border:"none",cursor:"pointer",backgroundColor:e==="receptionist"?"#4f46e5":"#f9fafb",color:e==="receptionist"?"white":"#374151",fontWeight:"500",transition:"all 0.2s",fontSize:"13px"},children:"Receptionist"})]}),p&&r.jsx("div",{className:"login-error",children:p}),r.jsxs("form",{className:"login-form",onSubmit:v,children:[e==="admin"?r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email"}),r.jsxs("div",{className:"input-with-icon",children:[r.jsx("span",{className:"input-icon",children:r.jsx(Ps,{size:16})}),r.jsx("input",{type:"email",id:"email",placeholder:"Enter your email address",value:n,onChange:E=>a(E.target.value),required:!0,style:{paddingLeft:"40px"}})]})]}):r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"username",children:"Username"}),r.jsxs("div",{className:"input-with-icon",children:[r.jsx("span",{className:"input-icon",children:r.jsx(Vo,{size:16})}),r.jsx("input",{type:"text",id:"username",placeholder:e==="category"?"Enter category staff username":"Enter receptionist username",value:s,onChange:E=>i(E.target.value),required:!0,style:{paddingLeft:"40px"}})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsxs("div",{className:"input-with-icon",children:[r.jsx("span",{className:"input-icon",children:r.jsx(VL,{size:16})}),r.jsx("input",{type:u?"text":"password",id:"password",placeholder:"Enter your password",value:l,onChange:E=>d(E.target.value),required:!0,style:{paddingLeft:"40px"}}),r.jsx("button",{type:"button",className:"password-toggle",onClick:()=>h(!u),tabIndex:"-1",children:u?r.jsx(_w,{size:18}):r.jsx(xs,{size:18})})]})]}),r.jsx("button",{type:"submit",className:"login-button",disabled:g,children:g?"Signing in...":"Sign In"})]}),r.jsxs("div",{className:"login-footer-links",children:[r.jsx("button",{type:"button",className:"footer-link",onClick:y,children:"Privacy Policy"}),r.jsx("span",{className:"link-separator",children:"|"}),r.jsx("button",{type:"button",className:"footer-link",onClick:A,children:"Terms & Conditions"})]})]})})},Wae=({staff:e,onClose:t,onSave:n,isEditMode:a})=>{const[s,i]=w.useState({name:(e==null?void 0:e.name)||"",mobile:(e==null?void 0:e.mobile)||""}),[l,d]=w.useState(null),[u,h]=w.useState(!1),p=g=>{const{name:b,value:j}=g.target;i({...s,[b]:j}),d(null)},m=async g=>{g.preventDefault(),d(null),h(!0);try{await n(s,e==null?void 0:e._id),t()}catch(b){d(b.message||"Failed to save staff user")}finally{h(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:a?"Edit Staff User":"Add New Staff User"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:m,children:[r.jsxs("div",{className:"modal-body",children:[l&&r.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:l}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:p,required:!0,disabled:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"mobile",children:["Mobile ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:s.mobile,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit mobile number",disabled:u})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":a?"Update Staff User":"Add Staff User"})]})]})]})})},Hae=({staff:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),i=async()=>{s(!0);try{await n(e._id),t()}catch(l){console.error("Error deleting staff:",l)}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Staff User"}),r.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:i,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Gae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(""),[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,h]=w.useState(!1),[p,m]=w.useState(null),[g,b]=w.useState(""),[j,v]=w.useState(""),[y,A]=w.useState(!1),E="https://hotelvirat.com/api/v1/hotel/staff-auth",O=async()=>{A(!0),v("");try{const F=await fetch(`${E}/`);if(!F.ok)throw new Error(`HTTP error! status: ${F.status}`);const N=await F.json();let L=[];if(N&&N.success&&Array.isArray(N.data))L=N.data;else if(Array.isArray(N))L=N;else if(N&&N.message&&N.message.includes("routes working"))console.log(" Server returning placeholder response:",N.message),L=[];else{console.error("Expected array but got:",N),t([]),v("Invalid data format received from server");return}t(L)}catch(F){console.error("Fetch error:",F),v(`Failed to fetch staff users: ${F.message}`),t([])}finally{A(!1)}};w.useEffect(()=>{O()},[]);const S=()=>{d(null),i(!0)},C=F=>{d(F),i(!0)},k=F=>{m(F),h(!0)},I=async(F,N)=>{try{const L=N?`${E}/${N}`:`${E}/register`,_=await fetch(L,{method:N?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}),R=await _.json();if(!_.ok)throw new Error(R.message||"Failed to save staff user");b(`Staff user ${N?"updated":"added"} successfully`),setTimeout(()=>b(""),3e3),await O()}catch(L){throw new Error(L.message)}},z=async F=>{try{const N=await fetch(`${E}/${F}`,{method:"DELETE"}),L=await N.json();if(!N.ok)throw new Error(L.message||"Failed to delete staff user");b("Staff user deleted successfully"),setTimeout(()=>b(""),3e3),await O()}catch(N){v(N.message),setTimeout(()=>v(""),3e3)}},B=F=>{if(!F)return"N/A";const N={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(F).toLocaleDateString(void 0,N)},M=e.filter(F=>F.name.toLowerCase().includes(n.toLowerCase())||F.mobile.includes(n));return r.jsxs("div",{className:"staff-users-page",children:[g&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:g}),r.jsx("button",{onClick:()=>b(""),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&r.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>v(""),style:{color:"#dc2626"},children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Staff Users"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:S,disabled:y,children:[r.jsx($d,{size:16}),r.jsx("span",{children:"Add Staff User"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search staff users...",className:"search-input",value:n,onChange:F=>a(F.target.value)})]})}),r.jsx("div",{className:"data-card",children:y?r.jsx("div",{className:"empty-state",children:"Loading staff users..."}):M.length===0?r.jsx("div",{className:"empty-state",children:r.jsxs("p",{children:["No staff users found. ",n?"Try a different search.":"Add a new staff user to get started."]})}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"ID"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Mobile"}),r.jsx("th",{children:"Created At"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:M.map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:F._id.slice(-6)}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("div",{className:"user-avatar-placeholder",children:F.name.charAt(0).toUpperCase()}),F.name]})}),r.jsx("td",{children:r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ia,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),F.mobile]})}),r.jsx("td",{children:B(F.createdAt)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>C(F),disabled:y,children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>k(F),disabled:y,children:r.jsx(Yn,{size:14})})]})})]},F._id))})]})}),s&&r.jsx(Wae,{staff:l,onClose:()=>i(!1),onSave:I,isEditMode:!!l}),u&&r.jsx(Hae,{staff:p,onClose:()=>h(!1),onConfirm:z})]})},Kae=({counter:e,onClose:t,onSave:n,isEditMode:a})=>{const[s,i]=w.useState({name:(e==null?void 0:e.name)||"",mobile:(e==null?void 0:e.mobile)||""}),[l,d]=w.useState(null),[u,h]=w.useState(!1),p=g=>{const{name:b,value:j}=g.target;i({...s,[b]:j}),d(null)},m=async g=>{g.preventDefault(),d(null),h(!0);try{await n(s,e==null?void 0:e._id),t()}catch(b){d(b.message||"Failed to save counter user")}finally{h(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:a?"Edit Counter User":"Add New Counter User"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:m,children:[r.jsxs("div",{className:"modal-body",children:[l&&r.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:l}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:p,required:!0,disabled:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"mobile",children:["Mobile ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"mobile",name:"mobile",className:"form-input",value:s.mobile,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit mobile number",disabled:u})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":a?"Update Counter User":"Add Counter User"})]})]})]})})},Vae=({counter:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),i=async()=>{s(!0);try{await n(e._id),t()}catch(l){console.error("Error deleting counter:",l)}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Counter User"}),r.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:i,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Yae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(""),[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,h]=w.useState(!1),[p,m]=w.useState(null),[g,b]=w.useState(""),[j,v]=w.useState(""),[y,A]=w.useState(!1),E="https://hotelvirat.com/api/v1/hotel/counter-auth",O=async()=>{A(!0),v("");try{const F=await fetch(`${E}/`);if(!F.ok)throw new Error(`HTTP error! status: ${F.status}`);const N=await F.json();let L=[];if(N&&N.success&&Array.isArray(N.data))L=N.data;else if(Array.isArray(N))L=N;else if(N&&N.message&&N.message.includes("routes working"))console.log(" Server returning placeholder response:",N.message),L=[];else{console.error("Expected array but got:",N),t([]),v("Invalid data format received from server");return}t(L)}catch(F){console.error("Fetch error:",F),v(`Failed to fetch counter users: ${F.message}`),t([])}finally{A(!1)}};w.useEffect(()=>{O()},[]);const S=()=>{d(null),i(!0)},C=F=>{d(F),i(!0)},k=F=>{m(F),h(!0)},I=async(F,N)=>{try{const L=N?`${E}/${N}`:`${E}/register`,_=await fetch(L,{method:N?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}),R=await _.json();if(!_.ok)throw new Error(R.message||"Failed to save counter user");b(`Counter user ${N?"updated":"added"} successfully`),setTimeout(()=>b(""),3e3),await O()}catch(L){throw new Error(L.message)}},z=async F=>{try{const N=await fetch(`${E}/${F}`,{method:"DELETE"}),L=await N.json();if(!N.ok)throw new Error(L.message||"Failed to delete counter user");b("Counter user deleted successfully"),setTimeout(()=>b(""),3e3),await O()}catch(N){v(N.message),setTimeout(()=>v(""),3e3)}},B=F=>{if(!F)return"N/A";const N={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(F).toLocaleDateString(void 0,N)},M=e.filter(F=>F.name.toLowerCase().includes(n.toLowerCase())||F.mobile.includes(n));return r.jsxs("div",{className:"counter-users-page",children:[g&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:g}),r.jsx("button",{onClick:()=>b(""),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&r.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>v(""),style:{color:"#dc2626"},children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Counter Users"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:S,disabled:y,children:[r.jsx($d,{size:16}),r.jsx("span",{children:"Add Counter User"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search counter users...",className:"search-input",value:n,onChange:F=>a(F.target.value)})]})}),r.jsx("div",{className:"data-card",children:y?r.jsx("div",{className:"empty-state",children:"Loading counter users..."}):M.length===0?r.jsx("div",{className:"empty-state",children:r.jsxs("p",{children:["No counter users found."," ",n?"Try a different search.":"Add a new counter user to get started."]})}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"ID"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Mobile"}),r.jsx("th",{children:"Created At"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:M.map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:F._id.slice(-6)}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("div",{className:"user-avatar-placeholder",children:F.name.charAt(0).toUpperCase()}),F.name]})}),r.jsx("td",{children:r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ia,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),F.mobile]})}),r.jsx("td",{children:B(F.createdAt)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>C(F),disabled:y,children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>k(F),disabled:y,children:r.jsx(Yn,{size:14})})]})})]},F._id))})]})}),s&&r.jsx(Kae,{counter:l,onClose:()=>i(!1),onSave:I,isEditMode:!!l}),u&&r.jsx(Vae,{counter:p,onClose:()=>h(!1),onConfirm:z})]})},Nl=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Xae=()=>{var ze,Ze,Ae,Qe,pt,Bt,Pt,kt;const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState([]),[u,h]=w.useState([]),[p,m]=w.useState([]),[g,b]=w.useState(!0),[j,v]=w.useState(""),[y,A]=w.useState(!1),[E,O]=w.useState(!1),[S,C]=w.useState(null),[k,I]=w.useState({status:"",paymentStatus:"",paymentMethod:""}),[z,B]=w.useState(""),[M,F]=w.useState(!1),[N,L]=w.useState(""),[P,_]=w.useState("all"),[R,W]=w.useState("all"),[G,oe]=w.useState("all"),[q,V]=w.useState("all"),[U,X]=w.useState("today"),[H,Q]=w.useState(1),[le,me]=w.useState(1),[je,ee]=w.useState(null),se=7;w.useEffect(()=>{fe(),ue(),We()},[P,R,G,q]),w.useEffect(()=>{const ae=setInterval(()=>{We()},3e4);return()=>clearInterval(ae)},[P,R,G,q]);const fe=async()=>{try{const ae=await Nl.get("/branch");d(ae.data)}catch(ae){console.error("Error fetching branches:",ae),v("Failed to load branches. Some filter options may not be available.")}},ue=async()=>{try{const ae=await Nl.get("/staff-order/available-statuses");if(console.log("Available statuses API response:",ae.data),ae.data.success){const Ie=ae.data.orderStatuses||[],Ye=ae.data.paymentStatuses||[];console.log("Setting order statuses:",Ie),console.log("Setting payment statuses:",Ye),h(Ie),m(Ye)}}catch(ae){console.error("Error fetching available statuses:",ae),h(["pending","preparing","served","completed","cancelled"]),m(["pending","completed","failed","refunded"])}},We=async()=>{b(!0),v(""),t([]),i([]),a([]);try{const ae={};P!=="all"&&(ae.status=P),R!=="all"&&(ae.branchId=R),G!=="all"&&(ae.paymentStatus=G),q!=="all"&&(ae.orderType=q),N.trim()&&(ae.search=N.trim());const Ie={...ae,_t:Date.now()},Ye=await Nl.get("/staff-order",{params:Ie});let Ft=[];if(Ye.data&&Ye.data.success&&Array.isArray(Ye.data.data))Ft=Ye.data.data;else if(Ye.data&&Ye.data.orders&&Array.isArray(Ye.data.orders))Ft=Ye.data.orders;else if(Array.isArray(Ye.data))Ft=Ye.data;else throw console.error(" Unexpected response format:",Ye.data),new Error("Invalid response format: orders array missing");const xe=Ft.filter(ke=>!(ke.orderId||"").startsWith("COUNTER-")).map((ke,Re)=>{var ot,mt,Tt,_t,st;return{id:ke._id||`temp-id-${Re}`,orderId:ke.orderId||`UNKNOWN-${Re}`,customer:ke.isGuestOrder?ke.customerName:((ot=ke.userId)==null?void 0:ot.name)||"Unknown Staff",customerType:ke.isGuestOrder?"Guest":"Staff",customerMobile:ke.isGuestOrder?ke.customerMobile:((mt=ke.userId)==null?void 0:mt.mobile)||"N/A",date:new Date(ke.orderTime||ke.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:ke.branchName||"Unknown Branch",branchId:((Tt=ke.branchId)==null?void 0:Tt._id)||null,tableNumber:ke.tableNumber||"N/A",peopleCount:ke.peopleCount||0,items:((_t=ke.items)==null?void 0:_t.length)||0,amount:`${((st=ke.grandTotal)==null?void 0:st.toFixed(2))||"0.00"}`,status:ke.status||"pending",paymentMethod:ke.paymentMethod||"cash",paymentStatus:ke.paymentStatus||"pending",subtotal:ke.subtotal||0,tax:ke.tax||0,serviceCharge:ke.serviceCharge||0,grandTotal:ke.grandTotal||0,originalOrder:ke,isGuestOrder:ke.isGuestOrder||!1}}).filter(ke=>ke.id);t(xe),ee(new Date)}catch(ae){console.error("Error fetching orders:",ae),v("Failed to load orders. Please refresh the page and try again.")}finally{b(!1)}};w.useEffect(()=>{const ae=e.filter(Ie=>{if(!N.trim())return!0;const Ye=Ie.orderId||"",Ft=Ie.tableNumber||"",xe=Ie.customer||"",ke=Ie.customerMobile||"",Re=N.trim().toLowerCase();return Ye.toLowerCase().includes(Re)||Ft.toLowerCase().includes(Re)||xe.toLowerCase().includes(Re)||ke.toLowerCase().includes(Re)});i(ae),me(Math.ceil(ae.length/se)),Q(1)},[e,N]),w.useEffect(()=>{const ae=(H-1)*se,Ie=ae+se,Ye=s.slice(ae,Ie);a(Ye)},[s,H]);const we=ae=>{console.log("Admin Panel: Opening view modal for order:",ae),console.log("Admin Panel: Order status:",ae.status),console.log("Admin Panel: Order payment status:",ae.paymentStatus),C(ae),A(!0)},Me=ae=>{C(ae),I({status:ae.status,paymentStatus:ae.paymentStatus,paymentMethod:ae.paymentMethod}),O(!0)},Ee=ae=>{const{name:Ie,value:Ye}=ae.target;I({...k,[Ie]:Ye})},Be=async(ae,Ie)=>{var Ye,Ft;F(!0);try{console.log(`Admin Panel: Quick updating order status to: ${Ie}`);const xe=await Nl.put(`/staff-order/${ae}/status`,{status:Ie});if(console.log("Admin Panel: Quick status update response:",xe.data),xe.data.success)console.log("Admin Panel: Status updated successfully, refreshing orders..."),await We(),C({...S,status:Ie}),B(`Order ${S.orderId} status updated: ${S.status}  ${Ie}`),setTimeout(()=>{B("")},3e3);else throw new Error(xe.data.message||"Update failed")}catch(xe){console.error("Error updating order status:",xe);const ke=((Ft=(Ye=xe.response)==null?void 0:Ye.data)==null?void 0:Ft.message)||xe.message||"Failed to update order status";alert(`Update failed: ${ke}. Please try again.`)}finally{F(!1)}},it=async(ae,Ie)=>{var Ye,Ft;F(!0);try{console.log(`Admin Panel: Quick updating payment status to: ${Ie}`);const xe=await Nl.put(`/staff-order/${ae}/status`,{paymentStatus:Ie});if(console.log("Admin Panel: Quick payment update response:",xe.data),xe.data.success)console.log("Admin Panel: Payment status updated successfully, refreshing orders..."),await We(),C({...S,paymentStatus:Ie}),B(`Order ${S.orderId} payment status updated: ${S.paymentStatus}  ${Ie}`),setTimeout(()=>{B("")},3e3);else throw new Error(xe.data.message||"Update failed")}catch(xe){console.error("Error updating payment status:",xe);const ke=((Ft=(Ye=xe.response)==null?void 0:Ye.data)==null?void 0:Ft.message)||xe.message||"Failed to update payment status";alert(`Update failed: ${ke}. Please try again.`)}finally{F(!1)}},re=async()=>{var ae,Ie;F(!0);try{if(console.log(`Admin Panel: Updating payment method for order ${S.orderId}`),console.log(`Admin Panel: Current Payment Method: ${S.paymentMethod}`),console.log(`Admin Panel: New Payment Method: ${k.paymentMethod}`),k.paymentMethod===S.paymentMethod){alert("No changes detected. Payment method is already set to this value."),F(!1);return}const Ye=await Nl.put(`/staff-order/${S.id}/status`,{paymentMethod:k.paymentMethod});if(console.log("Admin Panel: Payment method update API response:",Ye.data),Ye.data.success)console.log("Admin Panel: Payment method updated successfully, refreshing orders..."),await We(),O(!1),B(`Order ${S.orderId} payment method updated: ${S.paymentMethod}  ${k.paymentMethod}`),setTimeout(()=>{B("")},5e3);else throw new Error(Ye.data.message||"Update failed")}catch(Ye){console.error("Error updating order:",Ye);const Ft=((Ie=(ae=Ye.response)==null?void 0:ae.data)==null?void 0:Ie.message)||Ye.message||"Failed to update order";alert(`Update failed: ${Ft}. Please try again.`)}finally{F(!1)}},ce=()=>{A(!1),C(null)},Z=()=>{O(!1),C(null)},de=(ae,Ie)=>{ae==="status"?_(Ie):ae==="branch"?W(Ie):ae==="paymentStatus"?oe(Ie):ae==="orderType"&&V(Ie),Q(1)},te=ae=>{switch(ae==null?void 0:ae.toLowerCase()){case"card":return r.jsx(Ua,{size:16});case"upi":return r.jsx(Vi,{size:16});case"cash":default:return r.jsx(Vi,{size:16})}},Se=ae=>{switch(ae==null?void 0:ae.toLowerCase()){case"completed":return"completed";case"pending":return"pending";case"failed":return"cancelled";case"refunded":return"preparing";default:return"pending"}},Ve=()=>{let ae=`Order ID,Customer Name,Customer Type,Mobile Number,Date & Time,Branch,Table Number,People Count,Order Status,Payment Status,Payment Method,Subtotal,Tax (5%),Service Charge (10%),Grand Total,Items Count,Item Details
`;const Ie=new Date,Ye=Ie.toLocaleDateString("en-IN")+" "+Ie.toLocaleTimeString("en-IN"),Ft=s.length,xe=s.reduce((yt,Nt)=>yt+(Nt.grandTotal||0),0),ke=s.filter(yt=>yt.paymentStatus==="completed"),Re=ke.reduce((yt,Nt)=>yt+(Nt.grandTotal||0),0),ot=xe-Re;ae+=`
"STAFF ORDERS EXPORT SUMMARY"
`,ae+=`"Export Date & Time:","${Ye}"
`,ae+=`"Total Orders:",${Ft}
`,ae+=`"Total Amount:",${xe.toFixed(2)}
`,ae+=`"Paid Orders:",${ke.length}
`,ae+=`"Paid Amount:",${Re.toFixed(2)}
`,ae+=`"Unpaid Orders:",${Ft-ke.length}
`,ae+=`"Unpaid Amount:",${ot.toFixed(2)}
`,ae+=`"Collection Rate:",${xe>0?(Re/xe*100).toFixed(1):0}
`,ae+=`
"DETAILED ORDER LIST"
`,ae+=`Order ID,Customer Name,Customer Type,Mobile Number,Date & Time,Branch,Table Number,People Count,Order Status,Payment Status,Payment Method,Subtotal,Tax (5%),Service Charge (10%),Grand Total,Items Count,Item Details
`,s.forEach(yt=>{var Ut,zr,Qt,ln,ne,ge,he,pe;const Nt=((zr=(Ut=yt.originalOrder)==null?void 0:Ut.items)==null?void 0:zr.map(ye=>`${ye.name} (Qty: ${ye.quantity}, Price: ${ye.price.toFixed(2)})`).join("; "))||"No items",Kt=new Date(((Qt=yt.originalOrder)==null?void 0:Qt.createdAt)||((ln=yt.originalOrder)==null?void 0:ln.orderTime)||Date.now()),Lt=Kt.toLocaleDateString("en-IN")+" "+Kt.toLocaleTimeString("en-IN");ae+=`"${yt.orderId}","${yt.customer}","${yt.customerType}","${yt.customerMobile}","${Lt}","${yt.branch}","${yt.tableNumber}",${yt.peopleCount},"${yt.status}","${yt.paymentStatus}","${yt.paymentMethod}",${((ne=yt.subtotal)==null?void 0:ne.toFixed(2))||"0.00"},${((ge=yt.tax)==null?void 0:ge.toFixed(2))||"0.00"},${((he=yt.serviceCharge)==null?void 0:he.toFixed(2))||"0.00"},${((pe=yt.grandTotal)==null?void 0:pe.toFixed(2))||"0.00"},${yt.items},"${Nt}"
`}),ae+=`
"PAYMENT METHOD BREAKDOWN"
`;const mt={};s.forEach(yt=>{const Nt=yt.paymentMethod||"cash";mt[Nt]||(mt[Nt]={count:0,amount:0}),mt[Nt].count++,mt[Nt].amount+=yt.grandTotal||0}),ae+=`Payment Method,Order Count,Total Amount
`,Object.entries(mt).forEach(([yt,Nt])=>{ae+=`"${yt.charAt(0).toUpperCase()+yt.slice(1)}",${Nt.count},${Nt.amount.toFixed(2)}
`}),ae+=`
"BRANCH-WISE BREAKDOWN"
`;const Tt={};s.forEach(yt=>{const Nt=yt.branch||"Unknown";Tt[Nt]||(Tt[Nt]={count:0,amount:0}),Tt[Nt].count++,Tt[Nt].amount+=yt.grandTotal||0}),ae+=`Branch Name,Order Count,Total Amount
`,Object.entries(Tt).forEach(([yt,Nt])=>{ae+=`"${yt}",${Nt.count},${Nt.amount.toFixed(2)}
`});const _t=new Blob([ae],{type:"text/csv;charset=utf-8;"}),st=window.URL.createObjectURL(_t),wt=document.createElement("a");wt.setAttribute("hidden",""),wt.setAttribute("href",st),wt.setAttribute("download",`staff-orders-detailed-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),window.URL.revokeObjectURL(st)},tt=ae=>{var Ft,xe,ke,Re,ot,mt,Tt,_t;const Ie=window.open("","_blank","width=302,height=600"),Ye=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Order ${ae.orderId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .order-info { margin-bottom: 10px; }
          .order-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${ae.branch}</div>
        </div>
        
        <div class="order-id">Order #${ae.orderId}</div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${ae.date}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Table:</span>
            <span>${ae.tableNumber}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Guests:</span>
            <span>${ae.peopleCount}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Customer:</span>
            <span>${ae.customer}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Type:</span>
            <span>${ae.customerType}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${ae.customerMobile}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${((xe=(Ft=ae.originalOrder)==null?void 0:Ft.items)==null?void 0:xe.map(st=>`
            <div class="item-row">
              <div class="item-name">${st.name}</div>
              <div class="item-details">
                <span>${st.quantity} x ${st.price.toFixed(2)}</span>
                <span>${(st.price*st.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((ke=ae.subtotal)==null?void 0:ke.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax (5%):</span>
            <span>${((Re=ae.tax)==null?void 0:Re.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service (10%):</span>
            <span>${((ot=ae.serviceCharge)==null?void 0:ot.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${((mt=ae.grandTotal)==null?void 0:mt.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Payment:</span>
            <span>${((Tt=ae.paymentMethod)==null?void 0:Tt.toUpperCase())||"CASH"}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Status:</span>
            <span>${((_t=ae.paymentStatus)==null?void 0:_t.toUpperCase())||"PENDING"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;Ie.document.write(Ye),Ie.document.close(),Ie.focus(),setTimeout(()=>{Ie.print()},300)};return r.jsxs("div",{className:"orders-page",children:[z&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:z}),r.jsx("button",{onClick:()=>B(""),children:r.jsx(On,{size:16})})]}),r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-title-section",children:[r.jsx("h1",{children:"All Orders (Staff & Guest)"}),je&&r.jsxs("p",{className:"last-updated",children:["Last updated: ",je.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})," | Total orders: ",e.length," | API: Local (",Nl.defaults.baseURL,")",r.jsx("br",{}),r.jsxs("small",{children:["Available Order Statuses: ",u.join(", ")," | Payment Statuses: ",p.join(", ")]})]})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("button",{className:"btn btn-outline",onClick:We,disabled:g,children:[g?r.jsx($a,{size:16,className:"animate-spin"}):r.jsx(Tr,{size:16}),r.jsx("span",{children:g?"Refreshing...":"Refresh Data"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>{t([]),i([]),a([]),We()},disabled:g,children:[r.jsx(xr,{size:16}),r.jsx("span",{children:"Force Refresh"})]}),r.jsxs("button",{className:"btn btn-outline",onClick:Ve,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:"Export to Excel"})]})]})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by order ID, table, customer name, or mobile...",className:"search-input",value:N,onChange:ae=>L(ae.target.value)})]}),r.jsxs("div",{className:"filter-buttons",children:[r.jsxs("select",{className:"filter-select",value:q,onChange:ae=>de("orderType",ae.target.value),children:[r.jsx("option",{value:"all",children:"All Orders"}),r.jsx("option",{value:"staff",children:"Staff Orders"}),r.jsx("option",{value:"guest",children:"Guest Orders"})]}),r.jsxs("select",{className:"filter-select",value:P,onChange:ae=>de("status",ae.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),u.map(ae=>r.jsx("option",{value:ae,children:ae.charAt(0).toUpperCase()+ae.slice(1)},ae))]}),r.jsxs("select",{className:"filter-select",value:G,onChange:ae=>de("paymentStatus",ae.target.value),children:[r.jsx("option",{value:"all",children:"All Payment Status"}),p.map(ae=>r.jsx("option",{value:ae,children:ae.charAt(0).toUpperCase()+ae.slice(1)},ae))]}),r.jsxs("select",{className:"filter-select",value:R,onChange:ae=>de("branch",ae.target.value),children:[r.jsx("option",{value:"all",children:"All Branches"}),l.map(ae=>r.jsx("option",{value:ae._id,children:ae.name},ae._id))]})]})]}),j&&r.jsxs("div",{className:"error-container",children:[r.jsx(xr,{size:18}),r.jsx("span",{children:j})]}),r.jsxs("div",{className:"collection-stats-section",children:[r.jsxs("div",{className:"stats-header",children:[r.jsx("h2",{children:"Collection Statistics"}),r.jsxs("div",{className:"period-filters",children:[r.jsx("button",{className:`period-btn ${U==="today"?"active":""}`,onClick:()=>X("today"),children:"Today"}),r.jsx("button",{className:`period-btn ${U==="week"?"active":""}`,onClick:()=>X("week"),children:"This Week"}),r.jsx("button",{className:`period-btn ${U==="month"?"active":""}`,onClick:()=>X("month"),children:"This Month"})]})]}),r.jsx("div",{className:"stats-cards",children:(()=>{const ae=new Date;let Ie;if(U==="today")Ie=new Date(ae.getFullYear(),ae.getMonth(),ae.getDate());else if(U==="week"){const st=ae.getDay(),wt=st===0?6:st-1;Ie=new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()-wt)}else U==="month"&&(Ie=new Date(ae.getFullYear(),ae.getMonth(),1));const Ye=e.filter(st=>{var Nt,Kt;const wt=new Date(((Nt=st.originalOrder)==null?void 0:Nt.createdAt)||((Kt=st.originalOrder)==null?void 0:Kt.orderTime)),yt=!st.orderId.startsWith("COUNTER-");return wt>=Ie&&yt}),Ft=Ye.filter(st=>st.paymentStatus==="completed"),xe=Ye.filter(st=>st.paymentStatus!=="completed"),ke=Ye.reduce((st,wt)=>st+(wt.grandTotal||0),0),Re=Ye.length,ot=Ft.reduce((st,wt)=>st+(wt.grandTotal||0),0),mt=Ft.length,Tt=xe.reduce((st,wt)=>st+(wt.grandTotal||0),0),_t=xe.length;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"stat-card total",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Total Orders"}),r.jsxs("div",{className:"stat-value",children:[Re," orders"]}),r.jsxs("div",{className:"stat-count",children:["",ke.toFixed(2)]})]})]}),r.jsxs("div",{className:"stat-card paid",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Paid Orders"}),r.jsxs("div",{className:"stat-value",children:[mt," orders"]}),r.jsxs("div",{className:"stat-count",children:["",ot.toFixed(2)]})]})]}),r.jsxs("div",{className:"stat-card unpaid",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Unpaid Orders"}),r.jsxs("div",{className:"stat-value",children:[_t," orders"]}),r.jsxs("div",{className:"stat-count",children:["",Tt.toFixed(2)]})]})]})]})})()})]}),r.jsx("div",{className:"data-card",children:g?r.jsxs("div",{className:"loading-container",children:[r.jsx($a,{size:24,className:"animate-spin"}),r.jsx("p",{children:"Loading orders..."})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order ID"}),r.jsx("th",{children:"Order Status"}),r.jsx("th",{children:"Payment Status"}),r.jsx("th",{children:"Order By"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Mobile"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Table"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.length>0?n.map(ae=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Order ID",children:ae.orderId}),r.jsx("td",{"data-label":"Order Status",children:r.jsx("div",{style:{display:"inline-block",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",textAlign:"center",minWidth:"80px",backgroundColor:ae.status==="completed"?"#d1fae5":ae.status==="preparing"?"#dbeafe":ae.status==="served"?"#e0e7ff":ae.status==="cancelled"?"#fee2e2":"#fef3c7",color:ae.status==="completed"?"#065f46":ae.status==="preparing"?"#1e40af":ae.status==="served"?"#5b21b6":ae.status==="cancelled"?"#991b1b":"#92400e",border:"1px solid "+(ae.status==="completed"?"#10b981":ae.status==="preparing"?"#3b82f6":ae.status==="served"?"#8b5cf6":ae.status==="cancelled"?"#ef4444":"#f59e0b")},children:ae.status?ae.status.charAt(0).toUpperCase()+ae.status.slice(1):"Pending"})}),r.jsx("td",{"data-label":"Payment Status",children:r.jsx("div",{style:{display:"inline-block",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",textAlign:"center",minWidth:"80px",backgroundColor:ae.paymentStatus==="completed"?"#d1fae5":ae.paymentStatus==="failed"?"#fee2e2":ae.paymentStatus==="refunded"?"#e0e7ff":"#fef3c7",color:ae.paymentStatus==="completed"?"#065f46":ae.paymentStatus==="failed"?"#991b1b":ae.paymentStatus==="refunded"?"#5b21b6":"#92400e",border:"1px solid "+(ae.paymentStatus==="completed"?"#10b981":ae.paymentStatus==="failed"?"#ef4444":ae.paymentStatus==="refunded"?"#8b5cf6":"#f59e0b")},children:ae.paymentStatus?ae.paymentStatus.charAt(0).toUpperCase()+ae.paymentStatus.slice(1):"Pending"})}),r.jsx("td",{"data-label":"Customer",children:ae.customer}),r.jsx("td",{"data-label":"Type",children:r.jsx("span",{className:`customer-type-badge ${ae.isGuestOrder?"guest":"staff"}`,children:ae.customerType})}),r.jsx("td",{"data-label":"Mobile",children:ae.customerMobile}),r.jsx("td",{"data-label":"Date",children:ae.date}),r.jsx("td",{"data-label":"Branch",children:ae.branch}),r.jsx("td",{"data-label":"Table",children:ae.tableNumber}),r.jsx("td",{"data-label":"Amount",children:ae.amount}),r.jsx("td",{"data-label":"Actions",children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn view",onClick:()=>we(ae),children:"View"}),r.jsx("button",{className:"action-btn edit",onClick:()=>Me(ae),children:"Edit"}),r.jsx("button",{className:"action-btn print",onClick:()=>tt(ae),children:"Print"})]})})]},ae.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"11",className:"no-orders",children:"No orders found matching your criteria"})})})]})})}),le>0&&r.jsxs("div",{className:"pagination",children:[r.jsx("button",{className:"pagination-btn",onClick:()=>Q(ae=>Math.max(ae-1,1)),disabled:H===1||g,children:"Previous"}),r.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,le)},(ae,Ie)=>{let Ye;return le<=5||H<=3?Ye=Ie+1:H>=le-2?Ye=le-4+Ie:Ye=H-2+Ie,r.jsx("button",{className:`pagination-page ${H===Ye?"active":""}`,onClick:()=>Q(Ye),disabled:g,children:Ye},Ye)}),le>5&&H<le-2&&r.jsx("span",{className:"pagination-ellipsis",children:"..."}),le>5&&H<le-2&&r.jsx("button",{className:`pagination-page ${H===le?"active":""}`,onClick:()=>Q(le),disabled:g,children:le})]}),r.jsx("button",{className:"pagination-btn",onClick:()=>Q(ae=>Math.min(ae+1,le)),disabled:H===le||g,children:"Next"})]}),y&&S&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:[S.isGuestOrder?"Guest":"Staff"," Order Details ",S.orderId]}),r.jsx("button",{className:"modal-close",onClick:ce,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"order-details",children:[r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Order By"}),r.jsxs("div",{className:"order-detail-value",children:[S.customer,r.jsx("span",{className:`customer-type-badge ${S.isGuestOrder?"guest":"staff"}`,style:{marginLeft:"8px"},children:S.customerType})]})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Mobile Number"}),r.jsx("div",{className:"order-detail-value",children:S.customerMobile})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Date"}),r.jsx("div",{className:"order-detail-value",children:S.date})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Branch"}),r.jsx("div",{className:"order-detail-value",children:S.branch})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Table Number"}),r.jsx("div",{className:"order-detail-value",children:S.tableNumber})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Number of People"}),r.jsx("div",{className:"order-detail-value",children:r.jsxs("div",{className:"people-count",children:[r.jsx(ei,{size:16}),S.peopleCount]})})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Order Status"}),r.jsx("div",{className:"order-detail-value",children:r.jsx("span",{className:`status-badge ${S.status||"pending"}`,children:S.status?S.status.charAt(0).toUpperCase()+S.status.slice(1):"Pending"})})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Payment Method"}),r.jsx("div",{className:"order-detail-value",children:r.jsxs("div",{className:"payment-method-display",children:[te(S.paymentMethod),r.jsx("span",{children:S.paymentMethod?S.paymentMethod.charAt(0).toUpperCase()+S.paymentMethod.slice(1):"Cash"})]})})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Payment Status"}),r.jsx("div",{className:"order-detail-value",children:r.jsx("span",{className:`status-badge ${Se(S.paymentStatus)}`,children:S.paymentStatus?S.paymentStatus.charAt(0).toUpperCase()+S.paymentStatus.slice(1):"Pending"})})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Price Details"}),r.jsx("div",{className:"order-items-table",children:r.jsx("table",{className:"data-table",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Subtotal"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((ze=S.subtotal)==null?void 0:ze.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Tax (5%)"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Ze=S.tax)==null?void 0:Ze.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Service Charge (10%)"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Ae=S.serviceCharge)==null?void 0:Ae.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{style:{fontWeight:"bold"},children:[r.jsx("td",{children:"Total Amount"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Qe=S.grandTotal)==null?void 0:Qe.toFixed(2))||"0.00"]})]})]})})})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Order Items"}),r.jsx("div",{className:"order-items-table",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:((Bt=(pt=S.originalOrder)==null?void 0:pt.items)==null?void 0:Bt.length)>0?S.originalOrder.items.map((ae,Ie)=>r.jsxs("tr",{children:[r.jsx("td",{children:ae.name}),r.jsx("td",{children:ae.quantity}),r.jsxs("td",{children:["",ae.price.toFixed(2)]}),r.jsxs("td",{children:["",(ae.price*ae.quantity).toFixed(2)]})]},Ie)):r.jsx("tr",{children:r.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:ce,children:"Close"}),r.jsxs("button",{className:"btn btn-print",onClick:()=>tt(S),children:[r.jsx(_s,{size:16}),"Print"]}),r.jsx("button",{className:"btn btn-primary",onClick:()=>{ce(),Me(S)},children:"Edit Order"})]})]})}),E&&S&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:["Edit ",S.isGuestOrder?"Guest":"Staff"," Order ",S.orderId]}),r.jsx("button",{className:"modal-close",onClick:Z,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Order By"}),r.jsx("input",{type:"text",value:S.customer,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer Type"}),r.jsx("input",{type:"text",value:S.customerType,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Mobile Number"}),r.jsx("input",{type:"text",value:S.customerMobile,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Branch"}),r.jsx("input",{type:"text",value:S.branch,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Table Number"}),r.jsx("input",{type:"text",value:S.tableNumber,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Order Status"}),r.jsx("div",{className:"current-status-display",children:r.jsxs("span",{className:`status-badge ${(S==null?void 0:S.status)||"pending"}`,children:["Current: ",S!=null&&S.status?S.status.charAt(0).toUpperCase()+S.status.slice(1):"Pending"]})}),S.status!=="completed"&&S.status!=="cancelled"&&r.jsxs("div",{className:"status-progression-buttons",children:[S.status==="pending"&&r.jsx("button",{type:"button",className:"progression-btn preparing",onClick:()=>Be(S.id,"preparing"),disabled:M,children:"Mark as Preparing"}),S.status==="preparing"&&r.jsx("button",{type:"button",className:"progression-btn served",onClick:()=>Be(S.id,"served"),disabled:M,children:"Mark as Served"}),S.status==="served"&&r.jsx("button",{type:"button",className:"progression-btn completed",onClick:()=>Be(S.id,"completed"),disabled:M,children:"Mark as Completed"}),(S.status==="pending"||S.status==="preparing")&&r.jsx("button",{type:"button",className:"progression-btn cancelled",onClick:()=>Be(S.id,"cancelled"),disabled:M,children:"Cancel Order"})]}),(S.status==="completed"||S.status==="cancelled")&&r.jsx("div",{className:"status-final-message",children:r.jsxs("p",{children:["Order is ",S.status,". No further status changes allowed."]})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Status"}),r.jsx("div",{className:"current-status-display",children:r.jsxs("span",{className:`status-badge ${Se(S==null?void 0:S.paymentStatus)}`,children:["Current: ",S!=null&&S.paymentStatus?S.paymentStatus.charAt(0).toUpperCase()+S.paymentStatus.slice(1):"Pending"]})}),S.paymentStatus!=="completed"&&S.paymentStatus!=="refunded"&&r.jsxs("div",{className:"status-progression-buttons",children:[S.paymentStatus==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"progression-btn completed",onClick:()=>it(S.id,"completed"),disabled:M,children:"Mark as Paid"}),r.jsx("button",{type:"button",className:"progression-btn failed",onClick:()=>it(S.id,"failed"),disabled:M,children:"Mark as Failed"})]}),S.paymentStatus==="failed"&&r.jsx("button",{type:"button",className:"progression-btn completed",onClick:()=>it(S.id,"completed"),disabled:M,children:"Mark as Paid"})]}),(S.paymentStatus==="completed"||S.paymentStatus==="paid")&&r.jsx("div",{className:"status-progression-buttons",children:r.jsx("button",{type:"button",className:"progression-btn refunded",onClick:()=>it(S.id,"refunded"),disabled:M,children:"Mark as Refunded"})}),S.paymentStatus==="refunded"&&r.jsx("div",{className:"status-final-message",children:r.jsx("p",{children:"Payment has been refunded. No further payment changes allowed."})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Method"}),r.jsxs("select",{name:"paymentMethod",value:k.paymentMethod,onChange:Ee,className:"form-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"netbanking",children:"Net Banking"}),r.jsx("option",{value:"wallet",children:"Wallet"})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h4",{children:"Order Items"}),r.jsxs("div",{className:"alert-message",children:[r.jsx(xr,{size:16}),r.jsx("span",{children:"Use buttons above to update order and payment status progressively"})]})]}),r.jsx("div",{className:"order-items-table",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:((kt=(Pt=S.originalOrder)==null?void 0:Pt.items)==null?void 0:kt.length)>0?S.originalOrder.items.map((ae,Ie)=>r.jsxs("tr",{children:[r.jsx("td",{children:ae.name}),r.jsx("td",{children:ae.quantity}),r.jsxs("td",{children:["",ae.price.toFixed(2)]}),r.jsxs("td",{children:["",(ae.price*ae.quantity).toFixed(2)]})]},Ie)):r.jsx("tr",{children:r.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:Z,disabled:M,children:"Close"}),r.jsx("button",{className:"btn btn-primary",onClick:re,disabled:M,children:M?r.jsxs(r.Fragment,{children:[r.jsx($a,{size:16,className:"animate-spin"}),r.jsx("span",{children:"Updating..."})]}):"Update Payment Method"})]})]})}),r.jsx("style",{children:`
        /* Base Styles */
        .orders-page {
          padding: 20px;
          max-width: 100%;
          margin: 0 auto;
          background: #f8fafc;
          min-height: 100vh;
        }

        /* Success Message */
        .success-message {
          position: fixed;
          top: 20px;
          right: 20px;
          background: #10b981;
          color: white;
          padding: 12px 16px;
          border-radius: 8px;
          display: flex;
          align-items: center;
          gap: 8px;
          z-index: 1000;
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .success-message button {
          background: none;
          border: none;
          color: white;
          cursor: pointer;
          padding: 4px;
          border-radius: 4px;
        }

        .success-message button:hover {
          background: rgba(255, 255, 255, 0.2);
        }

        /* Page Header */
        .page-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 24px;
          flex-wrap: wrap;
          gap: 16px;
        }

        .header-title-section h1 {
          font-size: 28px;
          font-weight: 700;
          color: #1f2937;
          margin: 0;
        }

        .last-updated {
          font-size: 12px;
          color: #6b7280;
          margin: 4px 0 0 0;
          font-style: italic;
        }

        .header-actions {
          display: flex;
          gap: 12px;
        }

        .btn {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 10px 16px;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s ease;
          border: none;
        }

        .btn-outline {
          background: white;
          color: #374151;
          border: 1px solid #d1d5db;
        }

        .btn-outline:hover {
          background: #f9fafb;
          border-color: #9ca3af;
        }

        .btn-primary {
          background: #d97706;
          color: white;
        }

        .btn-primary:hover {
          background: #d97706;
        }

        .btn-primary:disabled {
          background: #9ca3af;
          cursor: not-allowed;
        }

        .btn-print {
          background: #059669;
          color: white;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .btn-print:hover {
          background: #047857;
        }

        /* Filters Bar */
        .filters-bar {
          background: white;
          padding: 20px;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          margin-bottom: 24px;
          display: flex;
          flex-direction: column;
          gap: 16px;
        }

        .search-container {
          position: relative;
          flex: 1;
          min-width: 300px;
        }

        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #9ca3af;
          pointer-events: none;
        }

        .search-input {
          width: 100%;
          padding: 12px 12px 12px 40px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          outline: none;
          background: white;
        }

        .search-input:focus {
          border-color: #d97706;
          box-shadow: 0 0 0 3px rgba(221, 124, 2, 0.1);
        }

        .filter-buttons {
          display: flex;
          gap: 12px;
          flex-wrap: wrap;
        }

        .filter-select {
          padding: 10px 12px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          background: white;
          min-width: 150px;
          outline: none;
          cursor: pointer;
        }

        .filter-select:focus {
          border-color: #d97706;
          box-shadow: 0 0 0 3px rgba(221, 124, 2, 0.1);
        }

        /* Error Container */
        .error-container {
          margin: 20px 0;
          padding: 12px 16px;
          background: #fee2e2;
          color: #dc2626;
          border-radius: 8px;
          display: flex;
          align-items: center;
          gap: 8px;
          border: 1px solid #fecaca;
        }

        /* Collection Statistics */
        .collection-stats-section {
          background: white;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          padding: 24px;
          margin-bottom: 24px;
        }

        .stats-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
          flex-wrap: wrap;
          gap: 16px;
        }

        .stats-header h2 {
          font-size: 20px;
          font-weight: 600;
          color: #1f2937;
          margin: 0;
        }

        .period-filters {
          display: flex;
          gap: 8px;
          background: #f3f4f6;
          padding: 4px;
          border-radius: 8px;
        }

        .period-btn {
          padding: 8px 16px;
          border: none;
          background: transparent;
          color: #6b7280;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
          transition: all 0.2s ease;
        }

        .period-btn:hover {
          background: #e5e7eb;
          color: #374151;
        }

        .period-btn.active {
          background: #d97706;
          color: white;
        }

        .stats-cards {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
        }

        .stat-card {
          background: #f8fafc;
          border-radius: 12px;
          padding: 20px;
          display: flex;
          align-items: center;
          gap: 16px;
          border: 1px solid #e2e8f0;
          transition: all 0.2s ease;
        }

        .stat-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-card.cash {
          border-left: 4px solid #10b981;
        }

        .stat-card.online {
          border-left: 4px solid #3b82f6;
        }

        .stat-card.total {
          border-left: 4px solid #d97706;
        }

        .stat-card.paid {
          border-left: 4px solid #10b981;
        }

        .stat-card.unpaid {
          border-left: 4px solid #ef4444;
        }

        .stat-icon {
          font-size: 32px;
          line-height: 1;
        }

        .stat-content {
          flex: 1;
        }

        .stat-label {
          font-size: 14px;
          color: #6b7280;
          margin-bottom: 4px;
        }

        .stat-value {
          font-size: 24px;
          font-weight: 700;
          color: #1f2937;
          margin-bottom: 2px;
        }

        .stat-count {
          font-size: 12px;
          color: #9ca3af;
        }



        /* Data Card */
        .data-card {
          background: white;
          border-radius: 12px;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          margin-bottom: 24px;
        }

        /* Loading Container */
        .loading-container {
          text-align: center;
          padding: 60px 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
          color: #6b7280;
        }

        /* Table Container with Horizontal Scroll */
        .table-container {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }

        /* Data Table */
        .data-table {
          width: 100%;
          border-collapse: collapse;
          min-width: 1000px; /* Reduced width to make status columns more visible */
        }

        .data-table th,
        .data-table td {
          padding: 12px 16px;
          text-align: left;
          border-bottom: 1px solid #e5e7eb;
          white-space: nowrap;
        }

        /* Priority columns - Status columns should be more visible */
        .data-table th:nth-child(2),
        .data-table th:nth-child(3),
        .data-table td:nth-child(2),
        .data-table td:nth-child(3) {
          background: #f8fafc;
          font-weight: 600;
          min-width: 120px;
        }

        .data-table th {
          background: #f9fafb;
          font-weight: 600;
          color: #374151;
          font-size: 14px;
          position: sticky;
          top: 0;
          z-index: 10;
        }

        .data-table td {
          font-size: 14px;
          color: #6b7280;
        }

        .data-table tr:hover {
          background: #f9fafb;
        }

        .no-orders {
          text-align: center;
          padding: 40px 20px;
          color: #9ca3af;
          font-style: italic;
        }

        /* Customer Type Badge */
        .customer-type-badge {
          display: inline-block;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          text-transform: uppercase;
        }

        .customer-type-badge.staff {
          background: rgba(59, 130, 246, 0.1);
          color: #3b82f6;
        }

        .customer-type-badge.guest {
          background: rgba(16, 185, 129, 0.1);
          color: #10b981;
        }

        /* People Count */
        .people-count {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        /* Status Badges */
        .status-badge {
          display: inline-block !important;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          text-transform: capitalize;
          min-width: 60px;
          text-align: center;
          border: 1px solid transparent;
        }

        .status-badge.pending {
          background: #fef3c7 !important;
          color: #92400e !important;
          border: 1px solid #f59e0b !important;
        }

        .status-badge.preparing {
          background: #dbeafe !important;
          color: #1e40af !important;
          border: 1px solid #3b82f6 !important;
        }

        .status-badge.served {
          background: #e0e7ff !important;
          color: #5b21b6 !important;
          border: 1px solid #8b5cf6 !important;
        }

        .status-badge.completed {
          background: #d1fae5 !important;
          color: #065f46 !important;
          border: 1px solid #10b981 !important;
        }

        .status-badge.cancelled {
          background: #fee2e2 !important;
          color: #991b1b !important;
          border: 1px solid #ef4444 !important;
        }

        /* Fallback for any status badge without specific class */
        .status-badge:not(.pending):not(.preparing):not(.served):not(.completed):not(.cancelled) {
          background: rgba(156, 163, 175, 0.2) !important;
          color: #374151 !important;
          border-color: #9ca3af;
        }

        /* Action Buttons */
        .action-buttons {
          display: flex;
          gap: 8px;
        }

        .action-btn {
          padding: 6px 12px;
          border-radius: 6px;
          font-size: 12px;
          font-weight: 500;
          cursor: pointer;
          border: none;
          transition: all 0.2s ease;
        }

        .action-btn.view {
          background: rgba(59, 130, 246, 0.1);
          color: #2563eb;
        }

        .action-btn.view:hover {
          background: rgba(59, 130, 246, 0.2);
        }

        .action-btn.edit {
          background: rgba(16, 185, 129, 0.1);
          color: #059669;
        }

        .action-btn.edit:hover {
          background: rgba(16, 185, 129, 0.2);
        }

        .action-btn.print {
          background: rgba(139, 92, 246, 0.1);
          color: #7c3aed;
        }

        .action-btn.print:hover {
          background: rgba(139, 92, 246, 0.2);
        }

        /* Pagination */
        .pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 8px;
          margin-top: 24px;
          flex-wrap: wrap;
        }

        .pagination-btn {
          padding: 8px 16px;
          border: 1px solid #d1d5db;
          background: white;
          color: #374151;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
          background: #f9fafb;
          border-color: #9ca3af;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-pages {
          display: flex;
          gap: 4px;
          align-items: center;
        }

        .pagination-page {
          width: 36px;
          height: 36px;
          border: 1px solid #d1d5db;
          background: white;
          color: #374151;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
        }

        .pagination-page:hover:not(:disabled) {
          background: #d97706;
          border-color: #d97706;
        }

        .pagination-page.active {
          background: #d97706;
          color: white;
          border-color: #d97706;
        }

        .pagination-page:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-ellipsis {
          padding: 0 8px;
          color: #9ca3af;
        }

        /* Modal Styles */
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 20px;
        }

        .modal {
          background: white;
          border-radius: 12px;
          max-width: 600px;
          width: 100%;
          max-height: 90vh;
          display: flex;
          flex-direction: column;
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 24px;
          border-bottom: 1px solid #e5e7eb;
        }

        .modal-title {
          font-size: 18px;
          font-weight: 600;
          color: #1f2937;
          margin: 0;
        }

        .modal-close {
          background: none;
          border: none;
          font-size: 24px;
          cursor: pointer;
          color: #6b7280;
          padding: 4px;
          border-radius: 4px;
          line-height: 1;
        }

        .modal-close:hover {
          color: #374151;
          background: #f3f4f6;
        }

        .modal-body {
          flex: 1;
          overflow-y: auto;
          padding: 24px;
        }

        .modal-footer {
          display: flex;
          justify-content: flex-end;
          gap: 12px;
          padding: 24px;
          border-top: 1px solid #e5e7eb;
        }

        /* Order Details */
        .order-details {
          margin-bottom: 24px;
        }

        .order-detail-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px 0;
          border-bottom: 1px solid #f3f4f6;
        }

        .order-detail-row:last-child {
          border-bottom: none;
        }

        .order-detail-label {
          font-weight: 500;
          color: #374151;
          min-width: 140px;
        }

        .order-detail-value {
          color: #6b7280;
          text-align: right;
          flex: 1;
        }

        .payment-method-display {
          display: flex;
          align-items: center;
          gap: 8px;
          justify-content: flex-end;
        }

        /* Order Items Section */
        .order-items-section {
          margin-bottom: 24px;
        }

        .order-items-section h4 {
          font-size: 16px;
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 16px;
        }

        .order-items-table {
          border: 1px solid #e5e7eb;
          border-radius: 8px;
          overflow: hidden;
        }

        .order-items-table .data-table {
          min-width: auto;
        }

        .order-items-table .data-table th,
        .order-items-table .data-table td {
          padding: 8px 12px;
        }

        /* Form Styles */
        .form-group {
          margin-bottom: 16px;
        }

        .form-label {
          display: block;
          font-size: 14px;
          font-weight: 500;
          color: #374151;
          margin-bottom: 6px;
        }

        .form-input,
        .form-select {
          width: 100%;
          padding: 10px 12px;
          border: 1px solid #d1d5db;
          border-radius: 6px;
          font-size: 14px;
          outline: none;
          background: white;
        }

        .form-input:focus,
        .form-select:focus {
          border-color: #d97706;
          box-shadow: 0 0 0 3px rgba(221, 124, 2, 0.1);
        }

        .form-input:disabled {
          background: #f9fafb;
          color: #6b7280;
          cursor: not-allowed;
        }

        /* Progressive Status Update Styles */
        .current-status-display {
          margin-bottom: 12px;
        }

        .status-progression-buttons {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-top: 8px;
        }

        .progression-btn {
          padding: 10px 16px;
          border: none;
          border-radius: 6px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
          text-align: left;
        }

        .progression-btn.preparing {
          background: #dbeafe;
          color: #1e40af;
          border: 1px solid #3b82f6;
        }

        .progression-btn.preparing:hover {
          background: #bfdbfe;
        }

        .progression-btn.served {
          background: #e0e7ff;
          color: #5b21b6;
          border: 1px solid #8b5cf6;
        }

        .progression-btn.served:hover {
          background: #c7d2fe;
        }

        .progression-btn.completed {
          background: #d1fae5;
          color: #065f46;
          border: 1px solid #10b981;
        }

        .progression-btn.completed:hover {
          background: #a7f3d0;
        }

        .progression-btn.cancelled {
          background: #fee2e2;
          color: #991b1b;
          border: 1px solid #ef4444;
        }

        .progression-btn.cancelled:hover {
          background: #fecaca;
        }

        .progression-btn.failed {
          background: #fee2e2;
          color: #991b1b;
          border: 1px solid #ef4444;
        }

        .progression-btn.failed:hover {
          background: #fecaca;
        }

        .progression-btn.refunded {
          background: #e0e7ff;
          color: #5b21b6;
          border: 1px solid #8b5cf6;
        }

        .progression-btn.refunded:hover {
          background: #c7d2fe;
        }

        .status-change-preview {
          margin-top: 8px;
          padding: 8px 12px;
          background: #f0f9ff;
          border: 1px solid #0ea5e9;
          border-radius: 4px;
          font-size: 12px;
          color: #0369a1;
        }

        .status-final-message {
          margin-top: 12px;
          padding: 12px;
          background: #f3f4f6;
          border: 1px solid #d1d5db;
          border-radius: 6px;
        }

        .status-final-message p {
          margin: 0;
          font-size: 13px;
          color: #6b7280;
          font-style: italic;
        }

        .section-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }

        .alert-message {
          display: flex;
          align-items: center;
          gap: 6px;
          font-size: 12px;
          color: #6b7280;
        }

        /* Animations */
        .animate-spin {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
          .orders-page {
            padding: 16px;
          }

          .page-header {
            flex-direction: column;
            align-items: flex-start;
          }

          .page-header h1 {
            font-size: 24px;
          }

          .filters-bar {
            padding: 16px;
          }

          .filter-buttons {
            flex-direction: column;
          }

          .filter-select {
            min-width: auto;
            width: 100%;
          }

          .search-container {
            min-width: auto;
          }

          .collection-stats-section {
            padding: 20px;
          }

          .stats-header {
            flex-direction: column;
            align-items: flex-start;
          }

          .stats-cards {
            grid-template-columns: 1fr;
          }
        }

        @media (max-width: 768px) {
          .orders-page {
            padding: 12px;
          }

          .page-header h1 {
            font-size: 20px;
          }

          .filters-bar {
            padding: 12px;
          }

          .collection-stats-section {
            padding: 16px;
          }

          .stats-header h2 {
            font-size: 18px;
          }

          .period-filters {
            width: 100%;
            justify-content: center;
          }

          .period-btn {
            flex: 1;
            text-align: center;
          }

          .stat-card {
            padding: 16px;
          }

          .stat-icon {
            font-size: 28px;
          }

          .stat-value {
            font-size: 20px;
          }

          /* Mobile Table Styles */
          .table-container {
            border-radius: 8px;
            overflow: hidden;
          }

          .data-table {
            min-width: 700px; /* Further reduced to prioritize status columns */
          }

          .data-table th,
          .data-table td {
            padding: 8px 12px;
            font-size: 13px;
          }

          .action-buttons {
            flex-direction: column;
            gap: 4px;
          }

          .action-btn {
            padding: 4px 8px;
            font-size: 11px;
          }

          /* Modal adjustments for mobile */
          .modal {
            margin: 10px;
            max-height: calc(100vh - 20px);
          }

          .modal-header,
          .modal-body,
          .modal-footer {
            padding: 16px;
          }

          .modal-title {
            font-size: 16px;
          }

          .order-detail-row {
            flex-direction: column;
            align-items: flex-start;
            gap: 4px;
          }

          .order-detail-value {
            text-align: left;
          }

          .payment-method-display {
            justify-content: flex-start;
          }

          /* Pagination adjustments */
          .pagination {
            gap: 4px;
          }

          .pagination-btn {
            padding: 6px 12px;
            font-size: 12px;
          }

          .pagination-page {
            width: 32px;
            height: 32px;
            font-size: 12px;
          }
        }

        @media (max-width: 480px) {
          .orders-page {
            padding: 8px;
          }

          .page-header {
            gap: 12px;
          }

          .page-header h1 {
            font-size: 18px;
          }

          .btn {
            padding: 8px 12px;
            font-size: 12px;
          }

          .filters-bar {
            padding: 8px;
            gap: 12px;
          }

          .collection-stats-section {
            padding: 12px;
          }

          .stats-header h2 {
            font-size: 16px;
          }

          .period-btn {
            padding: 6px 12px;
            font-size: 12px;
          }

          .stat-card {
            padding: 12px;
            gap: 12px;
          }

          .stat-icon {
            font-size: 24px;
          }

          .stat-value {
            font-size: 18px;
          }

          .stat-label {
            font-size: 13px;
          }

          .stat-count {
            font-size: 11px;
          }

          .search-input {
            padding: 10px 10px 10px 36px;
            font-size: 13px;
          }

          .filter-select {
            padding: 8px 10px;
            font-size: 13px;
          }

          .data-table {
            min-width: 600px; /* Further reduced for very small screens */
          }

          .data-table th,
          .data-table td {
            padding: 6px 8px;
            font-size: 12px;
          }

          .customer-type-badge,
          .status-badge {
            font-size: 10px;
            padding: 2px 6px;
          }

          .success-message {
            top: 10px;
            right: 10px;
            left: 10px;
            padding: 10px 12px;
            font-size: 13px;
          }
        }

        /* Custom Scrollbar for Table */
        .table-container::-webkit-scrollbar {
          height: 8px;
        }

        .table-container::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }

        /* Focus styles for accessibility */
        .data-table:focus-within {
          outline: 2px solid #d97706;
          outline-offset: 2px;
        }

        .action-btn:focus {
          outline: 2px solid #d97706;
          outline-offset: 2px;
        }

        .pagination-btn:focus,
        .pagination-page:focus {
          outline: 2px solid #d97706;
          outline-offset: 2px;
        }
      `})]})},zc=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Qae=()=>{var we,Me,Ee,Be,it,re,ce,Z;const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState([]),[u,h]=w.useState(!0),[p,m]=w.useState(""),[g,b]=w.useState(!1),[j,v]=w.useState(!1),[y,A]=w.useState(null),[E,O]=w.useState({orderStatus:"",paymentStatus:""}),[S,C]=w.useState(""),[k,I]=w.useState(!1),[z,B]=w.useState(""),[M,F]=w.useState("all"),[N,L]=w.useState("all"),[P,_]=w.useState("all"),[R,W]=w.useState("today"),[G,oe]=w.useState(1),[q,V]=w.useState(1),U=7;w.useEffect(()=>{X(),H()},[M,N,P]);const X=async()=>{try{const de=await zc.get("/branch");d(de.data)}catch(de){console.error("Error fetching branches:",de),m("Failed to load branches. Some filter options may not be available.")}},H=async()=>{h(!0),m(""),t([]),i([]),a([]);try{const[de,te]=await Promise.all([zc.get("/counter-order/orders").catch(()=>({data:{orders:[]}})),zc.get("/staff-order").catch(()=>({data:{orders:[]}}))]);let Se=[],Ve=[];if(de.data.success&&Array.isArray(de.data.data)?Ve=de.data.data:de.data.orders&&Array.isArray(de.data.orders)?Ve=de.data.orders:Array.isArray(de.data)&&(Ve=de.data),Ve.length>0){const Ze=Ve.map((Ae,Qe)=>{var pt,Bt,Pt,kt,ae,Ie,Ye,Ft;return Ae.id||console.warn(`Counter order at index ${Qe} is missing id:`,Ae),Ae.customerName||console.warn(`Counter order at index ${Qe} is missing customerName:`,Ae),(pt=Ae.userId)!=null&&pt.name||console.warn(`Counter order at index ${Qe} is missing counter user name:`,Ae),{id:Ae.id||`temp-counter-id-${Qe}`,customerName:Ae.customerName||"Unknown Customer",phoneNumber:Ae.phoneNumber||"N/A",counterUser:((Bt=Ae.userId)==null?void 0:Bt.name)||"Unknown Counter User",counterUserId:((Pt=Ae.userId)==null?void 0:Pt.id)||null,date:new Date(Ae.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:((kt=Ae.branch)==null?void 0:kt.name)||"Unknown Branch",branchId:((ae=Ae.branch)==null?void 0:ae.id)||null,invoice:((Ie=Ae.invoice)==null?void 0:Ie.invoiceNumber)||"N/A",items:((Ye=Ae.items)==null?void 0:Ye.length)||0,itemNames:((Ft=Ae.items)==null?void 0:Ft.map(xe=>xe.name).join(", "))||"No items",subtotal:Ae.subtotal||Ae.totalAmount||0,tax:Ae.tax||0,serviceCharge:Ae.serviceCharge||0,grandTotal:Ae.grandTotal||Ae.totalAmount||0,amount:`${(Ae.grandTotal||Ae.totalAmount||0).toFixed(2)}`,totalAmount:Ae.totalAmount||0,orderStatus:Ae.orderStatus||"pending",paymentMethod:Ae.paymentMethod||"cash",paymentStatus:Ae.paymentStatus||"pending",cancellationReason:Ae.cancellationReason||"",cancelledAt:Ae.cancelledAt||null,originalOrder:Ae,orderSource:"counter"}}).filter(Ae=>Ae.id);Se=[...Se,...Ze]}let tt=[];if(te.data.success&&Array.isArray(te.data.data)?tt=te.data.data:te.data.orders&&Array.isArray(te.data.orders)?tt=te.data.orders:Array.isArray(te.data)&&(tt=te.data),tt.length>0){const Ae=tt.filter(Qe=>Qe.isGuestOrder&&Qe.categoryName&&(Qe.categoryName.toLowerCase().includes("self service")||Qe.categoryName.toLowerCase().includes("counter"))).map((Qe,pt)=>{var Bt,Pt;return{id:Qe._id||`temp-guest-id-${pt}`,customerName:Qe.customerName||"Unknown Customer",phoneNumber:Qe.customerMobile||"N/A",counterUser:"ViratCounter App",counterUserId:null,date:new Date(Qe.orderTime||Qe.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:Qe.branchName||"Unknown Branch",branchId:Qe.branchId||null,invoice:Qe.orderId||"N/A",items:((Bt=Qe.items)==null?void 0:Bt.length)||0,itemNames:((Pt=Qe.items)==null?void 0:Pt.map(kt=>kt.name).join(", "))||"No items",subtotal:Qe.subtotal||Qe.totalAmount||0,tax:Qe.tax||0,serviceCharge:Qe.serviceCharge||0,grandTotal:Qe.grandTotal||Qe.totalAmount||0,amount:`${(Qe.grandTotal||Qe.totalAmount||0).toFixed(2)}`,totalAmount:Qe.totalAmount||0,orderStatus:Qe.status||"pending",paymentMethod:Qe.paymentMethod||"cash",paymentStatus:Qe.paymentStatus||"pending",cancellationReason:Qe.cancellationReason||"",cancelledAt:Qe.cancelledAt||null,originalOrder:Qe,orderSource:"guest"}}).filter(Qe=>Qe.id);Se=[...Se,...Ae]}Se.sort((Ze,Ae)=>new Date(Ae.originalOrder.createdAt||Ae.originalOrder.orderTime)-new Date(Ze.originalOrder.createdAt||Ze.originalOrder.orderTime));let ze=Se;M!=="all"&&(ze=ze.filter(Ze=>Ze.orderStatus===M)),N!=="all"&&(ze=ze.filter(Ze=>Ze.paymentStatus===N)),P!=="all"&&(ze=ze.filter(Ze=>Ze.branchId===P)),t(ze)}catch(de){console.error("Error fetching orders:",de),m("Failed to load orders. Please refresh the page and try again.")}finally{h(!1)}};w.useEffect(()=>{const de=e.filter(te=>{if(!z.trim())return!0;const Se=te.customerName||"",Ve=te.phoneNumber||"",tt=te.counterUser||"",ze=te.invoice||"",Ze=z.trim().toLowerCase();return console.log(`Searching for "${Ze}" in order:`,{customerName:Se,phoneNumber:Ve,counterUser:tt,invoice:ze}),Se.toLowerCase().includes(Ze)||Ve.toLowerCase().includes(Ze)||tt.toLowerCase().includes(Ze)||ze.toLowerCase().includes(Ze)});i(de),V(Math.ceil(de.length/U)),oe(1)},[e,z]),w.useEffect(()=>{const de=(G-1)*U,te=de+U,Se=s.slice(de,te);a(Se)},[s,G]),w.useEffect(()=>{const de=setTimeout(()=>{},300);return()=>clearTimeout(de)},[z]);const Q=de=>{A(de),b(!0)},le=de=>{A(de),O({orderStatus:de.orderStatus,paymentStatus:de.paymentStatus}),v(!0)},me=de=>{const{name:te,value:Se}=de.target;O({...E,[te]:Se})},je=async()=>{I(!0);try{const de=y.orderSource==="guest";if(de){const Se={};E.orderStatus!==y.orderStatus&&(Se.status=E.orderStatus),E.paymentStatus!==y.paymentStatus&&(Se.paymentStatus=E.paymentStatus),Object.keys(Se).length>0&&await zc.put(`/staff-order/${y.id}/status`,Se)}else E.orderStatus!==y.orderStatus&&await zc.put(`/counter-order/orders/${y.id}/order-status`,{orderStatus:E.orderStatus}),E.paymentStatus!==y.paymentStatus&&await zc.put(`/counter-order/orders/${y.id}/payment-status`,{paymentStatus:E.paymentStatus});await H(),v(!1),C(` ${de?"ViratCounter":"Counter"} order status updated successfully`),setTimeout(()=>{C("")},2e3)}catch(de){console.error("Error updating order:",de),alert("Failed to update order. Please try again.")}finally{I(!1)}},ee=()=>{b(!1),A(null)},se=()=>{v(!1),A(null)},fe=(de,te)=>{de==="orderStatus"?F(te):de==="paymentStatus"?L(te):de==="branch"&&_(te),oe(1)},ue=de=>{switch(de==null?void 0:de.toLowerCase()){case"card":return r.jsx(Ua,{size:16});case"upi":return r.jsx(Vi,{size:16});case"qr":return r.jsx(Vi,{size:16});case"cash":default:return r.jsx(Vi,{size:16})}},We=()=>{let de=`Order ID,Customer Name,Phone Number,Counter User,Date & Time,Branch,Invoice Number,Order Status,Payment Status,Payment Method,Subtotal,Tax,Service Charge,Grand Total,Items Count,Item Details
`;const te=new Date,Se=te.toLocaleDateString("en-IN")+" "+te.toLocaleTimeString("en-IN"),Ve=s.length,tt=s.reduce((Ie,Ye)=>Ie+(Ye.grandTotal||0),0),ze=s.filter(Ie=>Ie.paymentStatus==="completed"),Ze=ze.reduce((Ie,Ye)=>Ie+(Ye.grandTotal||0),0),Ae=tt-Ze;de+=`
"COUNTER ORDERS EXPORT SUMMARY"
`,de+=`"Export Date & Time:","${Se}"
`,de+=`"Total Orders:",${Ve}
`,de+=`"Total Amount:",${tt.toFixed(2)}
`,de+=`"Paid Orders:",${ze.length}
`,de+=`"Paid Amount:",${Ze.toFixed(2)}
`,de+=`"Unpaid Orders:",${Ve-ze.length}
`,de+=`"Unpaid Amount:",${Ae.toFixed(2)}
`,de+=`"Collection Rate:",${tt>0?(Ze/tt*100).toFixed(1):0}
`,de+=`
"DETAILED ORDER LIST"
`,de+=`Order ID,Customer Name,Phone Number,Counter User,Date & Time,Branch,Invoice Number,Order Status,Payment Status,Payment Method,Subtotal,Tax,Service Charge,Grand Total,Items Count,Item Details
`,s.forEach(Ie=>{var ke,Re,ot,mt,Tt,_t,st,wt;const Ye=((Re=(ke=Ie.originalOrder)==null?void 0:ke.items)==null?void 0:Re.map(yt=>`${yt.name} (Qty: ${yt.quantity}, Price: ${yt.price.toFixed(2)})`).join("; "))||"No items",Ft=new Date(((ot=Ie.originalOrder)==null?void 0:ot.createdAt)||((mt=Ie.originalOrder)==null?void 0:mt.orderTime)||Date.now()),xe=Ft.toLocaleDateString("en-IN")+" "+Ft.toLocaleTimeString("en-IN");de+=`"${Ie.invoice||Ie.id}","${Ie.customerName}","${Ie.phoneNumber}","${Ie.counterUser}","${xe}","${Ie.branch}","${Ie.invoice}","${Ie.orderStatus}","${Ie.paymentStatus}","${Ie.paymentMethod}",${((Tt=Ie.subtotal)==null?void 0:Tt.toFixed(2))||"0.00"},${((_t=Ie.tax)==null?void 0:_t.toFixed(2))||"0.00"},${((st=Ie.serviceCharge)==null?void 0:st.toFixed(2))||"0.00"},${((wt=Ie.grandTotal)==null?void 0:wt.toFixed(2))||"0.00"},${Ie.items},"${Ye}"
`}),de+=`
"PAYMENT METHOD BREAKDOWN"
`;const Qe={};s.forEach(Ie=>{const Ye=Ie.paymentMethod||"cash";Qe[Ye]||(Qe[Ye]={count:0,amount:0}),Qe[Ye].count++,Qe[Ye].amount+=Ie.grandTotal||0}),de+=`Payment Method,Order Count,Total Amount
`,Object.entries(Qe).forEach(([Ie,Ye])=>{de+=`"${Ie.charAt(0).toUpperCase()+Ie.slice(1)}",${Ye.count},${Ye.amount.toFixed(2)}
`}),de+=`
"BRANCH-WISE BREAKDOWN"
`;const pt={};s.forEach(Ie=>{const Ye=Ie.branch||"Unknown";pt[Ye]||(pt[Ye]={count:0,amount:0}),pt[Ye].count++,pt[Ye].amount+=Ie.grandTotal||0}),de+=`Branch Name,Order Count,Total Amount
`,Object.entries(pt).forEach(([Ie,Ye])=>{de+=`"${Ie}",${Ye.count},${Ye.amount.toFixed(2)}
`}),de+=`
"COUNTER USER BREAKDOWN"
`;const Bt={};s.forEach(Ie=>{const Ye=Ie.counterUser||"Unknown";Bt[Ye]||(Bt[Ye]={count:0,amount:0}),Bt[Ye].count++,Bt[Ye].amount+=Ie.grandTotal||0}),de+=`Counter User,Order Count,Total Amount
`,Object.entries(Bt).forEach(([Ie,Ye])=>{de+=`"${Ie}",${Ye.count},${Ye.amount.toFixed(2)}
`});const Pt=new Blob([de],{type:"text/csv;charset=utf-8;"}),kt=window.URL.createObjectURL(Pt),ae=document.createElement("a");ae.setAttribute("hidden",""),ae.setAttribute("href",kt),ae.setAttribute("download",`counter-orders-detailed-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(kt)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"orders-page",children:[S&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:S}),r.jsx("button",{onClick:()=>C(""),children:r.jsx(On,{size:16})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Counter Orders & ViratCounter App"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-outline",onClick:We,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:"Export to Excel"})]})})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by customer name, phone, counter user, or invoice...",className:"search-input",value:z,onChange:de=>B(de.target.value)})]}),r.jsxs("div",{className:"filter-buttons",children:[r.jsxs("select",{className:"filter-select",value:M,onChange:de=>fe("orderStatus",de.target.value),children:[r.jsx("option",{value:"all",children:"All Order Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs("select",{className:"filter-select",value:N,onChange:de=>fe("paymentStatus",de.target.value),children:[r.jsx("option",{value:"all",children:"All Payment Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"refunded",children:"Refunded"})]}),r.jsxs("select",{className:"filter-select",value:P,onChange:de=>fe("branch",de.target.value),children:[r.jsx("option",{value:"all",children:"All Branches"}),l.map(de=>r.jsx("option",{value:de._id,children:de.name},de._id))]})]})]}),p&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:p})]}),r.jsxs("div",{className:"collection-stats-section",children:[r.jsxs("div",{className:"stats-header",children:[r.jsx("h2",{children:"Collection Statistics"}),r.jsxs("div",{className:"period-filters",children:[r.jsx("button",{className:`period-btn ${R==="today"?"active":""}`,onClick:()=>W("today"),children:"Today"}),r.jsx("button",{className:`period-btn ${R==="week"?"active":""}`,onClick:()=>W("week"),children:"This Week"}),r.jsx("button",{className:`period-btn ${R==="month"?"active":""}`,onClick:()=>W("month"),children:"This Month"})]})]}),r.jsx("div",{className:"stats-cards",children:(()=>{const de=new Date;let te;if(R==="today")te=new Date(de.getFullYear(),de.getMonth(),de.getDate());else if(R==="week"){const Pt=de.getDay(),kt=Pt===0?6:Pt-1;te=new Date(de.getFullYear(),de.getMonth(),de.getDate()-kt)}else R==="month"&&(te=new Date(de.getFullYear(),de.getMonth(),1));const Se=e.filter(Pt=>{var ae,Ie;return new Date(((ae=Pt.originalOrder)==null?void 0:ae.createdAt)||((Ie=Pt.originalOrder)==null?void 0:Ie.orderTime))>=te}),Ve=Se.filter(Pt=>Pt.paymentStatus==="completed"),tt=Se.filter(Pt=>Pt.paymentStatus!=="completed"),ze=Se.reduce((Pt,kt)=>Pt+(kt.grandTotal||0),0),Ze=Se.length,Ae=Ve.reduce((Pt,kt)=>Pt+(kt.grandTotal||0),0),Qe=Ve.length,pt=tt.reduce((Pt,kt)=>Pt+(kt.grandTotal||0),0),Bt=tt.length;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"stat-card total",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Total Orders"}),r.jsxs("div",{className:"stat-value",children:[Ze," orders"]}),r.jsxs("div",{className:"stat-count",children:["",ze.toFixed(2)]})]})]}),r.jsxs("div",{className:"stat-card paid",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Paid Orders"}),r.jsxs("div",{className:"stat-value",children:[Qe," orders"]}),r.jsxs("div",{className:"stat-count",children:["",Ae.toFixed(2)]})]})]}),r.jsxs("div",{className:"stat-card unpaid",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Unpaid Orders"}),r.jsxs("div",{className:"stat-value",children:[Bt," orders"]}),r.jsxs("div",{className:"stat-count",children:["",pt.toFixed(2)]})]})]})]})})()})]}),r.jsx("div",{className:"data-card",children:u?r.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[r.jsx($a,{size:24,className:"animate-spin"}),r.jsx("p",{children:"Loading counter orders..."})]}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"User"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Invoice"}),r.jsx("th",{children:"Item Names"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.length>0?n.map(de=>r.jsxs("tr",{children:[r.jsx("td",{children:de.customerName}),r.jsx("td",{children:de.phoneNumber}),r.jsx("td",{children:de.counterUser}),r.jsx("td",{children:de.date}),r.jsx("td",{children:de.branch}),r.jsx("td",{children:de.invoice}),r.jsx("td",{children:de.itemNames}),r.jsx("td",{children:de.amount}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn view",onClick:()=>Q(de),children:"View"}),r.jsx("button",{className:"action-btn edit",onClick:()=>le(de),children:"Edit"})]})})]},de.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"9",className:"no-orders",children:"No counter orders found matching your criteria"})})})]})}),q>0&&r.jsxs("div",{className:"pagination",children:[r.jsx("button",{className:"pagination-btn",onClick:()=>oe(de=>Math.max(de-1,1)),disabled:G===1||u,children:"Previous"}),r.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,q)},(de,te)=>{let Se;return q<=5||G<=3?Se=te+1:G>=q-2?Se=q-4+te:Se=G-2+te,r.jsx("button",{className:`pagination-page ${G===Se?"active":""}`,onClick:()=>oe(Se),disabled:u,children:Se},Se)}),q>5&&G<q-2&&r.jsx("span",{className:"pagination-ellipsis",children:"..."}),q>5&&G<q-2&&r.jsx("button",{className:`pagination-page ${G===q?"active":""}`,onClick:()=>oe(q),disabled:u,children:q})]}),r.jsx("button",{className:"pagination-btn",onClick:()=>oe(de=>Math.min(de+1,q)),disabled:G===q||u,children:"Next"})]}),g&&y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:["Counter Order Details - ",y.invoice]}),r.jsx("button",{className:"modal-close",onClick:ee,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"order-details",children:[r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Customer Name"}),r.jsx("div",{className:"order-detail-value",children:y.customerName})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Phone Number"}),r.jsx("div",{className:"order-detail-value",children:y.phoneNumber})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Counter User"}),r.jsx("div",{className:"order-detail-value",children:y.counterUser})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Date"}),r.jsx("div",{className:"order-detail-value",children:y.date})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Branch"}),r.jsx("div",{className:"order-detail-value",children:y.branch})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Invoice Number"}),r.jsx("div",{className:"order-detail-value",children:y.invoice})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Payment Method"}),r.jsx("div",{className:"order-detail-value",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[ue(y.paymentMethod),r.jsx("span",{children:y.paymentMethod?y.paymentMethod.charAt(0).toUpperCase()+y.paymentMethod.slice(1):"Cash"})]})})]}),y.cancellationReason&&r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Cancellation Reason"}),r.jsx("div",{className:"order-detail-value",children:y.cancellationReason})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Order Items"}),r.jsx("div",{className:"order-items-table",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:((Me=(we=y.originalOrder)==null?void 0:we.items)==null?void 0:Me.length)>0?y.originalOrder.items.map((de,te)=>r.jsxs("tr",{children:[r.jsx("td",{children:de.name}),r.jsx("td",{children:de.quantity}),r.jsxs("td",{children:["",de.price.toFixed(2)]}),r.jsxs("td",{children:["",(de.price*de.quantity).toFixed(2)]})]},te)):r.jsx("tr",{children:r.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Order Summary"}),r.jsx("div",{className:"order-items-table",children:r.jsx("table",{className:"data-table",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Subtotal"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Ee=y.subtotal)==null?void 0:Ee.toFixed(2))||"0.00"]})]}),y.tax>0&&r.jsxs("tr",{children:[r.jsx("td",{children:"Tax"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Be=y.tax)==null?void 0:Be.toFixed(2))||"0.00"]})]}),y.serviceCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:"Service Charge"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((it=y.serviceCharge)==null?void 0:it.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f8f9fa"},children:[r.jsx("td",{children:"Grand Total"}),r.jsxs("td",{style:{textAlign:"right",color:"#ff7e47"},children:["",((re=y.grandTotal)==null?void 0:re.toFixed(2))||"0.00"]})]})]})})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:ee,children:"Close"}),r.jsx("button",{className:"btn btn-primary",onClick:()=>{ee(),le(y)},children:"Edit Order"})]})]})}),j&&y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:["Edit Counter Order - ",y.invoice]}),r.jsx("button",{className:"modal-close",onClick:se,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Customer Name"}),r.jsx("input",{type:"text",value:y.customerName,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Phone Number"}),r.jsx("input",{type:"text",value:y.phoneNumber,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Counter User"}),r.jsx("input",{type:"text",value:y.counterUser,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Branch"}),r.jsx("input",{type:"text",value:y.branch,className:"form-input",disabled:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Order Status"}),r.jsxs("select",{name:"orderStatus",value:E.orderStatus,onChange:me,className:"form-select",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"processing",children:"Processing"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Payment Status"}),r.jsxs("select",{name:"paymentStatus",value:E.paymentStatus,onChange:me,className:"form-select",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"refunded",children:"Refunded"})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h4",{children:"Order Items"}),r.jsxs("div",{className:"alert-message",children:[r.jsx(xr,{size:16}),r.jsx("span",{children:"Only order status and payment status can be updated"})]})]}),r.jsx("div",{className:"order-items-table",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:((Z=(ce=y.originalOrder)==null?void 0:ce.items)==null?void 0:Z.length)>0?y.originalOrder.items.map((de,te)=>r.jsxs("tr",{children:[r.jsx("td",{children:de.name}),r.jsx("td",{children:de.quantity}),r.jsxs("td",{children:["",de.price.toFixed(2)]}),r.jsxs("td",{children:["",(de.price*de.quantity).toFixed(2)]})]},te)):r.jsx("tr",{children:r.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:se,disabled:k,children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:je,disabled:k,children:k?r.jsxs(r.Fragment,{children:[r.jsx($a,{size:16,className:"animate-spin"}),r.jsx("span",{children:"Saving..."})]}):"Save Changes"})]})]})})]}),r.jsx("style",{children:`
      /* Collection Statistics */
      .collection-stats-section {
        background: white;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        padding: 24px;
        margin-bottom: 24px;
      }

      .stats-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
        gap: 16px;
      }

      .stats-header h2 {
        font-size: 20px;
        font-weight: 600;
        color: #1f2937;
        margin: 0;
      }

      .period-filters {
        display: flex;
        gap: 8px;
        background: #f3f4f6;
        padding: 4px;
        border-radius: 8px;
      }

      .period-btn {
        padding: 8px 16px;
        border: none;
        background: transparent;
        color: #6b7280;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .period-btn:hover {
        background: #e5e7eb;
        color: #374151;
      }

      .period-btn.active {
        background: #d97706;
        color: white;
      }

      .stats-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
      }

      .stat-card {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 16px;
        border: 1px solid #e2e8f0;
        transition: all 0.2s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .stat-card.total {
        border-left: 4px solid #d97706;
      }

      .stat-card.paid {
        border-left: 4px solid #10b981;
      }

      .stat-card.unpaid {
        border-left: 4px solid #ef4444;
      }

      .stat-icon {
        font-size: 32px;
        line-height: 1;
      }

      .stat-content {
        flex: 1;
      }

      .stat-label {
        font-size: 14px;
        color: #6b7280;
        margin-bottom: 4px;
      }

      .stat-value {
        font-size: 24px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 2px;
      }

      .stat-count {
        font-size: 12px;
        color: #9ca3af;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .collection-stats-section {
          padding: 20px;
        }

        .stats-header {
          flex-direction: column;
          align-items: flex-start;
        }

        .stats-cards {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 768px) {
        .collection-stats-section {
          padding: 16px;
        }

        .stats-header h2 {
          font-size: 18px;
        }

        .period-filters {
          width: 100%;
          justify-content: center;
        }

        .period-btn {
          flex: 1;
          text-align: center;
        }

        .stat-card {
          padding: 16px;
        }

        .stat-icon {
          font-size: 28px;
        }

        .stat-value {
          font-size: 20px;
        }
      }

      @media (max-width: 480px) {
        .collection-stats-section {
          padding: 12px;
        }

        .stats-header h2 {
          font-size: 16px;
        }

        .period-btn {
          padding: 6px 12px;
          font-size: 12px;
        }

        .stat-card {
          padding: 12px;
          gap: 12px;
        }

        .stat-icon {
          font-size: 24px;
        }

        .stat-value {
          font-size: 18px;
        }

        .stat-label {
          font-size: 13px;
        }

        .stat-count {
          font-size: 11px;
        }
      }
    `})]})},Uc=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Jae=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState([]),[u,h]=w.useState([]),[p,m]=w.useState(!0),[g,b]=w.useState(""),[j,v]=w.useState(!1),[y,A]=w.useState(!1),[E,O]=w.useState(!1),[S,C]=w.useState(!1),[k,I]=w.useState(null),[z,B]=w.useState({branchId:"",categoryId:"",number:"",capacity:"",status:"available",image:null}),[M,F]=w.useState({branchId:"",categoryId:"",number:"",capacity:"",status:"available",image:null}),[N,L]=w.useState(""),[P,_]=w.useState(!1),[R,W]=w.useState(""),[G,oe]=w.useState("all"),[q,V]=w.useState("all"),[U,X]=w.useState("all"),[H,Q]=w.useState(1),[le,me]=w.useState(1),je=10,[ee,se]=w.useState(null),[fe,ue]=w.useState(null);w.useEffect(()=>{We(),we(),Me()},[G,q,U]);const We=async()=>{try{const ae=await Uc.get("/branch");d(ae.data)}catch(ae){console.error("Error fetching branches:",ae),b("Failed to load branches. Some filter options may not be available.")}},we=async()=>{try{const ae=await Uc.get("/category");console.log("Categories API response:",ae.data),h(ae.data||[])}catch(ae){console.error("Error fetching categories:",ae),h([])}},Me=async()=>{m(!0),b(""),t([]),i([]),a([]);try{const ae={};q!=="all"&&(ae.branchId=q);const Ie=await Uc.get("/table",{params:ae});console.log("Full API response:",Ie),console.log("Response data:",Ie.data),console.log("Response data type:",typeof Ie.data),console.log("Response data keys:",Object.keys(Ie.data||{}));let Ye=[];if(Ie.data&&Ie.data.success&&Array.isArray(Ie.data.data))Ye=Ie.data.data;else if(Array.isArray(Ie.data))Ye=Ie.data;else throw console.error(" Unexpected response format:",Ie.data),new Error("Invalid response format: tables array missing");console.log("Extracted tablesData:",Ye),console.log("tablesData type:",typeof Ye),console.log("tablesData is array:",Array.isArray(Ye));const Ft=Ye.map((xe,ke)=>{var Re,ot,mt,Tt;return{id:xe._id||`temp-id-${ke}`,number:xe.number||0,capacity:xe.capacity||"",status:xe.status||"available",branchId:((Re=xe.branchId)==null?void 0:Re._id)||xe.branchId||null,branchName:((ot=xe.branchId)==null?void 0:ot.name)||"Unknown Branch",categoryId:((mt=xe.categoryId)==null?void 0:mt._id)||xe.categoryId||null,categoryName:((Tt=xe.categoryId)==null?void 0:Tt.name)||"All Categories",image:xe.image||null,qrCode:xe.qrCode||null,createdAt:new Date(xe.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),originalTable:xe}}).filter(xe=>xe.id);t(Ft)}catch(ae){console.error("Error fetching tables:",ae),b("Failed to load tables. Please refresh the page and try again.")}finally{m(!1)}};w.useEffect(()=>{let ae=e;if(G!=="all"&&(ae=ae.filter(Ie=>Ie.status===G)),R.trim()){const Ie=R.trim().toLowerCase();ae=ae.filter(Ye=>{var Re;const Ft=((Re=Ye.number)==null?void 0:Re.toString())||"",xe=Ye.branchName||"",ke=Ye.status||"";return Ft.toLowerCase().includes(Ie)||xe.toLowerCase().includes(Ie)||ke.toLowerCase().includes(Ie)})}i(ae),me(Math.ceil(ae.length/je)),Q(1)},[e,R,G]),w.useEffect(()=>{const ae=(H-1)*je,Ie=ae+je,Ye=s.slice(ae,Ie);a(Ye)},[s,H]);const Ee=ae=>{I(ae),v(!0)},Be=()=>{B({branchId:"",categoryId:"",number:"",status:"available",image:null}),se(null),A(!0)},it=ae=>{I(ae),F({branchId:ae.branchId||"",categoryId:ae.categoryId||"",number:ae.number||"",capacity:ae.capacity||"",status:ae.status||"available",image:null}),ue(ae.image?`${ae.image}`:null),O(!0)},re=ae=>{I(ae),C(!0)},ce=ae=>{const{name:Ie,value:Ye}=ae.target;B({...z,[Ie]:Ye})},Z=ae=>{const{name:Ie,value:Ye}=ae.target;F({...M,[Ie]:Ye})},de=ae=>{const Ie=ae.target.files[0];if(Ie){B({...z,image:Ie});const Ye=new FileReader;Ye.onload=Ft=>se(Ft.target.result),Ye.readAsDataURL(Ie)}},te=ae=>{const Ie=ae.target.files[0];if(Ie){F({...M,image:Ie});const Ye=new FileReader;Ye.onload=Ft=>ue(Ft.target.result),Ye.readAsDataURL(Ie)}},Se=async()=>{_(!0);try{if(!z.branchId||!z.number){alert("Please fill in all required fields");return}const ae=new FormData;ae.append("branchId",z.branchId),z.categoryId&&ae.append("categoryId",z.categoryId),ae.append("number",z.number),ae.append("status",z.status),z.image&&ae.append("image",z.image),await Uc.post("/table",ae,{headers:{"Content-Type":"multipart/form-data"}}),await Me(),A(!1),L("Table created successfully"),setTimeout(()=>{L("")},3e3)}catch(ae){console.error("Error creating table:",ae),alert("Failed to create table. Please try again.")}finally{_(!1)}},Ve=async()=>{_(!0);try{if(!M.branchId||!M.number){alert("Please fill in all required fields");return}const ae=new FormData;ae.append("branchId",M.branchId),M.categoryId&&ae.append("categoryId",M.categoryId),ae.append("number",M.number),ae.append("status",M.status),M.image&&ae.append("image",M.image),await Uc.put(`/table/${k.id}`,ae,{headers:{"Content-Type":"multipart/form-data"}}),await Me(),O(!1),L(`Table ${k.number} updated successfully`),setTimeout(()=>{L("")},3e3)}catch(ae){console.error("Error updating table:",ae),alert("Failed to update table. Please try again.")}finally{_(!1)}},tt=async()=>{_(!0);try{await Uc.delete(`/table/${k.id}`),await Me(),C(!1),L(`Table ${k.number} deleted successfully`),setTimeout(()=>{L("")},3e3)}catch(ae){console.error("Error deleting table:",ae),alert("Failed to delete table. Please try again.")}finally{_(!1)}},ze=()=>{v(!1),I(null)},Ze=()=>{A(!1),se(null)},Ae=()=>{O(!1),I(null),ue(null)},Qe=()=>{C(!1),I(null)},pt=(ae,Ie)=>{ae==="status"?oe(Ie):ae==="branch"&&V(Ie),Q(1)},Bt=ae=>{let Ye=`https://hotelvirat.com/menu?branch=${ae.branchId}&name=${encodeURIComponent(ae.branchName)}&table=${ae.number}`;return ae.categoryId&&(Ye+=`&category=${ae.categoryId}&categoryName=${encodeURIComponent(ae.categoryName||"")}`),`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(Ye)}`},Pt=async ae=>{const Ie=Bt(ae);try{const Ft=await(await fetch(Ie)).blob(),xe=window.URL.createObjectURL(Ft),ke=document.createElement("a");ke.href=xe,ke.download=`table-${ae.number}-${ae.branchName}-qr.png`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),window.URL.revokeObjectURL(xe)}catch(Ye){console.error("Error downloading QR code:",Ye),alert("Failed to download QR code")}},kt=()=>{let ae=`Table Number,Capacity,Branch,Status,Created At
`;s.forEach(xe=>{const ke=xe.capacity?`${xe.capacity} people`:"Not set";ae+=`${xe.number},"${ke}","${xe.branchName}",${xe.status},"${xe.createdAt}"
`});const Ie=new Blob([ae],{type:"text/csv"}),Ye=window.URL.createObjectURL(Ie),Ft=document.createElement("a");Ft.setAttribute("hidden",""),Ft.setAttribute("href",Ye),Ft.setAttribute("download",`tables-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft)};return r.jsxs("div",{className:"tables-page",children:[N&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:N}),r.jsx("button",{onClick:()=>L(""),children:r.jsx(On,{size:16})})]}),r.jsxs("div",{className:"page-header",style:{position:"relative",zIndex:100},children:[r.jsx("h1",{children:"Tables Management"}),r.jsxs("div",{className:"header-actions",style:{position:"relative",zIndex:101},children:[r.jsxs("button",{className:"btn btn-outline",onClick:kt,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:"Export"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:Be,style:{position:"relative",zIndex:102},children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Table"})]})]})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by table number, branch, or status...",className:"search-input",value:R,onChange:ae=>W(ae.target.value)})]}),r.jsxs("div",{className:"filter-buttons",children:[r.jsxs("select",{className:"filter-select",value:G,onChange:ae=>pt("status",ae.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"available",children:"Available"}),r.jsx("option",{value:"reserved",children:"Reserved"})]}),r.jsxs("select",{className:"filter-select",value:q,onChange:ae=>pt("branch",ae.target.value),children:[r.jsx("option",{value:"all",children:"All Branches"}),l.map(ae=>r.jsx("option",{value:ae._id,children:ae.name},ae._id))]})]})]}),g&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:g})]}),r.jsx("div",{className:"data-card",children:p?r.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[r.jsx($a,{size:24,className:"animate-spin"}),r.jsx("p",{children:"Loading tables..."})]}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Image"}),r.jsx("th",{children:"Table Number"}),r.jsx("th",{children:"Capacity"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Category"}),r.jsx("th",{children:"Created At"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.length>0?n.map(ae=>r.jsxs("tr",{children:[r.jsx("td",{children:ae.image?r.jsx("img",{src:`${ae.image}`,alt:`Table ${ae.number}`,className:"table-image",style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"4px"}}):r.jsx("div",{className:"table-image-placeholder",style:{width:"50px",height:"50px",backgroundColor:"#f3f4f6",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af"},children:r.jsx(Uj,{size:20})})}),r.jsxs("td",{children:["Table ",ae.number]}),r.jsx("td",{children:ae.capacity?`${ae.capacity} people`:"Not set"}),r.jsx("td",{children:ae.branchName}),r.jsx("td",{children:ae.categoryName}),r.jsx("td",{children:ae.createdAt}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn view",onClick:()=>Ee(ae),children:"View"}),r.jsx("button",{className:"action-btn edit",onClick:()=>it(ae),children:"Edit"}),r.jsx("button",{className:"action-btn",onClick:()=>Pt(ae),style:{backgroundColor:"#8b5cf6",color:"white"},title:"Download QR Code",children:r.jsx(Ui,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>re(ae),children:"Delete"})]})})]},ae.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"no-tables",children:"No tables found matching your criteria"})})})]})}),le>0&&r.jsxs("div",{className:"pagination",children:[r.jsx("button",{className:"pagination-btn",onClick:()=>Q(ae=>Math.max(ae-1,1)),disabled:H===1||p,children:"Previous"}),r.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,le)},(ae,Ie)=>{let Ye;return le<=5||H<=3?Ye=Ie+1:H>=le-2?Ye=le-4+Ie:Ye=H-2+Ie,r.jsx("button",{className:`pagination-page ${H===Ye?"active":""}`,onClick:()=>Q(Ye),disabled:p,children:Ye},Ye)}),le>5&&H<le-2&&r.jsx("span",{className:"pagination-ellipsis",children:"..."}),le>5&&H<le-2&&r.jsx("button",{className:`pagination-page ${H===le?"active":""}`,onClick:()=>Q(le),disabled:p,children:le})]}),r.jsx("button",{className:"pagination-btn",onClick:()=>Q(ae=>Math.min(ae+1,le)),disabled:H===le||p,children:"Next"})]}),j&&k&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:["Table Details - Table ",k.number]}),r.jsx("button",{className:"modal-close",onClick:ze,children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"order-details",children:[r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Table Number"}),r.jsxs("div",{className:"order-detail-value",children:["Table ",k.number]})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Table Capacity"}),r.jsx("div",{className:"order-detail-value",children:k.capacity?`${k.capacity} people`:"Not set"})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Branch"}),r.jsx("div",{className:"order-detail-value",children:k.branchName})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Category"}),r.jsx("div",{className:"order-detail-value",children:k.categoryName})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Status"}),r.jsx("div",{className:"order-detail-value",children:r.jsx("span",{className:`status-badge ${k.status}`,children:k.status.charAt(0).toUpperCase()+k.status.slice(1)})})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Created At"}),r.jsx("div",{className:"order-detail-value",children:k.createdAt})]}),k.image&&r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Image"}),r.jsx("div",{className:"order-detail-value",children:r.jsx("img",{src:`${k.image}`,alt:`Table ${k.number}`,style:{width:"200px",height:"150px",objectFit:"cover",borderRadius:"8px"}})})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"QR Code"}),r.jsx("div",{className:"order-detail-value",children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[r.jsx("img",{src:Bt(k),alt:`QR Code for Table ${k.number}`,style:{width:"200px",height:"200px",border:"1px solid #e5e7eb",borderRadius:"8px"}}),r.jsxs("button",{className:"btn btn-outline",onClick:()=>Pt(k),style:{display:"flex",alignItems:"center",gap:"5px"},children:[r.jsx(Sa,{size:16}),"Download QR Code"]})]})})]})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:ze,children:"Close"}),r.jsx("button",{className:"btn btn-primary",onClick:()=>{ze(),it(k)},children:"Edit Table"})]})]})}),y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Add New Table"}),r.jsx("button",{className:"modal-close",onClick:Ze,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Branch *"}),r.jsxs("select",{name:"branchId",value:z.branchId,onChange:ce,className:"form-select",required:!0,children:[r.jsx("option",{value:"",children:"Select Branch"}),l.map(ae=>r.jsx("option",{value:ae._id,children:ae.name},ae._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Category (Optional)"}),r.jsxs("select",{name:"categoryId",value:z.categoryId,onChange:ce,className:"form-select",children:[r.jsx("option",{value:"",children:"All Categories (No Filter)"}),u.map(ae=>r.jsx("option",{value:ae._id,children:ae.name},ae._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Table Number *"}),r.jsx("input",{type:"text",name:"number",value:z.number,onChange:ce,className:"form-input",placeholder:"Enter table number (e.g., A1, B2, VIP1)",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Table Capacity *"}),r.jsx("input",{type:"number",name:"capacity",value:z.capacity,onChange:ce,className:"form-input",placeholder:"Number of people (e.g., 4, 6, 8)",min:"1",max:"20",required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Status"}),r.jsxs("select",{name:"status",value:z.status,onChange:ce,className:"form-select",children:[r.jsx("option",{value:"available",children:"Available"}),r.jsx("option",{value:"reserved",children:"Reserved"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Table Image"}),r.jsxs("div",{className:"image-upload-container",children:[r.jsx("label",{htmlFor:"add-image-upload",className:"image-upload-label",children:ee?r.jsxs("div",{className:"image-preview-wrapper",children:[r.jsx("img",{src:ee||"/placeholder.svg",alt:"Preview",className:"image-preview"}),r.jsxs("div",{className:"image-overlay",children:[r.jsx(qi,{size:24}),r.jsx("span",{children:"Change Image"})]})]}):r.jsxs("div",{className:"image-upload-placeholder",children:[r.jsx(qi,{size:24}),r.jsx("span",{children:"Click to upload table image"})]})}),r.jsx("input",{id:"add-image-upload",type:"file",accept:"image/*",onChange:de,className:"image-upload-input"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:Ze,disabled:P,children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:Se,disabled:P,children:P?r.jsxs(r.Fragment,{children:[r.jsx($a,{size:16,className:"animate-spin"}),r.jsx("span",{children:"Creating..."})]}):"Create Table"})]})]})}),E&&k&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:["Edit Table - Table ",k.number]}),r.jsx("button",{className:"modal-close",onClick:Ae,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Branch *"}),r.jsxs("select",{name:"branchId",value:M.branchId,onChange:Z,className:"form-select",required:!0,children:[r.jsx("option",{value:"",children:"Select Branch"}),l.map(ae=>r.jsx("option",{value:ae._id,children:ae.name},ae._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Category (Optional)"}),r.jsxs("select",{name:"categoryId",value:M.categoryId,onChange:Z,className:"form-select",children:[r.jsx("option",{value:"",children:"All Categories (No Filter)"}),u.map(ae=>r.jsx("option",{value:ae._id,children:ae.name},ae._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Table Number *"}),r.jsx("input",{type:"text",name:"number",value:M.number,onChange:Z,className:"form-input",placeholder:"Enter table number (e.g., A1, B2, VIP1)",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Table Capacity *"}),r.jsx("input",{type:"number",name:"capacity",value:M.capacity,onChange:Z,className:"form-input",placeholder:"Number of people (e.g., 4, 6, 8)",min:"1",max:"20",required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Status"}),r.jsxs("select",{name:"status",value:M.status,onChange:Z,className:"form-select",children:[r.jsx("option",{value:"available",children:"Available"}),r.jsx("option",{value:"reserved",children:"Reserved"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Table Image"}),r.jsxs("div",{className:"image-upload-container",children:[r.jsx("label",{htmlFor:"edit-image-upload",className:"image-upload-label",children:fe?r.jsxs("div",{className:"image-preview-wrapper",children:[r.jsx("img",{src:fe||"/placeholder.svg",alt:"Preview",className:"image-preview"}),r.jsxs("div",{className:"image-overlay",children:[r.jsx(qi,{size:24}),r.jsx("span",{children:"Change Image"})]})]}):r.jsxs("div",{className:"image-upload-placeholder",children:[r.jsx(qi,{size:24}),r.jsx("span",{children:"Click to upload table image"})]})}),r.jsx("input",{id:"edit-image-upload",type:"file",accept:"image/*",onChange:te,className:"image-upload-input"})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:Ae,disabled:P,children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:Ve,disabled:P,children:P?r.jsxs(r.Fragment,{children:[r.jsx($a,{size:16,className:"animate-spin"}),r.jsx("span",{children:"Saving..."})]}):"Save Changes"})]})]})}),S&&k&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Table"}),r.jsx("button",{className:"modal-close",onClick:Qe,children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{style:{textAlign:"center",padding:"20px 0"},children:[r.jsx(xr,{size:48,color:"#dc2626",style:{marginBottom:"16px"}}),r.jsx("h4",{style:{marginBottom:"8px",color:"#dc2626"},children:"Are you sure?"}),r.jsxs("p",{style:{color:"#666",marginBottom:"16px"},children:["Do you want to delete Table ",k.number," from ",k.branchName,"?"]}),r.jsx("p",{style:{color:"#dc2626",fontSize:"14px"},children:"This action cannot be undone."})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:Qe,disabled:P,children:"Cancel"}),r.jsx("button",{className:"btn",onClick:tt,disabled:P,style:{backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:P?r.jsxs(r.Fragment,{children:[r.jsx($a,{size:16,className:"animate-spin"}),r.jsx("span",{children:"Deleting..."})]}):"Delete Table"})]})]})})]})},Ej=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Zae=()=>{var Me,Ee,Be,it,re,ce,Z,de;const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState([]),[u,h]=w.useState(!0),[p,m]=w.useState(""),[g,b]=w.useState(null),[j,v]=w.useState(!1),[y,A]=w.useState(!1),[E,O]=w.useState(!1),[S,C]=w.useState(null),[k,I]=w.useState(""),[z,B]=w.useState(""),[M,F]=w.useState("all"),[N,L]=w.useState("all"),[P,_]=w.useState("all"),[R,W]=w.useState("all"),[G,oe]=w.useState(1),[q,V]=w.useState(1),U=10;w.useEffect(()=>{X(),H(),Q()},[M,N,P,R]);const X=async()=>{try{const te=await Ej.get("/branch");d(te.data)}catch(te){console.error("Error fetching branches:",te)}},H=async()=>{h(!0),m("");try{const te={};if(M!=="all"&&(te.paymentStatus=M),N!=="all"&&(te.paymentMethod=N),P!=="all"&&(te.branchId=P),R!=="all"){const ze=new Date,Ze=new Date;switch(R){case"today":Ze.setHours(0,0,0,0),te.startDate=Ze.toISOString(),te.endDate=ze.toISOString();break;case"week":Ze.setDate(ze.getDate()-7),te.startDate=Ze.toISOString(),te.endDate=ze.toISOString();break;case"month":Ze.setMonth(ze.getMonth()-1),te.startDate=Ze.toISOString(),te.endDate=ze.toISOString();break}}const Se=await Ej.get("/staff-invoice",{params:te});let Ve=[];Se.data&&Se.data.success&&Array.isArray(Se.data.data)?Ve=Se.data.data:Se.data&&Se.data.invoices&&Array.isArray(Se.data.invoices)?Ve=Se.data.invoices:Array.isArray(Se.data)?Ve=Se.data:Se.data&&Se.data.message&&Se.data.message.includes("routes working")?Ve=[]:(console.error(" Unexpected response format:",Se.data),console.error(" Response keys:",Object.keys(Se.data||{})),console.error(" Response type:",typeof Se.data),Ve=[]);const tt=Ve.map((ze,Ze)=>{var Ae,Qe,pt,Bt,Pt,kt,ae;return{id:ze._id||`temp-id-${Ze}`,invoiceId:ze.invoiceId||`UNKNOWN-${Ze}`,orderId:ze.orderId||"N/A",customer:((Ae=ze.userId)==null?void 0:Ae.name)||"Unknown Staff",customerMobile:((Qe=ze.userId)==null?void 0:Qe.mobile)||"N/A",date:new Date(ze.invoiceDate||ze.createdAt||Date.now()).toLocaleDateString("en-IN"),time:new Date(ze.invoiceDate||ze.createdAt||Date.now()).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),branch:ze.branchName||((pt=ze.branchId)==null?void 0:pt.name)||"Unknown Branch",branchId:((Bt=ze.branchId)==null?void 0:Bt._id)||ze.branchId||null,branchAddress:((Pt=ze.branchId)==null?void 0:Pt.address)||"Unknown Address",tableNumber:ze.tableNumber||((kt=ze.tableId)==null?void 0:kt.number)||"N/A",peopleCount:ze.peopleCount||0,items:((ae=ze.items)==null?void 0:ae.length)||0,subtotal:ze.subtotal||0,tax:ze.tax||0,serviceCharge:ze.serviceCharge||0,grandTotal:ze.grandTotal||0,amount:`${(ze.grandTotal||0).toFixed(2)}`,paymentStatus:ze.paymentStatus||"completed",paymentMethod:ze.paymentMethod||"cash",notes:ze.notes||"",originalInvoice:ze}});t(tt)}catch(te){console.error("Error fetching staff invoices:",te),m("Failed to load staff invoices. Please refresh the page and try again.")}finally{h(!1)}},Q=async()=>{try{const te={};if(P!=="all"&&(te.branchId=P),R!=="all"){const Ve=new Date,tt=new Date;switch(R){case"today":tt.setHours(0,0,0,0),te.startDate=tt.toISOString(),te.endDate=Ve.toISOString();break;case"week":tt.setDate(Ve.getDate()-7),te.startDate=tt.toISOString(),te.endDate=Ve.toISOString();break;case"month":tt.setMonth(Ve.getMonth()-1),te.startDate=tt.toISOString(),te.endDate=Ve.toISOString();break}}const Se=await Ej.get("/staff-invoice/statistics",{params:te});b(Se.data.statistics)}catch(te){console.error("Error fetching statistics:",te)}};w.useEffect(()=>{const te=e.filter(Se=>{if(!z.trim())return!0;const Ve=z.trim().toLowerCase();return Se.invoiceId.toLowerCase().includes(Ve)||Se.orderId.toLowerCase().includes(Ve)||Se.customer.toLowerCase().includes(Ve)||Se.tableNumber.toLowerCase().includes(Ve)});i(te),V(Math.ceil(te.length/U)),oe(1)},[e,z]),w.useEffect(()=>{const te=(G-1)*U,Se=te+U,Ve=s.slice(te,Se);a(Ve)},[s,G]);const le=te=>{const Se=document.createElement("canvas");return Se.width=te.width,Se.height=te.height,Se.getContext("2d").drawImage(te,0,0),Se.toDataURL("image/jpeg")},me=te=>{const Se=window.open("","_blank"),Ve=new Image;Ve.crossOrigin="anonymous",Ve.onload=()=>{var Ze,Ae;let tt="";try{tt=le(Ve)}catch(Qe){console.warn("Could not convert logo to base64:",Qe)}const ze=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${te.invoiceId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .logo { width: 80px; height: 80px; margin: 0 auto 15px; border-radius: 8px; display: block; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin: 10px 0; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${tt?`<img src="${tt}" alt="Hotel Virat Logo" class="logo">`:""}
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${te.branchAddress}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${te.invoiceId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${te.invoiceId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${te.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${te.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${te.time}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${te.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${te.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Staff & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Staff Name:</span>
                <span class="detail-value">${te.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${te.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${te.branch}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${te.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Status:</span>
                <span class="detail-value">${te.paymentStatus.toUpperCase()}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ae=(Ze=te.originalInvoice)==null?void 0:Ze.items)==null?void 0:Ae.map(Qe=>`
                    <tr>
                      <td>${Qe.name}</td>
                      <td style="text-align: center;">${Qe.quantity}</td>
                      <td style="text-align: right;">${Qe.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(Qe.price*Qe.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${te.subtotal.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${te.tax.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${te.serviceCharge.toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${te.grandTotal.toFixed(2)}</span>
            </div>
          </div>

          ${te.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${te.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;Se.document.write(ze),Se.document.close(),Se.focus(),setTimeout(()=>{Se.print()},500)},Ve.onerror=()=>{var ze,Ze;console.warn("Could not load logo image, generating PDF without logo");const tt=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${te.invoiceId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin-bottom: 10px; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${te.branchAddress}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${te.invoiceId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${te.invoiceId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${te.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${te.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${te.time}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${te.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${te.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Staff & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Staff Name:</span>
                <span class="detail-value">${te.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${te.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${te.branch}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${te.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Status:</span>
                <span class="detail-value">${te.paymentStatus.toUpperCase()}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ze=(ze=te.originalInvoice)==null?void 0:ze.items)==null?void 0:Ze.map(Ae=>`
                    <tr>
                      <td>${Ae.name}</td>
                      <td style="text-align: center;">${Ae.quantity}</td>
                      <td style="text-align: right;">${Ae.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(Ae.price*Ae.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${te.subtotal.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${te.tax.toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${te.serviceCharge.toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${te.grandTotal.toFixed(2)}</span>
            </div>
          </div>

          ${te.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${te.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;Se.document.write(tt),Se.document.close(),Se.focus(),setTimeout(()=>{Se.print()},500)},Ve.src=Yo},je=te=>{var tt,ze,Ze,Ae,Qe,pt,Bt,Pt;const Se=window.open("","_blank","width=302,height=600"),Ve=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Invoice ${te.invoiceId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .invoice-info { margin-bottom: 10px; }
          .invoice-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${te.branch}</div>
        </div>
        
        <div class="invoice-id">Invoice #${te.invoiceId}</div>
        <div style="text-align: center; font-size: 11px; margin-bottom: 8px;">Order: ${te.orderId}</div>
        
        <div class="invoice-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${te.date}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Time:</span>
            <span>${te.time}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Table:</span>
            <span>${te.tableNumber}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Guests:</span>
            <span>${te.peopleCount}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Staff:</span>
            <span>${te.customer}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${te.customerMobile}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${((ze=(tt=te.originalInvoice)==null?void 0:tt.items)==null?void 0:ze.map(kt=>`
            <div class="item-row">
              <div class="item-name">${kt.name}</div>
              <div class="item-details">
                <span>${kt.quantity} x ${kt.price.toFixed(2)}</span>
                <span>${(kt.price*kt.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((Ze=te.subtotal)==null?void 0:Ze.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax (5%):</span>
            <span>${((Ae=te.tax)==null?void 0:Ae.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service (10%):</span>
            <span>${((Qe=te.serviceCharge)==null?void 0:Qe.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${((pt=te.grandTotal)==null?void 0:pt.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="invoice-info">
          <div class="info-row">
            <span class="info-label">Payment:</span>
            <span>${((Bt=te.paymentMethod)==null?void 0:Bt.toUpperCase())||"CASH"}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Status:</span>
            <span>${((Pt=te.paymentStatus)==null?void 0:Pt.toUpperCase())||"PENDING"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;Se.document.write(Ve),Se.document.close(),Se.focus(),setTimeout(()=>{Se.print()},300)},ee=te=>{C(te),v(!0)},se=()=>{v(!1),C(null)},fe=()=>{A(!1)},ue=(te,Se)=>{te==="paymentStatus"?F(Se):te==="paymentMethod"?L(Se):te==="branch"?_(Se):te==="date"&&W(Se),oe(1)},We=te=>{switch(te==null?void 0:te.toLowerCase()){case"card":return r.jsx(Ua,{size:14});case"upi":return r.jsx(Vi,{size:14});case"cash":default:return r.jsx(Vi,{size:14})}},we=()=>{let te=`Invoice ID,Order ID,Staff,Date,Time,Branch,Table,People,Items,Amount,Payment Method,Payment Status
`;s.forEach(ze=>{te+=`${ze.invoiceId},${ze.orderId},${ze.customer},"${ze.date}","${ze.time}","${ze.branch}",${ze.tableNumber},${ze.peopleCount},${ze.items},${ze.amount},${ze.paymentMethod},${ze.paymentStatus}
`});const Se=new Blob([te],{type:"text/csv"}),Ve=window.URL.createObjectURL(Se),tt=document.createElement("a");tt.setAttribute("hidden",""),tt.setAttribute("href",Ve),tt.setAttribute("download",`staff-invoices-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(tt),tt.click(),document.body.removeChild(tt)};return r.jsxs("div",{className:"orders-page",children:[k&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:k}),r.jsx("button",{onClick:()=>I(""),children:r.jsx(On,{size:16})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Staff Invoices"}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("button",{className:"btn btn-outline",onClick:()=>A(!0),children:[r.jsx(Jc,{size:16}),r.jsx("span",{children:"Statistics"})]}),r.jsxs("button",{className:"btn btn-outline",onClick:we,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:"Export CSV"})]}),r.jsxs("button",{className:"btn btn-outline",onClick:H,children:[r.jsx(ai,{size:16}),r.jsx("span",{children:"Refresh"})]})]})]}),g&&r.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(4, 1fr)",marginBottom:"24px"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container orange",children:r.jsx(Nh,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:g.totalInvoices||0}),r.jsx("p",{children:"Total Invoices"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container green",children:r.jsx(mm,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.totalRevenue||0).toFixed(0)]}),r.jsx("p",{children:"Total Revenue"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container blue",children:r.jsx(Jc,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.averageInvoiceValue||0).toFixed(0)]}),r.jsx("p",{children:"Average Value"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container purple",children:r.jsx(rn,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:s.length}),r.jsx("p",{children:"Filtered Results"})]})]})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search invoices...",className:"search-input",value:z,onChange:te=>B(te.target.value)})]}),r.jsx("div",{className:"filter-buttons",children:r.jsxs("button",{className:"btn btn-outline",onClick:()=>O(!E),children:[r.jsx(cd,{size:16}),r.jsx("span",{children:"Filters"})]})})]}),E&&r.jsx("div",{className:"card",style:{marginBottom:"20px",padding:"20px"},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Payment Status"}),r.jsxs("select",{className:"form-select",value:M,onChange:te=>ue("paymentStatus",te.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"refunded",children:"Refunded"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Payment Method"}),r.jsxs("select",{className:"form-select",value:N,onChange:te=>ue("paymentMethod",te.target.value),children:[r.jsx("option",{value:"all",children:"All Methods"}),r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"netbanking",children:"Net Banking"}),r.jsx("option",{value:"wallet",children:"Wallet"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Branch"}),r.jsxs("select",{className:"form-select",value:P,onChange:te=>ue("branch",te.target.value),children:[r.jsx("option",{value:"all",children:"All Branches"}),l.map(te=>r.jsx("option",{value:te._id,children:te.name},te._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Date Range"}),r.jsxs("select",{className:"form-select",value:R,onChange:te=>ue("date",te.target.value),children:[r.jsx("option",{value:"all",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"Last 7 Days"}),r.jsx("option",{value:"month",children:"Last 30 Days"})]})]})]})}),p&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:p})]}),r.jsx("div",{className:"data-card",children:u?r.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[r.jsx($a,{size:24,className:"animate-spin"}),r.jsx("p",{children:"Loading staff invoices..."})]}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Invoice Details"}),r.jsx("th",{children:"Staff"}),r.jsx("th",{children:"Date & Time"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Table"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Payment"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.length>0?n.map(te=>{var Se,Ve;return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:"500"},children:te.invoiceId}),r.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Order: ",te.orderId]})]}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:"500"},children:te.customer}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:te.customerMobile})]}),r.jsxs("td",{children:[r.jsx("div",{children:te.date}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:te.time})]}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:"500"},children:te.branch}),r.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Table ",te.tableNumber,"  ",te.peopleCount," Guests"]})]}),r.jsx("td",{children:te.tableNumber}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:"600",color:"#666"},children:te.amount}),r.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[te.items," Items"]})]}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[We(te.paymentMethod),r.jsx("span",{style:{fontSize:"12px",textTransform:"capitalize"},children:te.paymentMethod})]})}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${te.paymentStatus}`,children:((Se=te.paymentStatus)==null?void 0:Se.charAt(0).toUpperCase())+((Ve=te.paymentStatus)==null?void 0:Ve.slice(1))})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn view",onClick:()=>ee(te),title:"View Details",children:r.jsx(xs,{size:14})}),r.jsx("button",{className:"action-btn edit",onClick:()=>me(te),title:"Download PDF",children:r.jsx(ld,{size:14})})]})})]},te.id)}):r.jsx("tr",{children:r.jsx("td",{colSpan:"9",className:"no-orders",children:"No staff invoices found matching your criteria"})})})]})}),q>0&&r.jsxs("div",{className:"pagination",children:[r.jsx("button",{className:"pagination-btn",onClick:()=>oe(te=>Math.max(te-1,1)),disabled:G===1||u,children:"Previous"}),r.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,q)},(te,Se)=>{let Ve;return q<=5||G<=3?Ve=Se+1:G>=q-2?Ve=q-4+Se:Ve=G-2+Se,r.jsx("button",{className:`pagination-page ${G===Ve?"active":""}`,onClick:()=>oe(Ve),disabled:u,children:Ve},Ve)}),q>5&&G<q-2&&r.jsx("span",{className:"pagination-ellipsis",children:"..."}),q>5&&G<q-2&&r.jsx("button",{className:`pagination-page ${G===q?"active":""}`,onClick:()=>oe(q),disabled:u,children:q})]}),r.jsx("button",{className:"pagination-btn",onClick:()=>oe(te=>Math.min(te+1,q)),disabled:G===q||u,children:"Next"})]}),j&&S&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"800px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:["Invoice Details - ",S.invoiceId]}),r.jsx("button",{className:"modal-close",onClick:se,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Invoice Information"}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Invoice ID"}),r.jsx("div",{className:"order-detail-value",children:S.invoiceId})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Order ID"}),r.jsx("div",{className:"order-detail-value",children:S.orderId})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Date & Time"}),r.jsxs("div",{className:"order-detail-value",children:[S.date," ",S.time]})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Table"}),r.jsx("div",{className:"order-detail-value",children:S.tableNumber})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Guests"}),r.jsx("div",{className:"order-detail-value",children:S.peopleCount})]})]}),r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Staff & Branch Details"}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Staff Name"}),r.jsx("div",{className:"order-detail-value",children:S.customer})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Mobile"}),r.jsx("div",{className:"order-detail-value",children:S.customerMobile})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Branch"}),r.jsx("div",{className:"order-detail-value",children:S.branch})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Payment Method"}),r.jsx("div",{className:"order-detail-value",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[We(S.paymentMethod),r.jsx("span",{style:{textTransform:"capitalize"},children:S.paymentMethod})]})})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Payment Status"}),r.jsx("div",{className:"order-detail-value",children:r.jsx("span",{className:`status-badge ${S.paymentStatus}`,children:((Me=S.paymentStatus)==null?void 0:Me.charAt(0).toUpperCase())+((Ee=S.paymentStatus)==null?void 0:Ee.slice(1))})})]})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Order Items"}),r.jsx("div",{className:"order-items-table",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:((it=(Be=S.originalInvoice)==null?void 0:Be.items)==null?void 0:it.length)>0?S.originalInvoice.items.map((te,Se)=>r.jsxs("tr",{children:[r.jsx("td",{children:te.name}),r.jsx("td",{children:te.quantity}),r.jsxs("td",{children:["",te.price.toFixed(2)]}),r.jsxs("td",{children:["",(te.price*te.quantity).toFixed(2)]})]},Se)):r.jsx("tr",{children:r.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Bill Summary"}),r.jsx("div",{className:"order-items-table",children:r.jsx("table",{className:"data-table",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Subtotal"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((re=S.subtotal)==null?void 0:re.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Tax (5%)"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((ce=S.tax)==null?void 0:ce.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:"Service Charge (10%)"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Z=S.serviceCharge)==null?void 0:Z.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f8f9fa"},children:[r.jsx("td",{children:"Grand Total"}),r.jsxs("td",{style:{textAlign:"right",color:"#ff7e47"},children:["",((de=S.grandTotal)==null?void 0:de.toFixed(2))||"0.00"]})]})]})})})]}),S.notes&&r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Notes"}),r.jsx("p",{style:{padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:S.notes})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:se,children:"Close"}),r.jsxs("button",{className:"btn btn-print",onClick:()=>je(S),children:[r.jsx(_s,{size:16}),"Print Receipt"]}),r.jsxs("button",{className:"btn btn-outline",onClick:()=>me(S),children:[r.jsx(ld,{size:16}),"Download PDF"]})]})]})}),y&&g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Invoice Statistics"}),r.jsx("button",{className:"modal-close",onClick:fe,children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"24px"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container orange",children:r.jsx(Nh,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:g.totalInvoices||0}),r.jsx("p",{children:"Total Invoices"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container green",children:r.jsx(mm,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.totalRevenue||0).toFixed(2)]}),r.jsx("p",{children:"Total Revenue"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container blue",children:r.jsx(Jc,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.averageInvoiceValue||0).toFixed(2)]}),r.jsx("p",{children:"Average Invoice Value"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container purple",children:r.jsx(rn,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:R==="all"?"All Time":R==="today"?"Today":R==="week"?"Last 7 Days":"Last 30 Days"}),r.jsx("p",{children:"Time Period"})]})]})]})}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn btn-outline",onClick:fe,children:"Close"})})]})})]})},X6=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),ese=()=>{var We,we,Me,Ee,Be,it;const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState([]),[u,h]=w.useState(!0),[p,m]=w.useState(""),[g,b]=w.useState(null),[j,v]=w.useState(!1),[y,A]=w.useState(!1),[E,O]=w.useState(!1),[S,C]=w.useState(null),[k,I]=w.useState(""),[z,B]=w.useState(""),[M,F]=w.useState("all"),[N,L]=w.useState("all"),[P,_]=w.useState(""),[R,W]=w.useState(1),[G,oe]=w.useState(1),q=10;w.useEffect(()=>{V(),X()},[M,N,P]);const V=async()=>{try{const re=await X6.get("/branch");d(re.data)}catch(re){console.error("Error fetching branches:",re)}},U=re=>{const ce=new Date(re),Z=ce.getFullYear(),de=String(ce.getMonth()+1).padStart(2,"0"),te=String(ce.getDate()).padStart(2,"0");return`${Z}-${de}-${te}`},X=async()=>{h(!0),m("");try{const re={};if(M!=="all"&&(re.branchId=M),P.trim()&&(re.customerName=P.trim()),N!=="all"){const te=new Date,Se=new Date;switch(N){case"today":re.startDate=U(te),re.endDate=U(te);break;case"week":Se.setDate(te.getDate()-7),re.startDate=U(Se),re.endDate=U(te);break;case"month":Se.setMonth(te.getMonth()-1),re.startDate=U(Se),re.endDate=U(te);break}}const ce=await X6.get("/counter-bill",{params:re});let Z=[];if(ce.data&&ce.data.success&&Array.isArray(ce.data.data))Z=ce.data.data;else if(ce.data&&ce.data.bills&&Array.isArray(ce.data.bills))Z=ce.data.bills;else if(Array.isArray(ce.data))Z=ce.data;else throw console.error(" Unexpected response format:",ce.data),new Error("Invalid response format");const de=Z.map((te,Se)=>{var Ve,tt,ze,Ze,Ae,Qe,pt,Bt,Pt;return{id:te.id||`temp-id-${Se}`,billId:`CB-${((Ve=te.id)==null?void 0:Ve.slice(-6))||Se}`,orderId:((tt=te.order)==null?void 0:tt.id)||"N/A",invoiceNumber:((ze=te.invoice)==null?void 0:ze.invoiceNumber)||"N/A",customer:te.customerName||"Unknown Customer",customerMobile:te.phoneNumber||"N/A",counterUser:((Ze=te.userId)==null?void 0:Ze.name)||"Unknown Counter",counterMobile:((Ae=te.userId)==null?void 0:Ae.mobile)||"N/A",date:te.date||new Date().toLocaleDateString("en-IN"),time:te.time||new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),branch:((Qe=te.branch)==null?void 0:Qe.name)||"Unknown Branch",branchId:((pt=te.branch)==null?void 0:pt.id)||null,branchAddress:((Bt=te.branch)==null?void 0:Bt.location)||"Unknown Address",items:((Pt=te.items)==null?void 0:Pt.length)||0,subtotal:te.subtotal||0,tax:te.tax||0,serviceCharge:te.serviceCharge||0,totalAmount:te.grandTotal||te.totalAmount||0,amount:`${(te.grandTotal||te.totalAmount||0).toFixed(2)}`,originalBill:te,createdAt:te.createdAt||new Date().toISOString()}});t(de),H(de)}catch(re){console.error("Error fetching counter bills:",re),m("Failed to load counter bills. Please refresh the page and try again.")}finally{h(!1)}},H=(re=e)=>{if(re.length===0){b({totalBills:0,totalRevenue:0,averageBillValue:0});return}const ce=re.length,Z=re.reduce((te,Se)=>te+Se.totalAmount,0),de=Z/ce;b({totalBills:ce,totalRevenue:Z,averageBillValue:de})};w.useEffect(()=>{const re=e.filter(ce=>{if(!z.trim())return!0;const Z=z.trim().toLowerCase();return ce.billId.toLowerCase().includes(Z)||ce.orderId.toLowerCase().includes(Z)||ce.customer.toLowerCase().includes(Z)||ce.customerMobile.includes(z.trim())||ce.invoiceNumber.toLowerCase().includes(Z)});i(re),oe(Math.ceil(re.length/q)),W(1)},[e,z]),w.useEffect(()=>{const re=(R-1)*q,ce=re+q,Z=s.slice(re,ce);a(Z)},[s,R]);const Q=re=>{const ce=document.createElement("canvas");return ce.width=re.width,ce.height=re.height,ce.getContext("2d").drawImage(re,0,0),ce.toDataURL("image/jpeg")},le=re=>{const ce=window.open("","_blank"),Z=new Image;Z.crossOrigin="anonymous",Z.onload=()=>{var Se,Ve;let de="";try{de=Q(Z)}catch(tt){console.warn("Could not convert logo to base64:",tt)}const te=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Counter Bill ${re.billId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .logo { width: 80px; height: 80px; margin: 0 auto 15px; border-radius: 8px; display: block; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin: 10px 0; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .bill-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .bill-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${de?`<img src="${de}" alt="Hotel Virat Logo" class="logo">`:""}
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${re.branchAddress}</div>
            <div class="bill-title">Counter Bill</div>
            <div style="font-size: 14px; color: #666;">Bill No: ${re.billId}</div>
          </div>
          
          <div class="bill-details">
            <div class="detail-section">
              <h3>Bill Details</h3>
              <div class="detail-row">
                <span class="detail-label">Bill ID:</span>
                <span class="detail-value">${re.billId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${re.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Invoice No:</span>
                <span class="detail-value">${re.invoiceNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${re.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${re.time}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Counter Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${re.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Customer Mobile:</span>
                <span class="detail-value">${re.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Counter User:</span>
                <span class="detail-value">${re.counterUser}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${re.branch}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ve=(Se=re.originalBill)==null?void 0:Se.items)==null?void 0:Ve.map(tt=>`
                    <tr>
                      <td>${tt.name}</td>
                      <td style="text-align: center;">${tt.quantity}</td>
                      <td style="text-align: right;">${tt.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(tt.price*tt.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${re.subtotal.toFixed(2)}</span>
            </div>
            ${re.tax>0?`
            <div class="total-row">
              <span class="total-label">Tax:</span>
              <span>${re.tax.toFixed(2)}</span>
            </div>
            `:""}
            ${re.serviceCharge>0?`
            <div class="total-row">
              <span class="total-label">Service Charge:</span>
              <span>${re.serviceCharge.toFixed(2)}</span>
            </div>
            `:""}
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${re.totalAmount.toFixed(2)}</span>
            </div>
          </div>

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;ce.document.write(te),ce.document.close(),ce.focus(),setTimeout(()=>{ce.print()},500)},Z.onerror=()=>{var te,Se;console.warn("Could not load logo image, generating PDF without logo");const de=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Counter Bill ${re.billId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin-bottom: 10px; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .bill-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .bill-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${re.branchAddress}</div>
            <div class="bill-title">Counter Bill</div>
            <div style="font-size: 14px; color: #666;">Bill No: ${re.billId}</div>
          </div>
          
          <div class="bill-details">
            <div class="detail-section">
              <h3>Bill Details</h3>
              <div class="detail-row">
                <span class="detail-label">Bill ID:</span>
                <span class="detail-value">${re.billId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${re.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Invoice No:</span>
                <span class="detail-value">${re.invoiceNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${re.date}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${re.time}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Counter Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${re.customer}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Customer Mobile:</span>
                <span class="detail-value">${re.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Counter User:</span>
                <span class="detail-value">${re.counterUser}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${re.branch}</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Se=(te=re.originalBill)==null?void 0:te.items)==null?void 0:Se.map(Ve=>`
                    <tr>
                      <td>${Ve.name}</td>
                      <td style="text-align: center;">${Ve.quantity}</td>
                      <td style="text-align: right;">${Ve.price.toFixed(2)}</td>
                      <td style="text-align: right;">${(Ve.price*Ve.quantity).toFixed(2)}</td>
                    </tr>
                  `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${re.subtotal.toFixed(2)}</span>
            </div>
            ${re.tax>0?`
            <div class="total-row">
              <span class="total-label">Tax:</span>
              <span>${re.tax.toFixed(2)}</span>
            </div>
            `:""}
            ${re.serviceCharge>0?`
            <div class="total-row">
              <span class="total-label">Service Charge:</span>
              <span>${re.serviceCharge.toFixed(2)}</span>
            </div>
            `:""}
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${re.totalAmount.toFixed(2)}</span>
            </div>
          </div>

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;ce.document.write(de),ce.document.close(),ce.focus(),setTimeout(()=>{ce.print()},500)},Z.src=Yo},me=re=>{var de,te,Se,Ve,tt,ze;const ce=window.open("","_blank","width=302,height=600"),Z=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Bill ${re.billId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .bill-info { margin-bottom: 10px; }
          .bill-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${re.branch}</div>
        </div>
        
        <div class="bill-id">Bill #${re.billId}</div>
        <div style="text-align: center; font-size: 11px; margin-bottom: 8px;">Invoice: ${re.invoiceNumber}</div>
        
        <div class="bill-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${re.date}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Time:</span>
            <span>${re.time}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Customer:</span>
            <span>${re.customer}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${re.customerMobile}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Counter:</span>
            <span>${re.counterUser}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${((te=(de=re.originalBill)==null?void 0:de.items)==null?void 0:te.map(Ze=>`
            <div class="item-row">
              <div class="item-name">${Ze.name}</div>
              <div class="item-details">
                <span>${Ze.quantity} x ${Ze.price.toFixed(2)}</span>
                <span>${(Ze.price*Ze.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((Se=re.subtotal)==null?void 0:Se.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax:</span>
            <span>${((Ve=re.tax)==null?void 0:Ve.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service:</span>
            <span>${((tt=re.serviceCharge)==null?void 0:tt.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${((ze=re.totalAmount)==null?void 0:ze.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;ce.document.write(Z),ce.document.close(),ce.focus(),setTimeout(()=>{ce.print()},300)},je=re=>{C(re),v(!0)},ee=()=>{v(!1),C(null)},se=()=>{A(!1)},fe=(re,ce)=>{re==="branch"?F(ce):re==="date"?L(ce):re==="customer"&&_(ce),W(1)},ue=()=>{let re=`Bill ID,Order ID,Invoice No,Customer,Mobile,Counter User,Date,Time,Branch,Items,Subtotal,Tax,Service Charge,Total Amount
`;s.forEach(te=>{re+=`${te.billId},${te.orderId},${te.invoiceNumber},"${te.customer}",${te.customerMobile},"${te.counterUser}","${te.date}","${te.time}","${te.branch}",${te.items},${te.subtotal.toFixed(2)},${te.tax.toFixed(2)},${te.serviceCharge.toFixed(2)},${te.totalAmount.toFixed(2)}
`});const ce=new Blob([re],{type:"text/csv"}),Z=window.URL.createObjectURL(ce),de=document.createElement("a");de.setAttribute("hidden",""),de.setAttribute("href",Z),de.setAttribute("download",`counter-bills-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(de),de.click(),document.body.removeChild(de)};return r.jsxs("div",{className:"orders-page",children:[k&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:k}),r.jsx("button",{onClick:()=>I(""),children:r.jsx(On,{size:16})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Counter Bills"}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("button",{className:"btn btn-outline",onClick:()=>A(!0),children:[r.jsx(Jc,{size:16}),r.jsx("span",{children:"Statistics"})]}),r.jsxs("button",{className:"btn btn-outline",onClick:ue,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:"Export CSV"})]}),r.jsxs("button",{className:"btn btn-outline",onClick:X,children:[r.jsx(ai,{size:16}),r.jsx("span",{children:"Refresh"})]})]})]}),g&&r.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(4, 1fr)",marginBottom:"24px"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container orange",children:r.jsx(Nh,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:g.totalBills||0}),r.jsx("p",{children:"Total Bills"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container green",children:r.jsx(mm,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.totalRevenue||0).toFixed(0)]}),r.jsx("p",{children:"Total Revenue"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container blue",children:r.jsx(Jc,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.averageBillValue||0).toFixed(0)]}),r.jsx("p",{children:"Average Bill Value"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container purple",children:r.jsx(rn,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:s.length}),r.jsx("p",{children:"Filtered Results"})]})]})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search bills...",className:"search-input",value:z,onChange:re=>B(re.target.value)})]}),r.jsx("div",{className:"filter-buttons",children:r.jsxs("button",{className:"btn btn-outline",onClick:()=>O(!E),children:[r.jsx(cd,{size:16}),r.jsx("span",{children:"Filters"})]})})]}),E&&r.jsx("div",{className:"card",style:{marginBottom:"20px",padding:"20px"},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Branch"}),r.jsxs("select",{className:"form-select",value:M,onChange:re=>fe("branch",re.target.value),children:[r.jsx("option",{value:"all",children:"All Branches"}),l.map(re=>r.jsx("option",{value:re._id,children:re.name},re._id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Customer Name"}),r.jsx("input",{type:"text",className:"form-input",placeholder:"Filter by customer name",value:P,onChange:re=>fe("customer",re.target.value)})]})]})}),p&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:p})]}),r.jsx("div",{className:"data-card",children:u?r.jsxs("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[r.jsx($a,{size:24,className:"animate-spin"}),r.jsx("p",{children:"Loading counter bills..."})]}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Bill Details"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Counter User"}),r.jsx("th",{children:"Date & Time"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Items"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.length>0?n.map(re=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:"500"},children:re.billId}),r.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Order: ",re.orderId]}),r.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Invoice: ",re.invoiceNumber]})]}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:"500"},children:re.customer}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:re.customerMobile})]}),r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:"500"},children:re.counterUser}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:re.counterMobile})]}),r.jsxs("td",{children:[r.jsx("div",{children:re.date}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:re.time})]}),r.jsx("td",{children:r.jsx("div",{style:{fontWeight:"500"},children:re.branch})}),r.jsx("td",{children:r.jsxs("div",{style:{fontWeight:"600",color:"#666"},children:[re.items," items"]})}),r.jsx("td",{children:r.jsx("div",{style:{fontWeight:"600",color:"#666"},children:re.amount})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn view",onClick:()=>je(re),title:"View Details",children:r.jsx(xs,{size:14})}),r.jsx("button",{className:"action-btn edit",onClick:()=>le(re),title:"Download PDF",children:r.jsx(ld,{size:14})})]})})]},re.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"8",className:"no-orders",children:"No counter bills found matching your criteria"})})})]})}),G>0&&r.jsxs("div",{className:"pagination",children:[r.jsx("button",{className:"pagination-btn",onClick:()=>W(re=>Math.max(re-1,1)),disabled:R===1||u,children:"Previous"}),r.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,G)},(re,ce)=>{let Z;return G<=5||R<=3?Z=ce+1:R>=G-2?Z=G-4+ce:Z=R-2+ce,r.jsx("button",{className:`pagination-page ${R===Z?"active":""}`,onClick:()=>W(Z),disabled:u,children:Z},Z)}),G>5&&R<G-2&&r.jsx("span",{className:"pagination-ellipsis",children:"..."}),G>5&&R<G-2&&r.jsx("button",{className:`pagination-page ${R===G?"active":""}`,onClick:()=>W(G),disabled:u,children:G})]}),r.jsx("button",{className:"pagination-btn",onClick:()=>W(re=>Math.min(re+1,G)),disabled:R===G||u,children:"Next"})]}),j&&S&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"800px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"modal-title",children:["Bill Details - ",S.billId]}),r.jsx("button",{className:"modal-close",onClick:ee,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Bill Information"}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Bill ID"}),r.jsx("div",{className:"order-detail-value",children:S.billId})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Order ID"}),r.jsx("div",{className:"order-detail-value",children:S.orderId})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Invoice No"}),r.jsx("div",{className:"order-detail-value",children:S.invoiceNumber})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Date & Time"}),r.jsxs("div",{className:"order-detail-value",children:[S.date," ",S.time]})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Branch"}),r.jsx("div",{className:"order-detail-value",children:S.branch})]})]}),r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"10px",color:"#333"},children:"Customer & Counter Details"}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Customer Name"}),r.jsx("div",{className:"order-detail-value",children:S.customer})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Customer Mobile"}),r.jsx("div",{className:"order-detail-value",children:S.customerMobile})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Counter User"}),r.jsx("div",{className:"order-detail-value",children:S.counterUser})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Counter Mobile"}),r.jsx("div",{className:"order-detail-value",children:S.counterMobile})]})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Order Items"}),r.jsx("div",{className:"order-items-table",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:((we=(We=S.originalBill)==null?void 0:We.items)==null?void 0:we.length)>0?S.originalBill.items.map((re,ce)=>r.jsxs("tr",{children:[r.jsx("td",{children:re.name}),r.jsx("td",{children:re.quantity}),r.jsxs("td",{children:["",re.price.toFixed(2)]}),r.jsxs("td",{children:["",(re.price*re.quantity).toFixed(2)]})]},ce)):r.jsx("tr",{children:r.jsx("td",{colSpan:"4",style:{textAlign:"center"},children:"No items available"})})})]})})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h4",{children:"Bill Summary"}),r.jsx("div",{className:"order-items-table",children:r.jsx("table",{className:"data-table",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"Subtotal"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Me=S.subtotal)==null?void 0:Me.toFixed(2))||"0.00"]})]}),S.tax>0&&r.jsxs("tr",{children:[r.jsx("td",{children:"Tax"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Ee=S.tax)==null?void 0:Ee.toFixed(2))||"0.00"]})]}),S.serviceCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:"Service Charge"}),r.jsxs("td",{style:{textAlign:"right"},children:["",((Be=S.serviceCharge)==null?void 0:Be.toFixed(2))||"0.00"]})]}),r.jsxs("tr",{style:{fontWeight:"bold",backgroundColor:"#f8f9fa"},children:[r.jsx("td",{children:"Grand Total"}),r.jsxs("td",{style:{textAlign:"right",color:"#ff7e47"},children:["",((it=S.totalAmount)==null?void 0:it.toFixed(2))||"0.00"]})]})]})})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:ee,children:"Close"}),r.jsxs("button",{className:"btn btn-print",onClick:()=>me(S),children:[r.jsx(_s,{size:16}),"Print Receipt"]}),r.jsxs("button",{className:"btn btn-outline",onClick:()=>le(S),children:[r.jsx(ld,{size:16}),"Download PDF"]})]})]})}),y&&g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Counter Bills Statistics"}),r.jsx("button",{className:"modal-close",onClick:se,children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"24px"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container orange",children:r.jsx(Nh,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:g.totalBills||0}),r.jsx("p",{children:"Total Bills"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container green",children:r.jsx(mm,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.totalRevenue||0).toFixed(2)]}),r.jsx("p",{children:"Total Revenue"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container blue",children:r.jsx(Jc,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",(g.averageBillValue||0).toFixed(2)]}),r.jsx("p",{children:"Average Bill Value"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"icon-container purple",children:r.jsx(rn,{size:20})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:N==="all"?"All Time":N==="today"?"Today":N==="week"?"Last 7 Days":"Last 30 Days"}),r.jsx("p",{children:"Time Period"})]})]})]})}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn btn-outline",onClick:se,children:"Close"})})]})})]})},tse=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),rse=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(!0),[l,d]=w.useState(""),[u,h]=w.useState(""),[p,m]=w.useState("all"),[g,b]=w.useState("date"),[j,v]=w.useState("desc"),[y,A]=w.useState(1),[E,O]=w.useState(1),S=7,[C,k]=w.useState(null),[I,z]=w.useState(!1);w.useEffect(()=>{B()},[p]),w.useEffect(()=>{M()},[e,u,y,g,j]);const B=async()=>{i(!0),d("");try{const q={};p!=="all"&&(q.orderType=p);const V=await tse.get("/staff-order",{params:q});let U=[];V.data&&V.data.success&&Array.isArray(V.data.data)?U=V.data.data:V.data&&V.data.orders&&Array.isArray(V.data.orders)?U=V.data.orders:Array.isArray(V.data)?U=V.data:V.data&&V.data.message&&V.data.message.includes("routes working")?U=[]:(console.error(" Unexpected response format:",V.data),console.error(" Response keys:",Object.keys(V.data||{})),console.error(" Response type:",typeof V.data),U=[]);const X=U.map(H=>{var Q,le;return{id:H._id,orderId:H.orderId||"",customer:H.isGuestOrder?H.customerName:((Q=H.userId)==null?void 0:Q.name)||"Unknown Staff",customerType:H.isGuestOrder?"Guest":"Staff",customerMobile:H.isGuestOrder?H.customerMobile:((le=H.userId)==null?void 0:le.mobile)||"N/A",date:new Date(H.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),rawDate:new Date(H.createdAt).getTime(),amount:H.grandTotal||0,method:H.paymentMethod||"cash",items:H.items||[],subtotal:H.subtotal||0,tax:H.tax||0,serviceCharge:H.serviceCharge||0,totalAmount:H.totalAmount||0,branchName:H.branchName||"Unknown Branch",tableNumber:H.tableNumber||"N/A",peopleCount:H.peopleCount||1,paymentStatus:H.paymentStatus||"pending",notes:H.notes||"",orderTime:H.orderTime||H.createdAt,isGuestOrder:H.isGuestOrder||!1}});t(X)}catch(q){console.error("Error fetching payments:",q),d("Failed to load payments. Please try again."),t([])}finally{i(!1)}},M=()=>{let q=[...e];if(u.trim()){const Q=u.toLowerCase();q=q.filter(le=>(le.orderId||"").toLowerCase().includes(Q)||(le.customer||"").toLowerCase().includes(Q)||(le.branchName||"").toLowerCase().includes(Q)||(le.tableNumber||"").toLowerCase().includes(Q)||(le.customerMobile||"").toLowerCase().includes(Q))}q.sort((Q,le)=>g==="date"?j==="asc"?Q.rawDate-le.rawDate:le.rawDate-Q.rawDate:g==="amount"?j==="asc"?Q.amount-le.amount:le.amount-Q.amount:0);const V=Math.ceil(q.length/S);O(V||1);const U=(y-1)*S,X=U+S,H=q.slice(U,X);a(H),y>V&&V>0&&A(V)},F=q=>{g===q?v(j==="asc"?"desc":"asc"):(b(q),v("desc"))},N=(q,V)=>{m(V),A(1)},L=q=>{h(q.target.value),A(1)},P=q=>{switch(q){case"card":return r.jsx(Ua,{className:"h-5 w-5"});case"upi":return r.jsx(Ch,{className:"h-5 w-5"});case"cash":return r.jsx("span",{className:"rupees-icon",children:""});case"netbanking":return r.jsx(Ua,{className:"h-5 w-5"});default:return r.jsx(Ua,{className:"h-5 w-5"})}},_=q=>{k(q),z(!0)},R=()=>{z(!1),k(null)},W=q=>{if(q==null)return"";const V=q.toString();return V.includes(",")||V.includes('"')||V.includes(`
`)?`"${V.replace(/"/g,'""')}"`:V},G=()=>{let V=["Order ID","Customer","Customer Type","Mobile","Branch","Table","Date","Subtotal","Tax","Service Charge","Total","Payment Method","Payment Status"].map(W).join(",")+`
`,U=[...e];if(u.trim()){const me=u.toLowerCase();U=U.filter(je=>(je.orderId||"").toLowerCase().includes(me)||(je.customer||"").toLowerCase().includes(me)||(je.branchName||"").toLowerCase().includes(me)||(je.tableNumber||"").toLowerCase().includes(me)||(je.customerMobile||"").toLowerCase().includes(me))}U.forEach(me=>{const je=[me.orderId,me.customer,me.customerType,me.customerMobile,me.branchName,me.tableNumber,me.date,`${me.subtotal.toFixed(2)}`,`${me.tax.toFixed(2)}`,`${me.serviceCharge.toFixed(2)}`,`${me.amount.toFixed(2)}`,me.method.charAt(0).toUpperCase()+me.method.slice(1),me.paymentStatus.charAt(0).toUpperCase()+me.paymentStatus.slice(1)];V+=je.map(W).join(",")+`
`});const X="\uFEFF",H=new Blob([X+V],{type:"text/csv;charset=utf-8;"}),Q=window.URL.createObjectURL(H),le=document.createElement("a");le.setAttribute("hidden",""),le.setAttribute("href",Q),le.setAttribute("download",`all-orders-payments-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(le),le.click(),document.body.removeChild(le)},oe=()=>{const q=[];if(E<=5)for(let U=1;U<=E;U++)q.push(U);else{q.push(1);let U=Math.max(2,y-1),X=Math.min(E-1,y+1);y<=3&&(U=2,X=Math.min(4,E-1)),y>=E-2&&(U=Math.max(2,E-3),X=E-1),U>2&&q.push("...");for(let H=U;H<=X;H++)q.push(H);X<E-1&&q.push("..."),q.push(E)}return q};return r.jsxs("div",{className:"payment-ui",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"All Orders Payment"}),r.jsx("div",{className:"refresh-button",onClick:B,title:"Refresh data",children:r.jsx(ai,{className:`h-5 w-5 ${s?"animate-spin":""}`})})]}),l&&r.jsx("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:r.jsx("span",{children:l})}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{className:"search-icon"}),r.jsx("input",{type:"text",className:"search-input",placeholder:"Search by order ID, customer name, branch, or table",value:u,onChange:L})]}),r.jsxs("div",{className:"filter-buttons",children:[r.jsxs("select",{className:"filter-select",value:p,onChange:q=>N("orderType",q.target.value),children:[r.jsx("option",{value:"all",children:"All Orders"}),r.jsx("option",{value:"staff",children:"Staff Orders"}),r.jsx("option",{value:"guest",children:"Guest Orders"})]}),r.jsxs("button",{className:"filter-btn",onClick:G,children:[r.jsx(Sa,{className:"h-4 w-4"}),r.jsx("span",{children:"Export"})]})]})]}),r.jsx("div",{className:"data-card",children:r.jsx("div",{className:"card-body",children:s?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading payments..."})]}):n.length===0?r.jsx("div",{className:"empty-state",children:r.jsx("p",{children:"No payments found matching your search."})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"pagination-info",children:["Showing ",(y-1)*S+1," to"," ",Math.min(y*S,e.length)," of ",e.length," entries"]}),r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order ID"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Table"}),r.jsx("th",{className:"sortable-header",onClick:()=>F("date"),children:r.jsxs("div",{className:"sort-header",children:[r.jsx("span",{children:"Date"}),g==="date"&&(j==="asc"?r.jsx(Ko,{className:"h-4 w-4"}):r.jsx(Go,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"sortable-header",onClick:()=>F("amount"),children:r.jsxs("div",{className:"sort-header",children:[r.jsx("span",{children:"Amount"}),g==="amount"&&(j==="asc"?r.jsx(Ko,{className:"h-4 w-4"}):r.jsx(Go,{className:"h-4 w-4"}))]})}),r.jsx("th",{children:"Payment Method"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.map(q=>r.jsxs("tr",{children:[r.jsx("td",{children:q.orderId}),r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("div",{children:q.customer}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:q.customerMobile})]})}),r.jsx("td",{children:r.jsx("span",{className:`customer-type-badge ${q.isGuestOrder?"guest":"staff"}`,children:q.customerType})}),r.jsx("td",{children:q.branchName}),r.jsxs("td",{children:["Table ",q.tableNumber]}),r.jsx("td",{children:q.date}),r.jsxs("td",{children:["",q.amount.toFixed(2)]}),r.jsx("td",{children:r.jsxs("div",{className:"payment-method",children:[P(q.method),r.jsx("span",{className:"payment-method-text",children:q.method.charAt(0).toUpperCase()+q.method.slice(1)})]})}),r.jsx("td",{children:r.jsx("div",{className:"action-buttons",children:r.jsx("button",{className:"action-btn view",onClick:()=>_(q),children:"View"})})})]},q.id))})]})]})})}),r.jsxs("div",{className:"pagination-section",children:[r.jsxs("div",{className:"pagination-info",children:["Showing ",(y-1)*S+1," to"," ",Math.min(y*S,e.length)," of ",e.length," entries"]}),r.jsxs("div",{className:"pagination",children:[r.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:y===1,onClick:()=>A(q=>Math.max(q-1,1)),children:[r.jsx(Fd,{className:"h-4 w-4"}),r.jsx("span",{children:"Previous"})]}),r.jsx("div",{className:"pagination-pages",children:oe().map((q,V)=>q==="..."?r.jsx("span",{className:"pagination-ellipsis",children:"..."},V):r.jsx("button",{className:`pagination-page ${y===q?"active":""}`,onClick:()=>A(q),children:q},V))}),r.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:y===E,onClick:()=>A(q=>Math.min(q+1,E)),children:[r.jsx("span",{children:"Next"}),r.jsx(Ld,{className:"h-4 w-4"})]})]})]}),I&&C&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{className:"modal-title",children:[C.customerType," Order Payment Details"]}),r.jsx("button",{className:"modal-close",onClick:R,children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"payment-details",children:[r.jsxs("div",{className:"payment-info-grid",children:[r.jsxs("div",{className:"payment-info-section",children:[r.jsx("h3",{className:"payment-info-title",children:"Payment Information"}),r.jsxs("div",{className:"payment-info-content",children:[r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Order ID:"}),r.jsx("span",{className:"info-value",children:C.orderId})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Date:"}),r.jsx("span",{className:"info-value",children:C.date})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Branch:"}),r.jsx("span",{className:"info-value",children:C.branchName})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Table:"}),r.jsxs("span",{className:"info-value",children:["Table ",C.tableNumber]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Peoples:"}),r.jsx("span",{className:"info-value",children:r.jsxs("div",{className:"people-count",children:[r.jsx(ei,{className:"h-4 w-4"}),C.peopleCount]})})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Subtotal:"}),r.jsxs("span",{className:"info-value",children:["",C.subtotal.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Tax (5%):"}),r.jsxs("span",{className:"info-value",children:["",C.tax.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Service Charge (10%):"}),r.jsxs("span",{className:"info-value",children:["",C.serviceCharge.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Total Amount:"}),r.jsxs("span",{className:"info-value",children:["",C.amount.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Payment Method:"}),r.jsx("span",{className:"info-value",children:r.jsxs("div",{className:"payment-method",children:[P(C.method),r.jsx("span",{className:"payment-method-text",children:C.method.charAt(0).toUpperCase()+C.method.slice(1)})]})})]})]})]}),r.jsxs("div",{className:"payment-info-section",children:[r.jsx("h3",{className:"payment-info-title",children:"Customer Information"}),r.jsxs("div",{className:"payment-info-content",children:[r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Name:"}),r.jsx("span",{className:"info-value",children:C.customer})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Type:"}),r.jsx("span",{className:"info-value",children:r.jsx("span",{className:`customer-type-badge ${C.isGuestOrder?"guest":"staff"}`,children:C.customerType})})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Mobile:"}),r.jsx("span",{className:"info-value",children:C.customerMobile})]}),C.notes&&r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Notes:"}),r.jsx("span",{className:"info-value",children:C.notes})]})]})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h3",{className:"payment-info-title",children:"Order Items"}),r.jsxs("table",{className:"order-items-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:C.items.map((q,V)=>r.jsxs("tr",{children:[r.jsx("td",{children:q.name}),r.jsx("td",{children:q.quantity}),r.jsxs("td",{children:["",q.price.toFixed(2)]}),r.jsxs("td",{children:["",(q.quantity*q.price).toFixed(2)]})]},V))}),r.jsxs("tfoot",{children:[r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Subtotal"}),r.jsxs("td",{className:"total-value",children:["",C.subtotal.toFixed(2)]})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Tax (5%)"}),r.jsxs("td",{className:"total-value",children:["",C.tax.toFixed(2)]})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Service Charge (10%)"}),r.jsxs("td",{className:"total-value",children:["",C.serviceCharge.toFixed(2)]})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Total"}),r.jsxs("td",{className:"total-value",children:["",C.amount.toFixed(2)]})]})]})]})]})]})}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn btn-outline",onClick:R,children:"Close"})})]})}),r.jsx("style",{children:`
        .loading-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
        }

        .loading-spinner {
          border: 4px solid rgba(0, 0, 0, 0.1);
          border-left-color: var(--primary-color);
          border-radius: 50%;
          width: 30px;
          height: 30px;
          animation: spin 1s linear infinite;
          margin-bottom: 10px;
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }

        .page-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .refresh-button {
          cursor: pointer;
          padding: 8px;
          border-radius: 50%;
          transition: background-color 0.2s;
        }

        .refresh-button:hover {
          background-color: rgba(0, 0, 0, 0.05);
        }

        .animate-spin {
          animation: spin 1s linear infinite;
        }

        .pagination-info {
          margin-bottom: 10px;
          font-size: 14px;
          color: #666;
        }

        .sortable-header {
          cursor: pointer;
        }

        .sort-header {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .payment-method {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .payment-method-text {
          font-size: 14px;
        }

        .rupees-icon {
          display: flex;
          align-items: center;
          font-size: 18px;
          line-height: 1;
        }

        .customer-type-badge {
          display: inline-block;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          text-transform: uppercase;
        }

        .customer-type-badge.staff {
          background: rgba(59, 130, 246, 0.1);
          color: #3b82f6;
        }

        .customer-type-badge.guest {
          background: rgba(16, 185, 129, 0.1);
          color: #10b981;
        }

        .people-count {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .filter-select {
          padding: 10px 12px;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          font-size: 14px;
          background: white;
          min-width: 150px;
          outline: none;
          cursor: pointer;
        }

        .filter-select:focus {
          border-color: #3b82f6;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .payment-details {
          padding: 10px 0;
        }

        .payment-info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }

        @media (max-width: 768px) {
          .payment-info-grid {
            grid-template-columns: 1fr;
          }
        }

        .payment-info-section {
          background-color: var(--bg-light);
          border-radius: var(--radius-md);
          overflow: hidden;
        }

        .payment-info-title {
          font-size: 16px;
          font-weight: 600;
          padding: 12px 16px;
          background-color: var(--bg-white);
          border-bottom: 1px solid var(--border-color);
        }

        .payment-info-content {
          padding: 16px;
        }

        .info-row {
          display: flex;
          margin-bottom: 10px;
        }

        .info-label {
          width: 140px;
          font-weight: 500;
          color: var(--text-light);
        }

        .info-value {
          flex: 1;
          font-weight: 500;
        }

        .order-items-section {
          margin-top: 20px;
        }

        .order-items-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }

        .order-items-table th {
          text-align: left;
          padding: 12px;
          background-color: var(--bg-light);
          font-weight: 500;
          color: var(--text-light);
        }

        .order-items-table td {
          padding: 12px;
          border-bottom: 1px solid var(--border-color);
        }

        .order-items-table tfoot td {
          padding: 12px;
          font-weight: 600;
        }

        .total-label {
          text-align: right;
          font-weight: 600;
        }

        .total-value {
          font-weight: 700;
          color: var(--primary-color);
        }

        .pagination-section {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
          margin-top: 24px;
        }

        .pagination-info {
          font-size: 14px;
          color: #666;
          text-align: center;
        }

        .pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 8px;
          flex-wrap: wrap;
        }

        .pagination-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4px;
          padding: 8px 16px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-page {
          padding: 8px 12px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-page.active {
          background-color: var(--primary-color);
          color: white;
          border-color: var(--primary-color);
        }

        .pagination-ellipsis {
          padding: 8px 12px;
          color: var(--text-light);
          display: inline-flex;
          align-items: center;
          justify-content: center;
        }

        .empty-state {
          text-align: center;
          padding: 40px 20px;
          color: #6b7280;
        }
      `})]})},nse=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),ase=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(""),[l,d]=w.useState(1),[u,h]=w.useState(1),[p,m]=w.useState(""),[g,b]=w.useState("date"),[j,v]=w.useState("desc"),[y,A]=w.useState(null),[E,O]=w.useState(!1),S=7;w.useEffect(()=>{(async()=>{a(!0),i("");try{const R={page:l,limit:S};p.trim()&&(R.search=p.trim());const W=await nse.get("/counter-order/orders",{params:R});let G=[];W.data.success&&Array.isArray(W.data.data)?G=W.data.data:W.data.orders&&Array.isArray(W.data.orders)?G=W.data.orders:Array.isArray(W.data)?G=W.data:(console.error(" Unexpected response format:",W.data),G=[]);const oe=G.map(V=>{var U,X,H,Q,le,me;return{id:V.id,orderId:((U=V.invoice)==null?void 0:U.invoiceNumber)||V.id,customer:V.customerName||"Unknown Customer",customerMobile:V.phoneNumber||"N/A",counterUser:((X=V.userId)==null?void 0:X.name)||"Unknown Counter User",counterMobile:((H=V.userId)==null?void 0:H.mobile)||"N/A",date:new Date(V.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),subtotal:V.subtotal||0,tax:V.tax||0,serviceCharge:V.serviceCharge||0,amount:V.grandTotal||V.totalAmount||0,method:V.paymentMethod||"unknown",items:V.items||[],branchName:((Q=V.branch)==null?void 0:Q.name)||"Unknown Branch",branchLocation:((le=V.branch)==null?void 0:le.location)||"Unknown Location",invoiceNumber:((me=V.invoice)==null?void 0:me.invoiceNumber)||"N/A",orderTime:V.createdAt}});t(oe);const q=W.data.count||G.length;h(Math.ceil(q/S))}catch(R){console.error("Error fetching counter payments:",R),i("Failed to load counter payments. Please try again."),t([]),h(1)}finally{a(!1)}})()},[l,p]);const I=[...e.filter(_=>{const R=p.toLowerCase();return(_.orderId||"").toLowerCase().includes(R)||(_.customer||"").toLowerCase().includes(R)||(_.counterUser||"").toLowerCase().includes(R)||(_.branchName||"").toLowerCase().includes(R)||(_.customerMobile||"").toLowerCase().includes(R)})].sort((_,R)=>g==="date"?j==="asc"?new Date(_.date)-new Date(R.date):new Date(R.date)-new Date(_.date):g==="amount"?j==="asc"?_.amount-R.amount:R.amount-_.amount:0).slice(0,S),z=_=>{switch(_){case"card":return r.jsx(Ua,{className:"h-5 w-5"});case"upi":return r.jsx(Ch,{className:"h-5 w-5"});case"cash":return r.jsx("span",{className:"rupees-icon",children:""});case"qr":return r.jsx(Ch,{className:"h-5 w-5"});default:return r.jsx(Ua,{className:"h-5 w-5"})}},B=_=>{A(_),O(!0)},M=()=>{O(!1),A(null)},F=_=>{g===_?v(j==="asc"?"desc":"asc"):(b(_),v("desc"))},N=_=>{if(_==null)return"";const R=_.toString();return R.includes(",")||R.includes('"')||R.includes(`
`)?`"${R.replace(/"/g,'""')}"`:R},L=()=>{let R=["Order ID","Customer Name","Customer Mobile","Counter User","Branch","Date","Subtotal","Tax","Service Charge","Total Amount","Payment Method"].map(N).join(",")+`
`;e.forEach(V=>{const U=[V.orderId,V.customer,V.customerMobile,V.counterUser,V.branchName,V.date,`${V.subtotal.toFixed(2)}`,`${V.tax.toFixed(2)}`,`${V.serviceCharge.toFixed(2)}`,`${V.amount.toFixed(2)}`,V.method.charAt(0).toUpperCase()+V.method.slice(1)];R+=U.map(N).join(",")+`
`});const W="\uFEFF",G=new Blob([W+R],{type:"text/csv;charset=utf-8;"}),oe=window.URL.createObjectURL(G),q=document.createElement("a");q.setAttribute("hidden",""),q.setAttribute("href",oe),q.setAttribute("download",`counter-payments-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(q),q.click(),document.body.removeChild(q)},P=()=>{const _=[];if(u<=7)for(let R=1;R<=u;R++)_.push(R);else{_.push(1);let R=Math.max(2,l-2),W=Math.min(u-1,l+2);l<=4&&(W=5),l>=u-3&&(R=u-4),R>2&&_.push("...");for(let G=R;G<=W;G++)_.push(G);W<u-1&&_.push("..."),u>1&&_.push(u)}return _};return r.jsxs("div",{className:"payment-ui",children:[r.jsx("div",{className:"page-header",children:r.jsx("h1",{children:"Counter Payments"})}),s&&r.jsx("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:r.jsx("span",{children:s})}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{className:"search-icon"}),r.jsx("input",{type:"text",className:"search-input",placeholder:"Search by order ID, customer name, counter user, or branch",value:p,onChange:_=>m(_.target.value)})]}),r.jsx("div",{className:"filter-buttons",children:r.jsxs("button",{className:"filter-btn",onClick:L,children:[r.jsx(Sa,{className:"h-4 w-4"}),r.jsx("span",{children:"Export"})]})})]}),r.jsx("div",{className:"data-card",children:r.jsx("div",{className:"card-body",children:n?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading counter payments..."})]}):I.length===0?r.jsx("div",{className:"empty-state",children:r.jsx("p",{children:"No counter payments found matching your search."})}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Order ID"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Counter User"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{className:"sortable-header",onClick:()=>F("date"),children:r.jsxs("div",{className:"sort-header",children:[r.jsx("span",{children:"Date"}),g==="date"&&(j==="asc"?r.jsx(Ko,{className:"h-4 w-4"}):r.jsx(Go,{className:"h-4 w-4"}))]})}),r.jsx("th",{className:"sortable-header",onClick:()=>F("amount"),children:r.jsxs("div",{className:"sort-header",children:[r.jsx("span",{children:"Amount"}),g==="amount"&&(j==="asc"?r.jsx(Ko,{className:"h-4 w-4"}):r.jsx(Go,{className:"h-4 w-4"}))]})}),r.jsx("th",{children:"Payment Method"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:I.map(_=>r.jsxs("tr",{children:[r.jsx("td",{children:_.orderId}),r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("div",{children:_.customer}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:_.customerMobile})]})}),r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("div",{children:_.counterUser}),r.jsx("div",{style:{fontSize:"12px",color:"#666"},children:_.counterMobile})]})}),r.jsx("td",{children:_.branchName}),r.jsx("td",{children:_.date}),r.jsxs("td",{children:["",_.amount.toFixed(2)]}),r.jsx("td",{children:r.jsxs("div",{className:"payment-method",children:[z(_.method),r.jsx("span",{className:"payment-method-text",children:_.method.charAt(0).toUpperCase()+_.method.slice(1)})]})}),r.jsx("td",{children:r.jsx("div",{className:"action-buttons",children:r.jsx("button",{className:"action-btn view",onClick:()=>B(_),children:"View"})})})]},_.id))})]})})}),r.jsxs("div",{className:"pagination",children:[r.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:l===1,onClick:()=>d(_=>Math.max(_-1,1)),children:[r.jsx(Fd,{className:"h-4 w-4"}),r.jsx("span",{children:"Previous"})]}),r.jsx("div",{className:"pagination-pages",children:P().map((_,R)=>_==="..."?r.jsx("span",{className:"pagination-ellipsis",children:"..."},R):r.jsx("button",{className:`pagination-page ${l===_?"active":""}`,onClick:()=>d(_),children:_},R))}),r.jsxs("button",{className:"pagination-btn flex items-center justify-center gap-1",disabled:l===u,onClick:()=>d(_=>Math.min(_+1,u)),children:[r.jsx("span",{children:"Next"}),r.jsx(Ld,{className:"h-4 w-4"})]})]}),E&&y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{className:"modal-title",children:"Counter Payment Details"}),r.jsx("button",{className:"modal-close",onClick:M,children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"payment-details",children:[r.jsxs("div",{className:"payment-info-grid",children:[r.jsxs("div",{className:"payment-info-section",children:[r.jsx("h3",{className:"payment-info-title",children:"Payment Information"}),r.jsxs("div",{className:"payment-info-content",children:[r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Order ID:"}),r.jsx("span",{className:"info-value",children:y.orderId})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Invoice Number:"}),r.jsx("span",{className:"info-value",children:y.invoiceNumber})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Date:"}),r.jsx("span",{className:"info-value",children:y.date})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Branch:"}),r.jsx("span",{className:"info-value",children:y.branchName})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Subtotal:"}),r.jsxs("span",{className:"info-value",children:["",y.subtotal.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Tax:"}),r.jsxs("span",{className:"info-value",children:["",y.tax.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Service Charge:"}),r.jsxs("span",{className:"info-value",children:["",y.serviceCharge.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Total Amount:"}),r.jsxs("span",{className:"info-value",children:["",y.amount.toFixed(2)]})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Payment Method:"}),r.jsx("span",{className:"info-value",children:r.jsxs("div",{className:"payment-method",children:[z(y.method),r.jsx("span",{className:"payment-method-text",children:y.method.charAt(0).toUpperCase()+y.method.slice(1)})]})})]})]})]}),r.jsxs("div",{className:"payment-info-section",children:[r.jsx("h3",{className:"payment-info-title",children:"Customer & Counter Information"}),r.jsxs("div",{className:"payment-info-content",children:[r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Customer Name:"}),r.jsx("span",{className:"info-value",children:y.customer})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Customer Mobile:"}),r.jsx("span",{className:"info-value",children:y.customerMobile})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Counter User:"}),r.jsx("span",{className:"info-value",children:y.counterUser})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Counter Mobile:"}),r.jsx("span",{className:"info-value",children:y.counterMobile})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("span",{className:"info-label",children:"Branch Location:"}),r.jsx("span",{className:"info-value",children:y.branchLocation})]})]})]})]}),r.jsxs("div",{className:"order-items-section",children:[r.jsx("h3",{className:"payment-info-title",children:"Order Items"}),r.jsxs("table",{className:"order-items-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"})]})}),r.jsx("tbody",{children:y.items.map((_,R)=>r.jsxs("tr",{children:[r.jsx("td",{children:_.name}),r.jsx("td",{children:_.quantity}),r.jsxs("td",{children:["",_.price.toFixed(2)]}),r.jsxs("td",{children:["",(_.quantity*_.price).toFixed(2)]})]},R))}),r.jsxs("tfoot",{children:[r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Subtotal"}),r.jsxs("td",{className:"total-value",children:["",y.subtotal.toFixed(2)]})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Tax"}),r.jsxs("td",{className:"total-value",children:["",y.tax.toFixed(2)]})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Service Charge"}),r.jsxs("td",{className:"total-value",children:["",y.serviceCharge.toFixed(2)]})]}),r.jsxs("tr",{children:[r.jsx("td",{colSpan:"3",className:"total-label",children:"Total"}),r.jsxs("td",{className:"total-value",children:["",y.amount.toFixed(2)]})]})]})]})]})]})}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn btn-outline",onClick:M,children:"Close"})})]})}),r.jsx("style",{children:`
        .loading-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
        }

        .loading-spinner {
          border: 4px solid rgba(0, 0, 0, 0.1);
          border-left-color: var(--primary-color);
          border-radius: 50%;
          width: 30px;
          height: 30px;
          animation: spin 1s linear infinite;
          margin-bottom: 10px;
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }

        .sortable-header {
          cursor: pointer;
        }

        .sort-header {
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .payment-method {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .payment-method-text {
          font-size: 14px;
        }

        .rupees-icon {
          display: flex;
          align-items: center;
          font-size: 18px;
          line-height: 1;
        }

        .payment-details {
          padding: 10px 0;
        }

        .payment-info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }

        @media (max-width: 768px) {
          .payment-info-grid {
            grid-template-columns: 1fr;
          }
        }

        .payment-info-section {
          background-color: var(--bg-light);
          border-radius: var(--radius-md);
          overflow: hidden;
        }

        .payment-info-title {
          font-size: 16px;
          font-weight: 600;
          padding: 12px 16px;
          background-color: var(--bg-white);
          border-bottom: 1px solid var(--border-color);
        }

        .payment-info-content {
          padding: 16px;
        }

        .info-row {
          display: flex;
          margin-bottom: 10px;
        }

        .info-label {
          width: 140px;
          font-weight: 500;
          color: var(--text-light);
        }

        .info-value {
          flex: 1;
          font-weight: 500;
        }

        .order-items-section {
          margin-top: 20px;
        }

        .order-items-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }

        .order-items-table th {
          text-align: left;
          padding: 12px;
          background-color: var(--bg-light);
          font-weight: 500;
          color: var(--text-light);
        }

        .order-items-table td {
          padding: 12px;
          border-bottom: 1px solid var(--border-color);
        }

        .order-items-table tfoot td {
          padding: 12px;
          font-weight: 600;
        }

        .total-label {
          text-align: right;
          font-weight: 600;
        }

        .total-value {
          font-weight: 700;
          color: var(--primary-color);
        }

        .pagination-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4px;
          padding: 8px 16px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .pagination-page {
          padding: 8px 12px;
          border: 1px solid var(--border-color);
          border-radius: var(--radius-md);
          background-color: var(--bg-white);
          cursor: pointer;
        }

        .pagination-page.active {
          background-color: var(--primary-color);
          color: white;
          border-color: var(--primary-color);
        }

        .pagination-ellipsis {
          padding: 8px 12px;
          color: var(--text-light);
          display: inline-flex;
          align-items: center;
          justify-content: center;
        }
      `})]})},sse=()=>{var V;const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState(!1),[u,h]=w.useState(""),[p,m]=w.useState("all"),[g,b]=w.useState(1),[j,v]=w.useState(1),[y,A]=w.useState(!1),[E,O]=w.useState(null),[S,C]=w.useState(1),[k,I]=w.useState(0);w.useEffect(()=>{z()},[g,p,u]);const z=async()=>{try{a(!0);const U=new URLSearchParams({page:g,limit:10,status:p!=="all"?p:"",search:u}),X=await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission?${U}`);if(!X.ok)throw new Error(`HTTP error! status: ${X.status}`);const H=await X.json();H.success&&H.submissions?(t(H.submissions),v(H.totalPages)):H.success&&Array.isArray(H.data)?(t(H.data),v(Math.ceil(H.count/10))):H.message?(console.log(" Server returning placeholder response:",H.message),t([]),v(1)):(t([]),v(1))}catch{}finally{a(!1)}},B=async U=>{try{const H=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${U}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();H.success?(z(),alert("Submission approved successfully!")):alert("Error approving submission: "+H.message)}catch(X){console.error("Error approving submission:",X),alert("Error approving submission")}},M=async U=>{try{const H=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${U}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rejectionReason:"Rejected by admin"})})).json();H.success?(z(),alert("Submission rejected successfully!")):alert("Error rejecting submission: "+H.message)}catch(X){console.error("Error rejecting submission:",X),alert("Error rejecting submission")}},F=U=>{console.log("Selected submission:",U),i(U),d(!0)},N=U=>new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),L=U=>U.charAt(0).toUpperCase()+U.slice(1).replace(/_/g," "),P=U=>U?U.startsWith("http://")||U.startsWith("https://")?U:`https://hotelvirat.com/api/v1/${U}`:null,_=(U,X)=>{O({uri:P(U),type:X}),C(1),I(0),A(!0)},R=()=>{A(!1),O(null),C(1),I(0)},W=()=>{C(U=>Math.min(U+.25,3))},G=()=>{C(U=>Math.max(U-.25,.5))},oe=()=>{I(U=>(U+90)%360)},q=U=>U.qrCodeUri||U.paymentImageUri||U.billImageUri;return r.jsxs("div",{className:"jsx-1985303243",children:[r.jsx("div",{className:"jsx-1985303243 page-header",children:r.jsx("h1",{className:"jsx-1985303243",children:"Product Submissions"})}),r.jsxs("div",{className:"jsx-1985303243 filters-bar",children:[r.jsxs("div",{className:"jsx-1985303243 search-container",children:[r.jsx(Tr,{className:"search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by user phone or submission ID...",value:u,onChange:U=>h(U.target.value),className:"jsx-1985303243 search-input"})]}),r.jsx("div",{className:"jsx-1985303243 filter-buttons",children:r.jsxs("select",{value:p,onChange:U=>m(U.target.value),className:"jsx-1985303243 filter-select",children:[r.jsx("option",{value:"all",className:"jsx-1985303243",children:"All Status"}),r.jsx("option",{value:"submitted",className:"jsx-1985303243",children:"Pending"}),r.jsx("option",{value:"approved",className:"jsx-1985303243",children:"Approved"}),r.jsx("option",{value:"rejected",className:"jsx-1985303243",children:"Rejected"}),r.jsx("option",{value:"qr_uploaded",className:"jsx-1985303243",children:"QR Uploaded"}),r.jsx("option",{value:"payment_uploaded",className:"jsx-1985303243",children:"Payment Uploaded"}),r.jsx("option",{value:"bill_uploaded",className:"jsx-1985303243",children:"Bill Uploaded"}),r.jsx("option",{value:"completed",className:"jsx-1985303243",children:"Completed"})]})})]}),r.jsx("div",{className:"jsx-1985303243 data-card",children:r.jsxs("table",{className:"jsx-1985303243 data-table",children:[r.jsx("thead",{className:"jsx-1985303243",children:r.jsxs("tr",{className:"jsx-1985303243",children:[r.jsx("th",{className:"jsx-1985303243",children:"Submission ID"}),r.jsx("th",{className:"jsx-1985303243",children:"User Phone"}),r.jsx("th",{className:"jsx-1985303243",children:"User Name"}),r.jsx("th",{className:"jsx-1985303243",children:"Products"}),r.jsx("th",{className:"jsx-1985303243",children:"Total Amount"}),r.jsx("th",{className:"jsx-1985303243",children:"Status"}),r.jsx("th",{className:"jsx-1985303243",children:"Date"}),r.jsx("th",{className:"jsx-1985303243",children:"Actions"})]})}),r.jsx("tbody",{className:"jsx-1985303243",children:n?r.jsx("tr",{className:"jsx-1985303243",children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},className:"jsx-1985303243",children:"Loading submissions..."})}):e.length===0?r.jsx("tr",{className:"jsx-1985303243",children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},className:"jsx-1985303243",children:"No submissions found"})}):e.map(U=>{var X;return r.jsxs("tr",{className:"jsx-1985303243",children:[r.jsx("td",{className:"jsx-1985303243",children:U.submissionId}),r.jsx("td",{className:"jsx-1985303243",children:U.userPhone}),r.jsx("td",{className:"jsx-1985303243",children:((X=U.userId)==null?void 0:X.name)||"N/A"}),r.jsxs("td",{className:"jsx-1985303243",children:[U.products.length," items"]}),r.jsxs("td",{className:"jsx-1985303243",children:["",U.totalAmount]}),r.jsx("td",{className:"jsx-1985303243",children:L(U.status)}),r.jsx("td",{className:"jsx-1985303243",children:N(U.createdAt)}),r.jsx("td",{className:"jsx-1985303243",children:r.jsxs("div",{className:"jsx-1985303243 action-buttons",children:[r.jsx("button",{onClick:()=>F(U),className:"jsx-1985303243 action-btn view",children:r.jsx(xs,{size:14})}),U.status==="submitted"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>B(U._id),className:"jsx-1985303243 action-btn edit",children:r.jsx(ca,{size:14})}),r.jsx("button",{onClick:()=>M(U._id),className:"jsx-1985303243 action-btn delete",children:r.jsx(On,{size:14})})]})]})})]},U._id)})})]})}),j>1&&r.jsxs("div",{className:"jsx-1985303243 pagination",children:[r.jsx("button",{disabled:g===1,onClick:()=>b(g-1),className:"jsx-1985303243 pagination-btn",children:"Previous"}),r.jsx("div",{className:"jsx-1985303243 pagination-pages",children:Array.from({length:j},(U,X)=>X+1).map(U=>r.jsx("button",{onClick:()=>b(U),className:`jsx-1985303243 pagination-page ${g===U?"active":""}`,children:U},U))}),r.jsx("button",{disabled:g===j,onClick:()=>b(g+1),className:"jsx-1985303243 pagination-btn",children:"Next"})]}),l&&s&&r.jsx("div",{onClick:()=>d(!1),className:"jsx-1985303243 modal-overlay",children:r.jsxs("div",{onClick:U=>U.stopPropagation(),className:"jsx-1985303243 modal large-modal",children:[r.jsxs("div",{className:"jsx-1985303243 modal-header",children:[r.jsxs("h3",{className:"jsx-1985303243",children:["Submission Details - ",s.submissionId]}),r.jsx("button",{onClick:()=>d(!1),className:"jsx-1985303243 modal-close",children:""})]}),r.jsxs("div",{className:"jsx-1985303243 modal-body",children:[r.jsxs("div",{className:"jsx-1985303243 submission-info-grid",children:[r.jsxs("div",{className:"jsx-1985303243 info-card",children:[r.jsx("h4",{className:"jsx-1985303243",children:"Basic Information"}),r.jsxs("div",{className:"jsx-1985303243 order-details",children:[r.jsxs("div",{className:"jsx-1985303243 order-detail-row",children:[r.jsx("span",{className:"jsx-1985303243 order-detail-label",children:"Submission ID:"}),r.jsx("span",{className:"jsx-1985303243 order-detail-value",children:s.submissionId})]}),r.jsxs("div",{className:"jsx-1985303243 order-detail-row",children:[r.jsx("span",{className:"jsx-1985303243 order-detail-label",children:"User Phone:"}),r.jsx("span",{className:"jsx-1985303243 order-detail-value",children:s.userPhone})]}),r.jsxs("div",{className:"jsx-1985303243 order-detail-row",children:[r.jsx("span",{className:"jsx-1985303243 order-detail-label",children:"User Name:"}),r.jsx("span",{className:"jsx-1985303243 order-detail-value",children:((V=s.userId)==null?void 0:V.name)||"N/A"})]}),r.jsxs("div",{className:"jsx-1985303243 order-detail-row",children:[r.jsx("span",{className:"jsx-1985303243 order-detail-label",children:"Status:"}),r.jsx("span",{className:"jsx-1985303243",children:L(s.status)})]}),r.jsxs("div",{className:"jsx-1985303243 order-detail-row",children:[r.jsx("span",{className:"jsx-1985303243 order-detail-label",children:"Total Amount:"}),r.jsxs("span",{className:"jsx-1985303243 order-detail-value amount",children:["",s.totalAmount]})]}),r.jsxs("div",{className:"jsx-1985303243 order-detail-row",children:[r.jsx("span",{className:"jsx-1985303243 order-detail-label",children:"Date:"}),r.jsx("span",{className:"jsx-1985303243 order-detail-value",children:N(s.createdAt)})]})]})]}),r.jsxs("div",{className:"jsx-1985303243 info-card",children:[r.jsxs("h4",{className:"jsx-1985303243",children:["Products (",s.products.length," items)"]}),r.jsx("div",{className:"jsx-1985303243 products-list",children:s.products.map((U,X)=>r.jsxs("div",{className:"jsx-1985303243 product-item",children:[r.jsx("div",{className:"jsx-1985303243 product-name",children:U.name}),r.jsxs("div",{className:"jsx-1985303243 product-details",children:[r.jsxs("span",{className:"jsx-1985303243",children:["",U.price,"  ",U.quantity," ",U.unit]}),r.jsxs("span",{className:"jsx-1985303243 product-total",children:["",(U.price*U.quantity).toFixed(2)]})]})]},X))})]})]}),q(s)&&r.jsxs("div",{className:"jsx-1985303243 images-section",children:[r.jsx("h4",{className:"jsx-1985303243",children:"Uploaded Images"}),r.jsxs("div",{className:"jsx-1985303243 images-grid",children:[s.qrCodeUri&&r.jsxs("div",{className:"jsx-1985303243 image-item",children:[r.jsx("div",{className:"jsx-1985303243 image-header",children:r.jsx("h5",{className:"jsx-1985303243",children:"QR Code"})}),r.jsxs("div",{className:"jsx-1985303243 image-container",children:[r.jsx("img",{src:P(s.qrCodeUri)||"/placeholder.svg",alt:"QR Code",onClick:()=>_(s.qrCodeUri,"QR Code"),className:"jsx-1985303243 modal-image"}),r.jsx("div",{className:"jsx-1985303243 image-overlay",children:r.jsx("button",{onClick:()=>_(s.qrCodeUri,"QR Code"),className:"jsx-1985303243 view-full-btn",children:"View Full Size"})})]})]}),s.paymentImageUri&&r.jsxs("div",{className:"jsx-1985303243 image-item",children:[r.jsx("div",{className:"jsx-1985303243 image-header",children:r.jsx("h5",{className:"jsx-1985303243",children:"Payment Confirmation"})}),r.jsxs("div",{className:"jsx-1985303243 image-container",children:[r.jsx("img",{src:P(s.paymentImageUri)||"/placeholder.svg",alt:"Payment",onClick:()=>_(s.paymentImageUri,"Payment Confirmation"),className:"jsx-1985303243 modal-image"}),r.jsx("div",{className:"jsx-1985303243 image-overlay",children:r.jsx("button",{onClick:()=>_(s.paymentImageUri,"Payment Confirmation"),className:"jsx-1985303243 view-full-btn",children:"View Full Size"})})]}),s.paymentUploadedAt&&r.jsxs("div",{className:"jsx-1985303243 image-date",children:["Uploaded: ",N(s.paymentUploadedAt)]})]}),s.billImageUri&&r.jsxs("div",{className:"jsx-1985303243 image-item",children:[r.jsx("div",{className:"jsx-1985303243 image-header",children:r.jsx("h5",{className:"jsx-1985303243",children:"Bill Image"})}),r.jsxs("div",{className:"jsx-1985303243 image-container",children:[r.jsx("img",{src:P(s.billImageUri)||"/placeholder.svg",alt:"Bill",onClick:()=>_(s.billImageUri,"Bill Image"),onError:U=>{console.log("Bill image failed to load:",s.billImageUri),U.target.style.display="none"},className:"jsx-1985303243 modal-image"}),r.jsx("div",{className:"jsx-1985303243 image-overlay",children:r.jsx("button",{onClick:()=>_(s.billImageUri,"Bill Image"),className:"jsx-1985303243 view-full-btn",children:"View Full Size"})})]}),s.billUploadedAt&&r.jsxs("div",{className:"jsx-1985303243 image-date",children:["Uploaded: ",N(s.billUploadedAt)]})]})]})]})]}),r.jsxs("div",{className:"jsx-1985303243 modal-footer",children:[s.status==="submitted"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{B(s._id),d(!1)},className:"jsx-1985303243 btn btn-primary",children:[r.jsx(ca,{size:16}),"Approve"]}),r.jsxs("button",{onClick:()=>{M(s._id),d(!1)},className:"jsx-1985303243 btn btn-outline",children:[r.jsx(On,{size:16}),"Reject"]})]}),r.jsx("button",{onClick:()=>d(!1),className:"jsx-1985303243 btn btn-outline",children:"Close"})]})]})}),y&&E&&r.jsx("div",{onClick:R,className:"jsx-1985303243 image-viewer-overlay",children:r.jsxs("div",{onClick:U=>U.stopPropagation(),className:"jsx-1985303243 image-viewer-modal",children:[r.jsxs("div",{className:"jsx-1985303243 image-viewer-header",children:[r.jsx("h3",{className:"jsx-1985303243",children:E.type}),r.jsxs("div",{className:"jsx-1985303243 image-viewer-controls",children:[r.jsx("button",{onClick:G,title:"Zoom Out",className:"jsx-1985303243 control-btn",children:r.jsx(z7,{size:20})}),r.jsxs("span",{className:"jsx-1985303243 zoom-level",children:[Math.round(S*100),"%"]}),r.jsx("button",{onClick:W,title:"Zoom In",className:"jsx-1985303243 control-btn",children:r.jsx(L7,{size:20})}),r.jsx("button",{onClick:oe,title:"Rotate",className:"jsx-1985303243 control-btn",children:r.jsx(d7,{size:20})}),r.jsx("button",{onClick:R,className:"jsx-1985303243 control-btn close-btn",children:""})]})]}),r.jsx("div",{className:"jsx-1985303243 image-viewer-content",children:r.jsx("img",{src:E.uri||"/placeholder.svg",alt:E.type,style:{transform:`scale(${S}) rotate(${k}deg)`,transition:"transform 0.3s ease"},onError:U=>{console.error("Image failed to load:",E.uri),U.target.src="/placeholder.svg?height=400&width=400"},className:"jsx-1985303243 viewer-image"})})]})}),r.jsx(Pl,{id:"1985303243",children:[".large-modal.jsx-1985303243{width:90%;max-width:1200px;max-height:90vh;overflow-y:auto;}",".submission-info-grid.jsx-1985303243{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px;}",".info-card.jsx-1985303243{background:#f8f9fa;padding:20px;border-radius:8px;border:1px solid #e9ecef;}",".info-card.jsx-1985303243 h4.jsx-1985303243{margin:0 0 15px 0;color:#333;font-size:16px;font-weight:600;border-bottom:2px solid #007bff;padding-bottom:8px;}",".products-list.jsx-1985303243{max-height:200px;overflow-y:auto;}",".product-item.jsx-1985303243{padding:10px 0;border-bottom:1px solid #e9ecef;}",".product-item.jsx-1985303243:last-child{border-bottom:none;}",".product-name.jsx-1985303243{font-weight:600;color:#333;margin-bottom:4px;}",".product-details.jsx-1985303243{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;font-size:14px;color:#666;}",".product-total.jsx-1985303243{font-weight:600;color:#28a745;}",".amount.jsx-1985303243{font-weight:700;color:#28a745;font-size:18px;}",".images-section.jsx-1985303243{margin-top:30px;padding-top:20px;border-top:2px solid #e9ecef;}",".images-section.jsx-1985303243 h4.jsx-1985303243{margin:0 0 20px 0;color:#333;font-size:18px;font-weight:600;}",".images-grid.jsx-1985303243{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px;}",".image-item.jsx-1985303243{background:white;border:1px solid #e9ecef;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);-webkit-transition:-webkit-transform 0.2s,box-shadow 0.2s;-webkit-transition:transform 0.2s,box-shadow 0.2s;transition:transform 0.2s,box-shadow 0.2s;}",".image-item.jsx-1985303243:hover{-webkit-transform:translateY(-2px);-ms-transform:translateY(-2px);transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,0.15);}",".image-header.jsx-1985303243{padding:15px;background:#f8f9fa;border-bottom:1px solid #e9ecef;}",".image-header.jsx-1985303243 h5.jsx-1985303243{margin:0;color:#333;font-weight:600;font-size:16px;}",".image-container.jsx-1985303243{position:relative;height:250px;overflow:hidden;}",".modal-image.jsx-1985303243{width:100%;height:100%;object-fit:cover;cursor:pointer;-webkit-transition:-webkit-transform 0.3s;-webkit-transition:transform 0.3s;transition:transform 0.3s;}",".image-overlay.jsx-1985303243{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;opacity:0;-webkit-transition:opacity 0.3s;transition:opacity 0.3s;}",".image-container.jsx-1985303243:hover .image-overlay.jsx-1985303243{opacity:1;}",".image-container.jsx-1985303243:hover .modal-image.jsx-1985303243{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);}",".view-full-btn.jsx-1985303243{background:#007bff;color:white;border:none;padding:10px 20px;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;-webkit-transition:background 0.2s;transition:background 0.2s;}",".view-full-btn.jsx-1985303243:hover{background:#0056b3;}",".image-date.jsx-1985303243{padding:10px 15px;font-size:12px;color:#666;background:#f8f9fa;border-top:1px solid #e9ecef;}",".image-viewer-overlay.jsx-1985303243{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:10000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".image-viewer-modal.jsx-1985303243{width:95%;height:95%;background:white;border-radius:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;}",".image-viewer-header.jsx-1985303243{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:15px 20px;background:#f8f9fa;border-bottom:1px solid #e9ecef;}",".image-viewer-header.jsx-1985303243 h3.jsx-1985303243{margin:0;color:#333;font-size:18px;font-weight:600;}",".image-viewer-controls.jsx-1985303243{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;}",".control-btn.jsx-1985303243{background:#007bff;color:white;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:14px;-webkit-transition:background 0.2s;transition:background 0.2s;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:5px;}",".control-btn.jsx-1985303243:hover{background:#0056b3;}",".close-btn.jsx-1985303243{background:#dc3545;font-size:20px;font-weight:bold;padding:8px 12px;}",".close-btn.jsx-1985303243:hover{background:#c82333;}",".zoom-level.jsx-1985303243{color:#666;font-size:14px;font-weight:600;min-width:50px;text-align:center;}",".image-viewer-content.jsx-1985303243{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;overflow:hidden;background:#f8f9fa;}",".viewer-image.jsx-1985303243{max-width:100%;max-height:100%;object-fit:contain;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;}",".viewer-image.jsx-1985303243:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing;}","@media (max-width:768px){.large-modal.jsx-1985303243{width:95%;margin:20px auto;}.submission-info-grid.jsx-1985303243{grid-template-columns:1fr;}.images-grid.jsx-1985303243{grid-template-columns:1fr;}.image-viewer-controls.jsx-1985303243{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:5px;}.control-btn.jsx-1985303243{padding:6px 10px;font-size:12px;}}"]})]})},ise=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState(!1),[u,h]=w.useState(""),[p,m]=w.useState(1),[g,b]=w.useState(1),[j,v]=w.useState(null),[y,A]=w.useState(null);w.useEffect(()=>{E()},[p,u]);const E=async()=>{try{a(!0);const B=new URLSearchParams({page:p,limit:10,search:u,status:"qr_uploaded"}),M=await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission?${B}`);if(!M.ok)throw new Error(`HTTP error! status: ${M.status}`);const F=await M.json();if(F.success){let N=[];Array.isArray(F.data)?N=F.data:Array.isArray(F.submissions)&&(N=F.submissions),t(N),b(F.totalPages||1)}else console.error("API returned error:",F.message),t([])}catch(B){console.error("Error fetching QR uploads:",B),t([]),b(1)}finally{a(!1)}},O=async(B,M,F)=>{try{A(F);const N=await fetch(B);if(!N.ok)throw new Error("Failed to fetch image");const L=await N.blob(),P=window.URL.createObjectURL(L),_=document.createElement("a");_.href=P,_.download=M,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(P)}catch(N){console.error("Error downloading image:",N),alert("Error downloading image. Please try again.")}finally{A(null)}},S=async(B,M)=>{try{v(B);const F=new FormData;F.append("paymentImage",M);const L=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${B}/upload-payment-image`,{method:"POST",body:F})).json();L.success?(E(),alert("Payment Successful! Payment image uploaded successfully!")):alert("Error uploading image: "+L.message)}catch(F){console.error("Error uploading image:",F),alert("Error uploading image")}finally{v(null)}},C=async B=>{try{const F=await(await fetch(`https://hotelvirat.com/api/v1/hotel/product-submission/${B}/complete`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();F.success?(E(),alert("Order marked as completed!")):alert("Error completing order: "+F.message)}catch(M){console.error("Error completing order:",M),alert("Error completing order")}},k=B=>{i(B),d(!0)},I=B=>new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),z=B=>B.paymentStatus==="successful"&&B.paymentImageUri?r.jsxs("span",{className:"payment-success-badge",children:[r.jsx(od,{size:16}),"Payment Successful"]}):r.jsx("span",{className:"payment-pending-badge",children:"Payment Pending"});return r.jsxs("div",{className:"jsx-3094323086",children:[r.jsx("div",{className:"jsx-3094323086 page-header",children:r.jsx("h1",{className:"jsx-3094323086",children:"QR Code Uploads"})}),r.jsx("div",{className:"jsx-3094323086 filters-bar",children:r.jsxs("div",{className:"jsx-3094323086 search-container",children:[r.jsx(Tr,{className:"search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by user phone or submission ID...",value:u,onChange:B=>h(B.target.value),className:"jsx-3094323086 search-input"})]})}),r.jsx("div",{className:"jsx-3094323086 data-card",children:r.jsxs("table",{className:"jsx-3094323086 data-table",children:[r.jsx("thead",{className:"jsx-3094323086",children:r.jsxs("tr",{className:"jsx-3094323086",children:[r.jsx("th",{className:"jsx-3094323086",children:"Submission ID"}),r.jsx("th",{className:"jsx-3094323086",children:"User Phone"}),r.jsx("th",{className:"jsx-3094323086",children:"User Name"}),r.jsx("th",{className:"jsx-3094323086",children:"Total Amount"}),r.jsx("th",{className:"jsx-3094323086",children:"QR Upload Date"}),r.jsx("th",{className:"jsx-3094323086",children:"QR Image"}),r.jsx("th",{className:"jsx-3094323086",children:"Payment Status"}),r.jsx("th",{className:"jsx-3094323086",children:"Actions"})]})}),r.jsx("tbody",{className:"jsx-3094323086",children:n?r.jsx("tr",{className:"jsx-3094323086",children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},className:"jsx-3094323086",children:"Loading QR uploads..."})}):e.length===0?r.jsx("tr",{className:"jsx-3094323086",children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"20px"},className:"jsx-3094323086",children:"No QR uploads found"})}):e.map(B=>{var M;return r.jsxs("tr",{className:"jsx-3094323086",children:[r.jsx("td",{className:"jsx-3094323086",children:B.submissionId}),r.jsx("td",{className:"jsx-3094323086",children:B.userPhone}),r.jsx("td",{className:"jsx-3094323086",children:((M=B.userId)==null?void 0:M.name)||"N/A"}),r.jsxs("td",{className:"jsx-3094323086",children:["",B.totalAmount]}),r.jsx("td",{className:"jsx-3094323086",children:I(B.updatedAt)}),r.jsx("td",{className:"jsx-3094323086",children:B.qrCodeUri?r.jsx("img",{src:`${B.qrCodeUri}`,alt:"QR Code",style:{cursor:"pointer",maxWidth:"50px",maxHeight:"50px"},onClick:()=>window.open(`${B.qrCodeUri}`,"_blank"),className:"jsx-3094323086 thumbnail-image"}):r.jsx("div",{className:"jsx-3094323086 image-placeholder",children:"No QR"})}),r.jsx("td",{className:"jsx-3094323086",children:z(B)}),r.jsx("td",{className:"jsx-3094323086",children:r.jsxs("div",{className:"jsx-3094323086 action-buttons",children:[r.jsx("button",{onClick:()=>k(B),className:"jsx-3094323086 action-btn view",children:r.jsx(xs,{size:14})}),!B.paymentImageUri&&r.jsxs("label",{style:{cursor:"pointer"},className:"jsx-3094323086 action-btn edit",children:[r.jsx(qi,{size:14}),r.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:F=>{F.target.files[0]&&S(B._id,F.target.files[0])},disabled:j===B._id,className:"jsx-3094323086"})]}),B.paymentImageUri&&B.status!=="completed"&&r.jsx("button",{onClick:()=>C(B._id),className:"jsx-3094323086 action-btn view",children:r.jsx(ca,{size:14})})]})})]},B._id)})})]})}),g>1&&r.jsxs("div",{className:"jsx-3094323086 pagination",children:[r.jsx("button",{disabled:p===1,onClick:()=>m(p-1),className:"jsx-3094323086 pagination-btn",children:"Previous"}),r.jsx("div",{className:"jsx-3094323086 pagination-pages",children:Array.from({length:g},(B,M)=>M+1).map(B=>r.jsx("button",{onClick:()=>m(B),className:`jsx-3094323086 pagination-page ${p===B?"active":""}`,children:B},B))}),r.jsx("button",{disabled:p===g,onClick:()=>m(p+1),className:"jsx-3094323086 pagination-btn",children:"Next"})]}),l&&s&&r.jsx("div",{onClick:()=>d(!1),className:"jsx-3094323086 modal-overlay",children:r.jsxs("div",{onClick:B=>B.stopPropagation(),className:"jsx-3094323086 modal",children:[r.jsxs("div",{className:"jsx-3094323086 modal-header",children:[r.jsx("h3",{className:"jsx-3094323086",children:"QR Upload Details"}),r.jsx("button",{onClick:()=>d(!1),className:"jsx-3094323086 modal-close",children:""})]}),r.jsxs("div",{className:"jsx-3094323086 modal-body",children:[r.jsxs("div",{className:"jsx-3094323086 order-details",children:[r.jsxs("div",{className:"jsx-3094323086 order-detail-row",children:[r.jsx("span",{className:"jsx-3094323086 order-detail-label",children:"Submission ID:"}),r.jsxs("span",{className:"jsx-3094323086 order-detail-value",children:["#",s.submissionId]})]}),r.jsxs("div",{className:"jsx-3094323086 order-detail-row",children:[r.jsx("span",{className:"jsx-3094323086 order-detail-label",children:"User Phone:"}),r.jsx("span",{className:"jsx-3094323086 order-detail-value",children:s.userPhone})]}),r.jsxs("div",{className:"jsx-3094323086 order-detail-row",children:[r.jsx("span",{className:"jsx-3094323086 order-detail-label",children:"Total Amount:"}),r.jsxs("span",{className:"jsx-3094323086 order-detail-value",children:["",s.totalAmount]})]}),r.jsxs("div",{className:"jsx-3094323086 order-detail-row",children:[r.jsx("span",{className:"jsx-3094323086 order-detail-label",children:"QR Upload Date:"}),r.jsx("span",{className:"jsx-3094323086 order-detail-value",children:I(s.updatedAt)})]}),r.jsxs("div",{className:"jsx-3094323086 order-detail-row",children:[r.jsx("span",{className:"jsx-3094323086 order-detail-label",children:"Payment Status:"}),r.jsx("span",{className:"jsx-3094323086 order-detail-value",children:z(s)})]})]}),s.qrCodeUri&&r.jsxs("div",{style:{marginTop:"20px"},className:"jsx-3094323086",children:[r.jsx("div",{className:"jsx-3094323086 modal-image-header",children:r.jsx("h4",{className:"jsx-3094323086",children:"QR Code Image"})}),r.jsx("img",{src:`${s.qrCodeUri}`,alt:"QR Code",style:{maxWidth:"100%",height:"auto",borderRadius:"8px"},className:"jsx-3094323086"})]}),s.paymentImageUri&&r.jsxs("div",{style:{marginTop:"20px"},className:"jsx-3094323086",children:[r.jsxs("div",{className:"jsx-3094323086 modal-image-header",children:[r.jsx("h4",{className:"jsx-3094323086",children:"Payment Image"}),r.jsx("button",{onClick:()=>O(`https://hotelvirat.com/api/v1/${s.paymentImageUri}`,`Payment_${s.submissionId}.jpg`,`modal_payment_${s._id}`),disabled:y===`modal_payment_${s._id}`,className:"jsx-3094323086 download-btn-large",children:y===`modal_payment_${s._id}`?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"jsx-3094323086 spinner"}),"Downloading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Sa,{size:16}),"Download Payment"]})})]}),r.jsx("img",{src:`${s.paymentImageUri}`,alt:"Payment",style:{maxWidth:"100%",height:"auto",borderRadius:"8px"},className:"jsx-3094323086"}),r.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#d4edda",borderRadius:"5px",color:"#155724"},className:"jsx-3094323086",children:[r.jsx(od,{size:16,style:{marginRight:"8px"}}),"Payment Successful - Image uploaded on"," ",I(s.paymentUploadedAt||s.updatedAt)]})]}),r.jsxs("div",{className:"jsx-3094323086 order-items-section",children:[r.jsx("h4",{className:"jsx-3094323086",children:"Products"}),r.jsxs("table",{className:"jsx-3094323086 data-table",children:[r.jsx("thead",{className:"jsx-3094323086",children:r.jsxs("tr",{className:"jsx-3094323086",children:[r.jsx("th",{className:"jsx-3094323086",children:"Product Name"}),r.jsx("th",{className:"jsx-3094323086",children:"Price"}),r.jsx("th",{className:"jsx-3094323086",children:"Quantity"}),r.jsx("th",{className:"jsx-3094323086",children:"Unit"}),r.jsx("th",{className:"jsx-3094323086",children:"Total"})]})}),r.jsx("tbody",{className:"jsx-3094323086",children:s.products.map((B,M)=>r.jsxs("tr",{className:"jsx-3094323086",children:[r.jsx("td",{className:"jsx-3094323086",children:B.name}),r.jsxs("td",{className:"jsx-3094323086",children:["",B.price]}),r.jsx("td",{className:"jsx-3094323086",children:B.quantity}),r.jsx("td",{className:"jsx-3094323086",children:B.unit}),r.jsxs("td",{className:"jsx-3094323086",children:["",(B.price*B.quantity).toFixed(2)]})]},M))})]})]})]}),r.jsxs("div",{className:"jsx-3094323086 modal-footer",children:[!s.paymentImageUri&&r.jsxs("label",{style:{cursor:"pointer"},className:"jsx-3094323086 btn btn-primary",children:[r.jsx(qi,{size:16}),"Upload Payment Image",r.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:B=>{B.target.files[0]&&(S(s._id,B.target.files[0]),d(!1))},className:"jsx-3094323086"})]}),s.paymentImageUri&&s.status!=="completed"&&r.jsxs("button",{onClick:()=>{C(s._id),d(!1)},className:"jsx-3094323086 btn btn-primary",children:[r.jsx(ca,{size:16}),"Mark as Completed"]}),r.jsx("button",{onClick:()=>d(!1),className:"jsx-3094323086 btn btn-outline",children:"Close"})]})]})}),r.jsx(Pl,{id:"3094323086",children:[".payment-success-badge.jsx-3094323086{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:4px;background-color:#d4edda;color:#155724;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600;}",".payment-pending-badge.jsx-3094323086{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff3cd;color:#856404;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600;}",".thumbnail-image.jsx-3094323086{border-radius:4px;border:1px solid #ddd;}",".image-placeholder.jsx-3094323086{padding:8px;background-color:#f8f9fa;border-radius:4px;text-align:center;font-size:12px;color:#6c757d;}",".download-btn-large.jsx-3094323086{background:#ff8c00;color:white;border:none;border-radius:6px;padding:8px 12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:6px;cursor:pointer;font-size:14px;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;margin-bottom:10px;}",".download-btn-large.jsx-3094323086:hover.jsx-3094323086:not(:disabled){background:#e67e00;}",".download-btn-large.jsx-3094323086:disabled{background:#6c757d;cursor:not-allowed;}",".modal-image-header.jsx-3094323086{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px;}",".modal-image-header.jsx-3094323086 h4.jsx-3094323086{margin:0;}",".spinner.jsx-3094323086{width:12px;height:12px;border:2px solid #ffffff;border-top:2px solid transparent;border-radius:50%;-webkit-animation:spin-jsx-3094323086 1s linear infinite;animation:spin-jsx-3094323086 1s linear infinite;}","@-webkit-keyframes spin-jsx-3094323086{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes spin-jsx-3094323086{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]})]})},ose=({user:e,onClose:t,onSave:n,isEditMode:a})=>{const[s,i]=w.useState({name:(e==null?void 0:e.name)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||""}),[l,d]=w.useState(null),[u,h]=w.useState(!1),p=g=>{const{name:b,value:j}=g.target;i({...s,[b]:j}),d(null)},m=async g=>{g.preventDefault(),d(null),h(!0);try{await n(s,e==null?void 0:e.phoneNumber),t()}catch(b){d(b.message||"Failed to save purchase user")}finally{h(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:a?"Edit Purchase User":"Add New Purchase User"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:m,children:[r.jsxs("div",{className:"modal-body",children:[l&&r.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626"},children:l}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:s.name,onChange:p,required:!0,disabled:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"phoneNumber",children:["Phone Number ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"phoneNumber",name:"phoneNumber",className:"form-input",value:s.phoneNumber,onChange:p,required:!0,pattern:"\\d{10}",title:"Please enter a valid 10-digit phone number",disabled:u})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:u,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"Saving...":a?"Update Purchase User":"Add Purchase User"})]})]})]})})},lse=({user:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),i=async()=>{s(!0);try{await n(e.phoneNumber),t()}catch(l){console.error("Error deleting purchase user:",l)}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Purchase User"}),r.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:i,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},cse=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(""),[s,i]=w.useState(!1),[l,d]=w.useState(null),[u,h]=w.useState(!1),[p,m]=w.useState(null),[g,b]=w.useState(""),[j,v]=w.useState(""),[y,A]=w.useState(!1),E="https://hotelvirat.com/api/v1/hotel/purchase-user-auth",O=async()=>{A(!0),v("");try{const F=await fetch(`${E}/all`);if(!F.ok)throw new Error(`HTTP error! status: ${F.status}`);const N=await F.json();let L=[];if(N&&N.success&&Array.isArray(N.data))L=N.data;else if(N&&N.success&&Array.isArray(N.users))L=N.users;else if(Array.isArray(N))L=N;else if(N&&N.message&&N.message.includes("routes working"))console.log(" Server returning placeholder response:",N.message),L=[];else{console.error("Expected array but got:",N),t([]),v("Invalid data format received from server");return}t(L)}catch(F){console.error("Fetch error:",F),v(`Failed to fetch purchase users: ${F.message}`),t([])}finally{A(!1)}};w.useEffect(()=>{O()},[]);const S=()=>{d(null),i(!0)},C=F=>{d(F),i(!0)},k=F=>{m(F),h(!0)},I=async(F,N)=>{try{const L=N?`${E}/${N}`:`${E}/register`,P=N?"PUT":"POST",_=N?{name:F.name,...F.phoneNumber!==N&&{newPhoneNumber:F.phoneNumber}}:F,R=await fetch(L,{method:P,headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}),W=await R.json();if(!R.ok)throw new Error(W.message||"Failed to save purchase user");b(`Purchase user ${N?"updated":"added"} successfully`),setTimeout(()=>b(""),3e3),await O()}catch(L){throw new Error(L.message)}},z=async F=>{try{const N=await fetch(`${E}/${F}`,{method:"DELETE"}),L=await N.json();if(!N.ok)throw new Error(L.message||"Failed to delete purchase user");b("Purchase user deleted successfully"),setTimeout(()=>b(""),3e3),await O()}catch(N){v(N.message),setTimeout(()=>v(""),3e3)}},B=F=>{if(!F)return"N/A";const N={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(F).toLocaleDateString(void 0,N)},M=e.filter(F=>F.name.toLowerCase().includes(n.toLowerCase())||F.phoneNumber.includes(n));return r.jsxs("div",{className:"purchase-users-page",children:[g&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:g}),r.jsx("button",{onClick:()=>b(""),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),j&&r.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>v(""),style:{color:"#dc2626"},children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M18 6 6 18"}),r.jsx("path",{d:"m6 6 12 12"})]})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Purchase Users"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:S,disabled:y,children:[r.jsx($d,{size:16}),r.jsx("span",{children:"Add Purchase User"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search purchase users...",className:"search-input",value:n,onChange:F=>a(F.target.value)})]})}),r.jsx("div",{className:"data-card",children:y?r.jsx("div",{className:"empty-state",children:"Loading purchase users..."}):M.length===0?r.jsx("div",{className:"empty-state",children:r.jsxs("p",{children:["No purchase users found. ",n?"Try a different search.":"Add a new purchase user to get started."]})}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"ID"}),r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Phone Number"}),r.jsx("th",{children:"Created At"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:M.map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:F._id.slice(-6)}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("div",{className:"user-avatar-placeholder",children:F.name.charAt(0).toUpperCase()}),F.name]})}),r.jsx("td",{children:r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ia,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),F.phoneNumber]})}),r.jsx("td",{children:B(F.createdAt)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>C(F),disabled:y,children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>k(F),disabled:y,children:r.jsx(Yn,{size:14})})]})})]},F._id))})]})}),s&&r.jsx(ose,{user:l,onClose:()=>i(!1),onSave:I,isEditMode:!!l}),u&&r.jsx(lse,{user:p,onClose:()=>h(!1),onConfirm:z})]})},Q6=(e,t=200)=>`https://api.qrserver.com/v1/create-qr-code/?size=${t}x${t}&data=${encodeURIComponent(e)}`,xw={baseURL:"https://hotelvirat.com/api/v1/hotel",get:async e=>{try{const t=await fetch(`${xw.baseURL}${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error(`API Error for ${e}:`,t),t}}},LS="qr_table_codes",dse=e=>{try{localStorage.setItem(LS,JSON.stringify({codes:e,timestamp:Date.now()}))}catch(t){console.error("Error saving QR codes to localStorage:",t)}},use=()=>{try{const e=localStorage.getItem(LS);if(e){const t=JSON.parse(e);if(Date.now()-t.timestamp<24*60*60*1e3&&t.codes)return t.codes}}catch(e){console.error("Error loading QR codes from localStorage:",e)}return[]},hse=()=>{try{localStorage.removeItem(LS)}catch(e){console.error("Error clearing QR codes from localStorage:",e)}},fse=()=>{var F;const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(""),[l,d]=w.useState([]),[u,h]=w.useState(!0),[p,m]=w.useState(!1),[g,b]=w.useState(""),[j,v]=w.useState(""),[y,A]=w.useState("all");w.useEffect(()=>{E(),O();const N=use();N.length>0&&d(N)},[]),w.useEffect(()=>{l.length>0&&dse(l)},[l]);const E=async()=>{try{h(!0),b("");const N=await xw.get("/branch");t(N),N.length>0&&i(N[0]._id)}catch(N){console.error("Error fetching branches:",N),b("Failed to load branches. Please check your internet connection.")}finally{h(!1)}},O=async()=>{try{const N=await xw.get("/table");let L=[];if(N.data&&N.data.success&&Array.isArray(N.data.data))L=N.data.data;else if(Array.isArray(N.data))L=N.data;else throw console.error(" Unexpected response format:",N.data),new Error("Invalid response format: tables array missing");const P=L.map(_=>{var R,W;return{id:_._id,number:_.number,status:_.status,branchId:((R=_.branchId)==null?void 0:R._id)||_.branchId,branchName:((W=_.branchId)==null?void 0:W.name)||"Unknown Branch",image:_.image,createdAt:new Date(_.createdAt).toLocaleString()}});a(P)}catch(N){console.error("Error fetching tables:",N),b("Failed to load tables.")}},S=async()=>{if(s){m(!0);try{const N=s==="all"?e:e.filter(P=>P._id===s),L=[];for(const P of N){if(l.filter(W=>W.branchId===P._id).length>0){console.log(`QR codes already exist for branch: ${P.name}`);continue}const R=n.filter(W=>W.branchId===P._id);if(R.length===0){const W=`${window.location.origin}/public-menu?branch=${P._id}&name=${encodeURIComponent(P.name)}&table=1`;L.push({id:`${P._id}-default`,branchId:P._id,branchName:P.name,tableNumber:1,url:W,qrCode:Q6(W,300),generatedAt:new Date().toISOString()})}else R.forEach(W=>{const G=`${window.location.origin}/public-menu?branch=${P._id}&name=${encodeURIComponent(P.name)}&table=${W.number}`;L.push({id:`${P._id}-${W.number}`,branchId:P._id,branchName:P.name,tableNumber:W.number,tableId:W.id,url:G,qrCode:Q6(G,300),generatedAt:new Date().toISOString()})})}L.length>0&&d(P=>[...P,...L])}catch(N){console.error("Error generating QR codes:",N),b("Failed to generate QR codes.")}finally{m(!1)}}},C=()=>{window.confirm("Are you sure you want to clear all generated QR codes? This action cannot be undone.")&&(d([]),hse())},k=async N=>{try{const P=await(await fetch(N.qrCode)).blob(),_=window.URL.createObjectURL(P),R=document.createElement("a");R.href=_,R.download=`${N.branchName.replace(/\s+/g,"-")}-table-${N.tableNumber}-qr.png`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(_)}catch(L){console.error("Error downloading QR code:",L),alert("Failed to download QR code. Please try again.")}},I=kn(),z=N=>{try{const L=new URL(N.url),P=`${L.pathname}${L.search}`;I(P)}catch(L){console.error("Invalid URL in previewMenu:",L),alert("Failed to preview menu. Invalid URL.")}},B=l.filter(N=>{const L=!j||N.branchName.toLowerCase().includes(j.toLowerCase())||N.tableNumber.toString().includes(j),P=y==="all"||N.branchId===y;return L&&P}),M=e.filter(N=>l.some(L=>L.branchId===N._id));return u?r.jsx("div",{style:er.loadingContainer,children:r.jsxs("div",{style:er.loadingContent,children:[r.jsx("div",{style:er.spinner}),r.jsx("p",{children:"Loading branches..."})]})}):g&&!e.length?r.jsx("div",{style:er.errorContainer,children:r.jsxs("div",{style:er.errorContent,children:[r.jsx(Ui,{size:48,style:{marginBottom:"16px",opacity:.5}}),r.jsx("h3",{children:"Error Loading Data"}),r.jsx("p",{children:g}),r.jsx("button",{onClick:E,style:er.retryButton,children:"Retry"})]})}):r.jsxs("div",{style:er.adminContainer,children:[r.jsxs("div",{style:er.adminContent,children:[r.jsxs("div",{style:er.adminHeader,children:[r.jsxs("div",{style:er.adminHeaderTitle,children:[r.jsx("div",{style:er.logoContainer,children:r.jsx(Ui,{size:24,color:"#ff7e47"})}),r.jsxs("div",{children:[r.jsx("h1",{style:er.adminTitle,children:"Table QR Menu Generator"}),r.jsx("p",{style:er.adminSubtitle,children:"Generate unique QR codes for each table"})]})]}),r.jsxs("div",{style:er.controlsContainer,children:[r.jsxs("div",{style:er.branchSelectContainer,children:[r.jsx("label",{style:er.label,children:"Select Branch"}),r.jsxs("select",{value:s,onChange:N=>i(N.target.value),style:er.branchSelect,children:[r.jsx("option",{value:"",children:"Choose a branch..."}),r.jsx("option",{value:"all",children:"All Branches"}),e.map(N=>r.jsx("option",{value:N._id,children:N.name},N._id))]})]}),r.jsxs("div",{style:er.buttonGroup,children:[r.jsxs("button",{onClick:S,disabled:p||!s,style:{...er.generateButton,opacity:p||!s?.7:1,cursor:p||!s?"not-allowed":"pointer"},children:[r.jsx(Ui,{size:16}),p?"Generating...":"Generate QR Codes"]}),l.length>0&&r.jsxs("button",{onClick:C,style:er.clearButton,children:[r.jsx(Yn,{size:16}),"Clear All"]})]})]})]}),l.length>0&&r.jsx("div",{style:er.statusCard,children:r.jsxs("div",{style:er.statusContent,children:[r.jsxs("div",{style:er.statusInfo,children:[r.jsx(Ui,{size:20,color:"#ff7e47"}),r.jsxs("span",{children:[r.jsx("strong",{children:l.length})," QR code",l.length!==1?"s":""," generated for tables",((F=l[0])==null?void 0:F.generatedAt)&&r.jsxs("span",{style:er.statusTime,children:["  Generated on ",new Date(l[0].generatedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),r.jsxs("div",{style:er.statusNote,children:["Branches with QR codes: ",M.map(N=>N.name).join(", ")]})]})}),l.length>0&&r.jsxs("div",{style:er.filtersBar,children:[r.jsxs("div",{style:er.searchContainer,children:[r.jsx(Tr,{size:18,style:er.searchIcon}),r.jsx("input",{type:"text",placeholder:"Search QR codes...",style:er.searchInput,value:j,onChange:N=>v(N.target.value)})]}),r.jsx("div",{style:er.filterButtons,children:r.jsxs("select",{style:er.filterSelect,value:y,onChange:N=>A(N.target.value),children:[r.jsx("option",{value:"all",children:"All Branches"}),M.map(N=>r.jsx("option",{value:N._id,children:N.name},N._id))]})})]}),l.length>0&&r.jsx("div",{style:er.qrCodesGrid,children:B.map(N=>r.jsxs("div",{style:er.qrCodeCard,children:[r.jsxs("h3",{style:er.qrCodeTitle,children:[N.branchName," - Table ",N.tableNumber]}),r.jsx("div",{style:er.qrCodeImageContainer,children:r.jsx("img",{src:N.qrCode||"/placeholder.svg",alt:`QR Code for ${N.branchName} Table ${N.tableNumber}`,style:er.qrCodeImage})}),r.jsxs("div",{style:er.qrCodeActions,children:[r.jsxs("button",{onClick:()=>k(N),style:er.downloadButton,children:[r.jsx(Sa,{size:14}),"Download"]}),r.jsxs("button",{onClick:()=>z(N),style:er.previewButton,children:[r.jsx(xs,{size:14}),"Preview"]})]}),r.jsx("div",{style:er.urlDisplay,children:N.url})]},N.id))}),r.jsxs("div",{style:er.instructionsCard,children:[r.jsx("h3",{style:er.instructionsTitle,children:"How to use:"}),r.jsxs("ol",{style:er.instructionsList,children:[r.jsx("li",{children:'Select a branch or choose "All Branches" to generate QR codes'}),r.jsx("li",{children:'Click "Generate QR Codes" to create unique QR codes for each table'}),r.jsx("li",{children:"QR codes are preserved when switching between branches - no need to regenerate"}),r.jsx("li",{children:"Each QR code will show the specific table number when scanned"}),r.jsx("li",{children:"Download the QR code images and print them"}),r.jsx("li",{children:"Place each QR code on its corresponding table"}),r.jsx("li",{children:"When customers scan the QR code, they'll see the menu with the table number displayed"}),r.jsx("li",{children:'Use "Preview" to see how the menu will look to customers'})]})]})]}),r.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})},er={loadingContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa"},loadingContent:{textAlign:"center"},spinner:{width:"40px",height:"40px",border:"4px solid #ff7e47",borderTop:"4px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"},errorContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa"},errorContent:{textAlign:"center",padding:"40px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},retryButton:{padding:"12px 24px",backgroundColor:"#ff7e47",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",marginTop:"16px"},adminContainer:{minHeight:"100vh",backgroundColor:"#f8f9fa",fontFamily:"Inter, sans-serif",padding:"24px"},adminContent:{maxWidth:"1200px",margin:"0 auto"},adminHeader:{backgroundColor:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},adminHeaderTitle:{display:"flex",alignItems:"center",marginBottom:"20px"},logoContainer:{width:"50px",height:"50px",backgroundColor:"rgba(255, 126, 71, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px"},adminTitle:{fontSize:"28px",fontWeight:"700",color:"#333",margin:0},adminSubtitle:{color:"#666",margin:0,fontSize:"16px"},controlsContainer:{display:"flex",gap:"16px",alignItems:"end",flexWrap:"wrap"},branchSelectContainer:{flex:"1",minWidth:"200px"},label:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},branchSelect:{width:"100%",padding:"12px 16px",border:"1px solid #e5e5e5",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},buttonGroup:{display:"flex",gap:"12px",alignItems:"center"},generateButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#ff7e47",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},clearButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},statusCard:{backgroundColor:"white",borderRadius:"12px",padding:"20px",marginBottom:"24px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 126, 71, 0.2)"},statusContent:{display:"flex",flexDirection:"column",gap:"8px"},statusInfo:{display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",color:"#333"},statusTime:{color:"#666",fontSize:"14px",fontWeight:"normal"},statusNote:{fontSize:"14px",color:"#666",fontStyle:"italic"},filtersBar:{display:"flex",gap:"16px",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",backgroundColor:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},searchContainer:{position:"relative",flex:"1",minWidth:"200px"},searchIcon:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af",pointerEvents:"none"},searchInput:{width:"100%",padding:"10px 10px 10px 40px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"},filterButtons:{display:"flex",gap:"12px"},filterSelect:{padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",backgroundColor:"white",minWidth:"120px"},qrCodesGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px",marginBottom:"24px"},qrCodeCard:{backgroundColor:"white",borderRadius:"12px",padding:"24px",textAlign:"center",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},qrCodeTitle:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",color:"#333"},qrCodeImageContainer:{marginBottom:"20px",padding:"16px",backgroundColor:"#f8f9fa",borderRadius:"8px"},qrCodeImage:{width:"250px",height:"250px",border:"1px solid #e5e5e5",borderRadius:"8px"},qrCodeActions:{display:"flex",gap:"12px",justifyContent:"center",marginBottom:"16px"},downloadButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#ff7e47",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},previewButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"white",color:"#ff7e47",border:"1px solid #ff7e47",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},urlDisplay:{padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"6px",fontSize:"12px",color:"#666",wordBreak:"break-all"},instructionsCard:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",marginTop:"24px"},instructionsTitle:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#333"},instructionsList:{color:"#666",lineHeight:"1.6",paddingLeft:"20px"}},J6=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(""),[l,d]=w.useState(""),[u,h]=w.useState(!0),[p,m]=w.useState(""),[g,b]=w.useState(""),[j,v]=w.useState(""),[y,A]=w.useState(""),[E,O]=w.useState(""),[S,C]=w.useState(""),[k,I]=w.useState(""),[z,B]=w.useState(""),[M,F]=w.useState([]),[N,L]=w.useState(!1),[P,_]=w.useState(!1),[R,W]=w.useState(!1),[G,oe]=w.useState(null),[q,V]=w.useState({name:"",mobile:"",peopleCount:1}),[U,X]=w.useState(!1),H={baseURL:"https://hotelvirat.com/api/v1/hotel",get:async Z=>{try{const de=await fetch(`${H.baseURL}${Z}`);if(!de.ok)throw new Error(`HTTP error! status: ${de.status}`);return await de.json()}catch(de){throw console.error(`API Error for ${Z}:`,de),de}},post:async(Z,de)=>{try{const te=await fetch(`${H.baseURL}${Z}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!te.ok)throw new Error(`HTTP error! status: ${te.status}`);return await te.json()}catch(te){throw console.error(`API Error for ${Z}:`,te),te}}},Q=async(Z,de)=>{try{console.log("Checking table status for branch:",Z,"table:",de);const te=await H.get(`/table?branchId=${Z}`);let Se=[];if(te.data&&te.data.success&&Array.isArray(te.data.data))Se=te.data.data;else if(Array.isArray(te.data))Se=te.data;else{console.error(" Unexpected response format:",te.data);return}const Ve=Se.find(tt=>tt.number.toString()===de.toString());if(Ve){if(console.log("Found table:",Ve),C(Ve._id),O(Ve.status),Ve.categoryId){const tt=typeof Ve.categoryId=="object"?Ve.categoryId._id:Ve.categoryId,ze=typeof Ve.categoryId=="object"?Ve.categoryId.name:"";I(tt),B(ze),console.log("Table category:",tt,ze)}return{status:Ve.status,categoryId:Ve.categoryId}}else return console.log("Table not found, assuming available"),O("available"),{status:"available",categoryId:null}}catch(te){return console.error("Error checking table status:",te),O("available"),{status:"available",categoryId:null}}},le=Z=>typeof Z.categoryId=="object"&&Z.categoryId!==null?Z.categoryId._id||Z.categoryId.id:Z.categoryId,me=Z=>{if(typeof Z.categoryId=="object"&&Z.categoryId!==null)return Z.categoryId.name||"Unknown Category";const de=Z.categoryId,te=n.find(Se=>Se._id===de);return te?te.name:"Unknown Category"},je=Z=>{if(E==="reserved"){alert("This table is currently reserved. Please contact staff for assistance.");return}F(de=>de.find(Se=>Se._id===Z._id)?de.map(Se=>Se._id===Z._id?{...Se,quantity:Se.quantity+1}:Se):[...de,{...Z,quantity:1}])},ee=Z=>{F(de=>{const te=de.find(Se=>Se._id===Z);return te&&te.quantity>1?de.map(Se=>Se._id===Z?{...Se,quantity:Se.quantity-1}:Se):de.filter(Se=>Se._id!==Z)})},se=()=>M.reduce((Z,de)=>Z+de.quantity,0),fe=()=>{const Z=M.reduce((de,te)=>de+(te.price||0)*(te.quantity||0),0);return isNaN(Z)?0:Z},ue=Z=>{const de=M.find(te=>te._id===Z);return de?de.quantity:0},We=Z=>{const de=document.createElement("canvas");return de.width=Z.width,de.height=Z.height,de.getContext("2d").drawImage(Z,0,0),de.toDataURL("image/jpeg")},we=Z=>{const de=window.open("","_blank"),te=new Image;te.crossOrigin="anonymous",te.onload=()=>{var tt;let Se="";try{Se=We(te)}catch(ze){console.warn("Could not convert logo to base64:",ze)}const Ve=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${Z.orderId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .logo { width: 80px; height: 80px; margin: 0 auto 15px; border-radius: 8px; display: block; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin: 10px 0; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${Se?`<img src="${Se}" alt="Hotel Virat Logo" class="logo">`:""}
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${Z.branchName}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${Z.orderId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${Z.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${Z.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${new Date(Z.orderTime).toLocaleDateString("en-IN")}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${new Date(Z.orderTime).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${Z.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${Z.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${Z.customerName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${Z.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${Z.branchName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${Z.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order Type:</span>
                <span class="detail-value">GUEST ORDER</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((tt=Z.items)==null?void 0:tt.map(ze=>`
                  <tr>
                    <td>${ze.name}</td>
                    <td style="text-align: center;">${ze.quantity}</td>
                    <td style="text-align: right;">${(ze.price||0).toFixed(2)}</td>
                    <td style="text-align: right;">${((ze.price||0)*ze.quantity).toFixed(2)}</td>
                  </tr>
                `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${(Z.subtotal||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${(Z.tax||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${(Z.serviceCharge||0).toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${(Z.grandTotal||0).toFixed(2)}</span>
            </div>
          </div>

          ${Z.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${Z.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;de.document.write(Ve),de.document.close(),de.focus(),setTimeout(()=>{de.print()},500)},te.onerror=()=>{var Ve;console.warn("Could not load logo image, generating PDF without logo");const Se=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Invoice ${Z.orderId}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; color: #333; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #ff7e47; padding-bottom: 20px; }
            .company-name { font-size: 28px; font-weight: bold; color: #ff7e47; margin-bottom: 10px; }
            .company-address { font-size: 14px; color: #666; margin: 5px 0; }
            .invoice-title { font-size: 20px; font-weight: bold; color: #333; margin-top: 15px; }
            .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
            .detail-section h3 { color: #333; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .detail-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .detail-label { font-weight: bold; color: #555; }
            .detail-value { color: #333; }
            .items-section { margin-bottom: 25px; }
            .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
            .items-table th { background-color: #f8f9fa; font-weight: bold; color: #333; }
            .items-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
            .total-section { margin-top: 25px; border-top: 2px solid #ff7e47; padding-top: 15px; }
            .total-row { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 3px 0; }
            .total-label { font-weight: bold; }
            .grand-total { font-size: 18px; font-weight: bold; color: #ff7e47; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px; }
            .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666; }
            .thank-you { font-size: 16px; color: #ff7e47; font-weight: bold; margin-bottom: 10px; }
            @media print { 
              body { margin: 0; } 
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1 class="company-name">Hotel Virat</h1>
            <div class="company-address">${Z.branchName}</div>
            <div class="invoice-title">Tax Invoice</div>
            <div style="font-size: 14px; color: #666;">Invoice No: ${Z.orderId}</div>
          </div>
          
          <div class="invoice-details">
            <div class="detail-section">
              <h3>Invoice Details</h3>
              <div class="detail-row">
                <span class="detail-label">Invoice ID:</span>
                <span class="detail-value">${Z.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order ID:</span>
                <span class="detail-value">${Z.orderId}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Date:</span>
                <span class="detail-value">${new Date(Z.orderTime).toLocaleDateString("en-IN")}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Time:</span>
                <span class="detail-value">${new Date(Z.orderTime).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Table No:</span>
                <span class="detail-value">${Z.tableNumber}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Guests:</span>
                <span class="detail-value">${Z.peopleCount}</span>
              </div>
            </div>
            
            <div class="detail-section">
              <h3>Customer & Payment Details</h3>
              <div class="detail-row">
                <span class="detail-label">Customer Name:</span>
                <span class="detail-value">${Z.customerName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Mobile:</span>
                <span class="detail-value">${Z.customerMobile}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Branch:</span>
                <span class="detail-value">${Z.branchName}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Payment Method:</span>
                <span class="detail-value">${Z.paymentMethod.toUpperCase()}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Order Type:</span>
                <span class="detail-value">GUEST ORDER</span>
              </div>
            </div>
          </div>

          <div class="items-section">
            <h3 style="color: #333; margin-bottom: 15px;">Order Items</h3>
            <table class="items-table">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th style="text-align: center;">Qty</th>
                  <th style="text-align: right;">Price</th>
                  <th style="text-align: right;">Total</th>
                </tr>
              </thead>
              <tbody>
                ${((Ve=Z.items)==null?void 0:Ve.map(tt=>`
                  <tr>
                    <td>${tt.name}</td>
                    <td style="text-align: center;">${tt.quantity}</td>
                    <td style="text-align: right;">${(tt.price||0).toFixed(2)}</td>
                    <td style="text-align: right;">${((tt.price||0)*tt.quantity).toFixed(2)}</td>
                  </tr>
                `).join(""))||"<tr><td colspan='4' style='text-align: center;'>No items available</td></tr>"}
              </tbody>
            </table>
          </div>

          <div class="total-section">
            <div class="total-row">
              <span class="total-label">Subtotal:</span>
              <span>${(Z.subtotal||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Tax (5%):</span>
              <span>${(Z.tax||0).toFixed(2)}</span>
            </div>
            <div class="total-row">
              <span class="total-label">Service Charge (10%):</span>
              <span>${(Z.serviceCharge||0).toFixed(2)}</span>
            </div>
            <div class="total-row grand-total">
              <span>Grand Total:</span>
              <span>${(Z.grandTotal||0).toFixed(2)}</span>
            </div>
          </div>

          ${Z.notes?`
            <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
              <h4 style="margin-bottom: 10px; color: #333;">Notes:</h4>
              <p style="margin: 0;">${Z.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="thank-you">Thank you for dining with us!</div>
            <p>We hope you enjoyed your meal. Please visit us again soon.</p>
            <p style="font-size: 12px; margin-top: 15px;">Generated on ${new Date().toLocaleString("en-IN")}</p>
          </div>
        </body>
        </html>
      `;de.document.write(Se),de.document.close(),de.focus(),setTimeout(()=>{de.print()},500)},te.src=Yo},Me=Z=>{var Se,Ve,tt,ze,Ze,Ae;const de=window.open("","_blank","width=302,height=600"),te=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Order ${Z.orderId}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Courier New', monospace; 
            width: 80mm; 
            max-width: 80mm;
            padding: 5mm;
            font-size: 12px;
            line-height: 1.4;
          }
          .header { text-align: center; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
          .hotel-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
          .branch-name { font-size: 12px; margin-bottom: 3px; }
          .order-info { margin-bottom: 10px; }
          .order-id { font-size: 14px; font-weight: bold; text-align: center; margin: 8px 0; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .info-label { font-weight: bold; }
          .divider { border-top: 1px dashed #000; margin: 8px 0; }
          .items-header { font-weight: bold; margin-bottom: 5px; }
          .item-row { margin-bottom: 5px; }
          .item-name { font-weight: bold; }
          .item-details { display: flex; justify-content: space-between; font-size: 11px; }
          .totals { margin-top: 10px; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
          .grand-total { font-size: 14px; font-weight: bold; border-top: 1px dashed #000; padding-top: 5px; margin-top: 5px; }
          .footer { text-align: center; margin-top: 15px; font-size: 11px; border-top: 1px dashed #000; padding-top: 10px; }
          .thank-you { font-weight: bold; margin-bottom: 5px; }
          @media print { 
            body { width: 80mm; }
            @page { size: 80mm auto; margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="hotel-name">HOTEL VIRAT</div>
          <div class="branch-name">${Z.branchName||j}</div>
        </div>
        
        <div class="order-id">Order #${Z.orderId}</div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Date:</span>
            <span>${new Date().toLocaleDateString("en-IN")}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Time:</span>
            <span>${new Date().toLocaleTimeString("en-IN")}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Table:</span>
            <span>${Z.tableNumber||y}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Guests:</span>
            <span>${Z.peopleCount}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Customer:</span>
            <span>${Z.customerName}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Mobile:</span>
            <span>${Z.customerMobile}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="items-section">
          <div class="items-header">ITEMS</div>
          ${((Se=Z.items)==null?void 0:Se.map(Qe=>`
            <div class="item-row">
              <div class="item-name">${Qe.name}</div>
              <div class="item-details">
                <span>${Qe.quantity} x ${(Qe.price||0).toFixed(2)}</span>
                <span>${((Qe.price||0)*Qe.quantity).toFixed(2)}</span>
              </div>
            </div>
          `).join(""))||"<div>No items</div>"}
        </div>
        
        <div class="divider"></div>
        
        <div class="totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${((Ve=Z.subtotal)==null?void 0:Ve.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Tax (5%):</span>
            <span>${((tt=Z.tax)==null?void 0:tt.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row">
            <span>Service (10%):</span>
            <span>${((ze=Z.serviceCharge)==null?void 0:ze.toFixed(2))||"0.00"}</span>
          </div>
          <div class="total-row grand-total">
            <span>TOTAL:</span>
            <span>${((Ze=Z.grandTotal)==null?void 0:Ze.toFixed(2))||"0.00"}</span>
          </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="order-info">
          <div class="info-row">
            <span class="info-label">Payment:</span>
            <span>${((Ae=Z.paymentMethod)==null?void 0:Ae.toUpperCase())||"CASH"}</span>
          </div>
        </div>
        
        <div class="footer">
          <div class="thank-you">Thank You!</div>
          <div>Visit Again</div>
          <div style="margin-top: 5px; font-size: 10px;">${new Date().toLocaleString("en-IN")}</div>
        </div>
      </body>
      </html>
    `;de.document.write(te),de.document.close(),de.focus(),setTimeout(()=>{de.print()},300)},Ee=async()=>{if(E==="reserved"){alert("This table is currently reserved. Please contact staff for assistance.");return}if(!q.name.trim()||!q.mobile.trim()){alert("Please fill in your name and mobile number");return}if(q.mobile.length!==10){alert("Please enter a valid 10-digit mobile number");return}if(M.length===0){alert("Your cart is empty");return}X(!0);try{const Z=fe(),de=Z*.05,te=Z*.1,Se=Z+de+te,Ve={customerName:q.name.trim(),customerMobile:q.mobile.trim(),branchId:g,branchName:j,categoryId:k||null,categoryName:z||"",tableId:S||null,tableNumber:y,peopleCount:Number.parseInt(q.peopleCount),items:M.map(ze=>({menuItemId:ze._id,name:ze.name,price:ze.price,quantity:ze.quantity,image:ze.image||"",description:ze.description||"",categoryId:ze.categoryId||k||null})),subtotal:Z,tax:de,serviceCharge:te,totalAmount:Z,grandTotal:Se,paymentMethod:"cash",orderTime:new Date().toISOString(),notes:`Guest order from Table ${y}${z?` - ${z}`:""}`,isGuestOrder:!0};console.log("Placing guest order:",Ve);const tt=await H.post("/staff-order/create-guest-order-no-stock",Ve);if(tt.success)oe(Ve),W(!0),F([]),_(!1),L(!1),V({name:"",mobile:"",peopleCount:1}),setTimeout(()=>{W(!1),oe(null)},1e4);else throw new Error(tt.message||"Failed to place order")}catch(Z){console.error("Error placing order:",Z),alert("Failed to place order. Please try again.")}finally{X(!1)}},Be=()=>{G&&we(G)},it=()=>{G&&Me(G)},re=e.filter(Z=>{const de=!s||s===""||le(Z)===s,te=!l||Z.name.toLowerCase().includes(l.toLowerCase())||Z.description&&Z.description.toLowerCase().includes(l.toLowerCase());return de&&te});w.useEffect(()=>{const Z=new URLSearchParams(window.location.search),de=Z.get("branch"),te=Z.get("name"),Se=Z.get("table"),Ve=Z.get("category"),tt=Z.get("categoryName");de&&Se?(b(de),v(decodeURIComponent(te||"")),A(Se),Q(de,Se).then(ze=>{console.log("Table status:",ze.status);let Ze=Ve;!Ze&&ze.categoryId&&(Ze=typeof ze.categoryId=="object"?ze.categoryId._id:ze.categoryId),tt&&B(decodeURIComponent(tt)),ce(de,Ze)})):(m("Invalid QR code - missing branch or table information"),h(!1))},[]);const ce=async(Z,de=null)=>{try{h(!0),m("");const[te,Se]=await Promise.all([H.get(`/menu?branchId=${Z}`),H.get(`/category?branchId=${Z}`)]),Ve=Ae=>{if(Ae.price&&typeof Ae.price=="number")return Ae.price;if(Ae.prices&&typeof Ae.prices=="object"){const Qe=Object.values(Ae.prices);if(Qe.length>0){const pt=parseFloat(Qe[0]);if(!isNaN(pt))return pt}}return 0};let tt=te.filter(Ae=>Ae.isActive!==!1).map(Ae=>({...Ae,price:Ve(Ae)}));if(de){console.log("Filtering products by table category:",de),tt=tt.filter(Qe=>(typeof Qe.categoryId=="object"&&Qe.categoryId!==null?Qe.categoryId._id||Qe.categoryId.id:Qe.categoryId)===de);const Ae=Se.find(Qe=>Qe._id===de);Ae&&B(Ae.name)}const ze=[...new Set(tt.map(Ae=>typeof Ae.categoryId=="object"&&Ae.categoryId!==null?Ae.categoryId._id||Ae.categoryId.id:Ae.categoryId).filter(Boolean))],Ze=Se.filter(Ae=>ze.includes(Ae._id));t(tt),a(Ze),tt.length===0&&m(de?"No menu items found for this category. Please contact staff.":"No menu items available for this branch.")}catch(te){console.error("Error fetching menu:",te),m("Failed to load menu. Please try again.")}finally{h(!1)}};return u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"jsx-4106990067 loading-screen",children:r.jsxs("div",{className:"jsx-4106990067 loading-content",children:[r.jsx("div",{className:"jsx-4106990067 spinner"}),r.jsx("p",{className:"jsx-4106990067",children:"Loading menu..."})]})}),r.jsx(Pl,{id:"4106990067",children:[".loading-screen.jsx-4106990067{height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:#f9fafb;}",".loading-content.jsx-4106990067{text-align:center;}",".spinner.jsx-4106990067{width:40px;height:40px;border:3px solid #f97316;border-top:3px solid transparent;border-radius:50%;-webkit-animation:spin-jsx-4106990067 1s linear infinite;animation:spin-jsx-4106990067 1s linear infinite;margin:0 auto 16px;}","@-webkit-keyframes spin-jsx-4106990067{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes spin-jsx-4106990067{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"]})]}):p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"jsx-2376688526 error-screen",children:r.jsxs("div",{className:"jsx-2376688526 error-content",children:[r.jsx(Ui,{size:48,style:{marginBottom:"16px",opacity:.5}}),r.jsx("h3",{className:"jsx-2376688526",children:"Oops! Something went wrong"}),r.jsx("p",{className:"jsx-2376688526",children:p}),r.jsx("button",{onClick:()=>ce(g,k),className:"jsx-2376688526 retry-btn",children:"Try Again"})]})}),r.jsx(Pl,{id:"2376688526",children:[".error-screen.jsx-2376688526{height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:#f9fafb;padding:20px;}",".error-content.jsx-2376688526{text-align:center;background:white;padding:40px;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1);max-width:400px;width:100%;}",".retry-btn.jsx-2376688526{background:#f97316;color:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;margin-top:16px;font-size:14px;font-weight:500;}",".retry-btn.jsx-2376688526:hover{background:#ea580c;}"]})]}):E==="reserved"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"jsx-1053011140 reserved-screen",children:r.jsxs("div",{className:"jsx-1053011140 reserved-content",children:[r.jsx(xr,{size:64,color:"#f59e0b",style:{marginBottom:"24px"}}),r.jsx("h2",{className:"jsx-1053011140",children:"Table Currently Reserved"}),r.jsxs("p",{className:"jsx-1053011140",children:["Table ",y," at ",j," is currently reserved."]}),r.jsx("p",{className:"jsx-1053011140",children:"Please contact our staff for assistance or try scanning a different table's QR code."}),r.jsxs("div",{className:"jsx-1053011140 contact-info",children:[r.jsx("p",{className:"jsx-1053011140",children:r.jsx("strong",{className:"jsx-1053011140",children:"Need Help?"})}),r.jsx("p",{className:"jsx-1053011140",children:"Please approach our staff members who will be happy to assist you with seating and ordering."})]})]})}),r.jsx(Pl,{id:"1053011140",children:[".reserved-screen.jsx-1053011140{height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:#f9fafb;padding:20px;}",".reserved-content.jsx-1053011140{text-align:center;background:white;padding:40px;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1);max-width:500px;width:100%;border:2px solid #f59e0b;}",".reserved-content.jsx-1053011140 h2.jsx-1053011140{color:#f59e0b;margin-bottom:16px;font-size:24px;}",".reserved-content.jsx-1053011140 p.jsx-1053011140{color:#666;margin-bottom:12px;line-height:1.5;}",".contact-info.jsx-1053011140{margin-top:24px;padding:20px;background:#fef3c7;border-radius:8px;border:1px solid #f59e0b;}",".contact-info.jsx-1053011140 p.jsx-1053011140{margin-bottom:8px;}",".contact-info.jsx-1053011140 p.jsx-1053011140:last-child{margin-bottom:0;}"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"jsx-989239309 menu-app",children:[R&&r.jsx("div",{className:"jsx-989239309 success-overlay",children:r.jsxs("div",{className:"jsx-989239309 success-message",children:[r.jsx(ca,{size:48,color:"#10b981"}),r.jsx("h3",{className:"jsx-989239309",children:"Order Placed Successfully!"}),G&&r.jsxs("div",{className:"jsx-989239309 invoice-section",children:[r.jsx("p",{className:"jsx-989239309 invoice-text",children:"Print receipt or download invoice:"}),r.jsxs("div",{className:"jsx-989239309 invoice-buttons",children:[r.jsxs("button",{onClick:it,className:"jsx-989239309 print-receipt-btn",children:[r.jsx(_s,{size:20}),"Print Receipt"]}),r.jsxs("button",{onClick:Be,className:"jsx-989239309 download-invoice-btn",children:[r.jsx(Sa,{size:20}),"Download PDF"]})]})]}),r.jsx("button",{onClick:()=>{W(!1),oe(null)},className:"jsx-989239309 close-success-btn",children:"Close"})]})}),r.jsx("header",{className:"jsx-989239309 header",children:r.jsxs("div",{className:"jsx-989239309 header-container",children:[r.jsxs("div",{className:"jsx-989239309 restaurant-info",children:[r.jsx("div",{className:"jsx-989239309 logo",children:r.jsx(Ui,{size:20})}),r.jsxs("div",{className:"jsx-989239309 restaurant-details",children:[r.jsx("h1",{className:"jsx-989239309 restaurant-name",children:j||"Restaurant"}),r.jsxs("p",{className:"jsx-989239309 restaurant-tagline",children:["Table ",y,z&&`  ${z}`,"  ","Delicious food, delivered fresh",E&&r.jsxs("span",{className:`jsx-989239309 table-status ${E}`,children:["  ",E==="available"?"Available":"Reserved"]})]})]})]}),r.jsxs("div",{className:"jsx-989239309 search-section",children:[r.jsxs("div",{className:"jsx-989239309 search-box",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search menu items...",value:l,onChange:Z=>d(Z.target.value),className:"jsx-989239309 search-input"})]}),r.jsxs("select",{value:s,onChange:Z=>i(Z.target.value),className:"jsx-989239309 category-dropdown",children:[r.jsx("option",{value:"",className:"jsx-989239309",children:"All Categories"}),n.map(Z=>r.jsx("option",{value:Z._id,className:"jsx-989239309",children:Z.name},Z._id))]})]})]})}),M.length>0&&E==="available"&&r.jsxs("button",{onClick:()=>L(!0),className:"jsx-989239309 floating-cart",children:[r.jsx(Th,{size:24}),r.jsx("span",{className:"jsx-989239309 cart-count",children:se()})]}),r.jsx("main",{className:"jsx-989239309 main-content",children:r.jsxs("div",{className:"jsx-989239309 content-container",children:[r.jsx("div",{className:"jsx-989239309 table-info-banner",children:r.jsxs("div",{className:"jsx-989239309 table-info-content",children:[r.jsx(Ui,{size:24,color:"#ff7e47"}),r.jsxs("div",{className:"jsx-989239309 table-info-text",children:[r.jsxs("h3",{className:"jsx-989239309 table-info-title",children:["Table ",y]}),r.jsxs("p",{className:"jsx-989239309 table-info-subtitle",children:[j,E&&r.jsx("span",{className:`jsx-989239309 status-badge ${E}`,children:E==="available"?"Available":"Reserved"})]})]})]})}),r.jsx("div",{className:"jsx-989239309 results-info",children:r.jsxs("p",{className:"jsx-989239309",children:[re.length," item",re.length!==1?"s":""," found",s&&n.find(Z=>Z._id===s)&&` in ${n.find(Z=>Z._id===s).name}`,l&&` for "${l}"`]})}),re.length>0?r.jsx("div",{className:"jsx-989239309 menu-grid",children:re.map(Z=>r.jsxs("div",{className:"jsx-989239309 menu-card",children:[r.jsx("div",{className:"jsx-989239309 card-image",children:r.jsx("img",{src:Z.image||"/placeholder.svg",alt:Z.name,onError:de=>{de.target.src="/placeholder.svg?height=200&width=300"},className:"jsx-989239309"})}),r.jsxs("div",{className:"jsx-989239309 card-content",children:[r.jsxs("div",{className:"jsx-989239309 card-header",children:[r.jsx("h3",{className:"jsx-989239309 product-name",children:Z.name}),r.jsxs("span",{className:"jsx-989239309 product-price",children:["",(Z.price||0).toFixed(2)]})]}),r.jsx("div",{className:"jsx-989239309 category-tag",children:me(Z)}),Z.description&&r.jsx("p",{className:"jsx-989239309 product-description",children:Z.description}),E==="available"&&r.jsx("div",{className:"jsx-989239309 cart-controls",children:ue(Z._id)===0?r.jsxs("button",{onClick:()=>je(Z),className:"jsx-989239309 add-to-cart-btn",children:[r.jsx(qa,{size:16}),"Add to Cart"]}):r.jsxs("div",{className:"jsx-989239309 quantity-controls",children:[r.jsx("button",{onClick:()=>ee(Z._id),className:"jsx-989239309 quantity-btn",children:r.jsx(GA,{size:16})}),r.jsx("span",{className:"jsx-989239309 quantity",children:ue(Z._id)}),r.jsx("button",{onClick:()=>je(Z),className:"jsx-989239309 quantity-btn",children:r.jsx(qa,{size:16})})]})}),E==="reserved"&&r.jsxs("div",{className:"jsx-989239309 reserved-message",children:[r.jsx(xr,{size:16}),r.jsx("span",{className:"jsx-989239309",children:"Table Reserved - Contact Staff"})]})]})]},Z._id))}):r.jsxs("div",{className:"jsx-989239309 empty-state",children:[r.jsx(Ui,{size:48,style:{opacity:.3,marginBottom:"16px"}}),r.jsx("h3",{className:"jsx-989239309",children:"No items found"}),r.jsx("p",{className:"jsx-989239309",children:l||s?"Try adjusting your search or filter criteria":"No menu items available for this branch"}),(l||s)&&r.jsx("button",{onClick:()=>{d(""),i("")},className:"jsx-989239309 clear-filters",children:"Clear Filters"})]})]})}),N&&E==="available"&&r.jsx("div",{className:"jsx-989239309 modal-overlay",children:r.jsxs("div",{className:"jsx-989239309 cart-modal",children:[r.jsxs("div",{className:"jsx-989239309 cart-header",children:[r.jsx("h3",{className:"jsx-989239309",children:"Your Order"}),r.jsx("button",{onClick:()=>L(!1),className:"jsx-989239309 close-btn",children:r.jsx(On,{size:24})})]}),r.jsx("div",{className:"jsx-989239309 cart-content",children:M.length===0?r.jsxs("div",{className:"jsx-989239309 empty-cart",children:[r.jsx(Th,{size:48,style:{opacity:.3}}),r.jsx("p",{className:"jsx-989239309",children:"Your cart is empty"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"jsx-989239309 cart-items",children:M.map(Z=>r.jsxs("div",{className:"jsx-989239309 cart-item",children:[r.jsx("img",{src:Z.image||"/placeholder.svg",alt:Z.name,className:"jsx-989239309 cart-item-image"}),r.jsxs("div",{className:"jsx-989239309 cart-item-details",children:[r.jsx("h4",{className:"jsx-989239309",children:Z.name}),r.jsxs("p",{className:"jsx-989239309",children:["",(Z.price||0).toFixed(2)," each"]})]}),r.jsxs("div",{className:"jsx-989239309 cart-item-controls",children:[r.jsx("button",{onClick:()=>ee(Z._id),className:"jsx-989239309",children:r.jsx(GA,{size:16})}),r.jsx("span",{className:"jsx-989239309",children:Z.quantity}),r.jsx("button",{onClick:()=>je(Z),className:"jsx-989239309",children:r.jsx(qa,{size:16})})]}),r.jsxs("div",{className:"jsx-989239309 cart-item-total",children:["",((Z.price||0)*Z.quantity).toFixed(2)]})]},Z._id))}),r.jsxs("div",{className:"jsx-989239309 cart-summary",children:[r.jsxs("div",{className:"jsx-989239309 summary-row",children:[r.jsx("span",{className:"jsx-989239309",children:"Subtotal:"}),r.jsxs("span",{className:"jsx-989239309",children:["",fe().toFixed(2)]})]}),r.jsxs("div",{className:"jsx-989239309 summary-row",children:[r.jsx("span",{className:"jsx-989239309",children:"Tax (5%):"}),r.jsxs("span",{className:"jsx-989239309",children:["",(fe()*.05).toFixed(2)]})]}),r.jsxs("div",{className:"jsx-989239309 summary-row",children:[r.jsx("span",{className:"jsx-989239309",children:"Service Charge (10%):"}),r.jsxs("span",{className:"jsx-989239309",children:["",(fe()*.1).toFixed(2)]})]}),r.jsxs("div",{className:"jsx-989239309 summary-row total",children:[r.jsx("span",{className:"jsx-989239309",children:"Total:"}),r.jsxs("span",{className:"jsx-989239309",children:["",(fe()*1.15).toFixed(2)]})]})]})]})}),M.length>0&&r.jsx("div",{className:"jsx-989239309 cart-footer",children:r.jsx("button",{onClick:()=>{L(!1),_(!0)},className:"jsx-989239309 checkout-btn",children:"Proceed to Checkout"})})]})}),P&&E==="available"&&r.jsx("div",{className:"jsx-989239309 modal-overlay",children:r.jsxs("div",{className:"jsx-989239309 checkout-modal",children:[r.jsxs("div",{className:"jsx-989239309 checkout-header",children:[r.jsx("h3",{className:"jsx-989239309",children:"Order Details"}),r.jsx("button",{onClick:()=>_(!1),className:"jsx-989239309 close-btn",children:r.jsx(On,{size:24})})]}),r.jsxs("div",{className:"jsx-989239309 checkout-content",children:[r.jsxs("div",{className:"jsx-989239309 customer-details",children:[r.jsx("h4",{className:"jsx-989239309",children:"Customer Information"}),r.jsxs("div",{className:"jsx-989239309 form-group",children:[r.jsxs("label",{className:"jsx-989239309",children:[r.jsx(Vo,{size:16}),"Full Name *"]}),r.jsx("input",{type:"text",value:q.name,onChange:Z=>V({...q,name:Z.target.value}),placeholder:"Enter your full name",required:!0,className:"jsx-989239309"})]}),r.jsxs("div",{className:"jsx-989239309 form-group",children:[r.jsxs("label",{className:"jsx-989239309",children:[r.jsx(Ia,{size:16}),"Mobile Number *"]}),r.jsx("input",{type:"tel",value:q.mobile,onChange:Z=>V({...q,mobile:Z.target.value}),placeholder:"Enter 10-digit mobile number",maxLength:"10",required:!0,className:"jsx-989239309"})]}),r.jsxs("div",{className:"jsx-989239309 form-group",children:[r.jsxs("label",{className:"jsx-989239309",children:[r.jsx(ei,{size:16}),"Number of People"]}),r.jsx("select",{value:q.peopleCount,onChange:Z=>V({...q,peopleCount:Z.target.value}),className:"jsx-989239309",children:[1,2,3,4,5,6,7,8,9,10].map(Z=>r.jsx("option",{value:Z,className:"jsx-989239309",children:Z},Z))})]})]}),r.jsxs("div",{className:"jsx-989239309 order-summary",children:[r.jsx("h4",{className:"jsx-989239309",children:"Order Summary"}),r.jsx("div",{className:"jsx-989239309 summary-items",children:M.map(Z=>r.jsxs("div",{className:"jsx-989239309 summary-item",children:[r.jsxs("span",{className:"jsx-989239309",children:[Z.name," x ",Z.quantity]}),r.jsxs("span",{className:"jsx-989239309",children:["",((Z.price||0)*Z.quantity).toFixed(2)]})]},Z._id))}),r.jsxs("div",{className:"jsx-989239309 summary-totals",children:[r.jsxs("div",{className:"jsx-989239309 summary-row",children:[r.jsx("span",{className:"jsx-989239309",children:"Subtotal:"}),r.jsxs("span",{className:"jsx-989239309",children:["",fe().toFixed(2)]})]}),r.jsxs("div",{className:"jsx-989239309 summary-row",children:[r.jsx("span",{className:"jsx-989239309",children:"Tax (5%):"}),r.jsxs("span",{className:"jsx-989239309",children:["",(fe()*.05).toFixed(2)]})]}),r.jsxs("div",{className:"jsx-989239309 summary-row",children:[r.jsx("span",{className:"jsx-989239309",children:"Service Charge (10%):"}),r.jsxs("span",{className:"jsx-989239309",children:["",(fe()*.1).toFixed(2)]})]}),r.jsxs("div",{className:"jsx-989239309 summary-row total",children:[r.jsx("span",{className:"jsx-989239309",children:"Total Amount:"}),r.jsxs("span",{className:"jsx-989239309",children:["",(fe()*1.15).toFixed(2)]})]})]})]}),r.jsx("div",{className:"jsx-989239309 payment-info",children:r.jsxs("div",{className:"jsx-989239309 payment-method",children:[r.jsx(Ua,{size:16}),r.jsx("span",{className:"jsx-989239309",children:"Payment: Cash (Pay at table)"})]})})]}),r.jsx("div",{className:"jsx-989239309 checkout-footer",children:r.jsx("button",{onClick:Ee,disabled:U||!q.name.trim()||!q.mobile.trim(),className:"jsx-989239309 place-order-btn",children:U?"Placing Order...":"Place Order"})})]})})]}),r.jsx(Pl,{id:"989239309",children:["*{margin:0;padding:0;box-sizing:border-box;}","html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f9fafb;overflow-x:hidden;}",".menu-app{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;position:relative;}",".success-overlay{position:fixed !important;top:0 !important;left:0 !important;right:0 !important;bottom:0 !important;width:100vw !important;height:100vh !important;background:rgba(0,0,0,0.8) !important;display:-webkit-box !important;display:-webkit-flex !important;display:-ms-flexbox !important;display:flex !important;-webkit-align-items:center !important;-webkit-box-align:center !important;-ms-flex-align:center !important;align-items:center !important;-webkit-box-pack:center !important;-webkit-justify-content:center !important;-ms-flex-pack:center !important;justify-content:center !important;z-index:9999 !important;padding:20px !important;box-sizing:border-box !important;}",".success-message{position:relative !important;background:white !important;padding:40px !important;border-radius:16px !important;text-align:center !important;width:100% !important;max-width:420px !important;min-width:300px !important;margin:0 auto !important;box-shadow:0 25px 50px -12px rgba(0,0,0,0.25) !important;border:2px solid #10b981 !important;-webkit-transform:scale(1) !important;-ms-transform:scale(1) !important;transform:scale(1) !important;-webkit-animation:successSlideIn 0.3s ease-out !important;animation:successSlideIn 0.3s ease-out !important;}","@-webkit-keyframes successSlideIn{0%{opacity:0;-webkit-transform:scale(0.9) translateY(-20px);-ms-transform:scale(0.9) translateY(-20px);transform:scale(0.9) translateY(-20px);}100%{opacity:1;-webkit-transform:scale(1) translateY(0);-ms-transform:scale(1) translateY(0);transform:scale(1) translateY(0);}}","@keyframes successSlideIn{0%{opacity:0;-webkit-transform:scale(0.9) translateY(-20px);-ms-transform:scale(0.9) translateY(-20px);transform:scale(0.9) translateY(-20px);}100%{opacity:1;-webkit-transform:scale(1) translateY(0);-ms-transform:scale(1) translateY(0);transform:scale(1) translateY(0);}}",".success-message h3{color:#10b981 !important;margin:16px 0 8px !important;font-size:24px !important;font-weight:700 !important;}",".success-message p{color:#666 !important;line-height:1.5 !important;margin-bottom:20px !important;font-size:16px !important;}",".invoice-section{margin:20px 0 !important;padding:20px !important;background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%) !important;border-radius:12px !important;border:1px solid #e9ecef !important;}",".invoice-text{color:#495057 !important;font-size:14px !important;margin-bottom:12px !important;font-weight:500 !important;}",".invoice-buttons{display:-webkit-box !important;display:-webkit-flex !important;display:-ms-flexbox !important;display:flex !important;gap:10px !important;width:100% !important;}",".print-receipt-btn{display:-webkit-box !important;display:-webkit-flex !important;display:-ms-flexbox !important;display:flex !important;-webkit-align-items:center !important;-webkit-box-align:center !important;-ms-flex-align:center !important;align-items:center !important;-webkit-box-pack:center !important;-webkit-justify-content:center !important;-ms-flex-pack:center !important;justify-content:center !important;gap:8px !important;-webkit-flex:1 !important;-ms-flex:1 !important;flex:1 !important;padding:14px 16px !important;background:linear-gradient(135deg,#059669 0%,#047857 100%) !important;color:white !important;border:none !important;border-radius:10px !important;font-size:14px !important;font-weight:600 !important;cursor:pointer !important;-webkit-transition:all 0.2s ease !important;transition:all 0.2s ease !important;box-shadow:0 4px 12px rgba(5,150,105,0.3) !important;}",".print-receipt-btn:hover{background:linear-gradient(135deg,#047857 0%,#065f46 100%) !important;-webkit-transform:translateY(-1px) !important;-ms-transform:translateY(-1px) !important;transform:translateY(-1px) !important;box-shadow:0 6px 16px rgba(5,150,105,0.4) !important;}",".download-invoice-btn{display:-webkit-box !important;display:-webkit-flex !important;display:-ms-flexbox !important;display:flex !important;-webkit-align-items:center !important;-webkit-box-align:center !important;-ms-flex-align:center !important;align-items:center !important;-webkit-box-pack:center !important;-webkit-justify-content:center !important;-ms-flex-pack:center !important;justify-content:center !important;gap:8px !important;-webkit-flex:1 !important;-ms-flex:1 !important;flex:1 !important;padding:14px 16px !important;background:linear-gradient(135deg,#f97316 0%,#ea580c 100%) !important;color:white !important;border:none !important;border-radius:10px !important;font-size:14px !important;font-weight:600 !important;cursor:pointer !important;-webkit-transition:all 0.2s ease !important;transition:all 0.2s ease !important;box-shadow:0 4px 12px rgba(249,115,22,0.3) !important;}",".download-invoice-btn:hover{background:linear-gradient(135deg,#ea580c 0%,#dc2626 100%) !important;-webkit-transform:translateY(-1px) !important;-ms-transform:translateY(-1px) !important;transform:translateY(-1px) !important;box-shadow:0 6px 16px rgba(249,115,22,0.4) !important;}",".close-success-btn{margin-top:20px !important;padding:12px 24px !important;background:linear-gradient(135deg,#6b7280 0%,#4b5563 100%) !important;color:white !important;border:none !important;border-radius:8px !important;cursor:pointer !important;font-size:14px !important;font-weight:500 !important;-webkit-transition:all 0.2s ease !important;transition:all 0.2s ease !important;}",".close-success-btn:hover{background:linear-gradient(135deg,#4b5563 0%,#374151 100%) !important;-webkit-transform:translateY(-1px) !important;-ms-transform:translateY(-1px) !important;transform:translateY(-1px) !important;}","@media (max-width:640px){.success-overlay{padding:15px !important;}.success-message{padding:30px 20px !important;max-width:95vw !important;min-width:280px !important;}.success-message h3{font-size:20px !important;}.success-message p{font-size:14px !important;}.download-invoice-btn{padding:12px 16px !important;font-size:13px !important;}}","@media (min-width:641px) and (max-width:1024px){.success-message{max-width:400px !important;padding:35px !important;}}",".header{background:white;border-bottom:1px solid #e5e7eb;box-shadow:0 1px 3px rgba(0,0,0,0.1);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;z-index:10;}",".header-container{max-width:1200px;margin:0 auto;padding:20px;}",".restaurant-info{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;}",".logo{width:40px;height:40px;background:rgba(249,115,22,0.1);border-radius:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:12px;color:#f97316;}",".restaurant-name{font-size:24px;font-weight:700;color:#111827;margin-bottom:4px;}",".restaurant-tagline{color:#6b7280;font-size:14px;}",".table-status.available{color:#10b981;font-weight:600;}",".table-status.reserved{color:#f59e0b;font-weight:600;}",".status-badge{display:inline-block;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:600;margin-left:8px;}",".status-badge.available{background:rgba(16,185,129,0.1);color:#10b981;}",".status-badge.reserved{background:rgba(245,158,11,0.1);color:#f59e0b;}",".search-section{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:16px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".search-box{position:relative;-webkit-flex:1;-ms-flex:1;flex:1;}",".search-icon{position:absolute;left:12px;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);color:#9ca3af;pointer-events:none;}",".search-input{width:100%;padding:12px 12px 12px 40px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;outline:none;background:white;}",".search-input:focus{border-color:#f97316;box-shadow:0 0 0 3px rgba(249,115,22,0.1);}",".category-dropdown{padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;background:white;min-width:150px;outline:none;cursor:pointer;}",".category-dropdown:focus{border-color:#f97316;box-shadow:0 0 0 3px rgba(249,115,22,0.1);}",".floating-cart{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background:#f97316;color:white;border:none;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 4px 12px rgba(249,115,22,0.3);cursor:pointer;z-index:100;-webkit-transition:-webkit-transform 0.2s ease;-webkit-transition:transform 0.2s ease;transition:transform 0.2s ease;}",".floating-cart:hover{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}",".cart-count{position:absolute;top:-5px;right:-5px;background:#dc2626;color:white;border-radius:50%;width:24px;height:24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:12px;font-weight:bold;}",".main-content{-webkit-flex:1;-ms-flex:1;flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;}",".content-container{max-width:1200px;margin:0 auto;padding:20px;}",".table-info-banner{background:rgba(255,126,71,0.1);border:1px solid rgba(255,126,71,0.2);border-radius:12px;padding:16px 20px;margin-bottom:24px;}",".table-info-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:12px;}",".table-info-text{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".table-info-title{font-size:18px;font-weight:600;color:#ff7e47;margin:0;}",".table-info-subtitle{font-size:14px;color:#666;margin:0;}",".results-info{text-align:center;margin-bottom:30px;color:#6b7280;font-size:14px;font-weight:500;}",".menu-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:40px;}",".menu-card{background:white;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,0.1);-webkit-transition:-webkit-transform 0.2s ease,box-shadow 0.2s ease;-webkit-transition:transform 0.2s ease,box-shadow 0.2s ease;transition:transform 0.2s ease,box-shadow 0.2s ease;}",".menu-card:hover{-webkit-transform:translateY(-2px);-ms-transform:translateY(-2px);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.15);}",".card-image{width:100%;height:200px;overflow:hidden;}",".card-image img{width:100%;height:100%;object-fit:cover;-webkit-transition:-webkit-transform 0.3s ease;-webkit-transition:transform 0.3s ease;transition:transform 0.3s ease;}",".menu-card:hover .card-image img{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05);}",".card-content{padding:16px;}",".card-header{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-bottom:8px;gap:10px;}",".product-name{font-size:16px;font-weight:600;color:#111827;-webkit-flex:1;-ms-flex:1;flex:1;line-height:1.3;}",".product-price{font-size:16px;font-weight:700;color:#f97316;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}",".category-tag{display:inline-block;background:rgba(249,115,22,0.1);color:#f97316;font-size:11px;padding:4px 8px;border-radius:12px;font-weight:500;margin-bottom:8px;}",".product-description{font-size:13px;color:#6b7280;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;margin-bottom:12px;}",".cart-controls{margin-top:12px;}",".add-to-cart-btn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;gap:8px;width:100%;padding:10px;background:#f97316;color:white;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;-webkit-transition:background 0.2s ease;transition:background 0.2s ease;}",".add-to-cart-btn:hover{background:#ea580c;}",".quantity-controls{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;gap:12px;}",".quantity-btn{width:32px;height:32px;border:1px solid #d1d5db;background:white;border-radius:6px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;}",".quantity-btn:hover{background:#f97316;color:white;border-color:#f97316;}",".quantity{font-weight:600;font-size:16px;min-width:30px;text-align:center;}",".reserved-message{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;gap:8px;margin-top:12px;padding:10px;background:rgba(245,158,11,0.1);color:#f59e0b;border-radius:8px;font-size:14px;font-weight:500;}",".modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;z-index:1000;padding:20px;}",".cart-modal,.checkout-modal{background:white;border-radius:12px;max-width:500px;width:100%;max-height:90vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".cart-header,.checkout-header{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:20px;border-bottom:1px solid #e5e7eb;}",".cart-header h3,.checkout-header h3{font-size:20px;font-weight:600;color:#111827;}",".close-btn{background:none;border:none;cursor:pointer;color:#6b7280;padding:4px;}",".close-btn:hover{color:#111827;}",".cart-content,.checkout-content{-webkit-flex:1;-ms-flex:1;flex:1;overflow-y:auto;padding:20px;}",".empty-cart{text-align:center;padding:40px 20px;color:#6b7280;}",".cart-items{margin-bottom:20px;}",".cart-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid #f3f4f6;}",".cart-item:last-child{border-bottom:none;}",".cart-item-image{width:50px;height:50px;object-fit:cover;border-radius:6px;}",".cart-item-details{-webkit-flex:1;-ms-flex:1;flex:1;}",".cart-item-details h4{font-size:14px;font-weight:600;color:#111827;margin-bottom:4px;}",".cart-item-details p{font-size:12px;color:#6b7280;}",".cart-item-controls{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;}",".cart-item-controls button{width:28px;height:28px;border:1px solid #d1d5db;background:white;border-radius:4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;}",".cart-item-controls button:hover{background:#f97316;color:white;border-color:#f97316;}",".cart-item-controls span{font-weight:600;min-width:20px;text-align:center;}",".cart-item-total{font-weight:600;color:#f97316;min-width:60px;text-align:right;}",".cart-summary,.summary-totals{border-top:1px solid #e5e7eb;padding-top:16px;}",".summary-row{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:8px;font-size:14px;}",".summary-row.total{font-weight:700;font-size:16px;color:#111827;border-top:1px solid #e5e7eb;padding-top:8px;margin-top:8px;}",".cart-footer,.checkout-footer{padding:20px;border-top:1px solid #e5e7eb;}",".checkout-btn,.place-order-btn{width:100%;padding:14px;background:#f97316;color:white;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;-webkit-transition:background 0.2s ease;transition:background 0.2s ease;}",".checkout-btn:hover,.place-order-btn:hover{background:#ea580c;}",".place-order-btn:disabled{background:#d1d5db;cursor:not-allowed;}",".customer-details,.order-summary,.payment-info{margin-bottom:24px;}",".customer-details h4,.order-summary h4{font-size:16px;font-weight:600;color:#111827;margin-bottom:16px;}",".form-group{margin-bottom:16px;}",".form-group label{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;font-size:14px;font-weight:500;color:#374151;margin-bottom:6px;}",".form-group input,.form-group select{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;outline:none;}",".form-group input:focus,.form-group select:focus{border-color:#f97316;box-shadow:0 0 0 3px rgba(249,115,22,0.1);}",".summary-items{margin-bottom:16px;}",".summary-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:8px;font-size:14px;}",".payment-method{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;padding:12px;background:#f3f4f6;border-radius:6px;font-size:14px;color:#374151;}",".empty-state{text-align:center;padding:60px 20px;color:#6b7280;}",".empty-state h3{color:#111827;margin-bottom:8px;font-size:18px;}",".empty-state p{margin-bottom:20px;}",".clear-filters{background:#f97316;color:white;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;}",".clear-filters:hover{background:#ea580c;}",".footer{padding:16px;background-color:#f8f8f8;text-align:center;border-top:1px solid #ddd;width:100%;box-sizing:border-box;position:relative;z-index:10;}",".footer-sub{font-size:0.875rem;color:#666;margin-top:8px;}",".scrollable-content{padding-bottom:80px;min-height:100vh;box-sizing:border-box;}","@media (max-width:640px){.header-container{padding:16px;}.restaurant-name{font-size:20px;}.search-section{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:12px;}.category-dropdown{width:100%;min-width:auto;}.content-container{padding:16px;}.menu-grid{grid-template-columns:1fr;gap:16px;}.card-header{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:4px;}.floating-cart{bottom:80px;}.cart-modal,.checkout-modal{margin:10px;max-height:calc(100vh - 20px);}.success-message{margin:10px;padding:30px 20px;}.download-invoice-btn{padding:10px 16px;font-size:13px;}}","@media (min-width:641px) and (max-width:1024px){.menu-grid{grid-template-columns:repeat(2,1fr);}}","@media (min-width:1200px){.menu-grid{grid-template-columns:repeat(4,1fr);}}",".main-content::-webkit-scrollbar,.cart-content::-webkit-scrollbar,.checkout-content::-webkit-scrollbar{width:8px;}",".main-content::-webkit-scrollbar-track,.cart-content::-webkit-scrollbar-track,.checkout-content::-webkit-scrollbar-track{background:#f1f5f9;}",".main-content::-webkit-scrollbar-thumb,.cart-content::-webkit-scrollbar-thumb,.checkout-content::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px;}",".main-content::-webkit-scrollbar-thumb:hover,.cart-content::-webkit-scrollbar-thumb:hover,.checkout-content::-webkit-scrollbar-thumb:hover{background:#94a3b8;}"]})]})},pse=()=>{const e=kn(),t=()=>{e("/login")};return r.jsx("div",{className:"privacy-container",children:r.jsxs("div",{className:"privacy-policy-card",children:[r.jsx("div",{className:"privacy-header",children:r.jsx("button",{type:"button",className:"back-to-login",onClick:t,children:" Back to Login"})}),r.jsxs("div",{className:"privacy-content",children:[r.jsx("h2",{style:{textAlign:"center"},children:r.jsx("b",{children:"PRIVACY POLICY"})}),r.jsx("p",{children:"Effective date: 2025-06-26"}),r.jsxs("p",{children:["1. ",r.jsx("b",{children:"Introduction"})]}),r.jsxs("p",{children:["Welcome to ",r.jsx("b",{children:" Hotel Virat"}),"."]}),r.jsxs("p",{children:[r.jsx("b",{children:"Hotel Virat"}),' ("us", "we", or "our") operates ',r.jsx("b",{children:"https://hotelvirat.com"})," (hereinafter referred to as"," ",r.jsx("b",{children:'"Service"'}),")."]}),r.jsxs("p",{children:["Our Privacy Policy governs your visit to ",r.jsx("b",{children:"https://hotelvirat.com"}),", and explains how we collect, safeguard and disclose information that results from your use of our Service."]}),r.jsx("p",{children:"We use your data to provide and improve Service. By using Service, you agree to the collection and use of information in accordance with this policy. Unless otherwise defined in this Privacy Policy, the terms used in this Privacy Policy have the same meanings as in our Terms and Conditions."}),r.jsxs("p",{children:["Our Terms and Conditions (",r.jsx("b",{children:'"Terms"'}),") govern all use of our Service and together with the Privacy Policy constitutes your agreement with us (",r.jsx("b",{children:'"agreement"'}),")."]}),r.jsxs("p",{children:["2. ",r.jsx("b",{children:"Definitions"})]}),r.jsxs("p",{children:[r.jsx("b",{children:"SERVICE"})," means the https://hotelvirat.comwebsite operated by Hotel Virat."]}),r.jsxs("p",{children:[r.jsx("b",{children:"PERSONAL DATA"})," means data about a living individual who can be identified from those data (or from those and other information either in our possession or likely to come into our possession)."]}),r.jsxs("p",{children:[r.jsx("b",{children:"USAGE DATA"})," is data collected automatically either generated by the use of Service or from Service infrastructure itself (for example, the duration of a page visit)."]}),r.jsxs("p",{children:[r.jsx("b",{children:"COOKIES"})," are small files stored on your device (computer or mobile device)."]}),r.jsxs("p",{children:[r.jsx("b",{children:"DATA CONTROLLER"})," means a natural or legal person who (either alone or jointly or in common with other persons) determines the purposes for which and the manner in which any personal data are, or are to be, processed. For the purpose of this Privacy Policy, we are a Data Controller of your data."]}),r.jsxs("p",{children:[r.jsx("b",{children:"DATA PROCESSORS (OR SERVICE PROVIDERS)"})," means any natural or legal person who processes the data on behalf of the Data Controller. We may use the services of various Service Providers in order to process your data more effectively."]}),r.jsxs("p",{children:[r.jsx("b",{children:"DATA SUBJECT"})," is any living individual who is the subject of Personal Data."]}),r.jsxs("p",{children:[r.jsx("b",{children:"THE USER"})," is the individual using our Service. The User corresponds to the Data Subject, who is the subject of Personal Data."]}),r.jsxs("p",{children:["3. ",r.jsx("b",{children:"Information Collection and Use"})]}),r.jsx("p",{children:"We collect several different types of information for various purposes to provide and improve our Service to you."}),r.jsxs("p",{children:["4. ",r.jsx("b",{children:"Types of Data Collected"})]}),r.jsx("p",{children:r.jsx("b",{children:"Personal Data"})}),r.jsxs("p",{children:["While using our Service, we may ask you to provide us with certain personally identifiable information that can be used to contact or identify you (",r.jsx("b",{children:'"Personal Data"'}),"). Personally identifiable information may include, but is not limited to:"]}),r.jsx("p",{children:"0.1. Email address"}),r.jsx("p",{children:"0.2. First name and last name"}),r.jsx("p",{children:"0.3. Phone number"}),r.jsx("p",{children:"0.4. Address, Country, State, Province, ZIP/Postal code, City"}),r.jsx("p",{children:"0.5. Cookies and Usage Data"}),r.jsx("p",{children:"We may use your Personal Data to contact you with newsletters, marketing or promotional materials and other information that may be of interest to you. You may opt out of receiving any, or all, of these communications from us by following the unsubscribe link."}),r.jsx("p",{children:r.jsx("b",{children:"Usage Data"})}),r.jsxs("p",{children:["We may also collect information that your browser sends whenever you visit our Service or when you access Service by or through any device (",r.jsx("b",{children:'"Usage Data"'}),")."]}),r.jsx("p",{children:"This Usage Data may include information such as your computer's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that you visit, the time and date of your visit, the time spent on those pages, unique device identifiers and other diagnostic data."}),r.jsx("p",{children:"When you access Service with a device, this Usage Data may include information such as the type of device you use, your device unique ID, the IP address of your device, your device operating system, the type of Internet browser you use, unique device identifiers and other diagnostic data."}),r.jsx("p",{children:r.jsx("b",{children:"Tracking Cookies Data"})}),r.jsx("p",{children:"We use cookies and similar tracking technologies to track the activity on our Service and we hold certain information."}),r.jsx("p",{children:"Cookies are files with a small amount of data which may include an anonymous unique identifier. Cookies are sent to your browser from a website and stored on your device. Other tracking technologies are also used such as beacons, tags and scripts to collect and track information and to improve and analyze our Service."}),r.jsx("p",{children:"You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent. However, if you do not accept cookies, you may not be able to use some portions of our Service."}),r.jsx("p",{children:"Examples of Cookies we use:"}),r.jsxs("p",{children:["0.1. ",r.jsx("b",{children:"Session Cookies:"})," We use Session Cookies to operate our Service."]}),r.jsxs("p",{children:["0.2. ",r.jsx("b",{children:"Preference Cookies:"})," We use Preference Cookies to remember your preferences and various settings."]}),r.jsxs("p",{children:["0.3. ",r.jsx("b",{children:"Security Cookies:"})," We use Security Cookies for security purposes."]}),r.jsxs("p",{children:["0.4. ",r.jsx("b",{children:"Advertising Cookies:"})," Advertising Cookies are used to serve you with advertisements that may be relevant to you and your interests."]}),r.jsx("p",{children:r.jsx("b",{children:"Other Data"})}),r.jsxs("p",{children:["While using our Service, we may also collect the following information: sex, age, date of birth, place of birth, passport details, citizenship, registration at place of residence and actual address, telephone number (work, mobile), details of documents on education, qualification, professional training, employment agreements"," ",", information on bonuses and compensation, information on marital status, family members, social security (or other taxpayer identification) number, office location and other data."]}),r.jsxs("p",{children:["5. ",r.jsx("b",{children:"Use of Data"})]}),r.jsx("p",{children:"Hotel Virat uses the collected data for various purposes:"}),r.jsx("p",{children:"0.1. to provide and maintain our Service;"}),r.jsx("p",{children:"0.2. to notify you about changes to our Service;"}),r.jsx("p",{children:"0.3. to allow you to participate in interactive features of our Service when you choose to do so;"}),r.jsx("p",{children:"0.4. to provide customer support;"}),r.jsx("p",{children:"0.5. to gather analysis or valuable information so that we can improve our Service;"}),r.jsx("p",{children:"0.6. to monitor the usage of our Service;"}),r.jsx("p",{children:"0.7. to detect, prevent and address technical issues;"}),r.jsx("p",{children:"0.8. to fulfil any other purpose for which you provide it;"}),r.jsx("p",{children:"0.9. to carry out our obligations and enforce our rights arising from any contracts entered into between you and us, including for billing and collection;"}),r.jsx("p",{children:"0.10. to provide you with notices about your account and/or subscription, including expiration and renewal notices, email-instructions, etc.;"}),r.jsx("p",{children:"0.11. to provide you with news, special offers and general information about other goods, services and events which we offer that are similar to those that you have already purchased or enquired about unless you have opted not to receive such information;"}),r.jsx("p",{children:"0.12. in any other way we may describe when you provide the information;"}),r.jsx("p",{children:"0.13. for any other purpose with your consent."}),r.jsxs("p",{children:["6. ",r.jsx("b",{children:"Retention of Data"})]}),r.jsx("p",{children:"We will retain your Personal Data only for as long as is necessary for the purposes set out in this Privacy Policy. We will retain and use your Personal Data to the extent necessary to comply with our legal obligations (for example, if we are required to retain your data to comply with applicable laws), resolve disputes, and enforce our legal agreements and policies."}),r.jsx("p",{children:"We will also retain Usage Data for internal analysis purposes. Usage Data is generally retained for a shorter period, except when this data is used to strengthen the security or to improve the functionality of our Service, or we are legally obligated to retain this data for longer time periods."}),r.jsxs("p",{children:["7. ",r.jsx("b",{children:"Transfer of Data"})]}),r.jsx("p",{children:"Your information, including Personal Data, may be transferred to  and maintained on  computers located outside of your state, province, country or other governmental jurisdiction where the data protection laws may differ from those of your jurisdiction."}),r.jsx("p",{children:"If you are located outside India and choose to provide information to us, please note that we transfer the data, including Personal Data, to India and process it there."}),r.jsx("p",{children:"Your consent to this Privacy Policy followed by your submission of such information represents your agreement to that transfer."}),r.jsx("p",{children:"Hotel Virat will take all the steps reasonably necessary to ensure that your data is treated securely and in accordance with this Privacy Policy and no transfer of your Personal Data will take place to an organisation or a country unless there are adequate controls in place including the security of your data and other personal information."}),r.jsxs("p",{children:["8. ",r.jsx("b",{children:"Disclosure of Data"})]}),r.jsx("p",{children:"We may disclose personal information that we collect, or you provide:"}),r.jsxs("p",{children:["0.1. ",r.jsx("b",{children:"Business Transaction."})]}),r.jsx("p",{children:"If we or our subsidiaries are involved in a merger, acquisition or asset sale, your Personal Data may be transferred."}),r.jsxs("p",{children:["0.2. ",r.jsx("b",{children:"Other cases. We may disclose your information also:"})]}),r.jsx("p",{children:"0.2.1. to our subsidiaries and affiliates;"}),r.jsx("p",{children:"0.2.2. to contractors, service providers, and other third parties we use to support our business;"}),r.jsx("p",{children:"0.2.3. to fulfill the purpose for which you provide it;"}),r.jsx("p",{children:"0.2.4. for the purpose of including your company's logo on our website;"}),r.jsx("p",{children:"0.2.5. for any other purpose disclosed by us when you provide the information;"}),r.jsx("p",{children:"0.2.6. with your consent in any other cases;"}),r.jsx("p",{children:"0.2.7. if we believe disclosure is necessary or appropriate to protect the rights, property, or safety of the Company, our customers, or others."}),r.jsxs("p",{children:["9. ",r.jsx("b",{children:"Security of Data"})]}),r.jsx("p",{children:"The security of your data is important to us but remember that no method of transmission over the Internet or method of electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your Personal Data, we cannot guarantee its absolute security."}),r.jsxs("p",{children:["10. ",r.jsx("b",{children:"Your Data Protection Rights Under General Data Protection Regulation (GDPR)"})]}),r.jsx("p",{children:"If you are a resident of the European Union (EU) and European Economic Area (EEA), you have certain data protection rights, covered by GDPR."}),r.jsx("p",{children:"We aim to take reasonable steps to allow you to correct, amend, delete, or limit the use of your Personal Data."}),r.jsxs("p",{children:[" ","If you wish to be informed what Personal Data we hold about you and if you want it to be removed from our systems, please email us at ",r.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]}),r.jsx("p",{children:"In certain circumstances, you have the following data protection rights:"}),r.jsx("p",{children:"0.1. the right to access, update or to delete the information we have on you;"}),r.jsx("p",{children:"0.2. the right of rectification. You have the right to have your information rectified if that information is inaccurate or incomplete;"}),r.jsx("p",{children:"0.3. the right to object. You have the right to object to our processing of your Personal Data;"}),r.jsx("p",{children:"0.4. the right of restriction. You have the right to request that we restrict the processing of your personal information;"}),r.jsx("p",{children:"0.5. the right to data portability. You have the right to be provided with a copy of your Personal Data in a structured, machine-readable and commonly used format;"}),r.jsx("p",{children:"0.6. the right to withdraw consent. You also have the right to withdraw your consent at any time where we rely on your consent to process your personal information;"}),r.jsx("p",{children:"Please note that we may ask you to verify your identity before responding to such requests. Please note, we may not able to provide Service without some necessary data."}),r.jsx("p",{children:"You have the right to complain to a Data Protection Authority about our collection and use of your Personal Data. For more information, please contact your local data protection authority in the European Economic Area (EEA)."}),r.jsxs("p",{children:["11. ",r.jsx("b",{children:"Your Data Protection Rights under the California Privacy Protection Act (CalOPPA)"})]}),r.jsx("p",{children:"CalOPPA is the first state law in the nation to require commercial websites and online services to post a privacy policy. The law's reach stretches well beyond California to require a person or company in the United States (and conceivable the world) that operates websites collecting personally identifiable information from California consumers to post a conspicuous privacy policy on its website stating exactly the information being collected and those individuals with whom it is being shared, and to comply with this policy."}),r.jsx("p",{children:"According to CalOPPA we agree to the following:"}),r.jsx("p",{children:"0.1. users can visit our site anonymously;"}),r.jsx("p",{children:'0.2. our Privacy Policy link includes the word "Privacy", and can easily be found on the home page of our website;'}),r.jsx("p",{children:"0.3. users will be notified of any privacy policy changes on our Privacy Policy Page;"}),r.jsxs("p",{children:["0.4. users are able to change their personal information by emailing us at ",r.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]}),r.jsx("p",{children:'Our Policy on "Do Not Track" Signals:'}),r.jsx("p",{children:"We honor Do Not Track signals and do not track, plant cookies, or use advertising when a Do Not Track browser mechanism is in place. Do Not Track is a preference you can set in your web browser to inform websites that you do not want to be tracked."}),r.jsx("p",{children:"You can enable or disable Do Not Track by visiting the Preferences or Settings page of your web browser."}),r.jsxs("p",{children:["12. ",r.jsx("b",{children:"Your Data Protection Rights under the California Consumer Privacy Act (CCPA)"})]}),r.jsx("p",{children:"If you are a California resident, you are entitled to learn what data we collect about you, ask to delete your data and not to sell (share) it. To exercise your data protection rights, you can make certain requests and ask us:"}),r.jsx("p",{children:r.jsx("b",{children:"0.1. What personal information we have about you. If you make this request, we will return to you:"})}),r.jsx("p",{children:"0.0.1. The categories of personal information we have collected about you."}),r.jsx("p",{children:"0.0.2. The categories of sources from which we collect your personal information."}),r.jsx("p",{children:"0.0.3. The business or commercial purpose for collecting or selling your personal information."}),r.jsx("p",{children:"0.0.4. The categories of third parties with whom we share personal information."}),r.jsx("p",{children:"0.0.5. The specific pieces of personal information we have collected about you."}),r.jsx("p",{children:"0.0.6. A list of categories of personal information that we have sold, along with the category of any other company we sold it to. If we have not sold your personal information, we will inform you of that fact."}),r.jsx("p",{children:"0.0.7. A list of categories of personal information that we have disclosed for a business purpose, along with the category of any other company we shared it with."}),r.jsx("p",{children:"Please note, you are entitled to ask us to provide you with this information up to two times in a rolling twelve-month period. When you make this request, the information provided may be limited to the personal information we collected about you in the previous 12 months."}),r.jsx("p",{children:r.jsx("b",{children:"0.2. To delete your personal information. If you make this request, we will delete the personal information we hold about you as of the date of your request from our records and direct any service providers to do the same. In some cases, deletion may be accomplished through de-identification of the information. If you choose to delete your personal information, you may not be able to use certain functions that require your personal information to operate."})}),r.jsx("p",{children:r.jsx("b",{children:`0.3. To stop selling your personal information. We don't sell or rent your personal information to any third parties for any purpose. We do not sell your personal information for monetary consideration. However, under some circumstances, a transfer of personal information to a third party, or within our family of companies, without monetary consideration may be considered a "sale" under California law. You are the only owner of your Personal Data and can request disclosure or deletion at any time.`})}),r.jsx("p",{children:"If you submit a request to stop selling your personal information, we will stop making such transfers."}),r.jsx("p",{children:"Please note, if you ask us to delete or stop selling your data, it may impact your experience with us, and you may not be able to participate in certain programs or membership services which require the usage of your personal information to function. But in no circumstances, we will discriminate against you for exercising your rights."}),r.jsxs("p",{children:["To exercise your California data protection rights described above, please send your request(s) by email:"," ",r.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]}),r.jsx("p",{children:"Your data protection rights, described above, are covered by the CCPA, short for the California Consumer Privacy Act. To find out more, visit the official California Legislative Information website. The CCPA took effect on 01/01/2020."}),r.jsxs("p",{children:["13. ",r.jsx("b",{children:"Service Providers"})]}),r.jsxs("p",{children:["We may employ third party companies and individuals to facilitate our Service (",r.jsx("b",{children:'"Service Providers"'}),"), provide Service on our behalf, perform Service-related services or assist us in analysing how our Service is used."]}),r.jsx("p",{children:"These third parties have access to your Personal Data only to perform these tasks on our behalf and are obligated not to disclose or use it for any other purpose."}),r.jsxs("p",{children:["14. ",r.jsx("b",{children:"Analytics"})]}),r.jsx("p",{children:"We may use third-party Service Providers to monitor and analyze the use of our Service."}),r.jsxs("p",{children:["15. ",r.jsx("b",{children:"CI/CD tools"})]}),r.jsx("p",{children:"We may use third-party Service Providers to automate the development process of our Service."}),r.jsxs("p",{children:["16. ",r.jsx("b",{children:"Behavioral Remarketing"})]}),r.jsx("p",{children:"We may use remarketing services to advertise on third party websites to you after you visited our Service. We and our third-party vendors use cookies to inform, optimise and serve ads based on your past visits to our Service."}),r.jsxs("p",{children:["17. ",r.jsx("b",{children:"Payments"})]}),r.jsx("p",{children:"We may provide paid products and/or services within Service. In that case, we use third-party services for payment processing (e.g. payment processors)."}),r.jsx("p",{children:"We will not store or collect your payment card details. That information is provided directly to our third-party payment processors whose use of your personal information is governed by their Privacy Policy. These payment processors adhere to the standards set by PCI-DSS as managed by the PCI Security Standards Council, which is a joint effort of brands like Visa, Mastercard, American Express and Discover. PCI-DSS requirements help ensure the secure handling of payment information."}),r.jsxs("p",{children:["18. ",r.jsx("b",{children:"Links to Other Sites"})]}),r.jsx("p",{children:"Our Service may contain links to other sites that are not operated by us. If you click a third party link, you will be directed to that third party's site. We strongly advise you to review the Privacy Policy of every site you visit."}),r.jsx("p",{children:"We have no control over and assume no responsibility for the content, privacy policies or practices of any third party sites or services."}),r.jsxs("p",{children:["19. ",r.jsx("b",{children:"Children's Privacy"})]}),r.jsxs("p",{children:["Our Services are not intended for use by children under the age of 18 (",r.jsx("b",{children:'"Child"'})," or ",r.jsx("b",{children:'"Children"'}),")."]}),r.jsx("p",{children:"We do not knowingly collect personally identifiable information from Children under 18. If you become aware that a Child has provided us with Personal Data, please contact us. If we become aware that we have collected Personal Data from Children without verification of parental consent, we take steps to remove that information from our servers."}),r.jsxs("p",{children:["20. ",r.jsx("b",{children:"Changes to This Privacy Policy"})]}),r.jsx("p",{children:"We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page."}),r.jsx("p",{children:'We will let you know via email and/or a prominent notice on our Service, prior to the change becoming effective and update "effective date" at the top of this Privacy Policy.'}),r.jsx("p",{children:"You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page."}),r.jsxs("p",{children:["21. ",r.jsx("b",{children:"Contact Us"})]}),r.jsxs("p",{children:["If you have any questions about this Privacy Policy, please contact us by email:"," ",r.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]})]})]})})},mse=()=>{const e=kn(),t=()=>{e("/login")};return r.jsx("div",{className:"privacy-container",children:r.jsxs("div",{className:"privacy-policy-card",children:[r.jsx("div",{className:"privacy-header",children:r.jsx("button",{type:"button",className:"back-to-login",onClick:t,children:" Back to Login"})}),r.jsxs("div",{className:"privacy-content",children:[r.jsx("h2",{style:{textAlign:"center"},children:r.jsx("b",{children:"TERMS AND CONDITIONS"})}),r.jsx("p",{children:"Last updated: 2025-06-26"}),r.jsxs("p",{children:["1. ",r.jsx("b",{children:"Introduction"})]}),r.jsxs("p",{children:["Welcome to ",r.jsx("b",{children:"Hotel Virat"}),' ("Company", "we", "our", "us")!']}),r.jsxs("p",{children:['These Terms of Service ("Terms", "Terms of Service") govern your use of our website located at'," ",r.jsx("b",{children:"https://hotelvirat.com"}),' (together or individually "Service") operated by ',r.jsx("b",{children:"Hotel Virat"}),"."]}),r.jsx("p",{children:"Our Privacy Policy also governs your use of our Service and explains how we collect, safeguard and disclose information that results from your use of our web pages."}),r.jsx("p",{children:'Your agreement with us includes these Terms and our Privacy Policy ("Agreements"). You acknowledge that you have read and understood Agreements, and agree to be bound of them.'}),r.jsxs("p",{children:["If you do not agree with (or cannot comply with) Agreements, then you may not use the Service, but please let us know by emailing at ",r.jsx("b",{children:"infohotelvirat@gmail.com"})," so we can try to find a solution. These Terms apply to all visitors, users and others who wish to access or use Service."]}),r.jsxs("p",{children:["2. ",r.jsx("b",{children:"Communications"})]}),r.jsx("p",{children:"By using our Service, you agree to subscribe to newsletters, marketing or promotional materials and other information we may send. However, you may opt out of receiving any, or all, of these communications from us by following the unsubscribe link or by emailing at infohotelvirat@gmail.com."}),r.jsxs("p",{children:["3. ",r.jsx("b",{children:"Purchases"})]}),r.jsx("p",{children:'If you wish to purchase any product or service made available through Service ("Purchase"), you may be asked to supply certain information relevant to your Purchase including but not limited to, your credit or debit card number, the expiration date of your card, your billing address, and your shipping information.'}),r.jsx("p",{children:"You represent and warrant that: (i) you have the legal right to use any card(s) or other payment method(s) in connection with any Purchase; and that (ii) the information you supply to us is true, correct and complete."}),r.jsx("p",{children:"We may employ the use of third party services for the purpose of facilitating payment and the completion of Purchases. By submitting your information, you grant us the right to provide the information to these third parties subject to our Privacy Policy."}),r.jsx("p",{children:"We reserve the right to refuse or cancel your order at any time for reasons including but not limited to: product or service availability, errors in the description or price of the product or service, error in your order or other reasons."}),r.jsx("p",{children:"We reserve the right to refuse or cancel your order if fraud or an unauthorized or illegal transaction is suspected."}),r.jsxs("p",{children:["4. ",r.jsx("b",{children:"Contests, Sweepstakes and Promotions"})]}),r.jsx("p",{children:'Any contests, sweepstakes or other promotions (collectively, "Promotions") made available through Service may be governed by rules that are separate from these Terms of Service. If you participate in any Promotions, please review the applicable rules as well as our Privacy Policy. If the rules for a Promotion conflict with these Terms of Service, Promotion rules will apply.'}),r.jsxs("p",{children:["5. ",r.jsx("b",{children:"Refunds"})]}),r.jsxs("p",{children:[r.jsx("b",{children:"NO REFUND POLICY:"})," All payments made for products, services, orders, reservations, events, and any other transactions through Hotel Virat are ",r.jsx("b",{children:"strictly non-refundable"}),". We do not issue refunds for any contracts, purchases, or services under any circumstances. Please review your order details carefully before confirming payment as all sales are final."]}),r.jsxs("p",{children:["6. ",r.jsx("b",{children:"Content"})]}),r.jsx("p",{children:"Content found on or through this Service are the property of Hotel Virat or used with permission. You may not distribute, modify, transmit, reuse, download, repost, copy, or use said Content, whether in whole or in part, for commercial purposes or for personal gain, without express advance written permission from us."}),r.jsxs("p",{children:["7. ",r.jsx("b",{children:"Prohibited Uses"})]}),r.jsx("p",{children:"You may use Service only for lawful purposes and in accordance with Terms. You agree not to use Service:"}),r.jsx("p",{children:"0.1. In any way that violates any applicable national or international law or regulation."}),r.jsx("p",{children:"0.2. For the purpose of exploiting, harming, or attempting to exploit or harm minors in any way by exposing them to inappropriate content or otherwise."}),r.jsx("p",{children:'0.3. To transmit, or procure the sending of, any advertising or promotional material, including any "junk mail", "chain letter," "spam," or any other similar solicitation.'}),r.jsx("p",{children:"0.4. To impersonate or attempt to impersonate Company, a Company employee, another user, or any other person or entity."}),r.jsx("p",{children:"0.5. In any way that infringes upon the rights of others, or in any way is illegal, threatening, fraudulent, or harmful, or in connection with any unlawful, illegal, fraudulent, or harmful purpose or activity."}),r.jsx("p",{children:"0.6. To engage in any other conduct that restricts or inhibits anyone's use or enjoyment of Service, or which, as determined by us, may harm or offend Company or users of Service or expose them to liability."}),r.jsx("p",{children:"Additionally, you agree not to:"}),r.jsx("p",{children:"0.1. Use Service in any manner that could disable, overburden, damage, or impair Service or interfere with any other party's use of Service, including their ability to engage in real time activities through Service."}),r.jsx("p",{children:"0.2. Use any robot, spider, or other automatic device, process, or means to access Service for any purpose, including monitoring or copying any of the material on Service."}),r.jsx("p",{children:"0.3. Use any manual process to monitor or copy any of the material on Service or for any other unauthorized purpose without our prior written consent."}),r.jsx("p",{children:"0.4. Use any device, software, or routine that interferes with the proper working of Service."}),r.jsx("p",{children:"0.5. Introduce any viruses, trojan horses, worms, logic bombs, or other material which is malicious or technologically harmful."}),r.jsx("p",{children:"0.6. Attempt to gain unauthorized access to, interfere with, damage, or disrupt any parts of Service, the server on which Service is stored, or any server, computer, or database connected to Service."}),r.jsx("p",{children:"0.7. Attack Service via a denial-of-service attack or a distributed denial-of-service attack."}),r.jsx("p",{children:"0.8. Take any action that may damage or falsify Company rating."}),r.jsx("p",{children:"0.9. Otherwise attempt to interfere with the proper working of Service."}),r.jsxs("p",{children:["8. ",r.jsx("b",{children:"Analytics"})]}),r.jsx("p",{children:"We may use third-party Service Providers to monitor and analyze the use of our Service."}),r.jsxs("p",{children:["9. ",r.jsx("b",{children:"No Use By Minors"})]}),r.jsx("p",{children:"Service is intended only for access and use by individuals at least eighteen (18) years old. By accessing or using Service, you warrant and represent that you are at least eighteen (18) years of age and with the full authority, right, and capacity to enter into this agreement and abide by all of the terms and conditions of Terms. If you are not at least eighteen (18) years old, you are prohibited from both the access and usage of Service."}),r.jsxs("p",{children:["10. ",r.jsx("b",{children:"Accounts"})]}),r.jsx("p",{children:"When you create an account with us, you guarantee that you are above the age of 18, and that the information you provide us is accurate, complete, and current at all times. Inaccurate, incomplete, or obsolete information may result in the immediate termination of your account on Service."}),r.jsx("p",{children:"You are responsible for maintaining the confidentiality of your account and password, including but not limited to the restriction of access to your computer and/or account. You agree to accept responsibility for any and all activities or actions that occur under your account and/or password, whether your password is with our Service or a third-party service. You must notify us immediately upon becoming aware of any breach of security or unauthorized use of your account."}),r.jsx("p",{children:"You may not use as a username the name of another person or entity or that is not lawfully available for use, a name or trademark that is subject to any rights of another person or entity other than you, without appropriate authorization. You may not use as a username any name that is offensive, vulgar or obscene."}),r.jsx("p",{children:"We reserve the right to refuse service, terminate accounts, remove or edit content, or cancel orders in our sole discretion."}),r.jsxs("p",{children:["11. ",r.jsx("b",{children:"Intellectual Property"})]}),r.jsx("p",{children:"Service and its original content (excluding Content provided by users), features and functionality are and will remain the exclusive property of Hotel Virat and its licensors. Service is protected by copyright, trademark, and other laws of and foreign countries. Our trademarks may not be used in connection with any product or service without the prior written consent of Hotel Virat."}),r.jsxs("p",{children:["12. ",r.jsx("b",{children:"Copyright Policy"})]}),r.jsx("p",{children:'We respect the intellectual property rights of others. It is our policy to respond to any claim that Content posted on Service infringes on the copyright or other intellectual property rights ("Infringement") of any person or entity.'}),r.jsx("p",{children:'If you are a copyright owner, or authorized on behalf of one, and you believe that the copyrighted work has been copied in a way that constitutes copyright infringement, please submit your claim via email to infohotelvirat@gmail.com, with the subject line: "Copyright Infringement" and include in your claim a detailed description of the alleged Infringement as detailed below, under "DMCA Notice and Procedure for Copyright Infringement Claims"'}),r.jsx("p",{children:"You may be held accountable for damages (including costs and attorneys' fees) for misrepresentation or bad-faith claims on the infringement of any Content found on and/or through Service on your copyright."}),r.jsxs("p",{children:["13. ",r.jsx("b",{children:"DMCA Notice and Procedure for Copyright Infringement Claims"})]}),r.jsx("p",{children:"You may submit a notification pursuant to the Digital Millennium Copyright Act (DMCA) by providing our Copyright Agent with the following information in writing (see 17 U.S.C 512(c)(3) for further detail):"}),r.jsx("p",{children:"0.1. an electronic or physical signature of the person authorized to act on behalf of the owner of the copyright's interest;"}),r.jsx("p",{children:"0.2. a description of the copyrighted work that you claim has been infringed, including the URL (i.e., web page address) of the location where the copyrighted work exists or a copy of the copyrighted work;"}),r.jsx("p",{children:"0.3. identification of the URL or other specific location on Service where the material that you claim is infringing is located;"}),r.jsx("p",{children:"0.4. your address, telephone number, and email address;"}),r.jsx("p",{children:"0.5. a statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law;"}),r.jsx("p",{children:"0.6. a statement by you, made under penalty of perjury, that the above information in your notice is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf."}),r.jsx("p",{children:"You can contact our Copyright Agent via email at infohotelvirat@gmail.com."}),r.jsxs("p",{children:["14. ",r.jsx("b",{children:"Error Reporting and Feedback"})]}),r.jsx("p",{children:'You may provide us either directly at infohotelvirat@gmail.com or via third party sites and tools with information and feedback concerning errors, suggestions for improvements, ideas, problems, complaints, and other matters related to our Service ("Feedback"). You acknowledge and agree that: (i) you shall not retain, acquire or assert any intellectual property right or other right, title or interest in or to the Feedback; (ii) Company may have development ideas similar to the Feedback; (iii) Feedback does not contain confidential information or proprietary information from you or any third party; and (iv) Company is not under any obligation of confidentiality with respect to the Feedback. In the event the transfer of the ownership to the Feedback is not possible due to applicable mandatory laws, you grant Company and its affiliates an exclusive, transferable, irrevocable, free-of-charge, sub-licensable, unlimited and perpetual right to use (including copy, modify, create derivative works, publish, distribute and commercialize) Feedback in any manner and for any purpose.'}),r.jsxs("p",{children:["15. ",r.jsx("b",{children:"Links To Other Web Sites"})]}),r.jsx("p",{children:"Our Service may contain links to third party web sites or services that are not owned or controlled by Hotel Virat."}),r.jsx("p",{children:"Hotel Virat has no control over, and assumes no responsibility for the content, privacy policies, or practices of any third party web sites or services. We do not warrant the offerings of any of these entities/individuals or their websites."}),r.jsx("p",{children:"YOU ACKNOWLEDGE AND AGREE THAT COMPANY SHALL NOT BE RESPONSIBLE OR LIABLE, DIRECTLY OR INDIRECTLY, FOR ANY DAMAGE OR LOSS CAUSED OR ALLEGED TO BE CAUSED BY OR IN CONNECTION WITH USE OF OR RELIANCE ON ANY SUCH CONTENT, GOODS OR SERVICES AVAILABLE ON OR THROUGH ANY SUCH THIRD PARTY WEB SITES OR SERVICES."}),r.jsx("p",{children:"WE STRONGLY ADVISE YOU TO READ THE TERMS OF SERVICE AND PRIVACY POLICIES OF ANY THIRD PARTY WEB SITES OR SERVICES THAT YOU VISIT."}),r.jsxs("p",{children:["16. ",r.jsx("b",{children:"Disclaimer Of Warranty"})]}),r.jsx("p",{children:'THESE SERVICES ARE PROVIDED BY COMPANY ON AN "AS IS" AND "AS AVAILABLE" BASIS. COMPANY MAKES NO REPRESENTATIONS OR WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, AS TO THE OPERATION OF THEIR SERVICES, OR THE INFORMATION, CONTENT OR MATERIALS INCLUDED THEREIN. YOU EXPRESSLY AGREE THAT YOUR USE OF THESE SERVICES, THEIR CONTENT, AND ANY SERVICES OR ITEMS OBTAINED FROM US IS AT YOUR SOLE RISK.'}),r.jsx("p",{children:"NEITHER COMPANY NOR ANY PERSON ASSOCIATED WITH COMPANY MAKES ANY WARRANTY OR REPRESENTATION WITH RESPECT TO THE COMPLETENESS, SECURITY, RELIABILITY, QUALITY, ACCURACY, OR AVAILABILITY OF THE SERVICES. WITHOUT LIMITING THE FOREGOING, NEITHER COMPANY NOR ANYONE ASSOCIATED WITH COMPANY REPRESENTS OR WARRANTS THAT THE SERVICES, THEIR CONTENT, OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE SERVICES WILL BE ACCURATE, RELIABLE, ERROR-FREE, OR UNINTERRUPTED, THAT DEFECTS WILL BE CORRECTED, THAT THE SERVICES OR THE SERVER THAT MAKES IT AVAILABLE ARE FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS OR THAT THE SERVICES OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE SERVICES WILL OTHERWISE MEET YOUR NEEDS OR EXPECTATIONS."}),r.jsx("p",{children:"COMPANY HEREBY DISCLAIMS ALL WARRANTIES OF ANY KIND, WHETHER EXPRESS OR IMPLIED, STATUTORY, OR OTHERWISE, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT, AND FITNESS FOR PARTICULAR PURPOSE."}),r.jsx("p",{children:"THE FOREGOING DOES NOT AFFECT ANY WARRANTIES WHICH CANNOT BE EXCLUDED OR LIMITED UNDER APPLICABLE LAW."}),r.jsxs("p",{children:["17. ",r.jsx("b",{children:"Limitation Of Liability"})]}),r.jsx("p",{children:"EXCEPT AS PROHIBITED BY LAW, YOU WILL HOLD US AND OUR OFFICERS, DIRECTORS, EMPLOYEES, AND AGENTS HARMLESS FOR ANY INDIRECT, PUNITIVE, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGE, HOWEVER IT ARISES (INCLUDING ATTORNEYS' FEES AND ALL RELATED COSTS AND EXPENSES OF LITIGATION AND ARBITRATION, OR AT TRIAL OR ON APPEAL, IF ANY, WHETHER OR NOT LITIGATION OR ARBITRATION IS INSTITUTED), WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE, OR OTHER TORTIOUS ACTION, OR ARISING OUT OF OR IN CONNECTION WITH THIS AGREEMENT, INCLUDING WITHOUT LIMITATION ANY CLAIM FOR PERSONAL INJURY OR PROPERTY DAMAGE, ARISING FROM THIS AGREEMENT AND ANY VIOLATION BY YOU OF ANY FEDERAL, STATE, OR LOCAL LAWS, STATUTES, RULES, OR REGULATIONS, EVEN IF COMPANY HAS BEEN PREVIOUSLY ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. EXCEPT AS PROHIBITED BY LAW, IF THERE IS LIABILITY FOUND ON THE PART OF COMPANY, IT WILL BE LIMITED TO THE AMOUNT PAID FOR THE PRODUCTS AND/OR SERVICES, AND UNDER NO CIRCUMSTANCES WILL THERE BE CONSEQUENTIAL OR PUNITIVE DAMAGES. SOME STATES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF PUNITIVE, INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE PRIOR LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU."}),r.jsxs("p",{children:["18. ",r.jsx("b",{children:"Termination"})]}),r.jsx("p",{children:"We may terminate or suspend your account and bar access to Service immediately, without prior notice or liability, under our sole discretion, for any reason whatsoever and without limitation, including but not limited to a breach of Terms."}),r.jsx("p",{children:"If you wish to terminate your account, you may simply discontinue using Service."}),r.jsx("p",{children:"All provisions of Terms which by their nature should survive termination shall survive termination, including, without limitation, ownership provisions, warranty disclaimers, indemnity and limitations of liability."}),r.jsxs("p",{children:["19. ",r.jsx("b",{children:"Governing Law"})]}),r.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of India, which governing law applies to agreement without regard to its conflict of law provisions."}),r.jsx("p",{children:"Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights. If any provision of these Terms is held to be invalid or unenforceable by a court, the remaining provisions of these Terms will remain in effect. These Terms constitute the entire agreement between us regarding our Service and supersede and replace any prior agreements we might have had between us regarding Service."}),r.jsxs("p",{children:["20. ",r.jsx("b",{children:"Changes To Service"})]}),r.jsx("p",{children:"We reserve the right to withdraw or amend our Service, and any service or material we provide via Service, in our sole discretion without notice. We will not be liable if for any reason all or any part of Service is unavailable at any time or for any period. From time to time, we may restrict access to some parts of Service, or the entire Service, to users, including registered users."}),r.jsxs("p",{children:["21. ",r.jsx("b",{children:"Amendments To Terms"})]}),r.jsx("p",{children:"We may amend Terms at any time by posting the amended terms on this site. It is your responsibility to review these Terms periodically."}),r.jsx("p",{children:"Your continued use of the Platform following the posting of revised Terms means that you accept and agree to the changes. You are expected to check this page frequently so you are aware of any changes, as they are binding on you."}),r.jsx("p",{children:"By continuing to access or use our Service after any revisions become effective, you agree to be bound by the revised terms. If you do not agree to the new terms, you are no longer authorized to use Service."}),r.jsxs("p",{children:["22. ",r.jsx("b",{children:"Waiver And Severability"})]}),r.jsx("p",{children:"No waiver by Company of any term or condition set forth in Terms shall be deemed a further or continuing waiver of such term or condition or a waiver of any other term or condition, and any failure of Company to assert a right or provision under Terms shall not constitute a waiver of such right or provision."}),r.jsx("p",{children:"If any provision of Terms is held by a court or other tribunal of competent jurisdiction to be invalid, illegal or unenforceable for any reason, such provision shall be eliminated or limited to the minimum extent such that the remaining provisions of Terms will continue in full force and effect."}),r.jsxs("p",{children:["23. ",r.jsx("b",{children:"Acknowledgement"})]}),r.jsx("p",{children:"BY USING SERVICE OR OTHER SERVICES PROVIDED BY US, YOU ACKNOWLEDGE THAT YOU HAVE READ THESE TERMS OF SERVICE AND AGREE TO BE BOUND BY THEM."}),r.jsxs("p",{children:["24. ",r.jsx("b",{children:"Contact Us"})]}),r.jsxs("p",{children:["Please send your feedback, comments, requests for technical support by email:"," ",r.jsx("b",{children:"infohotelvirat@gmail.com"}),"."]})]})]})})},xse=()=>{var B,M,F;const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState(""),[u,h]=w.useState([]),[p,m]=w.useState({status:"",subscriptionType:"",search:""}),[g,b]=w.useState(null),[j,v]=w.useState(!1),[y,A]=w.useState("");w.useEffect(()=>{(async()=>{try{const P=await(await fetch("https://hotelvirat.com/api/v1/hotel/branch")).json();h(P),P.length>0&&d(P[0]._id)}catch(L){console.error("Error fetching branches:",L)}})()},[]),w.useEffect(()=>{l&&E()},[l,p]);const E=async()=>{a(!0);try{let N=`https://hotelvirat.com/api/v1/hotel/subscription?branchId=${l}`;p.status&&(N+=`&status=${p.status}`),p.subscriptionType&&(N+=`&subscriptionType=${p.subscriptionType}`);const P=await(await fetch(N)).json();if(P.success){let _=P.data;p.search&&(_=_.filter(R=>{var W,G,oe,q;return((G=(W=R.userId)==null?void 0:W.name)==null?void 0:G.toLowerCase().includes(p.search.toLowerCase()))||((q=(oe=R.productId)==null?void 0:oe.name)==null?void 0:q.toLowerCase().includes(p.search.toLowerCase()))})),t(_)}else i(P.message)}catch(N){console.error("Error fetching subscriptions:",N),i("Failed to fetch subscriptions")}finally{a(!1)}},O=async(N,L,P={})=>{try{const R=await(await fetch(`https://hotelvirat.com/api/v1/hotel/subscription/${N}/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).json();R.success?(E(),v(!1),b(null)):alert(R.message)}catch(_){console.error(`Error ${L}ing subscription:`,_),alert(`Failed to ${L} subscription`)}},S=N=>{switch(N){case"active":return"#4CAF50";case"paused":return"#FF9800";case"cancelled":return"#F44336";case"expired":return"#9E9E9E";default:return"#666"}},C=N=>{switch(N){case"weekly":return"#2196F3";case"monthly":return"#9C27B0";case"yearly":return"#FF5722";default:return"#666"}},k=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),I=(N,L)=>{b(N),A(L),v(!0)},z=()=>{v(!1),b(null),A("")};return n?r.jsx("div",{className:"subscription-container",children:r.jsxs("div",{className:"loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading subscriptions..."})]})}):r.jsxs("div",{className:"subscription-container",children:[r.jsx("div",{className:"subscription-header",children:r.jsx("h1",{children:"Subscription Management"})}),r.jsxs("div",{className:"branch-selector",children:[r.jsx("label",{htmlFor:"branch-select",children:"Select Branch:"}),r.jsx("select",{id:"branch-select",value:l,onChange:N=>d(N.target.value),className:"branch-select",children:u.map(N=>r.jsx("option",{value:N._id,children:N.name},N._id))})]}),r.jsxs("div",{className:"filters",children:[r.jsx("div",{className:"filter-group",children:r.jsx("input",{type:"text",placeholder:"Search by customer or product...",value:p.search,onChange:N=>m({...p,search:N.target.value}),className:"search-input"})}),r.jsx("div",{className:"filter-group",children:r.jsxs("select",{value:p.status,onChange:N=>m({...p,status:N.target.value}),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"paused",children:"Paused"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"expired",children:"Expired"})]})}),r.jsx("div",{className:"filter-group",children:r.jsxs("select",{value:p.subscriptionType,onChange:N=>m({...p,subscriptionType:N.target.value}),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})})]}),r.jsxs("div",{className:"subscriptions-table-container",children:[r.jsxs("table",{className:"subscriptions-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Quantity"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(N=>{var L,P,_,R,W;return r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"customer-info",children:[r.jsx("strong",{children:(L=N.userId)==null?void 0:L.name}),r.jsx("span",{children:(P=N.userId)==null?void 0:P.mobile})]})}),r.jsx("td",{children:r.jsxs("div",{className:"product-info",children:[r.jsx("img",{src:((_=N.productId)==null?void 0:_.image)||"/placeholder-product.jpg",alt:(R=N.productId)==null?void 0:R.name,className:"product-image"}),r.jsx("span",{children:(W=N.productId)==null?void 0:W.name})]})}),r.jsx("td",{children:r.jsx("span",{className:"subscription-type",style:{backgroundColor:C(N.subscriptionType)},children:N.subscriptionType})}),r.jsx("td",{children:N.quantity}),r.jsxs("td",{children:["",N.totalPrice]}),r.jsx("td",{children:r.jsx("span",{className:"status-badge",style:{backgroundColor:S(N.status)},children:N.status})}),r.jsx("td",{children:k(N.nextDeliveryDate)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"btn-view",onClick:()=>I(N,"view"),children:"View"}),N.status==="active"&&r.jsx("button",{className:"btn-pause",onClick:()=>I(N,"pause"),children:"Pause"}),N.status==="paused"&&r.jsx("button",{className:"btn-resume",onClick:()=>O(N._id,"resume"),children:"Resume"}),N.status!=="cancelled"&&r.jsx("button",{className:"btn-cancel",onClick:()=>I(N,"cancel"),children:"Cancel"})]})})]},N._id)})})]}),e.length===0&&r.jsx("div",{className:"no-subscriptions",children:r.jsx("p",{children:"No subscriptions found for the selected criteria."})})]}),j&&g&&r.jsx("div",{className:"modal-overlay",onClick:z,children:r.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:[y==="view"&&"Subscription Details",y==="pause"&&"Pause Subscription",y==="cancel"&&"Cancel Subscription"]}),r.jsx("button",{className:"close-btn",onClick:z,children:""})]}),r.jsxs("div",{className:"modal-body",children:[y==="view"&&r.jsxs("div",{className:"subscription-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Customer:"})," ",(B=g.userId)==null?void 0:B.name]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Product:"})," ",(M=g.productId)==null?void 0:M.name]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Type:"})," ",g.subscriptionType]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Quantity:"})," ",g.quantity]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Price:"})," ",g.totalPrice]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Status:"})," ",g.status]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Start Date:"})," ",k(g.startDate)]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"End Date:"})," ",k(g.endDate)]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Next Delivery:"})," ",k(g.nextDeliveryDate)]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Delivery Address:"})," ",g.deliveryAddress]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Delivery Days:"})," ",(F=g.deliveryDays)==null?void 0:F.join(", ")]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Delivery Time:"})," ",g.deliveryTime]})]}),y==="pause"&&r.jsxs("div",{className:"pause-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pause-reason",children:"Reason for pausing:"}),r.jsx("textarea",{id:"pause-reason",placeholder:"Enter reason for pausing subscription...",rows:"3"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pause-end-date",children:"Pause until (optional):"}),r.jsx("input",{type:"date",id:"pause-end-date"})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"btn-confirm",onClick:()=>{const N=document.getElementById("pause-reason").value,L=document.getElementById("pause-end-date").value;O(g._id,"pause",{pauseReason:N,pauseEndDate:L})},children:"Pause Subscription"}),r.jsx("button",{className:"btn-cancel",onClick:z,children:"Cancel"})]})]}),y==="cancel"&&r.jsxs("div",{className:"cancel-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"cancel-reason",children:"Reason for cancellation:"}),r.jsx("textarea",{id:"cancel-reason",placeholder:"Enter reason for cancelling subscription...",rows:"3"})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"btn-confirm",onClick:()=>{const N=document.getElementById("cancel-reason").value;O(g._id,"cancel",{cancellationReason:N})},children:"Cancel Subscription"}),r.jsx("button",{className:"btn-cancel",onClick:z,children:"Keep Subscription"})]})]})]})]})})]})},gse=()=>{var F,N,L;const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState(""),[u,h]=w.useState([]),[p,m]=w.useState({status:"",planType:"",search:""}),[g,b]=w.useState(null),[j,v]=w.useState(!1),[y,A]=w.useState(""),[E,O]=w.useState({scheduledDate:"",status:"scheduled",deliveryPerson:{name:"",phone:"",id:""},deliveryNotes:"",rating:null,feedback:""});w.useEffect(()=>{(async()=>{try{const R=await(await fetch("https://hotelvirat.com/api/v1/hotel/branch")).json();h(R),R.length>0&&d(R[0]._id)}catch(_){console.error("Error fetching branches:",_)}})()},[]),w.useEffect(()=>{l&&S()},[l,p]);const S=async()=>{a(!0);try{let P=`https://hotelvirat.com/api/v1/hotel/subscription-order?branchId=${l}`;p.status&&(P+=`&status=${p.status}`),p.planType&&(P+=`&planType=${p.planType}`);const R=await(await fetch(P)).json();if(R.success){let W=R.data;p.search&&(W=W.filter(G=>{var oe,q,V,U;return((q=(oe=G.userId)==null?void 0:oe.name)==null?void 0:q.toLowerCase().includes(p.search.toLowerCase()))||((U=(V=G.productId)==null?void 0:V.name)==null?void 0:U.toLowerCase().includes(p.search.toLowerCase()))})),t(W)}else i(R.message)}catch(P){console.error("Error fetching subscription orders:",P),i("Failed to fetch subscription orders")}finally{a(!1)}},C=P=>{switch(P){case"active":return"#4CAF50";case"paused":return"#FF9800";case"cancelled":return"#F44336";case"completed":return"#9E9E9E";default:return"#666"}},k=P=>{switch(P){case"daily":return"#2196F3";case"weekly":return"#9C27B0";case"monthly":return"#FF5722";case"yearly":return"#4CAF50";default:return"#666"}},I=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),z=(P,_)=>{b(P),A(_),v(!0)},B=()=>{v(!1),b(null),A(""),O({scheduledDate:"",status:"scheduled",deliveryPerson:{name:"",phone:"",id:""},deliveryNotes:"",rating:null,feedback:""})},M=async()=>{try{const _=await(await fetch(`https://hotelvirat.com/api/v1/hotel/subscription-order/${g._id}/delivery`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();_.success?(alert("Delivery status updated successfully!"),S(),B()):alert("Error updating delivery status: "+_.message)}catch(P){console.error("Error updating delivery status:",P),alert("Error updating delivery status")}};return n?r.jsx("div",{className:"subscription-management-container",children:r.jsxs("div",{className:"loading",children:[r.jsx("div",{className:"spinner"}),r.jsx("p",{children:"Loading subscription orders..."})]})}):r.jsxs("div",{className:"subscription-management-container",children:[r.jsx("div",{className:"subscription-management-header",children:r.jsx("h1",{children:"Subscription Order Management"})}),r.jsxs("div",{className:"branch-selector",children:[r.jsx("label",{htmlFor:"branch-select",children:"Select Branch:"}),r.jsx("select",{id:"branch-select",value:l,onChange:P=>d(P.target.value),className:"branch-select",children:u.map(P=>r.jsx("option",{value:P._id,children:P.name},P._id))})]}),r.jsxs("div",{className:"filters",children:[r.jsx("div",{className:"filter-group",children:r.jsx("input",{type:"text",placeholder:"Search by customer or product...",value:p.search,onChange:P=>m({...p,search:P.target.value}),className:"search-input"})}),r.jsx("div",{className:"filter-group",children:r.jsxs("select",{value:p.status,onChange:P=>m({...p,status:P.target.value}),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"paused",children:"Paused"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"completed",children:"Completed"})]})}),r.jsx("div",{className:"filter-group",children:r.jsxs("select",{value:p.planType,onChange:P=>m({...p,planType:P.target.value}),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Plans"}),r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})})]}),r.jsxs("div",{className:"subscription-orders-table-container",children:[r.jsxs("table",{className:"subscription-orders-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Plan"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Cycles"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(P=>{var _,R,W,G,oe;return r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"customer-info",children:[r.jsx("strong",{children:(_=P.userId)==null?void 0:_.name}),r.jsx("span",{children:(R=P.userId)==null?void 0:R.mobile})]})}),r.jsx("td",{children:r.jsxs("div",{className:"product-info",children:[r.jsx("img",{src:((W=P.productId)==null?void 0:W.image)||"/placeholder-product.jpg",alt:(G=P.productId)==null?void 0:G.name,className:"product-image"}),r.jsx("span",{children:(oe=P.productId)==null?void 0:oe.name})]})}),r.jsx("td",{children:r.jsx("span",{className:"plan-type",style:{backgroundColor:k(P.planType)},children:P.planType})}),r.jsxs("td",{children:["",P.price]}),r.jsx("td",{children:r.jsx("span",{className:"status-badge",style:{backgroundColor:C(P.status)},children:P.status})}),r.jsx("td",{children:I(P.nextDeliveryDate)}),r.jsxs("td",{children:[P.completedCycles,"/",P.totalCycles||""]}),r.jsx("td",{children:r.jsx("div",{className:"action-buttons",children:r.jsx("button",{className:"btn-view",onClick:()=>z(P,"view"),children:"View"})})})]},P._id)})})]}),e.length===0&&r.jsx("div",{className:"no-subscriptions",children:r.jsx("p",{children:"No subscription orders found for the selected criteria."})})]}),j&&g&&r.jsx("div",{className:"modal-overlay",onClick:B,children:r.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Subscription Order Details"}),r.jsx("button",{className:"close-btn",onClick:B,children:""})]}),r.jsxs("div",{className:"modal-body",children:[y==="view"&&r.jsxs("div",{className:"subscription-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Customer:"})," ",(F=g.userId)==null?void 0:F.name]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Product:"})," ",(N=g.productId)==null?void 0:N.name]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Plan Type:"})," ",g.planType]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Price:"})," ",g.price]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Status:"})," ",g.status]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Start Date:"})," ",I(g.startDate)]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Delivery Address:"})," ",g.deliveryAddress]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Delivery Days:"})," ",(L=g.deliveryDays)==null?void 0:L.join(", ")]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Delivery Time:"})," ",g.deliveryTime]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("strong",{children:"Payment Method:"})," ",g.paymentMethod]}),g.deliveryTracking&&g.deliveryTracking.length>0&&r.jsxs("div",{className:"delivery-tracking-section",children:[r.jsx("h4",{children:"Recent Deliveries"}),g.deliveryTracking.slice(0,3).map((P,_)=>r.jsxs("div",{className:"delivery-item",children:[r.jsxs("div",{className:"delivery-status",children:[r.jsx("span",{className:`status-badge ${P.status}`,children:P.status.replace("_"," ").toUpperCase()}),r.jsx("span",{className:"delivery-date",children:I(P.scheduledDate)})]}),P.deliveryPerson&&r.jsxs("div",{className:"delivery-person",children:["By: ",P.deliveryPerson.name]}),P.deliveryNotes&&r.jsx("div",{className:"delivery-notes",children:P.deliveryNotes})]},_))]}),r.jsx("div",{className:"modal-actions",children:r.jsx("button",{className:"btn-update-delivery",onClick:()=>{A("delivery"),O({scheduledDate:new Date().toISOString().split("T")[0],status:"scheduled",deliveryPerson:{name:"",phone:"",id:""},deliveryNotes:"",rating:null,feedback:""})},children:"Update Delivery Status"})})]}),y==="delivery"&&r.jsxs("div",{className:"delivery-form",children:[r.jsx("h3",{children:"Update Delivery Status"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"scheduledDate",children:"Scheduled Date:"}),r.jsx("input",{type:"date",id:"scheduledDate",value:E.scheduledDate,onChange:P=>O({...E,scheduledDate:P.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Delivery Status:"}),r.jsxs("select",{id:"status",value:E.status,onChange:P=>O({...E,status:P.target.value}),required:!0,children:[r.jsx("option",{value:"scheduled",children:"Scheduled"}),r.jsx("option",{value:"out_for_delivery",children:"Out for Delivery"}),r.jsx("option",{value:"delivered",children:"Delivered"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"rescheduled",children:"Rescheduled"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"deliveryPersonName",children:"Delivery Person Name:"}),r.jsx("input",{type:"text",id:"deliveryPersonName",value:E.deliveryPerson.name,onChange:P=>O({...E,deliveryPerson:{...E.deliveryPerson,name:P.target.value}}),placeholder:"Enter delivery person name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"deliveryPersonPhone",children:"Delivery Person Phone:"}),r.jsx("input",{type:"tel",id:"deliveryPersonPhone",value:E.deliveryPerson.phone,onChange:P=>O({...E,deliveryPerson:{...E.deliveryPerson,phone:P.target.value}}),placeholder:"Enter phone number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"deliveryNotes",children:"Delivery Notes:"}),r.jsx("textarea",{id:"deliveryNotes",value:E.deliveryNotes,onChange:P=>O({...E,deliveryNotes:P.target.value}),placeholder:"Enter delivery notes",rows:"3"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"rating",children:"Customer Rating (1-5):"}),r.jsxs("select",{id:"rating",value:E.rating||"",onChange:P=>O({...E,rating:P.target.value?parseInt(P.target.value):null}),children:[r.jsx("option",{value:"",children:"No rating"}),r.jsx("option",{value:"1",children:"1 Star"}),r.jsx("option",{value:"2",children:"2 Stars"}),r.jsx("option",{value:"3",children:"3 Stars"}),r.jsx("option",{value:"4",children:"4 Stars"}),r.jsx("option",{value:"5",children:"5 Stars"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"feedback",children:"Customer Feedback:"}),r.jsx("textarea",{id:"feedback",value:E.feedback,onChange:P=>O({...E,feedback:P.target.value}),placeholder:"Enter customer feedback",rows:"3"})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"btn-confirm",onClick:M,children:"Update Delivery"}),r.jsx("button",{className:"btn-cancel",onClick:()=>A("view"),children:"Cancel"})]})]})]})]})})]})},yse=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState(""),[u,h]=w.useState(!0),[p,m]=w.useState(!1),[g,b]=w.useState(""),[j,v]=w.useState(null),[y,A]=w.useState({productId:"",description:"",image:null,isActive:!0});w.useEffect(()=>{(async()=>{try{const P=await(await fetch("https://hotelvirat.com/api/v1/hotel/branch")).json();a(P),P.length>0&&d(P[0])}catch(L){console.error("Error fetching branches:",L)}})()},[]);const E=async()=>{try{const N=`https://hotelvirat.com/api/v1/hotel/menu?t=${Date.now()}`,L=await fetch(N,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}});if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const P=await L.json();Array.isArray(P)?i(P):i([])}catch(N){console.error("Error fetching products:",N),i([])}};w.useEffect(()=>{E()},[]);const O=async()=>{if(!(!l||!l._id))try{console.log(" Fetching meals for branch:",l._id);const N=`https://hotelvirat.com/api/v1/hotel/meal-of-the-day/branch/${l._id}`;console.log(" API URL:",N);const L=await fetch(N);if(console.log(" Response status:",L.status),console.log(" Response ok:",L.ok),!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const P=await L.json();console.log(" API response:",P),P.success&&Array.isArray(P.data)?(console.log(" Setting meals:",P.data.length,"items"),t(P.data)):(console.error(" Invalid API response:",P),t([]))}catch(N){console.error(" Error fetching meals:",N),t([])}};w.useEffect(()=>{l&&l._id&&O()},[l]);const S=async N=>{if(N.preventDefault(),!y.productId||!l){alert("Please select a product and branch");return}try{const L={productId:y.productId,branchId:l._id,description:y.description||"",isActive:y.isActive};if(y.image&&y.image instanceof File){const P=new FormData;P.append("image",y.image),Object.keys(L).forEach(_=>{P.append(_,L[_])}),await fetch("https://hotelvirat.com/api/v1/hotel/meal-of-the-day",{method:"POST",body:P})}else await fetch("https://hotelvirat.com/api/v1/hotel/meal-of-the-day",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});O(),A({productId:"",description:"",image:null,isActive:!0})}catch(L){console.error("Error saving meal:",L)}},C=async N=>{if(window.confirm("Are you sure you want to delete this meal?"))try{await fetch(`https://hotelvirat.com/api/v1/hotel/meal-of-the-day/${N}`,{method:"DELETE"}),O()}catch(L){console.error("Error deleting meal:",L)}},k=async(N,L)=>{try{(await fetch(`https://hotelvirat.com/api/v1/hotel/meal-of-the-day/${N}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!L})})).ok&&O()}catch(P){console.error("Error updating meal status:",P)}},I=N=>{const L=N.target.files[0];L&&A({...y,image:L})},z=N=>{const{name:L,value:P,type:_,checked:R}=N.target;A(W=>({...W,[L]:_==="checkbox"?R:P}))},B=N=>{const L=N.target.value,P=n.find(_=>_._id===L);d(P)},M=N=>{const L=s.find(P=>P._id===N);return L?L.name:"Unknown Product"},F=N=>{const L=s.find(P=>P._id===N);return L?L.price:0};return r.jsxs("div",{className:"meal-of-the-day-container",children:[r.jsxs("div",{className:"header",children:[r.jsx("h2",{children:" Meal of the Day Management"}),r.jsx("p",{children:"Create and manage daily special meals for each branch with beautiful presentation"})]}),r.jsxs("div",{className:"branch-selection",children:[r.jsx("label",{htmlFor:"branchSelect",children:" Select Branch"}),r.jsxs("select",{id:"branchSelect",value:l?l._id:"",onChange:B,className:"form-control",children:[r.jsx("option",{value:"",children:"Choose a branch to manage meals..."}),n.map(N=>r.jsx("option",{value:N._id,children:N.name},N._id))]})]}),l&&r.jsxs("div",{className:"add-meal-form",children:[r.jsx("h3",{children:" Add New Meal of the Day"}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"productId",children:" Select Product *"}),r.jsxs("select",{id:"productId",name:"productId",value:y.productId,onChange:z,className:"form-control",required:!0,children:[r.jsx("option",{value:"",children:"Choose a product from the menu..."}),s.length===0?r.jsx("option",{value:"",disabled:!0,children:"No products available"}):s.map(N=>r.jsxs("option",{value:N._id,children:[N.name," - ",N.price]},N._id))]}),s.length===0&&r.jsx("small",{className:"text-muted",children:" No products found. Please add products to the menu first."})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:" Description"}),r.jsx("textarea",{id:"description",name:"description",value:y.description,onChange:z,className:"form-control",rows:"3",placeholder:"Describe this special meal... (optional)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"image",children:" Custom Image (Optional)"}),r.jsx("input",{type:"file",id:"image",name:"image",onChange:I,className:"form-control",accept:"image/*"}),r.jsx("small",{className:"text-muted",children:" If no custom image is provided, the product's default image will be used."})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{children:[r.jsx("input",{type:"checkbox",name:"isActive",checked:y.isActive,onChange:z})," Active (Show this meal to customers)"]})}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:" Add Meal of the Day"})]})]}),l&&r.jsxs("div",{className:"meals-list",children:[r.jsxs("h3",{children:[" Current Meals for ",l.name]}),!e||e.length===0?r.jsx("p",{children:" No meals of the day set for this branch yet. Add your first special meal above!"}):r.jsx("div",{className:"meals-grid",children:Array.isArray(e)&&e.map(N=>r.jsxs("div",{className:"meal-card",children:[r.jsxs("div",{className:"meal-image",children:[N.image?r.jsx("img",{src:N.image,alt:M(N.productId),className:"img-fluid"}):r.jsx("div",{className:"no-image",children:" No Image Available"}),r.jsx("div",{className:`status-badge ${N.isActive?"active":"inactive"}`,children:N.isActive?" Active":" Inactive"})]}),r.jsxs("div",{className:"meal-info",children:[r.jsx("h4",{children:M(N.productId)}),r.jsxs("p",{className:"price",children:["",F(N.productId)]}),N.description&&r.jsx("p",{className:"description",children:N.description}),r.jsxs("div",{className:"meal-actions",children:[r.jsx("button",{className:`btn btn-sm ${N.isActive?"btn-secondary":"btn-success"}`,onClick:()=>k(N._id,N.isActive),children:N.isActive?" Deactivate":" Activate"}),r.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>C(N._id),children:" Delete"})]})]})]},N._id))})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var mx={};mx.version="0.18.5";var UR=1252,bse=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],qR=function(e){bse.indexOf(e)!=-1&&(UR=e)};function vse(){qR(1252)}var df=function(e){qR(e)};function jse(){df(1200),vse()}var Zp=function(t){return String.fromCharCode(t)},Z6=function(t){return String.fromCharCode(t)},xx,Uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function uf(e){for(var t="",n=0,a=0,s=0,i=0,l=0,d=0,u=0,h=0;h<e.length;)n=e.charCodeAt(h++),i=n>>2,a=e.charCodeAt(h++),l=(n&3)<<4|a>>4,s=e.charCodeAt(h++),d=(a&15)<<2|s>>6,u=s&63,isNaN(a)?d=u=64:isNaN(s)&&(u=64),t+=Uo.charAt(i)+Uo.charAt(l)+Uo.charAt(d)+Uo.charAt(u);return t}function oo(e){var t="",n=0,a=0,s=0,i=0,l=0,d=0,u=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<e.length;)i=Uo.indexOf(e.charAt(h++)),l=Uo.indexOf(e.charAt(h++)),n=i<<2|l>>4,t+=String.fromCharCode(n),d=Uo.indexOf(e.charAt(h++)),a=(l&15)<<4|d>>2,d!==64&&(t+=String.fromCharCode(a)),u=Uo.indexOf(e.charAt(h++)),s=(d&3)<<6|u,u!==64&&(t+=String.fromCharCode(s));return t}var Er=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),po=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,n){return n?new Buffer(t,n):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Kl(e){return Er?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function eI(e){return Er?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Zs=function(t){return Er?po(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)&255})};function g0(e){if(typeof ArrayBuffer>"u")return Zs(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0;a!=e.length;++a)n[a]=e.charCodeAt(a)&255;return t}function _f(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function wse(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var sa=Er?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:po(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var a=new Uint8Array(n),s=0;for(t=0,n=0;t<e.length;n+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],n);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),n)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Sse(e){for(var t=[],n=0,a=e.length+250,s=Kl(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)s[n++]=l;else if(l<2048)s[n++]=192|l>>6&31,s[n++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var d=e.charCodeAt(++i)&1023;s[n++]=240|l>>8&7,s[n++]=128|l>>2&63,s[n++]=128|d>>6&15|(l&3)<<4,s[n++]=128|d&63}else s[n++]=224|l>>12&15,s[n++]=128|l>>6&63,s[n++]=128|l&63;n>a&&(t.push(s.slice(0,n)),n=0,s=Kl(65535),a=65530)}return t.push(s.slice(0,n)),sa(t)}var gh=/\u0000/g,em=/[\u0001-\u0006]/g;function nd(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function ri(e,t){var n=""+e;return n.length>=t?n:mn("0",t-n.length)+n}function $S(e,t){var n=""+e;return n.length>=t?n:mn(" ",t-n.length)+n}function gx(e,t){var n=""+e;return n.length>=t?n:n+mn(" ",t-n.length)}function Nse(e,t){var n=""+Math.round(e);return n.length>=t?n:mn("0",t-n.length)+n}function Tse(e,t){var n=""+e;return n.length>=t?n:mn("0",t-n.length)+n}var tI=Math.pow(2,32);function qc(e,t){if(e>tI||e<-tI)return Nse(e,t);var n=Math.round(e);return Tse(n,t)}function yx(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var rI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Oj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Cse(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var xn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},nI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Ase={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function bx(e,t,n){for(var a=e<0?-1:1,s=e*a,i=0,l=1,d=0,u=1,h=0,p=0,m=Math.floor(s);h<t&&(m=Math.floor(s),d=m*l+i,p=m*h+u,!(s-m<5e-8));)s=1/(s-m),i=l,l=d,u=h,h=p;if(p>t&&(h>t?(p=u,d=i):(p=h,d=l)),!n)return[0,a*d,p];var g=Math.floor(a*d/p);return[g,a*d-g*p,p]}function tm(e,t,n){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,l=[],d={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),t&&t.date1904&&(a+=1462),d.u>.9999&&(d.u=0,++s==86400&&(d.T=s=0,++a,++d.D)),a===60)l=n?[1317,10,29]:[1900,2,29],i=3;else if(a===0)l=n?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var u=new Date(1900,0,1);u.setDate(u.getDate()+a-1),l=[u.getFullYear(),u.getMonth()+1,u.getDate()],i=u.getDay(),a<60&&(i=(i+6)%7),n&&(i=Rse(u,l))}return d.y=l[0],d.m=l[1],d.d=l[2],d.S=s%60,s=Math.floor(s/60),d.M=s%60,s=Math.floor(s/60),d.H=s,d.q=i,d}var WR=new Date(1899,11,31,0,0,0),Ese=WR.getTime(),Ose=new Date(1900,2,1,0,0,0);function HR(e,t){var n=e.getTime();return t?n-=1461*24*60*60*1e3:e>=Ose&&(n+=24*60*60*1e3),(n-(Ese+(e.getTimezoneOffset()-WR.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function zS(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function kse(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function _se(e){var t=e<0?12:11,n=zS(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10),n.length<=t)?n:e.toExponential(5)}function Ise(e){var t=zS(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Dse(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),n;return t>=-4&&t<=-1?n=e.toPrecision(10+t):Math.abs(t)<=9?n=_se(e):t===10?n=e.toFixed(10).substr(0,12):n=Ise(e),zS(kse(n.toUpperCase()))}function gw(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Dse(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Xo(14,HR(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Rse(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}function Pse(e,t,n,a){var s="",i=0,l=0,d=n.y,u,h=0;switch(e){case 98:d=n.y+543;case 121:switch(t.length){case 1:case 2:u=d%100,h=2;break;default:u=d%1e4,h=4;break}break;case 109:switch(t.length){case 1:case 2:u=n.m,h=t.length;break;case 3:return Oj[n.m-1][1];case 5:return Oj[n.m-1][0];default:return Oj[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:u=n.d,h=t.length;break;case 3:return rI[n.q][0];default:return rI[n.q][1]}break;case 104:switch(t.length){case 1:case 2:u=1+(n.H+11)%12,h=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:u=n.H,h=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:u=n.M,h=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return n.u===0&&(t=="s"||t=="ss")?ri(n.S,t.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,i=Math.round(l*(n.S+n.u)),i>=60*l&&(i=0),t==="s"?i===0?"0":""+i/l:(s=ri(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":u=n.D*24+n.H;break;case"[m]":case"[mm]":u=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":u=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}h=t.length===3?1:2;break;case 101:u=d,h=1;break}var p=h>0?ri(u,h):"";return p}function qo(e){var t=3;if(e.length<=t)return e;for(var n=e.length%t,a=e.substr(0,n);n!=e.length;n+=t)a+=(a.length>0?",":"")+e.substr(n,t);return a}var GR=/%/g;function Mse(e,t,n){var a=t.replace(GR,""),s=t.length-a.length;return Ji(e,a,n*Math.pow(10,2*s))+mn("%",s)}function Bse(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ji(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function KR(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+KR(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),n=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),n.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(l-n.length+i):n+="E+"+(l-i);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,u,h,p){return u+h+p.substr(0,(s+i)%s)+"."+p.substr(i)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var VR=/# (\?+)( ?)\/( ?)(\d+)/;function Fse(e,t,n){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),l=s-i*a,d=a;return n+(i===0?"":""+i)+" "+(l===0?mn(" ",e[1].length+1+e[4].length):$S(l,e[1].length)+e[2]+"/"+e[3]+ri(d,e[4].length))}function Lse(e,t,n){return n+(t===0?"":""+t)+mn(" ",e[1].length+2+e[4].length)}var YR=/^#*0*\.([0#]+)/,XR=/\).*[0#]/,QR=/\(###\) ###\\?-####/;function Ea(e){for(var t="",n,a=0;a!=e.length;++a)switch(n=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(n)}return t}function aI(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function sI(e,t){var n=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(n*a)).length?0:Math.round(n*a)}function $se(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function zse(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Os(e,t,n){if(e.charCodeAt(0)===40&&!t.match(XR)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Os("n",a,n):"("+Os("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return Bse(e,t,n);if(t.indexOf("%")!==-1)return Mse(e,t,n);if(t.indexOf("E")!==-1)return KR(t,n);if(t.charCodeAt(0)===36)return"$"+Os(e,t.substr(t.charAt(1)==" "?2:1),n);var s,i,l,d,u=Math.abs(n),h=n<0?"-":"";if(t.match(/^00+$/))return h+qc(u,t.length);if(t.match(/^[#?]+$/))return s=qc(n,0),s==="0"&&(s=""),s.length>t.length?s:Ea(t.substr(0,t.length-s.length))+s;if(i=t.match(VR))return Fse(i,u,h);if(t.match(/^#+0+$/))return h+qc(u,t.length-t.indexOf("0"));if(i=t.match(YR))return s=aI(n,i[1].length).replace(/^([^\.]+)$/,"$1."+Ea(i[1])).replace(/\.$/,"."+Ea(i[1])).replace(/\.(\d*)$/,function(j,v){return"."+v+mn("0",Ea(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return h+aI(u,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return h+qo(qc(u,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Os(e,t,-n):qo(""+(Math.floor(n)+$se(n,i[1].length)))+"."+ri(sI(n,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Os(e,t.replace(/^#,#*,/,""),n);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=nd(Os(e,t.replace(/[\\-]/g,""),n)),l=0,nd(nd(t.replace(/\\/g,"")).replace(/[0#]/g,function(j){return l<s.length?s.charAt(l++):j==="0"?"0":""}));if(t.match(QR))return s=Os(e,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),d=bx(u,Math.pow(10,l)-1,!1),s=""+h,p=Ji("n",i[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+i[2]+"/"+i[3],p=gx(d[2],l),p.length<i[4].length&&(p=Ea(i[4].substr(i[4].length-p.length))+p),s+=p,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),d=bx(u,Math.pow(10,l)-1,!0),h+(d[0]||(d[1]?"":"0"))+" "+(d[1]?$S(d[1],l)+i[2]+"/"+i[3]+gx(d[2],l):mn(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=qc(n,0),t.length<=s.length?s:Ea(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=s.indexOf(".");var m=t.indexOf(".")-l,g=t.length-s.length-m;return Ea(t.substr(0,m)+s+t.substr(t.length-g))}if(i=t.match(/^00,000\.([#0]*0)$/))return l=sI(n,i[1].length),n<0?"-"+Os(e,t,-n):qo(zse(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(j){return"00,"+(j.length<3?ri(0,3-j.length):"")+j})+"."+ri(l,i[1].length);switch(t){case"###,##0.00":return Os(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var b=qo(qc(u,0));return b!=="0"?h+b:"";case"###,###.00":return Os(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Os(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Use(e,t,n){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return Ji(e,t.substr(0,a),n/Math.pow(10,3*(t.length-a)))}function qse(e,t,n){var a=t.replace(GR,""),s=t.length-a.length;return Ji(e,a,n*Math.pow(10,2*s))+mn("%",s)}function JR(e,t){var n,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+JR(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),n=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!n.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(l-n.length+i):n+="E+"+(l-i),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,u,h,p){return u+h+p.substr(0,(s+i)%s)+"."+p.substr(i)+"E"})}else n=t.toExponential(a);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function gi(e,t,n){if(e.charCodeAt(0)===40&&!t.match(XR)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?gi("n",a,n):"("+gi("n",a,-n)+")"}if(t.charCodeAt(t.length-1)===44)return Use(e,t,n);if(t.indexOf("%")!==-1)return qse(e,t,n);if(t.indexOf("E")!==-1)return JR(t,n);if(t.charCodeAt(0)===36)return"$"+gi(e,t.substr(t.charAt(1)==" "?2:1),n);var s,i,l,d,u=Math.abs(n),h=n<0?"-":"";if(t.match(/^00+$/))return h+ri(u,t.length);if(t.match(/^[#?]+$/))return s=""+n,n===0&&(s=""),s.length>t.length?s:Ea(t.substr(0,t.length-s.length))+s;if(i=t.match(VR))return Lse(i,u,h);if(t.match(/^#+0+$/))return h+ri(u,t.length-t.indexOf("0"));if(i=t.match(YR))return s=(""+n).replace(/^([^\.]+)$/,"$1."+Ea(i[1])).replace(/\.$/,"."+Ea(i[1])),s=s.replace(/\.(\d*)$/,function(j,v){return"."+v+mn("0",Ea(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return h+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return h+qo(""+u);if(i=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+gi(e,t,-n):qo(""+n)+"."+mn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return gi(e,t.replace(/^#,#*,/,""),n);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=nd(gi(e,t.replace(/[\\-]/g,""),n)),l=0,nd(nd(t.replace(/\\/g,"")).replace(/[0#]/g,function(j){return l<s.length?s.charAt(l++):j==="0"?"0":""}));if(t.match(QR))return s=gi(e,"##########",n),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var p="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),d=bx(u,Math.pow(10,l)-1,!1),s=""+h,p=Ji("n",i[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),s+=p+i[2]+"/"+i[3],p=gx(d[2],l),p.length<i[4].length&&(p=Ea(i[4].substr(i[4].length-p.length))+p),s+=p,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),d=bx(u,Math.pow(10,l)-1,!0),h+(d[0]||(d[1]?"":"0"))+" "+(d[1]?$S(d[1],l)+i[2]+"/"+i[3]+gx(d[2],l):mn(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+n,t.length<=s.length?s:Ea(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=s.indexOf(".");var m=t.indexOf(".")-l,g=t.length-s.length-m;return Ea(t.substr(0,m)+s+t.substr(t.length-g))}if(i=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+gi(e,t,-n):qo(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(j){return"00,"+(j.length<3?ri(0,3-j.length):"")+j})+"."+ri(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var b=qo(""+u);return b!=="0"?h+b:"";default:if(t.match(/\.[0#?]*$/))return gi(e,t.slice(0,t.lastIndexOf(".")),n)+Ea(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ji(e,t,n){return(n|0)===n?gi(e,t,n):Os(e,t,n)}function Wse(e){for(var t=[],n=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:n=!n;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),n===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var ZR=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function eP(e){for(var t=0,n="",a="";t<e.length;)switch(n=e.charAt(t)){case"G":yx(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=n;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(ZR))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||n=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Hse(e,t,n,a){for(var s=[],i="",l=0,d="",u="t",h,p,m,g="H";l<e.length;)switch(d=e.charAt(l)){case"G":if(!yx(e,l))throw new Error("unrecognized character "+d+" in "+e);s[s.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(m=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(m);s[s.length]={t:"t",v:i},++l;break;case"\\":var b=e.charAt(++l),j=b==="("||b===")"?b:"t";s[s.length]={t:j,v:b},++l;break;case"_":s[s.length]={t:"t",v:" "},l+=2;break;case"@":s[s.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(h==null&&(h=tm(t,n,e.charAt(l+1)==="2"),h==null))return"";s[s.length]={t:"X",v:e.substr(l,2)},u=d,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||h==null&&(h=tm(t,n),h==null))return"";for(i=d;++l<e.length&&e.charAt(l).toLowerCase()===d;)i+=d;d==="m"&&u.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=g),s[s.length]={t:d,v:i},u=d;break;case"A":case"a":case"":var v={t:d,v:d};if(h==null&&(h=tm(t,n)),e.substr(l,3).toUpperCase()==="A/P"?(h!=null&&(v.v=h.H>=12?"P":"A"),v.t="T",g="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(h!=null&&(v.v=h.H>=12?"PM":"AM"),v.t="T",l+=5,g="h"):e.substr(l,5).toUpperCase()==="/"?(h!=null&&(v.v=h.H>=12?"":""),v.t="T",l+=5,g="h"):(v.t="t",++l),h==null&&v.t==="T")return"";s[s.length]=v,u=d;break;case"[":for(i=d;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(ZR)){if(h==null&&(h=tm(t,n),h==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},u=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",eP(e)||(s[s.length]={t:"t",v:i}));break;case".":if(h!=null){for(i=d;++l<e.length&&(d=e.charAt(l))==="0";)i+=d;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=d;++l<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(l))>-1;)i+=d;s[s.length]={t:"n",v:i};break;case"?":for(i=d;e.charAt(++l)===d;)i+=d;s[s.length]={t:d,v:i},u=d;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":s[s.length]={t:a===1?"t":d,v:d},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=d;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:d,v:d},++l;break;case"$":s[s.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+e);s[s.length]={t:"t",v:d},++l;break}var y=0,A=0,E;for(l=s.length-1,u="t";l>=0;--l)switch(s[l].t){case"h":case"H":s[l].t=g,u="h",y<1&&(y=1);break;case"s":(E=s[l].v.match(/\.0+$/))&&(A=Math.max(A,E[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":u=s[l].t;break;case"m":u==="s"&&(s[l].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&s[l].v.match(/[Hh]/)&&(y=1),y<2&&s[l].v.match(/[Mm]/)&&(y=2),y<3&&s[l].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var O="",S;for(l=0;l<s.length;++l)switch(s[l].t){case"t":case"T":case" ":case"D":break;case"X":s[l].v="",s[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[l].v=Pse(s[l].t.charCodeAt(0),s[l].v,h,A),s[l].t="t";break;case"n":case"?":for(S=l+1;s[S]!=null&&((d=s[S].t)==="?"||d==="D"||(d===" "||d==="t")&&s[S+1]!=null&&(s[S+1].t==="?"||s[S+1].t==="t"&&s[S+1].v==="/")||s[l].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(s[S].v==="/"||s[S].v===" "&&s[S+1]!=null&&s[S+1].t=="?"));)s[l].v+=s[S].v,s[S]={v:"",t:";"},++S;O+=s[l].v,l=S-1;break;case"G":s[l].t="t",s[l].v=gw(t,n);break}var C="",k,I;if(O.length>0){O.charCodeAt(0)==40?(k=t<0&&O.charCodeAt(0)===45?-t:t,I=Ji("n",O,k)):(k=t<0&&a>1?-t:t,I=Ji("n",O,k),k<0&&s[0]&&s[0].t=="t"&&(I=I.substr(1),s[0].v="-"+s[0].v)),S=I.length-1;var z=s.length;for(l=0;l<s.length;++l)if(s[l]!=null&&s[l].t!="t"&&s[l].v.indexOf(".")>-1){z=l;break}var B=s.length;if(z===s.length&&I.indexOf("E")===-1){for(l=s.length-1;l>=0;--l)s[l]==null||"n?".indexOf(s[l].t)===-1||(S>=s[l].v.length-1?(S-=s[l].v.length,s[l].v=I.substr(S+1,s[l].v.length)):S<0?s[l].v="":(s[l].v=I.substr(0,S+1),S=-1),s[l].t="t",B=l);S>=0&&B<s.length&&(s[B].v=I.substr(0,S+1)+s[B].v)}else if(z!==s.length&&I.indexOf("E")===-1){for(S=I.indexOf(".")-1,l=z;l>=0;--l)if(!(s[l]==null||"n?".indexOf(s[l].t)===-1)){for(p=s[l].v.indexOf(".")>-1&&l===z?s[l].v.indexOf(".")-1:s[l].v.length-1,C=s[l].v.substr(p+1);p>=0;--p)S>=0&&(s[l].v.charAt(p)==="0"||s[l].v.charAt(p)==="#")&&(C=I.charAt(S--)+C);s[l].v=C,s[l].t="t",B=l}for(S>=0&&B<s.length&&(s[B].v=I.substr(0,S+1)+s[B].v),S=I.indexOf(".")+1,l=z;l<s.length;++l)if(!(s[l]==null||"n?(".indexOf(s[l].t)===-1&&l!==z)){for(p=s[l].v.indexOf(".")>-1&&l===z?s[l].v.indexOf(".")+1:0,C=s[l].v.substr(0,p);p<s[l].v.length;++p)S<I.length&&(C+=I.charAt(S++));s[l].v=C,s[l].t="t",B=l}}}for(l=0;l<s.length;++l)s[l]!=null&&"n?".indexOf(s[l].t)>-1&&(k=a>1&&t<0&&l>0&&s[l-1].v==="-"?-t:t,s[l].v=Ji(s[l].t,s[l].v,k),s[l].t="t");var M="";for(l=0;l!==s.length;++l)s[l]!=null&&(M+=s[l].v);return M}var iI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function oI(e,t){if(t==null)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0;break}return!1}function Gse(e,t){var n=Wse(e),a=n.length,s=n[a-1].indexOf("@");if(a<4&&s>-1&&--a,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof t!="number")return[4,n.length===4||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var i=t>0?n[0]:t<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[a,i];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var l=n[0].match(iI),d=n[1].match(iI);return oI(t,l)?[a,n[0]]:oI(t,d)?[a,n[1]]:[a,n[l!=null&&d!=null?2:1]]}return[a,i]}function Xo(e,t,n){n==null&&(n={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&n.dateNF?a=n.dateNF:a=e;break;case"number":e==14&&n.dateNF?a=n.dateNF:a=(n.table!=null?n.table:xn)[e],a==null&&(a=n.table&&n.table[nI[e]]||xn[nI[e]]),a==null&&(a=Ase[e]||"General");break}if(yx(a,0))return gw(t,n);t instanceof Date&&(t=HR(t,n.date1904));var s=Gse(a,t);if(yx(s[1]))return gw(t,n);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Hse(s[1],t,n,s[0])}function tP(e,t){if(typeof t!="number"){t=+t||-1;for(var n=0;n<392;++n){if(xn[n]==null){t<0&&(t=n);continue}if(xn[n]==e){t=n;break}}t<0&&(t=391)}return xn[t]=e,t}function y0(e){for(var t=0;t!=392;++t)e[t]!==void 0&&tP(e[t],t)}function b0(){xn=Cse()}var rP=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Kse(e){var t=typeof e=="number"?xn[e]:e;return t=t.replace(rP,"(\\d+)"),new RegExp("^"+t+"$")}function Vse(e,t,n){var a=-1,s=-1,i=-1,l=-1,d=-1,u=-1;(t.match(rP)||[]).forEach(function(m,g){var b=parseInt(n[g+1],10);switch(m.toLowerCase().charAt(0)){case"y":a=b;break;case"d":i=b;break;case"h":l=b;break;case"s":u=b;break;case"m":l>=0?d=b:s=b;break}}),u>=0&&d==-1&&s>=0&&(d=s,s=-1);var h=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var p=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return l==-1&&d==-1&&u==-1?h:a==-1&&s==-1&&i==-1?p:h+"T"+p}var Yse=function(){var e={};e.version="1.2.0";function t(){for(var I=0,z=new Array(256),B=0;B!=256;++B)I=B,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,z[B]=I;return typeof Int32Array<"u"?new Int32Array(z):z}var n=t();function a(I){var z=0,B=0,M=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)F[M]=I[M];for(M=0;M!=256;++M)for(B=I[M],z=256+M;z<4096;z+=256)B=F[z]=B>>>8^I[B&255];var N=[];for(M=1;M!=16;++M)N[M-1]=typeof Int32Array<"u"?F.subarray(M*256,M*256+256):F.slice(M*256,M*256+256);return N}var s=a(n),i=s[0],l=s[1],d=s[2],u=s[3],h=s[4],p=s[5],m=s[6],g=s[7],b=s[8],j=s[9],v=s[10],y=s[11],A=s[12],E=s[13],O=s[14];function S(I,z){for(var B=z^-1,M=0,F=I.length;M<F;)B=B>>>8^n[(B^I.charCodeAt(M++))&255];return~B}function C(I,z){for(var B=z^-1,M=I.length-15,F=0;F<M;)B=O[I[F++]^B&255]^E[I[F++]^B>>8&255]^A[I[F++]^B>>16&255]^y[I[F++]^B>>>24]^v[I[F++]]^j[I[F++]]^b[I[F++]]^g[I[F++]]^m[I[F++]]^p[I[F++]]^h[I[F++]]^u[I[F++]]^d[I[F++]]^l[I[F++]]^i[I[F++]]^n[I[F++]];for(M+=15;F<M;)B=B>>>8^n[(B^I[F++])&255];return~B}function k(I,z){for(var B=z^-1,M=0,F=I.length,N=0,L=0;M<F;)N=I.charCodeAt(M++),N<128?B=B>>>8^n[(B^N)&255]:N<2048?(B=B>>>8^n[(B^(192|N>>6&31))&255],B=B>>>8^n[(B^(128|N&63))&255]):N>=55296&&N<57344?(N=(N&1023)+64,L=I.charCodeAt(M++)&1023,B=B>>>8^n[(B^(240|N>>8&7))&255],B=B>>>8^n[(B^(128|N>>2&63))&255],B=B>>>8^n[(B^(128|L>>6&15|(N&3)<<4))&255],B=B>>>8^n[(B^(128|L&63))&255]):(B=B>>>8^n[(B^(224|N>>12&15))&255],B=B>>>8^n[(B^(128|N>>6&63))&255],B=B>>>8^n[(B^(128|N&63))&255]);return~B}return e.table=n,e.bstr=S,e.buf=C,e.str=k,e}(),Vr=function(){var t={};t.version="1.2.1";function n(ne,ge){for(var he=ne.split("/"),pe=ge.split("/"),ye=0,ve=0,Le=Math.min(he.length,pe.length);ye<Le;++ye){if(ve=he[ye].length-pe[ye].length)return ve;if(he[ye]!=pe[ye])return he[ye]<pe[ye]?-1:1}return he.length-pe.length}function a(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:a(ne.slice(0,-1));var ge=ne.lastIndexOf("/");return ge===-1?ne:ne.slice(0,ge+1)}function s(ne){if(ne.charAt(ne.length-1)=="/")return s(ne.slice(0,-1));var ge=ne.lastIndexOf("/");return ge===-1?ne:ne.slice(ge+1)}function i(ne,ge){typeof ge=="string"&&(ge=new Date(ge));var he=ge.getHours();he=he<<6|ge.getMinutes(),he=he<<5|ge.getSeconds()>>>1,ne.write_shift(2,he);var pe=ge.getFullYear()-1980;pe=pe<<4|ge.getMonth()+1,pe=pe<<5|ge.getDate(),ne.write_shift(2,pe)}function l(ne){var ge=ne.read_shift(2)&65535,he=ne.read_shift(2)&65535,pe=new Date,ye=he&31;he>>>=5;var ve=he&15;he>>>=4,pe.setMilliseconds(0),pe.setFullYear(he+1980),pe.setMonth(ve-1),pe.setDate(ye);var Le=ge&31;ge>>>=5;var et=ge&63;return ge>>>=6,pe.setHours(ge),pe.setMinutes(et),pe.setSeconds(Le<<1),pe}function d(ne){ds(ne,0);for(var ge={},he=0;ne.l<=ne.length-4;){var pe=ne.read_shift(2),ye=ne.read_shift(2),ve=ne.l+ye,Le={};switch(pe){case 21589:he=ne.read_shift(1),he&1&&(Le.mtime=ne.read_shift(4)),ye>5&&(he&2&&(Le.atime=ne.read_shift(4)),he&4&&(Le.ctime=ne.read_shift(4))),Le.mtime&&(Le.mt=new Date(Le.mtime*1e3));break}ne.l=ve,ge[pe]=Le}return ge}var u;function h(){return u||(u={})}function p(ne,ge){if(ne[0]==80&&ne[1]==75)return ke(ne,ge);if((ne[0]|32)==109&&(ne[1]|32)==105)return Nt(ne,ge);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var he=3,pe=512,ye=0,ve=0,Le=0,et=0,Pe=0,Ue=[],He=ne.slice(0,512);ds(He,0);var ht=m(He);switch(he=ht[0],he){case 3:pe=512;break;case 4:pe=4096;break;case 0:if(ht[1]==0)return ke(ne,ge);default:throw new Error("Major Version: Expected 3 or 4 saw "+he)}pe!==512&&(He=ne.slice(0,pe),ds(He,28));var xt=ne.slice(0,pe);g(He,he);var At=He.read_shift(4,"i");if(he===3&&At!==0)throw new Error("# Directory Sectors: Expected 0 saw "+At);He.l+=4,Le=He.read_shift(4,"i"),He.l+=4,He.chk("00100000","Mini Stream Cutoff Size: "),et=He.read_shift(4,"i"),ye=He.read_shift(4,"i"),Pe=He.read_shift(4,"i"),ve=He.read_shift(4,"i");for(var gt=-1,Ct=0;Ct<109&&(gt=He.read_shift(4,"i"),!(gt<0));++Ct)Ue[Ct]=gt;var Yt=b(ne,pe);y(Pe,ve,Yt,pe,Ue);var Or=E(Yt,Le,Ue,pe);Or[Le].name="!Directory",ye>0&&et!==L&&(Or[et].name="!MiniFAT"),Or[Ue[0]].name="!FAT",Or.fat_addrs=Ue,Or.ssz=pe;var kr={},Ur=[],Ls=[],di=[];O(Le,Or,Yt,Ur,ye,kr,Ls,et),j(Ls,di,Ur),Ur.shift();var Da={FileIndex:Ls,FullPaths:di};return ge&&ge.raw&&(Da.raw={header:xt,sectors:Yt}),Da}function m(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(P,"Header Signature: "),ne.l+=16;var ge=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),ge]}function g(ne,ge){var he=9;switch(ne.l+=2,he=ne.read_shift(2)){case 9:if(ge!=3)throw new Error("Sector Shift: Expected 9 saw "+he);break;case 12:if(ge!=4)throw new Error("Sector Shift: Expected 12 saw "+he);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+he)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function b(ne,ge){for(var he=Math.ceil(ne.length/ge)-1,pe=[],ye=1;ye<he;++ye)pe[ye-1]=ne.slice(ye*ge,(ye+1)*ge);return pe[he-1]=ne.slice(he*ge),pe}function j(ne,ge,he){for(var pe=0,ye=0,ve=0,Le=0,et=0,Pe=he.length,Ue=[],He=[];pe<Pe;++pe)Ue[pe]=He[pe]=pe,ge[pe]=he[pe];for(;et<He.length;++et)pe=He[et],ye=ne[pe].L,ve=ne[pe].R,Le=ne[pe].C,Ue[pe]===pe&&(ye!==-1&&Ue[ye]!==ye&&(Ue[pe]=Ue[ye]),ve!==-1&&Ue[ve]!==ve&&(Ue[pe]=Ue[ve])),Le!==-1&&(Ue[Le]=pe),ye!==-1&&pe!=Ue[pe]&&(Ue[ye]=Ue[pe],He.lastIndexOf(ye)<et&&He.push(ye)),ve!==-1&&pe!=Ue[pe]&&(Ue[ve]=Ue[pe],He.lastIndexOf(ve)<et&&He.push(ve));for(pe=1;pe<Pe;++pe)Ue[pe]===pe&&(ve!==-1&&Ue[ve]!==ve?Ue[pe]=Ue[ve]:ye!==-1&&Ue[ye]!==ye&&(Ue[pe]=Ue[ye]));for(pe=1;pe<Pe;++pe)if(ne[pe].type!==0){if(et=pe,et!=Ue[et])do et=Ue[et],ge[pe]=ge[et]+"/"+ge[pe];while(et!==0&&Ue[et]!==-1&&et!=Ue[et]);Ue[pe]=-1}for(ge[0]+="/",pe=1;pe<Pe;++pe)ne[pe].type!==2&&(ge[pe]+="/")}function v(ne,ge,he){for(var pe=ne.start,ye=ne.size,ve=[],Le=pe;he&&ye>0&&Le>=0;)ve.push(ge.slice(Le*N,Le*N+N)),ye-=N,Le=Ol(he,Le*4);return ve.length===0?nt(0):sa(ve).slice(0,ne.size)}function y(ne,ge,he,pe,ye){var ve=L;if(ne===L){if(ge!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var Le=he[ne],et=(pe>>>2)-1;if(!Le)return;for(var Pe=0;Pe<et&&(ve=Ol(Le,Pe*4))!==L;++Pe)ye.push(ve);y(Ol(Le,pe-4),ge-1,he,pe,ye)}}function A(ne,ge,he,pe,ye){var ve=[],Le=[];ye||(ye=[]);var et=pe-1,Pe=0,Ue=0;for(Pe=ge;Pe>=0;){ye[Pe]=!0,ve[ve.length]=Pe,Le.push(ne[Pe]);var He=he[Math.floor(Pe*4/pe)];if(Ue=Pe*4&et,pe<4+Ue)throw new Error("FAT boundary crossed: "+Pe+" 4 "+pe);if(!ne[He])break;Pe=Ol(ne[He],Ue)}return{nodes:ve,data:mI([Le])}}function E(ne,ge,he,pe){var ye=ne.length,ve=[],Le=[],et=[],Pe=[],Ue=pe-1,He=0,ht=0,xt=0,At=0;for(He=0;He<ye;++He)if(et=[],xt=He+ge,xt>=ye&&(xt-=ye),!Le[xt]){Pe=[];var gt=[];for(ht=xt;ht>=0;){gt[ht]=!0,Le[ht]=!0,et[et.length]=ht,Pe.push(ne[ht]);var Ct=he[Math.floor(ht*4/pe)];if(At=ht*4&Ue,pe<4+At)throw new Error("FAT boundary crossed: "+ht+" 4 "+pe);if(!ne[Ct]||(ht=Ol(ne[Ct],At),gt[ht]))break}ve[xt]={nodes:et,data:mI([Pe])}}return ve}function O(ne,ge,he,pe,ye,ve,Le,et){for(var Pe=0,Ue=pe.length?2:0,He=ge[ne].data,ht=0,xt=0,At;ht<He.length;ht+=128){var gt=He.slice(ht,ht+128);ds(gt,64),xt=gt.read_shift(2),At=GS(gt,0,xt-Ue),pe.push(At);var Ct={name:At,type:gt.read_shift(1),color:gt.read_shift(1),L:gt.read_shift(4,"i"),R:gt.read_shift(4,"i"),C:gt.read_shift(4,"i"),clsid:gt.read_shift(16),state:gt.read_shift(4,"i"),start:0,size:0},Yt=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);Yt!==0&&(Ct.ct=S(gt,gt.l-8));var Or=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);Or!==0&&(Ct.mt=S(gt,gt.l-8)),Ct.start=gt.read_shift(4,"i"),Ct.size=gt.read_shift(4,"i"),Ct.size<0&&Ct.start<0&&(Ct.size=Ct.type=0,Ct.start=L,Ct.name=""),Ct.type===5?(Pe=Ct.start,ye>0&&Pe!==L&&(ge[Pe].name="!StreamData")):Ct.size>=4096?(Ct.storage="fat",ge[Ct.start]===void 0&&(ge[Ct.start]=A(he,Ct.start,ge.fat_addrs,ge.ssz)),ge[Ct.start].name=Ct.name,Ct.content=ge[Ct.start].data.slice(0,Ct.size)):(Ct.storage="minifat",Ct.size<0?Ct.size=0:Pe!==L&&Ct.start!==L&&ge[Pe]&&(Ct.content=v(Ct,ge[Pe].data,(ge[et]||{}).data))),Ct.content&&ds(Ct.content,0),ve[At]=Ct,Le.push(Ct)}}function S(ne,ge){return new Date((hs(ne,ge+4)/1e7*Math.pow(2,32)+hs(ne,ge)/1e7-11644473600)*1e3)}function C(ne,ge){return h(),p(u.readFileSync(ne),ge)}function k(ne,ge){var he=ge&&ge.type;switch(he||Er&&Buffer.isBuffer(ne)&&(he="buffer"),he||"base64"){case"file":return C(ne,ge);case"base64":return p(Zs(oo(ne)),ge);case"binary":return p(Zs(ne),ge)}return p(ne,ge)}function I(ne,ge){var he=ge||{},pe=he.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=pe+"/",ne.FileIndex[0]={name:pe,type:5}),he.CLSID&&(ne.FileIndex[0].clsid=he.CLSID),z(ne)}function z(ne){var ge="Sh33tJ5";if(!Vr.find(ne,"/"+ge)){var he=nt(4);he[0]=55,he[1]=he[3]=50,he[2]=54,ne.FileIndex.push({name:ge,type:2,content:he,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+ge),B(ne)}}function B(ne,ge){I(ne);for(var he=!1,pe=!1,ye=ne.FullPaths.length-1;ye>=0;--ye){var ve=ne.FileIndex[ye];switch(ve.type){case 0:pe?he=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:pe=!0,isNaN(ve.R*ve.L*ve.C)&&(he=!0),ve.R>-1&&ve.L>-1&&ve.R==ve.L&&(he=!0);break;default:he=!0;break}}if(!(!he&&!ge)){var Le=new Date(1987,1,19),et=0,Pe=Object.create?Object.create(null):{},Ue=[];for(ye=0;ye<ne.FullPaths.length;++ye)Pe[ne.FullPaths[ye]]=!0,ne.FileIndex[ye].type!==0&&Ue.push([ne.FullPaths[ye],ne.FileIndex[ye]]);for(ye=0;ye<Ue.length;++ye){var He=a(Ue[ye][0]);pe=Pe[He],pe||(Ue.push([He,{name:s(He).replace("/",""),type:1,clsid:R,ct:Le,mt:Le,content:null}]),Pe[He]=!0)}for(Ue.sort(function(At,gt){return n(At[0],gt[0])}),ne.FullPaths=[],ne.FileIndex=[],ye=0;ye<Ue.length;++ye)ne.FullPaths[ye]=Ue[ye][0],ne.FileIndex[ye]=Ue[ye][1];for(ye=0;ye<Ue.length;++ye){var ht=ne.FileIndex[ye],xt=ne.FullPaths[ye];if(ht.name=s(xt).replace("/",""),ht.L=ht.R=ht.C=-(ht.color=1),ht.size=ht.content?ht.content.length:0,ht.start=0,ht.clsid=ht.clsid||R,ye===0)ht.C=Ue.length>1?1:-1,ht.size=0,ht.type=5;else if(xt.slice(-1)=="/"){for(et=ye+1;et<Ue.length&&a(ne.FullPaths[et])!=xt;++et);for(ht.C=et>=Ue.length?-1:et,et=ye+1;et<Ue.length&&a(ne.FullPaths[et])!=a(xt);++et);ht.R=et>=Ue.length?-1:et,ht.type=1}else a(ne.FullPaths[ye+1]||"")==a(xt)&&(ht.R=ye+1),ht.type=2}}}function M(ne,ge){var he=ge||{};if(he.fileType=="mad")return Kt(ne,he);switch(B(ne),he.fileType){case"zip":return ot(ne,he)}var pe=function(At){for(var gt=0,Ct=0,Yt=0;Yt<At.FileIndex.length;++Yt){var Or=At.FileIndex[Yt];if(Or.content){var kr=Or.content.length;kr>0&&(kr<4096?gt+=kr+63>>6:Ct+=kr+511>>9)}}for(var Ur=At.FullPaths.length+3>>2,Ls=gt+7>>3,di=gt+127>>7,Da=Ls+Ct+Ur+di,Xa=Da+127>>7,$s=Xa<=109?0:Math.ceil((Xa-109)/127);Da+Xa+$s+127>>7>Xa;)$s=++Xa<=109?0:Math.ceil((Xa-109)/127);var Qa=[1,$s,Xa,di,Ur,Ct,gt,0];return At.FileIndex[0].size=gt<<6,Qa[7]=(At.FileIndex[0].start=Qa[0]+Qa[1]+Qa[2]+Qa[3]+Qa[4]+Qa[5])+(Qa[6]+7>>3),Qa}(ne),ye=nt(pe[7]<<9),ve=0,Le=0;{for(ve=0;ve<8;++ve)ye.write_shift(1,_[ve]);for(ve=0;ve<8;++ve)ye.write_shift(2,0);for(ye.write_shift(2,62),ye.write_shift(2,3),ye.write_shift(2,65534),ye.write_shift(2,9),ye.write_shift(2,6),ve=0;ve<3;++ve)ye.write_shift(2,0);for(ye.write_shift(4,0),ye.write_shift(4,pe[2]),ye.write_shift(4,pe[0]+pe[1]+pe[2]+pe[3]-1),ye.write_shift(4,0),ye.write_shift(4,4096),ye.write_shift(4,pe[3]?pe[0]+pe[1]+pe[2]-1:L),ye.write_shift(4,pe[3]),ye.write_shift(-4,pe[1]?pe[0]-1:L),ye.write_shift(4,pe[1]),ve=0;ve<109;++ve)ye.write_shift(-4,ve<pe[2]?pe[1]+ve:-1)}if(pe[1])for(Le=0;Le<pe[1];++Le){for(;ve<236+Le*127;++ve)ye.write_shift(-4,ve<pe[2]?pe[1]+ve:-1);ye.write_shift(-4,Le===pe[1]-1?L:Le+1)}var et=function(At){for(Le+=At;ve<Le-1;++ve)ye.write_shift(-4,ve+1);At&&(++ve,ye.write_shift(-4,L))};for(Le=ve=0,Le+=pe[1];ve<Le;++ve)ye.write_shift(-4,W.DIFSECT);for(Le+=pe[2];ve<Le;++ve)ye.write_shift(-4,W.FATSECT);et(pe[3]),et(pe[4]);for(var Pe=0,Ue=0,He=ne.FileIndex[0];Pe<ne.FileIndex.length;++Pe)He=ne.FileIndex[Pe],He.content&&(Ue=He.content.length,!(Ue<4096)&&(He.start=Le,et(Ue+511>>9)));for(et(pe[6]+7>>3);ye.l&511;)ye.write_shift(-4,W.ENDOFCHAIN);for(Le=ve=0,Pe=0;Pe<ne.FileIndex.length;++Pe)He=ne.FileIndex[Pe],He.content&&(Ue=He.content.length,!(!Ue||Ue>=4096)&&(He.start=Le,et(Ue+63>>6)));for(;ye.l&511;)ye.write_shift(-4,W.ENDOFCHAIN);for(ve=0;ve<pe[4]<<2;++ve){var ht=ne.FullPaths[ve];if(!ht||ht.length===0){for(Pe=0;Pe<17;++Pe)ye.write_shift(4,0);for(Pe=0;Pe<3;++Pe)ye.write_shift(4,-1);for(Pe=0;Pe<12;++Pe)ye.write_shift(4,0);continue}He=ne.FileIndex[ve],ve===0&&(He.start=He.size?He.start-1:L);var xt=ve===0&&he.root||He.name;if(Ue=2*(xt.length+1),ye.write_shift(64,xt,"utf16le"),ye.write_shift(2,Ue),ye.write_shift(1,He.type),ye.write_shift(1,He.color),ye.write_shift(-4,He.L),ye.write_shift(-4,He.R),ye.write_shift(-4,He.C),He.clsid)ye.write_shift(16,He.clsid,"hex");else for(Pe=0;Pe<4;++Pe)ye.write_shift(4,0);ye.write_shift(4,He.state||0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,He.start),ye.write_shift(4,He.size),ye.write_shift(4,0)}for(ve=1;ve<ne.FileIndex.length;++ve)if(He=ne.FileIndex[ve],He.size>=4096)if(ye.l=He.start+1<<9,Er&&Buffer.isBuffer(He.content))He.content.copy(ye,ye.l,0,He.size),ye.l+=He.size+511&-512;else{for(Pe=0;Pe<He.size;++Pe)ye.write_shift(1,He.content[Pe]);for(;Pe&511;++Pe)ye.write_shift(1,0)}for(ve=1;ve<ne.FileIndex.length;++ve)if(He=ne.FileIndex[ve],He.size>0&&He.size<4096)if(Er&&Buffer.isBuffer(He.content))He.content.copy(ye,ye.l,0,He.size),ye.l+=He.size+63&-64;else{for(Pe=0;Pe<He.size;++Pe)ye.write_shift(1,He.content[Pe]);for(;Pe&63;++Pe)ye.write_shift(1,0)}if(Er)ye.l=ye.length;else for(;ye.l<ye.length;)ye.write_shift(1,0);return ye}function F(ne,ge){var he=ne.FullPaths.map(function(Pe){return Pe.toUpperCase()}),pe=he.map(function(Pe){var Ue=Pe.split("/");return Ue[Ue.length-(Pe.slice(-1)=="/"?2:1)]}),ye=!1;ge.charCodeAt(0)===47?(ye=!0,ge=he[0].slice(0,-1)+ge):ye=ge.indexOf("/")!==-1;var ve=ge.toUpperCase(),Le=ye===!0?he.indexOf(ve):pe.indexOf(ve);if(Le!==-1)return ne.FileIndex[Le];var et=!ve.match(em);for(ve=ve.replace(gh,""),et&&(ve=ve.replace(em,"!")),Le=0;Le<he.length;++Le)if((et?he[Le].replace(em,"!"):he[Le]).replace(gh,"")==ve||(et?pe[Le].replace(em,"!"):pe[Le]).replace(gh,"")==ve)return ne.FileIndex[Le];return null}var N=64,L=-2,P="d0cf11e0a1b11ae1",_=[208,207,17,224,161,177,26,225],R="00000000000000000000000000000000",W={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:P,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:R,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(ne,ge,he){h();var pe=M(ne,he);u.writeFileSync(ge,pe)}function oe(ne){for(var ge=new Array(ne.length),he=0;he<ne.length;++he)ge[he]=String.fromCharCode(ne[he]);return ge.join("")}function q(ne,ge){var he=M(ne,ge);switch(ge&&ge.type||"buffer"){case"file":return h(),u.writeFileSync(ge.filename,he),he;case"binary":return typeof he=="string"?he:oe(he);case"base64":return uf(typeof he=="string"?he:oe(he));case"buffer":if(Er)return Buffer.isBuffer(he)?he:po(he);case"array":return typeof he=="string"?Zs(he):he}return he}var V;function U(ne){try{var ge=ne.InflateRaw,he=new ge;if(he._processChunk(new Uint8Array([3,0]),he._finishFlushFlag),he.bytesRead)V=ne;else throw new Error("zlib does not expose bytesRead")}catch(pe){console.error("cannot use native zlib: "+(pe.message||pe))}}function X(ne,ge){if(!V)return Ft(ne,ge);var he=V.InflateRaw,pe=new he,ye=pe._processChunk(ne.slice(ne.l),pe._finishFlushFlag);return ne.l+=pe.bytesRead,ye}function H(ne){return V?V.deflateRawSync(ne):Qe(ne)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],me=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function je(ne){var ge=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(ge>>16|ge>>8|ge)&255}for(var ee=typeof Uint8Array<"u",se=ee?new Uint8Array(256):[],fe=0;fe<256;++fe)se[fe]=je(fe);function ue(ne,ge){var he=se[ne&255];return ge<=8?he>>>8-ge:(he=he<<8|se[ne>>8&255],ge<=16?he>>>16-ge:(he=he<<8|se[ne>>16&255],he>>>24-ge))}function We(ne,ge){var he=ge&7,pe=ge>>>3;return(ne[pe]|(he<=6?0:ne[pe+1]<<8))>>>he&3}function we(ne,ge){var he=ge&7,pe=ge>>>3;return(ne[pe]|(he<=5?0:ne[pe+1]<<8))>>>he&7}function Me(ne,ge){var he=ge&7,pe=ge>>>3;return(ne[pe]|(he<=4?0:ne[pe+1]<<8))>>>he&15}function Ee(ne,ge){var he=ge&7,pe=ge>>>3;return(ne[pe]|(he<=3?0:ne[pe+1]<<8))>>>he&31}function Be(ne,ge){var he=ge&7,pe=ge>>>3;return(ne[pe]|(he<=1?0:ne[pe+1]<<8))>>>he&127}function it(ne,ge,he){var pe=ge&7,ye=ge>>>3,ve=(1<<he)-1,Le=ne[ye]>>>pe;return he<8-pe||(Le|=ne[ye+1]<<8-pe,he<16-pe)||(Le|=ne[ye+2]<<16-pe,he<24-pe)||(Le|=ne[ye+3]<<24-pe),Le&ve}function re(ne,ge,he){var pe=ge&7,ye=ge>>>3;return pe<=5?ne[ye]|=(he&7)<<pe:(ne[ye]|=he<<pe&255,ne[ye+1]=(he&7)>>8-pe),ge+3}function ce(ne,ge,he){var pe=ge&7,ye=ge>>>3;return he=(he&1)<<pe,ne[ye]|=he,ge+1}function Z(ne,ge,he){var pe=ge&7,ye=ge>>>3;return he<<=pe,ne[ye]|=he&255,he>>>=8,ne[ye+1]=he,ge+8}function de(ne,ge,he){var pe=ge&7,ye=ge>>>3;return he<<=pe,ne[ye]|=he&255,he>>>=8,ne[ye+1]=he&255,ne[ye+2]=he>>>8,ge+16}function te(ne,ge){var he=ne.length,pe=2*he>ge?2*he:ge+5,ye=0;if(he>=ge)return ne;if(Er){var ve=eI(pe);if(ne.copy)ne.copy(ve);else for(;ye<ne.length;++ye)ve[ye]=ne[ye];return ve}else if(ee){var Le=new Uint8Array(pe);if(Le.set)Le.set(ne);else for(;ye<he;++ye)Le[ye]=ne[ye];return Le}return ne.length=pe,ne}function Se(ne){for(var ge=new Array(ne),he=0;he<ne;++he)ge[he]=0;return ge}function Ve(ne,ge,he){var pe=1,ye=0,ve=0,Le=0,et=0,Pe=ne.length,Ue=ee?new Uint16Array(32):Se(32);for(ve=0;ve<32;++ve)Ue[ve]=0;for(ve=Pe;ve<he;++ve)ne[ve]=0;Pe=ne.length;var He=ee?new Uint16Array(Pe):Se(Pe);for(ve=0;ve<Pe;++ve)Ue[ye=ne[ve]]++,pe<ye&&(pe=ye),He[ve]=0;for(Ue[0]=0,ve=1;ve<=pe;++ve)Ue[ve+16]=et=et+Ue[ve-1]<<1;for(ve=0;ve<Pe;++ve)et=ne[ve],et!=0&&(He[ve]=Ue[et+16]++);var ht=0;for(ve=0;ve<Pe;++ve)if(ht=ne[ve],ht!=0)for(et=ue(He[ve],pe)>>pe-ht,Le=(1<<pe+4-ht)-1;Le>=0;--Le)ge[et|Le<<ht]=ht&15|ve<<4;return pe}var tt=ee?new Uint16Array(512):Se(512),ze=ee?new Uint16Array(32):Se(32);if(!ee){for(var Ze=0;Ze<512;++Ze)tt[Ze]=0;for(Ze=0;Ze<32;++Ze)ze[Ze]=0}(function(){for(var ne=[],ge=0;ge<32;ge++)ne.push(5);Ve(ne,ze,32);var he=[];for(ge=0;ge<=143;ge++)he.push(8);for(;ge<=255;ge++)he.push(9);for(;ge<=279;ge++)he.push(7);for(;ge<=287;ge++)he.push(8);Ve(he,tt,288)})();var Ae=function(){for(var ge=ee?new Uint8Array(32768):[],he=0,pe=0;he<me.length-1;++he)for(;pe<me[he+1];++pe)ge[pe]=he;for(;pe<32768;++pe)ge[pe]=29;var ye=ee?new Uint8Array(259):[];for(he=0,pe=0;he<le.length-1;++he)for(;pe<le[he+1];++pe)ye[pe]=he;function ve(et,Pe){for(var Ue=0;Ue<et.length;){var He=Math.min(65535,et.length-Ue),ht=Ue+He==et.length;for(Pe.write_shift(1,+ht),Pe.write_shift(2,He),Pe.write_shift(2,~He&65535);He-- >0;)Pe[Pe.l++]=et[Ue++]}return Pe.l}function Le(et,Pe){for(var Ue=0,He=0,ht=ee?new Uint16Array(32768):[];He<et.length;){var xt=Math.min(65535,et.length-He);if(xt<10){for(Ue=re(Pe,Ue,+(He+xt==et.length)),Ue&7&&(Ue+=8-(Ue&7)),Pe.l=Ue/8|0,Pe.write_shift(2,xt),Pe.write_shift(2,~xt&65535);xt-- >0;)Pe[Pe.l++]=et[He++];Ue=Pe.l*8;continue}Ue=re(Pe,Ue,+(He+xt==et.length)+2);for(var At=0;xt-- >0;){var gt=et[He];At=(At<<5^gt)&32767;var Ct=-1,Yt=0;if((Ct=ht[At])&&(Ct|=He&-32768,Ct>He&&(Ct-=32768),Ct<He))for(;et[Ct+Yt]==et[He+Yt]&&Yt<250;)++Yt;if(Yt>2){gt=ye[Yt],gt<=22?Ue=Z(Pe,Ue,se[gt+1]>>1)-1:(Z(Pe,Ue,3),Ue+=5,Z(Pe,Ue,se[gt-23]>>5),Ue+=3);var Or=gt<8?0:gt-4>>2;Or>0&&(de(Pe,Ue,Yt-le[gt]),Ue+=Or),gt=ge[He-Ct],Ue=Z(Pe,Ue,se[gt]>>3),Ue-=3;var kr=gt<4?0:gt-2>>1;kr>0&&(de(Pe,Ue,He-Ct-me[gt]),Ue+=kr);for(var Ur=0;Ur<Yt;++Ur)ht[At]=He&32767,At=(At<<5^et[He])&32767,++He;xt-=Yt-1}else gt<=143?gt=gt+48:Ue=ce(Pe,Ue,1),Ue=Z(Pe,Ue,se[gt]),ht[At]=He&32767,++He}Ue=Z(Pe,Ue,0)-1}return Pe.l=(Ue+7)/8|0,Pe.l}return function(Pe,Ue){return Pe.length<8?ve(Pe,Ue):Le(Pe,Ue)}}();function Qe(ne){var ge=nt(50+Math.floor(ne.length*1.1)),he=Ae(ne,ge);return ge.slice(0,he)}var pt=ee?new Uint16Array(32768):Se(32768),Bt=ee?new Uint16Array(32768):Se(32768),Pt=ee?new Uint16Array(128):Se(128),kt=1,ae=1;function Ie(ne,ge){var he=Ee(ne,ge)+257;ge+=5;var pe=Ee(ne,ge)+1;ge+=5;var ye=Me(ne,ge)+4;ge+=4;for(var ve=0,Le=ee?new Uint8Array(19):Se(19),et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pe=1,Ue=ee?new Uint8Array(8):Se(8),He=ee?new Uint8Array(8):Se(8),ht=Le.length,xt=0;xt<ye;++xt)Le[Q[xt]]=ve=we(ne,ge),Pe<ve&&(Pe=ve),Ue[ve]++,ge+=3;var At=0;for(Ue[0]=0,xt=1;xt<=Pe;++xt)He[xt]=At=At+Ue[xt-1]<<1;for(xt=0;xt<ht;++xt)(At=Le[xt])!=0&&(et[xt]=He[At]++);var gt=0;for(xt=0;xt<ht;++xt)if(gt=Le[xt],gt!=0){At=se[et[xt]]>>8-gt;for(var Ct=(1<<7-gt)-1;Ct>=0;--Ct)Pt[At|Ct<<gt]=gt&7|xt<<3}var Yt=[];for(Pe=1;Yt.length<he+pe;)switch(At=Pt[Be(ne,ge)],ge+=At&7,At>>>=3){case 16:for(ve=3+We(ne,ge),ge+=2,At=Yt[Yt.length-1];ve-- >0;)Yt.push(At);break;case 17:for(ve=3+we(ne,ge),ge+=3;ve-- >0;)Yt.push(0);break;case 18:for(ve=11+Be(ne,ge),ge+=7;ve-- >0;)Yt.push(0);break;default:Yt.push(At),Pe<At&&(Pe=At);break}var Or=Yt.slice(0,he),kr=Yt.slice(he);for(xt=he;xt<286;++xt)Or[xt]=0;for(xt=pe;xt<30;++xt)kr[xt]=0;return kt=Ve(Or,pt,286),ae=Ve(kr,Bt,30),ge}function Ye(ne,ge){if(ne[0]==3&&!(ne[1]&3))return[Kl(ge),2];for(var he=0,pe=0,ye=eI(ge||1<<18),ve=0,Le=ye.length>>>0,et=0,Pe=0;(pe&1)==0;){if(pe=we(ne,he),he+=3,pe>>>1)pe>>1==1?(et=9,Pe=5):(he=Ie(ne,he),et=kt,Pe=ae);else{he&7&&(he+=8-(he&7));var Ue=ne[he>>>3]|ne[(he>>>3)+1]<<8;if(he+=32,Ue>0)for(!ge&&Le<ve+Ue&&(ye=te(ye,ve+Ue),Le=ye.length);Ue-- >0;)ye[ve++]=ne[he>>>3],he+=8;continue}for(;;){!ge&&Le<ve+32767&&(ye=te(ye,ve+32767),Le=ye.length);var He=it(ne,he,et),ht=pe>>>1==1?tt[He]:pt[He];if(he+=ht&15,ht>>>=4,(ht>>>8&255)===0)ye[ve++]=ht;else{if(ht==256)break;ht-=257;var xt=ht<8?0:ht-4>>2;xt>5&&(xt=0);var At=ve+le[ht];xt>0&&(At+=it(ne,he,xt),he+=xt),He=it(ne,he,Pe),ht=pe>>>1==1?ze[He]:Bt[He],he+=ht&15,ht>>>=4;var gt=ht<4?0:ht-2>>1,Ct=me[ht];for(gt>0&&(Ct+=it(ne,he,gt),he+=gt),!ge&&Le<At&&(ye=te(ye,At+100),Le=ye.length);ve<At;)ye[ve]=ye[ve-Ct],++ve}}}return ge?[ye,he+7>>>3]:[ye.slice(0,ve),he+7>>>3]}function Ft(ne,ge){var he=ne.slice(ne.l||0),pe=Ye(he,ge);return ne.l+=pe[1],pe[0]}function xe(ne,ge){if(ne)typeof console<"u"&&console.error(ge);else throw new Error(ge)}function ke(ne,ge){var he=ne;ds(he,0);var pe=[],ye=[],ve={FileIndex:pe,FullPaths:ye};I(ve,{root:ge.root});for(var Le=he.length-4;(he[Le]!=80||he[Le+1]!=75||he[Le+2]!=5||he[Le+3]!=6)&&Le>=0;)--Le;he.l=Le+4,he.l+=4;var et=he.read_shift(2);he.l+=6;var Pe=he.read_shift(4);for(he.l=Pe,Le=0;Le<et;++Le){he.l+=20;var Ue=he.read_shift(4),He=he.read_shift(4),ht=he.read_shift(2),xt=he.read_shift(2),At=he.read_shift(2);he.l+=8;var gt=he.read_shift(4),Ct=d(he.slice(he.l+ht,he.l+ht+xt));he.l+=ht+xt+At;var Yt=he.l;he.l=gt+4,Re(he,Ue,He,ve,Ct),he.l=Yt}return ve}function Re(ne,ge,he,pe,ye){ne.l+=2;var ve=ne.read_shift(2),Le=ne.read_shift(2),et=l(ne);if(ve&8257)throw new Error("Unsupported ZIP encryption");for(var Pe=ne.read_shift(4),Ue=ne.read_shift(4),He=ne.read_shift(4),ht=ne.read_shift(2),xt=ne.read_shift(2),At="",gt=0;gt<ht;++gt)At+=String.fromCharCode(ne[ne.l++]);if(xt){var Ct=d(ne.slice(ne.l,ne.l+xt));(Ct[21589]||{}).mt&&(et=Ct[21589].mt),((ye||{})[21589]||{}).mt&&(et=ye[21589].mt)}ne.l+=xt;var Yt=ne.slice(ne.l,ne.l+Ue);switch(Le){case 8:Yt=X(ne,He);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Le)}var Or=!1;ve&8&&(Pe=ne.read_shift(4),Pe==134695760&&(Pe=ne.read_shift(4),Or=!0),Ue=ne.read_shift(4),He=ne.read_shift(4)),Ue!=ge&&xe(Or,"Bad compressed size: "+ge+" != "+Ue),He!=he&&xe(Or,"Bad uncompressed size: "+he+" != "+He),Ut(pe,At,Yt,{unsafe:!0,mt:et})}function ot(ne,ge){var he=ge||{},pe=[],ye=[],ve=nt(1),Le=he.compression?8:0,et=0,Pe=0,Ue=0,He=0,ht=0,xt=ne.FullPaths[0],At=xt,gt=ne.FileIndex[0],Ct=[],Yt=0;for(Pe=1;Pe<ne.FullPaths.length;++Pe)if(At=ne.FullPaths[Pe].slice(xt.length),gt=ne.FileIndex[Pe],!(!gt.size||!gt.content||At=="Sh33tJ5")){var Or=He,kr=nt(At.length);for(Ue=0;Ue<At.length;++Ue)kr.write_shift(1,At.charCodeAt(Ue)&127);kr=kr.slice(0,kr.l),Ct[ht]=Yse.buf(gt.content,0);var Ur=gt.content;Le==8&&(Ur=H(Ur)),ve=nt(30),ve.write_shift(4,67324752),ve.write_shift(2,20),ve.write_shift(2,et),ve.write_shift(2,Le),gt.mt?i(ve,gt.mt):ve.write_shift(4,0),ve.write_shift(-4,Ct[ht]),ve.write_shift(4,Ur.length),ve.write_shift(4,gt.content.length),ve.write_shift(2,kr.length),ve.write_shift(2,0),He+=ve.length,pe.push(ve),He+=kr.length,pe.push(kr),He+=Ur.length,pe.push(Ur),ve=nt(46),ve.write_shift(4,33639248),ve.write_shift(2,0),ve.write_shift(2,20),ve.write_shift(2,et),ve.write_shift(2,Le),ve.write_shift(4,0),ve.write_shift(-4,Ct[ht]),ve.write_shift(4,Ur.length),ve.write_shift(4,gt.content.length),ve.write_shift(2,kr.length),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(4,0),ve.write_shift(4,Or),Yt+=ve.l,ye.push(ve),Yt+=kr.length,ye.push(kr),++ht}return ve=nt(22),ve.write_shift(4,101010256),ve.write_shift(2,0),ve.write_shift(2,0),ve.write_shift(2,ht),ve.write_shift(2,ht),ve.write_shift(4,Yt),ve.write_shift(4,He),ve.write_shift(2,0),sa([sa(pe),sa(ye),ve])}var mt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Tt(ne,ge){if(ne.ctype)return ne.ctype;var he=ne.name||"",pe=he.match(/\.([^\.]+)$/);return pe&&mt[pe[1]]||ge&&(pe=(he=ge).match(/[\.\\]([^\.\\])+$/),pe&&mt[pe[1]])?mt[pe[1]]:"application/octet-stream"}function _t(ne){for(var ge=uf(ne),he=[],pe=0;pe<ge.length;pe+=76)he.push(ge.slice(pe,pe+76));return he.join(`\r
`)+`\r
`}function st(ne){var ge=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ue){var He=Ue.charCodeAt(0).toString(16).toUpperCase();return"="+(He.length==1?"0"+He:He)});ge=ge.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ge.charAt(0)==`
`&&(ge="=0D"+ge.slice(1)),ge=ge.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var he=[],pe=ge.split(`\r
`),ye=0;ye<pe.length;++ye){var ve=pe[ye];if(ve.length==0){he.push("");continue}for(var Le=0;Le<ve.length;){var et=76,Pe=ve.slice(Le,Le+et);Pe.charAt(et-1)=="="?et--:Pe.charAt(et-2)=="="?et-=2:Pe.charAt(et-3)=="="&&(et-=3),Pe=ve.slice(Le,Le+et),Le+=et,Le<ve.length&&(Pe+="="),he.push(Pe)}}return he.join(`\r
`)}function wt(ne){for(var ge=[],he=0;he<ne.length;++he){for(var pe=ne[he];he<=ne.length&&pe.charAt(pe.length-1)=="=";)pe=pe.slice(0,pe.length-1)+ne[++he];ge.push(pe)}for(var ye=0;ye<ge.length;++ye)ge[ye]=ge[ye].replace(/[=][0-9A-Fa-f]{2}/g,function(ve){return String.fromCharCode(parseInt(ve.slice(1),16))});return Zs(ge.join(`\r
`))}function yt(ne,ge,he){for(var pe="",ye="",ve="",Le,et=0;et<10;++et){var Pe=ge[et];if(!Pe||Pe.match(/^\s*$/))break;var Ue=Pe.match(/^(.*?):\s*([^\s].*)$/);if(Ue)switch(Ue[1].toLowerCase()){case"content-location":pe=Ue[2].trim();break;case"content-type":ve=Ue[2].trim();break;case"content-transfer-encoding":ye=Ue[2].trim();break}}switch(++et,ye.toLowerCase()){case"base64":Le=Zs(oo(ge.slice(et).join("")));break;case"quoted-printable":Le=wt(ge.slice(et));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ye)}var He=Ut(ne,pe.slice(he.length),Le,{unsafe:!0});ve&&(He.ctype=ve)}function Nt(ne,ge){if(oe(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var he=ge&&ge.root||"",pe=(Er&&Buffer.isBuffer(ne)?ne.toString("binary"):oe(ne)).split(`\r
`),ye=0,ve="";for(ye=0;ye<pe.length;++ye)if(ve=pe[ye],!!/^Content-Location:/i.test(ve)&&(ve=ve.slice(ve.indexOf("file")),he||(he=ve.slice(0,ve.lastIndexOf("/")+1)),ve.slice(0,he.length)!=he))for(;he.length>0&&(he=he.slice(0,he.length-1),he=he.slice(0,he.lastIndexOf("/")+1),ve.slice(0,he.length)!=he););var Le=(pe[1]||"").match(/boundary="(.*?)"/);if(!Le)throw new Error("MAD cannot find boundary");var et="--"+(Le[1]||""),Pe=[],Ue=[],He={FileIndex:Pe,FullPaths:Ue};I(He);var ht,xt=0;for(ye=0;ye<pe.length;++ye){var At=pe[ye];At!==et&&At!==et+"--"||(xt++&&yt(He,pe.slice(ht,ye),he),ht=ye)}return He}function Kt(ne,ge){var he=ge||{},pe=he.boundary||"SheetJS";pe="------="+pe;for(var ye=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+pe.slice(2)+'"',"","",""],ve=ne.FullPaths[0],Le=ve,et=ne.FileIndex[0],Pe=1;Pe<ne.FullPaths.length;++Pe)if(Le=ne.FullPaths[Pe].slice(ve.length),et=ne.FileIndex[Pe],!(!et.size||!et.content||Le=="Sh33tJ5")){Le=Le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Yt){return"_x"+Yt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Yt){return"_u"+Yt.charCodeAt(0).toString(16)+"_"});for(var Ue=et.content,He=Er&&Buffer.isBuffer(Ue)?Ue.toString("binary"):oe(Ue),ht=0,xt=Math.min(1024,He.length),At=0,gt=0;gt<=xt;++gt)(At=He.charCodeAt(gt))>=32&&At<128&&++ht;var Ct=ht>=xt*4/5;ye.push(pe),ye.push("Content-Location: "+(he.root||"file:///C:/SheetJS/")+Le),ye.push("Content-Transfer-Encoding: "+(Ct?"quoted-printable":"base64")),ye.push("Content-Type: "+Tt(et,Le)),ye.push(""),ye.push(Ct?st(He):_t(He))}return ye.push(pe+`--\r
`),ye.join(`\r
`)}function Lt(ne){var ge={};return I(ge,ne),ge}function Ut(ne,ge,he,pe){var ye=pe&&pe.unsafe;ye||I(ne);var ve=!ye&&Vr.find(ne,ge);if(!ve){var Le=ne.FullPaths[0];ge.slice(0,Le.length)==Le?Le=ge:(Le.slice(-1)!="/"&&(Le+="/"),Le=(Le+ge).replace("//","/")),ve={name:s(ge),type:2},ne.FileIndex.push(ve),ne.FullPaths.push(Le),ye||Vr.utils.cfb_gc(ne)}return ve.content=he,ve.size=he?he.length:0,pe&&(pe.CLSID&&(ve.clsid=pe.CLSID),pe.mt&&(ve.mt=pe.mt),pe.ct&&(ve.ct=pe.ct)),ve}function zr(ne,ge){I(ne);var he=Vr.find(ne,ge);if(he){for(var pe=0;pe<ne.FileIndex.length;++pe)if(ne.FileIndex[pe]==he)return ne.FileIndex.splice(pe,1),ne.FullPaths.splice(pe,1),!0}return!1}function Qt(ne,ge,he){I(ne);var pe=Vr.find(ne,ge);if(pe){for(var ye=0;ye<ne.FileIndex.length;++ye)if(ne.FileIndex[ye]==pe)return ne.FileIndex[ye].name=s(he),ne.FullPaths[ye]=he,!0}return!1}function ln(ne){B(ne,!0)}return t.find=F,t.read=k,t.parse=p,t.write=q,t.writeFile=G,t.utils={cfb_new:Lt,cfb_add:Ut,cfb_del:zr,cfb_mov:Qt,cfb_gc:ln,ReadShift:bh,CheckField:vP,prep_blob:ds,bconcat:sa,use_zlib:U,_deflateRaw:Qe,_inflateRaw:Ft,consts:W},t}();function Xse(e){return typeof e=="string"?g0(e):Array.isArray(e)?wse(e):e}function If(e,t,n){if(typeof Deno<"u"){if(n&&typeof t=="string")switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=g0(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var a=n=="utf8"?ff(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([Xse(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(e);return d.open("w"),d.encoding="binary",Array.isArray(t)&&(t=_f(t)),d.write(t),d.close(),t}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+e)}function da(e){for(var t=Object.keys(e),n=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&n.push(t[a]);return n}function lI(e,t){for(var n=[],a=da(e),s=0;s!==a.length;++s)n[e[a[s]][t]]==null&&(n[e[a[s]][t]]=a[s]);return n}function US(e){for(var t=[],n=da(e),a=0;a!==n.length;++a)t[e[n[a]]]=n[a];return t}function v0(e){for(var t=[],n=da(e),a=0;a!==n.length;++a)t[e[n[a]]]=parseInt(n[a],10);return t}function Qse(e){for(var t=[],n=da(e),a=0;a!==n.length;++a)t[e[n[a]]]==null&&(t[e[n[a]]]=[]),t[e[n[a]]].push(n[a]);return t}var vx=new Date(1899,11,30,0,0,0);function Ka(e,t){var n=e.getTime(),a=vx.getTime()+(e.getTimezoneOffset()-vx.getTimezoneOffset())*6e4;return(n-a)/(24*60*60*1e3)}var nP=new Date,Jse=vx.getTime()+(nP.getTimezoneOffset()-vx.getTimezoneOffset())*6e4,cI=nP.getTimezoneOffset();function aP(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Jse),t.getTimezoneOffset()!==cI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-cI)*6e4),t}var dI=new Date("2017-02-19T19:06:09.000Z"),sP=isNaN(dI.getFullYear())?new Date("2/19/17"):dI,Zse=sP.getFullYear()==2017;function _a(e,t){var n=new Date(e);if(Zse)return t>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):t<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(e instanceof Date)return e;if(sP.getFullYear()==1917&&!isNaN(n.getFullYear())){var a=n.getFullYear();return e.indexOf(""+a)>-1||n.setFullYear(n.getFullYear()+100),n}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function j0(e,t){if(Er&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return n[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function Va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Va(e[n]));return t}function mn(e,t){for(var n="";n.length<t;)n+=e;return n}function Zi(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return n=-n,i}),!isNaN(t=Number(a)))?t/n:t}var eie=["january","february","march","april","may","june","july","august","september","october","november","december"];function hf(e){var t=new Date(e),n=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return n;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&eie.indexOf(l)==-1)return n}else if(l.match(/[a-z]/))return n;return a<0||a>8099?n:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?n:t}function ir(e,t,n){if(e.FullPaths){if(typeof n=="string"){var a;return Er?a=po(n):a=Sse(n),Vr.utils.cfb_add(e,t,a)}Vr.utils.cfb_add(e,t,n)}else e.file(t,n)}function qS(){return Vr.utils.cfb_new()}var _n=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,tie={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},WS=US(tie),HS=/[&<>'"]/g,rie=/[\u0000-\u0008\u000b-\u001f]/g;function Fr(e){var t=e+"";return t.replace(HS,function(n){return WS[n]}).replace(rie,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function uI(e){return Fr(e).replace(/ /g,"_x0020_")}var iP=/[\u0000-\u001f]/g;function nie(e){var t=e+"";return t.replace(HS,function(n){return WS[n]}).replace(/\n/g,"<br/>").replace(iP,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function aie(e){var t=e+"";return t.replace(HS,function(n){return WS[n]}).replace(iP,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function sie(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function iie(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function kj(e){for(var t="",n=0,a=0,s=0,i=0,l=0,d=0;n<e.length;){if(a=e.charCodeAt(n++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(n++),a>191&&a<224){l=(a&31)<<6,l|=s&63,t+=String.fromCharCode(l);continue}if(i=e.charCodeAt(n++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}l=e.charCodeAt(n++),d=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(d>>>10&1023)),t+=String.fromCharCode(56320+(d&1023))}return t}function hI(e){var t=Kl(2*e.length),n,a,s=1,i=0,l=0,d;for(a=0;a<e.length;a+=s)s=1,(d=e.charCodeAt(a))<128?n=d:d<224?(n=(d&31)*64+(e.charCodeAt(a+1)&63),s=2):d<240?(n=(d&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,n=(d&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),n-=65536,l=55296+(n>>>10&1023),n=56320+(n&1023)),l!==0&&(t[i++]=l&255,t[i++]=l>>>8,l=0),t[i++]=n%256,t[i++]=n>>>8;return t.slice(0,i).toString("ucs2")}function fI(e){return po(e,"binary").toString("utf8")}var rm="foo bar baz",yh=Er&&(fI(rm)==kj(rm)&&fI||hI(rm)==kj(rm)&&hI)||kj,ff=Er?function(e){return po(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,a=0,s=0;n<e.length;)switch(a=e.charCodeAt(n++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(n++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},oie=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(n){for(var a=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}}(),oP=/(^\s|\s$|\n)/;function ia(e,t){return"<"+e+(t.match(oP)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function pf(e){return da(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function vt(e,t,n){return"<"+e+(n!=null?pf(n):"")+(t!=null?(t.match(oP)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function yw(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(n){if(t)throw n}return""}function lie(e,t){switch(typeof e){case"string":var n=vt("vt:lpwstr",Fr(e));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return vt((e|0)==e?"vt:i4":"vt:r8",Fr(String(e)));case"boolean":return vt("vt:bool",e?"true":"false")}if(e instanceof Date)return vt("vt:filetime",yw(e));throw new Error("Unable to serialize "+e)}var Hn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Qd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],us={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function cie(e,t){for(var n=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?n*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),n*Math.pow(2,a-52)*s)}function die(e,t,n){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,l=a?-t:t;isFinite(l)?l==0?s=i=0:(s=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var d=0;d<=5;++d,i/=256)e[n+d]=i&255;e[n+6]=(s&15)<<4|i&15,e[n+7]=s>>4|a}var pI=function(e){for(var t=[],n=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=n)t.push.apply(t,e[0][a].slice(s,s+n));return t},mI=Er?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:po(t)})):pI(e)}:pI,xI=function(e,t,n){for(var a=[],s=t;s<n;s+=2)a.push(String.fromCharCode(uh(e,s)));return a.join("").replace(gh,"")},GS=Er?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(gh,""):xI(e,t,n)}:xI,gI=function(e,t,n){for(var a=[],s=t;s<t+n;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},lP=Er?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):gI(e,t,n)}:gI,yI=function(e,t,n){for(var a=[],s=t;s<n;s++)a.push(String.fromCharCode(Gc(e,s)));return a.join("")},Df=Er?function(t,n,a){return Buffer.isBuffer(t)?t.toString("utf8",n,a):yI(t,n,a)}:yI,cP=function(e,t){var n=hs(e,t);return n>0?Df(e,t+4,t+4+n-1):""},dP=cP,uP=function(e,t){var n=hs(e,t);return n>0?Df(e,t+4,t+4+n-1):""},hP=uP,fP=function(e,t){var n=2*hs(e,t);return n>0?Df(e,t+4,t+4+n-1):""},pP=fP,mP=function(t,n){var a=hs(t,n);return a>0?GS(t,n+4,n+4+a):""},xP=mP,gP=function(e,t){var n=hs(e,t);return n>0?Df(e,t+4,t+4+n):""},yP=gP,bP=function(e,t){return cie(e,t)},jx=bP,KS=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Er&&(dP=function(t,n){if(!Buffer.isBuffer(t))return cP(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},hP=function(t,n){if(!Buffer.isBuffer(t))return uP(t,n);var a=t.readUInt32LE(n);return a>0?t.toString("utf8",n+4,n+4+a-1):""},pP=function(t,n){if(!Buffer.isBuffer(t))return fP(t,n);var a=2*t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a-1)},xP=function(t,n){if(!Buffer.isBuffer(t))return mP(t,n);var a=t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+a)},yP=function(t,n){if(!Buffer.isBuffer(t))return gP(t,n);var a=t.readUInt32LE(n);return t.toString("utf8",n+4,n+4+a)},jx=function(t,n){return Buffer.isBuffer(t)?t.readDoubleLE(n):bP(t,n)},KS=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Gc=function(e,t){return e[t]},uh=function(e,t){return e[t+1]*256+e[t]},uie=function(e,t){var n=e[t+1]*256+e[t];return n<32768?n:(65535-n+1)*-1},hs=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Ol=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},hie=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function bh(e,t){var n="",a,s,i=[],l,d,u,h;switch(t){case"dbcs":if(h=this.l,Er&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*e).toString("utf16le");else for(u=0;u<e;++u)n+=String.fromCharCode(uh(this,h)),h+=2;e*=2;break;case"utf8":n=Df(this,this.l,this.l+e);break;case"utf16le":e*=2,n=GS(this,this.l,this.l+e);break;case"wstr":return bh.call(this,e,"dbcs");case"lpstr-ansi":n=dP(this,this.l),e=4+hs(this,this.l);break;case"lpstr-cp":n=hP(this,this.l),e=4+hs(this,this.l);break;case"lpwstr":n=pP(this,this.l),e=4+2*hs(this,this.l);break;case"lpp4":e=4+hs(this,this.l),n=xP(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+hs(this,this.l),n=yP(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,n="";(l=Gc(this,this.l+e++))!==0;)i.push(Zp(l));n=i.join("");break;case"_wstr":for(e=0,n="";(l=uh(this,this.l+e))!==0;)i.push(Zp(l)),e+=2;e+=2,n=i.join("");break;case"dbcs-cont":for(n="",h=this.l,u=0;u<e;++u){if(this.lens&&this.lens.indexOf(h)!==-1)return l=Gc(this,h),this.l=h+1,d=bh.call(this,e-u,l?"dbcs-cont":"sbcs-cont"),i.join("")+d;i.push(Zp(uh(this,h))),h+=2}n=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(n="",h=this.l,u=0;u!=e;++u){if(this.lens&&this.lens.indexOf(h)!==-1)return l=Gc(this,h),this.l=h+1,d=bh.call(this,e-u,l?"dbcs-cont":"sbcs-cont"),i.join("")+d;i.push(Zp(Gc(this,h))),h+=1}n=i.join("");break;default:switch(e){case 1:return a=Gc(this,this.l),this.l++,a;case 2:return a=(t==="i"?uie:uh)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?Ol:hie)(this,this.l),this.l+=4,a):(s=hs(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=jx(this,this.l):s=jx([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:n=lP(this,this.l,e);break}}return this.l+=e,n}var fie=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},pie=function(e,t,n){e[n]=t&255,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},mie=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255};function xie(e,t,n){var a=0,s=0;if(n==="dbcs"){for(s=0;s!=t.length;++s)mie(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(n==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(n==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(n==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var l=t.charCodeAt(s);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,fie(this,t,this.l);break;case 8:if(a=8,n==="f"){die(this,t,this.l);break}case 16:break;case-4:a=4,pie(this,t,this.l);break}return this.l+=a,this}function vP(e,t){var n=lP(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function ds(e,t){e.l=t,e.read_shift=bh,e.chk=vP,e.write_shift=xie}function Ni(e,t){e.l+=t}function nt(e){var t=Kl(e);return ds(t,0),t}function Ga(){var e=[],t=Er?256:2048,n=function(h){var p=nt(h);return ds(p,0),p},a=n(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(h){return a&&h<a.length-a.l?a:(s(),a=n(Math.max(h+1,t)))},l=function(){return s(),sa(e)},d=function(h){s(),a=h,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:d,end:l,_bufs:e}}function ut(e,t,n,a){var s=+t,i;if(!isNaN(s)){a||(a=che[s].p||(n||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var l=e.next(i);s<=127?l.write_shift(1,s):(l.write_shift(1,(s&127)+128),l.write_shift(1,s>>7));for(var d=0;d!=4;++d)if(a>=128)l.write_shift(1,(a&127)+128),a>>=7;else{l.write_shift(1,a);break}a>0&&KS(n)&&e.push(n)}}function vh(e,t,n){var a=Va(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!n||n.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function bI(e,t,n){var a=Va(e);return a.s=vh(a.s,t.s,n),a.e=vh(a.e,t.s,n),a}function jh(e,t){if(e.cRel&&e.c<0)for(e=Va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=Lr(e);return!e.cRel&&e.cRel!=null&&(n=bie(n)),!e.rRel&&e.rRel!=null&&(n=gie(n)),n}function _j(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ja(e.s.c)+":"+(e.e.cRel?"":"$")+ja(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+la(e.s.r)+":"+(e.e.rRel?"":"$")+la(e.e.r):jh(e.s,t.biff)+":"+jh(e.e,t.biff)}function VS(e){return parseInt(yie(e),10)-1}function la(e){return""+(e+1)}function gie(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function yie(e){return e.replace(/\$(\d+)$/,"$1")}function YS(e){for(var t=vie(e),n=0,a=0;a!==t.length;++a)n=26*n+t.charCodeAt(a)-64;return n-1}function ja(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function bie(e){return e.replace(/^([A-Z])/,"$$$1")}function vie(e){return e.replace(/^\$([A-Z])/,"$1")}function jie(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Gn(e){for(var t=0,n=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:t-1}}function Lr(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function ms(e){var t=e.indexOf(":");return t==-1?{s:Gn(e),e:Gn(e)}:{s:Gn(e.slice(0,t)),e:Gn(e.slice(t+1))}}function En(e,t){return typeof t>"u"||typeof t=="number"?En(e.s,e.e):(typeof e!="string"&&(e=Lr(e)),typeof t!="string"&&(t=Lr(t)),e==t?e:e+":"+t)}function nn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,a=0,s=0,i=e.length;for(n=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)n=26*n+s;for(t.s.c=--n,n=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)n=10*n+s;if(t.s.r=--n,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,n=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)n=26*n+s;for(t.e.c=--n,n=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)n=10*n+s;return t.e.r=--n,t}function vI(e,t){var n=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Xo(e.z,n?Ka(t):t)}catch{}try{return e.w=Xo((e.XF||{}).numFmtId||(n?14:0),n?Ka(t):t)}catch{return""+t}}function lo(e,t,n){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),e.t=="e"?Rf[e.v]||e.v:t==null?vI(e,e.v):vI(e,t))}function tc(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",a={};return a[n]=e,{SheetNames:[n],Sheets:a}}function jP(e,t,n){var a=n||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),l=0,d=0;if(i&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var u=typeof a.origin=="string"?Gn(a.origin):a.origin;l=u.r,d=u.c}i["!ref"]||(i["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var p=nn(i["!ref"]);h.s.c=p.s.c,h.s.r=p.s.r,h.e.c=Math.max(h.e.c,p.e.c),h.e.r=Math.max(h.e.r,p.e.r),l==-1&&(h.e.r=l=p.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=t[m].length;++g)if(!(typeof t[m][g]>"u")){var b={v:t[m][g]},j=l+m,v=d+g;if(h.s.r>j&&(h.s.r=j),h.s.c>v&&(h.s.c=v),h.e.r<j&&(h.e.r=j),h.e.c<v&&(h.e.c=v),t[m][g]&&typeof t[m][g]=="object"&&!Array.isArray(t[m][g])&&!(t[m][g]instanceof Date))b=t[m][g];else if(Array.isArray(b.v)&&(b.f=t[m][g][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(a.nullError)b.t="e",b.v=0;else if(a.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=a.dateNF||xn[14],a.cellDates?(b.t="d",b.w=Xo(b.z,Ka(b.v))):(b.t="n",b.v=Ka(b.v),b.w=Xo(b.z,b.v))):b.t="s";if(s)i[j]||(i[j]=[]),i[j][v]&&i[j][v].z&&(b.z=i[j][v].z),i[j][v]=b;else{var y=Lr({c:v,r:j});i[y]&&i[y].z&&(b.z=i[y].z),i[y]=b}}}return h.s.c<1e7&&(i["!ref"]=En(h)),i}function Jd(e,t){return jP(null,e,t)}function wie(e){return e.read_shift(4,"i")}function si(e,t){return t||(t=nt(4)),t.write_shift(4,e),t}function wa(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Kn(e,t){var n=!1;return t==null&&(n=!0,t=nt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function Sie(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Nie(e,t){return t||(t=nt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function XS(e,t){var n=e.l,a=e.read_shift(1),s=wa(e),i=[],l={t:s,h:s};if((a&1)!==0){for(var d=e.read_shift(4),u=0;u!=d;++u)i.push(Sie(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=n+t,l}function Tie(e,t){var n=!1;return t==null&&(n=!0,t=nt(15+4*e.t.length)),t.write_shift(1,0),Kn(e.t,t),n?t.slice(0,t.l):t}var Cie=XS;function Aie(e,t){var n=!1;return t==null&&(n=!0,t=nt(23+4*e.t.length)),t.write_shift(1,1),Kn(e.t,t),t.write_shift(4,1),Nie({},t),n?t.slice(0,t.l):t}function Fs(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function rc(e,t){return t==null&&(t=nt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function nc(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function ac(e,t){return t==null&&(t=nt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Eie=wa,wP=Kn;function QS(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function wx(e,t){var n=!1;return t==null&&(n=!0,t=nt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var Oie=wa,bw=QS,JS=wx;function SP(e){var t=e.slice(e.l,e.l+4),n=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?jx([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Ol(t,0)>>2;return n?s/100:s}function NP(e,t){t==null&&(t=nt(4));var n=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,n=1),a)t.write_shift(-4,((n?s:e)<<2)+(n+2));else throw new Error("unsupported RkNumber "+e)}function TP(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function kie(e,t){return t||(t=nt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var sc=TP,Zd=kie;function eu(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Vl(e,t){return(t||nt(8)).write_shift(8,e,"f")}function _ie(e){var t={},n=e.read_shift(1),a=n>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),d=e.read_shift(1),u=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var h=$ie[s];h&&(t.rgb=_I(h));break;case 2:t.rgb=_I([l,d,u]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Sx(e,t){if(t||(t=nt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Iie(e){var t=e.read_shift(1);e.l++;var n={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return n}function Die(e,t){t||(t=nt(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,n),t.write_shift(1,0),t}var CP=2,ls=3,nm=11,Nx=19,am=64,Rie=65,Pie=71,Mie=4108,Bie=4126,aa=80,jI={1:{n:"CodePage",t:CP},2:{n:"Category",t:aa},3:{n:"PresentationFormat",t:aa},4:{n:"ByteCount",t:ls},5:{n:"LineCount",t:ls},6:{n:"ParagraphCount",t:ls},7:{n:"SlideCount",t:ls},8:{n:"NoteCount",t:ls},9:{n:"HiddenCount",t:ls},10:{n:"MultimediaClipCount",t:ls},11:{n:"ScaleCrop",t:nm},12:{n:"HeadingPairs",t:Mie},13:{n:"TitlesOfParts",t:Bie},14:{n:"Manager",t:aa},15:{n:"Company",t:aa},16:{n:"LinksUpToDate",t:nm},17:{n:"CharacterCount",t:ls},19:{n:"SharedDoc",t:nm},22:{n:"HyperlinksChanged",t:nm},23:{n:"AppVersion",t:ls,p:"version"},24:{n:"DigSig",t:Rie},26:{n:"ContentType",t:aa},27:{n:"ContentStatus",t:aa},28:{n:"Language",t:aa},29:{n:"Version",t:aa},255:{},2147483648:{n:"Locale",t:Nx},2147483651:{n:"Behavior",t:Nx},1919054434:{}},wI={1:{n:"CodePage",t:CP},2:{n:"Title",t:aa},3:{n:"Subject",t:aa},4:{n:"Author",t:aa},5:{n:"Keywords",t:aa},6:{n:"Comments",t:aa},7:{n:"Template",t:aa},8:{n:"LastAuthor",t:aa},9:{n:"RevNumber",t:aa},10:{n:"EditTime",t:am},11:{n:"LastPrinted",t:am},12:{n:"CreatedDate",t:am},13:{n:"ModifiedDate",t:am},14:{n:"PageCount",t:ls},15:{n:"WordCount",t:ls},16:{n:"CharCount",t:ls},17:{n:"Thumbnail",t:Pie},18:{n:"Application",t:aa},19:{n:"DocSecurity",t:ls},255:{},2147483648:{n:"Locale",t:Nx},2147483651:{n:"Behavior",t:Nx},1919054434:{}};function Fie(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Lie=Fie([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),$ie=Va(Lie),Rf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zie={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},sm={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function AP(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function EP(e,t){var n=Qse(zie),a=[],s;a[a.length]=_n,a[a.length]=vt("Types",null,{xmlns:Hn.CT,"xmlns:xsd":Hn.xsd,"xmlns:xsi":Hn.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return vt("Default",null,{Extension:u[0],ContentType:u[1]})}));var i=function(u){e[u]&&e[u].length>0&&(s=e[u][0],a[a.length]=vt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:sm[u][t.bookType]||sm[u].xlsx}))},l=function(u){(e[u]||[]).forEach(function(h){a[a.length]=vt("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:sm[u][t.bookType]||sm[u].xlsx})})},d=function(u){(e[u]||[]).forEach(function(h){a[a.length]=vt("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:n[u][0]})})};return i("workbooks"),l("sheets"),l("charts"),d("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),l("metadata"),d("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var Sr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function OP(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ad(e){var t=[_n,vt("Relationships",null,{xmlns:Hn.RELS})];return da(e["!id"]).forEach(function(n){t[t.length]=vt("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Br(e,t,n,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=n,[Sr.HLINK,Sr.XPATH,Sr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}function Uie(e){var t=[_n];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function SI(e,t,n){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function qie(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Wie(e){var t=[_n];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=e.length;++n)t.push(SI(e[n][0],e[n][1])),t.push(qie("",e[n][0]));return t.push(SI("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function kP(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+mx.version+"</meta:generator></office:meta></office:document-meta>"}var Ll=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Ij(e,t,n,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Fr(t),a[a.length]=n?vt(e,t,n):ia(e,t))}function _P(e,t){var n=t||{},a=[_n,vt("cp:coreProperties",null,{"xmlns:cp":Hn.CORE_PROPS,"xmlns:dc":Hn.dc,"xmlns:dcterms":Hn.dcterms,"xmlns:dcmitype":Hn.dcmitype,"xmlns:xsi":Hn.xsi})],s={};if(!e&&!n.Props)return a.join("");e&&(e.CreatedDate!=null&&Ij("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:yw(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&Ij("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:yw(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=Ll.length;++i){var l=Ll[i],d=n.Props&&n.Props[l[1]]!=null?n.Props[l[1]]:e?e[l[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&Ij(l[0],d,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var sd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],IP=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function DP(e){var t=[],n=vt;return e||(e={}),e.Application="SheetJS",t[t.length]=_n,t[t.length]=vt("Properties",null,{xmlns:Hn.EXT_PROPS,"xmlns:vt":Hn.vt}),sd.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=Fr(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=n(a[0],s))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Fr(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function RP(e){var t=[_n,vt("Properties",null,{xmlns:Hn.CUST_PROPS,"xmlns:vt":Hn.vt})];if(!e)return t.join("");var n=1;return da(e).forEach(function(s){++n,t[t.length]=vt("property",lie(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Fr(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var NI={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Hie(e,t){var n=[];return da(NI).map(function(a){for(var s=0;s<Ll.length;++s)if(Ll[s][1]==a)return Ll[s];for(s=0;s<sd.length;++s)if(sd[s][1]==a)return sd[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];switch(a[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(ia(NI[a[1]]||a[1],s))}}),vt("DocumentProperties",n.join(""),{xmlns:us.o})}function Gie(e,t){var n=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&da(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<Ll.length;++l)if(i==Ll[l][1])return;for(l=0;l<sd.length;++l)if(i==sd[l][1])return;for(l=0;l<n.length;++l)if(i==n[l])return;var d=e[i],u="string";typeof d=="number"?(u="float",d=String(d)):d===!0||d===!1?(u="boolean",d=d?"1":"0"):d=String(d),s.push(vt(uI(i),d,{"dt:dt":u}))}}),t&&da(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=t[i],d="string";typeof l=="number"?(d="float",l=String(l)):l===!0||l===!1?(d="boolean",l=l?"1":"0"):l instanceof Date?(d="dateTime.tz",l=l.toISOString()):l=String(l),s.push(vt(uI(i),l,{"dt:dt":d}))}}),"<"+a+' xmlns="'+us.o+'">'+s.join("")+"</"+a+">"}function Kie(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,n=t.getTime()/1e3+11644473600,a=n%Math.pow(2,32),s=(n-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var l=nt(8);return l.write_shift(4,a),l.write_shift(4,s),l}function TI(e,t){var n=nt(4),a=nt(4);switch(n.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=nt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=Kie(t);break;case 31:case 80:for(a=nt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return sa([n,a])}var PP=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Vie(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function CI(e,t,n){var a=nt(8),s=[],i=[],l=8,d=0,u=nt(8),h=nt(8);if(u.write_shift(4,2),u.write_shift(4,1200),h.write_shift(4,1),i.push(u),s.push(h),l+=8+u.length,!t){h=nt(8),h.write_shift(4,0),s.unshift(h);var p=[nt(4)];for(p[0].write_shift(4,e.length),d=0;d<e.length;++d){var m=e[d][0];for(u=nt(8+2*(m.length+1)+(m.length%2?0:2)),u.write_shift(4,d+2),u.write_shift(4,m.length+1),u.write_shift(0,m,"dbcs");u.l!=u.length;)u.write_shift(1,0);p.push(u)}u=sa(p),i.unshift(u),l+=8+u.length}for(d=0;d<e.length;++d)if(!(t&&!t[e[d][0]])&&!(PP.indexOf(e[d][0])>-1||IP.indexOf(e[d][0])>-1)&&e[d][1]!=null){var g=e[d][1],b=0;if(t){b=+t[e[d][0]];var j=n[b];if(j.p=="version"&&typeof g=="string"){var v=g.split(".");g=(+v[0]<<16)+(+v[1]||0)}u=TI(j.t,g)}else{var y=Vie(g);y==-1&&(y=31,g=String(g)),u=TI(y,g)}i.push(u),h=nt(8),h.write_shift(4,t?b:2+d),s.push(h),l+=8+u.length}var A=8*(i.length+1);for(d=0;d<i.length;++d)s[d].write_shift(4,A),A+=i[d].length;return a.write_shift(4,l),a.write_shift(4,i.length),sa([a].concat(s).concat(i))}function AI(e,t,n,a,s,i){var l=nt(s?68:48),d=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,Vr.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,s?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,s?68:48);var u=CI(e,n,a);if(d.push(u),s){var h=CI(s,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+u.length),d.push(h)}return sa(d)}function Yie(e,t){t||(t=nt(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}function Xie(e,t){return e.read_shift(t)===1}function Oa(e,t){return t||(t=nt(2)),t.write_shift(2,+!!e),t}function MP(e){return e.read_shift(2,"u")}function ks(e,t){return t||(t=nt(2)),t.write_shift(2,e),t}function BP(e,t,n){return n||(n=nt(2)),n.write_shift(1,t=="e"?+e:+!!e),n.write_shift(1,t=="e"?1:0),n}function FP(e,t,n){var a=e.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else n.biff==12&&(s="wstr");n.biff>=2&&n.biff<=5&&(s="cpstr");var l=a?e.read_shift(a,s):"";return l}function Qie(e){var t=e.t||"",n=nt(3);n.write_shift(2,t.length),n.write_shift(1,1);var a=nt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[n,a];return sa(s)}function Jie(e,t,n){var a;if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Zie(e,t,n){var a=e.read_shift(n&&n.biff==2?1:2);return a===0?(e.l++,""):Jie(e,a,n)}function eoe(e,t,n){if(n.biff>5)return Zie(e,t,n);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function LP(e,t,n){return n||(n=nt(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function EI(e,t){t||(t=nt(6+e.length*2)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function toe(e){var t=nt(512),n=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(n=0;n<l.length;++n)t.write_shift(4,l[n]);if(i==28)a=a.slice(1),EI(a,t);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<l.length;++n)t.write_shift(1,parseInt(l[n],16));var d=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(d.length+1)),n=0;n<d.length;++n)t.write_shift(2,d.charCodeAt(n));t.write_shift(2,0),i&8&&EI(s>-1?a.slice(s+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<l.length;++n)t.write_shift(1,parseInt(l[n],16));for(var u=0;a.slice(u*3,u*3+3)=="../"||a.slice(u*3,u*3+3)=="..\\";)++u;for(t.write_shift(2,u),t.write_shift(4,a.length-3*u+1),n=0;n<a.length-3*u;++n)t.write_shift(1,a.charCodeAt(n+3*u)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function Yl(e,t,n,a){return a||(a=nt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,n||0),a}function roe(e,t,n){var a=n.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),l=e.read_shift(a,"i");return[s,i,l]}function noe(e){var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r:n}}}function $P(e,t){return t||(t=nt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function ZS(e,t,n){var a=1536,s=16;switch(n.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=nt(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function aoe(e,t){var n=!t||t.biff==8,a=nt(n?112:54);for(a.write_shift(t.biff==8?2:1,7),n&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(n?0:536870912));a.l<a.length;)a.write_shift(1,n?0:32);return a}function soe(e,t){var n=!t||t.biff>=8?2:1,a=nt(8+n*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function ioe(e,t){var n=nt(8);n.write_shift(4,e.Count),n.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=Qie(e[s]);var i=sa([n].concat(a));return i.parts=[n.length].concat(a.map(function(l){return l.length})),i}function ooe(){var e=nt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function loe(e){var t=nt(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function coe(e,t){var n=e.name||"Arial",a=t&&t.biff==5,s=a?15+n.length:16+2*n.length,i=nt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*n.length,n,a?"sbcs":"utf16le"),i}function doe(e,t,n,a){var s=nt(10);return Yl(e,t,a,s),s.write_shift(4,n),s}function uoe(e,t,n,a,s){var i=!s||s.biff==8,l=nt(8+ +i+(1+i)*n.length);return Yl(e,t,a,l),l.write_shift(2,n.length),i&&l.write_shift(1,1),l.write_shift((1+i)*n.length,n,i?"utf16le":"sbcs"),l}function hoe(e,t,n,a){var s=n&&n.biff==5;a||(a=nt(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}function foe(e,t){var n=t.biff==8||!t.biff?4:2,a=nt(2*n+6);return a.write_shift(n,e.s.r),a.write_shift(n,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function OI(e,t,n,a){var s=n&&n.biff==5;a||(a=nt(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function poe(e){var t=nt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function moe(e,t,n,a,s,i){var l=nt(8);return Yl(e,t,a,l),BP(n,i,l),l}function xoe(e,t,n,a){var s=nt(14);return Yl(e,t,a,s),Vl(n,s),s}function goe(e,t,n){if(n.biff<8)return yoe(e,t,n);for(var a=[],s=e.l+t,i=e.read_shift(n.biff>8?4:2);i--!==0;)a.push(roe(e,n.biff>8?12:6,n));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function yoe(e,t,n){e[e.l+1]==3&&e[e.l]++;var a=FP(e,t,n);return a.charCodeAt(0)==3?a.slice(1):a}function boe(e){var t=nt(2+e.length*8);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)$P(e[n],t);return t}function voe(e){var t=nt(24),n=Gn(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return sa([t,toe(e[1])])}function joe(e){var t=e[1].Tooltip,n=nt(10+2*(t.length+1));n.write_shift(2,2048);var a=Gn(e[0]);n.write_shift(2,a.r),n.write_shift(2,a.r),n.write_shift(2,a.c),n.write_shift(2,a.c);for(var s=0;s<t.length;++s)n.write_shift(2,t.charCodeAt(s));return n.write_shift(2,0),n}function woe(e){return e||(e=nt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Soe(e,t,n){if(!n.cellStyles)return Ni(e,t);var a=n&&n.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),l=e.read_shift(a),d=e.read_shift(a),u=e.read_shift(2);a==2&&(e.l+=2);var h={s,e:i,w:l,ixfe:d,flags:u};return(n.biff>=5||!n.biff)&&(h.level=u>>8&7),h}function Noe(e,t){var n=nt(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,e.width*256),n.write_shift(2,0);var a=0;return e.hidden&&(a|=1),n.write_shift(1,a),a=e.level||0,n.write_shift(1,a),n.write_shift(2,0),n}function Toe(e){for(var t=nt(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}function Coe(e,t,n){var a=nt(15);return Mf(a,e,t),a.write_shift(8,n,"f"),a}function Aoe(e,t,n){var a=nt(9);return Mf(a,e,t),a.write_shift(2,n),a}var Eoe=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=US({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(d,u){var h=[],p=Kl(1);switch(u.type){case"base64":p=Zs(oo(d));break;case"binary":p=Zs(d);break;case"buffer":case"array":p=d;break}ds(p,0);var m=p.read_shift(1),g=!!(m&136),b=!1,j=!1;switch(m){case 2:break;case 3:break;case 48:b=!0,g=!0;break;case 49:b=!0,g=!0;break;case 131:break;case 139:break;case 140:j=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var v=0,y=521;m==2&&(v=p.read_shift(2)),p.l+=3,m!=2&&(v=p.read_shift(4)),v>1048576&&(v=1e6),m!=2&&(y=p.read_shift(2));var A=p.read_shift(2),E=u.codepage||1252;m!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(E=e[p[p.l]]),p.l+=1,p.l+=2),j&&(p.l+=36);for(var O=[],S={},C=Math.min(p.length,m==2?521:y-10-(b?264:0)),k=j?32:11;p.l<C&&p[p.l]!=13;)switch(S={},S.name=xx.utils.decode(E,p.slice(p.l,p.l+k)).replace(/[\u0000\r\n].*$/g,""),p.l+=k,S.type=String.fromCharCode(p.read_shift(1)),m!=2&&!j&&(S.offset=p.read_shift(4)),S.len=p.read_shift(1),m==2&&(S.offset=p.read_shift(2)),S.dec=p.read_shift(1),S.name.length&&O.push(S),m!=2&&(p.l+=j?13:14),S.type){case"B":(!b||S.len!=8)&&u.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(p[p.l]!==13&&(p.l=y-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=y;var I=0,z=0;for(h[0]=[],z=0;z!=O.length;++z)h[0][z]=O[z].name;for(;v-- >0;){if(p[p.l]===42){p.l+=A;continue}for(++p.l,h[++I]=[],z=0,z=0;z!=O.length;++z){var B=p.slice(p.l,p.l+O[z].len);p.l+=O[z].len,ds(B,0);var M=xx.utils.decode(E,B);switch(O[z].type){case"C":M.trim().length&&(h[I][z]=M.replace(/\s+$/,""));break;case"D":M.length===8?h[I][z]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):h[I][z]=M;break;case"F":h[I][z]=parseFloat(M.trim());break;case"+":case"I":h[I][z]=j?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":h[I][z]=!0;break;case"N":case"F":h[I][z]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));h[I][z]="##MEMO##"+(j?parseInt(M.trim(),10):B.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(h[I][z]=+M||0);break;case"@":h[I][z]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":h[I][z]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":h[I][z]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[I][z]=-B.read_shift(-8,"f");break;case"B":if(b&&O[z].len==8){h[I][z]=B.read_shift(8,"f");break}case"G":case"P":B.l+=O[z].len;break;case"0":if(O[z].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[z].type)}}}if(m!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return u&&u.sheetRows&&(h=h.slice(0,u.sheetRows)),u.DBF=O,h}function a(d,u){var h=u||{};h.dateNF||(h.dateNF="yyyymmdd");var p=Jd(n(d,h),h);return p["!cols"]=h.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete h.DBF,p}function s(d,u){try{return tc(a(d,u),u)}catch(h){if(u&&u.WTF)throw h}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(d,u){var h=u||{};if(+h.codepage>=0&&df(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var p=Ga(),m=Ox(d,{header:1,raw:!0,cellDates:!0}),g=m[0],b=m.slice(1),j=d["!cols"]||[],v=0,y=0,A=0,E=1;for(v=0;v<g.length;++v){if(((j[v]||{}).DBF||{}).name){g[v]=j[v].DBF.name,++A;continue}if(g[v]!=null){if(++A,typeof g[v]=="number"&&(g[v]=g[v].toString(10)),typeof g[v]!="string")throw new Error("DBF Invalid column name "+g[v]+" |"+typeof g[v]+"|");if(g.indexOf(g[v])!==v){for(y=0;y<1024;++y)if(g.indexOf(g[v]+"_"+y)==-1){g[v]+="_"+y;break}}}}var O=nn(d["!ref"]),S=[],C=[],k=[];for(v=0;v<=O.e.c-O.s.c;++v){var I="",z="",B=0,M=[];for(y=0;y<b.length;++y)b[y][v]!=null&&M.push(b[y][v]);if(M.length==0||g[v]==null){S[v]="?";continue}for(y=0;y<M.length;++y){switch(typeof M[y]){case"number":z="B";break;case"string":z="C";break;case"boolean":z="L";break;case"object":z=M[y]instanceof Date?"D":"C";break;default:z="C"}B=Math.max(B,String(M[y]).length),I=I&&I!=z?"C":z}B>250&&(B=250),z=((j[v]||{}).DBF||{}).type,z=="C"&&j[v].DBF.len>B&&(B=j[v].DBF.len),I=="B"&&z=="N"&&(I="N",k[v]=j[v].DBF.dec,B=j[v].DBF.len),C[v]=I=="C"||z=="N"?B:i[I]||0,E+=C[v],S[v]=I}var F=p.next(32);for(F.write_shift(4,318902576),F.write_shift(4,b.length),F.write_shift(2,296+32*A),F.write_shift(2,E),v=0;v<4;++v)F.write_shift(4,0);for(F.write_shift(4,0|(+t[UR]||3)<<8),v=0,y=0;v<g.length;++v)if(g[v]!=null){var N=p.next(32),L=(g[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,L,"sbcs"),N.write_shift(1,S[v]=="?"?"C":S[v],"sbcs"),N.write_shift(4,y),N.write_shift(1,C[v]||i[S[v]]||0),N.write_shift(1,k[v]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),y+=C[v]||i[S[v]]||0}var P=p.next(264);for(P.write_shift(4,13),v=0;v<65;++v)P.write_shift(4,0);for(v=0;v<b.length;++v){var _=p.next(E);for(_.write_shift(1,0),y=0;y<g.length;++y)if(g[y]!=null)switch(S[y]){case"L":_.write_shift(1,b[v][y]==null?63:b[v][y]?84:70);break;case"B":_.write_shift(8,b[v][y]||0,"f");break;case"N":var R="0";for(typeof b[v][y]=="number"&&(R=b[v][y].toFixed(k[y]||0)),A=0;A<C[y]-R.length;++A)_.write_shift(1,32);_.write_shift(1,R,"sbcs");break;case"D":b[v][y]?(_.write_shift(4,("0000"+b[v][y].getFullYear()).slice(-4),"sbcs"),_.write_shift(2,("00"+(b[v][y].getMonth()+1)).slice(-2),"sbcs"),_.write_shift(2,("00"+b[v][y].getDate()).slice(-2),"sbcs")):_.write_shift(8,"00000000","sbcs");break;case"C":var W=String(b[v][y]!=null?b[v][y]:"").slice(0,C[y]);for(_.write_shift(1,W,"sbcs"),A=0;A<C[y]-W.length;++A)_.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:s,to_sheet:a,from_sheet:l}}(),Ooe=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+da(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(g,b){var j=e[b];return typeof j=="number"?Z6(j):j},a=function(g,b,j){var v=b.charCodeAt(0)-32<<4|j.charCodeAt(0)-48;return v==59?g:Z6(v)};e["|"]=254;function s(g,b){switch(b.type){case"base64":return i(oo(g),b);case"binary":return i(g,b);case"buffer":return i(Er&&Buffer.isBuffer(g)?g.toString("binary"):_f(g),b);case"array":return i(j0(g),b)}throw new Error("Unrecognized type "+b.type)}function i(g,b){var j=g.split(/[\n\r]+/),v=-1,y=-1,A=0,E=0,O=[],S=[],C=null,k={},I=[],z=[],B=[],M=0,F;for(+b.codepage>=0&&df(+b.codepage);A!==j.length;++A){M=0;var N=j[A].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,n),L=N.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),P=L[0],_;if(N.length>0)switch(P){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&S.push(N.slice(3).replace(/;;/g,";"));break;case"C":var R=!1,W=!1,G=!1,oe=!1,q=-1,V=-1;for(E=1;E<L.length;++E)switch(L[E].charAt(0)){case"A":break;case"X":y=parseInt(L[E].slice(1))-1,W=!0;break;case"Y":for(v=parseInt(L[E].slice(1))-1,W||(y=0),F=O.length;F<=v;++F)O[F]=[];break;case"K":_=L[E].slice(1),_.charAt(0)==='"'?_=_.slice(1,_.length-1):_==="TRUE"?_=!0:_==="FALSE"?_=!1:isNaN(Zi(_))?isNaN(hf(_).getDate())||(_=_a(_)):(_=Zi(_),C!==null&&eP(C)&&(_=aP(_))),R=!0;break;case"E":oe=!0;var U=Ale(L[E].slice(1),{r:v,c:y});O[v][y]=[O[v][y],U];break;case"S":G=!0,O[v][y]=[O[v][y],"S5S"];break;case"G":break;case"R":q=parseInt(L[E].slice(1))-1;break;case"C":V=parseInt(L[E].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+N)}if(R&&(O[v][y]&&O[v][y].length==2?O[v][y][0]=_:O[v][y]=_,C=null),G){if(oe)throw new Error("SYLK shared formula cannot have own formula");var X=q>-1&&O[q][V];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");O[v][y][1]=Ele(X[1],{r:v-q,c:y-V})}break;case"F":var H=0;for(E=1;E<L.length;++E)switch(L[E].charAt(0)){case"X":y=parseInt(L[E].slice(1))-1,++H;break;case"Y":for(v=parseInt(L[E].slice(1))-1,F=O.length;F<=v;++F)O[F]=[];break;case"M":M=parseInt(L[E].slice(1))/20;break;case"F":break;case"G":break;case"P":C=S[parseInt(L[E].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=L[E].slice(1).split(" "),F=parseInt(B[0],10);F<=parseInt(B[1],10);++F)M=parseInt(B[2],10),z[F-1]=M===0?{hidden:!0}:{wch:M},eN(z[F-1]);break;case"C":y=parseInt(L[E].slice(1))-1,z[y]||(z[y]={});break;case"R":v=parseInt(L[E].slice(1))-1,I[v]||(I[v]={}),M>0?(I[v].hpt=M,I[v].hpx=HP(M)):M===0&&(I[v].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+N)}H<1&&(C=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+N)}}return I.length>0&&(k["!rows"]=I),z.length>0&&(k["!cols"]=z),b&&b.sheetRows&&(O=O.slice(0,b.sheetRows)),[O,k]}function l(g,b){var j=s(g,b),v=j[0],y=j[1],A=Jd(v,b);return da(y).forEach(function(E){A[E]=y[E]}),A}function d(g,b){return tc(l(g,b),b)}function u(g,b,j,v){var y="C;Y"+(j+1)+";X"+(v+1)+";K";switch(g.t){case"n":y+=g.v||0,g.f&&!g.F&&(y+=";E"+rN(g.f,{r:j,c:v}));break;case"b":y+=g.v?"TRUE":"FALSE";break;case"e":y+=g.w||g.v;break;case"d":y+='"'+(g.w||g.v)+'"';break;case"s":y+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function h(g,b){b.forEach(function(j,v){var y="F;W"+(v+1)+" "+(v+1)+" ";j.hidden?y+="0":(typeof j.width=="number"&&!j.wpx&&(j.wpx=Tx(j.width)),typeof j.wpx=="number"&&!j.wch&&(j.wch=Cx(j.wpx)),typeof j.wch=="number"&&(y+=Math.round(j.wch))),y.charAt(y.length-1)!=" "&&g.push(y)})}function p(g,b){b.forEach(function(j,v){var y="F;";j.hidden?y+="M0;":j.hpt?y+="M"+20*j.hpt+";":j.hpx&&(y+="M"+20*Ax(j.hpx)+";"),y.length>2&&g.push(y+"R"+(v+1))})}function m(g,b){var j=["ID;PWXL;N;E"],v=[],y=nn(g["!ref"]),A,E=Array.isArray(g),O=`\r
`;j.push("P;PGeneral"),j.push("F;P0;DG0G8;M255"),g["!cols"]&&h(j,g["!cols"]),g["!rows"]&&p(j,g["!rows"]),j.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var S=y.s.r;S<=y.e.r;++S)for(var C=y.s.c;C<=y.e.c;++C){var k=Lr({r:S,c:C});A=E?(g[S]||[])[C]:g[k],!(!A||A.v==null&&(!A.f||A.F))&&v.push(u(A,g,S,C))}return j.join(O)+O+v.join(O)+O+"E"+O}return{to_workbook:d,to_sheet:l,from_sheet:m}}(),koe=function(){function e(i,l){switch(l.type){case"base64":return t(oo(i),l);case"binary":return t(i,l);case"buffer":return t(Er&&Buffer.isBuffer(i)?i.toString("binary"):_f(i),l);case"array":return t(j0(i),l)}throw new Error("Unrecognized type "+l.type)}function t(i,l){for(var d=i.split(`
`),u=-1,h=-1,p=0,m=[];p!==d.length;++p){if(d[p].trim()==="BOT"){m[++u]=[],h=0;continue}if(!(u<0)){var g=d[p].trim().split(","),b=g[0],j=g[1];++p;for(var v=d[p]||"";(v.match(/["]/g)||[]).length&1&&p<d.length-1;)v+=`
`+d[++p];switch(v=v.trim(),+b){case-1:if(v==="BOT"){m[++u]=[],h=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?m[u][h]=!0:v==="FALSE"?m[u][h]=!1:isNaN(Zi(j))?isNaN(hf(j).getDate())?m[u][h]=j:m[u][h]=_a(j):m[u][h]=Zi(j),++h;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),m[u][h++]=v!==""?v:null;break}if(v==="EOD")break}}return l&&l.sheetRows&&(m=m.slice(0,l.sheetRows)),m}function n(i,l){return Jd(e(i,l),l)}function a(i,l){return tc(n(i,l),l)}var s=function(){var i=function(u,h,p,m,g){u.push(h),u.push(p+","+m),u.push('"'+g.replace(/"/g,'""')+'"')},l=function(u,h,p,m){u.push(h+","+p),u.push(h==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(u){var h=[],p=nn(u["!ref"]),m,g=Array.isArray(u);i(h,"TABLE",0,1,"sheetjs"),i(h,"VECTORS",0,p.e.r-p.s.r+1,""),i(h,"TUPLES",0,p.e.c-p.s.c+1,""),i(h,"DATA",0,0,"");for(var b=p.s.r;b<=p.e.r;++b){l(h,-1,0,"BOT");for(var j=p.s.c;j<=p.e.c;++j){var v=Lr({r:b,c:j});if(m=g?(u[b]||[])[j]:u[v],!m){l(h,1,0,"");continue}switch(m.t){case"n":var y=m.w;!y&&m.v!=null&&(y=m.v),y==null?m.f&&!m.F?l(h,1,0,"="+m.f):l(h,1,0,""):l(h,0,y,"V");break;case"b":l(h,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":l(h,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=Xo(m.z||xn[14],Ka(_a(m.v)))),l(h,0,m.w,"V");break;default:l(h,1,0,"")}}}l(h,-1,0,"EOD");var A=`\r
`,E=h.join(A);return E}}();return{to_workbook:a,to_sheet:n,from_sheet:s}}(),zP=function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(m,g){for(var b=m.split(`
`),j=-1,v=-1,y=0,A=[];y!==b.length;++y){var E=b[y].trim().split(":");if(E[0]==="cell"){var O=Gn(E[1]);if(A.length<=O.r)for(j=A.length;j<=O.r;++j)A[j]||(A[j]=[]);switch(j=O.r,v=O.c,E[2]){case"t":A[j][v]=e(E[3]);break;case"v":A[j][v]=+E[3];break;case"vtf":var S=E[E.length-1];case"vtc":switch(E[3]){case"nl":A[j][v]=!!+E[4];break;default:A[j][v]=+E[4];break}E[2]=="vtf"&&(A[j][v]=[A[j][v],S])}}}return g&&g.sheetRows&&(A=A.slice(0,g.sheetRows)),A}function a(m,g){return Jd(n(m,g),g)}function s(m,g){return tc(a(m,g),g)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function h(m){if(!m||!m["!ref"])return"";for(var g=[],b=[],j,v="",y=ms(m["!ref"]),A=Array.isArray(m),E=y.s.r;E<=y.e.r;++E)for(var O=y.s.c;O<=y.e.c;++O)if(v=Lr({r:E,c:O}),j=A?(m[E]||[])[O]:m[v],!(!j||j.v==null||j.t==="z")){switch(b=["cell",v,"t"],j.t){case"s":case"str":b.push(t(j.v));break;case"n":j.f?(b[2]="vtf",b[3]="n",b[4]=j.v,b[5]=t(j.f)):(b[2]="v",b[3]=j.v);break;case"b":b[2]="vt"+(j.f?"f":"c"),b[3]="nl",b[4]=j.v?"1":"0",b[5]=t(j.f||(j.v?"TRUE":"FALSE"));break;case"d":var S=Ka(_a(j.v));b[2]="vtc",b[3]="nd",b[4]=""+S,b[5]=j.w||Xo(j.z||xn[14],S);break;case"e":continue}g.push(b.join(":"))}return g.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function p(m){return[i,l,d,l,h(m),u].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:p}}(),_oe=function(){function e(p,m,g,b,j){j.raw?m[g][b]=p:p===""||(p==="TRUE"?m[g][b]=!0:p==="FALSE"?m[g][b]=!1:isNaN(Zi(p))?isNaN(hf(p).getDate())?m[g][b]=p:m[g][b]=_a(p):m[g][b]=Zi(p))}function t(p,m){var g=m||{},b=[];if(!p||p.length===0)return b;for(var j=p.split(/[\r\n]/),v=j.length-1;v>=0&&j[v].length===0;)--v;for(var y=10,A=0,E=0;E<=v;++E)A=j[E].indexOf(" "),A==-1?A=j[E].length:A++,y=Math.max(y,A);for(E=0;E<=v;++E){b[E]=[];var O=0;for(e(j[E].slice(0,y).trim(),b,E,O,g),O=1;O<=(j[E].length-y)/10+1;++O)e(j[E].slice(y+(O-1)*10,y+O*10).trim(),b,E,O,g)}return g.sheetRows&&(b=b.slice(0,g.sheetRows)),b}var n={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(p){for(var m={},g=!1,b=0,j=0;b<p.length;++b)(j=p.charCodeAt(b))==34?g=!g:!g&&j in n&&(m[j]=(m[j]||0)+1);j=[];for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&j.push([m[b],b]);if(!j.length){m=a;for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&j.push([m[b],b])}return j.sort(function(v,y){return v[0]-y[0]||a[v[1]]-a[y[1]]}),n[j.pop()[1]]||44}function i(p,m){var g=m||{},b="",j=g.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(b=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(b=p.charAt(4),p=p.slice(6)):b=s(p.slice(0,1024)):g&&g.FS?b=g.FS:b=s(p.slice(0,1024));var y=0,A=0,E=0,O=0,S=0,C=b.charCodeAt(0),k=!1,I=0,z=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var B=g.dateNF!=null?Kse(g.dateNF):null;function M(){var F=p.slice(O,S),N={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)N.t="z";else if(g.raw)N.t="s",N.v=F;else if(F.trim().length===0)N.t="s",N.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(N.t="s",N.v=F.slice(2,-1).replace(/""/g,'"')):Ole(F)?(N.t="n",N.f=F.slice(1)):(N.t="s",N.v=F);else if(F=="TRUE")N.t="b",N.v=!0;else if(F=="FALSE")N.t="b",N.v=!1;else if(!isNaN(E=Zi(F)))N.t="n",g.cellText!==!1&&(N.w=F),N.v=E;else if(!isNaN(hf(F).getDate())||B&&F.match(B)){N.z=g.dateNF||xn[14];var L=0;B&&F.match(B)&&(F=Vse(F,g.dateNF,F.match(B)||[]),L=1),g.cellDates?(N.t="d",N.v=_a(F,L)):(N.t="n",N.v=Ka(_a(F,L))),g.cellText!==!1&&(N.w=Xo(N.z,N.v instanceof Date?Ka(N.v):N.v)),g.cellNF||delete N.z}else N.t="s",N.v=F;if(N.t=="z"||(g.dense?(j[y]||(j[y]=[]),j[y][A]=N):j[Lr({c:A,r:y})]=N),O=S+1,z=p.charCodeAt(O),v.e.c<A&&(v.e.c=A),v.e.r<y&&(v.e.r=y),I==C)++A;else if(A=0,++y,g.sheetRows&&g.sheetRows<=y)return!0}e:for(;S<p.length;++S)switch(I=p.charCodeAt(S)){case 34:z===34&&(k=!k);break;case C:case 10:case 13:if(!k&&M())break e;break}return S-O>0&&M(),j["!ref"]=En(v),j}function l(p,m){return!(m&&m.PRN)||m.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?i(p,m):Jd(t(p,m),m)}function d(p,m){var g="",b=m.type=="string"?[0,0,0,0]:qhe(p,m);switch(m.type){case"base64":g=oo(p);break;case"binary":g=p;break;case"buffer":m.codepage==65001?g=p.toString("utf8"):m.codepage&&typeof xx<"u"||(g=Er&&Buffer.isBuffer(p)?p.toString("binary"):_f(p));break;case"array":g=j0(p);break;case"string":g=p;break;default:throw new Error("Unrecognized type "+m.type)}return b[0]==239&&b[1]==187&&b[2]==191?g=yh(g.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?g=yh(g):m.type=="binary"&&typeof xx<"u",g.slice(0,19)=="socialcalc:version:"?zP.to_sheet(m.type=="string"?g:yh(g),m):l(g,m)}function u(p,m){return tc(d(p,m),m)}function h(p){for(var m=[],g=nn(p["!ref"]),b,j=Array.isArray(p),v=g.s.r;v<=g.e.r;++v){for(var y=[],A=g.s.c;A<=g.e.c;++A){var E=Lr({r:v,c:A});if(b=j?(p[v]||[])[A]:p[E],!b||b.v==null){y.push("          ");continue}for(var O=(b.w||(lo(b),b.w)||"").slice(0,10);O.length<10;)O+=" ";y.push(O+(A===0?" ":""))}m.push(y.join(""))}return m.join(`
`)}return{to_workbook:u,to_sheet:d,from_sheet:h}}(),kI=function(){function e(U,X,H){if(U){ds(U,U.l||0);for(var Q=H.Enum||q;U.l<U.length;){var le=U.read_shift(2),me=Q[le]||Q[65535],je=U.read_shift(2),ee=U.l+je,se=me.f&&me.f(U,je,H);if(U.l=ee,X(se,me,le))return}}}function t(U,X){switch(X.type){case"base64":return n(Zs(oo(U)),X);case"binary":return n(Zs(U),X);case"buffer":case"array":return n(U,X)}throw"Unsupported type "+X.type}function n(U,X){if(!U)return U;var H=X||{},Q=H.dense?[]:{},le="Sheet1",me="",je=0,ee={},se=[],fe=[],ue={s:{r:0,c:0},e:{r:0,c:0}},We=H.sheetRows||0;if(U[2]==0&&(U[3]==8||U[3]==9)&&U.length>=16&&U[14]==5&&U[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(U[2]==2)H.Enum=q,e(U,function(Be,it,re){switch(re){case 0:H.vers=Be,Be>=4096&&(H.qpro=!0);break;case 6:ue=Be;break;case 204:Be&&(me=Be);break;case 222:me=Be;break;case 15:case 51:H.qpro||(Be[1].v=Be[1].v.slice(1));case 13:case 14:case 16:re==14&&(Be[2]&112)==112&&(Be[2]&15)>1&&(Be[2]&15)<15&&(Be[1].z=H.dateNF||xn[14],H.cellDates&&(Be[1].t="d",Be[1].v=aP(Be[1].v))),H.qpro&&Be[3]>je&&(Q["!ref"]=En(ue),ee[le]=Q,se.push(le),Q=H.dense?[]:{},ue={s:{r:0,c:0},e:{r:0,c:0}},je=Be[3],le=me||"Sheet"+(je+1),me="");var ce=H.dense?(Q[Be[0].r]||[])[Be[0].c]:Q[Lr(Be[0])];if(ce){ce.t=Be[1].t,ce.v=Be[1].v,Be[1].z!=null&&(ce.z=Be[1].z),Be[1].f!=null&&(ce.f=Be[1].f);break}H.dense?(Q[Be[0].r]||(Q[Be[0].r]=[]),Q[Be[0].r][Be[0].c]=Be[1]):Q[Lr(Be[0])]=Be[1];break}},H);else if(U[2]==26||U[2]==14)H.Enum=V,U[2]==14&&(H.qpro=!0,U.l=0),e(U,function(Be,it,re){switch(re){case 204:le=Be;break;case 22:Be[1].v=Be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Be[3]>je&&(Q["!ref"]=En(ue),ee[le]=Q,se.push(le),Q=H.dense?[]:{},ue={s:{r:0,c:0},e:{r:0,c:0}},je=Be[3],le="Sheet"+(je+1)),We>0&&Be[0].r>=We)break;H.dense?(Q[Be[0].r]||(Q[Be[0].r]=[]),Q[Be[0].r][Be[0].c]=Be[1]):Q[Lr(Be[0])]=Be[1],ue.e.c<Be[0].c&&(ue.e.c=Be[0].c),ue.e.r<Be[0].r&&(ue.e.r=Be[0].r);break;case 27:Be[14e3]&&(fe[Be[14e3][0]]=Be[14e3][1]);break;case 1537:fe[Be[0]]=Be[1],Be[0]==je&&(le=Be[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+U[2]);if(Q["!ref"]=En(ue),ee[me||le]=Q,se.push(me||le),!fe.length)return{SheetNames:se,Sheets:ee};for(var we={},Me=[],Ee=0;Ee<fe.length;++Ee)ee[se[Ee]]?(Me.push(fe[Ee]||se[Ee]),we[fe[Ee]]=ee[fe[Ee]]||ee[se[Ee]]):(Me.push(fe[Ee]),we[fe[Ee]]={"!ref":"A1"});return{SheetNames:Me,Sheets:we}}function a(U,X){var H=X||{};if(+H.codepage>=0&&df(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=Ga(),le=nn(U["!ref"]),me=Array.isArray(U),je=[];jt(Q,0,i(1030)),jt(Q,6,u(le));for(var ee=Math.min(le.e.r,8191),se=le.s.r;se<=ee;++se)for(var fe=la(se),ue=le.s.c;ue<=le.e.c;++ue){se===le.s.r&&(je[ue]=ja(ue));var We=je[ue]+fe,we=me?(U[se]||[])[ue]:U[We];if(!(!we||we.t=="z"))if(we.t=="n")(we.v|0)==we.v&&we.v>=-32768&&we.v<=32767?jt(Q,13,b(se,ue,we.v)):jt(Q,14,v(se,ue,we.v));else{var Me=lo(we);jt(Q,15,m(se,ue,Me.slice(0,239)))}}return jt(Q,1),Q.end()}function s(U,X){var H=X||{};if(+H.codepage>=0&&df(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=Ga();jt(Q,0,l(U));for(var le=0,me=0;le<U.SheetNames.length;++le)(U.Sheets[U.SheetNames[le]]||{})["!ref"]&&jt(Q,27,oe(U.SheetNames[le],me++));var je=0;for(le=0;le<U.SheetNames.length;++le){var ee=U.Sheets[U.SheetNames[le]];if(!(!ee||!ee["!ref"])){for(var se=nn(ee["!ref"]),fe=Array.isArray(ee),ue=[],We=Math.min(se.e.r,8191),we=se.s.r;we<=We;++we)for(var Me=la(we),Ee=se.s.c;Ee<=se.e.c;++Ee){we===se.s.r&&(ue[Ee]=ja(Ee));var Be=ue[Ee]+Me,it=fe?(ee[we]||[])[Ee]:ee[Be];if(!(!it||it.t=="z"))if(it.t=="n")jt(Q,23,M(we,Ee,je,it.v));else{var re=lo(it);jt(Q,22,I(we,Ee,je,re.slice(0,239)))}}++je}}return jt(Q,1),Q.end()}function i(U){var X=nt(2);return X.write_shift(2,U),X}function l(U){var X=nt(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var H=0,Q=0,le=0,me=0;me<U.SheetNames.length;++me){var je=U.SheetNames[me],ee=U.Sheets[je];if(!(!ee||!ee["!ref"])){++le;var se=ms(ee["!ref"]);H<se.e.r&&(H=se.e.r),Q<se.e.c&&(Q=se.e.c)}}return H>8191&&(H=8191),X.write_shift(2,H),X.write_shift(1,le),X.write_shift(1,Q),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function d(U,X,H){var Q={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&H.qpro?(Q.s.c=U.read_shift(1),U.l++,Q.s.r=U.read_shift(2),Q.e.c=U.read_shift(1),U.l++,Q.e.r=U.read_shift(2),Q):(Q.s.c=U.read_shift(2),Q.s.r=U.read_shift(2),X==12&&H.qpro&&(U.l+=2),Q.e.c=U.read_shift(2),Q.e.r=U.read_shift(2),X==12&&H.qpro&&(U.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function u(U){var X=nt(8);return X.write_shift(2,U.s.c),X.write_shift(2,U.s.r),X.write_shift(2,U.e.c),X.write_shift(2,U.e.r),X}function h(U,X,H){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(Q[0].c=U.read_shift(1),Q[3]=U.read_shift(1),Q[0].r=U.read_shift(2),U.l+=2):(Q[2]=U.read_shift(1),Q[0].c=U.read_shift(2),Q[0].r=U.read_shift(2)),Q}function p(U,X,H){var Q=U.l+X,le=h(U,X,H);if(le[1].t="s",H.vers==20768){U.l++;var me=U.read_shift(1);return le[1].v=U.read_shift(me,"utf8"),le}return H.qpro&&U.l++,le[1].v=U.read_shift(Q-U.l,"cstr"),le}function m(U,X,H){var Q=nt(7+H.length);Q.write_shift(1,255),Q.write_shift(2,X),Q.write_shift(2,U),Q.write_shift(1,39);for(var le=0;le<Q.length;++le){var me=H.charCodeAt(le);Q.write_shift(1,me>=128?95:me)}return Q.write_shift(1,0),Q}function g(U,X,H){var Q=h(U,X,H);return Q[1].v=U.read_shift(2,"i"),Q}function b(U,X,H){var Q=nt(7);return Q.write_shift(1,255),Q.write_shift(2,X),Q.write_shift(2,U),Q.write_shift(2,H,"i"),Q}function j(U,X,H){var Q=h(U,X,H);return Q[1].v=U.read_shift(8,"f"),Q}function v(U,X,H){var Q=nt(13);return Q.write_shift(1,255),Q.write_shift(2,X),Q.write_shift(2,U),Q.write_shift(8,H,"f"),Q}function y(U,X,H){var Q=U.l+X,le=h(U,X,H);if(le[1].v=U.read_shift(8,"f"),H.qpro)U.l=Q;else{var me=U.read_shift(2);S(U.slice(U.l,U.l+me),le),U.l+=me}return le}function A(U,X,H){var Q=X&32768;return X&=-32769,X=(Q?U:0)+(X>=8192?X-16384:X),(Q?"":"$")+(H?ja(X):la(X))}var E={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(U,X){ds(U,0);for(var H=[],Q=0,le="",me="",je="",ee="";U.l<U.length;){var se=U[U.l++];switch(se){case 0:H.push(U.read_shift(8,"f"));break;case 1:me=A(X[0].c,U.read_shift(2),!0),le=A(X[0].r,U.read_shift(2),!1),H.push(me+le);break;case 2:{var fe=A(X[0].c,U.read_shift(2),!0),ue=A(X[0].r,U.read_shift(2),!1);me=A(X[0].c,U.read_shift(2),!0),le=A(X[0].r,U.read_shift(2),!1),H.push(fe+ue+":"+me+le)}break;case 3:if(U.l<U.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(U.read_shift(2));break;case 6:{for(var We="";se=U[U.l++];)We+=String.fromCharCode(se);H.push('"'+We.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:ee=H.pop(),je=H.pop(),H.push(["AND","OR"][se-20]+"("+je+","+ee+")");break;default:if(se<32&&O[se])ee=H.pop(),je=H.pop(),H.push(je+O[se]+ee);else if(E[se]){if(Q=E[se][1],Q==69&&(Q=U[U.l++]),Q>H.length){console.error("WK1 bad formula parse 0x"+se.toString(16)+":|"+H.join("|")+"|");return}var we=H.slice(-Q);H.length-=Q,H.push(E[se][0]+"("+we.join(",")+")")}else return se<=7?console.error("WK1 invalid opcode "+se.toString(16)):se<=24?console.error("WK1 unsupported op "+se.toString(16)):se<=30?console.error("WK1 invalid opcode "+se.toString(16)):se<=115?console.error("WK1 unsupported function opcode "+se.toString(16)):console.error("WK1 unrecognized opcode "+se.toString(16))}}H.length==1?X[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function C(U){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=U.read_shift(2),X[3]=U[U.l++],X[0].c=U[U.l++],X}function k(U,X){var H=C(U);return H[1].t="s",H[1].v=U.read_shift(X-4,"cstr"),H}function I(U,X,H,Q){var le=nt(6+Q.length);le.write_shift(2,U),le.write_shift(1,H),le.write_shift(1,X),le.write_shift(1,39);for(var me=0;me<Q.length;++me){var je=Q.charCodeAt(me);le.write_shift(1,je>=128?95:je)}return le.write_shift(1,0),le}function z(U,X){var H=C(U);H[1].v=U.read_shift(2);var Q=H[1].v>>1;if(H[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return H[1].v=Q,H}function B(U,X){var H=C(U),Q=U.read_shift(4),le=U.read_shift(4),me=U.read_shift(2);if(me==65535)return Q===0&&le===3221225472?(H[1].t="e",H[1].v=15):Q===0&&le===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var je=me&32768;return me=(me&32767)-16446,H[1].v=(1-je*2)*(le*Math.pow(2,me+32)+Q*Math.pow(2,me)),H}function M(U,X,H,Q){var le=nt(14);if(le.write_shift(2,U),le.write_shift(1,H),le.write_shift(1,X),Q==0)return le.write_shift(4,0),le.write_shift(4,0),le.write_shift(2,65535),le;var me=0,je=0,ee=0,se=0;return Q<0&&(me=1,Q=-Q),je=Math.log2(Q)|0,Q/=Math.pow(2,je-31),se=Q>>>0,(se&2147483648)==0&&(Q/=2,++je,se=Q>>>0),Q-=se,se|=2147483648,se>>>=0,Q*=Math.pow(2,32),ee=Q>>>0,le.write_shift(4,ee),le.write_shift(4,se),je+=16383+(me?32768:0),le.write_shift(2,je),le}function F(U,X){var H=B(U);return U.l+=X-14,H}function N(U,X){var H=C(U),Q=U.read_shift(4);return H[1].v=Q>>6,H}function L(U,X){var H=C(U),Q=U.read_shift(8,"f");return H[1].v=Q,H}function P(U,X){var H=L(U);return U.l+=X-10,H}function _(U,X){return U[U.l+X-1]==0?U.read_shift(X,"cstr"):""}function R(U,X){var H=U[U.l++];H>X-1&&(H=X-1);for(var Q="";Q.length<H;)Q+=String.fromCharCode(U[U.l++]);return Q}function W(U,X,H){if(!(!H.qpro||X<21)){var Q=U.read_shift(1);U.l+=17,U.l+=1,U.l+=2;var le=U.read_shift(X-21,"cstr");return[Q,le]}}function G(U,X){for(var H={},Q=U.l+X;U.l<Q;){var le=U.read_shift(2);if(le==14e3){for(H[le]=[0,""],H[le][0]=U.read_shift(2);U[U.l];)H[le][1]+=String.fromCharCode(U[U.l]),U.l++;U.l++}}return H}function oe(U,X){var H=nt(5+U.length);H.write_shift(2,14e3),H.write_shift(2,X);for(var Q=0;Q<U.length;++Q){var le=U.charCodeAt(Q);H[H.l++]=le>127?95:le}return H[H.l++]=0,H}var q={0:{n:"BOF",f:MP},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:j},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:_},222:{n:"SHEETNAMELP",f:R},65535:{n:""}},V={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:k},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:z},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:N},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:P},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:_},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:W},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}}(),Ioe=/^\s|\s$|[\t\n\r]/;function UP(e,t){if(!t.bookSST)return"";var n=[_n];n[n.length]=vt("sst",null,{xmlns:Qd[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Ioe)&&(i+=' xml:space="preserve"'),i+=">"+Fr(s.t)+"</t>"),i+="</si>",n[n.length]=i}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Doe(e){return[e.read_shift(4),e.read_shift(4)]}function Roe(e,t){return t||(t=nt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Poe=Tie;function Moe(e){var t=Ga();ut(t,159,Roe(e));for(var n=0;n<e.length;++n)ut(t,19,Poe(e[n]));return ut(t,160),t.end()}function Boe(e){for(var t=[],n=e.split(""),a=0;a<n.length;++a)t[a]=n[a].charCodeAt(0);return t}function qP(e){var t=0,n,a=Boe(e),s=a.length+1,i,l,d,u,h;for(n=Kl(s),n[0]=a.length,i=1;i!=s;++i)n[i]=a[i-1];for(i=s-1;i>=0;--i)l=n[i],d=(t&16384)===0?0:1,u=t<<1&32767,h=d|u,t=h^l;return t^52811}var Foe=function(){function e(s,i){switch(i.type){case"base64":return t(oo(s),i);case"binary":return t(s,i);case"buffer":return t(Er&&Buffer.isBuffer(s)?s.toString("binary"):_f(s),i);case"array":return t(j0(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var l=i||{},d=l.dense?[]:{},u=s.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(p,m){Array.isArray(d)&&(d[m]=[]);for(var g=/\\\w+\b/g,b=0,j,v=-1;j=g.exec(p);){switch(j[0]){case"\\cell":var y=p.slice(b,g.lastIndex-j[0].length);if(y[0]==" "&&(y=y.slice(1)),++v,y.length){var A={v:y,t:"s"};Array.isArray(d)?d[m][v]=A:d[Lr({r:m,c:v})]=A}break}b=g.lastIndex}v>h.e.c&&(h.e.c=v)}),d["!ref"]=En(h),d}function n(s,i){return tc(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],l=nn(s["!ref"]),d,u=Array.isArray(s),h=l.s.r;h<=l.e.r;++h){i.push("\\trowd\\trautofit1");for(var p=l.s.c;p<=l.e.c;++p)i.push("\\cellx"+(p+1));for(i.push("\\pard\\intbl"),p=l.s.c;p<=l.e.c;++p){var m=Lr({r:h,c:p});d=u?(s[h]||[])[p]:s[m],!(!d||d.v==null&&(!d.f||d.F))&&(i.push(" "+(d.w||(lo(d),d.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:n,to_sheet:e,from_sheet:a}}();function _I(e){for(var t=0,n=1;t!=3;++t)n=n*256+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var Loe=6,eo=Loe;function Tx(e){return Math.floor((e+Math.round(128/eo)/256)*eo)}function Cx(e){return Math.floor((e-5)/eo*100+.5)/100}function vw(e){return Math.round((e*eo+5)/eo*256)/256}function eN(e){e.width?(e.wpx=Tx(e.width),e.wch=Cx(e.wpx),e.MDW=eo):e.wpx?(e.wch=Cx(e.wpx),e.width=vw(e.wch),e.MDW=eo):typeof e.wch=="number"&&(e.width=vw(e.wch),e.wpx=Tx(e.width),e.MDW=eo),e.customWidth&&delete e.customWidth}var $oe=96,WP=$oe;function Ax(e){return e*96/WP}function HP(e){return e*WP/96}function zoe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&(t[t.length]=vt("numFmt",null,{numFmtId:a,formatCode:Fr(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=vt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function Uoe(e){var t=[];return t[t.length]=vt("cellXfs",null),e.forEach(function(n){t[t.length]=vt("xf",null,n)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=vt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function GP(e,t){var n=[_n,vt("styleSheet",null,{xmlns:Qd[0],"xmlns:vt":Hn.vt})],a;return e.SSF&&(a=zoe(e.SSF))!=null&&(n[n.length]=a),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=Uoe(t.cellXfs))&&(n[n.length]=a),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function qoe(e,t){var n=e.read_shift(2),a=wa(e);return[n,a]}function Woe(e,t,n){n||(n=nt(6+4*t.length)),n.write_shift(2,e),Kn(t,n);var a=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),a}function Hoe(e,t,n){var a={};a.sz=e.read_shift(2)/20;var s=Iie(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(a.underline=l);var d=e.read_shift(1);d>0&&(a.family=d);var u=e.read_shift(1);switch(u>0&&(a.charset=u),e.l++,a.color=_ie(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=wa(e),a}function Goe(e,t){t||(t=nt(25+4*32)),t.write_shift(2,e.sz*20),Die(e,t),t.write_shift(2,e.bold?700:400);var n=0;e.vertAlign=="superscript"?n=1:e.vertAlign=="subscript"&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Sx(e.color,t);var a=0;return a=2,t.write_shift(1,a),Kn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Koe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Dj,Voe=Ni;function II(e,t){t||(t=nt(4*3+8*7+16*1)),Dj||(Dj=US(Koe));var n=Dj[e.patternType];n==null&&(n=40),t.write_shift(4,n);var a=0;if(n!=40)for(Sx({auto:1},t),Sx({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Yoe(e,t){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=n,{ixfe:a,numFmtId:s}}function KP(e,t,n){n||(n=nt(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var a=0;return n.write_shift(1,a),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function oh(e,t){return t||(t=nt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Xoe=Ni;function Qoe(e,t){return t||(t=nt(51)),t.write_shift(1,0),oh(null,t),oh(null,t),oh(null,t),oh(null,t),oh(null,t),t.length>t.l?t.slice(0,t.l):t}function Joe(e,t){return t||(t=nt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),wx(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Zoe(e,t,n){var a=nt(2052);return a.write_shift(4,e),wx(t,a),wx(n,a),a.length>a.l?a.slice(0,a.l):a}function ele(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++n}),n!=0&&(ut(e,615,si(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&ut(e,44,Woe(s,t[s]))}),ut(e,616))}}function tle(e){var t=1;ut(e,611,si(t)),ut(e,43,Goe({sz:12,color:{theme:1},name:"Calibri",family:2})),ut(e,612)}function rle(e){var t=2;ut(e,603,si(t)),ut(e,45,II({patternType:"none"})),ut(e,45,II({patternType:"gray125"})),ut(e,604)}function nle(e){var t=1;ut(e,613,si(t)),ut(e,46,Qoe()),ut(e,614)}function ale(e){var t=1;ut(e,626,si(t)),ut(e,47,KP({numFmtId:0},65535)),ut(e,627)}function sle(e,t){ut(e,617,si(t.length)),t.forEach(function(n){ut(e,47,KP(n,0))}),ut(e,618)}function ile(e){var t=1;ut(e,619,si(t)),ut(e,48,Joe({xfId:0,name:"Normal"})),ut(e,620)}function ole(e){var t=0;ut(e,505,si(t)),ut(e,506)}function lle(e){var t=0;ut(e,508,Zoe(t,"TableStyleMedium9","PivotStyleMedium4")),ut(e,509)}function cle(e,t){var n=Ga();return ut(n,278),ele(n,e.SSF),tle(n),rle(n),nle(n),ale(n),sle(n,t.cellXfs),ile(n),ole(n),lle(n),ut(n,279),n.end()}function VP(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var n=[_n];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function dle(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:wa(e)}}function ule(e){var t=nt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Kn(e.name,t),t.slice(0,t.l)}function hle(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function fle(e){var t=nt(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}function ple(e,t){var n=nt(8+2*t.length);return n.write_shift(4,e),Kn(t,n),n.slice(0,n.l)}function mle(e){return e.l+=4,e.read_shift(4)!=0}function xle(e,t){var n=nt(8);return n.write_shift(4,e),n.write_shift(4,1),n}function gle(){var e=Ga();return ut(e,332),ut(e,334,si(1)),ut(e,335,ule({name:"XLDAPR",version:12e4,flags:3496657072})),ut(e,336),ut(e,339,ple(1,"XLDAPR")),ut(e,52),ut(e,35,si(514)),ut(e,4096,si(0)),ut(e,4097,ks(1)),ut(e,36),ut(e,53),ut(e,340),ut(e,337,xle(1)),ut(e,51,fle([[1,0]])),ut(e,338),ut(e,333),e.end()}function YP(){var e=[_n];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function yle(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=Lr(n);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}var Qc=1024;function XP(e,t){for(var n=[21600,21600],a=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[vt("xml",null,{"xmlns:v":us.v,"xmlns:o":us.o,"xmlns:x":us.x,"xmlns:mv":us.mv}).replace(/\/>/,">"),vt("o:shapelayout",vt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),vt("v:shapetype",[vt("v:stroke",null,{joinstyle:"miter"}),vt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:a})];Qc<e*1e3;)Qc+=1e3;return t.forEach(function(i){var l=Gn(i[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var u=d.type=="gradient"?vt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=vt("v:fill",u,d),p={on:"t",obscured:"t"};++Qc,s=s.concat(["<v:shape"+pf({id:"_x0000_s"+Qc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,vt("v:shadow",null,p),vt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ia("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),ia("x:AutoFill","False"),ia("x:Row",String(l.r)),ia("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function QP(e){var t=[_n,vt("comments",null,{xmlns:Qd[0]})],n=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=Fr(s.a);n.indexOf(i)==-1&&(n.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&n.indexOf("tc="+s.ID)==-1&&(n.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=n.indexOf("tc="+a[1][0].ID):a[1].forEach(function(u){u.a&&(s=n.indexOf(Fr(u.a))),i.push(u.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(ia("t",Fr(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,d=1;d<i.length;++d)l+=`Reply:
    `+i[d]+`
`;t.push(ia("t",Fr(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function ble(e,t,n){var a=[_n,vt("ThreadedComments",null,{xmlns:Hn.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(l,d){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var u={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};d==0?i=u.id:u.parentId=i,l.ID=u.id,l.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),a.push(vt("threadedComment",ia("text",l.t||""),u))})}),a.push("</ThreadedComments>"),a.join("")}function vle(e){var t=[_n,vt("personList",null,{xmlns:Hn.TCMNT,"xmlns:x":Qd[0]}).replace(/[\/]>/,">")];return e.forEach(function(n,a){t.push(vt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:n,providerId:"None"}))}),t.push("</personList>"),t.join("")}function jle(e){var t={};t.iauthor=e.read_shift(4);var n=sc(e);return t.rfx=n.s,t.ref=Lr(n.s),e.l+=16,t}function wle(e,t){return t==null&&(t=nt(36)),t.write_shift(4,e[1].iauthor),Zd(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Sle=wa;function Nle(e){return Kn(e.slice(0,54))}function Tle(e){var t=Ga(),n=[];return ut(t,628),ut(t,630),e.forEach(function(a){a[1].forEach(function(s){n.indexOf(s.a)>-1||(n.push(s.a.slice(0,54)),ut(t,632,Nle(s.a)))})}),ut(t,631),ut(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=n.indexOf(s.a);var i={s:Gn(a[0]),e:Gn(a[0])};ut(t,635,wle([i,s])),s.t&&s.t.length>0&&ut(t,637,Aie(s)),ut(t,636),delete s.iauthor})}),ut(t,634),ut(t,629),t.end()}function Cle(e,t){t.FullPaths.forEach(function(n,a){if(a!=0){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Vr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var JP=["xlsb","xlsm","xlam","biff8","xla"],Ale=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(a,s,i,l){var d=!1,u=!1;i.length==0?u=!0:i.charAt(0)=="["&&(u=!0,i=i.slice(1,-1)),l.length==0?d=!0:l.charAt(0)=="["&&(d=!0,l=l.slice(1,-1));var h=i.length>0?parseInt(i,10)|0:0,p=l.length>0?parseInt(l,10)|0:0;return d?p+=t.c:--p,u?h+=t.r:--h,s+(d?"":"$")+ja(p)+(u?"":"$")+la(h)}return function(s,i){return t=i,s.replace(e,n)}}(),tN=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,rN=function(){return function(t,n){return t.replace(tN,function(a,s,i,l,d,u){var h=YS(l)-(i?0:n.c),p=VS(u)-(d?0:n.r),m=p==0?"":d?p+1:"["+p+"]",g=h==0?"":i?h+1:"["+h+"]";return s+"R"+m+"C"+g})}}();function Ele(e,t){return e.replace(tN,function(n,a,s,i,l,d){return a+(s=="$"?s+i:ja(YS(i)+t.c))+(l=="$"?l+d:la(VS(d)+t.r))})}function Ole(e){return e.length!=1}function Tn(e){e.l+=1}function Qo(e,t){var n=e.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function ZP(e,t,n){var a=2;if(n){if(n.biff>=2&&n.biff<=5)return e9(e);n.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),l=Qo(e),d=Qo(e);return{s:{r:s,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:d[0],cRel:d[1],rRel:d[2]}}}function e9(e){var t=Qo(e),n=Qo(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function kle(e,t,n){if(n.biff<8)return e9(e);var a=e.read_shift(n.biff==12?4:2),s=e.read_shift(n.biff==12?4:2),i=Qo(e),l=Qo(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function t9(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return _le(e);var a=e.read_shift(n&&n.biff==12?4:2),s=Qo(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function _le(e){var t=Qo(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}function Ile(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Dle(e,t,n){var a=n&&n.biff?n.biff:8;if(a>=2&&a<=5)return Rle(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,d=(i&32768)>>15;if(i&=16383,d==1)for(;s>524287;)s-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:l,rRel:d}}function Rle(e){var t=e.read_shift(2),n=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&n>=128&&(n=n-256),{r:t,c:n,cRel:s,rRel:a}}function Ple(e,t,n){var a=(e[e.l++]&96)>>5,s=ZP(e,n.biff>=2&&n.biff<=5?6:8,n);return[a,s]}function Mle(e,t,n){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(n)switch(n.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=ZP(e,i,n);return[a,s,l]}function Ble(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[a]}function Fle(e,t,n){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(n)switch(n.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function Lle(e,t,n){var a=(e[e.l++]&96)>>5,s=kle(e,t-1,n);return[a,s]}function $le(e,t,n){var a=(e[e.l++]&96)>>5;return e.l+=n.biff==2?6:n.biff==12?14:7,[a]}function DI(e){var t=e[e.l+1]&1,n=1;return e.l+=4,[t,n]}function zle(e,t,n){e.l+=2;for(var a=e.read_shift(n&&n.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(n&&n.biff==2?1:2));return s}function Ule(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function qle(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(n&&n.biff==2?1:2)]}function Wle(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Hle(e,t,n){var a=e[e.l+1]&255?1:0;return e.l+=n&&n.biff==2?3:4,[a]}function r9(e){var t=e.read_shift(1),n=e.read_shift(1);return[t,n]}function Gle(e){return e.read_shift(2),r9(e)}function Kle(e){return e.read_shift(2),r9(e)}function Vle(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var s=t9(e,0,n);return[a,s]}function Yle(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var s=Dle(e,0,n);return[a,s]}function Xle(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);n&&n.biff==5&&(e.l+=12);var i=t9(e,0,n);return[a,s,i]}function Qle(e,t,n){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(n&&n.biff<=3?1:2);return[Qce[s],s9[s],a]}function Jle(e,t,n){var a=e[e.l++],s=e.read_shift(1),i=n&&n.biff<=3?[a==88?-1:0,e.read_shift(1)]:Zle(e);return[s,(i[0]===0?s9:Xce)[i[1]]]}function Zle(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function ece(e,t,n){e.l+=n&&n.biff==2?3:4}function tce(e,t,n){if(e.l++,n&&n.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(n&&n.biff==2?1:2);return[a,s]}function rce(e){return e.l++,Rf[e.read_shift(1)]}function nce(e){return e.l++,e.read_shift(2)}function ace(e){return e.l++,e.read_shift(1)!==0}function sce(e){return e.l++,eu(e)}function ice(e,t,n){return e.l++,FP(e,t-1,n)}function oce(e,t){var n=[e.read_shift(1)];if(t==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Xie(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:n[1]=Rf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:n[1]=eu(e);break;case 2:n[1]=eoe(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function lce(e,t,n){for(var a=e.read_shift(n.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((n.biff==12?sc:noe)(e));return s}function cce(e,t,n){var a=0,s=0;n.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--a,--s==0&&(s=256));for(var i=0,l=[];i!=a&&(l[i]=[]);++i)for(var d=0;d!=s;++d)l[i][d]=oce(e,n.biff);return l}function dce(e,t,n){var a=e.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,i=e.read_shift(s);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function uce(e,t,n){if(n.biff==5)return hce(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function hce(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,n,a]}function fce(e,t,n){var a=e.read_shift(1)>>>5&3;e.l+=n&&n.biff==2?3:4;var s=e.read_shift(n&&n.biff==2?1:2);return[a,s]}function pce(e,t,n){var a=e.read_shift(1)>>>5&3,s=e.read_shift(n&&n.biff==2?1:2);return[a,s]}function mce(e,t,n){var a=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,n.biff==12&&(e.l+=2),[a]}function xce(e,t,n){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(n)switch(n.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var gce=Ni,yce=Ni,bce=Ni;function Pf(e,t,n){return e.l+=2,[Ile(e)]}function nN(e){return e.l+=6,[]}var vce=Pf,jce=nN,wce=nN,Sce=Pf;function n9(e){return e.l+=2,[MP(e),e.read_shift(2)&1]}var Nce=Pf,Tce=n9,Cce=nN,Ace=Pf,Ece=Pf,Oce=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function kce(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),l=Oce[n>>2&31];return{ixti:t,coltype:n&3,rt:l,idx:a,c:s,C:i}}function _ce(e){return e.l+=2,[e.read_shift(4)]}function Ice(e,t,n){return e.l+=5,e.l+=2,e.l+=n.biff==2?1:4,["PTGSHEET"]}function Dce(e,t,n){return e.l+=n.biff==2?4:5,["PTGENDSHEET"]}function Rce(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function Pce(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function Mce(e){return e.l+=4,[0,0]}var RI={1:{n:"PtgExp",f:tce},2:{n:"PtgTbl",f:bce},3:{n:"PtgAdd",f:Tn},4:{n:"PtgSub",f:Tn},5:{n:"PtgMul",f:Tn},6:{n:"PtgDiv",f:Tn},7:{n:"PtgPower",f:Tn},8:{n:"PtgConcat",f:Tn},9:{n:"PtgLt",f:Tn},10:{n:"PtgLe",f:Tn},11:{n:"PtgEq",f:Tn},12:{n:"PtgGe",f:Tn},13:{n:"PtgGt",f:Tn},14:{n:"PtgNe",f:Tn},15:{n:"PtgIsect",f:Tn},16:{n:"PtgUnion",f:Tn},17:{n:"PtgRange",f:Tn},18:{n:"PtgUplus",f:Tn},19:{n:"PtgUminus",f:Tn},20:{n:"PtgPercent",f:Tn},21:{n:"PtgParen",f:Tn},22:{n:"PtgMissArg",f:Tn},23:{n:"PtgStr",f:ice},26:{n:"PtgSheet",f:Ice},27:{n:"PtgEndSheet",f:Dce},28:{n:"PtgErr",f:rce},29:{n:"PtgBool",f:ace},30:{n:"PtgInt",f:nce},31:{n:"PtgNum",f:sce},32:{n:"PtgArray",f:$le},33:{n:"PtgFunc",f:Qle},34:{n:"PtgFuncVar",f:Jle},35:{n:"PtgName",f:dce},36:{n:"PtgRef",f:Vle},37:{n:"PtgArea",f:Ple},38:{n:"PtgMemArea",f:fce},39:{n:"PtgMemErr",f:gce},40:{n:"PtgMemNoMem",f:yce},41:{n:"PtgMemFunc",f:pce},42:{n:"PtgRefErr",f:mce},43:{n:"PtgAreaErr",f:Ble},44:{n:"PtgRefN",f:Yle},45:{n:"PtgAreaN",f:Lle},46:{n:"PtgMemAreaN",f:Rce},47:{n:"PtgMemNoMemN",f:Pce},57:{n:"PtgNameX",f:uce},58:{n:"PtgRef3d",f:Xle},59:{n:"PtgArea3d",f:Mle},60:{n:"PtgRefErr3d",f:xce},61:{n:"PtgAreaErr3d",f:Fle},255:{}},Bce={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Fce={1:{n:"PtgElfLel",f:n9},2:{n:"PtgElfRw",f:Ace},3:{n:"PtgElfCol",f:vce},6:{n:"PtgElfRwV",f:Ece},7:{n:"PtgElfColV",f:Sce},10:{n:"PtgElfRadical",f:Nce},11:{n:"PtgElfRadicalS",f:Cce},13:{n:"PtgElfColS",f:jce},15:{n:"PtgElfColSV",f:wce},16:{n:"PtgElfRadicalLel",f:Tce},25:{n:"PtgList",f:kce},29:{n:"PtgSxName",f:_ce},255:{}},Lce={0:{n:"PtgAttrNoop",f:Mce},1:{n:"PtgAttrSemi",f:Hle},2:{n:"PtgAttrIf",f:qle},4:{n:"PtgAttrChoose",f:zle},8:{n:"PtgAttrGoto",f:Ule},16:{n:"PtgAttrSum",f:ece},32:{n:"PtgAttrBaxcel",f:DI},33:{n:"PtgAttrBaxcel",f:DI},64:{n:"PtgAttrSpace",f:Gle},65:{n:"PtgAttrSpaceSemi",f:Kle},128:{n:"PtgAttrIfError",f:Wle},255:{}};function $ce(e,t,n,a){if(a.biff<8)return Ni(e,t);for(var s=e.l+t,i=[],l=0;l!==n.length;++l)switch(n[l][0]){case"PtgArray":n[l][1]=cce(e,0,a),i.push(n[l][1]);break;case"PtgMemArea":n[l][2]=lce(e,n[l][1],a),i.push(n[l][2]);break;case"PtgExp":a&&a.biff==12&&(n[l][1][1]=e.read_shift(4),i.push(n[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[l][0]}return t=s-e.l,t!==0&&i.push(Ni(e,t)),i}function zce(e,t,n){for(var a=e.l+t,s,i,l=[];a!=e.l;)t=a-e.l,i=e[e.l],s=RI[i]||RI[Bce[i]],(i===24||i===25)&&(s=(i===24?Fce:Lce)[e[e.l+1]]),!s||!s.f?Ni(e,t):l.push([s.n,s.f(e,t,n)]);return l}function Uce(e){for(var t=[],n=0;n<e.length;++n){for(var a=e[n],s=[],i=0;i<a.length;++i){var l=a[i];if(l)switch(l[0]){case 2:s.push('"'+l[1].replace(/"/g,'""')+'"');break;default:s.push(l[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var qce={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Wce(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function a9(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(n.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return n.SID!=null?e.SheetNames[n.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function PI(e,t,n){var a=a9(e,t,n);return a=="#REF"?a:Wce(a,n)}function Rd(e,t,n,a,s){var i=s&&s.biff||8,l={s:{c:0,r:0}},d=[],u,h,p,m=0,g=0,b,j="";if(!e[0]||!e[0][0])return"";for(var v=-1,y="",A=0,E=e[0].length;A<E;++A){var O=e[0][A];switch(O[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=d.pop(),h=d.pop(),v>=0){switch(e[0][v][1][0]){case 0:y=mn(" ",e[0][v][1][1]);break;case 1:y=mn("\r",e[0][v][1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}h=h+y,v=-1}d.push(h+qce[O[0]]+u);break;case"PtgIsect":u=d.pop(),h=d.pop(),d.push(h+" "+u);break;case"PtgUnion":u=d.pop(),h=d.pop(),d.push(h+","+u);break;case"PtgRange":u=d.pop(),h=d.pop(),d.push(h+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=vh(O[1][1],l,s),d.push(jh(p,i));break;case"PtgRefN":p=n?vh(O[1][1],n,s):O[1][1],d.push(jh(p,i));break;case"PtgRef3d":m=O[1][1],p=vh(O[1][2],l,s),j=PI(a,m,s),d.push(j+"!"+jh(p,i));break;case"PtgFunc":case"PtgFuncVar":var S=O[1][0],C=O[1][1];S||(S=0),S&=127;var k=S==0?[]:d.slice(-S);d.length-=S,C==="User"&&(C=k.shift()),d.push(C+"("+k.join(",")+")");break;case"PtgBool":d.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(O[1]);break;case"PtgNum":d.push(String(O[1]));break;case"PtgStr":d.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(O[1]);break;case"PtgAreaN":b=bI(O[1][1],n?{s:n}:l,s),d.push(_j(b,s));break;case"PtgArea":b=bI(O[1][1],l,s),d.push(_j(b,s));break;case"PtgArea3d":m=O[1][1],b=O[1][2],j=PI(a,m,s),d.push(j+"!"+_j(b,s));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=O[1][2];var I=(a.names||[])[g-1]||(a[0]||[])[g],z=I?I.Name:"SH33TJSNAME"+String(g);z&&z.slice(0,6)=="_xlfn."&&!s.xlfn&&(z=z.slice(6)),d.push(z);break;case"PtgNameX":var B=O[1][1];g=O[1][2];var M;if(s.biff<=5)B<0&&(B=-B),a[B]&&(M=a[B][g]);else{var F="";if(((a[B]||[])[0]||[])[0]==14849||(((a[B]||[])[0]||[])[0]==1025?a[B][g]&&a[B][g].itab>0&&(F=a.SheetNames[a[B][g].itab-1]+"!"):F=a.SheetNames[g-1]+"!"),a[B]&&a[B][g])F+=a[B][g].Name;else if(a[0]&&a[0][g])F+=a[0][g].Name;else{var N=(a9(a,B,s)||"").split(";;");N[g-1]?F=N[g-1]:F+="SH33TJSERRX"}d.push(F);break}M||(M={Name:"SH33TJSERRY"}),d.push(M.Name);break;case"PtgParen":var L="(",P=")";if(v>=0){switch(y="",e[0][v][1][0]){case 2:L=mn(" ",e[0][v][1][1])+L;break;case 3:L=mn("\r",e[0][v][1][1])+L;break;case 4:P=mn(" ",e[0][v][1][1])+P;break;case 5:P=mn("\r",e[0][v][1][1])+P;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}d.push(L+d.pop()+P);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":p={c:O[1][1],r:O[1][0]};var _={c:n.c,r:n.r};if(a.sharedf[Lr(p)]){var R=a.sharedf[Lr(p)];d.push(Rd(R,l,_,a,s))}else{var W=!1;for(u=0;u!=a.arrayf.length;++u)if(h=a.arrayf[u],!(p.c<h[0].s.c||p.c>h[0].e.c)&&!(p.r<h[0].s.r||p.r>h[0].e.r)){d.push(Rd(h[1],l,_,a,s)),W=!0;break}W||d.push(O[1])}break;case"PtgArray":d.push("{"+Uce(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=A;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&G.indexOf(e[0][A][0])==-1){O=e[0][v];var oe=!0;switch(O[1][0]){case 4:oe=!1;case 0:y=mn(" ",O[1][1]);break;case 5:oe=!1;case 1:y=mn("\r",O[1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}d.push((oe?y:"")+d.pop()+(oe?"":y)),v=-1}}if(d.length>1&&s.WTF)throw new Error("bad formula stack");return d[0]}function Hce(e){if(e==null){var t=nt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Vl(e);return Vl(0)}function Gce(e,t,n,a,s){var i=Yl(t,n,s),l=Hce(e.v),d=nt(6),u=33;d.write_shift(2,u),d.write_shift(4,0);for(var h=nt(e.bf.length),p=0;p<e.bf.length;++p)h[p]=e.bf[p];var m=sa([i,l,d,h]);return m}function w0(e,t,n){var a=e.read_shift(4),s=zce(e,a,n),i=e.read_shift(4),l=i>0?$ce(e,i,s,n):null;return[s,l]}var Kce=w0,S0=w0,Vce=w0,Yce=w0,Xce={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},s9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Qce={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Jce(e){var t="of:="+e.replace(tN,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Zce(e){return e.replace(/\./,"!")}var wh=typeof Map<"u";function aN(e,t,n){var a=0,s=e.length;if(n){if(wh?n.has(t):Object.prototype.hasOwnProperty.call(n,t)){for(var i=wh?n.get(t):n[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,n&&(wh?(n.has(t)||n.set(t,[]),n.get(t).push(s)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(s))),s}function N0(e,t){var n={min:e+1,max:e+1},a=-1;return t.MDW&&(eo=t.MDW),t.width!=null?n.customWidth=1:t.wpx!=null?a=Cx(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(n.width=vw(a),n.customWidth=1):t.width!=null&&(n.width=t.width),t.hidden&&(n.hidden=!0),t.level!=null&&(n.outlineLevel=n.level=t.level),n}function i9(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=n[0]),e.right==null&&(e.right=n[1]),e.top==null&&(e.top=n[2]),e.bottom==null&&(e.bottom=n[3]),e.header==null&&(e.header=n[4]),e.footer==null&&(e.footer=n[5])}}function al(e,t,n){var a=n.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&n.ssf){for(;s<392;++s)if(n.ssf[s]==null){tP(t.z,s),n.ssf[s]=t.z,n.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function ede(e,t,n){if(e&&e["!ref"]){var a=nn(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}function tde(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+En(e[n])+'"/>';return t+"</mergeCells>"}function rde(e,t,n,a,s){var i=!1,l={},d=null;if(a.bookType!=="xlsx"&&t.vbaraw){var u=t.SheetNames[n];try{t.Workbook&&(u=t.Workbook.Sheets[n].CodeName||u)}catch{}i=!0,l.codeName=ff(Fr(u))}if(e&&e["!outline"]){var h={summaryBelow:1,summaryRight:1};e["!outline"].above&&(h.summaryBelow=0),e["!outline"].left&&(h.summaryRight=0),d=(d||"")+vt("outlinePr",null,h)}!i&&!d||(s[s.length]=vt("sheetPr",d,l))}var nde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],ade=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function sde(e){var t={sheet:1};return nde.forEach(function(n){e[n]!=null&&e[n]&&(t[n]="1")}),ade.forEach(function(n){e[n]!=null&&!e[n]&&(t[n]="0")}),e.password&&(t.password=qP(e.password).toString(16).toUpperCase()),vt("sheetProtection",null,t)}function ide(e){return i9(e),vt("pageMargins",null,e)}function ode(e,t){for(var n=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(n[n.length]=vt("col",null,N0(s,a)));return n[n.length]="</cols>",n.join("")}function lde(e,t,n,a){var s=typeof e.ref=="string"?e.ref:En(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,l=ms(s);l.s.r==l.e.r&&(l.e.r=ms(t["!ref"]).e.r,s=En(l));for(var d=0;d<i.length;++d){var u=i[d];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==a){u.Ref="'"+n.SheetNames[a]+"'!"+s;break}}return d==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+n.SheetNames[a]+"'!"+s}),vt("autoFilter",null,{ref:s})}function cde(e,t,n,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),vt("sheetViews",vt("sheetView",null,s),{})}function dde(e,t,n,a){if(e.c&&n["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Rf[e.v];break;case"d":a&&a.cellDates?s=_a(e.v,-1).toISOString():(e=Va(e),e.t="n",s=""+(e.v=Ka(_a(e.v)))),typeof e.z>"u"&&(e.z=xn[14]);break;default:s=e.v;break}var d=ia("v",Fr(s)),u={r:t},h=al(a.cellXfs,e,a);switch(h!==0&&(u.s=h),e.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){d=ia("v",""+aN(a.Strings,e.v,a.revStrings)),u.t="s";break}u.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var p=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;d=vt("f",Fr(e.f),p)+(e.v!=null?d:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(u.cm=1),vt("c",d,u)}function ude(e,t,n,a){var s=[],i=[],l=nn(e["!ref"]),d="",u,h="",p=[],m=0,g=0,b=e["!rows"],j=Array.isArray(e),v={r:h},y,A=-1;for(g=l.s.c;g<=l.e.c;++g)p[g]=ja(g);for(m=l.s.r;m<=l.e.r;++m){for(i=[],h=la(m),g=l.s.c;g<=l.e.c;++g){u=p[g]+h;var E=j?(e[m]||[])[g]:e[u];E!==void 0&&(d=dde(E,u,e,t))!=null&&i.push(d)}(i.length>0||b&&b[m])&&(v={r:h},b&&b[m]&&(y=b[m],y.hidden&&(v.hidden=1),A=-1,y.hpx?A=Ax(y.hpx):y.hpt&&(A=y.hpt),A>-1&&(v.ht=A,v.customHeight=1),y.level&&(v.outlineLevel=y.level)),s[s.length]=vt("row",i.join(""),v))}if(b)for(;m<b.length;++m)b&&b[m]&&(v={r:m+1},y=b[m],y.hidden&&(v.hidden=1),A=-1,y.hpx?A=Ax(y.hpx):y.hpt&&(A=y.hpt),A>-1&&(v.ht=A,v.customHeight=1),y.level&&(v.outlineLevel=y.level),s[s.length]=vt("row","",v));return s.join("")}function o9(e,t,n,a){var s=[_n,vt("worksheet",null,{xmlns:Qd[0],"xmlns:r":Hn.r})],i=n.SheetNames[e],l=0,d="",u=n.Sheets[i];u==null&&(u={});var h=u["!ref"]||"A1",p=nn(h);if(p.e.c>16383||p.e.r>1048575){if(t.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),h=En(p)}a||(a={}),u["!comments"]=[];var m=[];rde(u,n,e,t,s),s[s.length]=vt("dimension",null,{ref:h}),s[s.length]=cde(u,t,e,n),t.sheetFormat&&(s[s.length]=vt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(s[s.length]=ode(u,u["!cols"])),s[l=s.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(d=ude(u,t),d.length>0&&(s[s.length]=d)),s.length>l+1&&(s[s.length]="</sheetData>",s[l]=s[l].replace("/>",">")),u["!protect"]&&(s[s.length]=sde(u["!protect"])),u["!autofilter"]!=null&&(s[s.length]=lde(u["!autofilter"],u,n,e)),u["!merges"]!=null&&u["!merges"].length>0&&(s[s.length]=tde(u["!merges"]));var g=-1,b,j=-1;return u["!links"].length>0&&(s[s.length]="<hyperlinks>",u["!links"].forEach(function(v){v[1].Target&&(b={ref:v[0]},v[1].Target.charAt(0)!="#"&&(j=Br(a,-1,Fr(v[1].Target).replace(/#.*$/,""),Sr.HLINK),b["r:id"]="rId"+j),(g=v[1].Target.indexOf("#"))>-1&&(b.location=Fr(v[1].Target.slice(g+1))),v[1].Tooltip&&(b.tooltip=Fr(v[1].Tooltip)),s[s.length]=vt("hyperlink",null,b))}),s[s.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(s[s.length]=ide(u["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=ia("ignoredErrors",vt("ignoredError",null,{numberStoredAsText:1,sqref:h}))),m.length>0&&(j=Br(a,-1,"../drawings/drawing"+(e+1)+".xml",Sr.DRAW),s[s.length]=vt("drawing",null,{"r:id":"rId"+j}),u["!drawing"]=m),u["!comments"].length>0&&(j=Br(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Sr.VML),s[s.length]=vt("legacyDrawing",null,{"r:id":"rId"+j}),u["!legacy"]=j),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function hde(e,t){var n={},a=e.l+t;n.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(n.level=i&7),i&16&&(n.hidden=!0),i&32&&(n.hpt=s/20),n}function fde(e,t,n){var a=nt(145),s=(n["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=Ax(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var l=0;s.level&&(l|=s.level),s.hidden&&(l|=16),(s.hpx||s.hpt)&&(l|=32),a.write_shift(1,l),a.write_shift(1,0);var d=0,u=a.l;a.l+=4;for(var h={r:e,c:0},p=0;p<16;++p)if(!(t.s.c>p+1<<10||t.e.c<p<<10)){for(var m=-1,g=-1,b=p<<10;b<p+1<<10;++b){h.c=b;var j=Array.isArray(n)?(n[h.r]||[])[h.c]:n[Lr(h)];j&&(m<0&&(m=b),g=b)}m<0||(++d,a.write_shift(4,m),a.write_shift(4,g))}var v=a.l;return a.l=u,a.write_shift(4,d),a.l=v,a.length>a.l?a.slice(0,a.l):a}function pde(e,t,n,a){var s=fde(a,n,t);(s.length>17||(t["!rows"]||[])[a])&&ut(e,0,s)}var mde=sc,xde=Zd;function gde(){}function yde(e,t){var n={},a=e[e.l];return++e.l,n.above=!(a&64),n.left=!(a&128),e.l+=18,n.name=Eie(e),n}function bde(e,t,n){n==null&&(n=nt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),n.write_shift(1,a);for(var s=1;s<3;++s)n.write_shift(1,0);return Sx({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),wP(e,n),n.slice(0,n.l)}function vde(e){var t=Fs(e);return[t]}function jde(e,t,n){return n==null&&(n=nt(8)),rc(t,n)}function wde(e){var t=nc(e);return[t]}function Sde(e,t,n){return n==null&&(n=nt(4)),ac(t,n)}function Nde(e){var t=Fs(e),n=e.read_shift(1);return[t,n,"b"]}function Tde(e,t,n){return n==null&&(n=nt(9)),rc(t,n),n.write_shift(1,e.v?1:0),n}function Cde(e){var t=nc(e),n=e.read_shift(1);return[t,n,"b"]}function Ade(e,t,n){return n==null&&(n=nt(5)),ac(t,n),n.write_shift(1,e.v?1:0),n}function Ede(e){var t=Fs(e),n=e.read_shift(1);return[t,n,"e"]}function Ode(e,t,n){return n==null&&(n=nt(9)),rc(t,n),n.write_shift(1,e.v),n}function kde(e){var t=nc(e),n=e.read_shift(1);return[t,n,"e"]}function _de(e,t,n){return n==null&&(n=nt(8)),ac(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}function Ide(e){var t=Fs(e),n=e.read_shift(4);return[t,n,"s"]}function Dde(e,t,n){return n==null&&(n=nt(12)),rc(t,n),n.write_shift(4,t.v),n}function Rde(e){var t=nc(e),n=e.read_shift(4);return[t,n,"s"]}function Pde(e,t,n){return n==null&&(n=nt(8)),ac(t,n),n.write_shift(4,t.v),n}function Mde(e){var t=Fs(e),n=eu(e);return[t,n,"n"]}function Bde(e,t,n){return n==null&&(n=nt(16)),rc(t,n),Vl(e.v,n),n}function Fde(e){var t=nc(e),n=eu(e);return[t,n,"n"]}function Lde(e,t,n){return n==null&&(n=nt(12)),ac(t,n),Vl(e.v,n),n}function $de(e){var t=Fs(e),n=SP(e);return[t,n,"n"]}function zde(e,t,n){return n==null&&(n=nt(12)),rc(t,n),NP(e.v,n),n}function Ude(e){var t=nc(e),n=SP(e);return[t,n,"n"]}function qde(e,t,n){return n==null&&(n=nt(8)),ac(t,n),NP(e.v,n),n}function Wde(e){var t=Fs(e),n=XS(e);return[t,n,"is"]}function Hde(e){var t=Fs(e),n=wa(e);return[t,n,"str"]}function Gde(e,t,n){return n==null&&(n=nt(12+4*e.v.length)),rc(t,n),Kn(e.v,n),n.length>n.l?n.slice(0,n.l):n}function Kde(e){var t=nc(e),n=wa(e);return[t,n,"str"]}function Vde(e,t,n){return n==null&&(n=nt(8+4*e.v.length)),ac(t,n),Kn(e.v,n),n.length>n.l?n.slice(0,n.l):n}function Yde(e,t,n){var a=e.l+t,s=Fs(e);s.r=n["!row"];var i=e.read_shift(1),l=[s,i,"b"];if(n.cellFormula){e.l+=2;var d=S0(e,a-e.l,n);l[3]=Rd(d,null,s,n.supbooks,n)}else e.l=a;return l}function Xde(e,t,n){var a=e.l+t,s=Fs(e);s.r=n["!row"];var i=e.read_shift(1),l=[s,i,"e"];if(n.cellFormula){e.l+=2;var d=S0(e,a-e.l,n);l[3]=Rd(d,null,s,n.supbooks,n)}else e.l=a;return l}function Qde(e,t,n){var a=e.l+t,s=Fs(e);s.r=n["!row"];var i=eu(e),l=[s,i,"n"];if(n.cellFormula){e.l+=2;var d=S0(e,a-e.l,n);l[3]=Rd(d,null,s,n.supbooks,n)}else e.l=a;return l}function Jde(e,t,n){var a=e.l+t,s=Fs(e);s.r=n["!row"];var i=wa(e),l=[s,i,"str"];if(n.cellFormula){e.l+=2;var d=S0(e,a-e.l,n);l[3]=Rd(d,null,s,n.supbooks,n)}else e.l=a;return l}var Zde=sc,eue=Zd;function tue(e,t){return t==null&&(t=nt(4)),t.write_shift(4,e),t}function rue(e,t){var n=e.l+t,a=sc(e),s=QS(e),i=wa(e),l=wa(e),d=wa(e);e.l=n;var u={rfx:a,relId:s,loc:i,display:d};return l&&(u.Tooltip=l),u}function nue(e,t){var n=nt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Zd({s:Gn(e[0]),e:Gn(e[0])},n),JS("rId"+t,n);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return Kn(s||"",n),Kn(e[1].Tooltip||"",n),Kn("",n),n.slice(0,n.l)}function aue(){}function sue(e,t,n){var a=e.l+t,s=TP(e),i=e.read_shift(1),l=[s];if(l[2]=i,n.cellFormula){var d=Kce(e,a-e.l,n);l[1]=d}else e.l=a;return l}function iue(e,t,n){var a=e.l+t,s=sc(e),i=[s];if(n.cellFormula){var l=Yce(e,a-e.l,n);i[1]=l,e.l=a}else e.l=a;return i}function oue(e,t,n){n==null&&(n=nt(18));var a=N0(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,(a.width||10)*256),n.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),n.write_shift(2,s),n}var l9=["left","right","top","bottom","header","footer"];function lue(e){var t={};return l9.forEach(function(n){t[n]=eu(e)}),t}function cue(e,t){return t==null&&(t=nt(6*8)),i9(e),l9.forEach(function(n){Vl(e[n],t)}),t}function due(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function uue(e,t,n){n==null&&(n=nt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),n.write_shift(2,a),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function hue(e){var t=nt(24);return t.write_shift(4,4),t.write_shift(4,1),Zd(e,t),t}function fue(e,t){return t==null&&(t=nt(16*4+2)),t.write_shift(2,e.password?qP(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?t.write_shift(4,e[n[0]]!=null&&!e[n[0]]?1:0):t.write_shift(4,e[n[0]]!=null&&e[n[0]]?0:1)}),t}function pue(){}function mue(){}function xue(e,t,n,a,s,i,l){if(t.v===void 0)return!1;var d="";switch(t.t){case"b":d=t.v?"1":"0";break;case"d":t=Va(t),t.z=t.z||xn[14],t.v=Ka(_a(t.v)),t.t="n";break;case"n":case"e":d=""+t.v;break;default:d=t.v;break}var u={r:n,c:a};switch(u.s=al(s.cellXfs,t,s),t.l&&i["!links"].push([Lr(u),t.l]),t.c&&i["!comments"].push([Lr(u),t.c]),t.t){case"s":case"str":return s.bookSST?(d=aN(s.Strings,t.v,s.revStrings),u.t="s",u.v=d,l?ut(e,18,Pde(t,u)):ut(e,7,Dde(t,u))):(u.t="str",l?ut(e,17,Vde(t,u)):ut(e,6,Gde(t,u))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?ut(e,13,qde(t,u)):ut(e,2,zde(t,u)):l?ut(e,16,Lde(t,u)):ut(e,5,Bde(t,u)),!0;case"b":return u.t="b",l?ut(e,15,Ade(t,u)):ut(e,4,Tde(t,u)),!0;case"e":return u.t="e",l?ut(e,14,_de(t,u)):ut(e,3,Ode(t,u)),!0}return l?ut(e,12,Sde(t,u)):ut(e,1,jde(t,u)),!0}function gue(e,t,n,a){var s=nn(t["!ref"]||"A1"),i,l="",d=[];ut(e,145);var u=Array.isArray(t),h=s.e.r;t["!rows"]&&(h=Math.max(s.e.r,t["!rows"].length-1));for(var p=s.s.r;p<=h;++p){l=la(p),pde(e,t,s,p);var m=!1;if(p<=s.e.r)for(var g=s.s.c;g<=s.e.c;++g){p===s.s.r&&(d[g]=ja(g)),i=d[g]+l;var b=u?(t[p]||[])[g]:t[i];if(!b){m=!1;continue}m=xue(e,b,p,g,a,t,m)}}ut(e,146)}function yue(e,t){!t||!t["!merges"]||(ut(e,177,tue(t["!merges"].length)),t["!merges"].forEach(function(n){ut(e,176,eue(n))}),ut(e,178))}function bue(e,t){!t||!t["!cols"]||(ut(e,390),t["!cols"].forEach(function(n,a){n&&ut(e,60,oue(a,n))}),ut(e,391))}function vue(e,t){!t||!t["!ref"]||(ut(e,648),ut(e,649,hue(nn(t["!ref"]))),ut(e,650))}function jue(e,t,n){t["!links"].forEach(function(a){if(a[1].Target){var s=Br(n,-1,a[1].Target.replace(/#.*$/,""),Sr.HLINK);ut(e,494,nue(a,s))}}),delete t["!links"]}function wue(e,t,n,a){if(t["!comments"].length>0){var s=Br(a,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Sr.VML);ut(e,551,JS("rId"+s)),t["!legacy"]=s}}function Sue(e,t,n,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:En(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var l=n.Workbook.Names,d=ms(i);d.s.r==d.e.r&&(d.e.r=ms(t["!ref"]).e.r,i=En(d));for(var u=0;u<l.length;++u){var h=l[u];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==a){h.Ref="'"+n.SheetNames[a]+"'!"+i;break}}u==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+n.SheetNames[a]+"'!"+i}),ut(e,161,Zd(nn(i))),ut(e,162)}}function Nue(e,t,n){ut(e,133),ut(e,137,uue(t,n)),ut(e,138),ut(e,134)}function Tue(e,t){t["!protect"]&&ut(e,535,fue(t["!protect"]))}function Cue(e,t,n,a){var s=Ga(),i=n.SheetNames[e],l=n.Sheets[i]||{},d=i;try{n&&n.Workbook&&(d=n.Workbook.Sheets[e].CodeName||d)}catch{}var u=nn(l["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],ut(s,129),(n.vbaraw||l["!outline"])&&ut(s,147,bde(d,l["!outline"])),ut(s,148,xde(u)),Nue(s,l,n.Workbook),bue(s,l),gue(s,l,e,t),Tue(s,l),Sue(s,l,n,e),yue(s,l),jue(s,l,a),l["!margins"]&&ut(s,476,cue(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&vue(s,l),wue(s,l,e,a),ut(s,130),s.end()}function Aue(e,t){e.l+=10;var n=wa(e);return{name:n}}var Eue=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Oue(e){return!e.Workbook||!e.Workbook.WBProps?"false":iie(e.Workbook.WBProps.date1904)?"true":"false"}var kue="][*?/\\".split("");function c9(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return kue.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function _ue(e,t,n){e.forEach(function(a,s){c9(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(n){var l=t&&t[s]&&t[s].CodeName||a;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function Iue(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];_ue(e.SheetNames,t,!!e.vbaraw);for(var n=0;n<e.SheetNames.length;++n)ede(e.Sheets[e.SheetNames[n]],e.SheetNames[n],n)}function d9(e){var t=[_n];t[t.length]=vt("workbook",null,{xmlns:Qd[0],"xmlns:r":Hn.r});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Eue.forEach(function(d){e.Workbook.WBProps[d[0]]!=null&&e.Workbook.WBProps[d[0]]!=d[1]&&(a[d[0]]=e.Workbook.WBProps[d[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=vt("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:Fr(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=vt("sheet",null,l)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(d){var u={name:d.Name};d.Comment&&(u.comment=d.Comment),d.Sheet!=null&&(u.localSheetId=""+d.Sheet),d.Hidden&&(u.hidden="1"),d.Ref&&(t[t.length]=vt("definedName",Fr(d.Ref),u))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Due(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=bw(e),n.name=wa(e),n}function Rue(e,t){return t||(t=nt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),JS(e.strRelID,t),Kn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Pue(e,t){var n={},a=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var s=t>8?wa(e):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(a&65536),n.backupFile=!!(a&64),n.checkCompatibility=!!(a&4096),n.date1904=!!(a&1),n.filterPrivacy=!!(a&8),n.hidePivotFieldList=!!(a&1024),n.promptedSolutions=!!(a&16),n.publishItems=!!(a&2048),n.refreshAllConnections=!!(a&262144),n.saveExternalLinkValues=!!(a&128),n.showBorderUnselectedTables=!!(a&4),n.showInkAnnotation=!!(a&32),n.showObjects=["all","placeholders","none"][a>>13&3],n.showPivotChartFilter=!!(a&32768),n.updateLinks=["userSet","never","always"][a>>8&3],n}function Mue(e,t){t||(t=nt(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),wP(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Bue(e,t,n){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Oie(e),l=Vce(e,0,n),d=QS(e);e.l=a;var u={Name:i,Ptg:l};return s<268435455&&(u.Sheet=s),d&&(u.Comment=d),u}function Fue(e,t){ut(e,143);for(var n=0;n!=t.SheetNames.length;++n){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,s={Hidden:a,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]};ut(e,156,Rue(s))}ut(e,144)}function Lue(e,t){t||(t=nt(127));for(var n=0;n!=4;++n)t.write_shift(4,0);return Kn("SheetJS",t),Kn(mx.version,t),Kn(mx.version,t),Kn("7262",t),t.length>t.l?t.slice(0,t.l):t}function $ue(e,t){t||(t=nt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var n=120;return t.write_shift(1,n),t.length>t.l?t.slice(0,t.l):t}function zue(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var n=t.Workbook.Sheets,a=0,s=-1,i=-1;a<n.length;++a)!n[a]||!n[a].Hidden&&s==-1?s=a:n[a].Hidden==1&&i==-1&&(i=a);i>s||(ut(e,135),ut(e,158,$ue(s)),ut(e,136))}}function Uue(e,t){var n=Ga();return ut(n,131),ut(n,128,Lue()),ut(n,153,Mue(e.Workbook&&e.Workbook.WBProps||null)),zue(n,e),Fue(n,e),ut(n,132),n.end()}function que(e,t,n){return(t.slice(-4)===".bin"?Uue:d9)(e)}function Wue(e,t,n,a,s){return(t.slice(-4)===".bin"?Cue:o9)(e,n,a,s)}function Hue(e,t,n){return(t.slice(-4)===".bin"?cle:GP)(e,n)}function Gue(e,t,n){return(t.slice(-4)===".bin"?Moe:UP)(e,n)}function Kue(e,t,n){return(t.slice(-4)===".bin"?Tle:QP)(e)}function Vue(e){return(e.slice(-4)===".bin"?gle:YP)()}function Yue(e,t){var n=[];return e.Props&&n.push(Hie(e.Props,t)),e.Custprops&&n.push(Gie(e.Props,e.Custprops)),n.join("")}function Xue(){return""}function Que(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(vt("NumberFormat",null,{"ss:Format":Fr(xn[a.numFmtId])}));var l={"ss:ID":"s"+(21+s)};n.push(vt("Style",i.join(""),l))}),vt("Styles",n.join(""))}function u9(e){return vt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+rN(e.Ref,{r:0,c:0})})}function Jue(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||n.push(u9(s)))}return vt("Names",n.join(""))}function Zue(e,t,n,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],l=0;l<s.length;++l){var d=s[l];d.Sheet==n&&(d.Name.match(/^_xlfn\./)||i.push(u9(d)))}return i.join("")}function ehe(e,t,n,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(vt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(vt("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(vt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[n])if(a.Workbook.Sheets[n].Hidden)s.push(vt("Visible",a.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<n&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==n&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(ia("ProtectContents","True")),e["!protect"].objects&&s.push(ia("ProtectObjects","True")),e["!protect"].scenarios&&s.push(ia("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(ia("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(ia("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&s.push("<"+l[1]+"/>")})),s.length==0?"":vt("WorksheetOptions",s.join(""),{xmlns:us.x})}function the(e){return e.map(function(t){var n=sie(t.t||""),a=vt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return vt("Comment",a,{"ss:Author":t.a})}).join("")}function rhe(e,t,n,a,s,i,l){if(!e||e.v==null&&e.f==null)return"";var d={};if(e.f&&(d["ss:Formula"]="="+Fr(rN(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var u=Gn(e.F.slice(t.length+1));d["ss:ArrayRange"]="RC:R"+(u.r==l.r?"":"["+(u.r-l.r)+"]")+"C"+(u.c==l.c?"":"["+(u.c-l.c)+"]")}if(e.l&&e.l.Target&&(d["ss:HRef"]=Fr(e.l.Target),e.l.Tooltip&&(d["x:HRefScreenTip"]=Fr(e.l.Tooltip))),n["!merges"])for(var h=n["!merges"],p=0;p!=h.length;++p)h[p].s.c!=l.c||h[p].s.r!=l.r||(h[p].e.c>h[p].s.c&&(d["ss:MergeAcross"]=h[p].e.c-h[p].s.c),h[p].e.r>h[p].s.r&&(d["ss:MergeDown"]=h[p].e.r-h[p].s.r));var m="",g="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":m="Number",g=String(e.v);break;case"b":m="Boolean",g=e.v?"1":"0";break;case"e":m="Error",g=Rf[e.v];break;case"d":m="DateTime",g=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||xn[14]);break;case"s":m="String",g=aie(e.v||"");break}var b=al(a.cellXfs,e,a);d["ss:StyleID"]="s"+(21+b),d["ss:Index"]=l.c+1;var j=e.v!=null?g:"",v=e.t=="z"?"":'<Data ss:Type="'+m+'">'+j+"</Data>";return(e.c||[]).length>0&&(v+=the(e.c)),vt("Cell",v,d)}function nhe(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=HP(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function ahe(e,t,n,a){if(!e["!ref"])return"";var s=nn(e["!ref"]),i=e["!merges"]||[],l=0,d=[];e["!cols"]&&e["!cols"].forEach(function(y,A){eN(y);var E=!!y.width,O=N0(A,y),S={"ss:Index":A+1};E&&(S["ss:Width"]=Tx(O.width)),y.hidden&&(S["ss:Hidden"]="1"),d.push(vt("Column",null,S))});for(var u=Array.isArray(e),h=s.s.r;h<=s.e.r;++h){for(var p=[nhe(h,(e["!rows"]||[])[h])],m=s.s.c;m<=s.e.c;++m){var g=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>m)&&!(i[l].s.r>h)&&!(i[l].e.c<m)&&!(i[l].e.r<h)){(i[l].s.c!=m||i[l].s.r!=h)&&(g=!0);break}if(!g){var b={r:h,c:m},j=Lr(b),v=u?(e[h]||[])[m]:e[j];p.push(rhe(v,j,e,t,n,a,b))}}p.push("</Row>"),p.length>2&&d.push(p.join(""))}return d.join("")}function she(e,t,n){var a=[],s=n.SheetNames[e],i=n.Sheets[s],l=i?Zue(i,t,e,n):"";return l.length>0&&a.push("<Names>"+l+"</Names>"),l=i?ahe(i,t,e,n):"",l.length>0&&a.push("<Table>"+l+"</Table>"),a.push(ehe(i,t,e,n)),a.join("")}function ihe(e,t){t||(t={}),e.SSF||(e.SSF=Va(xn)),e.SSF&&(b0(),y0(e.SSF),t.revssf=v0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],al(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(Yue(e,t)),n.push(Xue()),n.push(""),n.push("");for(var a=0;a<e.SheetNames.length;++a)n.push(vt("Worksheet",she(a,t,e),{"ss:Name":Fr(e.SheetNames[a])}));return n[2]=Que(e,t),n[3]=Jue(e),_n+vt("Workbook",n.join(""),{xmlns:us.ss,"xmlns:o":us.o,"xmlns:x":us.x,"xmlns:ss":us.ss,"xmlns:dt":us.dt,"xmlns:html":us.html})}var Rj={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ohe(e,t){var n=[],a=[],s=[],i=0,l,d=lI(jI,"n"),u=lI(wI,"n");if(e.Props)for(l=da(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(d,l[i])?n:Object.prototype.hasOwnProperty.call(u,l[i])?a:s).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=da(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(d,l[i])?n:Object.prototype.hasOwnProperty.call(u,l[i])?a:s).push([l[i],e.Custprops[l[i]]]);var h=[];for(i=0;i<s.length;++i)PP.indexOf(s[i][0])>-1||IP.indexOf(s[i][0])>-1||s[i][1]!=null&&h.push(s[i]);a.length&&Vr.utils.cfb_add(t,"/SummaryInformation",AI(a,Rj.SI,u,wI)),(n.length||h.length)&&Vr.utils.cfb_add(t,"/DocumentSummaryInformation",AI(n,Rj.DSI,d,jI,h.length?h:null,Rj.UDI))}function lhe(e,t){var n=t||{},a=Vr.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Vr.utils.cfb_add(a,s,h9(e,n)),n.biff==8&&(e.Props||e.Custprops)&&ohe(e,a),n.biff==8&&e.vbaraw&&Cle(a,Vr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var che={0:{f:hde},1:{f:vde},2:{f:$de},3:{f:Ede},4:{f:Nde},5:{f:Mde},6:{f:Hde},7:{f:Ide},8:{f:Jde},9:{f:Qde},10:{f:Yde},11:{f:Xde},12:{f:wde},13:{f:Ude},14:{f:kde},15:{f:Cde},16:{f:Fde},17:{f:Kde},18:{f:Rde},19:{f:XS},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Bue},40:{},42:{},43:{f:Hoe},44:{f:qoe},45:{f:Voe},46:{f:Xoe},47:{f:Yoe},48:{},49:{f:wie},50:{},51:{f:hle},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Soe},62:{f:Wde},63:{f:yle},64:{f:pue},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ni,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:due},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:yde},148:{f:mde,p:16},151:{f:aue},152:{},153:{f:Pue},154:{},155:{},156:{f:Due},157:{},158:{},159:{T:1,f:Doe},160:{T:-1},161:{T:1,f:sc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Zde},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:dle},336:{T:-1},337:{f:mle,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:bw},357:{},358:{},359:{},360:{T:1},361:{},362:{f:goe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:sue},427:{f:iue},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:lue},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:gde},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:rue},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:bw},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Sle},633:{T:1},634:{T:-1},635:{T:1,f:jle},636:{T:-1},637:{f:Cie},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Aue},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:mue},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function jt(e,t,n,a){var s=t;if(!isNaN(s)){var i=a||(n||[]).length||0,l=e.next(4);l.write_shift(2,s),l.write_shift(2,i),i>0&&KS(n)&&e.push(n)}}function dhe(e,t,n,a){var s=(n||[]).length||0;if(s<=8224)return jt(e,t,n,s);var i=t;if(!isNaN(i)){for(var l=n.parts||[],d=0,u=0,h=0;h+(l[d]||8224)<=8224;)h+=l[d]||8224,d++;var p=e.next(4);for(p.write_shift(2,i),p.write_shift(2,h),e.push(n.slice(u,u+h)),u+=h;u<s;){for(p=e.next(4),p.write_shift(2,60),h=0;h+(l[d]||8224)<=8224;)h+=l[d]||8224,d++;p.write_shift(2,h),e.push(n.slice(u,u+h)),u+=h}}}function Mf(e,t,n){return e||(e=nt(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function uhe(e,t,n,a){var s=nt(9);return Mf(s,e,t),BP(n,a||"b",s),s}function hhe(e,t,n){var a=nt(8+2*n.length);return Mf(a,e,t),a.write_shift(1,n.length),a.write_shift(n.length,n,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function fhe(e,t,n,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Ka(_a(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?jt(e,2,Aoe(n,a,s)):jt(e,3,Coe(n,a,s));return;case"b":case"e":jt(e,5,uhe(n,a,t.v,t.t));return;case"s":case"str":jt(e,4,hhe(n,a,(t.v||"").slice(0,255)));return}jt(e,1,Mf(null,n,a))}function phe(e,t,n,a){var s=Array.isArray(t),i=nn(t["!ref"]||"A1"),l,d="",u=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=En(i)}for(var h=i.s.r;h<=i.e.r;++h){d=la(h);for(var p=i.s.c;p<=i.e.c;++p){h===i.s.r&&(u[p]=ja(p)),l=u[p]+d;var m=s?(t[h]||[])[p]:t[l];m&&fhe(e,m,h,p)}}}function mhe(e,t){for(var n=t||{},a=Ga(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==n.sheet&&(s=i);if(s==0&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return jt(a,n.biff==4?1033:n.biff==3?521:9,ZS(e,16,n)),phe(a,e.Sheets[e.SheetNames[s]],s,n),jt(a,10),a.end()}function xhe(e,t,n){jt(e,49,coe({sz:12,name:"Arial"},n))}function ghe(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&jt(e,1054,hoe(s,t[s],n))})}function yhe(e,t){var n=nt(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),jt(e,2151,n),n=nt(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),$P(nn(t["!ref"]||"A1"),n),n.write_shift(4,4),jt(e,2152,n)}function bhe(e,t){for(var n=0;n<16;++n)jt(e,224,OI({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){jt(e,224,OI(a,0,t))})}function vhe(e,t){for(var n=0;n<t["!links"].length;++n){var a=t["!links"][n];jt(e,440,voe(a)),a[1].Tooltip&&jt(e,2048,joe(a))}delete t["!links"]}function jhe(e,t){if(t){var n=0;t.forEach(function(a,s){++n<=256&&a&&jt(e,125,Noe(N0(s,a),s))})}}function whe(e,t,n,a,s){var i=16+al(s.cellXfs,t,s);if(t.v==null&&!t.bf){jt(e,513,Yl(n,a,i));return}if(t.bf)jt(e,6,Gce(t,n,a,s,i));else switch(t.t){case"d":case"n":var l=t.t=="d"?Ka(_a(t.v)):t.v;jt(e,515,xoe(n,a,l,i));break;case"b":case"e":jt(e,517,moe(n,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var d=aN(s.Strings,t.v,s.revStrings);jt(e,253,doe(n,a,d,i))}else jt(e,516,uoe(n,a,(t.v||"").slice(0,255),i,s));break;default:jt(e,513,Yl(n,a,i))}}function She(e,t,n){var a=Ga(),s=n.SheetNames[e],i=n.Sheets[s]||{},l=(n||{}).Workbook||{},d=(l.Sheets||[])[e]||{},u=Array.isArray(i),h=t.biff==8,p,m="",g=[],b=nn(i["!ref"]||"A1"),j=h?65536:16384;if(b.e.c>255||b.e.r>=j){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,j-1)}jt(a,2057,ZS(n,16,t)),jt(a,13,ks(1)),jt(a,12,ks(100)),jt(a,15,Oa(!0)),jt(a,17,Oa(!1)),jt(a,16,Vl(.001)),jt(a,95,Oa(!0)),jt(a,42,Oa(!1)),jt(a,43,Oa(!1)),jt(a,130,ks(1)),jt(a,128,poe()),jt(a,131,Oa(!1)),jt(a,132,Oa(!1)),h&&jhe(a,i["!cols"]),jt(a,512,foe(b,t)),h&&(i["!links"]=[]);for(var v=b.s.r;v<=b.e.r;++v){m=la(v);for(var y=b.s.c;y<=b.e.c;++y){v===b.s.r&&(g[y]=ja(y)),p=g[y]+m;var A=u?(i[v]||[])[y]:i[p];A&&(whe(a,A,v,y,t),h&&A.l&&i["!links"].push([p,A.l]))}}var E=d.CodeName||d.name||s;return h&&jt(a,574,loe((l.Views||[])[0])),h&&(i["!merges"]||[]).length&&jt(a,229,boe(i["!merges"])),h&&vhe(a,i),jt(a,442,LP(E)),h&&yhe(a,i),jt(a,10),a.end()}function Nhe(e,t,n){var a=Ga(),s=(e||{}).Workbook||{},i=s.Sheets||[],l=s.WBProps||{},d=n.biff==8,u=n.biff==5;if(jt(a,2057,ZS(e,5,n)),n.bookType=="xla"&&jt(a,135),jt(a,225,d?ks(1200):null),jt(a,193,Yie(2)),u&&jt(a,191),u&&jt(a,192),jt(a,226),jt(a,92,aoe("SheetJS",n)),jt(a,66,ks(d?1200:1252)),d&&jt(a,353,ks(0)),d&&jt(a,448),jt(a,317,Toe(e.SheetNames.length)),d&&e.vbaraw&&jt(a,211),d&&e.vbaraw){var h=l.CodeName||"ThisWorkbook";jt(a,442,LP(h))}jt(a,156,ks(17)),jt(a,25,Oa(!1)),jt(a,18,Oa(!1)),jt(a,19,ks(0)),d&&jt(a,431,Oa(!1)),d&&jt(a,444,ks(0)),jt(a,61,ooe()),jt(a,64,Oa(!1)),jt(a,141,ks(0)),jt(a,34,Oa(Oue(e)=="true")),jt(a,14,Oa(!0)),d&&jt(a,439,Oa(!1)),jt(a,218,ks(0)),xhe(a,e,n),ghe(a,e.SSF,n),bhe(a,n),d&&jt(a,352,Oa(!1));var p=a.end(),m=Ga();d&&jt(m,140,woe()),d&&n.Strings&&dhe(m,252,ioe(n.Strings)),jt(m,10);var g=m.end(),b=Ga(),j=0,v=0;for(v=0;v<e.SheetNames.length;++v)j+=(d?12:11)+(d?2:1)*e.SheetNames[v].length;var y=p.length+j+g.length;for(v=0;v<e.SheetNames.length;++v){var A=i[v]||{};jt(b,133,soe({pos:y,hs:A.Hidden||0,dt:0,name:e.SheetNames[v]},n)),y+=t[v].length}var E=b.end();if(j!=E.length)throw new Error("BS8 "+j+" != "+E.length);var O=[];return p.length&&O.push(p),E.length&&O.push(E),g.length&&O.push(g),sa(O)}function The(e,t){var n=t||{},a=[];e&&!e.SSF&&(e.SSF=Va(xn)),e&&e.SSF&&(b0(),y0(e.SSF),n.revssf=v0(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,sN(n),n.cellXfs=[],al(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=She(s,n,e);return a.unshift(Nhe(e,a,n)),sa(a)}function h9(e,t){for(var n=0;n<=e.SheetNames.length;++n){var a=e.Sheets[e.SheetNames[n]];if(!(!a||!a["!ref"])){var s=ms(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return The(e,t);case 4:case 3:case 2:return mhe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Che(e,t,n,a){for(var s=e["!merges"]||[],i=[],l=t.s.c;l<=t.e.c;++l){for(var d=0,u=0,h=0;h<s.length;++h)if(!(s[h].s.r>n||s[h].s.c>l)&&!(s[h].e.r<n||s[h].e.c<l)){if(s[h].s.r<n||s[h].s.c<l){d=-1;break}d=s[h].e.r-s[h].s.r+1,u=s[h].e.c-s[h].s.c+1;break}if(!(d<0)){var p=Lr({r:n,c:l}),m=a.dense?(e[n]||[])[l]:e[p],g=m&&m.v!=null&&(m.h||nie(m.w||(lo(m),m.w)||""))||"",b={};d>1&&(b.rowspan=d),u>1&&(b.colspan=u),a.editable?g='<span contenteditable="true">'+g+"</span>":m&&(b["data-t"]=m&&m.t||"z",m.v!=null&&(b["data-v"]=m.v),m.z!=null&&(b["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+m.l.Target+'">'+g+"</a>")),b.id=(a.id||"sjs")+"-"+p,i.push(vt("td",g,b))}}var j="<tr>";return j+i.join("")+"</tr>"}var Ahe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ehe="</body></html>";function Ohe(e,t,n){var a=[];return a.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function f9(e,t){var n=t||{},a=n.header!=null?n.header:Ahe,s=n.footer!=null?n.footer:Ehe,i=[a],l=ms(e["!ref"]);n.dense=Array.isArray(e),i.push(Ohe(e,l,n));for(var d=l.s.r;d<=l.e.r;++d)i.push(Che(e,l,d,n));return i.push("</table>"+s),i.join("")}function p9(e,t,n){var a=n||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var l=typeof a.origin=="string"?Gn(a.origin):a.origin;s=l.r,i=l.c}var d=t.getElementsByTagName("tr"),u=Math.min(a.sheetRows||1e7,d.length),h={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var p=ms(e["!ref"]);h.s.r=Math.min(h.s.r,p.s.r),h.s.c=Math.min(h.s.c,p.s.c),h.e.r=Math.max(h.e.r,p.e.r),h.e.c=Math.max(h.e.c,p.e.c),s==-1&&(h.e.r=s=p.e.r+1)}var m=[],g=0,b=e["!rows"]||(e["!rows"]=[]),j=0,v=0,y=0,A=0,E=0,O=0;for(e["!cols"]||(e["!cols"]=[]);j<d.length&&v<u;++j){var S=d[j];if(MI(S)){if(a.display)continue;b[v]={hidden:!0}}var C=S.children;for(y=A=0;y<C.length;++y){var k=C[y];if(!(a.display&&MI(k))){var I=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):oie(k.innerHTML),z=k.getAttribute("data-z")||k.getAttribute("z");for(g=0;g<m.length;++g){var B=m[g];B.s.c==A+i&&B.s.r<v+s&&v+s<=B.e.r&&(A=B.e.c+1-i,g=-1)}O=+k.getAttribute("colspan")||1,((E=+k.getAttribute("rowspan")||1)>1||O>1)&&m.push({s:{r:v+s,c:A+i},e:{r:v+s+(E||1)-1,c:A+i+(O||1)-1}});var M={t:"s",v:I},F=k.getAttribute("data-t")||k.getAttribute("t")||"";I!=null&&(I.length==0?M.t=F||"z":a.raw||I.trim().length==0||F=="s"||(I==="TRUE"?M={t:"b",v:!0}:I==="FALSE"?M={t:"b",v:!1}:isNaN(Zi(I))?isNaN(hf(I).getDate())||(M={t:"d",v:_a(I)},a.cellDates||(M={t:"n",v:Ka(M.v)}),M.z=a.dateNF||xn[14]):M={t:"n",v:Zi(I)})),M.z===void 0&&z!=null&&(M.z=z);var N="",L=k.getElementsByTagName("A");if(L&&L.length)for(var P=0;P<L.length&&!(L[P].hasAttribute("href")&&(N=L[P].getAttribute("href"),N.charAt(0)!="#"));++P);N&&N.charAt(0)!="#"&&(M.l={Target:N}),a.dense?(e[v+s]||(e[v+s]=[]),e[v+s][A+i]=M):e[Lr({c:A+i,r:v+s})]=M,h.e.c<A+i&&(h.e.c=A+i),A+=O}}++v}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),h.e.r=Math.max(h.e.r,v-1+s),e["!ref"]=En(h),v>=u&&(e["!fullref"]=En((h.e.r=d.length-j+v-1+s,h))),e}function m9(e,t){var n=t||{},a=n.dense?[]:{};return p9(a,e,t)}function khe(e,t){return tc(m9(e,t),t)}function MI(e){var t="",n=_he(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function _he(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Ihe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+pf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return _n+t}}(),BI=function(){var e=function(i){return Fr(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,a=function(i,l,d){var u=[];u.push('      <table:table table:name="'+Fr(l.SheetNames[d])+`" table:style-name="ta1">
`);var h=0,p=0,m=ms(i["!ref"]||"A1"),g=i["!merges"]||[],b=0,j=Array.isArray(i);if(i["!cols"])for(p=0;p<=m.e.c;++p)u.push("        <table:table-column"+(i["!cols"][p]?' table:style-name="co'+i["!cols"][p].ods+'"':"")+`></table:table-column>
`);var v="",y=i["!rows"]||[];for(h=0;h<m.s.r;++h)v=y[h]?' table:style-name="ro'+y[h].ods+'"':"",u.push("        <table:table-row"+v+`></table:table-row>
`);for(;h<=m.e.r;++h){for(v=y[h]?' table:style-name="ro'+y[h].ods+'"':"",u.push("        <table:table-row"+v+`>
`),p=0;p<m.s.c;++p)u.push(t);for(;p<=m.e.c;++p){var A=!1,E={},O="";for(b=0;b!=g.length;++b)if(!(g[b].s.c>p)&&!(g[b].s.r>h)&&!(g[b].e.c<p)&&!(g[b].e.r<h)){(g[b].s.c!=p||g[b].s.r!=h)&&(A=!0),E["table:number-columns-spanned"]=g[b].e.c-g[b].s.c+1,E["table:number-rows-spanned"]=g[b].e.r-g[b].s.r+1;break}if(A){u.push(n);continue}var S=Lr({r:h,c:p}),C=j?(i[h]||[])[p]:i[S];if(C&&C.f&&(E["table:formula"]=Fr(Jce(C.f)),C.F&&C.F.slice(0,S.length)==S)){var k=ms(C.F);E["table:number-matrix-columns-spanned"]=k.e.c-k.s.c+1,E["table:number-matrix-rows-spanned"]=k.e.r-k.s.r+1}if(!C){u.push(t);continue}switch(C.t){case"b":O=C.v?"TRUE":"FALSE",E["office:value-type"]="boolean",E["office:boolean-value"]=C.v?"true":"false";break;case"n":O=C.w||String(C.v||0),E["office:value-type"]="float",E["office:value"]=C.v||0;break;case"s":case"str":O=C.v==null?"":C.v,E["office:value-type"]="string";break;case"d":O=C.w||_a(C.v).toISOString(),E["office:value-type"]="date",E["office:date-value"]=_a(C.v).toISOString(),E["table:style-name"]="ce1";break;default:u.push(t);continue}var I=e(O);if(C.l&&C.l.Target){var z=C.l.Target;z=z.charAt(0)=="#"?"#"+Zce(z.slice(1)):z,z.charAt(0)!="#"&&!z.match(/^\w+:/)&&(z="../"+z),I=vt("text:a",I,{"xlink:href":z.replace(/&/g,"&amp;")})}u.push("          "+vt("table:table-cell",vt("text:p",I,{}),E)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},s=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var d=0;l.SheetNames.map(function(h){return l.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var p=0;p<h["!cols"].length;++p)if(h["!cols"][p]){var m=h["!cols"][p];if(m.width==null&&m.wpx==null&&m.wch==null)continue;eN(m),m.ods=d;var g=h["!cols"][p].wpx+"px";i.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),i.push(`  </style:style>
`),++d}}});var u=0;l.SheetNames.map(function(h){return l.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var p=0;p<h["!rows"].length;++p)if(h["!rows"][p]){h["!rows"][p].ods=u;var m=h["!rows"][p].hpx+"px";i.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),i.push(`  </style:style>
`),++u}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,d){var u=[_n],h=pf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=pf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(u.push("<office:document"+h+p+`>
`),u.push(kP().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+h+`>
`),s(u,l),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var m=0;m!=l.SheetNames.length;++m)u.push(a(l.Sheets[l.SheetNames[m]],l,m));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),d.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function x9(e,t){if(t.bookType=="fods")return BI(e,t);var n=qS(),a="",s=[],i=[];return a="mimetype",ir(n,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",ir(n,a,BI(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",ir(n,a,Ihe(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",ir(n,a,_n+kP()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",ir(n,a,Wie(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",ir(n,a,Uie(s)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ex(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Dhe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Zs(ff(e))}function Rhe(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var a=0;a<t.length;++a)if(e[n+a]!=t[a])continue e;return!0}return!1}function Jo(e){var t=e.reduce(function(s,i){return s+i.length},0),n=new Uint8Array(t),a=0;return e.forEach(function(s){n.set(s,a),a+=s.length}),n}function Phe(e,t,n){var a=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=n>=0?0:128}function mf(e,t){var n=t?t[0]:0,a=e[n]&127;e:if(e[n++]>=128&&(a|=(e[n]&127)<<7,e[n++]<128||(a|=(e[n]&127)<<14,e[n++]<128)||(a|=(e[n]&127)<<21,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,28),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,35),++n,e[n++]<128)||(a+=(e[n]&127)*Math.pow(2,42),++n,e[n++]<128)))break e;return t&&(t[0]=n),a}function Mr(e){var t=new Uint8Array(7);t[0]=e&127;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383||(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)||(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)||(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)||(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103))break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function id(e){var t=0,n=e[t]&127;e:if(e[t++]>=128){if(n|=(e[t]&127)<<7,e[t++]<128||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128))break e;n|=(e[t]&127)<<28}return n}function Pn(e){for(var t=[],n=[0];n[0]<e.length;){var a=n[0],s=mf(e,n),i=s&7;s=Math.floor(s/8);var l=0,d;if(s==0)break;switch(i){case 0:{for(var u=n[0];e[n[0]++]>=128;);d=e.slice(u,n[0])}break;case 5:l=4,d=e.slice(n[0],n[0]+l),n[0]+=l;break;case 1:l=8,d=e.slice(n[0],n[0]+l),n[0]+=l;break;case 2:l=mf(e,n),d=e.slice(n[0],n[0]+l),n[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var h={data:d,type:i};t[s]==null?t[s]=[h]:t[s].push(h)}return t}function ta(e){var t=[];return e.forEach(function(n,a){n.forEach(function(s){s.data&&(t.push(Mr(a*8+s.type)),s.type==2&&t.push(Mr(s.data.length)),t.push(s.data))})}),Jo(t)}function Hs(e){for(var t,n=[],a=[0];a[0]<e.length;){var s=mf(e,a),i=Pn(e.slice(a[0],a[0]+s));a[0]+=s;var l={id:id(i[1][0].data),messages:[]};i[2].forEach(function(d){var u=Pn(d.data),h=id(u[3][0].data);l.messages.push({meta:u,data:e.slice(a[0],a[0]+h)}),a[0]+=h}),(t=i[3])!=null&&t[0]&&(l.merge=id(i[3][0].data)>>>0>0),n.push(l)}return n}function Wc(e){var t=[];return e.forEach(function(n){var a=[];a[1]=[{data:Mr(n.id),type:0}],a[2]=[],n.merge!=null&&(a[3]=[{data:Mr(+!!n.merge),type:0}]);var s=[];n.messages.forEach(function(l){s.push(l.data),l.meta[3]=[{type:0,data:Mr(l.data.length)}],a[2].push({data:ta(l.meta),type:2})});var i=ta(a);t.push(Mr(i.length)),t.push(i),s.forEach(function(l){return t.push(l)})}),Jo(t)}function Mhe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],a=mf(t,n),s=[];n[0]<t.length;){var i=t[n[0]]&3;if(i==0){var l=t[n[0]++]>>2;if(l<60)++l;else{var d=l-59;l=t[n[0]],d>1&&(l|=t[n[0]+1]<<8),d>2&&(l|=t[n[0]+2]<<16),d>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=d}s.push(t.slice(n[0],n[0]+l)),n[0]+=l;continue}else{var u=0,h=0;if(i==1?(h=(t[n[0]]>>2&7)+4,u=(t[n[0]++]&224)<<3,u|=t[n[0]++]):(h=(t[n[0]++]>>2)+1,i==2?(u=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(u=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),s=[Jo(s)],u==0)throw new Error("Invalid offset 0");if(u>s[0].length)throw new Error("Invalid offset beyond length");if(h>=u)for(s.push(s[0].slice(-u)),h-=u;h>=s[s.length-1].length;)s.push(s[s.length-1]),h-=s[s.length-1].length;s.push(s[0].slice(-u,-u+h))}}var p=Jo(s);if(p.length!=a)throw new Error("Unexpected length: ".concat(p.length," != ").concat(a));return p}function Gs(e){for(var t=[],n=0;n<e.length;){var a=e[n++],s=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(Mhe(a,e.slice(n,n+s))),n+=s}if(n!==e.length)throw new Error("data is not a valid framed stream!");return Jo(t)}function Hc(e){for(var t=[],n=0;n<e.length;){var a=Math.min(e.length-n,268435455),s=new Uint8Array(4);t.push(s);var i=Mr(a),l=i.length;t.push(i),a<=60?(l++,t.push(new Uint8Array([a-1<<2]))):a<=256?(l+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(l+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(l+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(l+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(n,n+a)),l+=a,s[0]=0,s[1]=l&255,s[2]=l>>8&255,s[3]=l>>16&255,n+=a}return Jo(t)}function Pj(e,t){var n=new Uint8Array(32),a=Ex(n),s=12,i=0;switch(n[0]=5,e.t){case"n":n[1]=2,Phe(n,s,e.v),i|=1,s+=16;break;case"b":n[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),n.slice(0,s)}function Mj(e,t){var n=new Uint8Array(32),a=Ex(n),s=12,i=0;switch(n[0]=3,e.t){case"n":n[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":n[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),n.slice(0,s)}function Fo(e){var t=Pn(e);return mf(t[1][0].data)}function Bhe(e,t,n){var a,s,i,l;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var d=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&id(e[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var u=0,h=Ex(e[7][0].data),p=0,m=[],g=Ex(e[4][0].data),b=0,j=[],v=0;v<t.length;++v){if(t[v]==null){h.setUint16(v*2,65535,!0),g.setUint16(v*2,65535);continue}h.setUint16(v*2,p,!0),g.setUint16(v*2,b,!0);var y,A;switch(typeof t[v]){case"string":y=Pj({t:"s",v:t[v]},n),A=Mj({t:"s",v:t[v]},n);break;case"number":y=Pj({t:"n",v:t[v]},n),A=Mj({t:"n",v:t[v]},n);break;case"boolean":y=Pj({t:"b",v:t[v]},n),A=Mj({t:"b",v:t[v]},n);break;default:throw new Error("Unsupported value "+t[v])}m.push(y),p+=y.length,j.push(A),b+=A.length,++u}for(e[2][0].data=Mr(u);v<e[7][0].data.length/2;++v)h.setUint16(v*2,65535,!0),g.setUint16(v*2,65535,!0);return e[6][0].data=Jo(m),e[3][0].data=Jo(j),u}function Fhe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=ms(n["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(En(a)));var i=Ox(n,{range:a,header:1}),l=["~Sh33tJ5~"];i.forEach(function(X){return X.forEach(function(H){typeof H=="string"&&l.push(H)})});var d={},u=[],h=Vr.read(t.numbers,{type:"base64"});h.FileIndex.map(function(X,H){return[X,h.FullPaths[H]]}).forEach(function(X){var H=X[0],Q=X[1];if(H.type==2&&H.name.match(/\.iwa/)){var le=H.content,me=Gs(le),je=Hs(me);je.forEach(function(ee){u.push(ee.id),d[ee.id]={deps:[],location:Q,type:id(ee.messages[0].meta[1][0].data)}})}}),u.sort(function(X,H){return X-H});var p=u.filter(function(X){return X>1}).map(function(X){return[X,Mr(X)]});h.FileIndex.map(function(X,H){return[X,h.FullPaths[H]]}).forEach(function(X){var H=X[0];if(X[1],!!H.name.match(/\.iwa/)){var Q=Hs(Gs(H.content));Q.forEach(function(le){le.messages.forEach(function(me){p.forEach(function(je){le.messages.some(function(ee){return id(ee.meta[1][0].data)!=11006&&Rhe(ee.data,je[1])})&&d[je[0]].deps.push(le.id)})})})}});for(var m=Vr.find(h,d[1].location),g=Hs(Gs(m.content)),b,j=0;j<g.length;++j){var v=g[j];v.id==1&&(b=v)}var y=Fo(Pn(b.messages[0].data)[1][0].data);for(m=Vr.find(h,d[y].location),g=Hs(Gs(m.content)),j=0;j<g.length;++j)v=g[j],v.id==y&&(b=v);for(y=Fo(Pn(b.messages[0].data)[2][0].data),m=Vr.find(h,d[y].location),g=Hs(Gs(m.content)),j=0;j<g.length;++j)v=g[j],v.id==y&&(b=v);for(y=Fo(Pn(b.messages[0].data)[2][0].data),m=Vr.find(h,d[y].location),g=Hs(Gs(m.content)),j=0;j<g.length;++j)v=g[j],v.id==y&&(b=v);var A=Pn(b.messages[0].data);{A[6][0].data=Mr(a.e.r+1),A[7][0].data=Mr(a.e.c+1);var E=Fo(A[46][0].data),O=Vr.find(h,d[E].location),S=Hs(Gs(O.content));{for(var C=0;C<S.length&&S[C].id!=E;++C);if(S[C].id!=E)throw"Bad ColumnRowUIDMapArchive";var k=Pn(S[C].messages[0].data);k[1]=[],k[2]=[],k[3]=[];for(var I=0;I<=a.e.c;++I){var z=[];z[1]=z[2]=[{type:0,data:Mr(I+420690)}],k[1].push({type:2,data:ta(z)}),k[2].push({type:0,data:Mr(I)}),k[3].push({type:0,data:Mr(I)})}k[4]=[],k[5]=[],k[6]=[];for(var B=0;B<=a.e.r;++B)z=[],z[1]=z[2]=[{type:0,data:Mr(B+726270)}],k[4].push({type:2,data:ta(z)}),k[5].push({type:0,data:Mr(B)}),k[6].push({type:0,data:Mr(B)});S[C].messages[0].data=ta(k)}O.content=Hc(Wc(S)),O.size=O.content.length,delete A[46];var M=Pn(A[4][0].data);{M[7][0].data=Mr(a.e.r+1);var F=Pn(M[1][0].data),N=Fo(F[2][0].data);O=Vr.find(h,d[N].location),S=Hs(Gs(O.content));{if(S[0].id!=N)throw"Bad HeaderStorageBucket";var L=Pn(S[0].messages[0].data);for(B=0;B<i.length;++B){var P=Pn(L[2][0].data);P[1][0].data=Mr(B),P[4][0].data=Mr(i[B].length),L[2][B]={type:L[2][0].type,data:ta(P)}}S[0].messages[0].data=ta(L)}O.content=Hc(Wc(S)),O.size=O.content.length;var _=Fo(M[2][0].data);O=Vr.find(h,d[_].location),S=Hs(Gs(O.content));{if(S[0].id!=_)throw"Bad HeaderStorageBucket";for(L=Pn(S[0].messages[0].data),I=0;I<=a.e.c;++I)P=Pn(L[2][0].data),P[1][0].data=Mr(I),P[4][0].data=Mr(a.e.r+1),L[2][I]={type:L[2][0].type,data:ta(P)};S[0].messages[0].data=ta(L)}O.content=Hc(Wc(S)),O.size=O.content.length;var R=Fo(M[4][0].data);(function(){for(var X=Vr.find(h,d[R].location),H=Hs(Gs(X.content)),Q,le=0;le<H.length;++le){var me=H[le];me.id==R&&(Q=me)}var je=Pn(Q.messages[0].data);{je[3]=[];var ee=[];l.forEach(function(ue,We){ee[1]=[{type:0,data:Mr(We)}],ee[2]=[{type:0,data:Mr(1)}],ee[3]=[{type:2,data:Dhe(ue)}],je[3].push({type:2,data:ta(ee)})})}Q.messages[0].data=ta(je);var se=Wc(H),fe=Hc(se);X.content=fe,X.size=X.content.length})();var W=Pn(M[3][0].data);{var G=W[1][0];delete W[2];var oe=Pn(G.data);{var q=Fo(oe[2][0].data);(function(){for(var X=Vr.find(h,d[q].location),H=Hs(Gs(X.content)),Q,le=0;le<H.length;++le){var me=H[le];me.id==q&&(Q=me)}var je=Pn(Q.messages[0].data);{delete je[6],delete W[7];var ee=new Uint8Array(je[5][0].data);je[5]=[];for(var se=0,fe=0;fe<=a.e.r;++fe){var ue=Pn(ee);se+=Bhe(ue,i[fe],l),ue[1][0].data=Mr(fe),je[5].push({data:ta(ue),type:2})}je[1]=[{type:0,data:Mr(a.e.c+1)}],je[2]=[{type:0,data:Mr(a.e.r+1)}],je[3]=[{type:0,data:Mr(se)}],je[4]=[{type:0,data:Mr(a.e.r+1)}]}Q.messages[0].data=ta(je);var We=Wc(H),we=Hc(We);X.content=we,X.size=X.content.length})()}G.data=ta(oe)}M[3][0].data=ta(W)}A[4][0].data=ta(M)}b.messages[0].data=ta(A);var V=Wc(g),U=Hc(V);return m.content=U,m.size=m.content.length,h}function Lhe(e){return function(n){for(var a=0;a!=e.length;++a){var s=e[a];n[s[0]]===void 0&&(n[s[0]]=s[1]),s[2]==="n"&&(n[s[0]]=Number(n[s[0]]))}}}function sN(e){Lhe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function $he(e,t){return t.bookType=="ods"?x9(e,t):t.bookType=="numbers"?Fhe(e,t):t.bookType=="xlsb"?zhe(e,t):Uhe(e,t)}function zhe(e,t){Qc=1024,e&&!e.SSF&&(e.SSF=Va(xn)),e&&e.SSF&&(b0(),y0(e.SSF),t.revssf=v0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,wh?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n=t.bookType=="xlsb"?"bin":"xml",a=JP.indexOf(t.bookType)>-1,s=AP();sN(t=t||{});var i=qS(),l="",d=0;if(t.cellXfs=[],al(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",ir(i,l,_P(e.Props,t)),s.coreprops.push(l),Br(t.rels,2,l,Sr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],h=0;h<e.SheetNames.length;++h)(e.Workbook.Sheets[h]||{}).Hidden!=2&&u.push(e.SheetNames[h]);e.Props.SheetNames=u}for(e.Props.Worksheets=e.Props.SheetNames.length,ir(i,l,DP(e.Props)),s.extprops.push(l),Br(t.rels,3,l,Sr.EXT_PROPS),e.Custprops!==e.Props&&da(e.Custprops||{}).length>0&&(l="docProps/custom.xml",ir(i,l,RP(e.Custprops)),s.custprops.push(l),Br(t.rels,4,l,Sr.CUST_PROPS)),d=1;d<=e.SheetNames.length;++d){var p={"!id":{}},m=e.Sheets[e.SheetNames[d-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:l="xl/worksheets/sheet"+d+"."+n,ir(i,l,Wue(d-1,l,t,e,p)),s.sheets.push(l),Br(t.wbrels,-1,"worksheets/sheet"+d+"."+n,Sr.WS[0])}if(m){var b=m["!comments"],j=!1,v="";b&&b.length>0&&(v="xl/comments"+d+"."+n,ir(i,v,Kue(b,v)),s.comments.push(v),Br(p,-1,"../comments"+d+"."+n,Sr.CMNT),j=!0),m["!legacy"]&&j&&ir(i,"xl/drawings/vmlDrawing"+d+".vml",XP(d,m["!comments"])),delete m["!comments"],delete m["!legacy"]}p["!id"].rId1&&ir(i,OP(l),ad(p))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+n,ir(i,l,Gue(t.Strings,l,t)),s.strs.push(l),Br(t.wbrels,-1,"sharedStrings."+n,Sr.SST)),l="xl/workbook."+n,ir(i,l,que(e,l)),s.workbooks.push(l),Br(t.rels,1,l,Sr.WB),l="xl/theme/theme1.xml",ir(i,l,VP(e.Themes,t)),s.themes.push(l),Br(t.wbrels,-1,"theme/theme1.xml",Sr.THEME),l="xl/styles."+n,ir(i,l,Hue(e,l,t)),s.styles.push(l),Br(t.wbrels,-1,"styles."+n,Sr.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",ir(i,l,e.vbaraw),s.vba.push(l),Br(t.wbrels,-1,"vbaProject.bin",Sr.VBA)),l="xl/metadata."+n,ir(i,l,Vue(l)),s.metadata.push(l),Br(t.wbrels,-1,"metadata."+n,Sr.XLMETA),ir(i,"[Content_Types].xml",EP(s,t)),ir(i,"_rels/.rels",ad(t.rels)),ir(i,"xl/_rels/workbook."+n+".rels",ad(t.wbrels)),delete t.revssf,delete t.ssf,i}function Uhe(e,t){Qc=1024,e&&!e.SSF&&(e.SSF=Va(xn)),e&&e.SSF&&(b0(),y0(e.SSF),t.revssf=v0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,wh?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",a=JP.indexOf(t.bookType)>-1,s=AP();sN(t=t||{});var i=qS(),l="",d=0;if(t.cellXfs=[],al(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",ir(i,l,_P(e.Props,t)),s.coreprops.push(l),Br(t.rels,2,l,Sr.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var u=[],h=0;h<e.SheetNames.length;++h)(e.Workbook.Sheets[h]||{}).Hidden!=2&&u.push(e.SheetNames[h]);e.Props.SheetNames=u}e.Props.Worksheets=e.Props.SheetNames.length,ir(i,l,DP(e.Props)),s.extprops.push(l),Br(t.rels,3,l,Sr.EXT_PROPS),e.Custprops!==e.Props&&da(e.Custprops||{}).length>0&&(l="docProps/custom.xml",ir(i,l,RP(e.Custprops)),s.custprops.push(l),Br(t.rels,4,l,Sr.CUST_PROPS));var p=["SheetJ5"];for(t.tcid=0,d=1;d<=e.SheetNames.length;++d){var m={"!id":{}},g=e.Sheets[e.SheetNames[d-1]],b=(g||{})["!type"]||"sheet";switch(b){case"chart":default:l="xl/worksheets/sheet"+d+"."+n,ir(i,l,o9(d-1,t,e,m)),s.sheets.push(l),Br(t.wbrels,-1,"worksheets/sheet"+d+"."+n,Sr.WS[0])}if(g){var j=g["!comments"],v=!1,y="";if(j&&j.length>0){var A=!1;j.forEach(function(E){E[1].forEach(function(O){O.T==!0&&(A=!0)})}),A&&(y="xl/threadedComments/threadedComment"+d+"."+n,ir(i,y,ble(j,p,t)),s.threadedcomments.push(y),Br(m,-1,"../threadedComments/threadedComment"+d+"."+n,Sr.TCMNT)),y="xl/comments"+d+"."+n,ir(i,y,QP(j)),s.comments.push(y),Br(m,-1,"../comments"+d+"."+n,Sr.CMNT),v=!0}g["!legacy"]&&v&&ir(i,"xl/drawings/vmlDrawing"+d+".vml",XP(d,g["!comments"])),delete g["!comments"],delete g["!legacy"]}m["!id"].rId1&&ir(i,OP(l),ad(m))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+n,ir(i,l,UP(t.Strings,t)),s.strs.push(l),Br(t.wbrels,-1,"sharedStrings."+n,Sr.SST)),l="xl/workbook."+n,ir(i,l,d9(e)),s.workbooks.push(l),Br(t.rels,1,l,Sr.WB),l="xl/theme/theme1.xml",ir(i,l,VP(e.Themes,t)),s.themes.push(l),Br(t.wbrels,-1,"theme/theme1.xml",Sr.THEME),l="xl/styles."+n,ir(i,l,GP(e,t)),s.styles.push(l),Br(t.wbrels,-1,"styles."+n,Sr.STY),e.vbaraw&&a&&(l="xl/vbaProject.bin",ir(i,l,e.vbaraw),s.vba.push(l),Br(t.wbrels,-1,"vbaProject.bin",Sr.VBA)),l="xl/metadata."+n,ir(i,l,YP()),s.metadata.push(l),Br(t.wbrels,-1,"metadata."+n,Sr.XLMETA),p.length>1&&(l="xl/persons/person.xml",ir(i,l,vle(p)),s.people.push(l),Br(t.wbrels,-1,"persons/person.xml",Sr.PEOPLE)),ir(i,"[Content_Types].xml",EP(s,t)),ir(i,"_rels/.rels",ad(t.rels)),ir(i,"xl/_rels/workbook."+n+".rels",ad(t.wbrels)),delete t.revssf,delete t.ssf,i}function qhe(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=oo(e.slice(0,12));break;case"binary":n=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function g9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return If(t.file,Vr.write(e,{type:Er?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Vr.write(e,t)}function Whe(e,t){var n=Va(t||{}),a=$he(e,n);return Hhe(a,n)}function Hhe(e,t){var n={},a=Er?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=a;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Vr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(g0(s))}return t.password&&typeof encrypt_agile<"u"?g9(encrypt_agile(s,t.password),t):t.type==="file"?If(t.file,s):t.type=="string"?yh(s):s}function Ghe(e,t){var n=t||{},a=lhe(e,n);return g9(a,n)}function yi(e,t,n){n||(n="");var a=n+e;switch(t.type){case"base64":return uf(ff(a));case"binary":return ff(a);case"string":return e;case"file":return If(t.file,a,"utf8");case"buffer":return Er?po(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):yi(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Khe(e,t){switch(t.type){case"base64":return uf(e);case"binary":return e;case"string":return e;case"file":return If(t.file,e,"binary");case"buffer":return Er?po(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function im(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",a=0;a<e.length;++a)n+=String.fromCharCode(e[a]);return t.type=="base64"?uf(n):t.type=="string"?yh(n):n;case"file":return If(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function y9(e,t){jse(),Iue(e);var n=Va(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var a=y9(e,n);return n.type="array",g0(a)}var s=0;if(n.sheet&&(typeof n.sheet=="number"?s=n.sheet:s=e.SheetNames.indexOf(n.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return yi(ihe(e,n),n);case"slk":case"sylk":return yi(Ooe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"htm":case"html":return yi(f9(e.Sheets[e.SheetNames[s]],n),n);case"txt":return Khe(b9(e.Sheets[e.SheetNames[s]],n),n);case"csv":return yi(oN(e.Sheets[e.SheetNames[s]],n),n,"\uFEFF");case"dif":return yi(koe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"dbf":return im(Eoe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"prn":return yi(_oe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"rtf":return yi(Foe.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"eth":return yi(zP.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"fods":return yi(x9(e,n),n);case"wk1":return im(kI.sheet_to_wk1(e.Sheets[e.SheetNames[s]],n),n);case"wk3":return im(kI.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),im(h9(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),Ghe(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Whe(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Vhe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(e.bookType=n.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function iN(e,t,n){var a={};return a.type="file",a.file=t,Vhe(a),y9(e,a)}function Yhe(e,t,n,a,s,i,l,d){var u=la(n),h=d.defval,p=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),m=!0,g=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:n,enumerable:!1})}catch{g.__rowNum__=n}else g.__rowNum__=n;if(!l||e[n])for(var b=t.s.c;b<=t.e.c;++b){var j=l?e[n][b]:e[a[b]+u];if(j===void 0||j.t===void 0){if(h===void 0)continue;i[b]!=null&&(g[i[b]]=h);continue}var v=j.v;switch(j.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+j.t)}if(i[b]!=null){if(v==null)if(j.t=="e"&&v===null)g[i[b]]=null;else if(h!==void 0)g[i[b]]=h;else if(p&&v===null)g[i[b]]=null;else continue;else g[i[b]]=p&&(j.t!=="n"||j.t==="n"&&d.rawNumbers!==!1)?v:lo(j,v,d);v!=null&&(m=!1)}}return{row:g,isempty:m}}function Ox(e,t){if(e==null||e["!ref"]==null)return[];var n={t:"n",v:0},a=0,s=1,i=[],l=0,d="",u={s:{r:0,c:0},e:{r:0,c:0}},h=t||{},p=h.range!=null?h.range:e["!ref"];switch(h.header===1?a=1:h.header==="A"?a=2:Array.isArray(h.header)?a=3:h.header==null&&(a=0),typeof p){case"string":u=nn(p);break;case"number":u=nn(e["!ref"]),u.s.r=p;break;default:u=p}a>0&&(s=0);var m=la(u.s.r),g=[],b=[],j=0,v=0,y=Array.isArray(e),A=u.s.r,E=0,O={};y&&!e[A]&&(e[A]=[]);var S=h.skipHidden&&e["!cols"]||[],C=h.skipHidden&&e["!rows"]||[];for(E=u.s.c;E<=u.e.c;++E)if(!(S[E]||{}).hidden)switch(g[E]=ja(E),n=y?e[A][E]:e[g[E]+m],a){case 1:i[E]=E-u.s.c;break;case 2:i[E]=g[E];break;case 3:i[E]=h.header[E-u.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),d=l=lo(n,null,h),v=O[l]||0,!v)O[l]=1;else{do d=l+"_"+v++;while(O[d]);O[l]=v,O[d]=1}i[E]=d}for(A=u.s.r+s;A<=u.e.r;++A)if(!(C[A]||{}).hidden){var k=Yhe(e,u,A,g,a,i,y,h);(k.isempty===!1||(a===1?h.blankrows!==!1:h.blankrows))&&(b[j++]=k.row)}return b.length=j,b}var FI=/"/g;function Xhe(e,t,n,a,s,i,l,d){for(var u=!0,h=[],p="",m=la(n),g=t.s.c;g<=t.e.c;++g)if(a[g]){var b=d.dense?(e[n]||[])[g]:e[a[g]+m];if(b==null)p="";else if(b.v!=null){u=!1,p=""+(d.rawNumbers&&b.t=="n"?b.v:lo(b,null,d));for(var j=0,v=0;j!==p.length;++j)if((v=p.charCodeAt(j))===s||v===i||v===34||d.forceQuotes){p='"'+p.replace(FI,'""')+'"';break}p=="ID"&&(p='"ID"')}else b.f!=null&&!b.F?(u=!1,p="="+b.f,p.indexOf(",")>=0&&(p='"'+p.replace(FI,'""')+'"')):p="";h.push(p)}return d.blankrows===!1&&u?null:h.join(l)}function oN(e,t){var n=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=nn(e["!ref"]),i=a.FS!==void 0?a.FS:",",l=i.charCodeAt(0),d=a.RS!==void 0?a.RS:`
`,u=d.charCodeAt(0),h=new RegExp((i=="|"?"\\|":i)+"+$"),p="",m=[];a.dense=Array.isArray(e);for(var g=a.skipHidden&&e["!cols"]||[],b=a.skipHidden&&e["!rows"]||[],j=s.s.c;j<=s.e.c;++j)(g[j]||{}).hidden||(m[j]=ja(j));for(var v=0,y=s.s.r;y<=s.e.r;++y)(b[y]||{}).hidden||(p=Xhe(e,s,y,m,l,u,i,a),p!=null&&(a.strip&&(p=p.replace(h,"")),(p||a.blankrows!==!1)&&n.push((v++?d:"")+p)));return delete a.dense,n.join("")}function b9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var n=oN(e,t);return n}function Qhe(e){var t="",n,a="";if(e==null||e["!ref"]==null)return[];var s=nn(e["!ref"]),i="",l=[],d,u=[],h=Array.isArray(e);for(d=s.s.c;d<=s.e.c;++d)l[d]=ja(d);for(var p=s.s.r;p<=s.e.r;++p)for(i=la(p),d=s.s.c;d<=s.e.c;++d)if(t=l[d]+i,n=h?(e[p]||[])[d]:e[t],a="",n!==void 0){if(n.F!=null){if(t=n.F,!n.f)continue;a=n.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(n.f!=null)a=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}u[u.length]=t+"="+a}return u}function v9(e,t,n){var a=n||{},s=+!a.skipHeader,i=e||{},l=0,d=0;if(i&&a.origin!=null)if(typeof a.origin=="number")l=a.origin;else{var u=typeof a.origin=="string"?Gn(a.origin):a.origin;l=u.r,d=u.c}var h,p={s:{c:0,r:0},e:{c:d,r:l+t.length-1+s}};if(i["!ref"]){var m=nn(i["!ref"]);p.e.c=Math.max(p.e.c,m.e.c),p.e.r=Math.max(p.e.r,m.e.r),l==-1&&(l=m.e.r+1,p.e.r=l+t.length-1+s)}else l==-1&&(l=0,p.e.r=t.length-1+s);var g=a.header||[],b=0;t.forEach(function(v,y){da(v).forEach(function(A){(b=g.indexOf(A))==-1&&(g[b=g.length]=A);var E=v[A],O="z",S="",C=Lr({c:d+b,r:l+y+s});h=xf(i,C),E&&typeof E=="object"&&!(E instanceof Date)?i[C]=E:(typeof E=="number"?O="n":typeof E=="boolean"?O="b":typeof E=="string"?O="s":E instanceof Date?(O="d",a.cellDates||(O="n",E=Ka(E)),S=a.dateNF||xn[14]):E===null&&a.nullError&&(O="e",E=0),h?(h.t=O,h.v=E,delete h.w,delete h.R,S&&(h.z=S)):i[C]=h={t:O,v:E},S&&(h.z=S))})}),p.e.c=Math.max(p.e.c,d+g.length-1);var j=la(l);if(s)for(b=0;b<g.length;++b)i[ja(b+d)+j]={t:"s",v:g[b]};return i["!ref"]=En(p),i}function Jhe(e,t){return v9(null,e,t)}function xf(e,t,n){if(typeof t=="string"){if(Array.isArray(e)){var a=Gn(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?xf(e,Lr(t)):xf(e,Lr({r:t,c:n||0}))}function Zhe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function efe(){return{SheetNames:[],Sheets:{}}}function tfe(e,t,n,a){var s=1;if(!n)for(;s<=65535&&e.SheetNames.indexOf(n="Sheet"+s)!=-1;++s,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(n)>=0){var i=n.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var l=i&&i[1]||n;for(++s;s<=65535&&e.SheetNames.indexOf(n=l+s)!=-1;++s);}if(c9(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function rfe(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=Zhe(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[a].Hidden=n}function nfe(e,t){return e.z=t,e}function j9(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}function afe(e,t,n){return j9(e,"#"+t,n)}function sfe(e,t,n){e.c||(e.c=[]),e.c.push({t,a:n||"SheetJS"})}function ife(e,t,n,a){for(var s=typeof t!="string"?t:nn(t),i=typeof t=="string"?t:En(t),l=s.s.r;l<=s.e.r;++l)for(var d=s.s.c;d<=s.e.c;++d){var u=xf(e,l,d);u.t="n",u.F=i,delete u.v,l==s.s.r&&d==s.s.c&&(u.f=n,a&&(u.D=!0))}return e}var to={encode_col:ja,encode_row:la,encode_cell:Lr,encode_range:En,decode_col:YS,decode_row:VS,split_cell:jie,decode_cell:Gn,decode_range:ms,format_cell:lo,sheet_add_aoa:jP,sheet_add_json:v9,sheet_add_dom:p9,aoa_to_sheet:Jd,json_to_sheet:Jhe,table_to_sheet:m9,table_to_book:khe,sheet_to_csv:oN,sheet_to_txt:b9,sheet_to_json:Ox,sheet_to_html:f9,sheet_to_formulae:Qhe,sheet_to_row_object_array:Ox,sheet_get_cell:xf,book_new:efe,book_append_sheet:tfe,book_set_sheet_visibility:rfe,cell_set_number_format:nfe,cell_set_hyperlink:j9,cell_set_internal_link:afe,cell_add_comment:sfe,sheet_set_array_formula:ife,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Tl="https://hotelvirat.com/api/v1/hotel",w9=e=>{if(!e)return null;if(e.startsWith("http"))return e;const t="https://hotelvirat.com";let n=e.replace(/\\/g,"/");n.startsWith("/")&&(n=n.substring(1));const a=`${t}/${n}`;return console.log("Image URL:",e,"->",a),a},S9=[{key:"tv",label:"TV"},{key:"ac",label:"AC"},{key:"wifi",label:"WiFi"},{key:"minibar",label:"Mini Bar"},{key:"roomService",label:"Room Service"},{key:"balcony",label:"Balcony"},{key:"bathtub",label:"Bathtub"},{key:"shower",label:"Shower"},{key:"hairDryer",label:"Hair Dryer"},{key:"safe",label:"Safe"},{key:"telephone",label:"Telephone"},{key:"coffeeMaker",label:"Coffee Maker"},{key:"iron",label:"Iron"},{key:"workspace",label:"Workspace"},{key:"parking",label:"Parking"}],ofe=["Single","Double","Suite","Deluxe","Family","Presidential"],lfe=["First Floor","Second Floor"],cfe=({room:e,branches:t,onClose:n,onSave:a})=>{var O;const[s,i]=w.useState({branchId:((O=e==null?void 0:e.branchId)==null?void 0:O._id)||(e==null?void 0:e.branchId)||"",floor:(e==null?void 0:e.floor)||"First Floor",roomType:(e==null?void 0:e.roomType)||"Single",price:(e==null?void 0:e.price)||"",description:(e==null?void 0:e.description)||"",roomNumber:(e==null?void 0:e.roomNumber)||"",amenities:(e==null?void 0:e.amenities)||{},capacity:(e==null?void 0:e.capacity)||{adults:2,children:0},isAvailable:(e==null?void 0:e.isAvailable)!==!1}),[l,d]=w.useState([]),[u,h]=w.useState((e==null?void 0:e.images)||[]),[p,m]=w.useState(!1),[g,b]=w.useState(""),j=S=>{const{name:C,value:k,type:I,checked:z}=S.target;if(C.startsWith("amenities.")){const B=C.split(".")[1];i(M=>({...M,amenities:{...M.amenities,[B]:z}}))}else if(C.startsWith("capacity.")){const B=C.split(".")[1];i(M=>({...M,capacity:{...M.capacity,[B]:Number(k)}}))}else i(B=>({...B,[C]:I==="checkbox"?z:k}))},v=S=>{const C=Array.from(S.target.files);if(u.length+l.length+C.length>5){b("Maximum 5 images allowed");return}b(""),d(I=>[...I,...C])},y=S=>{d(C=>C.filter((k,I)=>I!==S))},A=S=>{h(C=>C.filter((k,I)=>I!==S))},E=async S=>{S.preventDefault(),m(!0),b("");try{const C=new FormData;C.append("branchId",s.branchId),C.append("floor",s.floor),C.append("roomType",s.roomType),C.append("price",s.price),C.append("description",s.description),C.append("roomNumber",s.roomNumber),C.append("amenities",JSON.stringify(s.amenities)),C.append("capacity",JSON.stringify(s.capacity)),C.append("isAvailable",s.isAvailable),C.append("existingImages",JSON.stringify(u)),l.forEach(k=>C.append("images",k)),await a(C),n()}catch(C){b(C.message||"Failed to save room")}finally{m(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"700px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:e?"Edit Room":"Add New Room"}),r.jsx("button",{className:"modal-close",onClick:n,children:""})]}),r.jsxs("form",{onSubmit:E,children:[r.jsxs("div",{className:"modal-body",children:[g&&r.jsxs("div",{className:"error-message",style:{marginBottom:"15px",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{children:g})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Room Images (Max 5)"}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"10px"},children:[u.map((S,C)=>r.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[r.jsx("img",{src:w9(S),alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}),r.jsx("button",{type:"button",onClick:()=>A(C),style:{position:"absolute",top:"-5px",right:"-5px",background:"#dc2626",border:"none",borderRadius:"50%",width:"24px",height:"24px",color:"white",cursor:"pointer"},children:r.jsx(On,{size:14})})]},`existing-${C}`)),l.map((S,C)=>r.jsxs("div",{style:{position:"relative",width:"100px",height:"100px"},children:[r.jsx("img",{src:URL.createObjectURL(S),alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"}}),r.jsx("button",{type:"button",onClick:()=>y(C),style:{position:"absolute",top:"-5px",right:"-5px",background:"#dc2626",border:"none",borderRadius:"50%",width:"24px",height:"24px",color:"white",cursor:"pointer"},children:r.jsx(On,{size:14})})]},`new-${C}`)),u.length+l.length<5&&r.jsxs("label",{style:{width:"100px",height:"100px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:[r.jsx(qi,{size:20}),r.jsx("span",{style:{fontSize:"12px"},children:"Add"}),r.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:v,style:{display:"none"}})]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Branch ",r.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),r.jsxs("select",{name:"branchId",className:"form-input",value:s.branchId,onChange:j,required:!0,children:[r.jsx("option",{value:"",children:"Select Branch"}),t.map(S=>r.jsx("option",{value:S._id,children:S.name},S._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Floor ",r.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),r.jsx("select",{name:"floor",className:"form-input",value:s.floor,onChange:j,required:!0,children:lfe.map(S=>r.jsx("option",{value:S,children:S},S))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Room Type"}),r.jsx("select",{name:"roomType",className:"form-input",value:s.roomType,onChange:j,children:ofe.map(S=>r.jsx("option",{value:S,children:S},S))})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:["Basic Price (without GST) ",r.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),r.jsx("input",{type:"number",name:"price",className:"form-input",value:s.price,onChange:j,required:!0,placeholder:"Enter price without GST"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Room Number"}),r.jsx("input",{type:"text",name:"roomNumber",className:"form-input",value:s.roomNumber,onChange:j})]}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("input",{type:"checkbox",name:"isAvailable",checked:s.isAvailable,onChange:j}),"Available"]})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",className:"form-textarea",value:s.description,onChange:j,rows:"2"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Adults Capacity"}),r.jsx("input",{type:"number",name:"capacity.adults",className:"form-input",value:s.capacity.adults,onChange:j,min:"1"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Children Capacity"}),r.jsx("input",{type:"number",name:"capacity.children",className:"form-input",value:s.capacity.children,onChange:j,min:"0"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Amenities"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:S9.map(S=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",name:`amenities.${S.key}`,checked:s.amenities[S.key]||!1,onChange:j}),S.label]},S.key))})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:n,disabled:p,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Saving...":e?"Update Room":"Add Room"})]})]})]})})},dfe=({room:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),i=async()=>{s(!0);try{await n(e._id),t()}catch(l){console.error(l)}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Room"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete ",r.jsxs("strong",{children:[e.floor," - Room #",e.roomNumber||"N/A"]}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{className:"btn",style:{backgroundColor:"#dc2626",color:"white"},onClick:i,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},ufe=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(""),[l,d]=w.useState(""),[u,h]=w.useState(!1),[p,m]=w.useState(null),[g,b]=w.useState(!1),[j,v]=w.useState(null),[y,A]=w.useState(!0),[E,O]=w.useState(""),[S,C]=w.useState(""),[k,I]=w.useState({}),[z,B]=w.useState([]),[M,F]=w.useState(!1);w.useEffect(()=>{G(),oe(),_()},[]);const N=async H=>{try{const Q=await Jt.get(`${Tl}/room-booking`),le=Array.isArray(Q.data)?Q.data:[],me={};le.forEach(je=>{var ee;if(je.status!=="cancelled"&&je.status!=="checked-out"){const se=((ee=je.roomId)==null?void 0:ee._id)||je.roomId;se&&(me[se]=je)}}),I(me)}catch(Q){console.error("Error fetching room bookings:",Q)}},L=H=>H?new Date(H).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"",P=H=>H?new Date(H).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"",_=async()=>{try{console.log(" Fetching all bookings for export...");const Q=(await Jt.get(`${Tl}/room-booking`)).data||[];console.log(" Fetched bookings for export:",Q.length),B(Q)}catch(H){console.error("Error fetching all bookings:",H),O("Failed to load booking data for export"),setTimeout(()=>O(""),3e3),B([])}},R=(H,Q=32e3)=>{if(!H)return"";const le=String(H);return le.length<=Q?le:le.substring(0,Q)+"..."},W=()=>{if(!M){F(!0);try{let H=[];z.length===0?H=[{"S.No":"No bookings found","Booking Date":"","Room Number":"","Room Type":"",Floor:"",Branch:"","Guest Name":"","Guest Phone":"","Guest Email":"","Guest GSTIN":"","Check-in Date":"","Check-in Time":"","Check-out Date":"","Check-out Time":"",Nights:"","Base Amount ()":"","GST Type":"","CGST ()":"","SGST ()":"","IGST ()":"","Total GST ()":"","Total Amount ()":"","Amount Paid ()":"","Balance Due ()":"",Status:"","Payment Status":""}]:H=z.map((fe,ue)=>{var Be,it,re,ce,Z,de;const We=(fe.cgst||0)+(fe.sgst||0)+(fe.igst||0),we=fe.totalPrice||0,Me=fe.amountPaid||0,Ee=we-Me;return{"S.No":ue+1,"Booking Date":R(P(fe.createdAt)),"Room Number":R(((Be=fe.roomId)==null?void 0:Be.roomNumber)||"N/A"),"Room Type":R(((it=fe.roomId)==null?void 0:it.roomType)||"N/A"),Floor:R(((re=fe.roomId)==null?void 0:re.floor)||"N/A"),Branch:R(((ce=fe.branchId)==null?void 0:ce.name)||"N/A"),"Guest Name":R(fe.userName||""),"Guest Phone":R(fe.userPhone||""),"Guest Email":R(fe.userEmail||""),"Guest GSTIN":R(fe.guestGstNumber||""),"Check-in Date":R(P(fe.checkInDate)),"Check-in Time":R(fe.checkInTime||""),"Check-out Date":R(P(fe.checkOutDate)),"Check-out Time":R(fe.checkOutTime||""),Nights:fe.nights||1,"Base Amount ()":(fe.baseAmount||0).toFixed(2),"GST Type":R(fe.gstType==="gst"?"CGST+SGST (5%)":fe.gstType==="igst"?"IGST (5%)":"No GST"),"CGST ()":(fe.cgst||0).toFixed(2),"SGST ()":(fe.sgst||0).toFixed(2),"IGST ()":(fe.igst||0).toFixed(2),"Total GST ()":We.toFixed(2),"Total Amount ()":we.toFixed(2),"Amount Paid ()":Me.toFixed(2),"Balance Due ()":Ee.toFixed(2),Status:R(((Z=fe.status)==null?void 0:Z.toUpperCase())||""),"Payment Status":R(((de=fe.paymentStatus)==null?void 0:de.toUpperCase())||"")}});const Q=to.json_to_sheet(H),le=to.book_new();to.book_append_sheet(le,Q,"Room Bookings");const me=[{wch:5},{wch:12},{wch:12},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:25},{wch:18},{wch:12},{wch:12},{wch:12},{wch:12},{wch:8},{wch:15},{wch:15},{wch:12},{wch:12},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15},{wch:12},{wch:15}];Q["!cols"]=me;const je=new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-"),ee=z.length===0?`Room_Bookings_Empty_${je}.xlsx`:`Room_Bookings_${je}.xlsx`;iN(le,ee);const se=z.length===0?"Empty Excel template exported successfully!":`Excel exported successfully! (${z.length} bookings)`;C(se),setTimeout(()=>C(""),3e3)}catch(H){console.error("Error exporting to Excel:",H),O(`Failed to export Excel: ${H.message}`),setTimeout(()=>O(""),5e3)}finally{F(!1)}}},G=async()=>{try{const H=await Jt.get(`${Tl}/branch`);a(H.data)}catch(H){console.error("Error fetching branches:",H)}},oe=async()=>{A(!0);try{const H=await Jt.get(`${Tl}/room`),Q=Array.isArray(H.data)?H.data:[];t(Q),Q.length>0&&N(Q)}catch{O("Failed to load rooms"),t([])}finally{A(!1)}},q=Array.isArray(e)?e.filter(H=>{var me,je,ee,se;const Q=((me=H.floor)==null?void 0:me.toLowerCase().includes(s.toLowerCase()))||((je=H.roomNumber)==null?void 0:je.toLowerCase().includes(s.toLowerCase()))||((ee=H.roomType)==null?void 0:ee.toLowerCase().includes(s.toLowerCase())),le=!l||((se=H.branchId)==null?void 0:se._id)===l||H.branchId===l;return Q&&le}):[],V=async H=>{var Q,le;try{const me={headers:{"Content-Type":"multipart/form-data"}};let je;p?(je=await Jt.put(`${Tl}/room/${p._id}`,H,me),t(Array.isArray(e)?e.map(ee=>ee._id===p._id?je.data:ee):[je.data]),C("Room updated successfully")):(je=await Jt.post(`${Tl}/room`,H,me),t(Array.isArray(e)?[...e,je.data]:[je.data]),C("Room created successfully")),setTimeout(()=>C(""),3e3)}catch(me){throw new Error(((le=(Q=me.response)==null?void 0:Q.data)==null?void 0:le.message)||"Failed to save room")}},U=async H=>{try{await Jt.delete(`${Tl}/room/${H}`),t(Array.isArray(e)?e.filter(Q=>Q._id!==H):[]),C("Room deleted successfully"),setTimeout(()=>C(""),3e3)}catch{throw new Error("Failed to delete room")}},X=H=>H?S9.filter(Q=>H[Q.key]).map(Q=>Q.label):[];return r.jsxs("div",{className:"rooms-page",children:[S&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:S}),r.jsx("button",{onClick:()=>C(""),children:r.jsx("span",{children:""})})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Rooms"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{className:"btn",onClick:H=>{H.preventDefault(),H.stopPropagation(),W()},disabled:M,style:{backgroundColor:"#059669",color:"white",display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:M?"not-allowed":"pointer",opacity:M?.6:1},title:z.length===0?"Click to export empty template":`Export ${z.length} bookings to Excel`,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:M?"Exporting...":`Export Excel (${z.length})`})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>{m(null),h(!0)},children:[r.jsx(qa,{size:16}),r.jsx("span",{children:"Add Room"})]})]})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search rooms...",className:"search-input",value:s,onChange:H=>i(H.target.value)})]}),r.jsxs("select",{className:"form-input",style:{width:"200px"},value:l,onChange:H=>d(H.target.value),children:[r.jsx("option",{value:"",children:"All Branches"}),n.map(H=>r.jsx("option",{value:H._id,children:H.name},H._id))]})]}),E&&r.jsxs("div",{style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:E})]}),y?r.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"Loading rooms..."})}):r.jsx("div",{className:"grid-container",children:q.length>0?q.map(H=>{var Q,le,me,je,ee,se,fe;return r.jsxs("div",{className:"grid-item",children:[r.jsx("div",{className:"grid-item-image-container",style:{position:"relative"},children:((Q=H.images)==null?void 0:Q.length)>0?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:w9(H.images[0]),alt:H.floor,className:"grid-item-image",onError:ue=>{console.log("Image failed to load:",ue.target.src),ue.target.style.display="none",ue.target.nextSibling.style.display="flex"}}),r.jsxs("div",{style:{display:"none",width:"100%",height:"200px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[r.jsx(bi,{size:24}),r.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"Image Not Found"})]})]}):r.jsxs("div",{style:{display:"flex",width:"100%",height:"200px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",color:"#9ca3af"},children:[r.jsx(bi,{size:24}),r.jsx("span",{style:{marginTop:"8px",fontSize:"14px"},children:"No Image"})]})}),r.jsxs("div",{className:"grid-item-content",children:[r.jsxs("h3",{className:"grid-item-title",children:[H.floor," - Room #",H.roomNumber||"N/A"]}),r.jsx("p",{style:{fontSize:"14px",color:"#6b7280"},children:((le=H.branchId)==null?void 0:le.name)||"No Branch"}),r.jsxs("p",{style:{fontSize:"14px",color:"#6b7280"},children:["Type: ",H.roomType]}),r.jsxs("p",{style:{fontSize:"16px",fontWeight:"600",color:"#059669"},children:["",H.price," ",r.jsx("span",{style:{fontSize:"12px",color:"#6b7280",fontWeight:"normal"},children:"(Basic)"})]}),k[H._id]?r.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#fef3c7",borderRadius:"6px",borderLeft:"3px solid #f59e0b"},children:[r.jsx("p",{style:{fontSize:"12px",fontWeight:"600",color:"#92400e",marginBottom:"4px"},children:" BOOKED"}),r.jsxs("p",{style:{fontSize:"12px",color:"#78350f"},children:[r.jsx("strong",{children:"Guest:"})," ",k[H._id].userName]}),r.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[r.jsx("strong",{children:"Phone:"})," ",k[H._id].userPhone||"N/A"]}),r.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[r.jsx("strong",{children:"Check-in:"})," ",L(k[H._id].checkInDate)," at ",k[H._id].checkInTime]}),r.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[r.jsx("strong",{children:"Check-out:"})," ",L(k[H._id].checkOutDate)," at ",k[H._id].checkOutTime]}),r.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[r.jsx("strong",{children:"Base:"})," ",(me=k[H._id].baseAmount)==null?void 0:me.toFixed(2)," (",k[H._id].nights," nights)"]}),k[H._id].gstType&&k[H._id].gstType!=="none"&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[r.jsx("strong",{children:"GST:"})," ",k[H._id].gstType==="gst"?`CGST ${(je=k[H._id].cgst)==null?void 0:je.toFixed(2)} + SGST ${(ee=k[H._id].sgst)==null?void 0:ee.toFixed(2)}`:`IGST ${(se=k[H._id].igst)==null?void 0:se.toFixed(2)}`]}),k[H._id].guestGstNumber&&r.jsxs("p",{style:{fontSize:"11px",color:"#78350f"},children:[r.jsx("strong",{children:"Guest GSTIN:"})," ",k[H._id].guestGstNumber]})]}),r.jsxs("p",{style:{fontSize:"11px",color:"#78350f",fontWeight:"600"},children:[r.jsx("strong",{children:"Total:"})," ",(fe=k[H._id].totalPrice)==null?void 0:fe.toFixed(2)]}),r.jsxs("p",{style:{fontSize:"10px",color:"#92400e",marginTop:"4px"},children:["Status: ",r.jsx("span",{style:{textTransform:"uppercase",fontWeight:"600"},children:k[H._id].status})]})]}):r.jsx("p",{style:{fontSize:"12px",color:H.isAvailable?"#059669":"#dc2626",marginTop:"8px"},children:H.isAvailable?" Available":"Not Available"}),r.jsxs("div",{style:{marginTop:"8px",display:"flex",flexWrap:"wrap",gap:"4px"},children:[X(H.amenities).slice(0,4).map(ue=>r.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#e5e7eb",borderRadius:"4px"},children:ue},ue)),X(H.amenities).length>4&&r.jsxs("span",{style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#e5e7eb",borderRadius:"4px"},children:["+",X(H.amenities).length-4]})]})]}),r.jsxs("div",{className:"grid-item-actions",style:{display:"flex",gap:"8px",padding:"12px",borderTop:"1px solid #e5e7eb"},children:[r.jsxs("button",{className:"btn-icon",onClick:()=>{m(H),h(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ue=>ue.target.style.backgroundColor="#2563eb",onMouseLeave:ue=>ue.target.style.backgroundColor="#3b82f6",children:[r.jsx(Vn,{size:16}),r.jsx("span",{children:"Edit"})]}),r.jsxs("button",{className:"btn-icon-danger",onClick:()=>{v(H),b(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:ue=>ue.target.style.backgroundColor="#dc2626",onMouseLeave:ue=>ue.target.style.backgroundColor="#ef4444",children:[r.jsx(Yn,{size:16}),r.jsx("span",{children:"Delete"})]})]})]},H._id)}):r.jsxs("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px"},children:[r.jsx(bi,{size:48,style:{color:"#9ca3af",marginBottom:"16px"}}),r.jsx("p",{style:{color:"#6b7280"},children:"No rooms found"})]})}),u&&r.jsx(cfe,{room:p,branches:n,onClose:()=>h(!1),onSave:V}),g&&j&&r.jsx(dfe,{room:j,onClose:()=>b(!1),onConfirm:U})]})},en="https://hotelvirat.com",hfe={CAROUSEL:`${en}/api/website/carousel`,CATERING:`${en}/api/website/catering`,APP_DOWNLOAD:`${en}/api/website/app-download`,CONTACT:`${en}/api/website/contact`,CONTACT_MESSAGES:`${en}/api/website/contact-messages`},ffe=async(e,t={})=>{try{const n=await fetch(e,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){throw console.error("API call failed:",n),n}},pfe=()=>{var C,k,I,z;const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState(!1),[u,h]=w.useState({}),[p,m]=w.useState("all");w.useEffect(()=>{g(),b()},[p]);const g=async()=>{try{a(!0);const B=p!=="all"?`?status=${p}`:"",M=await fetch(`${en}/api/v1/hotel/room-booking${B}`);if(!M.ok)throw new Error(`HTTP error! status: ${M.status}`);const F=await M.json();F.success?t(F.bookings||[]):(console.error("Failed to fetch bookings:",F.message),t([]))}catch(B){console.error("Error fetching bookings:",B),t([])}finally{a(!1)}},b=async()=>{try{const M=await(await fetch(`${en}/api/v1/hotel/room-booking/stats`)).json();M.success&&h(M.stats||{})}catch(B){console.error("Error fetching stats:",B)}},j=B=>{i(B),d(!0)},v=()=>{d(!1),i(null)},y=async(B,M)=>{try{const N=await(await fetch(`${en}/api/v1/hotel/room-booking/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:M})})).json();N.success?(g(),b(),s&&s._id===B&&i({...s,status:M})):alert("Error updating status: "+N.message)}catch(F){console.error("Error updating status:",F),alert("Failed to update booking status")}},A=async B=>{if(confirm("Are you sure you want to delete this booking?"))try{const F=await(await fetch(`${en}/api/v1/hotel/room-booking/${B}`,{method:"DELETE"})).json();F.success?(g(),b(),v()):alert("Error deleting booking: "+F.message)}catch(M){console.error("Error deleting booking:",M),alert("Failed to delete booking")}},E=B=>new Date(B).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),O=B=>{const M=Number(B);return isNaN(M)||M<0?"0.00":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(M)},S=B=>{switch(B){case"pending":return"status-pending";case"confirmed":return"status-confirmed";case"completed":return"status-completed";case"cancelled":return"status-cancelled";default:return"status-pending"}};return n?r.jsxs("div",{className:"page-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading room bookings..."})]}):r.jsxs("div",{className:"room-bookings-page",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Room Bookings"}),r.jsx("p",{children:"Manage hotel room reservations and bookings"})]}),r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-info",children:[r.jsx("h3",{children:u.total||0}),r.jsx("p",{children:"Total Bookings"})]})]}),r.jsxs("div",{className:"stat-card pending",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-info",children:[r.jsx("h3",{children:u.pending||0}),r.jsx("p",{children:"Pending"})]})]}),r.jsxs("div",{className:"stat-card confirmed",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-info",children:[r.jsx("h3",{children:u.confirmed||0}),r.jsx("p",{children:"Confirmed"})]})]}),r.jsxs("div",{className:"stat-card completed",children:[r.jsx("div",{className:"stat-icon",children:""}),r.jsxs("div",{className:"stat-info",children:[r.jsx("h3",{children:u.completed||0}),r.jsx("p",{children:"Completed"})]})]})]}),r.jsxs("div",{className:"filter-tabs",children:[r.jsx("button",{className:p==="all"?"active":"",onClick:()=>m("all"),children:"All Bookings"}),r.jsx("button",{className:p==="pending"?"active":"",onClick:()=>m("pending"),children:"Pending"}),r.jsx("button",{className:p==="confirmed"?"active":"",onClick:()=>m("confirmed"),children:"Confirmed"}),r.jsx("button",{className:p==="completed"?"active":"",onClick:()=>m("completed"),children:"Completed"})]}),r.jsx("div",{className:"content-card",children:e.length===0?r.jsxs("div",{className:"no-bookings",children:[r.jsx(rn,{size:64}),r.jsx("h3",{children:"No Room Bookings"}),r.jsx("p",{children:"No room bookings found for the selected filter."})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"bookings-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Guest Details"}),r.jsx("th",{children:"Room Info"}),r.jsx("th",{children:"Dates"}),r.jsx("th",{children:"Guests"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(B=>{var M,F,N;return r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"guest-info",children:[r.jsxs("div",{className:"guest-name",children:[r.jsx(Vo,{size:24}),r.jsx("strong",{children:B.guestName})]}),r.jsxs("div",{className:"guest-contact",children:[r.jsx(Ps,{size:20}),r.jsx("span",{children:B.guestEmail})]}),B.guestPhone&&r.jsxs("div",{className:"guest-contact",children:[r.jsx(Ia,{size:20}),r.jsx("span",{children:B.guestPhone})]})]})}),r.jsx("td",{children:r.jsxs("div",{className:"room-info",children:[r.jsxs("div",{className:"room-type",children:[r.jsx($l,{size:20}),r.jsx("strong",{children:((M=B.roomId)==null?void 0:M.roomType)||"N/A"})]}),r.jsxs("div",{className:"room-details",children:[r.jsxs("span",{children:["Floor: ",((F=B.roomId)==null?void 0:F.floor)||"N/A"]}),((N=B.roomId)==null?void 0:N.roomNumber)&&r.jsxs("span",{children:["Room: ",B.roomId.roomNumber]})]})]})}),r.jsx("td",{children:r.jsxs("div",{className:"booking-dates",children:[r.jsxs("div",{className:"date-range",children:[r.jsx(rn,{size:18}),r.jsxs("span",{children:[E(B.checkInDate)," - ",E(B.checkOutDate)]})]}),r.jsx("div",{className:"booking-date",children:r.jsxs("small",{children:["Booked: ",E(B.createdAt)]})})]})}),r.jsx("td",{children:r.jsxs("div",{className:"guest-count",children:[r.jsxs("span",{children:[B.adults," Adults"]}),B.children>0&&r.jsxs("span",{children:[B.children," Children"]})]})}),r.jsx("td",{children:r.jsx("div",{className:"booking-amount",children:O(B.totalAmount||B.amount||0)})}),r.jsx("td",{children:r.jsxs("select",{className:`status-select ${S(B.status)}`,value:B.status,onChange:L=>y(B._id,L.target.value),children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"confirmed",children:"Confirmed"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"btn-action btn-view",onClick:()=>j(B),title:"View Details",style:{padding:"8px 12px",minWidth:"40px",minHeight:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(xs,{size:24})}),r.jsx("button",{className:"btn-action btn-delete",onClick:()=>A(B._id),title:"Delete Booking",style:{padding:"8px 12px",minWidth:"40px",minHeight:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(Yn,{size:24})})]})})]},B._id)})})]})})}),l&&s&&r.jsx("div",{className:"modal-overlay",onClick:v,children:r.jsxs("div",{className:"booking-modal",onClick:B=>B.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Booking Details"}),r.jsx("button",{className:"modal-close",onClick:v,children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"booking-details-grid",children:[r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Guest Information"}),r.jsxs("div",{className:"detail-item",children:[r.jsx(Vo,{size:20}),r.jsxs("span",{children:[r.jsx("strong",{children:"Name:"})," ",s.guestName]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx(Ps,{size:20}),r.jsxs("span",{children:[r.jsx("strong",{children:"Email:"})," ",s.guestEmail]})]}),s.guestPhone&&r.jsxs("div",{className:"detail-item",children:[r.jsx(Ia,{size:20}),r.jsxs("span",{children:[r.jsx("strong",{children:"Phone:"})," ",s.guestPhone]})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Room Information"}),r.jsxs("div",{className:"detail-item",children:[r.jsx($l,{size:20}),r.jsxs("span",{children:[r.jsx("strong",{children:"Type:"})," ",((C=s.roomId)==null?void 0:C.roomType)||"N/A"]})]}),r.jsx("div",{className:"detail-item",children:r.jsxs("span",{children:[r.jsx("strong",{children:"Floor:"})," ",((k=s.roomId)==null?void 0:k.floor)||"N/A"]})}),((I=s.roomId)==null?void 0:I.roomNumber)&&r.jsx("div",{className:"detail-item",children:r.jsxs("span",{children:[r.jsx("strong",{children:"Room Number:"})," ",s.roomId.roomNumber]})}),r.jsx("div",{className:"detail-item",children:r.jsxs("span",{children:[r.jsx("strong",{children:"Price per night:"})," ",O(((z=s.roomId)==null?void 0:z.price)||0)]})})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Booking Details"}),r.jsxs("div",{className:"detail-item",children:[r.jsx(rn,{size:20}),r.jsxs("span",{children:[r.jsx("strong",{children:"Check-in:"})," ",E(s.checkInDate)]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx(rn,{size:20}),r.jsxs("span",{children:[r.jsx("strong",{children:"Check-out:"})," ",E(s.checkOutDate)]})]}),r.jsx("div",{className:"detail-item",children:r.jsxs("span",{children:[r.jsx("strong",{children:"Adults:"})," ",s.adults]})}),r.jsx("div",{className:"detail-item",children:r.jsxs("span",{children:[r.jsx("strong",{children:"Children:"})," ",s.children]})}),r.jsx("div",{className:"detail-item",children:r.jsxs("span",{children:[r.jsx("strong",{children:"Total Amount:"})," ",O(s.totalAmount||s.amount||0)]})}),r.jsx("div",{className:"detail-item",children:r.jsxs("span",{children:[r.jsx("strong",{children:"Status:"}),r.jsx("span",{className:`status-badge ${S(s.status)}`,children:s.status})]})})]}),s.specialRequests&&r.jsxs("div",{className:"detail-section full-width",children:[r.jsx("h4",{children:"Special Requests"}),r.jsx("p",{className:"special-requests",children:s.specialRequests})]}),s.notes&&r.jsxs("div",{className:"detail-section full-width",children:[r.jsx("h4",{children:"Admin Notes"}),r.jsx("p",{className:"admin-notes",children:s.notes})]})]})}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{className:"btn btn-secondary",onClick:v,children:"Close"})})]})})]})},mfe="https://hotelvirat.com/api/v1/hotel",xfe=Jt.create({baseURL:mfe,headers:{"Content-Type":"application/json"}}),gfe=()=>{const[e,t]=w.useState({totalCash:0,totalOnline:0,totalCollected:0,totalPending:0,bookingCount:0}),[n,a]=w.useState([]),[s,i]=w.useState(!0),[l,d]=w.useState(""),[u,h]=w.useState(""),[p,m]=w.useState(new Date().toISOString().split("T")[0]),[g,b]=w.useState(new Date().toISOString().split("T")[0]);w.useEffect(()=>{j()},[p,g]);const j=async()=>{i(!0),d("");try{const I=await xfe.get(`/room-booking/payment-summary?startDate=${p}&endDate=${g}`);t(I.data.summary),a(I.data.bookings)}catch(I){console.error("Error fetching payment summary:",I),d("Failed to load payment data")}finally{i(!1)}},v=I=>I?new Date(I).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",y=I=>I?new Date(I).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",A=Array.isArray(n)?n.filter(I=>{var B,M,F;const z=u.toLowerCase();return((B=I.guestName)==null?void 0:B.toLowerCase().includes(z))||((M=I.roomNumber)==null?void 0:M.toLowerCase().includes(z))||((F=I.branchName)==null?void 0:F.toLowerCase().includes(z))}):[],E=()=>{const I=A.map(M=>({Room:M.roomNumber,"Guest Name":M.guestName,Branch:M.branchName,"Check-in":v(M.checkInDate),"Check-out":v(M.checkOutDate),"Total Amount":M.totalPrice,"Cash Paid":M.cashAmount,"Online Paid":M.onlineAmount,"Total Paid":M.amountPaid,Balance:M.totalPrice-M.amountPaid,Status:M.paymentStatus,"Booking Date":y(M.createdAt)})),z=to.json_to_sheet(I),B=to.book_new();to.book_append_sheet(B,z,"Room Payments"),iN(B,`room-payments-${p}-to-${g}.xlsx`)},O=()=>{const I=new Date().toISOString().split("T")[0];m(I),b(I)},S=()=>{const I=new Date,z=new Date(I);z.setDate(I.getDate()-I.getDay()),m(z.toISOString().split("T")[0]),b(I.toISOString().split("T")[0])},C=()=>{const I=new Date,z=new Date(I.getFullYear(),I.getMonth(),1);m(z.toISOString().split("T")[0]),b(I.toISOString().split("T")[0])},k=()=>{const I=new Date,z=new Date(I.getFullYear(),0,1);m(z.toISOString().split("T")[0]),b(I.toISOString().split("T")[0])};return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Room Payment Collections"}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("button",{className:"btn btn-outline",onClick:j,children:[r.jsx(ai,{size:16}),r.jsx("span",{children:"Refresh"})]}),r.jsxs("button",{className:"btn btn-primary",onClick:E,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:"Export"})]})]})]}),r.jsx("div",{className:"filters-bar",style:{marginBottom:"20px"},children:r.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(rn,{size:18}),r.jsx("input",{type:"date",value:p,onChange:I=>m(I.target.value),className:"filter-select"}),r.jsx("span",{children:"to"}),r.jsx("input",{type:"date",value:g,onChange:I=>b(I.target.value),className:"filter-select"})]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{className:"btn btn-outline btn-sm",onClick:O,children:"Today"}),r.jsx("button",{className:"btn btn-outline btn-sm",onClick:S,children:"This Week"}),r.jsx("button",{className:"btn btn-outline btn-sm",onClick:C,children:"This Month"}),r.jsx("button",{className:"btn btn-outline btn-sm",onClick:k,children:"This Year"})]})]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[r.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"20px",borderRadius:"12px",border:"1px solid #bbf7d0"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[r.jsx(lL,{size:24,color:"#16a34a"}),r.jsx("span",{style:{color:"#166534",fontWeight:"500"},children:"Cash Collection"})]}),r.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#16a34a"},children:["",e.totalCash.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{style:{backgroundColor:"#eff6ff",padding:"20px",borderRadius:"12px",border:"1px solid #bfdbfe"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[r.jsx(Ua,{size:24,color:"#2563eb"}),r.jsx("span",{style:{color:"#1e40af",fontWeight:"500"},children:"Online Collection"})]}),r.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#2563eb"},children:["",e.totalOnline.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{style:{backgroundColor:"#faf5ff",padding:"20px",borderRadius:"12px",border:"1px solid #e9d5ff"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[r.jsx(r5,{size:24,color:"#9333ea"}),r.jsx("span",{style:{color:"#6b21a8",fontWeight:"500"},children:"Total Collected"})]}),r.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#9333ea"},children:["",e.totalCollected.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{style:{backgroundColor:"#fef2f2",padding:"20px",borderRadius:"12px",border:"1px solid #fecaca"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[r.jsx(xr,{size:24,color:"#dc2626"}),r.jsx("span",{style:{color:"#991b1b",fontWeight:"500"},children:"Pending Amount"})]}),r.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#dc2626"},children:["",e.totalPending.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by guest name, room number...",className:"search-input",value:u,onChange:I=>h(I.target.value)})]}),r.jsxs("div",{style:{color:"#6b7280",fontSize:"14px"},children:[A.length," booking(s) found"]})]}),l&&r.jsxs("div",{style:{padding:"15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(xr,{size:18}),l]}),r.jsx("div",{className:"data-card",children:s?r.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[r.jsx(ai,{size:24,className:"animate-spin"}),r.jsx("p",{children:"Loading payment data..."})]}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Room"}),r.jsx("th",{children:"Guest"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Check-in"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:" Cash"}),r.jsx("th",{children:" Online"}),r.jsx("th",{children:"Balance"})]})}),r.jsx("tbody",{children:A.length>0?A.map(I=>{var B,M,F;const z=I.totalPrice-I.amountPaid;return r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:I.roomNumber})}),r.jsx("td",{children:I.guestName}),r.jsx("td",{children:I.branchName}),r.jsx("td",{children:v(I.checkInDate)}),r.jsxs("td",{children:["",(B=I.totalPrice)==null?void 0:B.toFixed(2)]}),r.jsxs("td",{style:{color:"#16a34a",fontWeight:"500"},children:["",(M=I.cashAmount)==null?void 0:M.toFixed(2)]}),r.jsxs("td",{style:{color:"#2563eb",fontWeight:"500"},children:["",(F=I.onlineAmount)==null?void 0:F.toFixed(2)]}),r.jsx("td",{style:{color:z>0?"#dc2626":"#16a34a",fontWeight:"500"},children:z>0?`${z.toFixed(2)}`:" Paid"})]},I._id)}):r.jsx("tr",{children:r.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"No bookings found for the selected date range"})})})]})})]})},yfe=({user:e,onClose:t,onSave:n,categories:a,isEditMode:s})=>{var v,y;const[i,l]=w.useState({name:(e==null?void 0:e.name)||"",username:(e==null?void 0:e.username)||"",password:"",categoryId:((v=e==null?void 0:e.categoryId)==null?void 0:v._id)||(e==null?void 0:e.categoryId)||"",categoryName:(e==null?void 0:e.categoryName)||"",branchId:((y=e==null?void 0:e.branchId)==null?void 0:y._id)||(e==null?void 0:e.branchId)||"",branchName:(e==null?void 0:e.branchName)||"",isActive:(e==null?void 0:e.isActive)!==!1}),[d,u]=w.useState(!1),[h,p]=w.useState(null),[m,g]=w.useState(!1),b=A=>{var k,I;const{name:E,value:O,type:S,checked:C}=A.target;if(E==="categoryId"){const z=a.find(B=>B._id===O);l({...i,categoryId:O,categoryName:(z==null?void 0:z.name)||"",branchId:(z==null?void 0:z.branchId)||((k=z==null?void 0:z.branch)==null?void 0:k._id)||"",branchName:((I=z==null?void 0:z.branch)==null?void 0:I.name)||""})}else l({...i,[E]:S==="checkbox"?C:O});p(null)},j=async A=>{A.preventDefault(),p(null),g(!0);try{if(!i.categoryId)throw new Error("Please select a category");if(!s&&!i.password)throw new Error("Password is required");await n(i,e==null?void 0:e._id),t()}catch(E){p(E.message||"Failed to save category access user")}finally{g(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:s?"Edit Category Access":"Add Category Access"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:j,children:[r.jsxs("div",{className:"modal-body",children:[h&&r.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:h}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"categoryId",children:["Category ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("select",{id:"categoryId",name:"categoryId",className:"form-select",value:i.categoryId,onChange:b,required:!0,disabled:m,children:[r.jsx("option",{value:"",children:"Select Category"}),a.map(A=>{var E;return r.jsxs("option",{value:A._id,children:[A.name," ",(E=A.branch)!=null&&E.name?`(${A.branch.name})`:""]},A._id)})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"name",children:["Staff Name ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:i.name,onChange:b,required:!0,disabled:m,placeholder:"Enter staff name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"username",children:["Username ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"username",name:"username",className:"form-input",value:i.username,onChange:b,required:!0,disabled:m,placeholder:"Enter username for login"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"password",children:["Password ",!s&&r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:d?"text":"password",id:"password",name:"password",className:"form-input",value:i.password,onChange:b,required:!s,disabled:m,placeholder:s?"Leave blank to keep current":"Enter password",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>u(!d),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:d?r.jsx(_w,{size:18}):r.jsx(xs,{size:18})})]})]}),s&&r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("input",{type:"checkbox",name:"isActive",checked:i.isActive,onChange:b,disabled:m}),"Active"]})})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:m,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Saving...":s?"Update":"Add Access"})]})]})]})})},bfe=({user:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),i=async()=>{s(!0);try{await n(e._id),t()}catch(l){console.error("Error deleting:",l)}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Category Access"}),r.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete access for ",r.jsx("strong",{children:e.name}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:i,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},vfe=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(""),[l,d]=w.useState(!1),[u,h]=w.useState(null),[p,m]=w.useState(!1),[g,b]=w.useState(null),[j,v]=w.useState(""),[y,A]=w.useState(""),[E,O]=w.useState(!1),S="https://hotelvirat.com/api/v1/hotel/category-access",C="https://hotelvirat.com/api/v1/hotel/category",k=async()=>{try{const _=await fetch(C);if(!_.ok)throw new Error("Failed to fetch categories");const R=await _.json();let W=[];R&&R.success&&Array.isArray(R.data)?W=R.data:Array.isArray(R)&&(W=R),a(W)}catch(_){console.error("Error fetching categories:",_)}},I=async()=>{O(!0),A("");try{const _=await fetch(S);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);const R=await _.json();let W=[];R&&R.success&&Array.isArray(R.data)?W=R.data:Array.isArray(R)?W=R:R&&R.message&&R.message.includes("routes working")?(console.log(" Server returning placeholder response:",R.message),W=[]):(console.error("Expected array but got:",R),W=[]),t(W)}catch(_){console.error("Fetch error:",_),A(`Failed to fetch category access users: ${_.message}`),t([])}finally{O(!1)}};w.useEffect(()=>{k(),I()},[]);const z=()=>{h(null),d(!0)},B=_=>{h(_),d(!0)},M=_=>{b(_),m(!0)},F=async(_,R)=>{try{const W=R?`${S}/${R}`:S,G=R?"PUT":"POST",oe={..._};R&&!oe.password&&delete oe.password;const q=await fetch(W,{method:G,headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),V=await q.json();if(!q.ok)throw new Error(V.message||"Failed to save");v(`Category access ${R?"updated":"added"} successfully`),setTimeout(()=>v(""),3e3),await I()}catch(W){throw new Error(W.message)}},N=async _=>{try{const R=await fetch(`${S}/${_}`,{method:"DELETE"}),W=await R.json();if(!R.ok)throw new Error(W.message||"Failed to delete");v("Category access deleted successfully"),setTimeout(()=>v(""),3e3),await I()}catch(R){A(R.message),setTimeout(()=>A(""),3e3)}},L=_=>_?new Date(_).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"N/A",P=e.filter(_=>{var R,W,G;return((R=_.name)==null?void 0:R.toLowerCase().includes(s.toLowerCase()))||((W=_.username)==null?void 0:W.toLowerCase().includes(s.toLowerCase()))||((G=_.categoryName)==null?void 0:G.toLowerCase().includes(s.toLowerCase()))});return r.jsxs("div",{className:"category-access-page",children:[j&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>v(""),children:""})]}),y&&r.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[r.jsx("span",{children:y}),r.jsx("button",{onClick:()=>A(""),style:{color:"#dc2626"},children:""})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Category Access"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:z,disabled:E,children:[r.jsx($d,{size:16}),r.jsx("span",{children:"Add Category Access"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by name, username or category...",className:"search-input",value:s,onChange:_=>i(_.target.value)})]})}),r.jsx("div",{className:"data-card",children:E?r.jsx("div",{className:"empty-state",children:"Loading..."}):P.length===0?r.jsx("div",{className:"empty-state",children:r.jsxs("p",{children:["No category access users found. ",s?"Try a different search.":"Add a new user to get started."]})}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Username"}),r.jsx("th",{children:"Category"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Created"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:P.map(_=>{var R,W;return r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("div",{className:"user-avatar-placeholder",children:(R=_.name)==null?void 0:R.charAt(0).toUpperCase()}),_.name]})}),r.jsx("td",{children:r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(n5,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),_.username]})}),r.jsx("td",{children:_.categoryName||((W=_.categoryId)==null?void 0:W.name)||"N/A"}),r.jsx("td",{children:r.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",backgroundColor:_.isActive?"#dcfce7":"#fee2e2",color:_.isActive?"#166534":"#dc2626"},children:_.isActive?"Active":"Inactive"})}),r.jsx("td",{children:L(_.createdAt)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>B(_),disabled:E,children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>M(_),disabled:E,children:r.jsx(Yn,{size:14})})]})})]},_._id)})})]})}),l&&r.jsx(yfe,{user:u,onClose:()=>d(!1),onSave:F,categories:n,isEditMode:!!u}),p&&r.jsx(bfe,{user:g,onClose:()=>m(!1),onConfirm:N})]})},jfe=()=>{const e=kn(),[t,n]=w.useState(null),[a,s]=w.useState([]),[i,l]=w.useState([]),[d,u]=w.useState(!0),[h,p]=w.useState(""),[m,g]=w.useState(""),[b,j]=w.useState(""),[v,y]=w.useState("all"),[A,E]=w.useState(!1),[O,S]=w.useState(null);w.useEffect(()=>{const _=localStorage.getItem("userType"),R=localStorage.getItem("categoryStaffData");if(_!=="category-staff"||!R){e("/login");return}const W=JSON.parse(R);console.log(" CategoryOrders - Staff Data:",W),console.log(" CategoryOrders - Category Name:",`"${W.categoryName}"`),console.log(" CategoryOrders - Category ID:",W.categoryId),n(W)},[e]),w.useEffect(()=>{t&&k()},[t,v]);const C=_=>{var U,X,H,Q,le;const R=((U=_.categoryName)==null?void 0:U.toLowerCase())||"",W=((X=_.branchName)==null?void 0:X.toLowerCase())||"",G=((H=_.customerName)==null?void 0:H.toLowerCase())||"",oe=((Q=_.deliveryOption)==null?void 0:Q.toLowerCase())||"",q=((le=_.tableNumber)==null?void 0:le.toString().toLowerCase())||"",V=(_.orderId||_.orderNumber||_._id||"").toLowerCase();return V.includes("-tm-")||V.includes("temple")?"Temple Meals":V.includes("-ss-")||V.includes("counter")?"Self Service":V.includes("-res-")?"Restaurant":R.includes("temple")||R.includes("prasad")||R.includes("pooja")||W.includes("temple")||G.includes("temple")?"Temple Meals":R.includes("self")||R.includes("counter")||q.includes("counter")||q.includes("self")||q.includes("mobile order")||oe==="pickup"?"Self Service":"Restaurant"},k=async()=>{if(t!=null&&t.categoryId){u(!0),p("");try{const _=t.categoryId._id||t.categoryId,R=Date.now();console.log(" CategoryOrders - Fetching orders for category:",t.categoryName),console.log(" CategoryOrders - Category ID:",_),console.log(" CategoryOrders - Staff Category Name (exact):",`"${t.categoryName}"`),console.log(" CategoryOrders - Staff Category Name (lowercase):",`"${t.categoryName.toLowerCase().trim()}"`);const[W,G]=await Promise.all([vr(`/staff-order?_t=${R}`,{},!0).catch(()=>[]),vr(`/order?limit=1000&_t=${R}`,{},!0).catch(()=>[])]);let oe=[];try{const ee=await vr(`/counter-order/orders?_t=${R}`,{},!0).catch(()=>[]);oe=Array.isArray(ee)?ee:ee.orders||[]}catch(ee){console.log("Additional orders fetch failed:",ee)}const q=Array.isArray(W)?W:W.orders||[],V=Array.isArray(G)?G:G.data||[];console.log(" CategoryOrders - Raw API responses:",{staffOrdersCount:q.length,onlineOrdersCount:V.length,sampleOnlineOrder:V[0]||"No online orders",additionalOrdersCount:oe.length}),V.length>0&&(console.log(" CategoryOrders - First 3 online orders structure:"),V.slice(0,3).forEach((ee,se)=>{var fe,ue;console.log(`  Order ${se+1}:`,{id:ee._id,orderId:ee.orderId||ee.orderNumber,categoryName:ee.categoryName,name:ee.name,deliveryOption:ee.deliveryOption,createdAt:ee.createdAt,items:((fe=ee.items)==null?void 0:fe.length)||0,itemsDetails:((ue=ee.items)==null?void 0:ue.map(We=>({name:We.name||We.itemName,quantity:We.quantity,price:We.price,categoryId:We.categoryId,categoryName:We.categoryName,fullItemStructure:We})))||[]})}));const U=V.map(ee=>{var We,we;let se="Restaurant";const fe=(ee.orderId||ee.orderNumber||ee._id||"").toLowerCase();if(fe.includes("-tm-")||fe.includes("temple")?se="Temple Meals":fe.includes("-ss-")||fe.includes("counter")?se="Self Service":fe.includes("-res-")&&(se="Restaurant"),ee.items&&ee.items.length>0){const Me=ee.items.map(Ee=>Ee.categoryId).filter(Boolean);if(Me.length>0){const Ee={};Me.forEach(re=>{Ee[re]=(Ee[re]||0)+1});const Be=Object.keys(Ee).reduce((re,ce)=>Ee[re]>Ee[ce]?re:ce),it={"692fe2788b36a58df247e06f":"Restaurant","692fe2978b36a58df247e072":"Self Service","692fe2ae8b36a58df247e075":"Temple Meals"};it[Be]&&(se=it[Be])}}const ue={...ee,customerName:ee.name||ee.customerName||"Mobile User",customerMobile:ee.phone||ee.customerMobile||ee.customerPhone,tableNumber:ee.tableNumber||"Mobile Order",branchName:((We=ee.branchId)==null?void 0:We.name)||ee.branchName||"Hotel Virat",grandTotal:ee.total||ee.grandTotal||ee.totalAmount,status:ee.status||"pending",items:ee.items||[],categoryName:se};return console.log("DEBUG - Transformed online order:",{orderId:ue.orderId||ue.orderNumber||ue._id,originalCategoryName:ee.categoryName,assignedCategoryName:ue.categoryName,hasDeliveryAddress:!!ee.deliveryAddress,deliveryOption:ee.deliveryOption,tableNumber:ue.tableNumber,orderSource:ee.orderSource,itemCategoryIds:((we=ee.items)==null?void 0:we.map(Me=>Me.categoryId))||[]}),ue}),H=[...q,...U,...oe].filter((ee,se,fe)=>{const ue=ee.orderId||ee.orderNumber||ee._id;return se===fe.findIndex(We=>(We.orderId||We.orderNumber||We._id)===ue)});console.log(" CategoryOrders - All unique orders before filtering:",{totalOrders:H.length,orderIds:H.map(ee=>ee.orderId||ee.orderNumber||ee._id).slice(0,10),sampleOrderDetails:H.slice(0,3).map(ee=>{var se;return{id:ee.orderId||ee.orderNumber||ee._id,categoryName:ee.categoryName,items:((se=ee.items)==null?void 0:se.map(fe=>({name:fe.name,categoryId:fe.categoryId,categoryName:fe.categoryName})))||[]}})});const Q=H.filter(ee=>{var Me,Ee,Be,it,re,ce,Z,de,te,Se;const se=ee.orderId||ee.orderNumber||ee._id||"UNKNOWN";if(!se||se==="UNKNOWN")return!1;const fe=((Me=ee.categoryName)==null?void 0:Me.toLowerCase().trim())||"",ue=t.categoryName.toLowerCase().trim(),We=se.toLowerCase();if(console.log(` CategoryOrders - Filtering order ${se}:`,{orderCategoryName:fe,staffCategoryName:ue,orderIdLower:We,orderSource:ee.orderSource,hasItems:!!((Ee=ee.items)!=null&&Ee.length),itemsCount:((Be=ee.items)==null?void 0:Be.length)||0,firstItemCategoryId:(re=(it=ee.items)==null?void 0:it[0])==null?void 0:re.categoryId,firstItemCategoryName:((Z=(ce=ee.items)==null?void 0:ce[0])==null?void 0:Z.categoryName)||((Se=(te=(de=ee.items)==null?void 0:de[0])==null?void 0:te.categoryId)==null?void 0:Se.name)}),fe&&fe!==""&&(fe===ue||fe.replace(/\s+/g,"")===ue.replace(/\s+/g,"")))return console.log(` CategoryOrders - Order ${se} matched by category name`),!0;if((ue.includes("self")||ue.includes("service"))&&(We.includes("-ss-")||We.includes("counter")))return console.log(` CategoryOrders - Order ${se} matched Self Service by ID pattern`),!0;if((ue.includes("temple")||ue.includes("meal"))&&(We.includes("-tm-")||We.includes("temple")))return console.log(` CategoryOrders - Order ${se} matched Temple Meals by ID pattern`),!0;if(ue.includes("restaurant")&&We.includes("-res-"))return console.log(` CategoryOrders - Order ${se} matched Restaurant by ID pattern`),!0;if(ee.items&&Array.isArray(ee.items)&&ee.items.some(tt=>{var Ae,Qe;const ze=((Ae=tt.categoryId)==null?void 0:Ae._id)||tt.categoryId,Ze=((Qe=tt.categoryId)==null?void 0:Qe.name)||tt.categoryName;if(ze===_)return console.log(` CategoryOrders - Order ${se} matched by item categoryId: ${ze}`),!0;if(Ze){const pt=Ze.toLowerCase().trim();if(pt===ue||pt.replace(/\s+/g,"")===ue.replace(/\s+/g,""))return console.log(` CategoryOrders - Order ${se} matched by item categoryName: ${Ze}`),!0}return!1}))return!0;const we=C(ee);return we&&we.toLowerCase().trim()===ue?(console.log(` CategoryOrders - Order ${se} matched by determined category: ${we}`),!0):(console.log(` CategoryOrders - Order ${se} did not match any criteria`),!1)});console.log(" CategoryOrders - Filtering summary:",{totalUniqueOrders:H.length,categoryOrdersFound:Q.length,staffCategoryName:t.categoryName,categoryOrderIds:Q.map(ee=>ee.orderId||ee.orderNumber||ee._id).slice(0,5)});let le=Q;Q.length===0&&H.length>0&&(console.log(" CategoryOrders - No category orders found, showing all orders for debugging"),le=H);let me=le;v!=="all"&&(me=me.filter(ee=>ee.status===v));const je=me.filter(ee=>ee.orderId||ee.orderNumber||ee._id).sort((ee,se)=>{const fe=new Date(ee.orderTime||ee.createdAt||0);return new Date(se.orderTime||se.createdAt||0)-fe}).map((ee,se)=>{var fe,ue;return{id:ee._id||`temp-id-${se}`,orderId:ee.orderId||ee.orderNumber||`UNKNOWN-${se}`,customer:ee.isGuestOrder?ee.customerName:((fe=ee.userId)==null?void 0:fe.name)||"Unknown",customerType:ee.isGuestOrder?"Guest":"Staff",customerMobile:ee.isGuestOrder?ee.customerMobile:((ue=ee.userId)==null?void 0:ue.mobile)||"N/A",date:new Date(ee.orderTime||ee.createdAt||Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),branch:ee.branchName||"Unknown Branch",tableNumber:ee.tableNumber||"N/A",peopleCount:ee.peopleCount||0,items:(()=>{var ce;if(!ee.items||!Array.isArray(ee.items))return[];if(Q.length===0&&H.length>0)return console.log(" CategoryOrders - Debug mode: showing all items for order",ee.orderId||ee.orderNumber||ee._id),ee.items;const We=ee.orderId||ee.orderNumber||ee._id||"",we=((ce=ee.categoryName)==null?void 0:ce.toLowerCase().trim())||"",Me=t.categoryName.toLowerCase().trim(),Ee=We.toLowerCase(),Be=we===Me||we.replace(/\s+/g,"")===Me.replace(/\s+/g,""),it=Me.includes("restaurant")&&Ee.includes("-res-")||Me.includes("self")&&(Ee.includes("-ss-")||Ee.includes("counter"))||Me.includes("temple")&&(Ee.includes("-tm-")||Ee.includes("temple"));if(Be||it)return console.log(` CategoryOrders - Order ${We} matched by name/pattern, showing all ${ee.items.length} items`),ee.items;const re=ee.items.filter(Z=>{var Se,Ve;const de=((Se=Z.categoryId)==null?void 0:Se._id)||Z.categoryId,te=((Ve=Z.categoryId)==null?void 0:Ve.name)||Z.categoryName;if(console.log(" CategoryOrders - Filtering item:",{itemName:Z.name||Z.itemName,itemCategoryId:de,itemCategoryName:te,targetCategoryId:_,targetCategoryName:t.categoryName,fullItem:Z}),de===_)return console.log(` CategoryOrders - Item matched by categoryId: ${Z.name||Z.itemName}`),!0;if(te){const tt=te.toLowerCase().trim(),ze=t.categoryName.toLowerCase().trim();if(tt===ze||tt.replace(/\s+/g,"")===ze.replace(/\s+/g,""))return console.log(` CategoryOrders - Item matched by categoryName: ${Z.name||Z.itemName}`),!0}return console.log(` CategoryOrders - Item did not match: ${Z.name||Z.itemName}`),!1});return console.log(` CategoryOrders - Order ${We} item filtering: ${re.length}/${ee.items.length} items matched`),re})(),allItems:ee.items||[],status:ee.status||"pending",paymentStatus:ee.paymentStatus||"pending",grandTotal:ee.grandTotal||0,originalOrder:ee,sortDate:new Date(ee.orderTime||ee.createdAt||0)}});s(je)}catch(_){console.error("Error fetching orders:",_),p("Failed to load orders. Please try again.")}finally{u(!1)}}};w.useEffect(()=>{const _=a.filter(R=>{var G,oe,q;if(!b.trim())return!0;const W=b.trim().toLowerCase();return((G=R.orderId)==null?void 0:G.toLowerCase().includes(W))||((oe=R.tableNumber)==null?void 0:oe.toLowerCase().includes(W))||((q=R.customer)==null?void 0:q.toLowerCase().includes(W))});l(_)},[a,b]);const I=_=>{S(_),E(!0)},z=async(_,R)=>{var W,G;try{const oe=_.tableNumber==="Mobile Order"||((W=_.originalOrder)==null?void 0:W.tableNumber)==="Mobile Order",V=((G=_.originalOrder)==null?void 0:G.isGuestOrder)!==void 0&&!oe?`/staff-order/${_.id}/payment-status`:`/order/${_.id}/payment-status`;console.log(" Payment Status Update:",{orderId:_.orderId,endpoint:V,newPaymentStatus:R}),await vr(V,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:R})}),g(`Order ${_.orderId} payment status updated to ${R}`),setTimeout(()=>g(""),3e3),k()}catch(oe){console.error("Error updating payment status:",oe),p("Failed to update payment status"),setTimeout(()=>p(""),3e3)}},B=async(_,R)=>{var W,G;try{const oe=_.tableNumber==="Mobile Order"||((W=_.originalOrder)==null?void 0:W.tableNumber)==="Mobile Order",q=((G=_.originalOrder)==null?void 0:G.isGuestOrder)!==void 0&&!oe;console.log(" Status Update Debug:",{orderId:_.orderId,tableNumber:_.tableNumber,isMobileOrder:oe,isActualStaffOrder:q,originalOrder:!!_.originalOrder});const V=q?`/staff-order/${_.id}/status`:`/order/${_.id}/status`;let U=R;q||R==="served"&&(U="delivered"),console.log(" Status Update:",{endpoint:V,statusToSend:U,originalStatus:R}),await vr(V,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:U})}),g(`Order ${_.orderId} status updated to ${R}`),setTimeout(()=>g(""),3e3),k()}catch(oe){console.error("Error updating status:",oe),p("Failed to update order status"),setTimeout(()=>p(""),3e3)}},M=_=>{const W=_.items.reduce((oe,q)=>oe+q.price*q.quantity,0),G=window.open("","_blank","width=302,height=600");G.document.write(`
      <html>
        <head>
          <title>Bill</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            @page { 
              size: 80mm auto; 
              margin: 0; 
            }
            @media print {
              html, body { 
                width: 80mm; 
                margin: 0; 
                padding: 0;
              }
            }
            body {
              font-family: 'Courier New', Courier, monospace;
              font-size: 11px;
              width: 72mm;
              padding: 3mm;
              line-height: 1.3;
            }
            .center { text-align: center; }
            .right { text-align: right; }
            .bold { font-weight: bold; }
            .line { border-top: 1px dashed #000; margin: 4px 0; }
            .double-line { border-top: 1px solid #000; border-bottom: 1px solid #000; height: 3px; margin: 4px 0; }
            table { width: 100%; border-collapse: collapse; }
            td { padding: 1px 0; vertical-align: top; }
            .item-name { width: 45%; }
            .item-qty { width: 15%; text-align: center; }
            .item-price { width: 40%; text-align: right; }
            h2 { margin: 3px 0; font-size: 14px; }
            p { margin: 2px 0; }
            .footer { margin-top: 8px; font-size: 10px; }
            .total-row { font-size: 13px; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="center">
            <h2>HOTEL VIRAT</h2>
            <p>${t.categoryName}</p>
          </div>
          <div class="line"></div>
          
          <p><strong>Bill No:</strong> ${_.orderId}</p>
          <p><strong>Date:</strong> ${_.date}</p>
          <p><strong>Customer:</strong> ${_.customer}</p>
          ${_.tableNumber!=="N/A"?`<p><strong>Table:</strong> ${_.tableNumber}</p>`:""}
          
          <div class="double-line"></div>
          
          <table>
            <tr class="bold">
              <td class="item-name">Item</td>
              <td class="item-qty">Qty</td>
              <td class="item-price">Amount</td>
            </tr>
          </table>
          
          <div class="line"></div>
          
          <table>
            ${_.items.map(oe=>`
              <tr>
                <td class="item-name">${oe.name}</td>
                <td class="item-qty">${oe.quantity}</td>
                <td class="item-price">${oe.price*oe.quantity}</td>
              </tr>
            `).join("")}
          </table>
          
          <div class="line"></div>
          
          <div class="double-line"></div>
          
          <table>
            <tr class="bold total-row">
              <td>TOTAL</td>
              <td class="right">${W}</td>
            </tr>
          </table>
          
          <div class="double-line"></div>
          
          <div class="center footer">
            <p class="bold">Thank you for your visit!</p>
            <p>Please visit again</p>
            <p>---</p>
          </div>
        </body>
      </html>
    `),G.document.close(),G.focus(),setTimeout(()=>{G.print(),G.close()},250)},F=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userType"),localStorage.removeItem("categoryStaffData"),e("/login")},N=_=>{var W;const R=(W=_.status)==null?void 0:W.toLowerCase();return R==="pending"||R==="confirmed"},L=_=>{var R;return((R=_.status)==null?void 0:R.toLowerCase())==="preparing"},P=_=>{var W;const R=(W=_.status)==null?void 0:W.toLowerCase();return["served","completed","delivered","out for delivery"].includes(R)};return t?r.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"15px 20px",backgroundColor:"#4f46e5",borderRadius:"8px",color:"white"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{margin:0,fontSize:"24px"},children:"Category Orders"}),r.jsxs("p",{style:{margin:"5px 0 0",opacity:.9},children:[t.name," - ",t.categoryName]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[r.jsx(ai,{size:16})," Refresh"]}),r.jsxs("button",{onClick:F,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#dc2626",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[r.jsx(pm,{size:16})," Logout"]})]})]}),m&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:m}),r.jsx("button",{onClick:()=>g(""),children:r.jsx(On,{size:16})})]}),!d&&r.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#f0f9ff",color:"#0369a1",borderRadius:"6px",marginBottom:"20px",fontSize:"14px",fontWeight:"500",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{children:["Found ",i.length," order",i.length!==1?"s":""," for ",t.categoryName]}),i.length>10&&r.jsx("span",{style:{fontSize:"12px",opacity:.8},children:" Scroll down to see more orders"})]}),r.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap",alignItems:"center"},children:[r.jsxs("div",{style:{position:"relative",flex:1,minWidth:"250px"},children:[r.jsx(Tr,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),r.jsx("input",{type:"text",placeholder:"Search by order ID, table, or customer...",value:b,onChange:_=>j(_.target.value),style:{width:"100%",padding:"10px 10px 10px 40px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px"}})]}),r.jsxs("select",{value:v,onChange:_=>y(_.target.value),style:{padding:"10px 15px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px",minWidth:"150px"},children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"preparing",children:"Preparing"}),r.jsx("option",{value:"served",children:"Served"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),h&&r.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:h})]}),r.jsx("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"auto",maxHeight:"60vh"},children:d?r.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[r.jsx($a,{size:24,className:"animate-spin",style:{margin:"0 auto 10px"}}),r.jsx("p",{children:"Loading orders..."})]}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{style:{position:"sticky",top:0,backgroundColor:"#f9fafb",zIndex:10},children:r.jsxs("tr",{children:[r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Order ID"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Customer"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Table"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Date"}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Payment"}),r.jsxs("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:["Items (",t.categoryName,")"]}),r.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:"600",borderBottom:"1px solid #e5e7eb"},children:"Actions"})]})}),r.jsx("tbody",{children:i.length>0?i.map(_=>r.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[r.jsx("td",{style:{padding:"12px 16px"},children:_.orderId}),r.jsx("td",{style:{padding:"12px 16px"},children:_.customer}),r.jsx("td",{style:{padding:"12px 16px"},children:_.tableNumber}),r.jsx("td",{style:{padding:"12px 16px"},children:_.date}),r.jsx("td",{style:{padding:"8px 12px"},children:r.jsxs("select",{value:_.paymentStatus||"pending",onChange:R=>z(_,R.target.value),style:{padding:"4px 8px",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"12px",backgroundColor:_.paymentStatus==="completed"?"#d1fae5":_.paymentStatus==="failed"?"#fee2e2":_.paymentStatus==="refunded"?"#e0e7ff":"#fef3c7",color:_.paymentStatus==="completed"?"#065f46":_.paymentStatus==="failed"?"#991b1b":_.paymentStatus==="refunded"?"#5b21b6":"#92400e",cursor:"pointer"},children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"failed",children:"Failed"}),r.jsx("option",{value:"refunded",children:"Refunded"})]})}),r.jsx("td",{style:{padding:"12px 16px"},children:_.items.length===0?r.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",fontStyle:"italic"},children:["No ",t.categoryName," items"]}):_.items.map((R,W)=>(console.log(` CategoryOrders - Rendering item ${W}:`,{name:R.name,quantity:R.quantity,price:R.price,categoryId:R.categoryId,categoryName:R.categoryName,fullItem:R}),r.jsxs("div",{style:{fontSize:"13px"},children:[R.name||R.itemName||"Unknown Item"," x ",R.quantity||1]},W)))}),r.jsx("td",{style:{padding:"12px 16px"},children:r.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[r.jsx("button",{onClick:()=>I(_),style:{padding:"5px 10px",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"View"}),N(_)&&r.jsx("button",{onClick:()=>B(_,"preparing"),style:{padding:"5px 10px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Preparing"}),L(_)&&r.jsx("button",{onClick:()=>B(_,"served"),style:{padding:"5px 10px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Served"}),P(_)&&r.jsxs("button",{onClick:()=>M(_),style:{padding:"5px 10px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(_s,{size:12})," Print"]})]})})]},_.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"7",style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"No orders found for your category"})})})]})}),A&&O&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h3",{style:{margin:0},children:["Order Details - ",O.orderId]}),r.jsx("button",{onClick:()=>E(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px"},children:""})]}),r.jsxs("div",{style:{padding:"20px"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Customer:"})," ",O.customer]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Type:"})," ",O.customerType]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Mobile:"})," ",O.customerMobile]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Table:"})," ",O.tableNumber]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",O.date]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Branch:"})," ",O.branch]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textAlign:"center",minWidth:"60px",backgroundColor:O.status==="completed"?"#d1fae5":O.status==="preparing"?"#dbeafe":O.status==="served"?"#e0e7ff":O.status==="cancelled"?"#fee2e2":"#fef3c7",color:O.status==="completed"?"#065f46":O.status==="preparing"?"#1e40af":O.status==="served"?"#5b21b6":O.status==="cancelled"?"#991b1b":"#92400e",border:"1px solid "+(O.status==="completed"?"#10b981":O.status==="preparing"?"#3b82f6":O.status==="served"?"#8b5cf6":O.status==="cancelled"?"#ef4444":"#f59e0b")},children:O.status?O.status.charAt(0).toUpperCase()+O.status.slice(1):"Pending"})]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Payment:"})," ",r.jsx("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",textAlign:"center",minWidth:"60px",backgroundColor:O.paymentStatus==="completed"?"#d1fae5":O.paymentStatus==="failed"?"#fee2e2":O.paymentStatus==="refunded"?"#e0e7ff":"#fef3c7",color:O.paymentStatus==="completed"?"#065f46":O.paymentStatus==="failed"?"#991b1b":O.paymentStatus==="refunded"?"#5b21b6":"#92400e",border:"1px solid "+(O.paymentStatus==="completed"?"#10b981":O.paymentStatus==="failed"?"#ef4444":O.paymentStatus==="refunded"?"#8b5cf6":"#f59e0b")},children:O.paymentStatus?O.paymentStatus.charAt(0).toUpperCase()+O.paymentStatus.slice(1):"Pending"})]})]}),r.jsxs("h4",{style:{marginBottom:"10px"},children:["Items from ",t.categoryName,":"]}),r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"15px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[r.jsx("th",{style:{padding:"10px",textAlign:"left",border:"1px solid #e5e7eb"},children:"Item"}),r.jsx("th",{style:{padding:"10px",textAlign:"center",border:"1px solid #e5e7eb"},children:"Qty"}),r.jsx("th",{style:{padding:"10px",textAlign:"right",border:"1px solid #e5e7eb"},children:"Price"})]})}),r.jsx("tbody",{children:O.items.map((_,R)=>r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"10px",border:"1px solid #e5e7eb"},children:_.name}),r.jsx("td",{style:{padding:"10px",textAlign:"center",border:"1px solid #e5e7eb"},children:_.quantity}),r.jsxs("td",{style:{padding:"10px",textAlign:"right",border:"1px solid #e5e7eb"},children:["",(_.price*_.quantity).toFixed(2)]})]},R))})]})]}),r.jsxs("div",{style:{padding:"16px 20px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[N(O)&&r.jsx("button",{onClick:()=>{B(O,"preparing"),E(!1)},style:{padding:"8px 16px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Mark Preparing"}),L(O)&&r.jsx("button",{onClick:()=>{B(O,"served"),E(!1)},style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Mark Served"}),P(O)&&r.jsxs("button",{onClick:()=>M(O),style:{padding:"8px 16px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(_s,{size:16})," Print Bill"]})]}),r.jsx("button",{onClick:()=>E(!1),style:{padding:"8px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Close"})]})]})})]}):r.jsx("div",{className:"loading-container",children:r.jsx($a,{size:24,className:"animate-spin"})})},wfe=`
  .status-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    text-transform: capitalize;
    min-width: 60px;
    text-align: center;
  }
  
  .status-badge.pending {
    background: #fef3c7;
    color: #92400e;
    border: 1px solid #f59e0b;
  }
  
  .status-badge.preparing {
    background: #dbeafe;
    color: #1e40af;
    border: 1px solid #3b82f6;
  }
  
  .status-badge.served {
    background: #e0e7ff;
    color: #5b21b6;
    border: 1px solid #8b5cf6;
  }
  
  .status-badge.completed {
    background: #d1fae5;
    color: #065f46;
    border: 1px solid #10b981;
  }
  
  .status-badge.cancelled {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #ef4444;
  }
`;if(typeof document<"u"){const e=document.createElement("style");e.type="text/css",e.innerText=wfe,document.head.appendChild(e)}const Sfe=()=>{var W;const[e,t]=w.useState(!0),[n,a]=w.useState(null),[s,i]=w.useState([]),[l,d]=w.useState("selfservice"),[u,h]=w.useState(""),[p,m]=w.useState("all"),[g,b]=w.useState([]),[j,v]=w.useState([]),[y,A]=w.useState([]),[E,O]=w.useState(!1),[S,C]=w.useState(null);w.useEffect(()=>{k()},[]);const k=async()=>{try{t(!0),a(null);const oe=await fetch("https://hotelvirat.com/api/v1/hotel/counter-order/orders?includeComplimentary=false");if(!oe.ok)throw new Error(`HTTP error! status: ${oe.status}`);const q=await oe.json();let V=[];q.success&&Array.isArray(q.data)?V=q.data:q.orders&&Array.isArray(q.orders)?V=q.orders:Array.isArray(q)&&(V=q),console.log(" Fetched counter orders:",V.length);const X=V.filter(H=>{var le;const Q=!!(H.invoiceNumber||(le=H.invoice)!=null&&le.invoiceNumber);return Q||console.log(" Excluding order without invoice:",{id:H.id||H._id,kotNumber:H.kotNumber,customerName:H.customerName,reason:"No invoice number - KOT only"}),Q}).sort((H,Q)=>{const le=new Date(H.createdAt||H.orderDate||0);return new Date(Q.createdAt||Q.orderDate||0)-le});console.log(" Orders with invoices (bills):",X.length),console.log(" Excluded KOT-only orders:",V.length-X.length),console.log(" Orders sorted by recent time (newest first)"),i(X),I(X)}catch(G){console.error("Error fetching orders:",G),a(`Failed to load orders: ${G.message}`)}finally{t(!1)}},I=G=>{const oe=[],q=[],V=[];console.log(" Starting categorization of",G.length,"orders"),console.log(" Using categoryName field for filtering"),G.forEach((U,X)=>{var se;let H="self-service",Q="default";const le=(U.categoryName||"").toLowerCase().trim(),me=(U.customerName||"").toLowerCase(),je=!!(U.tableNumber||U.tableId);X<10&&console.log(` Order ${X+1} categorization data:`,{orderId:U.id||U._id,categoryName:le,customerName:me,hasTable:je,tableNumber:U.tableNumber,tableId:U.tableId});const ee=(se=U.invoice)!=null&&se.invoiceNumber?`BILL-${U.invoice.invoiceNumber}`:U.invoiceNumber||U.kotNumber||`Order #${X+1}`;if(ee.startsWith("Order #")){console.log(' Skipping order starting with "Order #":',ee);return}le?le.includes("temple")||le==="temple meals"||le==="temple meal"?(V.push(U),H="temple-meals",Q=`categoryName contains temple: ${le}`):le.includes("restaurant")?(q.push(U),H="restaurant",Q=`categoryName contains restaurant: ${le}`):le.includes("self service")||le.includes("self-service")||le.includes("darshini")||le==="self service"||le==="darshini"?(oe.push(U),H="self-service",Q=`categoryName indicates self-service: ${le}`):je?(q.push(U),H="restaurant",Q=`fallback: has table (categoryName: ${le})`):(oe.push(U),H="self-service",Q=`fallback: no table (categoryName: ${le})`):(console.log(" No categoryName - using fallback detection for order:",U.id||U._id),(U.items||[]).some(ue=>{const We=(ue.name||"").toLowerCase();return We.includes("temple")||We.includes("prasad")||We.includes("holige")||We.includes("kashaya")})?(V.push(U),H="temple-meals",Q="fallback: temple items detected"):je?(q.push(U),H="restaurant",Q="fallback: has table, no categoryName"):(oe.push(U),H="self-service",Q="fallback: no table, no categoryName")),X<10&&console.log(` Order ${X+1}  ${H} (${Q})`)}),b(oe),v(q),A(V),console.log(" Final categorization:"),console.log(" Self Service Orders:",oe.length),console.log(" Restaurant Orders:",q.length),console.log(" Temple Meal Orders:",V.length),q.length>0&&console.log(" Restaurant Examples:",q.slice(0,2).map(U=>({id:U.id||U._id,customerName:U.customerName,tableNumber:U.tableNumber,source:U.orderSource}))),oe.length>0&&console.log(" Self Service Examples:",oe.slice(0,2).map(U=>({id:U.id||U._id,customerName:U.customerName,tableNumber:U.tableNumber,source:U.orderSource})))},z=()=>{let G=[];switch(l){case"selfservice":G=g;break;case"restaurant":G=j;break;case"templemeals":G=y;break;default:G=[]}let oe=G;return u&&(oe=oe.filter(q=>new Date(q.createdAt||q.orderDate).toISOString().split("T")[0]===u)),p!=="all"&&(oe=oe.filter(q=>(q.orderStatus||q.status||"completed").toLowerCase()===p)),oe},B=G=>{const oe=G.length,q=G.reduce((X,H)=>X+(H.grandTotal||H.totalAmount||0),0),V=G.filter(X=>(X.orderStatus||X.status||"completed").toLowerCase()==="completed").length,U=oe-V;return{totalOrders:oe,totalRevenue:q,completedOrders:V,pendingOrders:U,averageOrder:oe>0?q/oe:0}},M=()=>{const G=z(),oe=l==="selfservice"?"Self Service":l==="restaurant"?"Restaurant":"Temple Meals",q=G.map(X=>{var H,Q;return{"Order ID":X.orderId||X.id||"N/A","Invoice Number":((H=X.invoice)==null?void 0:H.invoiceNumber)||X.invoiceNumber||"N/A","Customer Name":X.customerName||"Walk-in Customer","Phone Number":X.phoneNumber||"N/A","Order Date":new Date(X.createdAt||X.orderDate).toLocaleDateString(),"Total Amount":X.grandTotal||X.totalAmount||0,Status:X.orderStatus||X.status||"Completed","Payment Method":X.paymentMethod||"Cash","Items Count":(X.items||[]).length,Branch:((Q=X.branch)==null?void 0:Q.name)||"N/A","Table Number":X.tableNumber||"N/A"}}),V=to.json_to_sheet(q),U=to.book_new();to.book_append_sheet(U,V,`${oe} Orders`),iN(U,`${oe.toLowerCase().replace(" ","-")}-orders-${new Date().toISOString().split("T")[0]}.xlsx`)},F=G=>{C(G),O(!0)},N=()=>{O(!1),C(null)},L=G=>{try{const oe=new Date(G);return oe.toLocaleDateString("en-IN")+" "+oe.toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}catch{return G}},P=G=>{switch(G==null?void 0:G.toLowerCase()){case"completed":return"#48bb78";case"pending":return"#ed8936";case"cancelled":return"#f56565";default:return"#718096"}};if(e)return r.jsx("div",{className:"page-container",children:r.jsxs("div",{className:"loading-container",children:[r.jsx(ai,{size:24,className:"animate-spin"}),r.jsx("p",{children:"Loading categorized orders..."})]})});if(n)return r.jsx("div",{className:"page-container",children:r.jsxs("div",{className:"error-container",children:[r.jsx("h3",{children:"Error"}),r.jsx("p",{children:n}),r.jsx("button",{className:"btn btn-primary",onClick:k,children:"Retry"})]})});const _=z(),R=B(_);return r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:" Categorized Orders"}),r.jsx("p",{children:"View orders by service category - Self Service, Restaurant & Temple Meals"}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("button",{className:"btn btn-outline",onClick:k,children:[r.jsx(ai,{size:16}),"Refresh"]}),r.jsxs("button",{className:"btn btn-primary",onClick:M,children:[r.jsx(Sa,{size:16}),"Export Excel"]})]})]}),r.jsx("div",{className:"tabs-container",children:r.jsxs("div",{className:"tabs",children:[r.jsxs("button",{className:`tab ${l==="selfservice"?"active":""}`,onClick:()=>d("selfservice"),children:[r.jsx(s5,{size:16}),"Self Service Orders",r.jsx("span",{className:"badge",children:g.length})]}),r.jsxs("button",{className:`tab ${l==="restaurant"?"active":""}`,onClick:()=>d("restaurant"),children:[r.jsx(ei,{size:16}),"Restaurant Orders",r.jsx("span",{className:"badge",children:j.length})]}),r.jsxs("button",{className:`tab ${l==="templemeals"?"active":""}`,onClick:()=>d("templemeals"),children:[r.jsx(rn,{size:16}),"Temple Meal Orders",r.jsx("span",{className:"badge",children:y.length})]})]})}),r.jsx("div",{className:"filters-container",children:r.jsxs("div",{className:"filters",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Date Filter:"}),r.jsx("input",{type:"date",value:u,onChange:G=>h(G.target.value),className:"filter-input"})]}),r.jsxs("button",{className:"btn btn-outline",onClick:()=>{h(""),m("all")},children:[r.jsx(cd,{size:16}),"Clear Filters"]})]})}),r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(Th,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{children:R.totalOrders}),r.jsx("p",{children:"Total Orders"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(r5,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("h3",{children:["",R.totalRevenue.toFixed(2)]}),r.jsx("p",{children:"Total Revenue"})]})]})]}),r.jsxs("div",{className:"orders-container",children:[r.jsx("div",{className:"orders-header",children:r.jsxs("h2",{children:[l==="selfservice"&&" Self Service Orders",l==="restaurant"&&" Restaurant Orders",l==="templemeals"&&" Temple Meal Orders","(",_.length,")"]})}),_.length===0?r.jsxs("div",{className:"no-orders",children:[r.jsx(Th,{size:48}),r.jsx("h3",{children:"No Orders Found"}),r.jsx("p",{children:"No orders found for the selected category and filters."})]}):r.jsx("div",{className:"orders-grid",children:_.map((G,oe)=>{var q;return r.jsxs("div",{className:"order-card",children:[r.jsxs("div",{className:"order-header",children:[r.jsxs("div",{className:"order-info",children:[r.jsx("h4",{children:(q=G.invoice)!=null&&q.invoiceNumber?`BILL-${G.invoice.invoiceNumber}`:G.invoiceNumber||`Order #${oe+1}`}),r.jsx("p",{className:"customer-name",children:G.customerName||"Walk-in Customer"}),G.tableNumber&&r.jsxs("p",{className:"table-info",children:["Table: ",G.tableNumber]}),r.jsx("p",{className:"order-date",children:L(G.createdAt||G.orderDate)})]}),r.jsxs("div",{className:"order-amount",children:[r.jsxs("div",{className:"amount",children:["",(G.grandTotal||G.totalAmount||0).toFixed(2)]}),r.jsx("div",{className:"status-badge",style:{backgroundColor:P(G.orderStatus||G.status)},children:(G.orderStatus||G.status||"Completed").toUpperCase()}),r.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>F(G),style:{marginTop:"8px",padding:"4px 8px",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(xs,{size:14}),"View"]})]})]}),r.jsx("div",{className:"order-details"}),G.items&&G.items.length>0&&r.jsxs("div",{className:"order-items",children:[r.jsx("h5",{children:"Items:"}),r.jsxs("div",{className:"items-list",children:[G.items.slice(0,3).map((V,U)=>r.jsxs("span",{className:"item-tag",children:[V.name," x",V.quantity]},U)),G.items.length>3&&r.jsxs("span",{className:"item-tag more",children:["+",G.items.length-3," more"]})]})]})]},G.id||oe)})})]}),E&&S&&r.jsx("div",{className:"modal-overlay",onClick:N,children:r.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Order Details"}),r.jsx("button",{className:"modal-close",onClick:N,children:r.jsx(On,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"order-summary",children:[r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Order ID:"}),r.jsx("span",{className:"value",children:(W=S.invoice)!=null&&W.invoiceNumber?`BILL-${S.invoice.invoiceNumber}`:S.invoiceNumber||S.id})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Customer:"}),r.jsx("span",{className:"value",children:S.customerName||"Walk-in Customer"})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Phone:"}),r.jsx("span",{className:"value",children:S.phoneNumber||"N/A"})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Date & Time:"}),r.jsx("span",{className:"value",children:L(S.createdAt||S.orderDate)})]}),S.tableNumber&&r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Table:"}),r.jsx("span",{className:"value",children:S.tableNumber})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Status:"}),r.jsx("span",{className:"value",children:r.jsx("span",{className:"status-badge",style:{backgroundColor:P(S.orderStatus||S.status)},children:(S.orderStatus||S.status||"Completed").toUpperCase()})})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Payment Method:"}),r.jsx("span",{className:"value",children:S.paymentMethod||"Cash"})]})]}),r.jsxs("div",{className:"items-section",children:[r.jsxs("h4",{children:["Ordered Items (",(S.items||[]).length,")"]}),r.jsxs("div",{className:"items-table",children:[r.jsxs("div",{className:"items-header",children:[r.jsx("span",{className:"item-name",children:"Item Name"}),r.jsx("span",{className:"item-qty",children:"Qty"}),r.jsx("span",{className:"item-price",children:"Price"}),r.jsx("span",{className:"item-total",children:"Total"})]}),(S.items||[]).map((G,oe)=>r.jsxs("div",{className:"items-row",children:[r.jsx("span",{className:"item-name",children:G.name}),r.jsx("span",{className:"item-qty",children:G.quantity}),r.jsxs("span",{className:"item-price",children:["",(G.price||0).toFixed(2)]}),r.jsxs("span",{className:"item-total",children:["",((G.price||0)*(G.quantity||1)).toFixed(2)]})]},oe))]}),r.jsx("div",{className:"order-total",children:r.jsxs("div",{className:"total-row",children:[r.jsx("span",{className:"total-label",children:"Grand Total:"}),r.jsxs("span",{className:"total-amount",children:["",(S.grandTotal||S.totalAmount||0).toFixed(2)]})]})})]})]})]})})]})},Nfe=({user:e,onClose:t,onSave:n,branches:a,isEditMode:s})=>{const[i,l]=w.useState({name:(e==null?void 0:e.name)||"",username:(e==null?void 0:e.username)||"",password:"",branchId:(e==null?void 0:e.branchId)||"",branchName:(e==null?void 0:e.branchName)||"",isActive:(e==null?void 0:e.isActive)!==!1}),[d,u]=w.useState(!1),[h,p]=w.useState(null),[m,g]=w.useState(!1),b=v=>{const{name:y,value:A,type:E,checked:O}=v.target;if(y==="branchId"){const S=a.find(C=>C._id===A);l({...i,branchId:A,branchName:(S==null?void 0:S.name)||""})}else l({...i,[y]:E==="checkbox"?O:A});p(null)},j=async v=>{v.preventDefault(),p(null),g(!0);try{if(!s&&!i.password)throw new Error("Password is required");await n(i,e==null?void 0:e._id),t()}catch(y){p(y.message||"Failed to save receptionist")}finally{g(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:s?"Edit Receptionist":"Add Receptionist"}),r.jsx("button",{className:"modal-close",onClick:t,children:""})]}),r.jsxs("form",{onSubmit:j,children:[r.jsxs("div",{className:"modal-body",children:[h&&r.jsx("div",{className:"alert-message",style:{backgroundColor:"#fee2e2",borderColor:"#dc2626",color:"#dc2626",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:h}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",htmlFor:"branchId",children:"Branch"}),r.jsxs("select",{id:"branchId",name:"branchId",className:"form-select",value:i.branchId,onChange:b,disabled:m,children:[r.jsx("option",{value:"",children:"All Branches"}),a.map(v=>r.jsx("option",{value:v._id,children:v.name},v._id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"name",children:["Receptionist Name ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",className:"form-input",value:i.name,onChange:b,required:!0,disabled:m,placeholder:"Enter receptionist name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"username",children:["Username ",r.jsx("span",{className:"required",children:"*"})]}),r.jsx("input",{type:"text",id:"username",name:"username",className:"form-input",value:i.username,onChange:b,required:!0,disabled:m,placeholder:"Enter username for login"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",htmlFor:"password",children:["Password ",!s&&r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx("input",{type:d?"text":"password",id:"password",name:"password",className:"form-input",value:i.password,onChange:b,required:!s,disabled:m,placeholder:s?"Leave blank to keep current":"Enter password",style:{paddingRight:"40px"}}),r.jsx("button",{type:"button",onClick:()=>u(!d),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:d?r.jsx(_w,{size:18}):r.jsx(xs,{size:18})})]})]}),s&&r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("input",{type:"checkbox",name:"isActive",checked:i.isActive,onChange:b,disabled:m}),"Active"]})})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:m,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Saving...":s?"Update":"Add Receptionist"})]})]})]})})},Tfe=({user:e,onClose:t,onConfirm:n})=>{const[a,s]=w.useState(!1),i=async()=>{s(!0);try{await n(e._id),t()}catch(l){console.error("Error deleting:",l)}finally{s(!1)}};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",style:{maxWidth:"400px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Delete Receptionist"}),r.jsx("button",{className:"modal-close",onClick:t,disabled:a,children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("p",{children:["Are you sure you want to delete ",r.jsx("strong",{children:e.name}),"?"]}),r.jsx("p",{style:{color:"#dc2626",marginTop:"10px"},children:"This action cannot be undone."})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"}),r.jsx("button",{type:"button",className:"btn",style:{backgroundColor:"#dc2626",color:"white",borderColor:"#dc2626"},onClick:i,disabled:a,children:a?"Deleting...":"Delete"})]})]})})},Cfe=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState(""),[l,d]=w.useState(!1),[u,h]=w.useState(null),[p,m]=w.useState(!1),[g,b]=w.useState(null),[j,v]=w.useState(""),[y,A]=w.useState(""),[E,O]=w.useState(!1),S="https://hotelvirat.com/api/v1/hotel/receptionist-access",C="https://hotelvirat.com/api/v1/hotel/branch",k=async()=>{try{const _=await fetch(C);if(!_.ok)throw new Error("Failed to fetch branches");const R=await _.json();a(Array.isArray(R)?R:[])}catch(_){console.error("Error fetching branches:",_)}},I=async()=>{O(!0),A("");try{const _=await fetch(S);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);const R=await _.json();let W=[];R.success&&Array.isArray(R.data)?W=R.data:Array.isArray(R)?W=R:R.message&&R.message.includes("routes working")&&(W=[]),t(W)}catch(_){console.error("Fetch error:",_),A(`Failed to fetch receptionists: ${_.message}`),t([])}finally{O(!1)}};w.useEffect(()=>{k(),I()},[]);const z=()=>{h(null),d(!0)},B=_=>{h(_),d(!0)},M=_=>{b(_),m(!0)},F=async(_,R)=>{try{const W=R?`${S}/${R}`:S,G=R?"PUT":"POST",oe={..._};R&&!oe.password&&delete oe.password;const q=await fetch(W,{method:G,headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),V=await q.json();if(!q.ok)throw new Error(V.message||"Failed to save");v(`Receptionist ${R?"updated":"added"} successfully`),setTimeout(()=>v(""),3e3),await I()}catch(W){throw new Error(W.message)}},N=async _=>{try{const R=await fetch(`${S}/${_}`,{method:"DELETE"}),W=await R.json();if(!R.ok)throw new Error(W.message||"Failed to delete");v("Receptionist deleted successfully"),setTimeout(()=>v(""),3e3),await I()}catch(R){A(R.message),setTimeout(()=>A(""),3e3)}},L=_=>_?new Date(_).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"N/A",P=e.filter(_=>{var R,W,G;return((R=_.name)==null?void 0:R.toLowerCase().includes(s.toLowerCase()))||((W=_.username)==null?void 0:W.toLowerCase().includes(s.toLowerCase()))||((G=_.branchName)==null?void 0:G.toLowerCase().includes(s.toLowerCase()))});return r.jsxs("div",{className:"receptionist-access-page",children:[j&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{children:j}),r.jsx("button",{onClick:()=>v(""),children:""})]}),y&&r.jsxs("div",{className:"success-message",style:{backgroundColor:"#fee2e2",color:"#dc2626"},children:[r.jsx("span",{children:y}),r.jsx("button",{onClick:()=>A(""),style:{color:"#dc2626"},children:""})]}),r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Receptionist Access"}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-primary",onClick:z,disabled:E,children:[r.jsx($d,{size:16}),r.jsx("span",{children:"Add Receptionist"})]})})]}),r.jsx("div",{className:"filters-bar",children:r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by name, username or branch...",className:"search-input",value:s,onChange:_=>i(_.target.value)})]})}),r.jsx("div",{className:"data-card",children:E?r.jsx("div",{className:"empty-state",children:"Loading..."}):P.length===0?r.jsx("div",{className:"empty-state",children:r.jsxs("p",{children:["No receptionists found. ",s?"Try a different search.":"Add a new receptionist to get started."]})}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Username"}),r.jsx("th",{children:"Branch"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Created"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:P.map(_=>{var R;return r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("div",{className:"user-avatar-placeholder",children:(R=_.name)==null?void 0:R.charAt(0).toUpperCase()}),_.name]})}),r.jsx("td",{children:r.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[r.jsx(n5,{size:14,style:{marginRight:"6px",color:"#6b7280"}}),_.username]})}),r.jsx("td",{children:_.branchName||"All Branches"}),r.jsx("td",{children:r.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",backgroundColor:_.isActive?"#dcfce7":"#fee2e2",color:_.isActive?"#166534":"#dc2626"},children:_.isActive?"Active":"Inactive"})}),r.jsx("td",{children:L(_.createdAt)}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",onClick:()=>B(_),disabled:E,children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"action-btn delete",onClick:()=>M(_),disabled:E,children:r.jsx(Yn,{size:14})})]})})]},_._id)})})]})}),l&&r.jsx(Nfe,{user:u,onClose:()=>d(!1),onSave:F,branches:n,isEditMode:!!u}),p&&r.jsx(Tfe,{user:g,onClose:()=>m(!1),onConfirm:N})]})},Afe="https://hotelvirat.com/api/v1/hotel",ra=Jt.create({baseURL:Afe,headers:{"Content-Type":"application/json"}}),Efe=({room:e,allBookings:t,onClose:n,onBook:a})=>{const[s,i]=w.useState({guestName:"",guestPhone:"",guestEmail:"",guestGstNumber:"",aadhaarNumber:"",panNumber:"",checkInDate:new Date().toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkInTime:"12:00",checkOutTime:"11:00",gstType:"none",discountPercent:"",amountPaid:"",paymentMethod:"cash"}),[l,d]=w.useState(!1),[u,h]=w.useState(""),[p,m]=w.useState(!1),[g,b]=w.useState("checkIn"),[j,v]=w.useState(new Date),[y,A]=w.useState({}),[E,O]=w.useState(!1);w.useEffect(()=>{p&&e&&e._id&&t.length>0&&W(e._id,j.getFullYear(),j.getMonth())},[t,p,e,j]);const C=(()=>{const Q=new Date(s.checkInDate),le=new Date(s.checkOutDate),me=Math.ceil((le-Q)/(1e3*60*60*24));return me>0?me:1})(),k=e.price*C,I=parseFloat(s.discountPercent)||0,z=k*I/100,B=k-z,M=s.gstType==="gst"?B*.025:0,F=s.gstType==="gst"?B*.025:0,N=s.gstType==="igst"?B*.05:0,L=M+F+N,P=B+L,_=Q=>{const{name:le,value:me}=Q.target;i({...s,[le]:me}),h("")},R=async(Q,le,me)=>{try{const je=t.filter(se=>{var ue;return(((ue=se.roomId)==null?void 0:ue._id)||se.roomId)===Q&&se.status!=="cancelled"}),ee={};return je.forEach(se=>{const fe=new Date(se.checkInDate),ue=new Date(se.checkOutDate),We=new Date(fe);for(;We<ue;){const we=We.toISOString().split("T")[0],Me=We.getFullYear(),Ee=We.getMonth();Me===le&&Ee===me&&(ee[we]||(ee[we]=[]),ee[we].push({bookingId:se._id,guestName:se.userName,checkIn:se.checkInDate,checkOut:se.checkOutDate,status:se.status})),We.setDate(We.getDate()+1)}}),ee}catch(je){return console.error("Error fetching room bookings:",je),{}}},W=async(Q,le,me)=>{if(Q){O(!0);try{const je=await R(Q,le,me),ee={},se=new Date(le,me+1,0).getDate();for(let fe=1;fe<=se;fe++){const ue=`${le}-${String(me+1).padStart(2,"0")}-${String(fe).padStart(2,"0")}`,We=je[ue]||[];ee[ue]={date:ue,bookings:We,hasBookings:We.length>0,isFullyBooked:!1}}A(ee)}catch(je){console.error("Error fetching monthly bookings:",je)}finally{O(!1)}}},G=Q=>{b(Q);const le=new Date;v(le),m(!0),A({}),e&&e._id&&W(e._id,le.getFullYear(),le.getMonth())},oe=Q=>{const le=new Date(j);le.setMonth(le.getMonth()+Q),v(le),e&&e._id&&W(e._id,le.getFullYear(),le.getMonth())},q=Q=>{const le=j.getFullYear(),me=String(j.getMonth()+1).padStart(2,"0"),je=String(Q).padStart(2,"0"),ee=`${le}-${me}-${je}`;i(g==="checkIn"?{...s,checkInDate:ee}:{...s,checkOutDate:ee}),m(!1)},V=Q=>{const le=new Date;return le.setHours(0,0,0,0),new Date(j.getFullYear(),j.getMonth(),Q)<le},U=Q=>{const le=j.getFullYear(),me=String(j.getMonth()+1).padStart(2,"0"),je=String(Q).padStart(2,"0"),ee=`${le}-${me}-${je}`,se=y[ee];return(se==null?void 0:se.hasBookings)||!1},X=Q=>{const le=Q.getFullYear(),me=Q.getMonth(),je=new Date(le,me+1,0).getDate(),ee=new Date(le,me,1).getDay();return{daysInMonth:je,firstDay:ee}},H=async Q=>{var le,me;Q.preventDefault(),d(!0),h("");try{if(!((le=s.guestName)!=null&&le.trim()))throw new Error("Guest name is required");if(!((me=s.guestPhone)!=null&&me.trim()))throw new Error("Guest phone number is required");if(!s.checkInDate)throw new Error("Check-in date is required");if(!s.checkOutDate)throw new Error("Check-out date is required");if(!/^[0-9]{10}$/.test(s.guestPhone.replace(/\D/g,"")))throw new Error("Please enter a valid 10-digit phone number");const ee=new Date(s.checkInDate),se=new Date(s.checkOutDate),fe=new Date;if(fe.setHours(0,0,0,0),ee<fe)throw new Error("Check-in date cannot be in the past");if(se<=ee)throw new Error("Check-out date must be after check-in date");if(s.aadhaarNumber&&s.aadhaarNumber.trim()&&!/^\d{12}$/.test(s.aadhaarNumber.trim()))throw new Error("Aadhaar number must be exactly 12 digits");if(s.panNumber&&s.panNumber.trim()&&!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(s.panNumber.trim().toUpperCase()))throw new Error("PAN number must be in format: ABCDE1234F");const ue=parseFloat(s.amountPaid)||0,We=s.paymentMethod||"cash",we={roomId:e._id,branchId:e.branchId,guestName:s.guestName,guestPhone:s.guestPhone,guestEmail:s.guestEmail,guestGstNumber:s.guestGstNumber,aadhaarNumber:s.aadhaarNumber?s.aadhaarNumber.trim():"",panNumber:s.panNumber?s.panNumber.trim().toUpperCase():"",checkInDate:s.checkInDate,checkOutDate:s.checkOutDate,checkInTime:s.checkInTime,checkOutTime:s.checkOutTime,nights:C,baseAmount:k,discountPercent:I||0,discountAmount:z||0,gstType:s.gstType,cgst:M,sgst:F,igst:N,totalAmount:P,amountPaid:ue,cashAmount:We==="cash"?ue:0,onlineAmount:We==="online"?ue:0,status:"checked-in",paymentStatus:ue>=P?"paid":"pending",payments:ue>0?[{amount:ue,method:We,date:new Date}]:[]};await a(we),n()}catch(je){console.error("Booking error:",je);let ee="Failed to book room";if(je.response){const{status:se,data:fe}=je.response;se===400?fe.message?ee=fe.message:fe.error?ee=fe.error:typeof fe=="string"?ee=fe:ee="Invalid booking data. Please check all required fields.":se===404?ee="Room not found. Please refresh and try again.":se===409?ee="Room is already booked for the selected dates.":se>=500&&(ee="Server error. Please try again later.")}else je.request?ee="Network error. Please check your connection and try again.":ee=je.message||"An unexpected error occurred";h(ee)}finally{d(!1)}};return r.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:[r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white",position:"relative",zIndex:10},children:[r.jsxs("h3",{style:{margin:0},children:["Book Room ",e.roomNumber]}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px"},children:""})]}),u&&r.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #fecaca",position:"relative",zIndex:10},children:[r.jsx(xr,{size:16}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:u}),r.jsx("button",{onClick:()=>h(""),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",color:"#dc2626",fontSize:"18px",padding:"0 4px"},children:""})]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:r.jsxs("form",{onSubmit:H,children:[r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Room Details"}),r.jsxs("p",{style:{margin:"5px 0"},children:[r.jsx("strong",{children:"Type:"})," ",e.roomType]}),r.jsxs("p",{style:{margin:"5px 0"},children:[r.jsx("strong",{children:"Floor:"})," ",e.floor]}),r.jsxs("p",{style:{margin:"5px 0"},children:[r.jsx("strong",{children:"Basic Price:"})," ",e.price,"/night ",r.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:"(excl. GST)"})]})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(Vo,{size:14,style:{marginRight:"6px"}}),"Guest Name *"]}),r.jsx("input",{type:"text",name:"guestName",value:s.guestName,onChange:_,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest name"})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(Ia,{size:14,style:{marginRight:"6px"}}),"Phone *"]}),r.jsx("input",{type:"tel",name:"guestPhone",value:s.guestPhone,onChange:_,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter phone number"})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(Ps,{size:14,style:{marginRight:"6px"}}),"Email"]}),r.jsx("input",{type:"email",name:"guestEmail",value:s.guestEmail,onChange:_,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter email (optional)"})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[r.jsx("h4",{style:{margin:"0 0 8px",fontSize:"16px",color:"#334155",fontWeight:"600"},children:"Identity Documents (Optional)"}),r.jsx("p",{style:{margin:"0 0 20px",fontSize:"14px",color:"#64748b",lineHeight:"1.5"},children:"Enter Aadhaar card and/or PAN card numbers for guest verification. Both are optional but recommended for corporate bookings."}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:" Aadhaar Number"}),r.jsx("input",{type:"text",name:"aadhaarNumber",value:s.aadhaarNumber||"",onChange:_,style:{width:"100%",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"},placeholder:"Enter 12-digit Aadhaar number",maxLength:12,pattern:"[0-9]{12}"}),r.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"12-digit number (e.g., 123456789012)"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:" PAN Number"}),r.jsx("input",{type:"text",name:"panNumber",value:s.panNumber||"",onChange:Q=>{const le=Q.target.value.toUpperCase();_({target:{name:"panNumber",value:le}})},style:{width:"100%",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",textTransform:"uppercase"},placeholder:"Enter PAN number",maxLength:10,pattern:"[A-Z]{5}[0-9]{4}[A-Z]{1}"}),r.jsx("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:"10-character format (e.g., ABCDE1234F)"})]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(rn,{size:14,style:{marginRight:"6px"}}),"Check-in Date"]}),r.jsxs("button",{type:"button",onClick:()=>G("checkIn"),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(rn,{size:16}),s.checkInDate?new Date(s.checkInDate).toLocaleDateString():"Select Date"]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-out Date"}),r.jsxs("button",{type:"button",onClick:()=>G("checkOut"),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(rn,{size:16}),s.checkOutDate?new Date(s.checkOutDate).toLocaleDateString():"Select Date"]})]})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"GST Option"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:s.gstType==="none"?"2px solid #4f46e5":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:s.gstType==="none"?"#eef2ff":"white"},children:[r.jsx("input",{type:"radio",name:"gstType",value:"none",checked:s.gstType==="none",onChange:_}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:"500"},children:"Without GST"}),r.jsx("span",{style:{display:"block",fontSize:"12px",color:"#6b7280"},children:"Basic price only"})]})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:s.gstType==="gst"?"2px solid #4f46e5":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:s.gstType==="gst"?"#eef2ff":"white"},children:[r.jsx("input",{type:"radio",name:"gstType",value:"gst",checked:s.gstType==="gst",onChange:_}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:"500"},children:"With GST (Within State)"}),r.jsx("span",{style:{display:"block",fontSize:"12px",color:"#6b7280"},children:"CGST 2.5% + SGST 2.5% = 5%"})]})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:s.gstType==="igst"?"2px solid #4f46e5":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:s.gstType==="igst"?"#eef2ff":"white"},children:[r.jsx("input",{type:"radio",name:"gstType",value:"igst",checked:s.gstType==="igst",onChange:_}),r.jsxs("div",{children:[r.jsx("span",{style:{fontWeight:"500"},children:"With IGST (Out of State)"}),r.jsx("span",{style:{display:"block",fontSize:"12px",color:"#6b7280"},children:"IGST 5%"})]})]})]})]}),(s.gstType==="gst"||s.gstType==="igst")&&r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Guest GST Number"}),r.jsx("input",{type:"text",name:"guestGstNumber",value:s.guestGstNumber,onChange:_,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest's GST number (e.g., 22AAAAA0000A1Z5)",maxLength:15}),r.jsx("span",{style:{fontSize:"11px",color:"#6b7280"},children:"15-digit GST Identification Number"})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discountPercent",value:s.discountPercent,onChange:_,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter discount percentage (0-100)",min:"0",max:"100",step:"0.01"}),I>0&&r.jsxs("span",{style:{fontSize:"12px",color:"#059669"},children:["Discount Amount: ",z.toFixed(2)]})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Price Summary"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[r.jsxs("span",{children:["Basic Price (",e.price," x ",C," night",C>1?"s":"",")"]}),r.jsxs("span",{children:["",k.toFixed(2)]})]}),I>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#059669",fontSize:"14px"},children:[r.jsxs("span",{children:["Discount (",I,"%)"]}),r.jsxs("span",{children:["- ",z.toFixed(2)]})]}),I>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontWeight:"500"},children:[r.jsx("span",{children:"Amount After Discount"}),r.jsxs("span",{children:["",B.toFixed(2)]})]}),s.gstType==="gst"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#6b7280",fontSize:"14px"},children:[r.jsx("span",{children:"CGST (2.5%)"}),r.jsxs("span",{children:["",M.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#6b7280",fontSize:"14px"},children:[r.jsx("span",{children:"SGST (2.5%)"}),r.jsxs("span",{children:["",F.toFixed(2)]})]})]}),s.gstType==="igst"&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#6b7280",fontSize:"14px"},children:[r.jsx("span",{children:"IGST (5%)"}),r.jsxs("span",{children:["",N.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",borderTop:"1px solid #e5e7eb",paddingTop:"10px",marginTop:"10px"},children:[r.jsx("span",{children:"Total Amount"}),r.jsxs("span",{children:["",P.toFixed(2)]})]})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Amount Paid ()"}),r.jsx("input",{type:"number",name:"amountPaid",value:s.amountPaid,onChange:_,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Enter amount paid (Total: ${P.toFixed(2)})`,min:"0",max:P}),s.amountPaid&&parseFloat(s.amountPaid)<P&&r.jsxs("span",{style:{fontSize:"12px",color:"#f59e0b"},children:["Balance Due: ",(P-parseFloat(s.amountPaid||0)).toFixed(2)]}),s.amountPaid&&parseFloat(s.amountPaid)>=P&&r.jsx("span",{style:{fontSize:"12px",color:"#059669"},children:" Fully Paid"})]}),s.amountPaid&&parseFloat(s.amountPaid)>0&&r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Payment Method"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:s.paymentMethod==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:s.paymentMethod==="cash"?"#f0fdf4":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:s.paymentMethod==="cash",onChange:_,style:{display:"none"}}),r.jsx("span",{style:{fontSize:"20px"},children:""}),r.jsx("span",{style:{fontWeight:"500",color:s.paymentMethod==="cash"?"#059669":"#374151"},children:"Cash"})]}),r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:s.paymentMethod==="online"?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:s.paymentMethod==="online"?"#eff6ff":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:s.paymentMethod==="online",onChange:_,style:{display:"none"}}),r.jsx("span",{style:{fontSize:"20px"},children:""}),r.jsx("span",{style:{fontWeight:"500",color:s.paymentMethod==="online"?"#3b82f6":"#374151"},children:"Online"})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e5e7eb"},children:[r.jsx("button",{type:"button",onClick:n,style:{flex:1,padding:"12px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,style:{flex:1,padding:"12px",border:"none",borderRadius:"6px",backgroundColor:l?"#9ca3af":"#4f46e5",color:"white",cursor:l?"not-allowed":"pointer",fontWeight:"500"},children:l?"Booking...":"Confirm Booking"})]})]})})]}),p&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",width:"90%",maxWidth:"400px",maxHeight:"80vh",overflow:"auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[r.jsx("button",{onClick:()=>oe(-1),disabled:E,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",padding:"5px"},children:""}),r.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:j.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),r.jsx("button",{onClick:()=>oe(1),disabled:E,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",padding:"5px"},children:""})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"15px",padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"6px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#22c55e"}}),r.jsx("span",{style:{fontSize:"12px"},children:"Available"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#dc2626"}}),r.jsx("span",{style:{fontSize:"12px"},children:"Booked"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#9ca3af"}}),r.jsx("span",{style:{fontSize:"12px"},children:"Past"})]})]}),E&&r.jsx("div",{style:{textAlign:"center",padding:"10px",color:"#6b7280"},children:"Loading availability..."}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"10px"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Q=>r.jsx("div",{style:{textAlign:"center",padding:"8px",fontSize:"12px",fontWeight:"600",color:"#6b7280"},children:Q},Q))}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"20px"},children:(()=>{const{daysInMonth:Q,firstDay:le}=X(j),me=[];for(let je=0;je<le;je++)me.push(r.jsx("div",{style:{aspectRatio:"1",padding:"8px"}},`empty-${je}`));for(let je=1;je<=Q;je++){const ee=V(je),se=U(je),fe=!ee;me.push(r.jsxs("button",{onClick:()=>fe&&q(je),disabled:!fe,style:{aspectRatio:"1",border:fe?"1px solid #e5e7eb":"1px solid #fca5a5",borderRadius:"6px",backgroundColor:ee?"#f3f4f6":fe?"white":"#fee2e2",color:ee?"#9ca3af":fe?"#000":"#dc2626",cursor:fe?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseOver:ue=>{fe&&(ue.target.style.backgroundColor="#f0f9ff",ue.target.style.borderColor="#3b82f6")},onMouseOut:ue=>{fe&&(ue.target.style.backgroundColor="white",ue.target.style.borderColor="#e5e7eb")},children:[je,se&&!ee&&r.jsx("div",{style:{position:"absolute",top:"3px",right:"3px",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#dc2626",border:"1px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"}}),!se&&!ee&&r.jsx("div",{style:{position:"absolute",top:"3px",right:"3px",width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#22c55e",opacity:.7}})]},je))}return me})()}),r.jsx("div",{style:{textAlign:"center",fontSize:"11px",color:"#6b7280",marginBottom:"15px",padding:"8px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:" Available for booking   Already booked (unavailable)   Today  Red background = Date conflicts with existing bookings"}),r.jsx("button",{onClick:()=>m(!1),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer",fontWeight:"500"},children:"Cancel"})]})})]})},Ofe=({booking:e,onClose:t,onAddBill:n,onRemoveBill:a})=>{var j,v,y;const[s,i]=w.useState(""),[l,d]=w.useState(""),[u,h]=w.useState(!1),[p,m]=w.useState(""),g=async A=>{A.preventDefault(),m(""),h(!0);try{if(!s||parseFloat(s)<=0)throw new Error("Please enter a valid amount");if(!l.trim())throw new Error("Please enter a description");await n(e._id,{amount:parseFloat(s),description:l.trim()}),i(""),d("")}catch(E){m(E.message)}finally{h(!1)}},b=A=>new Date(A).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f59e0b",color:"white"},children:[r.jsxs("h3",{style:{margin:0},children:["Restaurant Bills - Room ",(j=e.roomId)==null?void 0:j.roomNumber]}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),r.jsxs("div",{style:{padding:"20px"},children:[r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[r.jsxs("h4",{style:{margin:"0 0 10px"},children:["Guest: ",e.userName]}),r.jsxs("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:["Room ",(v=e.roomId)==null?void 0:v.roomNumber,"  ",e.userPhone]})]}),p&&r.jsx("div",{style:{padding:"10px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",marginBottom:"15px"},children:p}),r.jsxs("form",{onSubmit:g,style:{marginBottom:"30px",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 15px",color:"#374151"},children:"Add Restaurant Bill"}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Amount ()"}),r.jsx("input",{type:"number",value:s,onChange:A=>i(A.target.value),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter amount",min:"0",step:"0.01",required:!0})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Description"}),r.jsx("input",{type:"text",value:l,onChange:A=>d(A.target.value),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"e.g., Lunch, Dinner, Room Service",required:!0})]}),r.jsx("button",{type:"submit",disabled:u,style:{padding:"10px 20px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:u?"not-allowed":"pointer",fontWeight:"500"},children:u?"Adding...":"Add Bill"})]}),r.jsxs("div",{children:[r.jsxs("h4",{style:{margin:"0 0 15px",color:"#374151"},children:["Restaurant Bills (",((y=e.restaurantBills)==null?void 0:y.length)||0,")",e.restaurantTotal>0&&r.jsxs("span",{style:{color:"#dc2626",fontWeight:"600",marginLeft:"10px"},children:["Total: ",e.restaurantTotal.toFixed(2)]})]}),e.restaurantBills&&e.restaurantBills.length>0?r.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:e.restaurantBills.map((A,E)=>r.jsxs("div",{style:{padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #e5e7eb",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:"500",color:"#374151"},children:A.description}),r.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:[b(A.date||A.createdAt),"  Added by ",A.addedBy||"Receptionist"]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsxs("span",{style:{fontWeight:"600",color:"#dc2626"},children:["",A.amount.toFixed(2)]}),r.jsx("button",{onClick:()=>a(e._id,A._id),style:{padding:"4px 8px",backgroundColor:"#fee2e2",color:"#dc2626",border:"1px solid #fecaca",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Remove bill",children:"Remove"})]})]},A._id||E))}):r.jsx("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"No restaurant bills added yet."})]}),r.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:r.jsx("button",{onClick:t,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Close"})})]})]})})},kfe=({booking:e,onClose:t,onCheckout:n,onUpdatePayment:a})=>{var I;const[s,i]=w.useState(""),[l,d]=w.useState("cash"),[u,h]=w.useState(!1),[p,m]=w.useState(""),g=e.totalPrice||0,b=e.restaurantTotal||0,j=g+b,v=e.amountPaid||0,y=e.cashAmount||0,A=e.onlineAmount||0,E=j-v,O=async()=>{const z=parseFloat(s)||0;if(z<=0){m("Please enter a valid amount");return}h(!0),m("");try{await a(e._id,v+z,l,z),i("")}catch(B){m(B.message||"Failed to update payment")}finally{h(!1)}},S=async()=>{h(!0),m("");try{await n(e._id),t()}catch(z){m(z.message||"Failed to checkout")}finally{h(!1)}},C=z=>z?new Date(z).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"",k=()=>{var M,F,N;const z=window.open("","_blank"),B=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Hotel Virat - Bill</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 15px; }
          .header img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
          .header h1 { font-size: 24px; margin-bottom: 5px; }
          .header p { font-size: 12px; color: #666; }
          .header .gst { font-size: 11px; color: #333; font-weight: bold; margin-top: 5px; }
          .bill-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .bill-info p { font-size: 13px; margin: 4px 0; }
          .guest-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .guest-info h3 { font-size: 14px; margin-bottom: 8px; }
          .guest-info p { font-size: 13px; margin: 4px 0; }
          .stay-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .stay-info h3 { font-size: 14px; margin-bottom: 8px; }
          .stay-info p { font-size: 13px; margin: 4px 0; }
          .charges { margin-bottom: 15px; }
          .charges h3 { font-size: 14px; margin-bottom: 8px; }
          .charge-row { display: flex; justify-content: space-between; font-size: 13px; margin: 5px 0; }
          .charge-row.total { font-weight: bold; font-size: 16px; border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; }
          .footer { text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px dashed #ccc; }
          .footer p { font-size: 12px; color: #666; margin: 3px 0; }
          @media print { body { padding: 10px; } }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${Yo}" alt="Hotel Virat Logo" />
          <h1>HOTEL VIRAT</h1>
          <p>Your Comfort, Our Priority</p>
          <p class="gst">GSTIN: 29AGZPV1558K2Z6</p>
        </div>
        
        <div class="bill-info">
          <p><strong>Bill No:</strong> ${((M=e._id)==null?void 0:M.slice(-8).toUpperCase())||"N/A"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p><strong>Room No:</strong> ${((F=e.roomId)==null?void 0:F.roomNumber)||"N/A"}</p>
          <p><strong>Room Type:</strong> ${((N=e.roomId)==null?void 0:N.roomType)||"N/A"}</p>
        </div>
        
        <div class="guest-info">
          <h3>Guest Details</h3>
          <p><strong>Name:</strong> ${e.userName||"N/A"}</p>
          <p><strong>Phone:</strong> ${e.userPhone||"N/A"}</p>
          ${e.userEmail?`<p><strong>Email:</strong> ${e.userEmail}</p>`:""}
          ${e.guestGstNumber?`<p><strong>GSTIN:</strong> ${e.guestGstNumber}</p>`:""}
        </div>
        
        <div class="stay-info">
          <h3>Stay Details</h3>
          <p><strong>Check-in:</strong> ${C(e.checkInDate)} at ${e.checkInTime||"12:00"}</p>
          <p><strong>Check-out:</strong> ${C(e.checkOutDate)} at ${e.checkOutTime||"11:00"}</p>
          <p><strong>No. of Nights:</strong> ${e.nights||1}</p>
        </div>
        
        <div class="charges">
          <h3>Room Charges</h3>
          <div class="charge-row">
            <span>Room Charges (${e.nights||1} night${(e.nights||1)>1?"s":""})</span>
            <span>${(e.baseAmount||0).toFixed(2)}</span>
          </div>
          ${e.gstType==="gst"?`
            <div class="charge-row">
              <span>CGST (2.5%)</span>
              <span>${(e.cgst||0).toFixed(2)}</span>
            </div>
            <div class="charge-row">
              <span>SGST (2.5%)</span>
              <span>${(e.sgst||0).toFixed(2)}</span>
            </div>
          `:""}
          ${e.gstType==="igst"?`
            <div class="charge-row">
              <span>IGST (5%)</span>
              <span>${(e.igst||0).toFixed(2)}</span>
            </div>
          `:""}
          <div class="charge-row total">
            <span>Total Amount</span>
            <span>${g.toFixed(2)}</span>
          </div>
        </div>
        
        <div class="footer">
          <p>Thank you for staying with us!</p>
          <p>We hope to see you again soon.</p>
          <p style="margin-top: 10px; font-size: 10px;">This is a computer generated bill.</p>
        </div>
      </body>
      </html>
    `;z.document.write(B),z.document.close(),z.focus(),setTimeout(()=>{z.print()},250)};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fef2f2"},children:[r.jsxs("h3",{style:{margin:0},children:["Room ",(I=e.roomId)==null?void 0:I.roomNumber," - Checkout"]}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px"},children:""})]}),r.jsxs("div",{style:{padding:"20px"},children:[p&&r.jsxs("div",{style:{padding:"10px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),p]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Guest Details"}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"Name:"})," ",e.userName]}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"Phone:"})," ",e.userPhone]}),e.userEmail&&r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"Email:"})," ",e.userEmail]}),e.guestGstNumber&&r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"GSTIN:"})," ",e.guestGstNumber]})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Stay Details"}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"Check-in:"})," ",C(e.checkInDate)," at ",e.checkInTime]}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"Check-out:"})," ",C(e.checkOutDate)," at ",e.checkOutTime]}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[r.jsx("strong",{children:"Nights:"})," ",e.nights]}),e.actualCheckInTime&&r.jsxs("p",{style:{margin:"8px 0 5px",fontSize:"13px",color:"#059669",fontWeight:"500"},children:[" ",r.jsx("strong",{children:"Actual Check-in:"})," ",new Date(e.actualCheckInTime).toLocaleString()]}),e.actualCheckOutTime&&r.jsxs("p",{style:{margin:"5px 0",fontSize:"13px",color:"#059669",fontWeight:"500"},children:[" ",r.jsx("strong",{children:"Actual Check-out:"})," ",new Date(e.actualCheckOutTime).toLocaleString()]})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#fef3c7",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Payment Summary"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px"},children:[r.jsx("span",{children:"Room Charges:"}),r.jsxs("span",{children:["",g.toFixed(2)]})]}),b>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px",color:"#dc2626"},children:[r.jsx("span",{children:"Restaurant Bills:"}),r.jsxs("span",{children:["",b.toFixed(2)]})]}),e.gstType&&e.gstType!=="none"&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px",color:"#6b7280"},children:[r.jsxs("span",{children:["GST (",e.gstType==="gst"?"CGST+SGST":"IGST","):"]}),r.jsxs("span",{children:["",((e.cgst||0)+(e.sgst||0)+(e.igst||0)).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontWeight:"bold",borderTop:"1px solid #e5e7eb",paddingTop:"8px"},children:[r.jsx("span",{children:"Grand Total:"}),r.jsxs("span",{children:["",j.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",fontSize:"14px",color:"#059669"},children:[r.jsx("span",{children:"Amount Paid:"}),r.jsxs("span",{children:["",v.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"16px",color:E>0?"#dc2626":"#059669"},children:[r.jsx("span",{children:E>0?"Balance Due:":"Status:"}),r.jsx("span",{children:E>0?`${E.toFixed(2)}`:" Fully Paid"})]})]}),(y>0||A>0)&&r.jsxs("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f0fdf4",borderRadius:"6px",fontSize:"13px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:" Cash Received:"}),r.jsxs("span",{style:{color:"#059669",fontWeight:"500"},children:["",y.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:" Online Received:"}),r.jsxs("span",{style:{color:"#3b82f6",fontWeight:"500"},children:["",A.toFixed(2)]})]})]}),E>0&&r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Add Payment ()"}),r.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:s,onChange:z=>i(z.target.value),style:{flex:1,padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Max: ${E.toFixed(2)}`,min:"0",max:E}),r.jsx("button",{onClick:O,disabled:u,style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:u?"not-allowed":"pointer"},children:u?"...":"Add"})]}),r.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",padding:"10px",border:l==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l==="cash"?"#f0fdf4":"white"},children:[r.jsx("input",{type:"radio",name:"checkoutPaymentMethod",value:"cash",checked:l==="cash",onChange:z=>d(z.target.value),style:{display:"none"}}),r.jsx("span",{children:""}),r.jsx("span",{style:{fontWeight:"500",fontSize:"14px",color:l==="cash"?"#059669":"#374151"},children:"Cash"})]}),r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",cursor:"pointer",padding:"10px",border:l==="online"?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l==="online"?"#eff6ff":"white"},children:[r.jsx("input",{type:"radio",name:"checkoutPaymentMethod",value:"online",checked:l==="online",onChange:z=>d(z.target.value),style:{display:"none"}}),r.jsx("span",{children:""}),r.jsx("span",{style:{fontWeight:"500",fontSize:"14px",color:l==="online"?"#3b82f6":"#374151"},children:"Online"})]})]}),r.jsxs("button",{onClick:()=>i(E.toString()),style:{padding:"6px 12px",backgroundColor:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:["Pay Full Balance (",E.toFixed(2),")"]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[r.jsx("button",{onClick:t,style:{flex:1,minWidth:"100px",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer"},children:"Close"}),e.gstType&&e.gstType!=="none"&&r.jsxs("button",{onClick:k,style:{flex:1,minWidth:"100px",padding:"12px",border:"none",borderRadius:"6px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[r.jsx(_s,{size:16})," Print Bill"]}),r.jsx("button",{onClick:S,disabled:u,style:{flex:1,minWidth:"100px",padding:"12px",border:"none",borderRadius:"6px",backgroundColor:E>0?"#f59e0b":"#059669",color:"white",cursor:u?"not-allowed":"pointer",fontWeight:"500"},children:u?"Processing...":E>0?`Checkout (${E.toFixed(2)} due)`:" Checkout (Paid)"})]})]})]})})},_fe=({rooms:e,allBookings:t,onClose:n,onBulkBook:a})=>{const[s,i]=w.useState([]),[l,d]=w.useState({guestName:"",guestPhone:"",guestEmail:"",guestGstNumber:"",aadhaarNumber:"",panNumber:"",checkInDate:new Date().toISOString().split("T")[0],checkOutDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkInTime:"12:00",checkOutTime:"11:00",gstType:"none",discountPercent:"",amountPaid:"",paymentMethod:"cash"}),[u,h]=w.useState(!1),[p,m]=w.useState(""),b=(()=>{const L=new Date(l.checkInDate),P=new Date(l.checkOutDate),_=Math.ceil((P-L)/(1e3*60*60*24));return _>0?_:1})(),j=s.reduce((L,P)=>L+P.price*b,0),v=parseFloat(l.discountPercent)||0,y=j*v/100,A=j-y,E=l.gstType==="gst"?A*.025:0,O=l.gstType==="gst"?A*.025:0,S=l.gstType==="igst"?A*.05:0,C=E+O+S,k=A+C,I=L=>{const{name:P,value:_}=L.target;d({...l,[P]:_}),m("")},z=L=>{if(!M(L,l.checkInDate,l.checkOutDate)&&l.checkInDate&&l.checkOutDate){const _=new Date(l.checkInDate),R=new Date(l.checkOutDate),W=(t==null?void 0:t.filter(G=>{var U;if((((U=G.roomId)==null?void 0:U._id)||G.roomId)!==L._id||G.status==="cancelled"||G.status==="checked-out")return!1;const q=new Date(G.checkInDate),V=new Date(G.checkOutDate);return _<V&&R>q}))||[];if(W.length>0){const G=W[0],oe=G.userName||"Unknown Guest",q=new Date(G.checkInDate).toLocaleDateString(),V=new Date(G.checkOutDate).toLocaleDateString();window.confirm(`Room ${L.roomNumber} is already booked by ${oe} (${q} - ${V}) for the selected dates.

Click OK to view booking details or Cancel to close.`)&&alert(`Booking Details:

Guest: ${oe}
Phone: ${G.userPhone||"N/A"}
Check-in: ${q}
Check-out: ${V}
Status: ${G.status}
Total: ${G.totalPrice||0}`);return}}i(_=>_.find(W=>W._id===L._id)?_.filter(W=>W._id!==L._id):[..._,L])},B=async L=>{var P,_;L.preventDefault(),h(!0),m("");try{if(s.length===0)throw new Error("Please select at least one room");if(!((P=l.guestName)!=null&&P.trim()))throw new Error("Guest name is required");if(!((_=l.guestPhone)!=null&&_.trim()))throw new Error("Guest phone number is required");if(!/^[0-9]{10}$/.test(l.guestPhone.replace(/\D/g,"")))throw new Error("Please enter a valid 10-digit phone number");const W=new Date(l.checkInDate),G=new Date(l.checkOutDate),oe=new Date;if(oe.setHours(0,0,0,0),W<oe)throw new Error("Check-in date cannot be in the past");if(G<=W)throw new Error("Check-out date must be after check-in date");const q=[];if(s.forEach(H=>{const Q=(t==null?void 0:t.filter(me=>{var ee;return(((ee=me.roomId)==null?void 0:ee._id)||me.roomId)===H._id&&me.status!=="cancelled"&&me.status!=="checked-out"}))||[];if(Q.some(me=>{const je=new Date(me.checkInDate),ee=new Date(me.checkOutDate);return W<ee&&G>je})){const me=Q.filter(je=>{const ee=new Date(je.checkInDate),se=new Date(je.checkOutDate);return W<se&&G>ee});q.push({room:H,conflicts:me})}}),q.length>0){const H=q.map(({room:Q,conflicts:le})=>{const me=le.map(je=>`${je.userName} (${new Date(je.checkInDate).toLocaleDateString()} - ${new Date(je.checkOutDate).toLocaleDateString()})`).join(", ");return`Room ${Q.roomNumber}: ${me}`}).join("; ");throw new Error(`The following rooms have booking conflicts: ${H}. Please remove these rooms or select different dates.`)}const V=parseFloat(l.amountPaid)||0,U=l.paymentMethod||"cash",X={guestName:l.guestName,guestPhone:l.guestPhone,guestEmail:l.guestEmail,guestGstNumber:l.guestGstNumber,aadhaarNumber:l.aadhaarNumber?l.aadhaarNumber.trim():"",panNumber:l.panNumber?l.panNumber.trim().toUpperCase():"",checkInDate:l.checkInDate,checkOutDate:l.checkOutDate,checkInTime:l.checkInTime,checkOutTime:l.checkOutTime,nights:b,gstType:l.gstType,discountPercent:v||0,discountAmount:y||0,cgst:E,sgst:O,igst:S,totalAmount:k,amountPaid:V,cashAmount:U==="cash"?V:0,onlineAmount:U==="online"?V:0,paymentStatus:V>=k?"paid":"pending",selectedRooms:s.map(H=>({roomId:H._id,roomNumber:H.roomNumber,roomType:H.roomType,price:H.price,baseAmount:H.price*b}))};await a(X),n()}catch(R){console.error("Bulk booking error:",R),m(R.message||"Failed to create bulk booking")}finally{h(!1)}},M=(L,P,_)=>{if(!P||!_)return!0;const R=new Date(P),W=new Date(_);return!((t==null?void 0:t.filter(q=>{var U;return(((U=q.roomId)==null?void 0:U._id)||q.roomId)===L._id&&q.status!=="cancelled"&&q.status!=="checked-out"}))||[]).some(q=>{const V=new Date(q.checkInDate),U=new Date(q.checkOutDate);return R<U&&W>V})},F=e.filter(L=>M(L,l.checkInDate,l.checkOutDate)).sort((L,P)=>{const _=parseInt(L.roomNumber)||0,R=parseInt(P.roomNumber)||0;return _-R}),N=e.map(L=>({...L,isAvailable:M(L,l.checkInDate,l.checkOutDate)})).sort((L,P)=>{const _=parseInt(L.roomNumber)||0,R=parseInt(P.roomNumber)||0;return _-R});return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"95%",maxWidth:"900px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#7c3aed",color:"white"},children:[r.jsx("h3",{style:{margin:0},children:" Bulk Booking - Multiple Rooms"}),r.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),p&&r.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #fecaca"},children:[r.jsx(xr,{size:16}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:p})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",display:"flex",gap:"20px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("h4",{style:{margin:"0 0 15px",color:"#374151"},children:["Select Rooms (",s.length," selected)"]}),F.length===0&&l.checkInDate&&l.checkOutDate?r.jsxs("div",{style:{padding:"20px",textAlign:"center",border:"1px solid #fbbf24",borderRadius:"8px",backgroundColor:"#fef3c7",color:"#92400e"},children:[r.jsx(xr,{size:24,style:{marginBottom:"10px"}}),r.jsx("p",{style:{margin:0,fontWeight:"500"},children:"No rooms available for selected dates"}),r.jsx("p",{style:{margin:"5px 0 0",fontSize:"14px"},children:"All rooms are booked. Click on booked rooms to see details."})]}):null,r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"10px"},children:N.map(L=>{const P=s.find(R=>R._id===L._id),_=L.isAvailable;return r.jsxs("div",{onClick:()=>z(L),style:{padding:"12px",margin:"8px 0",border:`2px solid ${P?"#7c3aed":_?"#e5e7eb":"#fca5a5"}`,borderRadius:"8px",backgroundColor:P?"#f3f4f6":_?"white":"#fef2f2",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s",opacity:_?1:.7},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"600",color:_?"#374151":"#dc2626"},children:["Room ",L.roomNumber,!_&&r.jsx("span",{style:{fontSize:"12px",marginLeft:"8px",color:"#dc2626"},children:" BOOKED"})]}),r.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[L.roomType,"  Floor ",L.floor]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("div",{style:{fontWeight:"600",color:_?"#059669":"#6b7280"},children:["",L.price,"/night"]}),P&&r.jsx("div",{style:{fontSize:"12px",color:"#7c3aed",fontWeight:"500"},children:" Selected"}),!_&&!P&&r.jsx("div",{style:{fontSize:"12px",color:"#dc2626",fontWeight:"500"},children:"Click for details"})]})]},L._id)})})]}),r.jsx("div",{style:{flex:1},children:r.jsxs("form",{onSubmit:B,children:[r.jsx("h4",{style:{margin:"0 0 15px",color:"#374151"},children:"Guest Details"}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(Vo,{size:14,style:{marginRight:"6px"}}),"Guest Name *"]}),r.jsx("input",{type:"text",name:"guestName",value:l.guestName,onChange:I,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest name"})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(Ia,{size:14,style:{marginRight:"6px"}}),"Phone *"]}),r.jsx("input",{type:"tel",name:"guestPhone",value:l.guestPhone,onChange:I,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter phone number"})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(Ps,{size:14,style:{marginRight:"6px"}}),"Email"]}),r.jsx("input",{type:"email",name:"guestEmail",value:l.guestEmail,onChange:I,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter email (optional)"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:[r.jsx(rn,{size:14,style:{marginRight:"6px"}}),"Check-in Date"]}),r.jsx("input",{type:"date",name:"checkInDate",value:l.checkInDate,onChange:I,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-out Date"}),r.jsx("input",{type:"date",name:"checkOutDate",value:l.checkOutDate,onChange:I,required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"GST Option"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"gstType",value:"none",checked:l.gstType==="none",onChange:I}),r.jsx("span",{style:{fontSize:"14px"},children:"No GST"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"gstType",value:"gst",checked:l.gstType==="gst",onChange:I}),r.jsx("span",{style:{fontSize:"14px"},children:"GST (5%)"})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},children:[r.jsx("input",{type:"radio",name:"gstType",value:"igst",checked:l.gstType==="igst",onChange:I}),r.jsx("span",{style:{fontSize:"14px"},children:"IGST (5%)"})]})]})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discountPercent",value:l.discountPercent,onChange:I,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter discount percentage",min:"0",max:"100",step:"0.01"})]}),s.length>0&&r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Booking Summary"}),r.jsx("div",{style:{fontSize:"14px",marginBottom:"8px"},children:r.jsxs("strong",{children:[s.length," Room(s)  ",b," Night(s)"]})}),s.map(L=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"4px"},children:[r.jsxs("span",{children:["Room ",L.roomNumber," (",L.roomType,")"]}),r.jsxs("span",{children:["",(L.price*b).toFixed(2)]})]},L._id)),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[r.jsx("span",{children:r.jsx("strong",{children:"Subtotal"})}),r.jsx("span",{children:r.jsxs("strong",{children:["",j.toFixed(2)]})})]}),v>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#059669"},children:[r.jsxs("span",{children:["Discount (",v,"%)"]}),r.jsxs("span",{children:["- ",y.toFixed(2)]})]}),C>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#6b7280"},children:[r.jsx("span",{children:"GST"}),r.jsxs("span",{children:["",C.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"16px",marginTop:"8px",paddingTop:"8px",borderTop:"2px solid #374151"},children:[r.jsx("span",{children:"Grand Total"}),r.jsxs("span",{children:["",k.toFixed(2)]})]})]}),r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Amount Paid ()"}),r.jsx("input",{type:"number",name:"amountPaid",value:l.amountPaid,onChange:I,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Enter amount paid (Total: ${k.toFixed(2)})`,min:"0",max:k})]}),l.amountPaid&&parseFloat(l.amountPaid)>0&&r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Payment Method"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:l.paymentMethod==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l.paymentMethod==="cash"?"#f0fdf4":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:l.paymentMethod==="cash",onChange:I,style:{display:"none"}}),r.jsx("span",{children:" Cash"})]}),r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",padding:"12px",border:l.paymentMethod==="online"?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:l.paymentMethod==="online"?"#eff6ff":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:l.paymentMethod==="online",onChange:I,style:{display:"none"}}),r.jsx("span",{children:" Online"})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:n,style:{flex:1,padding:"12px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:u||s.length===0,style:{flex:1,padding:"12px",border:"none",borderRadius:"6px",backgroundColor:u||s.length===0?"#9ca3af":"#7c3aed",color:"white",cursor:u||s.length===0?"not-allowed":"pointer",fontWeight:"500"},children:u?"Creating...":`Book ${s.length} Room(s)`})]})]})})]})]})})},Ife=()=>{const e=kn(),[t,n]=w.useState(null),[a,s]=w.useState([]),[i,l]=w.useState([]),[d,u]=w.useState([]),[h,p]=w.useState(!0),[m,g]=w.useState(""),[b,j]=w.useState(""),[v,y]=w.useState(""),[A,E]=w.useState("all"),[O,S]=w.useState(null),[C,k]=w.useState(!1),[I,z]=w.useState(null),[B,M]=w.useState(!1),[F,N]=w.useState(!1),[L,P]=w.useState(!1),[_,R]=w.useState(!1),[W,G]=w.useState(!1),[oe,q]=w.useState(!1),[V,U]=w.useState(!1),[X,H]=w.useState(!1),[Q,le]=w.useState(!1),[me,je]=w.useState(!1),[ee,se]=w.useState("rooms"),[fe,ue]=w.useState(new Date().toISOString().split("T")[0]),[We,we]=w.useState("today");w.useEffect(()=>{const xe=localStorage.getItem("userType"),ke=localStorage.getItem("receptionistData");if(xe!=="receptionist"||!ke){e("/login");return}n(JSON.parse(ke))},[e]),w.useEffect(()=>{t&&Me()},[t]);const Me=async()=>{p(!0),g("");try{const xe=await ra.get("/room"),ke=xe.data.rooms||xe.data||[],Re=await ra.get("/room-booking");let ot=Re.data.bookings||Re.data||[];ot=ot.map(Tt=>{const _t={...Tt};return Object.keys(_t).forEach(st=>{const wt=_t[st];wt&&typeof wt=="object"&&(wt.data||wt.file||wt.image||wt.logo)&&(console.warn(`Removing suspicious field from booking: ${st}`,wt),delete _t[st]),typeof wt=="string"&&wt.length>1e4&&(console.warn(`Removing large string field from booking: ${st}`),delete _t[st])}),_t});const mt=ot.filter(Tt=>Tt.status==="checked-in");s(ke),l(mt),u(ot)}catch(xe){console.error("Error fetching data:",xe),g("Failed to load rooms. Please try again.")}finally{p(!1)}},Ee=xe=>({status:"available",booking:null}),Be=xe=>{const ke=new Date().toISOString().split("T")[0],Re=d.find(ot=>{var st;if((((st=ot.roomId)==null?void 0:st._id)||ot.roomId)!==xe._id)return!1;const Tt=ot.checkInDate.split("T")[0],_t=ot.checkOutDate.split("T")[0];return ke>=Tt&&ke<_t&&ot.status==="checked-in"});if(Re){const ot=Re.userName||"Unknown Guest",mt=new Date(Re.checkInDate).toLocaleDateString(),Tt=new Date(Re.checkOutDate).toLocaleDateString();window.confirm(`Room ${xe.roomNumber} is currently booked by ${ot} (${mt} - ${Tt}).

Click OK to view booking details or Cancel to close.`)&&(z(Re),H(!0));return}S(xe),k(!0)},it=async xe=>{var ke,Re;try{const ot=new Date(xe.checkInDate),mt=new Date(xe.checkOutDate),Tt=d.filter(st=>{var yt;return(((yt=st.roomId)==null?void 0:yt._id)||st.roomId)===xe.roomId&&st.status!=="cancelled"&&st.status!=="checked-out"});if(Tt.some(st=>{const wt=new Date(st.checkInDate),yt=new Date(st.checkOutDate);return ot<yt&&mt>wt})){const wt=Tt.filter(yt=>{const Nt=new Date(yt.checkInDate),Kt=new Date(yt.checkOutDate);return ot<Kt&&mt>Nt}).map(yt=>`${yt.userName} (${new Date(yt.checkInDate).toLocaleDateString()} - ${new Date(yt.checkOutDate).toLocaleDateString()})`).join(", ");throw new Error(`Room is already booked for overlapping dates by: ${wt}. Please select different dates.`)}await ra.post("/room-booking/walk-in",xe),j("Room booked successfully!"),setTimeout(()=>j(""),3e3),await Me()}catch(ot){throw new Error(((Re=(ke=ot.response)==null?void 0:ke.data)==null?void 0:Re.message)||ot.message||"Failed to book room")}},re=async(xe,ke,Re="cash",ot=0)=>{var mt,Tt;try{await ra.put(`/room-booking/${xe}/payment`,{amountPaid:ke,paymentMethod:Re,paymentAmount:ot}),j("Payment updated successfully!"),setTimeout(()=>j(""),3e3),await Me();const _t=i.find(st=>st._id===xe);_t&&z({..._t,amountPaid:ke})}catch(_t){throw new Error(((Tt=(mt=_t.response)==null?void 0:mt.data)==null?void 0:Tt.message)||"Failed to update payment")}},ce=async xe=>{var ke,Re;try{await ra.put(`/room-booking/${xe}/status`,{status:"checked-out"}),j("Guest checked out successfully! Room is now available."),setTimeout(()=>j(""),3e3),await Me()}catch(ot){throw new Error(((Re=(ke=ot.response)==null?void 0:ke.data)==null?void 0:Re.message)||"Failed to checkout")}},Z=xe=>{z(xe),M(!0)},de=async(xe,ke)=>{var Re,ot;try{await ra.post(`/room-booking/${xe}/restaurant-bill`,ke),j("Restaurant bill added successfully!"),setTimeout(()=>j(""),3e3),await Me();const mt=d.find(Tt=>Tt._id===xe);mt&&z(mt)}catch(mt){throw new Error(((ot=(Re=mt.response)==null?void 0:Re.data)==null?void 0:ot.message)||"Failed to add restaurant bill")}},te=async(xe,ke)=>{var Re,ot;try{await ra.delete(`/room-booking/${xe}/restaurant-bill/${ke}`),j("Restaurant bill removed successfully!"),setTimeout(()=>j(""),3e3),await Me();const mt=d.find(Tt=>Tt._id===xe);mt&&z(mt)}catch(mt){throw new Error(((ot=(Re=mt.response)==null?void 0:Re.data)==null?void 0:ot.message)||"Failed to remove restaurant bill")}},Se=async xe=>{var ke,Re;try{await ra.post("/room-booking/advance",xe),j("Advance booking created successfully!"),setTimeout(()=>j(""),3e3),await Me()}catch(ot){throw new Error(((Re=(ke=ot.response)==null?void 0:ke.data)==null?void 0:Re.message)||"Failed to create advance booking")}},Ve=async xe=>{var ke,Re,ot;try{const mt=xe.selectedRooms.reduce((Qt,ln)=>Qt+ln.baseAmount,0),Tt=xe.discountPercent||0,_t=mt*Tt/100,st=mt-_t,wt=xe.gstType==="gst"?st*.025:0,yt=xe.gstType==="gst"?st*.025:0,Nt=xe.gstType==="igst"?st*.05:0,Kt=st+wt+yt+Nt,Lt=`BULK_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,zr=xe.selectedRooms.map((Qt,ln)=>{var ne;return{roomId:Qt.roomId,branchId:(ne=a.find(ge=>ge._id===Qt.roomId))==null?void 0:ne.branchId,bulkBookingId:Lt,isBulkBooking:!0,bulkBookingIndex:ln,totalRoomsInBulk:xe.selectedRooms.length,bulkRoomDetails:xe.selectedRooms.map(ge=>({roomId:ge.roomId,roomNumber:ge.roomNumber,roomType:ge.roomType,price:ge.price,baseAmount:ge.baseAmount})),userName:`BULK: ${xe.guestName} (${xe.selectedRooms.length} rooms)`,userPhone:xe.guestPhone,userEmail:xe.guestEmail||"",guestGstNumber:xe.guestGstNumber||"",aadhaarNumber:xe.aadhaarNumber||"",panNumber:xe.panNumber||"",checkInDate:xe.checkInDate,checkOutDate:xe.checkOutDate,checkInTime:xe.checkInTime,checkOutTime:xe.checkOutTime,nights:xe.nights,baseAmount:Qt.baseAmount,discountPercent:Tt,discountAmount:Qt.baseAmount*Tt/100,gstType:xe.gstType,cgst:xe.gstType==="gst"?(Qt.baseAmount-Qt.baseAmount*Tt/100)*.025:0,sgst:xe.gstType==="gst"?(Qt.baseAmount-Qt.baseAmount*Tt/100)*.025:0,igst:xe.gstType==="igst"?(Qt.baseAmount-Qt.baseAmount*Tt/100)*.05:0,totalPrice:Qt.baseAmount-Qt.baseAmount*Tt/100+(xe.gstType==="gst"?(Qt.baseAmount-Qt.baseAmount*Tt/100)*.05:0)+(xe.gstType==="igst"?(Qt.baseAmount-Qt.baseAmount*Tt/100)*.05:0),amountPaid:ln===0&&xe.amountPaid||0,cashAmount:ln===0&&xe.paymentMethod==="cash"&&xe.amountPaid||0,onlineAmount:ln===0&&xe.paymentMethod==="online"&&xe.amountPaid||0,status:"checked-in",paymentStatus:(xe.amountPaid||0)>=Kt?"paid":"pending",payments:ln===0&&(xe.amountPaid||0)>0?[{amount:xe.amountPaid,method:xe.paymentMethod||"cash",date:new Date}]:[]}}).map(Qt=>ra.post("/room-booking/walk-in",Qt));await Promise.all(zr),j(`Bulk booking created successfully! ${xe.selectedRooms.length} rooms booked for ${xe.guestName}`),setTimeout(()=>j(""),5e3),await Me()}catch(mt){throw console.error("Bulk booking error details:",(ke=mt.response)==null?void 0:ke.data),new Error(((ot=(Re=mt.response)==null?void 0:Re.data)==null?void 0:ot.message)||mt.message||"Failed to create bulk booking")}},tt=async(xe,ke,Re)=>{var ot,mt;try{await ra.put(`/room-booking/${xe}/payment`,{amountPaid:ke,paymentMethod:Re,paymentAmount:ke}),j("Payment processed successfully!"),setTimeout(()=>j(""),3e3),await Me()}catch(Tt){throw new Error(((mt=(ot=Tt.response)==null?void 0:ot.data)==null?void 0:mt.message)||"Failed to process payment")}},ze=async xe=>{var ke,Re;try{await ra.put(`/room-booking/${xe}/status`,{status:"cancelled"}),j("Booking cancelled successfully!"),setTimeout(()=>j(""),3e3),await Me()}catch(ot){throw new Error(((Re=(ke=ot.response)==null?void 0:ke.data)==null?void 0:Re.message)||"Failed to cancel booking")}},Ze=async(xe,ke,Re,ot)=>{var mt,Tt;try{await ra.put(`/room-booking/${xe}/extend`,{newCheckOutDate:ke,additionalNights:Re,additionalAmount:ot}),j("Booking extended successfully!"),setTimeout(()=>j(""),3e3),await Me()}catch(_t){throw new Error(((Tt=(mt=_t.response)==null?void 0:mt.data)==null?void 0:Tt.message)||"Failed to extend booking")}},Ae=async(xe,ke)=>{var Re,ot;try{const mt=await ra.put(`/room-booking/${xe}/cancel-extension`,{daysToCancel:ke});return j(`${ke} day(s) cancelled from extension successfully!`),setTimeout(()=>j(""),5e3),await Me(),mt.data}catch(mt){throw new Error(((ot=(Re=mt.response)==null?void 0:Re.data)==null?void 0:ot.message)||"Failed to cancel extension")}},Qe=async xe=>{var ke;try{const Re=xe[0];await ra.put(`/room-booking/${Re._id}/status`,{status:"checked-out",actualCheckOutTime:new Date().toISOString()}),await Me();const ot=Re.totalRooms||((ke=Re.bulkRoomDetails)==null?void 0:ke.length)||0;return j(`Successfully checked out bulk booking for ${Re.userName} (${ot} rooms)!`),setTimeout(()=>j(""),5e3),{success:!0}}catch(Re){throw console.error("Error in bulk checkout:",Re),new Error("Failed to checkout bulk booking. Please try again.")}},pt=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("userType"),localStorage.removeItem("receptionistData"),e("/login")},Bt=Array.isArray(a)?a.filter(xe=>{var ot,mt;const ke=((ot=xe.roomNumber)==null?void 0:ot.toLowerCase().includes(v.toLowerCase()))||((mt=xe.roomType)==null?void 0:mt.toLowerCase().includes(v.toLowerCase()));if(A==="all")return ke;const{status:Re}=Ee();return ke&&Re===A}).sort((xe,ke)=>{const Re=parseInt(xe.roomNumber)||0,ot=parseInt(ke.roomNumber)||0;return Re-ot}):[],kt=(xe=>d.filter(ke=>new Date(ke.createdAt).toISOString().split("T")[0]===xe))(fe),ae=xe=>xe?new Date(xe).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"",Ie=()=>{const xe=new Date,ke=new Date(xe);ke.setDate(ke.getDate()-1);const Re=new Date(xe);return Re.setDate(Re.getDate()-2),[{label:"Today",date:xe.toISOString().split("T")[0]},{label:"Yesterday",date:ke.toISOString().split("T")[0]},{label:"2 Days Ago",date:Re.toISOString().split("T")[0]}]},Ye=xe=>{var mt,Tt,_t;const ke=xe.totalPrice||0,Re=window.open("","_blank"),ot=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Hotel Virat - Bill</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 15px; }
          .header img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
          .header h1 { font-size: 24px; margin-bottom: 5px; }
          .header p { font-size: 12px; color: #666; }
          .header .gst { font-size: 11px; color: #333; font-weight: bold; margin-top: 5px; }
          .bill-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .bill-info p { font-size: 13px; margin: 4px 0; }
          .guest-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .guest-info h3 { font-size: 14px; margin-bottom: 8px; }
          .guest-info p { font-size: 13px; margin: 4px 0; }
          .stay-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .stay-info h3 { font-size: 14px; margin-bottom: 8px; }
          .stay-info p { font-size: 13px; margin: 4px 0; }
          .charges { margin-bottom: 15px; }
          .charges h3 { font-size: 14px; margin-bottom: 8px; }
          .charge-row { display: flex; justify-content: space-between; font-size: 13px; margin: 5px 0; }
          .charge-row.total { font-weight: bold; font-size: 16px; border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; }
          .footer { text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px dashed #ccc; }
          .footer p { font-size: 12px; color: #666; margin: 3px 0; }
          @media print { body { padding: 10px; } }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${Yo}" alt="Hotel Virat Logo" />
          <h1>HOTEL VIRAT</h1>
          <p>Your Comfort, Our Priority</p>
          <p class="gst">GSTIN: 29AGZPV1558K2Z6</p>
        </div>
        
        <div class="bill-info">
          <p><strong>Bill No:</strong> ${((mt=xe._id)==null?void 0:mt.slice(-8).toUpperCase())||"N/A"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p><strong>Room No:</strong> ${((Tt=xe.roomId)==null?void 0:Tt.roomNumber)||"N/A"}</p>
          <p><strong>Room Type:</strong> ${((_t=xe.roomId)==null?void 0:_t.roomType)||"N/A"}</p>
        </div>
        
        <div class="guest-info">
          <h3>Guest Details</h3>
          <p><strong>Name:</strong> ${xe.userName||"N/A"}</p>
          <p><strong>Phone:</strong> ${xe.userPhone||"N/A"}</p>
          ${xe.userEmail?`<p><strong>Email:</strong> ${xe.userEmail}</p>`:""}
          ${xe.guestGstNumber?`<p><strong>GSTIN:</strong> ${xe.guestGstNumber}</p>`:""}
        </div>
        
        <div class="stay-info">
          <h3>Stay Details</h3>
          <p><strong>Check-in:</strong> ${ae(xe.checkInDate)} at ${xe.checkInTime||"12:00"}</p>
          <p><strong>Check-out:</strong> ${ae(xe.checkOutDate)} at ${xe.checkOutTime||"11:00"}</p>
          <p><strong>No. of Nights:</strong> ${xe.nights||1}</p>
        </div>
        
        <div class="charges">
          <h3>Room Charges</h3>
          <div class="charge-row">
            <span>Room Charges (${xe.nights||1} night${(xe.nights||1)>1?"s":""})</span>
            <span>${(xe.baseAmount||0).toFixed(2)}</span>
          </div>
          ${xe.gstType==="gst"?`
            <div class="charge-row">
              <span>CGST (2.5%)</span>
              <span>${(xe.cgst||0).toFixed(2)}</span>
            </div>
            <div class="charge-row">
              <span>SGST (2.5%)</span>
              <span>${(xe.sgst||0).toFixed(2)}</span>
            </div>
          `:""}
          ${xe.gstType==="igst"?`
            <div class="charge-row">
              <span>IGST (5%)</span>
              <span>${(xe.igst||0).toFixed(2)}</span>
            </div>
          `:""}
          <div class="charge-row total">
            <span>Total Amount</span>
            <span>${ke.toFixed(2)}</span>
          </div>
        </div>
        
        <div class="footer">
          <p>Thank you for staying with us!</p>
          <p>We hope to see you again soon.</p>
          <p style="margin-top: 10px; font-size: 10px;">This is a computer generated bill.</p>
        </div>
      </body>
      </html>
    `;Re.document.write(ot),Re.document.close(),Re.focus(),setTimeout(()=>{Re.print()},250)},Ft=xe=>{var _t,st;const ke=xe.baseAmount||0,Re=xe.bulkRoomDetails||[],ot=Re.length>0?Re.map(wt=>`
          <div class="charge-row">
            <span>Room ${wt.roomNumber} (${wt.roomType})</span>
            <span>${(wt.baseAmount||0).toFixed(2)}</span>
          </div>
        `).join(""):`
          <div class="charge-row">
            <span>Room Charges (${xe.nights||1} night${(xe.nights||1)>1?"s":""})</span>
            <span>${ke.toFixed(2)}</span>
          </div>
        `,mt=window.open("","_blank"),Tt=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Hotel Virat - Bill (Without GST)</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: 0 auto; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 15px; }
          .header img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
          .header h1 { font-size: 24px; margin-bottom: 5px; }
          .header p { font-size: 12px; color: #666; }
          .bill-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .bill-info p { font-size: 13px; margin: 4px 0; }
          .guest-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .guest-info h3 { font-size: 14px; margin-bottom: 8px; }
          .guest-info p { font-size: 13px; margin: 4px 0; }
          .stay-info { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc; }
          .stay-info h3 { font-size: 14px; margin-bottom: 8px; }
          .stay-info p { font-size: 13px; margin: 4px 0; }
          .charges { margin-bottom: 15px; }
          .charges h3 { font-size: 14px; margin-bottom: 8px; }
          .charge-row { display: flex; justify-content: space-between; font-size: 13px; margin: 5px 0; }
          .charge-row.total { font-weight: bold; font-size: 16px; border-top: 2px solid #000; padding-top: 10px; margin-top: 10px; }
          .room-summary { background: #f0f9ff; padding: 10px; border-radius: 6px; margin-bottom: 15px; border-left: 4px solid #0ea5e9; }
          .room-summary p { font-size: 12px; color: #0c4a6e; margin: 2px 0; font-weight: 500; }
          .footer { text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px dashed #ccc; }
          .footer p { font-size: 12px; color: #666; margin: 3px 0; }
          @media print { body { padding: 10px; } }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="${Yo}" alt="Hotel Virat Logo" />
          <h1>HOTEL VIRAT</h1>
          <p>Your Comfort, Our Priority</p>
        </div>
        
        <div class="bill-info">
          <p><strong>Bill No:</strong> ${((_t=xe._id)==null?void 0:_t.slice(-8).toUpperCase())||"N/A"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p><strong>Booking Type:</strong> BULK BOOKING</p>
        </div>
        
        ${Re.length>0?`
          <div class="room-summary">
            <p><strong>ROOMS BOOKED:</strong></p>
            <p>${Re.map(wt=>`Room ${wt.roomNumber} (${wt.roomType})`).join(", ")}</p>
          </div>
        `:""}
        
        <div class="guest-info">
          <h3>Guest Details</h3>
          <p><strong>Name:</strong> ${((st=xe.userName)==null?void 0:st.replace("BULK: ",""))||"N/A"}</p>
          <p><strong>Phone:</strong> ${xe.userPhone||"N/A"}</p>
          ${xe.userEmail?`<p><strong>Email:</strong> ${xe.userEmail}</p>`:""}
        </div>
        
        <div class="stay-info">
          <h3>Stay Details</h3>
          <p><strong>Check-in:</strong> ${ae(xe.checkInDate)} at ${xe.checkInTime||"12:00"}</p>
          <p><strong>Check-out:</strong> ${ae(xe.checkOutDate)} at ${xe.checkOutTime||"11:00"}</p>
          <p><strong>No. of Nights:</strong> ${xe.nights||1}</p>
        </div>
        
        <div class="charges">
          <h3>Room Charges Breakdown</h3>
          ${ot}
          <div class="charge-row total">
            <span>Total Amount (Without GST)</span>
            <span>${ke.toFixed(2)}</span>
          </div>
        </div>
        
        <div class="footer">
          <p>Thank you for staying with us!</p>
          <p>We hope to see you again soon.</p>
          <p style="margin-top: 10px; font-size: 10px;">This is a computer generated bill without GST.</p>
        </div>
      </body>
      </html>
    `;mt.document.write(Tt),mt.document.close(),mt.focus(),setTimeout(()=>{mt.print()},250)};return t?r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto",backgroundColor:"#f3f4f6"},children:r.jsxs("div",{style:{padding:"20px",paddingBottom:"100px",maxWidth:"1400px",margin:"0 auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"15px 20px",backgroundColor:"#059669",borderRadius:"8px",color:"white"},children:[r.jsxs("div",{children:[r.jsx("h1",{style:{margin:0,fontSize:"24px"},children:"Reception Dashboard"}),r.jsxs("p",{style:{margin:"5px 0 0",opacity:.9},children:[t.name," ",t.branchName?`- ${t.branchName}`:""]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:Me,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[r.jsx(ai,{size:16})," Refresh"]}),r.jsxs("button",{onClick:pt,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#dc2626",border:"none",borderRadius:"6px",color:"white",cursor:"pointer"},children:[r.jsx(pm,{size:16})," Logout"]})]})]}),b&&r.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(ca,{size:18}),r.jsx("span",{children:b})]}),m&&r.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:m})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:[r.jsxs("div",{style:{padding:"20px",backgroundColor:"#dcfce7",borderRadius:"8px"},children:[r.jsx("h3",{style:{margin:0,color:"#166534"},children:"Available"}),r.jsx("p",{style:{margin:"10px 0 0",fontSize:"32px",fontWeight:"bold",color:"#166534"},children:a.filter(xe=>Ee().status==="available").length})]}),r.jsxs("div",{style:{padding:"20px",backgroundColor:"#fee2e2",borderRadius:"8px"},children:[r.jsx("h3",{style:{margin:0,color:"#dc2626"},children:"Unavailable"}),r.jsx("p",{style:{margin:"10px 0 0",fontSize:"32px",fontWeight:"bold",color:"#dc2626"},children:a.filter(xe=>Ee().status==="unavailable").length})]}),r.jsxs("div",{style:{padding:"20px",backgroundColor:"#f3f4f6",borderRadius:"8px"},children:[r.jsx("h3",{style:{margin:0,color:"#374151"},children:"Total Rooms"}),r.jsx("p",{style:{margin:"10px 0 0",fontSize:"32px",fontWeight:"bold",color:"#374151"},children:a.length})]})]}),r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",marginBottom:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[r.jsx("h2",{style:{margin:0,fontSize:"20px",color:"#374151"},children:" Payment Collections"}),r.jsx("div",{style:{display:"flex",gap:"8px"},children:["today","week","month","all"].map(xe=>r.jsx("button",{onClick:()=>we(xe),style:{padding:"8px 16px",border:We===xe?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:We===xe?"#dcfce7":"white",color:We===xe?"#059669":"#6b7280",cursor:"pointer",fontSize:"14px",fontWeight:We===xe?"600":"400",textTransform:"capitalize"},children:xe==="all"?"All Time":xe==="week"?"This Week":xe==="month"?"This Month":"Today"},xe))})]}),(()=>{const xe=new Date,ke=new Date(xe.getFullYear(),xe.getMonth(),xe.getDate()),Re=new Date(ke),ot=Re.getDay(),mt=Re.getDate()-ot+(ot===0?-6:1);Re.setDate(mt);const Tt=new Date(xe.getFullYear(),xe.getMonth(),1),_t=d.filter(Nt=>{if(!Nt.createdAt)return!1;const Kt=new Date(Nt.createdAt);switch(We){case"today":return Kt>=ke;case"week":return Kt>=Re;case"month":return Kt>=Tt;case"all":default:return!0}}),st=_t.reduce((Nt,Kt)=>Nt+(Kt.cashAmount||0),0),wt=_t.reduce((Nt,Kt)=>Nt+(Kt.onlineAmount||0),0),yt=_t.reduce((Nt,Kt)=>Nt+(Kt.amountPaid||0),0);return r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:[r.jsxs("div",{style:{padding:"20px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"2px solid #fde68a"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[r.jsx("span",{style:{fontSize:"32px"},children:""}),r.jsx("h3",{style:{margin:0,color:"#92400e",fontSize:"16px"},children:"Cash Collected"})]}),r.jsxs("p",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#92400e"},children:["",st.toFixed(2)]}),r.jsxs("p",{style:{margin:"8px 0 0",fontSize:"13px",color:"#92400e",opacity:.8},children:[_t.filter(Nt=>(Nt.cashAmount||0)>0).length," transaction(s)"]})]}),r.jsxs("div",{style:{padding:"20px",backgroundColor:"#dbeafe",borderRadius:"8px",border:"2px solid #bfdbfe"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[r.jsx("span",{style:{fontSize:"32px"},children:""}),r.jsx("h3",{style:{margin:0,color:"#1e40af",fontSize:"16px"},children:"Online Collected"})]}),r.jsxs("p",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#1e40af"},children:["",wt.toFixed(2)]}),r.jsxs("p",{style:{margin:"8px 0 0",fontSize:"13px",color:"#1e40af",opacity:.8},children:[_t.filter(Nt=>(Nt.onlineAmount||0)>0).length," transaction(s)"]})]}),r.jsxs("div",{style:{padding:"20px",backgroundColor:"#e0e7ff",borderRadius:"8px",border:"2px solid #c7d2fe"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[r.jsx("span",{style:{fontSize:"32px"},children:""}),r.jsx("h3",{style:{margin:0,color:"#4338ca",fontSize:"16px"},children:"Total Collected"})]}),r.jsxs("p",{style:{margin:0,fontSize:"32px",fontWeight:"bold",color:"#4338ca"},children:["",yt.toFixed(2)]}),r.jsxs("p",{style:{margin:"8px 0 0",fontSize:"13px",color:"#4338ca",opacity:.8},children:[_t.filter(Nt=>(Nt.amountPaid||0)>0).length," booking(s)"]})]})]})})()]}),r.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"2px solid #e5e7eb",paddingBottom:"10px"},children:[r.jsxs("button",{onClick:()=>se("rooms"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:ee==="rooms"?"#059669":"#f3f4f6",color:ee==="rooms"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(bi,{size:18})," Rooms"]}),r.jsxs("button",{onClick:()=>se("advance"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:ee==="advance"?"#059669":"#f3f4f6",color:ee==="advance"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(rn,{size:18})," Advance Booking"]}),r.jsxs("button",{onClick:()=>se("extend"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:ee==="extend"?"#f59e0b":"#f3f4f6",color:ee==="extend"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(ai,{size:18})," Extend Booking"]}),r.jsxs("button",{onClick:()=>se("history"),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:ee==="history"?"#059669":"#f3f4f6",color:ee==="history"?"white":"#374151",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(rn,{size:18})," Booking History"]})]}),ee==="advance"&&r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0f9ff",borderRadius:"8px",borderLeft:"4px solid #0ea5e9"},children:[r.jsx("h3",{style:{margin:"0 0 5px",fontSize:"16px"},children:"Advance Bookings (Future Check-ins)"}),r.jsx("p",{style:{margin:0,color:"#6b7280"},children:(()=>{const xe=new Date;xe.setHours(0,0,0,0);const ke=d.filter(Re=>{if(!Re.checkInDate)return!1;const ot=new Date(Re.checkInDate);return ot.setHours(0,0,0,0),ot>=xe&&Re.status!=="cancelled"});return`${ke.length} advance booking(s) found | Total Revenue: ${ke.reduce((Re,ot)=>Re+(ot.totalPrice||0),0).toFixed(2)} | Collected: ${ke.reduce((Re,ot)=>Re+(ot.amountPaid||0),0).toFixed(2)}`})()})]}),(()=>{const xe=new Date;xe.setHours(0,0,0,0);const ke=d.filter(Re=>{if(!Re.checkInDate)return!1;const ot=new Date(Re.checkInDate);ot.setHours(0,0,0,0);const mt=Re.status!=="cancelled";return ot>=xe&&mt}).sort((Re,ot)=>new Date(Re.checkInDate)-new Date(ot.checkInDate));return ke.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:ke.map(Re=>{var Tt,_t;const ot=(Re.totalPrice||0)-(Re.amountPaid||0),mt=Math.ceil((new Date(Re.checkInDate)-new Date)/(1e3*60*60*24));return r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e5e7eb",padding:"16px",display:"flex",gap:"20px",alignItems:"flex-start",justifyContent:"space-between"},children:[r.jsxs("div",{style:{flex:"1 1 auto",minWidth:0},children:[r.jsxs("div",{style:{marginBottom:"10px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[r.jsxs("span",{style:{fontSize:"17px",fontWeight:"600",color:"#111827"},children:["Room ",((Tt=Re.roomId)==null?void 0:Tt.roomNumber)||"N/A"]}),r.jsx("span",{style:{fontSize:"12px",color:"#6b7280",padding:"2px 8px",backgroundColor:"#f3f4f6",borderRadius:"4px"},children:((_t=Re.roomId)==null?void 0:_t.roomType)||"N/A"})]}),r.jsx("div",{style:{fontSize:"14px",color:"#374151",fontWeight:"500"},children:Re.userName}),r.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:[Re.userPhone,Re.userEmail&&`  ${Re.userEmail}`]})]}),r.jsxs("div",{style:{fontSize:"13px",color:"#6b7280",lineHeight:"1.5"},children:[r.jsxs("div",{children:[r.jsx("strong",{style:{color:"#374151"},children:"Check-in:"})," ",ae(Re.checkInDate)," at ",Re.checkInTime||"12:00"]}),r.jsxs("div",{children:[r.jsx("strong",{style:{color:"#374151"},children:"Check-out:"})," ",ae(Re.checkOutDate)," at ",Re.checkOutTime||"11:00"]}),r.jsxs("div",{style:{marginTop:"4px",color:"#059669",fontWeight:"500",fontSize:"12px"},children:[Re.nights," night",Re.nights>1?"s":"","  ",mt," day",mt!==1?"s":""," until check-in"]})]}),(Re.aadhaarNumber||Re.panNumber)&&r.jsxs("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #f3f4f6"},children:[Re.aadhaarNumber&&r.jsxs("span",{children:["Aadhaar: ",Re.aadhaarNumber]}),Re.aadhaarNumber&&Re.panNumber&&r.jsx("span",{children:"  "}),Re.panNumber&&r.jsxs("span",{children:["PAN: ",Re.panNumber]})]})]}),r.jsxs("div",{style:{width:"220px",flexShrink:0,display:"flex",flexDirection:"column",gap:"10px"},children:[r.jsxs("div",{style:{padding:"10px 12px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"3px"},children:[r.jsx("span",{style:{color:"#6b7280"},children:"Total"}),r.jsxs("span",{style:{fontWeight:"600",color:"#374151"},children:["",(Re.totalPrice||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"6px"},children:[r.jsx("span",{style:{color:"#6b7280"},children:"Paid"}),r.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:["",(Re.amountPaid||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",paddingTop:"6px",borderTop:"1px solid #e5e7eb"},children:[r.jsx("span",{style:{fontWeight:"600",color:ot>0?"#dc2626":"#059669"},children:"Balance"}),r.jsxs("span",{style:{fontWeight:"700",color:ot>0?"#dc2626":"#059669"},children:["",ot.toFixed(2)]})]})]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[ot>0&&r.jsx("button",{onClick:()=>{z(Re),R(!0)},style:{padding:"8px 14px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:st=>st.target.style.backgroundColor="#047857",onMouseOut:st=>st.target.style.backgroundColor="#059669",children:"Add Payment"}),r.jsx("button",{onClick:()=>{z(Re),G(!0)},style:{padding:"8px 14px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:st=>st.target.style.backgroundColor="#d97706",onMouseOut:st=>st.target.style.backgroundColor="#f59e0b",children:"Extend Booking"}),r.jsx("button",{onClick:()=>{var st;window.confirm(`Cancel booking for ${Re.userName}?

Room: ${(st=Re.roomId)==null?void 0:st.roomNumber}
Check-in: ${ae(Re.checkInDate)}`)&&ze(Re._id)},style:{padding:"8px 14px",backgroundColor:"white",color:"#dc2626",border:"1px solid #dc2626",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:"all 0.2s"},onMouseOver:st=>{st.target.style.backgroundColor="#dc2626",st.target.style.color="white"},onMouseOut:st=>{st.target.style.backgroundColor="white",st.target.style.color="#dc2626"},children:"Cancel Booking"})]})]})]},Re._id)})}):r.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280",backgroundColor:"white",borderRadius:"8px"},children:[r.jsx(rn,{size:48,style:{marginBottom:"10px",opacity:.5}}),r.jsx("p",{children:"No advance bookings found"})]})})()]}),ee==="extend"&&r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#fef3c7",borderRadius:"8px",borderLeft:"4px solid #f59e0b"},children:[r.jsx("h3",{style:{margin:"0 0 5px",fontSize:"16px"},children:"Current Bookings - Extend Stay"}),r.jsx("p",{style:{margin:0,color:"#6b7280"},children:(()=>{const xe=d.filter(ke=>ke.status==="checked-in");return`${xe.length} active booking(s) | Total Revenue: ${xe.reduce((ke,Re)=>ke+(Re.totalPrice||0),0).toFixed(2)} | Collected: ${xe.reduce((ke,Re)=>ke+(Re.amountPaid||0),0).toFixed(2)}`})()})]}),(()=>{const xe=d.filter(ke=>ke.status==="checked-in");return xe.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:xe.map(ke=>{var Tt,_t;const Re=ke.totalPrice||0,ot=ke.amountPaid||0,mt=Re-ot;return r.jsx("div",{style:{padding:"20px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderLeft:"4px solid #f59e0b"},children:r.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"15px"},children:r.jsxs("div",{style:{flex:1},children:[r.jsxs("h4",{style:{margin:"0 0 10px",display:"flex",alignItems:"center",gap:"10px",fontSize:"18px"},children:[r.jsx(bi,{size:20})," Room ",((Tt=ke.roomId)==null?void 0:Tt.roomNumber)||"N/A",r.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",backgroundColor:"#dcfce7",color:"#166534"},children:"CHECKED-IN"}),ke.extensions&&ke.extensions.length>0&&r.jsxs("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backgroundColor:"#fef3c7",color:"#92400e",border:"1px solid #f59e0b"},children:["EXTENDED (",ke.extensions.length,"x)"]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[r.jsxs("div",{children:[r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[r.jsx(Vo,{size:14,style:{marginRight:"6px"}}),r.jsx("strong",{children:"Guest:"})," ",ke.userName]}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[r.jsx(Ia,{size:14,style:{marginRight:"6px"}}),r.jsx("strong",{children:"Phone:"})," ",ke.userPhone]}),ke.userEmail&&r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[r.jsx(Ps,{size:14,style:{marginRight:"6px"}}),r.jsx("strong",{children:"Email:"})," ",ke.userEmail]})]}),r.jsxs("div",{children:[r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[r.jsx(rn,{size:14,style:{marginRight:"6px"}}),r.jsx("strong",{children:"Check-in:"})," ",ae(ke.checkInDate)]}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[r.jsx(rn,{size:14,style:{marginRight:"6px"}}),r.jsx("strong",{children:"Check-out:"})," ",ae(ke.checkOutDate)]}),r.jsxs("p",{style:{margin:"5px 0",fontSize:"14px",color:"#374151"},children:[r.jsx("strong",{children:"Nights:"})," ",ke.nights]})]})]}),r.jsxs("div",{style:{padding:"12px",backgroundColor:"#f9fafb",borderRadius:"6px",marginBottom:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[r.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Total Amount:"}),r.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:["",Re.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[r.jsx("span",{style:{fontSize:"14px",color:"#059669"},children:"Amount Paid:"}),r.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#059669"},children:["",ot.toFixed(2)]})]}),mt>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[r.jsx("span",{style:{fontSize:"14px",color:"#dc2626",fontWeight:"600"},children:"Balance Due:"}),r.jsxs("span",{style:{fontSize:"14px",fontWeight:"700",color:"#dc2626"},children:["",mt.toFixed(2)]})]}),ke.gstType&&ke.gstType!=="none"&&r.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:["GST Applied: ",ke.gstType==="gst"?"CGST + SGST (5%)":"IGST (5%)"]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[mt>0&&r.jsx("button",{onClick:()=>{z(ke),R(!0)},style:{padding:"10px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:st=>st.target.style.backgroundColor="#047857",onMouseOut:st=>st.target.style.backgroundColor="#059669",children:"Add Payment"}),r.jsxs("button",{onClick:()=>{z(ke),G(!0)},style:{padding:"10px 16px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:st=>st.target.style.backgroundColor="#d97706",onMouseOut:st=>st.target.style.backgroundColor="#f59e0b",children:[r.jsx(ai,{size:16})," Extend Stay"]}),(()=>{var st;return console.log("Booking extensions check:",{bookingId:ke._id,hasExtensions:ke.extensions,extensionsLength:(st=ke.extensions)==null?void 0:st.length,extensionsData:ke.extensions}),ke.extensions&&ke.extensions.length>0})()&&r.jsxs("button",{onClick:()=>{z(ke),q(!0)},style:{padding:"10px 16px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:st=>st.target.style.backgroundColor="#b91c1c",onMouseOut:st=>st.target.style.backgroundColor="#dc2626",title:"Cancel specific days from extension",children:[r.jsx(On,{size:16})," Cancel Extension"]}),r.jsx("button",{onClick:()=>{z(ke),N(!0)},style:{padding:"10px 16px",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:st=>st.target.style.backgroundColor="#7c3aed",onMouseOut:st=>st.target.style.backgroundColor="#8b5cf6",children:"Restaurant Bill"}),r.jsx("button",{onClick:()=>Z(ke),style:{padding:"10px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:st=>st.target.style.backgroundColor="#2563eb",onMouseOut:st=>st.target.style.backgroundColor="#3b82f6",children:"Checkout"}),ke.gstType&&ke.gstType!=="none"&&r.jsxs("button",{onClick:()=>Ye(ke),style:{padding:"10px 16px",backgroundColor:"white",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:st=>{st.target.style.backgroundColor="#f3f4f6"},onMouseOut:st=>{st.target.style.backgroundColor="white"},children:[r.jsx(_s,{size:16})," Print Bill"]}),((_t=ke.userName)==null?void 0:_t.startsWith("BULK:"))&&r.jsxs("button",{onClick:()=>Ft(ke),style:{padding:"10px 16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:st=>{st.target.style.backgroundColor="#059669"},onMouseOut:st=>{st.target.style.backgroundColor="#10b981"},children:[r.jsx(_s,{size:16})," Print Bill (No GST)"]})]})]})})},ke._id)})}):r.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280",backgroundColor:"white",borderRadius:"8px"},children:[r.jsx(bi,{size:48,style:{marginBottom:"10px",opacity:.5}}),r.jsx("p",{children:"No active bookings found"}),r.jsx("p",{style:{fontSize:"14px",marginTop:"5px"},children:"All checked-in guests will appear here"})]})})()]}),ee==="history"&&r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap",alignItems:"center"},children:[r.jsx("div",{style:{display:"flex",gap:"8px"},children:Ie().map(({label:xe,date:ke})=>r.jsx("button",{onClick:()=>ue(ke),style:{padding:"8px 16px",border:fe===ke?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:fe===ke?"#dcfce7":"white",cursor:"pointer",fontSize:"13px",fontWeight:fe===ke?"600":"400"},children:xe},ke))}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Or select date:"}),r.jsx("input",{type:"date",value:fe,onChange:xe=>ue(xe.target.value),style:{padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0f9ff",borderRadius:"8px",borderLeft:"4px solid #0ea5e9"},children:[r.jsxs("h3",{style:{margin:"0 0 5px",fontSize:"16px"},children:["Bookings for ",ae(fe)]}),r.jsxs("p",{style:{margin:0,color:"#6b7280"},children:[kt.length," booking(s) found | Total Revenue: ",kt.reduce((xe,ke)=>xe+(ke.totalPrice||0),0).toFixed(2)," | Collected: ",kt.reduce((xe,ke)=>xe+(ke.amountPaid||0),0).toFixed(2)]})]}),kt.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:kt.map(xe=>{var ke,Re,ot;return r.jsx("div",{style:{padding:"15px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderLeft:`4px solid ${xe.status==="checked-out"?"#22c55e":xe.status==="cancelled"?"#ef4444":"#f59e0b"}`},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"10px"},children:[r.jsxs("div",{children:[r.jsxs("h4",{style:{margin:"0 0 5px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(bi,{size:16})," Room ",((ke=xe.roomId)==null?void 0:ke.roomNumber)||"N/A",r.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"500",backgroundColor:xe.status==="checked-out"?"#dcfce7":xe.status==="cancelled"?"#fee2e2":"#fef3c7",color:xe.status==="checked-out"?"#166534":xe.status==="cancelled"?"#dc2626":"#92400e"},children:(Re=xe.status)==null?void 0:Re.toUpperCase()})]}),r.jsxs("p",{style:{margin:"3px 0",fontSize:"14px",color:"#374151"},children:[r.jsx("strong",{children:"Guest:"})," ",xe.userName," | ",r.jsx("strong",{children:"Phone:"})," ",xe.userPhone]}),r.jsxs("p",{style:{margin:"3px 0",fontSize:"13px",color:"#6b7280"},children:["Check-in: ",ae(xe.checkInDate),"  Check-out: ",ae(xe.checkOutDate)," (",xe.nights," nights)"]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("p",{style:{margin:"0 0 3px",fontSize:"14px"},children:[r.jsx("strong",{children:"Total:"})," ",(xe.totalPrice||0).toFixed(2)]}),r.jsxs("p",{style:{margin:"0 0 3px",fontSize:"13px",color:"#059669"},children:[r.jsx("strong",{children:"Paid:"})," ",(xe.amountPaid||0).toFixed(2)]}),xe.totalPrice-(xe.amountPaid||0)>0&&r.jsxs("p",{style:{margin:"0",fontSize:"13px",color:"#dc2626",fontWeight:"600"},children:["Due: ",(xe.totalPrice-(xe.amountPaid||0)).toFixed(2)]}),xe.gstType&&xe.gstType!=="none"&&r.jsxs("p",{style:{margin:"3px 0 0",fontSize:"11px",color:"#6b7280"},children:["GST: ",xe.gstType==="gst"?"CGST+SGST":"IGST"]}),xe.gstType&&xe.gstType!=="none"&&r.jsxs("button",{onClick:()=>Ye(xe),style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",marginLeft:"auto"},children:[r.jsx(_s,{size:14})," Print Bill"]}),((ot=xe.userName)==null?void 0:ot.startsWith("BULK:"))&&r.jsxs("button",{onClick:()=>Ft(xe),style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",marginLeft:"auto"},children:[r.jsx(_s,{size:14})," Print Bill (No GST)"]})]})]})},xe._id)})}):r.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280",backgroundColor:"white",borderRadius:"8px"},children:[r.jsx(rn,{size:48,style:{marginBottom:"10px",opacity:.5}}),r.jsxs("p",{children:["No bookings found for ",ae(fe)]})]})]}),ee==="rooms"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"},children:[r.jsxs("div",{style:{position:"relative",flex:1,minWidth:"250px"},children:[r.jsx(Tr,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),r.jsx("input",{type:"text",placeholder:"Search by room number or type...",value:v,onChange:xe=>y(xe.target.value),style:{width:"100%",padding:"10px 10px 10px 40px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),r.jsxs("select",{value:A,onChange:xe=>E(xe.target.value),style:{padding:"10px 15px",border:"1px solid #e5e7eb",borderRadius:"6px",minWidth:"150px"},children:[r.jsx("option",{value:"all",children:"All Rooms"}),r.jsx("option",{value:"available",children:"Available"}),r.jsx("option",{value:"unavailable",children:"Unavailable"})]}),r.jsxs("button",{onClick:()=>U(!0),style:{padding:"10px 20px",backgroundColor:"#7c3aed",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[r.jsx(bi,{size:18}),"Bulk Booking"]}),r.jsxs("button",{onClick:()=>le(!0),style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[r.jsx(pm,{size:18}),"Bulk Checkout"]})]}),h?r.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading rooms..."}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:Bt.map(xe=>{var st;const ke=new Date,Re=ke.getMonth(),ot=ke.getFullYear(),mt=new Date(ot,Re+1,0).getDate(),Tt=d.filter(wt=>{var zr;if((((zr=wt.roomId)==null?void 0:zr._id)||wt.roomId)!==xe._id)return!1;const Nt=new Date(wt.checkInDate),Kt=new Date(wt.checkOutDate),Lt=new Date(ot,Re,1),Ut=new Date(ot,Re+1,0);return Nt<=Ut&&Kt>=Lt}),_t={};return Tt.forEach(wt=>{const yt=wt.checkInDate.split("T")[0],Nt=wt.checkOutDate.split("T")[0],Kt=new Date(yt),Lt=new Date(Nt),Ut=new Date(Kt);for(;Ut<Lt;){if(Ut.getMonth()===Re&&Ut.getFullYear()===ot){const zr=Ut.getDate();_t[zr]||(_t[zr]=[]),_t[zr].push({guestName:wt.userName,phone:wt.userPhone,checkIn:wt.checkInDate,checkOut:wt.checkOutDate,status:wt.status,bookingId:wt._id})}Ut.setDate(Ut.getDate()+1)}}),r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"2px solid #e5e7eb"},children:[r.jsx("div",{style:{padding:"15px",backgroundColor:"#f8fafc",borderBottom:"1px solid #e5e7eb"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(bi,{size:20})," Room ",xe.roomNumber]}),r.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:r.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",backgroundColor:"#22c55e",color:"white"},children:"Available"})})]})}),r.jsxs("div",{style:{padding:"15px"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[r.jsxs("div",{children:[r.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[r.jsx("strong",{children:"Type:"})," ",xe.roomType]}),r.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[r.jsx("strong",{children:"Floor:"})," ",xe.floor]}),r.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[r.jsx("strong",{children:"Price:"})," ",xe.price,"/night"]}),r.jsxs("p",{style:{margin:"0 0 8px",color:"#6b7280",fontSize:"14px"},children:[r.jsx("strong",{children:"Capacity:"})," ",((st=xe.capacity)==null?void 0:st.adults)||2," Adults"]})]}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[r.jsx(rn,{size:16}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:new Date(ot,Re).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",fontSize:"10px"},children:[["S","M","T","W","T","F","S"].map((wt,yt)=>r.jsx("div",{style:{textAlign:"center",fontWeight:"600",color:"#6b7280",padding:"2px"},children:wt},`day-header-${yt}`)),(()=>{const wt=new Date(ot,Re,1).getDay(),yt=[];for(let Nt=0;Nt<wt;Nt++)yt.push(r.jsx("div",{style:{padding:"4px"}},`empty-${Nt}`));for(let Nt=1;Nt<=mt;Nt++){const Kt=Nt===ke.getDate()&&Re===new Date().getMonth()&&ot===new Date().getFullYear(),Lt=_t[Nt]||[],Ut=Lt.length>0,zr=Lt.length>0?Lt.map(Qt=>`${Qt.guestName} (${Qt.phone})
${new Date(Qt.checkIn).toLocaleDateString()} - ${new Date(Qt.checkOut).toLocaleDateString()}
Status: ${Qt.status}`).join(`

`):"";yt.push(r.jsxs("div",{title:zr,style:{textAlign:"center",padding:"4px",borderRadius:"3px",backgroundColor:Kt?"#3b82f6":"transparent",color:Kt?"white":"#374151",fontWeight:Kt?"600":"400",position:"relative",minHeight:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:Ut?"pointer":"default"},onClick:()=>{if(Ut){const Qt=Lt.map(ln=>`Guest: ${ln.guestName}
Phone: ${ln.phone}
Check-in: ${new Date(ln.checkIn).toLocaleDateString()}
Check-out: ${new Date(ln.checkOut).toLocaleDateString()}
Status: ${ln.status.toUpperCase()}`).join(`

`);alert(`Bookings for ${Nt}/${Re+1}/${ot}:

${Qt}`)}},children:[Nt,Ut&&r.jsx("div",{style:{position:"absolute",top:"2px",right:"2px",width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#ef4444"}}),Lt.length>1&&r.jsx("div",{style:{position:"absolute",bottom:"1px",right:"1px",fontSize:"6px",fontWeight:"bold",color:"#ef4444",backgroundColor:"white",borderRadius:"50%",width:"8px",height:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:Lt.length})]},Nt))}return yt})()]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"11px",color:"#6b7280"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#ef4444"}}),r.jsx("span",{children:"Booked (click for details)"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#3b82f6"}}),r.jsx("span",{children:"Today"})]})]})]})]}),!1,(()=>{const wt=new Date().toISOString().split("T")[0];return d.filter(yt=>{var Ut;if((((Ut=yt.roomId)==null?void 0:Ut._id)||yt.roomId)!==xe._id)return!1;const Kt=yt.checkInDate.split("T")[0],Lt=yt.checkOutDate.split("T")[0];return wt>=Kt&&wt<Lt&&yt.status!=="cancelled"}),d.filter(yt=>{var Lt;return(((Lt=yt.roomId)==null?void 0:Lt._id)||yt.roomId)!==xe._id?!1:yt.checkInDate.split("T")[0]>wt&&(yt.status==="confirmed"||yt.status==="checked-in")}),r.jsxs(r.Fragment,{children:[!1,!1]})})(),(()=>{const wt=new Date().toISOString().split("T")[0],yt=d.find(Nt=>{var zr;if((((zr=Nt.roomId)==null?void 0:zr._id)||Nt.roomId)!==xe._id)return!1;const Lt=Nt.checkInDate.split("T")[0],Ut=Nt.checkOutDate.split("T")[0];return wt>=Lt&&wt<Ut&&Nt.status==="checked-in"});return yt?r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>{z(yt),G(!0)},style:{flex:1,padding:"10px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Extend Stay"}),r.jsx("button",{onClick:()=>Z(yt),style:{flex:1,padding:"10px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Checkout"})]}):r.jsx("button",{onClick:()=>Be(xe),style:{width:"100%",padding:"10px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Book Now"})})()]})]},xe._id)})}),Bt.length===0&&!h&&r.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"No rooms found matching your criteria"})]}),C&&O&&r.jsx(Efe,{room:O,allBookings:d,onClose:()=>{k(!1),S(null)},onBook:it}),V&&r.jsx(_fe,{rooms:a,allBookings:d,onClose:()=>U(!1),onBulkBook:Ve}),F&&I&&r.jsx(Ofe,{booking:I,onClose:()=>{N(!1),z(null)},onAddBill:de,onRemoveBill:te}),B&&I&&r.jsx(kfe,{booking:I,onClose:()=>{M(!1),z(null)},onCheckout:ce,onUpdatePayment:re}),L&&r.jsx(Dfe,{onClose:()=>P(!1),onCreateBooking:Se,onPayBooking:tt,onCancelBooking:ze}),_&&I&&r.jsx(Rfe,{booking:I,onClose:()=>{R(!1),z(null)},onAddPayment:tt}),W&&I&&r.jsx(Pfe,{booking:I,onClose:()=>{G(!1),z(null)},onExtend:Ze}),oe&&I&&r.jsx(Mfe,{booking:I,onClose:()=>{q(!1),z(null)},onCancelExtension:Ae}),Q&&r.jsx(Bfe,{bookings:d,onClose:()=>le(!1),onBulkCheckout:Qe})]})}):r.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading..."})},Dfe=({onClose:e,onCreateBooking:t,onPayBooking:n,onCancelBooking:a})=>{const[s,i]=w.useState("create"),[l,d]=w.useState([]),[u,h]=w.useState(!1),[p,m]=w.useState({guestName:"",guestPhone:"",guestEmail:"",checkInDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkOutDate:new Date(Date.now()+2*864e5).toISOString().split("T")[0],roomType:"",advanceAmount:"",paymentMethod:"cash"});w.useEffect(()=>{s==="manage"&&g()},[s]);const g=async()=>{h(!0);try{const y=await ra.get("/room-booking"),A=y.data.bookings||y.data||[],E=new Date;E.setHours(0,0,0,0);const O=A.filter(S=>{const C=new Date(S.checkInDate);return C.setHours(0,0,0,0),C>E&&S.status==="confirmed"});d(O)}catch(y){console.error("Error fetching future bookings:",y)}finally{h(!1)}},b=async y=>{y.preventDefault();try{const A={...p,status:"confirmed",amountPaid:parseFloat(p.advanceAmount)||0,paymentStatus:"pending"};await t(A),m({guestName:"",guestPhone:"",guestEmail:"",checkInDate:new Date(Date.now()+864e5).toISOString().split("T")[0],checkOutDate:new Date(Date.now()+2*864e5).toISOString().split("T")[0],roomType:"",advanceAmount:"",paymentMethod:"cash"}),i("manage")}catch(A){console.error("Error creating advance booking:",A)}},j=async(y,A,E)=>{try{await n(y._id,A,E),g()}catch(O){console.error("Error processing payment:",O)}},v=async y=>{if(window.confirm(`Are you sure you want to cancel booking for ${y.userName}?`))try{await a(y._id),g()}catch(A){console.error("Error cancelling booking:",A)}};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"800px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#3b82f6",color:"white"},children:[r.jsx("h3",{style:{margin:0},children:"Advance Booking Management"}),r.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),r.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #e5e7eb"},children:[r.jsx("button",{onClick:()=>i("create"),style:{flex:1,padding:"12px",border:"none",backgroundColor:s==="create"?"#3b82f6":"#f3f4f6",color:s==="create"?"white":"#374151",cursor:"pointer",fontWeight:"500"},children:"Create New Booking"}),r.jsxs("button",{onClick:()=>i("manage"),style:{flex:1,padding:"12px",border:"none",backgroundColor:s==="manage"?"#3b82f6":"#f3f4f6",color:s==="manage"?"white":"#374151",cursor:"pointer",fontWeight:"500"},children:["Manage Bookings (",l.length,")"]})]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:s==="create"?r.jsxs("form",{onSubmit:b,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Guest Name *"}),r.jsx("input",{type:"text",value:p.guestName,onChange:y=>m({...p,guestName:y.target.value}),required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter guest name"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Phone *"}),r.jsx("input",{type:"tel",value:p.guestPhone,onChange:y=>m({...p,guestPhone:y.target.value}),required:!0,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter phone number"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Email"}),r.jsx("input",{type:"email",value:p.guestEmail,onChange:y=>m({...p,guestEmail:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter email (optional)"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Room Type"}),r.jsxs("select",{value:p.roomType,onChange:y=>m({...p,roomType:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},children:[r.jsx("option",{value:"",children:"Any Available"}),r.jsx("option",{value:"Single",children:"Single"}),r.jsx("option",{value:"Double",children:"Double"}),r.jsx("option",{value:"Suite",children:"Suite"}),r.jsx("option",{value:"Deluxe",children:"Deluxe"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-in Date *"}),r.jsx("input",{type:"date",value:p.checkInDate,onChange:y=>m({...p,checkInDate:y.target.value}),required:!0,min:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Check-out Date *"}),r.jsx("input",{type:"date",value:p.checkOutDate,onChange:y=>m({...p,checkOutDate:y.target.value}),required:!0,min:p.checkInDate,style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Advance Amount ()"}),r.jsx("input",{type:"number",value:p.advanceAmount,onChange:y=>m({...p,advanceAmount:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:"Enter advance payment",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Payment Method"}),r.jsxs("select",{value:p.paymentMethod,onChange:y=>m({...p,paymentMethod:y.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"online",children:"Online"})]})]})]}),r.jsx("button",{type:"submit",style:{width:"100%",padding:"12px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500",fontSize:"16px"},children:"Create Advance Booking"})]}):r.jsxs("div",{children:[r.jsx("h4",{style:{marginBottom:"15px"},children:"Future Bookings"}),u?r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}):l.length===0?r.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"No future bookings found"}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:l.map(y=>{var A,E,O,S;return r.jsx("div",{style:{padding:"15px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h5",{style:{margin:"0 0 8px",color:"#1e293b"},children:y.userName}),r.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:[r.jsxs("div",{children:[" ",y.userPhone]}),y.userEmail&&r.jsxs("div",{children:[" ",y.userEmail]}),r.jsxs("div",{children:[" Room: ",((A=y.roomId)==null?void 0:A.roomNumber)||"TBD"," (",((E=y.roomId)==null?void 0:E.roomType)||"Any",")"]}),r.jsxs("div",{children:[" ",new Date(y.checkInDate).toLocaleDateString()," - ",new Date(y.checkOutDate).toLocaleDateString()]}),r.jsxs("div",{children:[" Total: ",((O=y.totalPrice)==null?void 0:O.toFixed(2))||"0.00"," | Paid: ",((S=y.amountPaid)==null?void 0:S.toFixed(2))||"0.00"]}),y.totalPrice-y.amountPaid>0&&r.jsxs("div",{style:{color:"#dc2626",fontWeight:"500"},children:[" Due: ",(y.totalPrice-y.amountPaid).toFixed(2)]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[y.totalPrice-y.amountPaid>0&&r.jsx("button",{onClick:()=>{const C=prompt(`Enter payment amount (Due: ${(y.totalPrice-y.amountPaid).toFixed(2)}):`);if(C&&parseFloat(C)>0){const k=confirm("Click OK for Cash, Cancel for Online")?"cash":"online";j(y,parseFloat(C),k)}},style:{padding:"6px 12px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:" Pay"}),r.jsx("button",{onClick:()=>v(y),style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:" Cancel"})]})]})},y._id)})})]})})]})})},Rfe=({booking:e,onClose:t,onAddPayment:n})=>{var v;const[a,s]=w.useState(""),[i,l]=w.useState("cash"),[d,u]=w.useState(!1),[h,p]=w.useState(""),m=e.totalPrice||0,g=e.amountPaid||0,b=m-g,j=async y=>{y.preventDefault(),p("");const A=parseFloat(a);if(!A||A<=0){p("Please enter a valid payment amount");return}if(A>b){p(`Payment amount cannot exceed balance due (${b.toFixed(2)})`);return}u(!0);try{const E=g+A;await n(e._id,E,i),t()}catch(E){p(E.message||"Failed to add payment")}finally{u(!1)}};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",padding:"0",overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#059669",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h3",{style:{margin:0},children:["Add Payment - Room ",(v=e.roomId)==null?void 0:v.roomNumber]}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),h&&r.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:16}),r.jsx("span",{style:{fontSize:"14px"},children:h})]}),r.jsxs("div",{style:{padding:"20px"},children:[r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[r.jsxs("h4",{style:{margin:"0 0 10px"},children:["Guest: ",e.userName]}),r.jsxs("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:["Phone: ",e.userPhone]}),r.jsxs("p",{style:{margin:"5px 0 0",fontSize:"14px",color:"#6b7280"},children:["Check-in: ",new Date(e.checkInDate).toLocaleDateString()," | Check-out: ",new Date(e.checkOutDate).toLocaleDateString()]})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Payment Summary"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[r.jsx("span",{children:"Total Amount:"}),r.jsxs("span",{style:{fontWeight:"600"},children:["",m.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px",color:"#059669"},children:[r.jsx("span",{children:"Already Paid:"}),r.jsxs("span",{style:{fontWeight:"600"},children:["",g.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"10px",borderTop:"1px solid #e5e7eb"},children:[r.jsx("span",{style:{fontWeight:"600",color:"#dc2626"},children:"Balance Due:"}),r.jsxs("span",{style:{fontWeight:"700",fontSize:"18px",color:"#dc2626"},children:["",b.toFixed(2)]})]})]}),r.jsxs("form",{onSubmit:j,children:[r.jsxs("div",{style:{marginBottom:"15px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Payment Amount () *"}),r.jsx("input",{type:"number",value:a,onChange:y=>s(y.target.value),required:!0,min:"0.01",max:b,step:"0.01",style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px"},placeholder:`Enter amount (Max: ${b.toFixed(2)})`})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Payment Method *"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:i==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:i==="cash"?"#dcfce7":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:i==="cash",onChange:y=>l(y.target.value)}),r.jsx("span",{style:{fontWeight:"500"},children:" Cash"})]}),r.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"10px",border:i==="online"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:i==="online"?"#dcfce7":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:i==="online",onChange:y=>l(y.target.value)}),r.jsx("span",{style:{fontWeight:"500"},children:" Online"})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:d,style:{flex:1,padding:"12px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontWeight:"500"},children:d?"Processing...":"Add Payment"})]})]})]})]})})},Pfe=({booking:e,onClose:t,onExtend:n})=>{var A,E;const[a,s]=w.useState(1),[i,l]=w.useState(!1),[d,u]=w.useState(""),h=new Date(e.checkOutDate),p=new Date(h),m=typeof a=="string"?parseInt(a)||0:a;p.setDate(p.getDate()+m);const g=((A=e.roomId)==null?void 0:A.price)||0,b=g*m,j=e.gstType==="gst"||e.gstType==="igst"?b*.05:0,v=b+j,y=async O=>{O.preventDefault(),u("");const S=typeof a=="string"?parseInt(a):a;if(!S||S<1){u("Please select at least 1 additional night");return}l(!0);try{await n(e._id,p.toISOString().split("T")[0],S,v),t()}catch(C){u(C.message||"Failed to extend booking")}finally{l(!1)}};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#f59e0b",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[r.jsxs("h3",{style:{margin:0},children:["Extend Stay - Room ",(E=e.roomId)==null?void 0:E.roomNumber]}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),d&&r.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fee2e2",color:"#dc2626",display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[r.jsx(xr,{size:16}),r.jsx("span",{style:{fontSize:"14px"},children:d})]}),r.jsxs("div",{style:{padding:"20px",overflowY:"auto",flex:1},children:[r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f0fdf4",borderRadius:"8px"},children:[r.jsxs("h4",{style:{margin:"0 0 10px"},children:["Guest: ",e.userName]}),r.jsxs("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280"},children:["Phone: ",e.userPhone]})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px"},children:"Current Booking"}),r.jsxs("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"5px"},children:[r.jsx("strong",{children:"Check-in:"})," ",new Date(e.checkInDate).toLocaleDateString()]}),r.jsxs("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"5px"},children:[r.jsx("strong",{children:"Current Check-out:"})," ",h.toLocaleDateString()]}),r.jsxs("div",{style:{fontSize:"14px",color:"#374151"},children:[r.jsx("strong",{children:"Current Nights:"})," ",e.nights]})]}),r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Additional Nights *"}),r.jsx("input",{type:"number",value:a,onChange:O=>{const S=O.target.value;if(S===""||S===null)s("");else{const C=parseInt(S);!isNaN(C)&&C>=0&&s(C)}},onBlur:O=>{(O.target.value===""||parseInt(O.target.value)<1)&&s(1)},required:!0,min:"1",max:"30",style:{width:"100%",padding:"10px",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"14px"}})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#fef3c7",borderRadius:"8px"},children:[r.jsx("h4",{style:{margin:"0 0 10px",color:"#92400e"},children:"Extended Booking Details"}),r.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"5px"},children:[r.jsx("strong",{children:"New Check-out:"})," ",p.toLocaleDateString()]}),r.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"5px"},children:[r.jsx("strong",{children:"Total Nights:"})," ",e.nights+m]}),r.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"10px"},children:[r.jsx("strong",{children:"Additional Charge:"})," ",g,"  ",m," night",m>1?"s":""," = ",b.toFixed(2)]}),j>0&&r.jsxs("div",{style:{fontSize:"13px",color:"#92400e",marginBottom:"5px"},children:[r.jsxs("strong",{children:["GST (",e.gstType==="gst"?"CGST+SGST":"IGST"," 5%):"]})," ",j.toFixed(2)]}),r.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:"#92400e",paddingTop:"10px",borderTop:"1px solid #fde68a"},children:[r.jsx("strong",{children:"Total Additional Amount:"})," ",v.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:t,style:{flex:1,padding:"12px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:i,style:{flex:1,padding:"12px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:i?"not-allowed":"pointer",fontWeight:"500"},children:i?"Extending...":"Extend Booking"})]})]})]})]})})},Mfe=({booking:e,onClose:t,onCancelExtension:n})=>{var A;const[a,s]=w.useState(1),[i,l]=w.useState(!1),[d,u]=w.useState(""),h=e.extensions&&e.extensions.length>0?e.extensions[e.extensions.length-1]:null;if(!h)return null;const p=h.additionalNights,m=h.additionalAmount/h.additionalNights,g=m*a,b=E=>E?new Date(E).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",j=async E=>{E.preventDefault(),l(!0),u("");try{const O=await n(e._id,a);t()}catch(O){u(O.message)}finally{l(!1)}},v=new Date(e.checkOutDate),y=new Date(v);return y.setDate(v.getDate()-a),r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"0",maxWidth:"500px",width:"90%",margin:"16px",maxHeight:"90vh",overflowY:"auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#fef2f2",borderRadius:"12px 12px 0 0"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"20px",fontWeight:"700",margin:0,color:"#dc2626"},children:"Cancel Extension Days"}),r.jsxs("p",{style:{fontSize:"14px",color:"#6b7280",margin:"4px 0 0"},children:["Room ",(A=e.roomId)==null?void 0:A.roomNumber," - ",e.userName]})]}),r.jsx("button",{onClick:t,style:{color:"#6b7280",backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px"},children:r.jsx(On,{size:24})})]}),r.jsxs("form",{onSubmit:j,children:[r.jsxs("div",{style:{padding:"20px"},children:[d&&r.jsx("div",{style:{padding:"12px",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:d}),r.jsxs("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"8px",marginBottom:"20px",border:"1px solid #f59e0b"},children:[r.jsx("h3",{style:{margin:"0 0 12px",fontSize:"16px",color:"#92400e"},children:"Current Extension Details"}),r.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"Extended Nights:"})," ",h.additionalNights," night(s)"]}),r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"Extension Amount:"})," ",h.additionalAmount.toFixed(2)]}),r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"Current Checkout:"})," ",b(e.checkOutDate)]}),r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"Rate per Day:"})," ",m.toFixed(2)]})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Days to Cancel from Extension *"}),r.jsx("select",{value:a,onChange:E=>s(parseInt(E.target.value)),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px"},required:!0,children:Array.from({length:p},(E,O)=>O+1).map(E=>r.jsxs("option",{value:E,children:[E," day",E>1?"s":""," - Refund ",(m*E).toFixed(2)]},E))}),r.jsxs("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:["You can cancel 1 to ",p," days from the extension"]})]}),r.jsxs("div",{style:{padding:"16px",backgroundColor:"#f0fdf4",borderRadius:"8px",marginBottom:"20px",border:"1px solid #10b981"},children:[r.jsx("h3",{style:{margin:"0 0 12px",fontSize:"16px",color:"#166534"},children:"Cancellation Summary"}),r.jsxs("div",{style:{fontSize:"14px",color:"#6b7280"},children:[r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"Days to Cancel:"})," ",a," night",a>1?"s":""]}),r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"Refund Amount:"})," ",g.toFixed(2)]}),r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"New Checkout Date:"})," ",b(y)]}),r.jsxs("p",{style:{margin:"4px 0"},children:[r.jsx("strong",{children:"Remaining Extension:"})," ",p-a," night",p-a!==1?"s":""]})]})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"20px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",borderRadius:"0 0 12px 12px"},children:[r.jsx("button",{type:"button",onClick:t,disabled:i,style:{padding:"10px 20px",backgroundColor:"white",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Cancel"}),r.jsx("button",{type:"submit",disabled:i,style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500",opacity:i?.6:1},children:i?"Cancelling...":`Cancel ${a} Day${a>1?"s":""}`})]})]})]})})},Bfe=({bookings:e,onClose:t,onBulkCheckout:n})=>{var E,O;const[a,s]=w.useState(null),[i,l]=w.useState(!1),[d,u]=w.useState(""),[h,p]=w.useState("cash"),m=e.filter(S=>{var C;return((C=S.userName)==null?void 0:C.startsWith("BULK:"))&&S.status==="checked-in"}),g=()=>{var B;if(!a)return{grandTotal:0,amountPaid:0,balanceDue:0};const S=a.totalPrice||0,C=a.amountPaid||0,k=S-C,I=(B=a.userName)==null?void 0:B.match(/\((\d+) rooms?\)/);return{totalRooms:I?parseInt(I[1]):1,roomCharges:a.baseAmount||0,totalGst:(a.cgst||0)+(a.sgst||0)+(a.igst||0),restaurantBills:0,grandTotal:S,amountPaid:C,balanceDue:k}},b=g(),j=async()=>{const S=parseFloat(d)||0;if(S<=0){alert("Please enter a valid payment amount");return}if(!a){alert("Please select a bulk booking first");return}l(!0);try{const C=(a.amountPaid||0)+S;await ra.put(`/room-booking/${a._id}/payment`,{amountPaid:C,paymentMethod:h,paymentAmount:S}),s({...a,amountPaid:C}),u(""),alert(`Payment of ${S.toFixed(2)} added successfully!`)}catch(C){console.error("Error adding payment:",C),alert("Failed to add payment. Please try again.")}finally{l(!1)}},v=async()=>{if(!a||b.balanceDue<=0){alert("No balance due to pay");return}l(!0);try{await ra.put(`/room-booking/${a._id}/payment`,{amountPaid:b.grandTotal,paymentMethod:h,paymentAmount:b.balanceDue}),s({...a,amountPaid:b.grandTotal}),alert("Full balance paid successfully!")}catch(S){console.error("Error paying full balance:",S),alert("Failed to pay full balance. Please try again.")}finally{l(!1)}},y=async()=>{if(!a){alert("Please select a bulk booking to checkout");return}const S=g();if(window.confirm(`Checkout bulk booking for ${a.userName}?

Total Rooms: ${S.totalRooms}
Total Amount: ${S.grandTotal.toFixed(2)}
Balance Due: ${S.balanceDue.toFixed(2)}`)){l(!0);try{await n([a]),t()}catch(C){console.error("Bulk checkout error:",C),alert("Failed to checkout bulk booking. Please try again.")}finally{l(!1)}}},A=()=>{var B,M;if(!a){alert("Please select a bulk booking first");return}const S=(B=a.userName)==null?void 0:B.match(/BULK: (.+) \(\d+ rooms?\)/),C=S?S[1]:a.userName,k=(M=a.userName)==null?void 0:M.match(/\((\d+) rooms?\)/),I=k?parseInt(k[1]):1,z=window.open("","_blank");z.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Bulk Booking Bill</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .guest-info { margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; }
          .room-details { margin-bottom: 20px; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
          .total-row { font-weight: bold; font-size: 16px; }
          .balance-due { color: #dc2626; font-weight: bold; }
          .room-list { margin: 10px 0; padding: 10px; background-color: #f0f9ff; border-radius: 6px; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>HOTEL VIRAT</h1>
          <h2>BULK BOOKING BILL</h2>
          <p><strong>Bill Number:</strong> BULK-${a._id}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
        </div>
        
        <div class="guest-info">
          <h3>Guest Details:</h3>
          <p><strong>Name:</strong> ${C}</p>
          <p><strong>Phone:</strong> ${a.userPhone}</p>
          ${a.userEmail?`<p><strong>Email:</strong> ${a.userEmail}</p>`:""}
          ${a.guestGstNumber?`<p><strong>GST Number:</strong> ${a.guestGstNumber}</p>`:""}
        </div>
        
        <div class="room-details">
          <h3>Booking Details:</h3>
          <p><strong>Total Rooms:</strong> ${b.totalRooms}</p>
          <div class="room-list">
            <strong>Rooms:</strong> ${I} rooms (Bulk Booking)
          </div>
          <p><strong>Check-in:</strong> ${new Date(a.checkInDate).toLocaleDateString()}</p>
          <p><strong>Check-out:</strong> ${new Date(a.checkOutDate).toLocaleDateString()}</p>
          <p><strong>Nights:</strong> ${a.nights||1}</p>
        </div>
        
        <table>
          <tr><td><strong>Room Charges:</strong></td><td>${b.roomCharges.toFixed(2)}</td></tr>
          ${b.totalGst>0?`<tr><td><strong>GST:</strong></td><td>${b.totalGst.toFixed(2)}</td></tr>`:""}
          <tr><td colspan="2"><hr></td></tr>
          <tr class="total-row"><td><strong>Grand Total:</strong></td><td>${b.grandTotal.toFixed(2)}</td></tr>
          <tr><td><strong>Amount Paid:</strong></td><td>${b.amountPaid.toFixed(2)}</td></tr>
          <tr class="total-row balance-due"><td><strong>Balance Due:</strong></td><td>${b.balanceDue.toFixed(2)}</td></tr>
        </table>
        
        <div style="margin-top: 40px; text-align: center;">
          <p>Thank you for choosing Hotel Virat!</p>
          <p style="font-size: 12px;">This is a bulk booking for ${b.totalRooms} rooms.</p>
        </div>
        
        <script>
          window.onload = function() {
            window.print();
            window.onafterprint = function() {
              window.close();
            }
          }
        <\/script>
      </body>
      </html>
    `),z.document.close()};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#dc2626",color:"white"},children:[r.jsx("h3",{style:{margin:0},children:"Bulk Checkout"}),r.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",fontSize:"24px",color:"white"},children:""})]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:m.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[r.jsx("h4",{children:"No Bulk Bookings Available"}),r.jsx("p",{children:"Only bulk bookings can be checked out using bulk checkout."}),r.jsx("p",{children:"Individual rooms should be checked out separately."})]}):r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{style:{margin:"0 0 15px",color:"#374151"},children:"Select Bulk Booking to Checkout:"}),r.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},children:m.map(S=>{var M,F;const C=(a==null?void 0:a._id)===S._id,k=(M=S.userName)==null?void 0:M.match(/\((\d+) rooms?\)/),I=k?parseInt(k[1]):1,z=(F=S.userName)==null?void 0:F.match(/BULK: (.+) \(\d+ rooms?\)/),B=z?z[1]:S.userName;return r.jsxs("div",{style:{padding:"15px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",gap:"12px",backgroundColor:C?"#f0f9ff":"white",cursor:"pointer"},onClick:()=>s(S),children:[r.jsx("input",{type:"radio",checked:C,onChange:()=>s(S),style:{transform:"scale(1.2)"}}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px"},children:[B," - ",I," Rooms"]}),r.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"2px"},children:[" ",S.userPhone," |  Bulk Booking (",I," rooms)"]}),r.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:[" Total: ",(S.totalPrice||0).toFixed(2)," | Paid: ",(S.amountPaid||0).toFixed(2)]})]})]},S._id)})})]}),a&&r.jsxs("div",{children:[r.jsxs("h4",{style:{margin:"0 0 15px",color:"#374151"},children:["Bulk Booking Details - ",((O=(E=a.userName)==null?void 0:E.match(/BULK: (.+) \(\d+ rooms?\)/))==null?void 0:O[1])||a.userName]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"Total Rooms:"}),r.jsx("span",{children:b.totalRooms})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"Room Charges:"}),r.jsxs("span",{children:["",b.roomCharges.toFixed(2)]})]}),b.totalGst>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"GST:"}),r.jsxs("span",{children:["",b.totalGst.toFixed(2)]})]}),r.jsx("hr",{style:{margin:"10px 0"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"16px",fontWeight:"600"},children:[r.jsx("span",{children:"Grand Total:"}),r.jsxs("span",{children:["",b.grandTotal.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"Amount Paid:"}),r.jsxs("span",{children:["",b.amountPaid.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"600",color:b.balanceDue>0?"#dc2626":"#059669"},children:[r.jsx("span",{children:"Balance Due:"}),r.jsxs("span",{children:["",b.balanceDue.toFixed(2)]})]})]}),b.balanceDue>0&&r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h5",{style:{margin:"0 0 10px"},children:"Add Payment ()"}),r.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:d,onChange:S=>u(S.target.value),placeholder:"Enter amount",style:{flex:1,padding:"8px",border:"1px solid #e5e7eb",borderRadius:"4px"}}),r.jsx("button",{onClick:j,disabled:i||!d,style:{padding:"8px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",opacity:i||!d?.6:1},children:"Add"})]}),r.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"8px 12px",border:h==="cash"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",backgroundColor:h==="cash"?"#f0fdf4":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:h==="cash",onChange:S=>p(S.target.value)})," Cash"]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"8px 12px",border:h==="online"?"2px solid #059669":"1px solid #e5e7eb",borderRadius:"4px",cursor:"pointer",backgroundColor:h==="online"?"#f0fdf4":"white"},children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:h==="online",onChange:S=>p(S.target.value)})," Online"]})]}),r.jsxs("button",{onClick:v,disabled:i,style:{width:"100%",padding:"10px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"10px",opacity:i?.6:1},children:["Pay Full Balance (",b.balanceDue.toFixed(2),")"]})]}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[r.jsx("button",{onClick:t,style:{padding:"10px 20px",backgroundColor:"white",color:"#374151",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"Close"}),r.jsxs("button",{onClick:A,style:{padding:"10px 20px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[r.jsx(_s,{size:16})," Print Bill"]}),r.jsx("button",{onClick:y,disabled:i,style:{padding:"10px 20px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",opacity:i?.6:1},children:i?"Processing...":`Checkout (${b.balanceDue.toFixed(2)} due)`})]})]})]})})]})})},Cl=Jt.create({baseURL:"https://hotelvirat.com/api/v1/hotel",headers:{"Content-Type":"application/json"}}),Ffe=()=>{const[e,t]=w.useState([]),[n,a]=w.useState([]),[s,i]=w.useState([]),[l,d]=w.useState([]),[u,h]=w.useState([]),[p,m]=w.useState(!0),[g,b]=w.useState(""),j=`
    .search-container {
      position: relative;
      flex: 1;
      max-width: 400px;
    }
    
    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
      z-index: 1;
    }
    
    .search-input {
      width: 100%;
      padding: 10px 12px 10px 40px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      height: 38px;
    }
    
    .filter-buttons {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .filter-select.compact {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      height: 38px;
      min-width: 140px;
      background: white;
    }
    
    .legacy-filter-label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      white-space: nowrap;
      cursor: pointer;
    }
    
    .legacy-filter-label input[type="checkbox"] {
      margin: 0;
    }
    
    .filters-bar {
      display: flex;
      gap: 16px;
      align-items: center;
      padding: 16px 20px;
      background: #f8f9fa;
      border-bottom: 1px solid #e5e7eb;
      flex-wrap: wrap;
    }
  `;w.useEffect(()=>{const me=document.createElement("style");return me.textContent=j,document.head.appendChild(me),()=>{document.head.removeChild(me)}},[]);const[v,y]=w.useState(!1),[A,E]=w.useState(null),[O,S]=w.useState(""),[C,k]=w.useState(""),[I,z]=w.useState("all"),[B,M]=w.useState("all"),[F,N]=w.useState(""),[L,P]=w.useState(!0),[_,R]=w.useState(1),[W,G]=w.useState(1),oe=10;w.useEffect(()=>{(async()=>{try{const[je,ee]=await Promise.all([Cl.get("/branch"),Cl.get("/table")]),se=je.data||[];let fe=[];ee.data&&ee.data.success&&Array.isArray(ee.data.data)?fe=ee.data.data:Array.isArray(ee.data)&&(fe=ee.data),console.log(" Branches API response:",se),console.log(" Tables API response:",fe),console.log(" Available branch IDs:",se.map(ue=>ue._id)),console.log(" Available branch names:",se.map(ue=>`${ue._id}: ${ue.name}`)),d(se),h(fe),await q(se,fe)}catch(je){console.error(" Error in fetchAllData:",je),d([]),h([]),b("Failed to load data. Please refresh the page.")}finally{m(!1)}})()},[]),w.useEffect(()=>{l.length>=0&&u.length>=0&&V()},[I,B,F]);const q=async(me=l,je=u)=>{var ee,se;try{if(!me||me.length===0){console.log(" Branches data is empty, fetching again...");try{me=(await Cl.get("/branch")).data||[],console.log(" Refetched branches:",me),d(me)}catch(Ee){console.error(" Error refetching branches:",Ee),me=[]}}if(!je||je.length===0){console.log(" Tables data is empty, fetching again...");try{const Be=(await Cl.get("/table")).data;Be&&Be.success&&Array.isArray(Be.data)?je=Be.data:Array.isArray(Be)?je=Be:je=[],console.log(" Refetched tables:",je),h(je)}catch(Ee){console.error(" Error refetching tables:",Ee),je=[]}}const fe={};I!=="all"&&(fe.status=I),F&&(fe.date=F),console.log("Fetching reservations with params:",fe);const ue=await Cl.get("/reservation",{params:fe});if(console.log(" Full reservation response:",ue),console.log(" Response status:",ue.status),console.log(" Response data:",ue.data),console.log(" Response data type:",typeof ue.data),console.log(" Response data keys:",ue.data?Object.keys(ue.data):"null"),ue.data&&ue.data.error)throw console.error(" API returned error:",ue.data.error),new Error(`API Error: ${ue.data.error}`);let We=[];if(ue.data&&ue.data.message==="Reservation routes working")console.log(" Server returning placeholder response - treating as empty result"),We=[];else if(ue.data&&ue.data.success&&Array.isArray(ue.data.data))console.log(" Using new format: {success, count, data}"),We=ue.data.data;else if(Array.isArray(ue.data))console.log(" Using old format: direct array"),We=ue.data;else if(ue.data&&ue.data.success===!1)console.log(" API returned success: false, treating as empty result"),We=[];else throw console.error(" Unexpected response format:",ue.data),console.error(" Expected either Array or {success, count, data}"),new Error("Invalid response format");console.log("Raw reservations data:",We),console.log("Available branches for processing:",me),console.log("Available tables for processing:",je),console.log("Branches count:",me.length),console.log("Tables count:",je.length);const we=We.map(Ee=>{if(console.log("Processing reservation:",Ee),!Ee.tableId)return console.log("Legacy reservation without table:",Ee._id),{id:Ee._id,customerName:Ee.customerName,customerPhone:Ee.customerPhone,customerEmail:Ee.customerEmail||"",guestCount:Ee.guestCount,tableNumber:"N/A",tableName:"No Table Assigned",branchName:"Legacy Data",branchId:null,reservationDate:new Date(Ee.reservationDate).toLocaleDateString(),timeSlot:Ee.timeSlot,status:Ee.status,notes:Ee.notes||"",createdAt:new Date(Ee.createdAt).toLocaleString(),originalReservation:Ee,isLegacyReservation:!0};let Be="N/A";if(Ee.tableId)if(typeof Ee.tableId=="object")Be=Ee.tableId.number||"N/A";else{const Z=je.find(de=>de._id===Ee.tableId);Be=(Z==null?void 0:Z.number)||"N/A"}let it="Unknown Branch",re=null;if(Ee.branchId)if(console.log(" Direct branchId found:",Ee.branchId),typeof Ee.branchId=="object")it=Ee.branchId.name||"Unknown Branch",re=Ee.branchId._id;else{console.log(` Looking for direct branch ID: ${Ee.branchId}`);const Z=me.find(de=>de._id===Ee.branchId);if(Z)it=Z.name,re=Z._id,console.log(` Found direct branch: ${it}`);else{console.log(" Direct branch not found, trying string comparison...");const de=me.find(te=>te._id.toString()===Ee.branchId.toString());de&&(it=de.name,re=de._id,console.log(` Found direct branch by string comparison: ${it}`))}}if(it==="Unknown Branch"&&Ee.tableId&&typeof Ee.tableId=="object"&&Ee.tableId.branchId){const Z=Ee.tableId.branchId;if(console.log(` Looking for branch ID: ${Z}`),console.log(" Available branches:",me.map(de=>`${de._id}:${de.name}`)),console.log(" Exact match check:",me.find(de=>de._id===Z)),typeof Z=="object")it=Z.name||"Unknown Branch",re=Z._id;else{const de=me.find(te=>te._id===Z);if(de)it=de.name,re=de._id,console.log(` Found branch: ${it}`);else{console.log(` Branch not found for ID: ${Z}`),console.log(" Trying string comparison...");const te=me.find(Se=>Se._id.toString()===Z.toString());te&&(it=te.name,re=te._id,console.log(` Found branch by string comparison: ${it}`))}}}if(it==="Unknown Branch"&&Ee.tableId){const Z=typeof Ee.tableId=="object"?Ee.tableId._id:Ee.tableId,de=je.find(te=>te._id===Z);if(de&&de.branchId){const te=me.find(Se=>Se._id===(de.branchId._id||de.branchId));te&&(it=te.name,re=te._id)}}console.log("Extracted info:",{tableNumber:Be,branchName:it,branchId:re});const ce=new Date-new Date(Ee.createdAt)<24*60*60*1e3;return{id:Ee._id,customerName:Ee.customerName,customerPhone:Ee.customerPhone,customerEmail:Ee.customerEmail||"",guestCount:Ee.guestCount,tableNumber:Be,tableName:`Table ${Be}`,branchName:it,branchId:re,reservationDate:new Date(Ee.reservationDate).toLocaleDateString(),timeSlot:Ee.timeSlot,status:Ee.status,notes:Ee.notes||"",createdAt:new Date(Ee.createdAt).toLocaleString(),originalReservation:Ee,isNewReservation:ce}});console.log("Formatted reservations:",we);const Me=Array.isArray(we)?we.sort((Ee,Be)=>{const it=new Date(Ee.originalReservation.createdAt);return new Date(Be.originalReservation.createdAt)-it}):[];t(Me)}catch(fe){console.error("Error fetching reservations:",fe),console.error("Error details:",{message:fe.message,response:(ee=fe.response)==null?void 0:ee.data,status:(se=fe.response)==null?void 0:se.status}),t([]),b("Failed to load reservations. Please refresh the page and try again.")}},V=async()=>{m(!0),b(""),await q(),m(!1)};w.useEffect(()=>{let me=e;if(L||(me=me.filter(je=>!je.isLegacyReservation)),C.trim()){const je=C.trim().toLowerCase();me=me.filter(ee=>ee.customerName.toLowerCase().includes(je)||ee.customerPhone.includes(je)||ee.tableName.toLowerCase().includes(je)||ee.branchName.toLowerCase().includes(je)||ee.status.toLowerCase().includes(je))}B!=="all"&&(me=me.filter(je=>je.branchId===B)),i(me),G(Math.ceil(me.length/oe)),R(1)},[e,C,B,L]),w.useEffect(()=>{const me=(_-1)*oe,je=me+oe,ee=s.slice(me,je);a(ee)},[s,_]);const U=me=>{E(me),y(!0)},X=async(me,je)=>{try{await Cl.put(`/reservation/${me}`,{status:je}),S(`Reservation ${je} successfully`),V(),setTimeout(()=>S(""),3e3)}catch(ee){console.error("Error updating reservation:",ee),alert("Failed to update reservation status")}},H=async me=>{if(window.confirm("Are you sure you want to cancel this reservation?"))try{await Cl.put(`/reservation/${me}/cancel`),S("Reservation cancelled successfully"),V(),setTimeout(()=>S(""),3e3)}catch(je){console.error("Error cancelling reservation:",je),alert("Failed to cancel reservation")}},Q=()=>{let me=`Customer Name,Phone,Email,Table,Branch,Date,Time Slot,Guests,Status,Notes,Created At
`;s.forEach(fe=>{me+=`"${fe.customerName}","${fe.customerPhone}","${fe.customerEmail}","${fe.tableName}","${fe.branchName}","${fe.reservationDate}","${fe.timeSlot}",${fe.guestCount},"${fe.status}","${fe.notes}","${fe.createdAt}"
`});const je=new Blob([me],{type:"text/csv"}),ee=window.URL.createObjectURL(je),se=document.createElement("a");se.setAttribute("hidden",""),se.setAttribute("href",ee),se.setAttribute("download",`reservations-export-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(se),se.click(),document.body.removeChild(se)},le=me=>{switch(me){case"confirmed":return"#28a745";case"reserved":return"#ffc107";case"cancelled":return"#dc3545";case"completed":return"#17a2b8";default:return"#6c757d"}};return r.jsxs("div",{className:"reservations-page",children:[O&&r.jsxs("div",{className:"success-message",children:[r.jsx(ca,{size:16}),r.jsx("span",{children:O}),r.jsx("button",{onClick:()=>S(""),children:r.jsx(On,{size:16})})]}),r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{children:[r.jsx("h1",{children:"Table Reservations"}),e.length>0&&r.jsxs("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:[e.filter(me=>me.isNewReservation).length," new reservations in the last 24 hours"]})]}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn btn-outline",onClick:Q,children:[r.jsx(Sa,{size:16}),r.jsx("span",{children:"Export CSV"})]})})]}),r.jsxs("div",{className:"filters-bar",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Tr,{size:18,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by customer name, phone, table, or branch...",className:"search-input",value:C,onChange:me=>k(me.target.value)})]}),r.jsxs("div",{className:"filter-buttons",children:[r.jsxs("select",{className:"filter-select compact",value:I,onChange:me=>z(me.target.value),children:[r.jsx("option",{value:"all",children:"All Reservations"}),r.jsx("option",{value:"reserved",children:"New Reservations"}),r.jsx("option",{value:"confirmed",children:"Confirmed"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs("select",{className:"filter-select compact",value:B,onChange:me=>M(me.target.value),children:[r.jsx("option",{value:"all",children:"All Branches"}),l.map(me=>r.jsx("option",{value:me._id,children:me.name},me._id))]}),r.jsx("input",{type:"date",className:"filter-select compact",value:F,onChange:me=>N(me.target.value),placeholder:"Filter by date"}),r.jsxs("label",{className:"legacy-filter-label",children:[r.jsx("input",{type:"checkbox",checked:L,onChange:me=>P(me.target.checked)}),r.jsx("span",{children:"Show Legacy Data"})]})]})]}),g&&r.jsxs("div",{className:"error-container",style:{margin:"20px 0",padding:"10px 15px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(xr,{size:18}),r.jsx("span",{children:g})]}),r.jsx("div",{className:"data-card",children:p?r.jsx("div",{className:"loading-container",style:{textAlign:"center",padding:"40px 0"},children:r.jsx("p",{children:"Loading reservations..."})}):r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Customer Details"}),r.jsx("th",{children:"Table & Branch"}),r.jsx("th",{children:"Reservation Details"}),r.jsx("th",{children:"Guests"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.length>0?n.map(me=>r.jsxs("tr",{style:{backgroundColor:me.isNewReservation?"#f0f9ff":"transparent",borderLeft:me.isNewReservation?"4px solid #0ea5e9":"none"},children:[r.jsx("td",{children:r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[r.jsx("strong",{style:{fontSize:"16px"},children:me.customerName}),me.isNewReservation&&r.jsx("span",{style:{backgroundColor:"#0ea5e9",color:"white",fontSize:"10px",fontWeight:"bold",padding:"2px 6px",borderRadius:"4px"},children:"NEW"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:[r.jsx(Ia,{size:14}),r.jsx("span",{style:{fontSize:"14px"},children:me.customerPhone})]}),me.customerEmail&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"2px"},children:[r.jsx(Ps,{size:14}),r.jsx("span",{style:{fontSize:"12px",color:"#666"},children:me.customerEmail})]})]})}),r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"4px"},children:me.tableName}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx($l,{size:14}),r.jsx("span",{style:{fontSize:"14px",color:me.isLegacyReservation?"#999":"inherit",fontStyle:me.isLegacyReservation?"italic":"normal"},children:me.branchName})]})]})}),r.jsx("td",{children:r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"4px"},children:[r.jsx(rn,{size:14}),r.jsx("span",{style:{fontSize:"14px",fontWeight:"bold"},children:me.reservationDate})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(Kc,{size:14}),r.jsx("span",{style:{fontSize:"14px"},children:me.timeSlot})]}),me.notes&&r.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px",fontStyle:"italic"},children:["Note: ",me.notes]})]})}),r.jsx("td",{children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",justifyContent:"center"},children:[r.jsx(ei,{size:16}),r.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:me.guestCount})]})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn view",onClick:()=>U(me),title:"View full details",children:"View Details"}),me.status==="reserved"&&r.jsx("button",{className:"action-btn edit",onClick:()=>X(me.id,"confirmed"),title:"Confirm this reservation",children:" Confirm"}),me.status==="confirmed"&&r.jsx("button",{className:"action-btn",style:{backgroundColor:"#17a2b8",color:"white"},onClick:()=>X(me.id,"completed"),title:"Mark as completed",children:" Complete"}),(me.status==="reserved"||me.status==="confirmed")&&r.jsx("button",{className:"action-btn delete",onClick:()=>H(me.id),title:"Cancel this reservation",children:" Cancel"}),me.status==="completed"&&r.jsx("span",{style:{color:"#28a745",fontWeight:"bold",fontSize:"14px"},children:" Completed"})]})})]},me.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"no-tables",children:"No reservations found matching your criteria"})})})]})}),W>0&&r.jsxs("div",{className:"pagination",children:[r.jsx("button",{className:"pagination-btn",onClick:()=>R(me=>Math.max(me-1,1)),disabled:_===1||p,children:"Previous"}),r.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.min(5,W)},(me,je)=>{let ee;return W<=5||_<=3?ee=je+1:_>=W-2?ee=W-4+je:ee=_-2+je,r.jsx("button",{className:`pagination-page ${_===ee?"active":""}`,onClick:()=>R(ee),disabled:p,children:ee},ee)})}),r.jsx("button",{className:"pagination-btn",onClick:()=>R(me=>Math.min(me+1,W)),disabled:_===W||p,children:"Next"})]}),v&&A&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Reservation Details"}),r.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:""})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"order-details",children:[r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Customer Name"}),r.jsx("div",{className:"order-detail-value",children:A.customerName})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Phone Number"}),r.jsx("div",{className:"order-detail-value",children:A.customerPhone})]}),A.customerEmail&&r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Email"}),r.jsx("div",{className:"order-detail-value",children:A.customerEmail})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Table"}),r.jsx("div",{className:"order-detail-value",children:A.tableName})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Branch"}),r.jsx("div",{className:"order-detail-value",children:A.branchName})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Reservation Date"}),r.jsx("div",{className:"order-detail-value",children:A.reservationDate})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Time Slot"}),r.jsx("div",{className:"order-detail-value",children:A.timeSlot})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Number of Guests"}),r.jsx("div",{className:"order-detail-value",children:A.guestCount})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Status"}),r.jsx("div",{className:"order-detail-value",children:r.jsx("span",{className:"status-badge",style:{backgroundColor:le(A.status),color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})})]}),A.notes&&r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Special Notes"}),r.jsx("div",{className:"order-detail-value",children:A.notes})]}),r.jsxs("div",{className:"order-detail-row",children:[r.jsx("div",{className:"order-detail-label",children:"Created At"}),r.jsx("div",{className:"order-detail-value",children:A.createdAt})]})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn btn-outline",onClick:()=>y(!1),children:"Close"}),A.status==="reserved"&&r.jsx("button",{className:"btn btn-primary",onClick:()=>{X(A.id,"confirmed"),y(!1)},children:"Confirm Reservation"})]})]})})]})},Lfe=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(!1),[l,d]=w.useState(!1),[u,h]=w.useState(null),[p,m]=w.useState(null),[g,b]=w.useState(null),[j,v]=w.useState({title:"",description:"",order:0,isActive:!0});w.useEffect(()=>{y()},[]);const y=async()=>{try{a(!0),console.log("Fetching carousel images from:",`${en}/api/website/carousel`);const z=await fetch(`${en}/api/website/carousel`);if(!z.ok)throw new Error(`HTTP error! status: ${z.status}`);const B=await z.json();console.log("Carousel images response:",B),B.success?t(B.images||[]):(console.error("Failed to fetch carousel images:",B.message),alert("Failed to fetch carousel images: "+B.message))}catch(z){console.error("Error fetching carousel images:",z),alert("Error connecting to server. Please make sure the backend is running on "+en)}finally{a(!1)}},A=()=>{b(null),v({title:"",description:"",order:e.length,isActive:!0}),h(null),m(null),i(!0)},E=z=>{b(z),v({title:z.title||"",description:z.description||"",order:z.order||0,isActive:z.isActive}),h(null),m(`${en}${z.imageUrl}`),i(!0)},O=()=>{i(!1),b(null),v({title:"",description:"",order:0,isActive:!0}),h(null),m(null)},S=z=>{const{name:B,value:M,type:F,checked:N}=z.target;v(L=>({...L,[B]:F==="checkbox"?N:M}))},C=z=>{const B=z.target.files[0];if(B){if(B.size>10485760){alert("File too large! Please select an image smaller than 10MB."),z.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(B.type)){alert("Invalid file type! Please select a JPEG, PNG, GIF, or WebP image."),z.target.value="";return}h(B);const N=new FileReader;N.onload=L=>{m(L.target.result)},N.readAsDataURL(B),console.log("Image selected:",{name:B.name,size:`${(B.size/1024/1024).toFixed(2)} MB`,type:B.type})}},k=async z=>{if(z.preventDefault(),!g&&!u){alert("Please select an image");return}if(!j.title.trim()){alert("Please enter a title");return}try{d(!0);const B=new FormData;u&&B.append("image",u),B.append("title",j.title.trim()),B.append("description",j.description.trim()),B.append("order",j.order),B.append("isActive",j.isActive);const M=g?`${en}/api/website/carousel/${g._id}`:`${en}/api/website/carousel`,F=g?"PUT":"POST";console.log(`${g?"Updating":"Adding"} carousel image:`,M),console.log("Form data being sent:",{title:j.title,description:j.description,order:j.order,isActive:j.isActive,hasImage:!!u,imageSize:u?u.size:"N/A"});const N=await fetch(M,{method:F,body:B});if(console.log("Response status:",N.status),!N.ok){const P=await N.text();throw console.error("Server error response:",P),new Error(`HTTP error! status: ${N.status} - ${P}`)}const L=await N.json();console.log("Response data:",L),L.success?(alert(`Carousel image ${g?"updated":"added"} successfully!`),O(),y()):alert("Error: "+(L.message||"Unknown error occurred"))}catch(B){console.error("Error submitting form:",B);let M=`Failed to ${g?"update":"add"} carousel image.`;B.message.includes("500")?M+=" Server error - please check if the backend is running and the uploads directory exists.":B.message.includes("404")?M+=" Image not found - it may have been deleted.":B.message.includes("400")?M+=" Invalid data - please check all required fields.":M+=` Error: ${B.message}`,alert(M)}finally{d(!1)}},I=async z=>{if(confirm("Are you sure you want to delete this carousel image?"))try{const M=await(await fetch(`${en}/api/website/carousel/${z}`,{method:"DELETE"})).json();M.success?(alert("Carousel image deleted successfully!"),y()):alert("Error: "+M.message)}catch(B){console.error("Error deleting carousel image:",B),alert("Failed to delete carousel image. Please try again.")}};return n?r.jsxs("div",{className:"page-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading carousel images..."})]}):r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Carousel Images"}),r.jsx("p",{children:"Manage banner images for the website carousel"})]}),r.jsxs("div",{className:"content-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("h2",{children:["Website Banner Images (",e.length,")"]}),r.jsxs("button",{className:"btn btn-primary",onClick:A,children:[r.jsx(qa,{size:16}),"Add New Image"]})]}),e.length===0?r.jsxs("div",{className:"placeholder-content",children:[r.jsx(co,{size:64,className:"placeholder-icon"}),r.jsx("h3",{children:"No Carousel Images"}),r.jsx("p",{children:"Start by adding your first carousel image to showcase on the website banner."}),r.jsxs("button",{className:"btn btn-primary",onClick:A,children:[r.jsx(qa,{size:16}),"Add First Image"]})]}):r.jsx("div",{className:"table-container",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Image"}),r.jsx("th",{children:"Title"}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.sort((z,B)=>(z.order||0)-(B.order||0)).map(z=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("div",{className:"table-image",children:r.jsx("img",{src:`${en}${z.imageUrl}`,alt:z.title,onError:B=>{B.target.src="/placeholder-image.jpg"}})})}),r.jsx("td",{children:r.jsxs("div",{className:"table-title",children:[r.jsx("strong",{children:z.title}),r.jsxs("small",{children:["Created: ",new Date(z.createdAt).toLocaleDateString()]})]})}),r.jsx("td",{children:r.jsx("div",{className:"table-description",children:z.description?r.jsx("span",{children:z.description.length>50?z.description.substring(0,50)+"...":z.description}):r.jsx("span",{className:"no-description",children:"No description"})})}),r.jsx("td",{children:r.jsxs("div",{className:"table-actions",children:[r.jsx("button",{className:"btn-action btn-edit",onClick:()=>E(z),title:"Edit image",children:r.jsx(Vn,{size:14})}),r.jsx("button",{className:"btn-action btn-delete",onClick:()=>I(z._id),title:"Delete image",children:r.jsx(Yn,{size:14})})]})})]},z._id))})]})})]}),s&&r.jsx("div",{className:"modal-overlay",onClick:O,children:r.jsxs("div",{className:"modal",onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:g?"Edit Carousel Image":"Add New Carousel Image"}),r.jsx("button",{className:"modal-close",onClick:O,children:r.jsx(On,{size:20})})]}),r.jsxs("form",{onSubmit:k,children:[r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"image",children:["Image Upload ",!g&&"*"]}),r.jsxs("div",{className:"image-upload-area",children:[p?r.jsxs("div",{className:"image-preview",children:[r.jsx("img",{src:p,alt:"Preview"}),r.jsx("button",{type:"button",className:"remove-preview",onClick:()=>{h(null),m(g?`${en}${g.imageUrl}`:null)},children:r.jsx(On,{size:16})})]}):r.jsxs(r.Fragment,{children:[r.jsx(qi,{size:32}),r.jsx("p",{children:"Click to upload or drag and drop"}),r.jsx("small",{children:"PNG, JPG, GIF, WebP up to 10MB"})]}),r.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:C,required:!g})]}),g&&r.jsx("small",{className:"form-note",children:"Leave empty to keep current image"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"title",children:"Title *"}),r.jsx("input",{type:"text",id:"title",name:"title",value:j.title,onChange:S,placeholder:"Enter image title",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:j.description,onChange:S,placeholder:"Enter image description",rows:"3"})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:O,disabled:l,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?g?"Updating...":"Adding...":g?"Update Image":"Add Image"})]})]})]})})]})},$fe=()=>{const[e,t]=w.useState(null),[n,a]=w.useState(!0),[s,i]=w.useState(!1);return w.useEffect(()=>{a(!1)},[]),n?r.jsxs("div",{className:"page-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading catering content..."})]}):r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Catering Content"}),r.jsx("p",{children:"Manage catering service content for the website"})]}),r.jsxs("div",{className:"content-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Catering Service Information"}),r.jsxs("button",{className:"btn btn-primary",children:[r.jsx(Vn,{size:16}),"Edit Content"]})]}),r.jsxs("div",{className:"placeholder-content",children:[r.jsx(xm,{size:64,className:"placeholder-icon"}),r.jsx("h3",{children:"Catering Content Management"}),r.jsx("p",{children:"This feature is coming soon. You'll be able to manage catering service content here."}),r.jsx("div",{className:"feature-list",children:r.jsxs("ul",{children:[r.jsx("li",{children:"Edit catering service description"}),r.jsx("li",{children:"Manage service features"}),r.jsx("li",{children:"Update contact information"}),r.jsx("li",{children:"Add/remove service types"})]})})]})]})]})},zfe=()=>{const[e,t]=w.useState(null),[n,a]=w.useState(!0),[s,i]=w.useState(!1);return w.useEffect(()=>{a(!1)},[]),n?r.jsxs("div",{className:"page-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading app content..."})]}):r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"App Download Content"}),r.jsx("p",{children:"Manage mobile app download section content"})]}),r.jsxs("div",{className:"content-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Mobile App Information"}),r.jsxs("button",{className:"btn btn-primary",children:[r.jsx(Vn,{size:16}),"Edit Content"]})]}),r.jsxs("div",{className:"placeholder-content",children:[r.jsx(o5,{size:64,className:"placeholder-icon"}),r.jsx("h3",{children:"App Download Management"}),r.jsx("p",{children:"This feature is coming soon. You'll be able to manage app download content here."}),r.jsx("div",{className:"feature-list",children:r.jsxs("ul",{children:[r.jsx("li",{children:"Update app description"}),r.jsx("li",{children:"Manage app features list"}),r.jsx("li",{children:"Set download links (Google Play, App Store)"}),r.jsx("li",{children:"Upload app screenshots"})]})})]})]})]})},Ufe=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState("all"),[u,h]=w.useState(""),[p,m]=w.useState(1),[g,b]=w.useState(1),[j,v]=w.useState(!1);w.useEffect(()=>{y()},[p,l]);const y=async()=>{try{a(!0);const k=new URLSearchParams({page:p,limit:10});l!=="all"&&k.append("status",l);const z=await(await fetch(`https://hotelvirat.com/api/website/contact-messages?${k}`)).json();z.success&&(t(z.messages),b(Math.ceil(z.total/10)))}catch(k){console.error("Error fetching messages:",k)}finally{a(!1)}},A=async(k,I)=>{try{(await(await fetch(`https://hotelvirat.com/api/website/contact-messages/${k}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:I})})).json()).success&&(y(),s&&s._id===k&&i({...s,status:I}))}catch(z){console.error("Error updating message status:",z)}},E=async k=>{if(confirm("Are you sure you want to delete this message?"))try{(await(await fetch(`https://hotelvirat.com/api/website/contact-messages/${k}`,{method:"DELETE"})).json()).success&&(y(),s&&s._id===k&&(i(null),v(!1)))}catch(I){console.error("Error deleting message:",I)}},O=k=>{i(k),v(!0),k.status==="unread"&&A(k._id,"read")},S=k=>{switch(k){case"unread":return"#ef4444";case"read":return"#f59e0b";case"replied":return"#10b981";default:return"#6b7280"}},C=e.filter(k=>k.name.toLowerCase().includes(u.toLowerCase())||k.email.toLowerCase().includes(u.toLowerCase())||k.subject.toLowerCase().includes(u.toLowerCase())||k.message.toLowerCase().includes(u.toLowerCase()));return n&&e.length===0?r.jsxs("div",{className:"page-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading contact messages..."})]}):r.jsxs("div",{className:"page-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsx("h1",{children:"Contact Messages"}),r.jsx("p",{children:"View and manage messages from website contact form"})]}),r.jsxs("div",{className:"controls-section",children:[r.jsxs("div",{className:"search-filter-bar",children:[r.jsxs("div",{className:"search-box",children:[r.jsx(Tr,{size:20}),r.jsx("input",{type:"text",placeholder:"Search messages...",value:u,onChange:k=>h(k.target.value)})]}),r.jsxs("div",{className:"filter-dropdown",children:[r.jsx(cd,{size:20}),r.jsxs("select",{value:l,onChange:k=>d(k.target.value),children:[r.jsx("option",{value:"all",children:"All Messages"}),r.jsx("option",{value:"unread",children:"Unread"}),r.jsx("option",{value:"read",children:"Read"}),r.jsx("option",{value:"replied",children:"Replied"})]})]})]}),r.jsxs("div",{className:"messages-count",children:[C.length," message",C.length!==1?"s":""]})]}),r.jsx("div",{className:"table-container",children:n?r.jsxs("div",{className:"table-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading contact messages..."})]}):C.length===0?r.jsxs("div",{className:"no-messages",children:[r.jsx(a5,{size:48}),r.jsx("h3",{children:"No messages found"}),r.jsx("p",{children:"No contact form submissions match your current filter."})]}):r.jsxs("table",{className:"messages-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Subject"}),r.jsx("th",{children:"Message Preview"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:C.map(k=>r.jsxs("tr",{className:`message-row ${k.status}`,children:[r.jsx("td",{children:r.jsxs("div",{className:"name-cell",children:[r.jsx(Vo,{size:16}),r.jsx("span",{children:k.name})]})}),r.jsx("td",{children:r.jsxs("div",{className:"email-cell",children:[r.jsx(Ps,{size:14}),r.jsx("span",{children:k.email})]})}),r.jsx("td",{children:r.jsx("div",{className:"phone-cell",children:k.phone?r.jsxs(r.Fragment,{children:[r.jsx(Ia,{size:14}),r.jsx("span",{children:k.phone})]}):r.jsx("span",{className:"no-phone",children:"-"})})}),r.jsx("td",{children:r.jsx("div",{className:"subject-cell",children:r.jsx("strong",{children:k.subject.replace("-"," ").toUpperCase()})})}),r.jsx("td",{children:r.jsxs("div",{className:"message-preview",children:[k.message.substring(0,80),k.message.length>80&&"..."]})}),r.jsx("td",{children:r.jsxs("div",{className:"date-cell",children:[r.jsx(rn,{size:14}),r.jsx("span",{children:new Date(k.createdAt).toLocaleDateString()})]})}),r.jsx("td",{children:r.jsxs("div",{className:"actions-cell",children:[r.jsxs("button",{className:"action-btn view-btn",onClick:()=>O(k),title:"View Message",children:[r.jsx(CL,{size:16}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"action-btn delete-btn",onClick:()=>E(k._id),title:"Delete Message",children:[r.jsx(Yn,{size:16}),r.jsx("span",{children:"Delete"})]})]})})]},k._id))})]})}),g>1&&r.jsxs("div",{className:"pagination",children:[r.jsx("button",{onClick:()=>m(k=>Math.max(k-1,1)),disabled:p===1,children:"Previous"}),r.jsxs("span",{className:"page-info",children:["Page ",p," of ",g]}),r.jsx("button",{onClick:()=>m(k=>Math.min(k+1,g)),disabled:p===g,children:"Next"})]}),j&&s&&r.jsx("div",{className:"modal-overlay",onClick:()=>v(!1),children:r.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Message Details"}),r.jsx("button",{className:"close-btn",onClick:()=>v(!1),children:""})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"sender-info",children:[r.jsxs("div",{className:"info-row",children:[r.jsx("strong",{children:"Name:"}),r.jsx("span",{children:s.name})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("strong",{children:"Email:"}),r.jsx("span",{children:s.email})]}),s.phone&&r.jsxs("div",{className:"info-row",children:[r.jsx("strong",{children:"Phone:"}),r.jsx("span",{children:s.phone})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("strong",{children:"Subject:"}),r.jsx("span",{children:s.subject.replace("-"," ").toUpperCase()})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("strong",{children:"Date:"}),r.jsx("span",{children:new Date(s.createdAt).toLocaleString()})]}),r.jsxs("div",{className:"info-row",children:[r.jsx("strong",{children:"Status:"}),r.jsx("span",{style:{color:S(s.status)},children:s.status.toUpperCase()})]})]}),r.jsxs("div",{className:"message-content",children:[r.jsx("h4",{children:"Message:"}),r.jsx("p",{children:s.message})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsxs("div",{className:"status-actions",children:[r.jsxs("button",{className:`status-btn ${s.status==="read"?"active":""}`,onClick:()=>A(s._id,"read"),children:[r.jsx(xs,{size:16}),"Mark as Read"]}),r.jsxs("button",{className:`status-btn ${s.status==="replied"?"active":""}`,onClick:()=>A(s._id,"replied"),children:[r.jsx(od,{size:16}),"Mark as Replied"]})]}),r.jsxs("button",{className:"delete-btn-modal",onClick:()=>E(s._id),children:[r.jsx(Yn,{size:16}),"Delete Message"]})]})]})})]})},qfe="https://hotelvirat.com/api/v1/hotel";class Wfe{async request(t,n={}){let a=`${qfe}${t}`;const s={headers:{"Content-Type":"application/json",...n.headers},...n},i=new AbortController,l=setTimeout(()=>i.abort(),3e4);s.signal=i.signal;try{console.log(` API Request: ${n.method||"GET"} ${a}`);const d=await fetch(a,s);if(clearTimeout(l),d.status===429)throw console.warn(" Rate limit hit, waiting 5 seconds before retry..."),await new Promise(p=>setTimeout(p,5e3)),new Error("Rate limit exceeded. Please wait a moment and try again.");const u=d.headers.get("content-type");if(!u||!u.includes("application/json")){const p=await d.text();throw console.error(" Non-JSON response:",p.substring(0,200)),new Error(`Server returned ${d.status}: Expected JSON but got ${u}`)}const h=await d.json();if(!d.ok)throw new Error(h.message||`HTTP error! status: ${d.status}`);return console.log(` API Success: ${n.method||"GET"} ${a}`),h}catch(d){throw clearTimeout(l),console.error(` API Error: ${n.method||"GET"} ${a}`,d),d.name==="AbortError"?new Error("Request timed out. Please check your connection and try again."):d.message.includes("Failed to fetch")?new Error("Cannot connect to server. Please check your internet connection and try again."):d}}async sendOtp(t){return this.request("/counter-auth/login/send-otp",{method:"POST",body:JSON.stringify({mobile:t})})}async resendOtp(t){return this.request("/counter-auth/login/resend-otp",{method:"POST",body:JSON.stringify({mobile:t})})}async verifyOtp(t,n){return this.request("/counter-auth/verify-otp",{method:"POST",body:JSON.stringify({mobile:t,otp:n,isRegistration:!1})})}async getBranches(){return this.request("/branch")}async getCategories(t){return this.request(`/category?branchId=${t}`)}async getTables(t){return this.request(`/table?branchId=${t}`)}async getMenuItems(t,n=null){let a=`/menu?branchId=${t}`;return n&&(a+=`&categoryId=${n}`),this.request(a)}async createInvoice(t){return this.request("/counter-invoice/invoices",{method:"POST",body:JSON.stringify(t)})}async createOrder(t){return this.request("/counter-order/orders",{method:"POST",body:JSON.stringify(t)})}async getOrderById(t){return this.request(`/counter-order/orders/${t}`)}async getOrders(t){return this.request("/counter-order/orders")}async getOrdersByBranch(t){const n=await this.request("/counter-order/orders");let a=[];return n.success&&Array.isArray(n.data)?a=n.data:n.orders&&Array.isArray(n.orders)?a=n.orders:Array.isArray(n)&&(a=n),t?a.filter(s=>{var l,d;return(((l=s.branch)==null?void 0:l.id)||((d=s.branchId)==null?void 0:d._id)||s.branchId)===t}):a}async updateOrderStatus(t,n){return this.request(`/counter-order/orders/${t}/order-status`,{method:"PUT",body:JSON.stringify({orderStatus:n})})}async createBill(t){return this.request("/counter-bill",{method:"POST",body:JSON.stringify(t)})}async getBills(t){return this.request(`/counter-bill?branchId=${t}`)}async processPayment(t){return this.request("/counter-payment",{method:"POST",body:JSON.stringify(t)})}async generateInvoice(){const t=Date.now(),n=Math.floor(Math.random()*1e3);return{invoiceNumber:`INV-${t}-${n}`,invoiceId:`${t}${n}`,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}}async getNextBillNumber(t,n){if(!n)throw new Error("Category is required for bill number generation");return this.request(`/counter-invoice/next-bill-number/${t}?category=${encodeURIComponent(n)}`)}async getNextInvoiceNumber(t,n){return console.log(" Invoice number requested - using unified bill/invoice numbering for category:",n),this.getNextBillNumber(t,n)}async getNextKOTNumber(t){return this.request(`/counter-invoice/next-kot-number/${t}`)}async getCurrentCounters(t){return this.request(`/counter-invoice/counters/${t}`)}async getComplimentaryStats(t,n,a){let s=`/counter-bill/complimentary/stats?branchId=${t}`;return n&&a&&(s+=`&startDate=${n}&endDate=${a}`),this.request(s)}}const or=new Wfe,Hfe=({message:e,type:t,onClose:n})=>(w.useEffect(()=>{const a=setTimeout(n,3e3);return()=>clearTimeout(a)},[n]),r.jsx("div",{className:`counter-toast ${t}`,children:e})),Gfe=()=>{const e=kn(),[t,n]=w.useState(""),[a,s]=w.useState(""),[i,l]=w.useState(!1),[d,u]=w.useState(null),[h,p]=w.useState(!1),[m,g]=w.useState(30),[b,j]=w.useState(!1),[v,y]=w.useState(!1);w.useEffect(()=>{let C;return h&&m>0?C=setTimeout(()=>{g(m-1)},1e3):m===0&&p(!1),()=>clearTimeout(C)},[h,m]);const A=(C,k="success")=>{u({message:C,type:k})},E=async C=>{if(C.preventDefault(),t.length!==10||!/^\d{10}$/.test(t)){A("Please enter a valid 10-digit mobile number","error");return}j(!0);try{const k=await or.sendOtp(t);l(!0),p(!0),g(30),A(k.message),k.otp&&setTimeout(()=>{A(`Your OTP is ${k.otp}`,"success")},3e3)}catch(k){console.error("Error sending OTP:",k),A(k.message||"Error sending OTP","error")}finally{j(!1)}},O=async()=>{if(t.length!==10||!/^\d{10}$/.test(t)){A("Please enter a valid 10-digit mobile number","error");return}j(!0);try{const C=await or.resendOtp(t);p(!0),g(30),A(C.message),C.otp&&setTimeout(()=>{A(`Your new OTP is ${C.otp}`,"success")},3e3)}catch(C){console.error("Error resending OTP:",C),A(C.message||"Error resending OTP","error")}finally{j(!1)}},S=async C=>{if(C.preventDefault(),!a||a.length!==6){A("Please enter a valid 6-digit OTP","error");return}y(!0);try{const k=await or.verifyOtp(t,a),I=k.counter._id;console.log("Counter User ID:",I),localStorage.setItem("counterAuthenticated","true"),localStorage.setItem("counterUserId",I),localStorage.setItem("counterUserData",JSON.stringify(k.counter)),A(k.message),setTimeout(()=>{e("/counter/branch-selection")},1e3)}catch(k){console.error("Error verifying OTP:",k),A(k.message||"Error during login","error")}finally{y(!1)}};return r.jsxs("div",{className:"counter-container",children:[d&&r.jsx(Hfe,{message:d.message,type:d.type,onClose:()=>u(null)}),r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("img",{src:"/logo.png",alt:"Virat Restaurant",style:{width:"120px",height:"120px",marginBottom:"20px"},onError:C=>{C.target.style.display="none"}}),r.jsx("h1",{className:"counter-title",children:"Counter Login"}),r.jsx("p",{className:"counter-subtitle",children:"Welcome back! Please login to continue"})]}),r.jsxs("form",{className:"counter-form",onSubmit:i?S:E,children:[r.jsxs("div",{className:"counter-form-group",children:[r.jsx("label",{className:"counter-label",children:"Mobile Number"}),r.jsx("input",{type:"tel",className:"counter-input",placeholder:"Enter 10 digit number",maxLength:10,value:t,onChange:C=>n(C.target.value),disabled:i||b,required:!0})]}),i&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"counter-form-group",children:[r.jsx("label",{className:"counter-label",children:"OTP"}),r.jsx("input",{type:"text",className:"counter-input",placeholder:"Enter 6 digit OTP",maxLength:6,value:a,onChange:C=>s(C.target.value),required:!0})]}),r.jsx("div",{style:{textAlign:"right",marginBottom:"20px"},children:r.jsxs("button",{type:"button",className:"counter-button-secondary",onClick:O,disabled:h||b,style:{width:"auto",padding:"8px 16px",fontSize:"0.875rem",opacity:h?.5:1},children:[h?`Resend OTP in ${m}s`:"Resend OTP",b&&r.jsx("div",{className:"counter-spinner",style:{width:"16px",height:"16px",marginLeft:"8px"}})]})})]}),r.jsx("button",{type:"submit",className:"counter-button",disabled:b||v,children:b||v?r.jsx("div",{className:"counter-spinner",style:{width:"20px",height:"20px"}}):i?"Login":"Send OTP"})]})]})]})},Kfe=()=>{const e=kn(),[t,n]=w.useState([]),[a,s]=w.useState(null),[i,l]=w.useState(!0),[d,u]=w.useState(null);w.useEffect(()=>{h()},[]);const h=async()=>{try{l(!0);const b=await or.getBranches(),j=b.branches||b.data||b||[];n(j)}catch(b){console.error("Error loading branches:",b),u("Failed to load branches. Please try again.")}finally{l(!1)}},p=b=>{s(b)},m=()=>{if(!a){alert("Please select a branch to continue");return}localStorage.setItem("selectedBranch",JSON.stringify(a)),e("/counter/category-selection",{state:{selectedBranch:a}})},g=()=>{localStorage.removeItem("counterAuthenticated"),localStorage.removeItem("counterUserId"),localStorage.removeItem("counterUserData"),localStorage.removeItem("selectedBranch"),e("/counter/login")};return i?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-loading",children:[r.jsx("div",{className:"counter-spinner"}),r.jsx("p",{children:"Loading branches..."})]})})}):d?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("h3",{children:"Error"}),r.jsx("p",{children:d}),r.jsx("button",{className:"counter-button",onClick:h,children:"Retry"})]})})}):r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Select Branch"}),r.jsx("p",{className:"counter-subtitle",children:"Choose your branch to continue"}),r.jsx("button",{className:"counter-button-secondary",onClick:g,style:{position:"absolute",top:"20px",right:"20px",width:"auto",padding:"8px 16px"},children:"Logout"})]}),t.length===0?r.jsx("div",{className:"counter-error",children:r.jsx("p",{children:"No branches available. Please contact administrator."})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"counter-grid",children:t.map(b=>r.jsxs("div",{className:`counter-item ${(a==null?void 0:a._id)===b._id?"selected":""}`,onClick:()=>p(b),children:[r.jsx("h3",{style:{margin:"0 0 8px 0",color:"#1a202c"},children:b.name}),r.jsx("p",{style:{margin:"0 0 8px 0",color:"#718096",fontSize:"0.875rem"},children:b.address}),r.jsxs("p",{style:{margin:"0",color:"#4a5568",fontSize:"0.875rem"},children:[" ",b.phone]}),b.email&&r.jsxs("p",{style:{margin:"4px 0 0 0",color:"#4a5568",fontSize:"0.875rem"},children:[" ",b.email]})]},b._id))}),r.jsx("div",{style:{textAlign:"center",marginTop:"32px"},children:r.jsx("button",{className:"counter-button",onClick:m,disabled:!a,style:{maxWidth:"300px"},children:"Continue to Category Selection"})})]})]})})},Vfe=()=>{const e=kn(),n=ua().state,[a,s]=w.useState([]),[i,l]=w.useState(null),[d,u]=w.useState(!0),[h,p]=w.useState(null),[m,g]=w.useState(!1),[b,j]=w.useState(""),[v,y]=w.useState(""),[A,E]=w.useState(null),[O,S]=w.useState(new Set),C={restaurant:"res123","self service":"sel456","temple meals":"tem789"};w.useEffect(()=>{if(!n||!n.selectedBranch){e("/counter/branch-selection");return}const N=localStorage.getItem("selectedCategory"),L=localStorage.getItem("selectedCategoryName");if(N&&L){console.log(" Found stored category:",L);try{const P=JSON.parse(N);console.log(" Auto-navigating to stored category:",L),e("/counter/menu",{state:{...n,selectedCategory:P,customerName:"Walk-in Customer",phoneNumber:"0000000000",invoiceNumber:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[]}});return}catch(P){console.error("Error parsing stored category:",P),localStorage.removeItem("selectedCategory"),localStorage.removeItem("selectedCategoryName")}}k()},[n,e]);const k=async()=>{try{u(!0),p(null);const N=await or.getCategories(n.selectedBranch._id),L=[];if(N){const _=N.categories||N;Array.isArray(_)&&_.length>0&&_.forEach(R=>{const W=R.name||R.categoryName||R.title;W&&L.push({_id:R._id||R.id,name:W,description:R.description||"",image:R.image||null,itemCount:R.itemCount||0})})}const P=L.filter(_=>{const R=_.name.toLowerCase();return!0});s(P)}catch(N){console.error("Error loading categories:",N),p("Failed to load categories. Please try again.")}finally{u(!1)}},I=N=>{const L=N.name.toLowerCase();localStorage.setItem("selectedCategory",JSON.stringify(N)),localStorage.setItem("selectedCategoryName",N.name),console.log(" Category stored in localStorage:",N.name),Object.keys(C).some(_=>L.includes(_))?Array.from(O).some(R=>L.includes(R))?(console.log(" Category already authenticated - auto-navigating to menu:",L),e("/counter/menu",{state:{...n,selectedCategory:N,customerName:"Walk-in Customer",phoneNumber:"0000000000",invoiceNumber:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[]}})):(console.log(" Protected category selected - requesting password:",L),E(N),g(!0),j(""),y("")):(console.log(" Unprotected category selected - auto-navigating to menu:",L),e("/counter/menu",{state:{...n,selectedCategory:N,customerName:"Walk-in Customer",phoneNumber:"0000000000",invoiceNumber:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[]}}))},z=()=>{const N=A.name.toLowerCase();let L=null,P=null;for(const[_,R]of Object.entries(C))if(N.includes(_)){L=R,P=_;break}b===L?(console.log(" Password correct for category:",N),S(_=>new Set([..._,P])),g(!1),j(""),y(""),console.log(" Auto-navigating to menu after successful authentication"),localStorage.setItem("selectedCategory",JSON.stringify(A)),e("/counter/menu",{state:{...n,selectedCategory:A,customerName:"Walk-in Customer",phoneNumber:"0000000000",invoiceNumber:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[]}}),E(null)):(console.log(" Password incorrect for category:",N),y(`Incorrect password for ${A.name}. Please try again.`),j(""))},B=()=>{g(!1),j(""),y(""),E(null)},M=()=>{e("/counter/branch-selection")},F=()=>{localStorage.removeItem("counterAuthenticated"),localStorage.removeItem("counterUserId"),localStorage.removeItem("counterUserData"),localStorage.removeItem("selectedBranch"),localStorage.removeItem("counterSelectedCategory"),localStorage.removeItem("selectedCategory"),localStorage.removeItem("selectedCategoryName"),console.log(" All category data cleared - user can select different category"),e("/counter/login")};return n?d?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-loading",children:[r.jsx("div",{className:"counter-spinner"}),r.jsx("p",{children:"Loading categories..."})]})})}):h?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("h3",{children:"Error"}),r.jsx("p",{children:h}),r.jsx("button",{className:"counter-button",onClick:k,children:"Retry"})]})})}):r.jsxs("div",{className:"counter-container",children:[r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Select Category"}),r.jsxs("p",{className:"counter-subtitle",children:[n.selectedBranch.name,"  Choose your dining category"]}),r.jsx("button",{className:"counter-button-secondary",onClick:F,style:{position:"absolute",top:"20px",right:"20px",width:"auto",padding:"8px 16px"},children:"Logout"})]}),a.length===0?r.jsx("div",{className:"counter-error",children:r.jsx("p",{children:"No categories available for this branch. Please contact administrator."})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"counter-grid",children:a.map(N=>r.jsxs("div",{className:"counter-item",onClick:()=>I(N),style:{minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",padding:"24px 16px"},children:[r.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"12px"},children:N.name.toLowerCase().includes("restaurant")?"":N.name.toLowerCase().includes("temple")?"":N.name.toLowerCase().includes("self service")?"":N.name.toLowerCase().includes("breakfast")?"":N.name.toLowerCase().includes("lunch")?"":N.name.toLowerCase().includes("dinner")?"":N.name.toLowerCase().includes("snack")?"":N.name.toLowerCase().includes("beverage")?"":N.name.toLowerCase().includes("sweet")?"":""}),r.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#1a202c",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[N.name,(()=>{const L=N.name.toLowerCase();return Object.keys(C).some(_=>L.includes(_))?Array.from(O).some(R=>L.includes(R))?r.jsx("span",{style:{fontSize:"0.8rem",color:"#10b981",backgroundColor:"#d1fae5",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:" Unlocked"}):r.jsx("span",{style:{fontSize:"0.8rem",color:"#f59e0b",backgroundColor:"#fef3c7",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:" Protected"}):null})()]}),N.description&&r.jsx("p",{style:{margin:"0 0 8px 0",color:"#718096",fontSize:"0.875rem",lineHeight:"1.4"},children:N.description}),N.itemCount>0&&r.jsxs("p",{style:{margin:"0",color:"#4a5568",fontSize:"0.75rem",fontWeight:"500"},children:[N.itemCount," items available"]}),(N.name.toLowerCase().includes("restaurant")||N.name.toLowerCase().includes("temple meal"))&&r.jsx("p",{style:{margin:"4px 0 0 0",color:"#f59e0b",fontSize:"0.7rem",fontWeight:"600"},children:" Table Selection Available"})]},N._id))}),r.jsx("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:"32px"},children:r.jsx("button",{className:"counter-button-secondary",onClick:M,style:{width:"auto",padding:"12px 24px"},children:" Back to Branches"})})]})]}),m&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:r.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[r.jsxs("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",fontWeight:"600",color:"#1f2937",textAlign:"center"},children:[" ",A==null?void 0:A.name," Access"]}),r.jsxs("p",{style:{margin:"0 0 24px 0",color:"#6b7280",textAlign:"center",fontSize:"0.9rem"},children:["Please enter the password to access ",A==null?void 0:A.name," category"]}),r.jsx("input",{type:"password",value:b,onChange:N=>j(N.target.value),onKeyDown:N=>{N.key==="Enter"&&z()},placeholder:`Enter ${A==null?void 0:A.name} password`,autoFocus:!0,style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"1rem",marginBottom:"16px",outline:"none",borderColor:v?"#ef4444":"#e5e7eb"}}),v&&r.jsx("p",{style:{margin:"0 0 16px 0",color:"#ef4444",fontSize:"0.8rem",textAlign:"center"},children:v}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:B,style:{padding:"10px 20px",border:"2px solid #e5e7eb",borderRadius:"6px",backgroundColor:"white",color:"#6b7280",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500"},children:"Cancel"}),r.jsx("button",{onClick:z,disabled:!b.trim(),style:{padding:"10px 20px",border:"none",borderRadius:"6px",backgroundColor:b.trim()?"#3b82f6":"#9ca3af",color:"white",cursor:b.trim()?"pointer":"not-allowed",fontSize:"0.9rem",fontWeight:"500"},children:"Submit"})]})]})})]}):r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("p",{children:"Branch data not found. Please start over."}),r.jsx("button",{className:"counter-button",onClick:()=>e("/counter/branch-selection"),children:"Go Back"})]})})})};class Yfe{constructor(){this.printerWidth=38,this.leftMargin="  ",this.isElectron=typeof window<"u"&&window.electronAPI}formatLine(t,n="center"){const a=this.printerWidth;if(t.length>a)return this.leftMargin+t.substring(0,a);switch(n){case"center":const s=Math.floor((a-t.length)/2);return this.leftMargin+" ".repeat(Math.max(0,s))+t+" ".repeat(Math.max(0,s));case"right":return this.leftMargin+" ".repeat(Math.max(0,a-t.length))+t;default:return this.leftMargin+t}}formatTwoColumn(t,n){const a=this.printerWidth,s=n.length+1,i=a-s;return this.leftMargin+t.substring(0,i).padEnd(i)+" "+n}createSeparator(t="-"){return this.leftMargin+t.repeat(this.printerWidth)}generateThermalReceipt(t){var m,g,b,j,v,y,A,E,O,S;const n=[];n.push(this.formatLine("HOTEL VIRAT SIRI DARSHINI","center")),n.push(this.formatLine("ISKON FOOTHILLS, 149/A, R BLOCK,","center")),n.push(this.formatLine("WOC ROAD, RAJAJINAGAR BENGALURU 560010","center")),n.push(this.formatLine("GSTIN: 29AGZPV1558K2Z6","center")),n.push("");let a="SELF SERVICE";if(console.log(" Thermal printer - determining service type:",{selectedTable:t.selectedTable,tableNumber:((m=t.selectedTable)==null?void 0:m.tableNumber)||((g=t.selectedTable)==null?void 0:g.number),selectedCategory:t.selectedCategory,categoryName:(b=t.selectedCategory)==null?void 0:b.name,fullPaymentData:t}),t.selectedTable&&(t.selectedTable.tableNumber||t.selectedTable.number))a="RESTAURANT",console.log(" Service type set to RESTAURANT (has table)");else if(t.selectedCategory){const C=((j=t.selectedCategory.name)==null?void 0:j.toLowerCase())||"";C.includes("restaurant")?(a="RESTAURANT",console.log(" Service type set to RESTAURANT (category)")):C.includes("temple")||C.includes("meal")?(a="TEMPLE MEALS",console.log(" Service type set to TEMPLE MEALS")):(C.includes("darshini")||C.includes("self service"))&&(a="SELF SERVICE",console.log(" Service type set to SELF SERVICE"))}console.log(" Final service type for receipt:",a);let s="C1/as";if(console.log(" Receipt right corner logic - serviceType:",a),console.log(" Receipt right corner logic - selectedTable:",t.selectedTable),console.log(" Receipt right corner logic - tableNumber:",(v=t.selectedTable)==null?void 0:v.tableNumber),console.log(" Receipt right corner logic - number:",(y=t.selectedTable)==null?void 0:y.number),a==="RESTAURANT"){const C=((A=t.selectedTable)==null?void 0:A.tableNumber)||((E=t.selectedTable)==null?void 0:E.number);C?(s=`Table ${C}`,console.log("  Using table number for restaurant receipt:",s)):(console.log("  Restaurant service but no table number found, using default C1/as"),console.log("  selectedTable object:",JSON.stringify(t.selectedTable,null,2)))}else console.log(" Using default C1/as for receipt because service type is:",a);console.log(" Final receipt right corner text:",s),n.push(this.formatTwoColumn(a,s)),n.push(this.createSeparator("-"));let i="NaN-NaN-NaN";try{const C=t.date?new Date(t.date):new Date;if(isNaN(C.getTime())){const k=new Date,I=String(k.getDate()).padStart(2,"0"),z=String(k.getMonth()+1).padStart(2,"0"),B=k.getFullYear();i=`${I}-${z}-${B}`}else{const k=String(C.getDate()).padStart(2,"0"),I=String(C.getMonth()+1).padStart(2,"0"),z=C.getFullYear();i=`${k}-${I}-${z}`}}catch(C){console.error("Date formatting error:",C);const k=new Date,I=String(k.getDate()).padStart(2,"0"),z=String(k.getMonth()+1).padStart(2,"0"),B=k.getFullYear();i=`${I}-${z}-${B}`}let l="";try{const C=t.time?new Date(`1970-01-01 ${t.time}`):new Date;!isNaN(C.getTime())&&t.time?l=t.time:l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}catch(C){console.error("Time formatting error:",C),l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}n.push(this.formatTwoColumn(i,l)),console.log(" Thermal printer unified bill/invoice number debug:",{paymentDataInvoiceNumber:t.invoiceNumber,paymentDataBillNumber:t.billNumber,note:"Bill No and Invoice No should be the same",fallbackValue:t.invoiceNumber||t.billNumber||"001",finalValue:String(t.invoiceNumber||t.billNumber||"001")});const d=t.invoiceNumber||t.billNumber||"001";n.push(this.leftMargin+"BILL NO: "+String(d));const u=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"});n.push(this.leftMargin+`Bill Generated: ${u}`),n.push(this.createSeparator("-")),n.push(this.formatTwoColumn("ITEM NAME","QTY  RATE  AMOUNT")),n.push(this.createSeparator("-")),t.cartItems.forEach(C=>{let k=C.name.replace(/^\d+\s*/,"").toUpperCase();const I=parseFloat(C.quantity).toFixed(3),z=parseFloat(C.price).toFixed(2),B=parseFloat(C.price*C.quantity).toFixed(2);n.push(this.leftMargin+k);const M=`${I}  ${z}  ${B}`;n.push(this.formatLine(M,"right"))}),n.push(this.createSeparator("-"));const h=t.cartItems.reduce((C,k)=>C+k.price*k.quantity,0);if(n.push(this.formatTwoColumn("SUBTOTAL:",`${parseFloat(h).toFixed(2)}`)),t.discountAmount&&t.discountAmount>0&&(n.push(this.formatTwoColumn("DISCOUNT:",`-${parseFloat(t.discountAmount).toFixed(2)}`)),t.discountRemark||(O=t.discount)!=null&&O.remark)){const C=t.discountRemark||((S=t.discount)==null?void 0:S.remark)||"";C.length>0&&n.push(this.leftMargin+`Reason: ${C}`)}n.push(this.createSeparator("-"));const p=t.total||h-(t.discountAmount||0);return n.push(this.formatTwoColumn("GRAND TOTAL:",`${parseFloat(p).toFixed(2)}`)),n.push(this.createSeparator("-")),t.paymentMethod!=="Pending"&&n.push(this.formatTwoColumn("PAYMENT:",t.paymentMethod.toUpperCase())),n.push(this.formatLine(".. !! THANK YOU,VISIT AGAIN !!..","center")),n.push(""),n.push(""),n.join(`
`)}generateThermalBill(t){var p,m,g,b,j,v,y,A,E,O;console.log(" generateThermalBill called with data:",t);const n=[];n.push(this.formatLine("HOTEL VIRAT SIRI DARSHINI","center")),n.push(this.formatLine("ISKON FOOTHILLS, 149/A, R BLOCK,","center")),n.push(this.formatLine("WOC ROAD, RAJAJINAGAR BENGALURU 560010","center")),n.push(this.formatLine("GSTIN: 29AGZPV1558K2Z6","center")),n.push("");let a="SELF SERVICE";if(console.log(" Thermal printer bill - determining service type:",{selectedTable:t.selectedTable,tableNumber:((p=t.selectedTable)==null?void 0:p.tableNumber)||((m=t.selectedTable)==null?void 0:m.number),selectedCategory:t.selectedCategory,categoryName:(g=t.selectedCategory)==null?void 0:g.name,fullBillData:t}),t.selectedTable&&(t.selectedTable.tableNumber||t.selectedTable.number))a="RESTAURANT",console.log(" Bill service type set to RESTAURANT (has table)");else if(t.selectedCategory){const S=((b=t.selectedCategory.name)==null?void 0:b.toLowerCase())||"";S.includes("restaurant")?(a="RESTAURANT",console.log(" Bill service type set to RESTAURANT (category)")):S.includes("temple")||S.includes("meal")?(a="TEMPLE MEALS",console.log(" Bill service type set to TEMPLE MEALS")):(S.includes("darshini")||S.includes("self service"))&&(a="SELF SERVICE",console.log(" Bill service type set to SELF SERVICE"))}console.log(" Final bill service type for receipt:",a);let s="C1/as";if(console.log(" Right corner logic - serviceType:",a),console.log(" Right corner logic - selectedTable:",t.selectedTable),console.log(" Right corner logic - tableNumber:",(j=t.selectedTable)==null?void 0:j.tableNumber),console.log(" Right corner logic - number:",(v=t.selectedTable)==null?void 0:v.number),a==="RESTAURANT"){const S=((y=t.selectedTable)==null?void 0:y.tableNumber)||((A=t.selectedTable)==null?void 0:A.number);S?(s=`Table ${S}`,console.log("  Using table number for restaurant:",s)):(console.log("  Restaurant service but no table number found, using default C1/as"),console.log("  selectedTable object:",JSON.stringify(t.selectedTable,null,2)))}else console.log(" Using default C1/as because service type is:",a);console.log(" Final right corner text:",s),n.push(this.formatTwoColumn(a,s)),n.push(this.createSeparator("-")),console.log(" Processing date and time:",{originalDate:t.date,originalTime:t.time,dateType:typeof t.date,timeType:typeof t.time});let i="NaN-NaN-NaN";try{let S;if(t.date?(S=new Date(t.date),console.log(" Parsed date object:",S,"isValid:",!isNaN(S.getTime()))):(S=new Date,console.log(" Using current date as fallback")),isNaN(S.getTime())){const C=new Date,k=String(C.getDate()).padStart(2,"0"),I=String(C.getMonth()+1).padStart(2,"0"),z=C.getFullYear();i=`${k}-${I}-${z}`,console.log(" Using current date fallback:",i)}else{const C=String(S.getDate()).padStart(2,"0"),k=String(S.getMonth()+1).padStart(2,"0"),I=S.getFullYear();i=`${C}-${k}-${I}`,console.log(" Formatted date:",i)}}catch(S){console.error(" Date formatting error:",S);const C=new Date,k=String(C.getDate()).padStart(2,"0"),I=String(C.getMonth()+1).padStart(2,"0"),z=C.getFullYear();i=`${k}-${I}-${z}`,console.log(" Error fallback date:",i)}let l="";try{t.time&&typeof t.time=="string"?(l=t.time,console.log(" Using provided time:",l)):(l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),console.log(" Using current time:",l))}catch(S){console.error(" Time formatting error:",S),l=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),console.log(" Error fallback time:",l)}console.log(" Final date and time for receipt:",{formattedDate:i,formattedTime:l}),n.push(this.formatTwoColumn(i,l)),console.log(" Thermal printer bill invoice number debug:",{billDataInvoiceNumber:t.invoiceNumber,billDataBillNumber:t.billNumber,fallbackValue:t.invoiceNumber||"001",finalValue:String(t.invoiceNumber||"001")}),n.push(this.leftMargin+"BILL NO: "+String(t.invoiceNumber||"001"));const d=new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"});n.push(this.leftMargin+`Bill Generated: ${d}`),n.push(this.createSeparator("-")),n.push(this.formatTwoColumn("ITEM NAME","QTY  RATE  AMOUNT")),n.push(this.createSeparator("-")),t.cartItems.forEach(S=>{let C=S.name.replace(/^\d+\s*/,"").toUpperCase();const k=parseFloat(S.quantity).toFixed(3),I=parseFloat(S.price).toFixed(2),z=parseFloat(S.price*S.quantity).toFixed(2);n.push(this.leftMargin+C);const B=`${k}  ${I}  ${z}`;n.push(this.formatLine(B,"right"))}),n.push(this.createSeparator("-"));const u=t.cartItems.reduce((S,C)=>S+C.price*C.quantity,0);if(n.push(this.formatTwoColumn("SUBTOTAL:",`${parseFloat(u).toFixed(2)}`)),console.log(" Discount processing:",{discountAmount:t.discountAmount,discountRemark:t.discountRemark,discount:t.discount,hasDiscount:!!(t.discountAmount&&t.discountAmount>0)}),t.discountAmount&&t.discountAmount>0){if(console.log(" Adding discount to receipt:",t.discountAmount),n.push(this.formatTwoColumn("DISCOUNT:",`-${parseFloat(t.discountAmount).toFixed(2)}`)),t.discountRemark||(E=t.discount)!=null&&E.remark){const S=t.discountRemark||((O=t.discount)==null?void 0:O.remark)||"";S.length>0&&(n.push(this.leftMargin+`Reason: ${S}`),console.log(" Added discount reason:",S))}}else console.log(" No discount to add - discountAmount:",t.discountAmount);n.push(this.createSeparator("-"));const h=t.total||u-(t.discountAmount||0);return console.log(" Total calculation:",{subtotal:u,discountAmount:t.discountAmount||0,providedTotal:t.total,calculatedTotal:h}),n.push(this.formatTwoColumn("GRAND TOTAL:",`${parseFloat(h).toFixed(2)}`)),n.push(this.createSeparator("-")),n.push(this.formatLine(".. !! THANK YOU,VISIT AGAIN !!..","center")),n.push(""),n.push(""),n.join(`
`)}generateKOT(t){const n=[];n.push(this.formatLine("*** KITCHEN ORDER TICKET ***","center")),n.push(this.createSeparator("=")),n.push(""),n.push(this.formatLine(`KOT: ${t.kotNumber}`,"center")),n.push(this.formatLine(`TABLE: ${t.tableNumber}`,"center")),n.push(""),n.push(this.createSeparator("="));const a=new Date,s=a.toLocaleDateString("en-IN"),i=a.toLocaleTimeString("en-IN",{hour12:!0});n.push(this.formatTwoColumn("Date:",s)),n.push(this.formatTwoColumn("Time:",i)),n.push(this.createSeparator("-")),n.push(this.formatTwoColumn("ITEM","QTY")),n.push(this.createSeparator("=")),t.items.forEach(d=>{const u=d.name.toUpperCase(),h=`${d.quantity}x`;n.push(this.formatTwoColumn(u,h)),n.push("")}),n.push(this.createSeparator("="));const l=t.items.reduce((d,u)=>d+u.quantity,0);return n.push(this.formatLine(`TOTAL ITEMS: ${l}`,"center")),n.push(""),n.push(this.formatLine("*** PREPARE IMMEDIATELY ***","center")),n.push(""),n.push(""),n.push(""),n.join(`
`)}generateUpdatedKOT(t){const n=[];n.push(this.formatLine("*** UPDATED KITCHEN ORDER ***","center")),n.push(this.formatLine("*** ORDER TICKET ***","center")),n.push(this.createSeparator("=")),n.push(""),n.push(this.formatLine(`KOT: ${t.kotNumber}`,"center")),n.push(this.formatLine(`TABLE: ${t.tableNumber}`,"center")),n.push(this.formatLine("*** UPDATED ORDER ***","center")),n.push(""),n.push(this.createSeparator("="));const a=new Date,s=a.toLocaleDateString("en-IN"),i=a.toLocaleTimeString("en-IN",{hour12:!0});n.push(this.formatTwoColumn("Updated Date:",s)),n.push(this.formatTwoColumn("Updated Time:",i)),n.push(this.createSeparator("-")),n.push(this.formatLine("*** REVISED QUANTITIES ***","center")),n.push(this.formatLine("*** PLEASE UPDATE PREPARATION ***","center")),n.push(this.createSeparator("-")),n.push(this.formatTwoColumn("ITEM","NEW QTY")),n.push(this.createSeparator("=")),t.items.forEach(d=>{const u=d.name.toUpperCase(),h=`${d.quantity}x`;n.push(this.formatTwoColumn(u,h)),n.push("")}),n.push(this.createSeparator("="));const l=t.items.reduce((d,u)=>d+u.quantity,0);return n.push(this.formatLine(`TOTAL ITEMS: ${l}`,"center")),n.push(""),n.push(this.formatLine("*** ORDER MODIFIED ***","center")),n.push(this.formatLine("*** PREPARE NEW QUANTITIES ***","center")),n.push(this.formatLine("*** DISCARD PREVIOUS KOT ***","center")),n.push(""),n.push(""),n.push(""),n.join(`
`)}async printViaElectron(t){if(!this.isElectron)throw new Error("Electron API not available");try{return await window.electronAPI.printThermal({text:t,options:{preview:!1,margin:{top:0,bottom:0,left:0,right:0},pageSize:{width:80,height:200}}})}catch(n){throw console.error("Electron thermal printing failed:",n),n}}async printViaWebSerial(t){if(!("serial"in navigator))throw new Error("Web Serial API not supported in this browser");try{const n=await navigator.serial.requestPort({filters:[{usbVendorId:1208},{usbVendorId:1305},{usbVendorId:4070}]});await n.open({baudRate:9600});const a=new TextEncoder,s=n.writable.getWriter();return await s.write(a.encode("\x1B@")),await s.write(a.encode("L\0\0")),await s.write(a.encode("\x1B!\0")),await s.write(a.encode("\x1Ba\0")),await s.write(a.encode(t)),await s.write(a.encode("VB\0")),await s.write(a.encode(`


`)),s.releaseLock(),await n.close(),{success:!0,message:"Receipt printed successfully via USB"}}catch(n){throw n.name==="NotFoundError"?new Error("No thermal printer selected. Please connect a USB thermal printer and try again."):(console.error("Web Serial printing failed:",n),new Error(`USB printing failed: ${n.message}`))}}async printViaNetwork(t,n="192.168.1.100",a=9100){try{const s="https://hotelvirat.com/api/v1/hotel",i=new AbortController,l=setTimeout(()=>i.abort(),3e3),d=await fetch(`${s}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,printerIP:n,port:a}),signal:i.signal});clearTimeout(l);const u=await d.json();if(!d.ok)throw u.error&&(u.error.includes("timeout")||u.error.includes("Connection timeout")||u.error.includes("ECONNREFUSED")||u.error.includes("EHOSTUNREACH"))?new Error(`Thermal printer not found at ${n}:${a}. Please check printer connection and IP address.`):new Error(`Network printing failed: ${u.message||d.statusText}`);return u}catch(s){throw s.name==="AbortError"?new Error(`Network printing timed out. Printer at ${n}:${a} is not responding.`):(console.error("Network thermal printing failed:",s),s)}}printViaBrowser(t){return new Promise(n=>{try{const a=window.open("","_blank","width=400,height=600");if(!a){this.printInCurrentWindowSafe(t),n({success:!0,method:"current-window"});return}const s=`
          <!DOCTYPE html>
          <html>
          <head>
            <title>Receipt</title>
            <style>
              @media print {
                @page {
                  size: 80mm auto;
                  margin: 0;
                }
                body {
                  margin: 0;
                  padding: 5mm;
                  font-family: 'Courier New', monospace;
                  font-size: 12px;
                  line-height: 1.2;
                  width: 70mm;
                }
              }
              body {
                font-family: 'Courier New', monospace;
                font-size: 12px;
                line-height: 1.2;
                margin: 0;
                padding: 10px;
                width: 300px;
                background: white;
              }
              pre {
                margin: 0;
                white-space: pre-wrap;
                word-wrap: break-word;
              }
            </style>
          </head>
          <body>
            <pre>${t}</pre>
            <script>
              window.onload = function() {
                try {
                  window.print();
                  setTimeout(function() {
                    try {
                      window.close();
                    } catch(e) {
                      console.log('Could not close print window:', e);
                    }
                  }, 1000);
                } catch(e) {
                  console.log('Print failed:', e);
                  setTimeout(function() {
                    try {
                      window.close();
                    } catch(e2) {
                      console.log('Could not close window after print failure:', e2);
                    }
                  }, 500);
                }
              }
            <\/script>
          </body>
          </html>
        `;a.document.write(s),a.document.close(),n({success:!0,method:"popup-window"})}catch(a){console.error("Browser print failed:",a),this.printInCurrentWindowSafe(t),n({success:!0,method:"current-window-fallback"})}})}printInCurrentWindowSafe(t){try{const n=document.createElement("div");n.id="thermal-print-temp-"+Date.now(),n.innerHTML=`
        <div style="display: none;">
          <style>
            @media print {
              body * { visibility: hidden; }
              #${n.id}, #${n.id} * { visibility: visible; }
              #${n.id} {
                position: absolute;
                left: 0;
                top: 0;
                width: 80mm;
                font-family: 'Courier New', monospace;
                font-size: 12px;
                line-height: 1.2;
              }
            }
          </style>
          <pre>${t}</pre>
        </div>
      `,document.body.appendChild(n),setTimeout(()=>{try{window.print()}catch(a){console.error("Print dialog failed:",a)}setTimeout(()=>{try{document.body.contains(n)&&document.body.removeChild(n)}catch(a){console.error("Cleanup failed:",a)}},2e3)},100)}catch(n){console.error("Safe print method failed:",n),console.log("Receipt content:",t)}}async printReceipt(t,n={}){const a=this.generateThermalReceipt(t);return this.executePrintWithTimeout(a,n)}async printBill(t,n={}){const a=this.generateThermalBill(t);return this.executePrintWithTimeout(a,n)}async executePrintWithTimeout(t,n={},a=5e3){return Promise.race([this.executePrint(t,n),new Promise((s,i)=>setTimeout(()=>i(new Error("Print operation timed out")),a))]).catch(s=>{console.error("Print operation failed or timed out:",s);try{return this.printViaBrowser(t)}catch(i){return console.error("Even browser fallback failed:",i),{success:!1,method:"failed",error:s.message}}})}async executePrint(t,n={}){const{method:a="auto",printerIP:s,port:i}=n;console.log("Generated thermal print text:",t);try{switch(a){case"electron":return await this.printViaElectron(t);case"serial":return await this.printViaWebSerial(t);case"network":return await this.printViaNetwork(t,s,i);case"browser":return this.printViaBrowser(t);case"auto":default:let l=null;if(this.isElectron)try{return await this.printViaElectron(t)}catch(d){l=d,console.log("Electron printing failed, trying next method:",d.message)}if(s&&s!=="192.168.1.100")try{return await this.printViaNetwork(t,s,i)}catch(d){l=d,console.log("Network printing failed, trying next method:",d.message)}return console.log("Using browser print fallback"),this.printViaBrowser(t)}}catch(l){return console.error("Print method failed:",l),console.log("All methods failed, using browser fallback"),this.printViaBrowser(t)}}generateKOTChanges(t){const n=[];n.push(this.formatLine("*** KOT CHANGES ***","center")),n.push(this.formatLine("*** KITCHEN ORDER CHANGES ***","center")),n.push(this.createSeparator("=")),n.push(""),n.push(this.formatLine(`KOT: ${t.kotNumber}`,"center")),n.push(this.formatLine(`TABLE: ${t.tableNumber}`,"center")),n.push(this.formatLine("*** CHANGES ONLY ***","center")),n.push(""),n.push(this.createSeparator("="));const a=new Date,s=a.toLocaleDateString("en-IN"),i=a.toLocaleTimeString("en-IN",{hour12:!0});n.push(this.formatTwoColumn("Change Date:",s)),n.push(this.formatTwoColumn("Change Time:",i)),n.push(this.createSeparator("-")),n.push(this.formatLine("*** ITEM CHANGES ***","center")),n.push(this.formatLine("*** ONLY PREPARE CHANGES ***","center")),n.push(this.createSeparator("-")),n.push(this.formatTwoColumn("ITEM CHANGES","OLD  NEW")),n.push(this.createSeparator("=")),t.items.forEach(u=>{const h=u.name.toUpperCase();if(console.log(" Processing item for KOT changes:",{name:h,quantity:u.quantity,originalQuantity:u.originalQuantity,isRemoved:u.isRemoved,isChanged:u.isChanged}),u.isRemoved)console.log(` Item marked as REMOVED: ${h}`),n.push(this.formatTwoColumn(h,"REMOVED")),n.push(this.formatLine("*** CANCEL THIS ITEM ***","center"));else if(u.isChanged){console.log(` Item marked as CHANGED: ${h}`);const p=`${u.originalQuantity}x  ${u.quantity}x`;if(n.push(this.formatTwoColumn(h,p)),u.quantity>u.originalQuantity){const m=u.quantity-u.originalQuantity;n.push(this.formatLine(`*** PREPARE ${m}x MORE ***`,"center"))}else if(u.quantity<u.originalQuantity){const m=u.originalQuantity-u.quantity;n.push(this.formatLine(`*** REDUCE BY ${m}x ***`,"center"))}}else console.log(` Item has no changes: ${h}`);n.push("")}),n.push(this.createSeparator("="));const l=t.items.filter(u=>u.isRemoved).length,d=t.items.filter(u=>u.isChanged).length;return l>0&&n.push(this.formatLine(`REMOVED ITEMS: ${l}`,"center")),d>0&&n.push(this.formatLine(`CHANGED ITEMS: ${d}`,"center")),n.push(""),n.push(this.formatLine("*** PROCESS CHANGES ONLY ***","center")),n.push(this.formatLine("*** DO NOT REMAKE ENTIRE ORDER ***","center")),n.push(""),n.push(""),n.push(""),n.join(`
`)}async printKOTChanges(t,n={}){const a=this.generateKOTChanges(t);return this.executePrintWithTimeout(a,n)}async printKOT(t,n={}){const a=this.generateKOT(t);return this.executePrintWithTimeout(a,n)}}const ni=new Yfe,jw=()=>{try{const e=localStorage.getItem("selectedCategory"),t=localStorage.getItem("selectedCategoryName");if(console.log(" getStoredCategory - storedCategory:",e),console.log(" getStoredCategory - storedCategoryName:",t),t)return console.log(" Using storedCategoryName:",t),t;if(e){const n=JSON.parse(e);console.log(" Parsed categoryData:",n);const a=(n==null?void 0:n.name)||n;return console.log(" Using parsed category name:",a),a}return console.log(" No stored category found"),null}catch(e){return console.error(" Error reading stored category:",e),null}},LI=(e,t)=>{var a;console.log(" getCategoryName called with:",{customerData:e,selectedCategory:e==null?void 0:e.selectedCategory,preSelectedCategory:t,storedCategory:jw()});const n=[(a=e==null?void 0:e.selectedCategory)==null?void 0:a.name,t,jw(),window.location.pathname.includes("temple")?"Temple Meals":null,window.location.pathname.includes("self")?"Self Service":null,window.location.pathname.includes("restaurant")?"Restaurant":null];console.log(" Category sources to check:",n);for(const s of n)if(s&&s!=="All")return console.log(" Found category from source:",s),s;return console.log(" No category found, using fallback: Restaurant (MenuScreen default)"),"Restaurant"},Xfe=()=>{localStorage.removeItem("selectedCategory"),localStorage.removeItem("selectedCategoryName"),console.log(" Category data cleared - redirecting to category selection"),window.location.href="/counter/category-selection"},Qfe=async e=>{try{if(console.log(" Getting next KOT number from server..."),!e)throw new Error("Branch ID is required for KOT number generation");const t=await or.getNextKOTNumber(e);if(t&&t.success&&t.kotNumber)return console.log(` Server generated KOT number: ${t.kotNumber}`),t.kotNumber;throw new Error("Invalid response from server")}catch(t){console.error(" Failed to get KOT number from server:",t),console.log(" Falling back to localStorage method for KOT...");const n=new Date,a=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getFullYear()).slice(-2),d=`kot-counter-${`${a}-${s}-${i}`}`;let u=parseInt(localStorage.getItem(d)||"0");u++,localStorage.setItem(d,u.toString());const h=`KOT-${String(u).padStart(3,"0")}`;return console.log(` Fallback generated KOT: ${h} (counter: ${u})`),h}},$I=e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com";let n=e.toString().trim().replace(/\\/g,"/"),a;if(n.startsWith("/"))a=`${t}${n}`;else if(n.startsWith("uploads/"))a=`${t}/${n}`;else{const s=n.split("/").pop();a=`${t}/uploads/menu/${s}`}return a},Jfe=e=>{if(!e)return null;if(e.startsWith("https://hotelvirat.com"))return e.replace("https://hotelvirat.com","https://hotelvirat.com");if(e.startsWith("https://hotelvirat.com")||e.startsWith("http://")||e.startsWith("https://"))return e;const t="https://hotelvirat.com";let n=e.toString().trim().replace(/\\/g,"/"),a;if(n.startsWith("/"))a=`${t}${n}`;else if(n.startsWith("uploads/"))a=`${t}/${n}`;else{const s=n.split("/").pop();a=`${t}/uploads/menu/${s}`}return a},Zfe=()=>{var tu,Bf,il,ru,ol;const e=kn(),t=ua(),n=t.state,[a,s]=w.useState("000"),i=((tu=n==null?void 0:n.selectedCategory)==null?void 0:tu.name)||null,[l,d]=w.useState(i||"All"),[u,h]=w.useState(()=>{console.log(" Cart initialization - customerData:",n),console.log(" Cart initialization - customerData.cartItems:",n==null?void 0:n.cartItems);const be=((n==null?void 0:n.cartItems)||[]).filter(Te=>{const Ce=Te&&Te.name&&typeof Te.quantity=="number"&&Te.quantity>0&&typeof Te.price=="number"&&Te.price>=0;return Ce||console.log(" Filtering out invalid item:",Te),Ce});return console.log(" Final cart items after filtering:",be),be}),[p,m]=w.useState(["All"]),[g,b]=w.useState([]),[j,v]=w.useState([]),[y,A]=w.useState(!0),[E,O]=w.useState(null),[S,C]=w.useState(null),[k,I]=w.useState({}),[z,B]=w.useState([]),[M,F]=w.useState((n==null?void 0:n.selectedTable)||null),[N,L]=w.useState(!1),[P,_]=w.useState(!1),[R,W]=w.useState([]),[G,oe]=w.useState(!1),[q,V]=w.useState(null),[U,X]=w.useState(!1),[H,Q]=w.useState([]),[le,me]=w.useState(!1),[je,ee]=w.useState(!1),[se,fe]=w.useState(null),[ue,We]=w.useState([]),[we,Me]=w.useState(null),[Ee,Be]=w.useState(null),[it,re]=w.useState([]),[ce,Z]=w.useState(null),[de,te]=w.useState(0),[Se,Ve]=w.useState("");w.useEffect(()=>{console.log(" modifiedItems state changed:",it.map(J=>({name:J.name,newQuantity:J.newQuantity,isRemoved:J.isRemoved,originalQuantity:J.originalQuantity})))},[it]);const[tt,ze]=w.useState(!1),[Ze,Ae]=w.useState(null),[Qe,pt]=w.useState(!1),[Bt,Pt]=w.useState(new Date().toISOString().split("T")[0]),[kt,ae]=w.useState(!1),[Ie,Ye]=w.useState(null),Ft=async J=>{try{console.log(" Generating comprehensive bill for table:",J),Ee&&Ee.tableNumber===J&&(confirm("You have unsaved changes to a KOT for this table. Do you want to save the changes before generating the bill?")?(await Ue(!1),await new Promise(sr=>setTimeout(sr,1e3))):(Be(null),re([]))),await new Promise(Mt=>setTimeout(Mt,500));const be=await or.request("/counter-order/orders?includeComplimentary=false");let Te=[];be&&be.success&&Array.isArray(be.orders)||be&&Array.isArray(be.orders)?Te=be.orders:be&&Array.isArray(be.data)?Te=be.data:Array.isArray(be)&&(Te=be);const Ce=Te.filter(Mt=>Mt.paymentStatus==="pending"&&String(Mt.tableNumber).toLowerCase()===String(J).toLowerCase());if(console.log(" Found pending KOTs for table",J,":",Ce.length,Ce.map(Mt=>Mt.kotNumber)),Ce.length===0){console.log(" No pending KOTs found for table",J);return}const Ke=[],Xe=[];let rt=0,Dt=Ce[0];Ce.forEach(Mt=>{Xe.push(Mt.kotNumber),rt+=Mt.totalAmount||Mt.grandTotal||0,Mt.items&&Array.isArray(Mt.items)&&(console.log(` Processing KOT ${Mt.kotNumber} items:`,Mt.items.map(sr=>({name:sr.name,quantity:sr.quantity,willBeIncluded:sr.quantity>0}))),Mt.items.forEach(sr=>{if(!sr.quantity||sr.quantity<=0){console.log(" Skipping cancelled item:",sr.name,"quantity:",sr.quantity);return}console.log(" Including item in bill:",sr.name,"quantity:",sr.quantity);const jr=Ke.findIndex(Fn=>Fn.name===sr.name);jr>=0?(console.log(` Combining item "${sr.name}": ${Ke[jr].quantity} + ${sr.quantity} = ${Ke[jr].quantity+sr.quantity}`),Ke[jr].quantity+=sr.quantity||1):(console.log(` Adding new item "${sr.name}" with quantity ${sr.quantity}`),Ke.push({_id:sr.menuItemId||sr._id,name:sr.name,price:sr.price||0,quantity:sr.quantity||1}))}))});const zt=Ke.filter(Mt=>Mt.quantity>0);console.log(" Items after filtering zero quantities:",{originalCount:Ke.length,validCount:zt.length,filteredOut:Ke.length-zt.length}),console.log(" Comprehensive bill details:",{tableNumber:J,kotNumbers:Xe,totalKOTs:Ce.length,totalItems:zt.length,combinedItems:zt,totalAmount:rt}),console.log(" NAVIGATION-BASED BILLING: Deferring bill number generation to BillGeneration page"),console.log(" Table preparing for bill:",J),console.log(" KOTs being prepared for billing:",Ce.map(Mt=>({id:Mt.id||Mt._id,kotNumber:Mt.kotNumber,invoiceNumber:Mt.invoiceNumber,preparationTime:new Date().toISOString()})));let br=null;console.log("  NAVIGATION-BASED: Deferring bill number generation to completion time"),console.log(" No bill number generated yet - will be handled by BillGeneration page"),console.log(" CRITICAL: Bill number validation before navigation:",{billNumber:br,isBillNumberValid:!!br,billNumberType:typeof br,tableNumber:J,completionTime:new Date().toISOString()}),_(!1);let tr=n==null?void 0:n.selectedCategory;(!tr||!tr.name)&&(i?(tr={name:i,_id:null},console.log(" Using preSelectedCategory for comprehensive bill:",tr)):(tr={name:"Restaurant",_id:null},console.log(" Auto-detected Restaurant category for comprehensive bill:",tr))),e("/counter/bill-generation",{state:{...n,selectedCategory:tr,selectedTable:{_id:Dt.tableId,id:Dt.tableId,tableNumber:J,number:J,status:"reserved"},cartItems:zt,totalAmount:rt,isKOTOrder:!0,isComprehensiveBill:!0,kotNumbers:Xe,kotSaved:!0,existingOrderIds:Ce.map(Mt=>Mt.id||Mt._id),customerName:Dt.customerName||"Walk-in Customer",phoneNumber:Dt.phoneNumber||"0000000000",date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0})}})}catch(be){console.error(" Error generating comprehensive bill:",be),alert("Failed to generate comprehensive bill. Please try again.")}},xe=J=>{const be=document.querySelector(`[data-kot-index="${J}"]`);be?(be.scrollIntoView({behavior:"smooth",block:"center"}),console.log(" Scrolled to card index:",J)):console.log(" Card element not found for index:",J)},[ke,Re]=w.useState(!1),[ot,mt]=w.useState(null),[Tt,_t]=w.useState("1"),[st,wt]=w.useState(""),[yt,Nt]=w.useState(""),Kt=w.useRef(null),Lt=w.useRef(null),Ut=w.useRef(null);w.useEffect(()=>{var be,Te,Ce;if(!n){e("/counter/branch-selection");return}if((be=n==null?void 0:n.selectedCategory)!=null&&be.name&&!localStorage.getItem("selectedCategoryName")&&(console.log(" Storing category from customerData:",n.selectedCategory.name),localStorage.setItem("selectedCategory",JSON.stringify(n.selectedCategory)),localStorage.setItem("selectedCategoryName",n.selectedCategory.name)),zr(),i&&i.toLowerCase().includes("restaurant")){console.log(" Restaurant category detected, loading tables..."),Qt();const rt=setInterval(()=>{console.log(" Periodic table refresh..."),Qt()},3e4);return()=>{clearInterval(rt)}}localStorage.getItem("refreshTablesAfterBill")==="true"&&(console.log(" Refreshing tables after bill print..."),localStorage.removeItem("refreshTablesAfterBill"),setTimeout(()=>{Qt()},500)),(Te=t.state)!=null&&Te.refreshTables&&(console.log(" Navigation state refresh flag detected, refreshing tables..."),setTimeout(()=>{Qt()},200)),(Ce=t.state)!=null&&Ce.refreshKOTs&&(console.log(" Navigation state KOT refresh flag detected, refreshing KOTs..."),setTimeout(()=>{console.log(" Executing KOT refresh after bill completion..."),xt()},2e3),setTimeout(()=>{console.log(" Secondary KOT refresh (backup)..."),xt()},5e3))},[n,e,i,t.state]),w.useEffect(()=>{!M&&z.length>0&&Kt.current&&setTimeout(()=>{var J;(J=Kt.current)==null||J.focus()},100)},[M,z]),w.useEffect(()=>{if(M&&Lt.current){const J=()=>{if(Lt.current)return Lt.current.focus(),!0;const be=document.querySelector('input[placeholder*="Search by name"]');return be?(be.focus(),!0):!1};setTimeout(()=>J(),100),setTimeout(()=>J(),300)}},[M]),w.useEffect(()=>{if(i&&!i.toLowerCase().includes("restaurant")){const Te=()=>{if(Lt.current)return Lt.current.focus(),!0;const Ce=document.querySelector('input[placeholder*="Search by name"]');return Ce?(Ce.focus(),!0):!1};setTimeout(()=>Te(),100),setTimeout(()=>Te(),300),setTimeout(()=>Te(),500),setTimeout(()=>Te(),800)}},[i,j.length]),w.useEffect(()=>{!y&&i&&!i.toLowerCase().includes("restaurant")&&Lt.current&&setTimeout(()=>{var Te;(Te=Lt.current)==null||Te.focus()},200)},[y,i]);const zr=async()=>{try{A(!0),O(null);const[J,be]=await Promise.all([or.getCategories(n.selectedBranch._id),or.request("/menu")]),Te=["All"];if(J){const Ke=J.categories||J;Array.isArray(Ke)&&Ke.length>0&&Ke.forEach(Xe=>{const rt=Xe.name||Xe.categoryName||Xe.title;rt&&!Te.includes(rt)&&Te.push(rt)})}let Ce=[];if(be){const Ke=be.menu||be.menuItems||be.data||be;Array.isArray(Ke)&&(Ce=Ke.map(Xe=>{let rt=0;if(Xe.price!==void 0&&Xe.price!==null)rt=Xe.price;else if(Xe.prices&&typeof Xe.prices=="object"){const zt=Object.values(Xe.prices);zt.length>0&&(rt=zt[0])}rt=Number(rt)||0;let Dt=$I(Xe.image);return{...Xe,_id:Xe._id||Xe.id,name:Xe.name||Xe.itemName||Xe.title,price:rt,description:Xe.description||Xe.desc||"",image:Dt,categoryId:Xe.categoryId||Xe.category||null,menuItemNumber:Xe.menuItemNumber||Xe.number||null}}))}m(Te),v(Ce),b(Ce)}catch(J){console.error("Error loading menu data:",J),J.message.includes("Rate limit")?O("Too many requests. Please wait a moment and refresh the page."):O("Failed to load menu data. Please try again.")}finally{A(!1)}},Qt=async()=>{try{L(!0),console.log(" Loading tables for branch:",n.selectedBranch._id);const J=await or.request(`/table?branchId=${n.selectedBranch._id}`);console.log(" Tables API response:",J);let be=[];if(J){let Te=[];J.success&&Array.isArray(J.data)?Te=J.data:Array.isArray(J.tables)?Te=J.tables:Array.isArray(J)&&(Te=J),console.log(" Processed tables data:",Te),Array.isArray(Te)&&(be=Te.map(Ce=>{var Ke,Xe,rt,Dt;return{_id:Ce._id||Ce.id,number:Ce.number||Ce.tableNumber,tableNumber:Ce.number||Ce.tableNumber,capacity:Ce.capacity||4,status:Ce.status||"available",categoryId:((Ke=Ce.categoryId)==null?void 0:Ke._id)||Ce.categoryId||null,categoryName:((Xe=Ce.categoryId)==null?void 0:Xe.name)||Ce.categoryName||"All Categories",branchId:((rt=Ce.branchId)==null?void 0:rt._id)||Ce.branchId,branchName:((Dt=Ce.branchId)==null?void 0:Dt.name)||n.selectedBranch.name,image:Ce.image||null}}))}if(i&&i!=="All"){const Te=i.toLowerCase();Te.includes("restaurant")&&(be=be.filter(Ce=>{const Ke=(Ce.categoryName||"").toLowerCase();return Ke==="all categories"||Ke.includes(Te)||Ke===""||!Ce.categoryId}))}console.log(" Final table list:",be),B(be)}catch(J){console.error("Error loading tables:",J),O("Failed to load tables. Please try again."),B([])}finally{L(!1)}},ln=J=>{if(console.log(" Table selected:",J),console.log(" Table status:",J.status),console.log(" Setting selectedTable state..."),(J.status||"").toLowerCase()!=="available"){console.log(" Table is not available, automatically updating status..."),console.log(" Updating table status..."),ge(J._id,"available",!1).then(()=>ge(J._id,"reserved",!1)).then(()=>{const Te={...J,status:"reserved"};console.log(" Setting selectedTable to:",Te),F(Te),ne()}).catch(Te=>{console.error(" Failed to update table status:",Te)});return}console.log(" Table is available, marking as reserved and selecting..."),ge(J._id,"reserved",!1).then(()=>{const Te={...J,status:"reserved"};console.log(" Setting selectedTable to:",Te),F(Te),ne()}).catch(Te=>{console.error(" Failed to update table status:",Te)})},ne=()=>{const J=()=>{if(Lt.current)return Lt.current.focus(),!0;const be=document.querySelector('input[placeholder*="Search by name"]');return be?(be.focus(),!0):!1};setTimeout(()=>J(),50),setTimeout(()=>J(),200),setTimeout(()=>J(),500)},ge=async(J,be,Te=!0)=>{try{return console.log(` Updating table ${J} status to ${be}...`),await or.request(`/table/${J}`,{method:"PUT",body:JSON.stringify({status:be}),headers:{"Content-Type":"application/json"}}),console.log(" Table status updated successfully"),B(Ce=>Ce.map(Ke=>Ke._id===J?{...Ke,status:be}:Ke)),M&&M._id===J&&F(Ce=>({...Ce,status:be})),Te&&console.log(`Table status updated to ${be}`),!0}catch(Ce){throw console.error(" Error updating table status:",Ce),Te&&console.log("Failed to update table status. Please try again."),Ce}},he=()=>{const J=yt.trim();if(!J)return;console.log(" Looking for table:",J),console.log(" Available tables:",z.map(Te=>({id:Te._id,number:Te.number,tableNumber:Te.tableNumber})));const be=z.find(Te=>String(Te.number).toLowerCase()===J.toLowerCase()||String(Te.tableNumber).toLowerCase()===J.toLowerCase());console.log(" Found table:",be),be?(console.log(" Table selected - will create new KOT (each order gets unique KOT number)"),ln(be),Nt("")):console.log(` Table ${J} not found in this branch. Available tables: ${z.map(Te=>Te.number||Te.tableNumber).join(", ")}`)},pe=async J=>{try{console.log(` Debugging KOTs for table ${J}...`);const be=await or.request("/counter-order/orders?includeComplimentary=false");let Te=[];be&&be.success&&Array.isArray(be.orders)||be&&Array.isArray(be.orders)?Te=be.orders:be&&Array.isArray(be.data)?Te=be.data:Array.isArray(be)&&(Te=be);const Ce=Te.filter(Ke=>String(Ke.tableNumber).toLowerCase()===String(J).toLowerCase());return console.log(` Found ${Ce.length} KOTs for table ${J}:`),Ce.forEach((Ke,Xe)=>{console.log(` KOT ${Xe+1}:`,{id:Ke.id||Ke._id,kotNumber:Ke.kotNumber,paymentStatus:Ke.paymentStatus,items:Ke.items,customerName:Ke.customerName,createdAt:Ke.createdAt})}),Ce}catch(be){return console.error(" Error debugging table KOTs:",be),[]}};w.useEffect(()=>{typeof window<"u"&&(window.debugTableKOTs=pe,console.log(' Debug function added: window.debugTableKOTs("B1")'))},[]),w.useEffect(()=>{typeof window<"u"&&(window.refreshTables=()=>{console.log(" Global table refresh triggered"),Qt()},window.debugTableStatus=J=>{const be=z.find(Te=>Te.number===J||Te.tableNumber===J);be?console.log(" Table Status Debug:",{number:be.number||be.tableNumber,status:be.status,id:be._id||be.id,categoryName:be.categoryName}):console.log(` Table ${J} not found`)},window.debugAllOrders=async()=>{try{console.log(" DEBUG: Fetching all orders from database...");const J=await or.request("/counter-order/orders?includeComplimentary=false");let be=[];J&&J.success&&Array.isArray(J.orders)||J&&Array.isArray(J.orders)?be=J.orders:J&&Array.isArray(J.data)?be=J.data:Array.isArray(J)&&(be=J),console.log(" TOTAL ORDERS IN DATABASE:",be.length);const Te=["061","062","063","064","065","066","067","068"],Ce=be.filter(rt=>Te.includes(rt.invoiceNumber)||Te.includes(rt.billNumber));console.log(" ORDERS WITH BILL NUMBERS 061-068:",Ce.length),Ce.forEach((rt,Dt)=>{console.log(`Order ${Dt+1}:`,{id:rt.id||rt._id,invoiceNumber:rt.invoiceNumber,billNumber:rt.billNumber,categoryName:rt.categoryName,customerName:rt.customerName,status:rt.status,paymentStatus:rt.paymentStatus,createdAt:rt.createdAt,items:(rt.items||[]).map(zt=>zt.name)})});const Ke=new Date,Xe=be.filter(rt=>new Date(rt.createdAt||rt.orderTime||rt.date).toDateString()===Ke.toDateString());console.log(" ORDERS FROM TODAY:",Xe.length),console.log(" TODAY ORDERS SAMPLE:",Xe.slice(0,10).map(rt=>({id:rt.id||rt._id,invoiceNumber:rt.invoiceNumber,categoryName:rt.categoryName,status:rt.status,paymentStatus:rt.paymentStatus})))}catch(J){console.error(" Error fetching orders:",J)}},console.log(' Global functions added: window.refreshTables(), window.debugTableStatus("A1"), window.debugAllOrders()'))},[z,Qt]);const ye=()=>{if(!a.trim()||a==="000"||a===""){if(u.length>0)if(i&&i.toLowerCase().includes("restaurant")){const Ce=document.querySelectorAll("button"),Ke=Array.from(Ce).find(Xe=>Xe.textContent.includes("Save KOT"));Ke&&Ke.click()}else Na();return}const J=a.trim();if(g.length===1){const Te=g[0];mt(Te),_t("1"),wt(""),Re(!0),s("000");return}if(/^\d+$/.test(J)){const Te=j.find(Ce=>String(Ce.menuItemNumber)===J||String(Ce.number)===J);Te?(mt(Te),_t("1"),wt(""),Re(!0),s("000")):alert(`No menu item found with number: ${J}`)}else g.length===0?alert("No items found for your search"):g.length>1&&console.log(`${g.length} items found - refine your search or select from the list`)},ve=()=>{const J=parseInt(Tt);if(isNaN(J)||J<1){alert("Please enter a valid quantity");return}const be=i&&i.toLowerCase().includes("restaurant");if(u.find(Ce=>Ce._id===ot._id))h(u.map(Ce=>Ce._id===ot._id?{...Ce,quantity:Ce.quantity+J,...be&&st.trim()?{remark:st.trim()}:{}}:Ce));else{const Ce={...ot,quantity:J,...be&&st.trim()?{remark:st.trim()}:{}};h([...u,Ce])}Re(!1),mt(null),_t("1"),wt(""),s("000"),setTimeout(()=>{if(Lt.current)Lt.current.focus();else{const Ce=document.querySelector('input[placeholder*="Search by name"]');Ce&&Ce.focus()}},100)},Le=J=>{h(be=>{const Te=be.filter(Ce=>Ce._id!==J);return Te.length===0&&M&&(console.log(" All items removed, making table available:",M.number),ge(M._id,"available",!1).then(()=>{F(null),Nt(""),console.log(" Table made available after removing all items")}).catch(Ce=>{console.error(" Failed to update table status:",Ce)})),Te})},et=(J,be)=>{if(be<1){Le(J);return}h(Te=>Te.map(Ce=>Ce._id===J?{...Ce,quantity:be}:Ce))},Pe=J=>{if(console.log(" Starting to edit KOT:",J),!J||J.paymentStatus!=="pending"){console.log(" Cannot edit: KOT not found or not pending"),alert("Cannot edit this KOT. Only pending KOTs can be edited.");return}Be(J),Z(J.kotNumber);const be=(J.items||[]).map(Te=>({...Te,originalQuantity:Te.quantity,newQuantity:Te.quantity,isRemoved:!1,isChanged:!1}));re(be),console.log(" KOT editing started:",{kotNumber:J.kotNumber,tableNumber:J.tableNumber,itemCount:be.length})},Ue=async(J=!1)=>{if(!Ee){console.log(" No KOT being edited");return}try{console.log(" Saving KOT modifications:",{kotNumber:Ee.kotNumber,shouldPrint:J,modifiedItems:it.length});const be=it.filter(Xe=>Xe.isRemoved||Xe.newQuantity!==Xe.originalQuantity);if(be.length===0){console.log(" No changes to save"),alert("No changes to save.");return}const Te=it.filter(Xe=>!Xe.isRemoved&&Xe.newQuantity>0).map(Xe=>({menuItemId:Xe.menuItemId,name:Xe.name,quantity:Xe.newQuantity,price:Xe.price})),Ce=Te.reduce((Xe,rt)=>Xe+rt.price*rt.quantity,0),Ke={items:Te,subtotal:Ce,totalAmount:Ce,grandTotal:Ce};if(console.log(" Updating KOT in database:",Ke),await or.request(`/counter-order/orders/${Ee.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)}),J){console.log(" Printing KOT changes to kitchen");try{await ni.printKOTChanges({kotNumber:Ee.kotNumber,tableNumber:Ee.tableNumber,items:be}),console.log(" KOT changes printed successfully")}catch(Xe){console.error(" Failed to print KOT changes:",Xe)}}console.log(" KOT modifications saved successfully"),alert(`KOT ${Ee.kotNumber} updated successfully!${J?" Changes sent to kitchen.":""}`),Be(null),re([]),Z(null),xt()}catch(be){console.error(" Failed to save KOT modifications:",be),alert(`Failed to save changes: ${be.message}`)}},He=(J,be)=>{console.log(" Updating item quantity:",{itemIndex:J,newQuantity:be}),re(Te=>{const Ce=[...Te],Ke=Ce[J];return Ke?(Ce[J]={...Ke,newQuantity:Math.max(0,be),isRemoved:be<=0,isChanged:be!==Ke.originalQuantity},console.log(" Item quantity updated:",{name:Ke.name,originalQuantity:Ke.originalQuantity,newQuantity:Ce[J].newQuantity,isRemoved:Ce[J].isRemoved,isChanged:Ce[J].isChanged}),Ce):(console.log(" Item not found at index:",J),Te)})},ht=()=>{if(console.log(" Cancelling KOT edit"),Ee){if(it.some(be=>be.isRemoved||be.newQuantity!==be.originalQuantity)&&!confirm("You have unsaved changes. Are you sure you want to cancel editing?"))return;console.log(" KOT edit cancelled")}Be(null),re([]),Z(null)},xt=async(J=0,be=null)=>{oe(!0);try{const Te=be?new Date(be):new Date,Ce=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate(),0,0,0,0),Ke=new Date(Te.getFullYear(),Te.getMonth(),Te.getDate(),23,59,59,999);if(!Te||!Ce||!Ke)throw new Error("Date variables not properly initialized");console.log(" Filtering orders for date:",Te.toDateString()),console.log(" Date variables check:",{filterDate:Te,startOfDay:Ce,endOfDay:Ke}),console.log(" SALES REPORT DEBUG - Category info:",{preSelectedCategory:i,isTempleCategory:i&&i.toLowerCase().includes("temple"),selectedDate:be,isKOTLoad:!be});const Xe=localStorage.getItem("counterUserData"),rt=Xe?JSON.parse(Xe):null;(!rt||!rt._id)&&console.warn(" Counter user not found in localStorage, showing all KOTs");const Dt=await or.request("/counter-order/orders?includeComplimentary=false");let zt=[];Dt&&Dt.success&&Array.isArray(Dt.orders)||Dt&&Array.isArray(Dt.orders)?zt=Dt.orders:Dt&&Array.isArray(Dt.data)?zt=Dt.data:Array.isArray(Dt)?zt=Dt:zt=[],console.log(" SALES REPORT DEBUG - Orders loaded:",{totalOrdersFromAPI:zt.length,isTempleCategory:i&&i.toLowerCase().includes("temple")}),console.log(" FIRST 5 ORDERS FROM DATABASE:",zt.slice(0,5).map(K=>({id:K.id||K._id,invoiceNumber:K.invoiceNumber,billNumber:K.billNumber,categoryName:K.categoryName,customerName:K.customerName,status:K.status,paymentStatus:K.paymentStatus,createdAt:K.createdAt})));const br={};console.log(" KOT Loading Debug - Total orders from API:",zt.length),console.log(" KOT Loading Debug - First 3 orders:",zt.slice(0,3).map(K=>({id:K.id||K._id,kotNumber:K.kotNumber,tableNumber:K.tableNumber,paymentStatus:K.paymentStatus,status:K.status,categoryName:K.categoryName})));const tr=zt.filter(K=>{const Ot=K.paymentStatus==="pending"&&K.tableNumber&&K.tableId;return console.log(" KOT Filter Check:",{orderId:K.id||K._id,kotNumber:K.kotNumber,tableNumber:K.tableNumber,paymentStatus:K.paymentStatus,hasTableId:!!K.tableId,isKOT:Ot}),Ot});if(console.log(" KOT Loading Debug - Filtered KOT orders:",tr.length),console.log(" KOT Loading Debug - Filtered KOTs:",tr.map(K=>({id:K.id||K._id,kotNumber:K.kotNumber,tableNumber:K.tableNumber,paymentStatus:K.paymentStatus,items:(K.items||[]).length}))),be)console.log(" Skipping KOT modal update - loading sales report for date:",be);else{const K=tr.map(Ot=>{var bt;return{id:Ot.id||Ot._id,kotNumber:Ot.kotNumber||`KOT-${(bt=Ot.id||Ot._id)==null?void 0:bt.slice(-6)}`,tableNumber:Ot.tableNumber,tableId:Ot.tableId,customerName:Ot.customerName||"Walk-in Customer",items:Ot.items||[],totalAmount:Ot.totalAmount||Ot.grandTotal||0,createdAt:Ot.createdAt||Ot.kotTime,status:Ot.status,paymentStatus:Ot.paymentStatus}});console.log(" Setting processed KOTs for modal:",K),W(K)}i&&i.toLowerCase().includes("temple")&&(console.log(" CRITICAL DEBUG - ALL ORDERS FROM DATABASE:"),zt.forEach((K,Ot)=>{console.log(`Database Order ${Ot+1}:`,JSON.stringify({id:K.id||K._id,invoiceNumber:K.invoiceNumber,billNumber:K.billNumber,categoryName:K.categoryName,categoryId:K.categoryId,customerName:K.customerName,status:K.status,paymentStatus:K.paymentStatus,tableNumber:K.tableNumber,tableId:K.tableId,branchId:K.branchId,createdAt:K.createdAt,items:(K.items||[]).map(bt=>({name:bt.name,quantity:bt.quantity,price:bt.price}))}))}),console.log(` Total orders in database: ${zt.length}`));const Mt=zt.filter(K=>{var ha,Ja,Pa,wn;console.log(" SALES REPORT FILTERING DEBUG:",{preSelectedCategory:i,customerDataCategory:(ha=n==null?void 0:n.selectedCategory)==null?void 0:ha.name,orderBeingProcessed:{id:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,categoryName:K.categoryName,customerName:K.customerName,tableNumber:K.tableNumber,tableId:K.tableId}});const Ot=K.paymentStatus==="pending"&&K.tableNumber&&K.tableId;let bt=!0;if(i&&i!=="All"){const lr=i.toLowerCase();if(K.categoryName){const Xt=K.categoryName.toLowerCase();console.log(" Using saved category for filtering:",{orderCategoryName:Xt,selectedCategory:lr,orderId:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber}),lr.includes("temple")||lr.includes("meal")?(bt=(Xt.includes("temple")||Xt==="temple meals"||Xt==="temple meal")&&!Xt.includes("self service")&&!Xt.includes("darshini"),console.log(" Temple Meals Filter:",{orderId:K.id||K._id,orderCategoryName:Xt,selectedCategory:lr,isTempleMatch:Xt.includes("temple"),excludesSelfService:!Xt.includes("self service"),finalDecision:bt?"INCLUDE":"EXCLUDE"})):lr.includes("restaurant")?bt=Xt.includes("restaurant"):(lr.includes("darshini")||lr.includes("self service")||lr.includes("self-service"))&&(bt=(Xt==="self service"||Xt==="self-service"||Xt==="darshini"||Xt.includes("self service")||Xt.includes("self-service")||Xt.includes("darshini"))&&!Xt.includes("temple")&&!Xt.includes("restaurant"),console.log(" Self Service Filter (Database Category):",{orderId:K.id||K._id,orderCategoryName:Xt,selectedCategory:lr,isSelfServiceMatch:Xt.includes("self service")||Xt.includes("self-service")||Xt.includes("darshini"),excludesTemple:!Xt.includes("temple"),excludesRestaurant:!Xt.includes("restaurant"),finalDecision:bt?"INCLUDE":"EXCLUDE"}))}else{console.log(" No saved category - using fallback detection for order:",K.id||K._id);const Xt=(K.orderId||K.kotNumber||K.id||K._id||"").toLowerCase(),cn=(K.customerName||"").toLowerCase(),Ma=!!(K.tableNumber||K.tableId);if(lr.includes("temple")||lr.includes("meal")){const Ta=(K.items||[]).some(gn=>{const Qr=(gn.name||"").toLowerCase();return Qr.includes("kashaya")||Qr.includes("hot badam milk")||Qr.includes("badam milk")?!1:Qr.includes("holige")||Qr.includes("temple meal")||Qr.includes("temple meals")||Qr.includes("prasad")||Qr.includes("pooja")||/\d+\s*temple\s*meal/i.test(gn.name||"")||/temple\s*meal/i.test(gn.name||"")}),ys=(K.items||[]).every(gn=>{const Qr=(gn.name||"").toLowerCase();return Qr.includes("kashaya")||Qr.includes("hot badam milk")||Qr.includes("badam milk")}),pr=Xt.includes("temple")||Xt.includes("-tm-")||cn.includes("temple"),dn=Ma||!!(K.tableNumber||K.tableId),$n=!Ta&&(Xt.includes("counter")||Xt.includes("darshini")||Xt.includes("self service"));bt=(Ta||pr)&&!dn&&!$n&&!ys,console.log(" Temple Meals Fallback (ITEM-DRIVEN):",{orderId:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,customerName:K.customerName,hasActualTempleMealsItems:Ta,hasTempleMealsPatterns:pr,hasOnlyExcludedItems:ys,isRestaurantOrder:dn,isSelfServiceOrder:$n,items:(K.items||[]).map(gn=>({name:gn.name,lowerName:(gn.name||"").toLowerCase(),includesTempleMeals:(gn.name||"").toLowerCase().includes("temple meals"),includesTempleMeal:(gn.name||"").toLowerCase().includes("temple meal"),includesHolige:(gn.name||"").toLowerCase().includes("holige"),isKashaya:(gn.name||"").toLowerCase().includes("kashaya"),isBadamMilk:(gn.name||"").toLowerCase().includes("badam milk"),regexMatch:/\d+\s*temple\s*meal/i.test(gn.name||"")})),finalDecision:bt?"INCLUDE":"EXCLUDE"})}else if(lr.includes("restaurant")){const Ta=Xt.includes("temple")||cn.includes("temple")||(K.items||[]).some(ys=>{const pr=(ys.name||"").toLowerCase();return pr.includes("kashaya")||pr.includes("hot badam milk")||pr.includes("badam milk")?!1:pr.includes("temple meal")||pr.includes("temple meals")||pr.includes("prasad")||pr.includes("pooja")||pr.includes("holige")});bt=Ma&&!Ta}else if(lr.includes("darshini")||lr.includes("self service")||lr.includes("self-service")){const Ta=(K.items||[]).some(pr=>{const dn=(pr.name||"").toLowerCase();return dn.includes("kashaya")||dn.includes("hot badam milk")||dn.includes("badam milk")?!1:dn.includes("temple meal")||dn.includes("temple meals")||dn.includes("prasad")||dn.includes("pooja")||dn.includes("holige")}),ys=Ma||!!(K.tableNumber||K.tableId);bt=!Ta&&!ys,console.log(" Self Service Fallback (RESTRICTIVE):",{orderId:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,customerName:K.customerName,hasTable:Ma,hasActualTempleMealsItems:Ta,isRestaurantOrder:ys,hasTableNumber:!!K.tableNumber,hasTableId:!!K.tableId,itemCount:(K.items||[]).length,items:(K.items||[]).map(pr=>pr.name),finalDecision:bt?"INCLUDE":"EXCLUDE"})}}}let Zt=!0;if(i&&i!=="All"){const lr=i.toLowerCase();lr.includes("restaurant")?Zt=(K.status==="completed"||K.paymentStatus==="completed"||K.status==="paid"||K.paymentStatus==="paid"||K.status==="billed"||K.paymentStatus==="billed"||K.orderStatus==="completed"||K.orderStatus==="paid"||K.orderStatus==="billed")&&K.status!=="consolidated"&&K.paymentStatus!=="consolidated":lr.includes("darshini")||lr.includes("self service")||lr.includes("self-service")?(Zt=(K.status==="completed"||K.paymentStatus==="completed"||K.status==="paid"||K.paymentStatus==="paid"||K.status==="billed"||K.paymentStatus==="billed"||K.orderStatus==="completed"||K.orderStatus==="paid"||K.orderStatus==="billed"||K.status==="pending"||K.paymentStatus==="pending"||!K.status||!K.paymentStatus||!!(K.invoiceNumber||K.billNumber))&&K.status!=="cancelled"&&K.status!=="failed"&&K.paymentStatus!=="cancelled"&&K.paymentStatus!=="failed",console.log(" Self Service Completion Check:",{orderId:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,status:K.status,paymentStatus:K.paymentStatus,orderStatus:K.orderStatus,itemCount:(K.items||[]).length,isCompleted:Zt,reason:Zt?"INCLUDED":"EXCLUDED"})):lr.includes("temple")||lr.includes("meal")?(Zt=K.status!=="cancelled"&&K.paymentStatus!=="cancelled"&&K.status!=="failed"&&K.paymentStatus!=="failed",console.log(" Temple Meals Completion Check (Simplified):",JSON.stringify({orderId:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,status:K.status,paymentStatus:K.paymentStatus,isCompleted:Zt,reason:Zt?"INCLUDED":"EXCLUDED"}))):Zt=(K.status==="completed"||K.paymentStatus==="completed"||K.status==="paid"||K.paymentStatus==="paid"||K.status==="billed"||K.paymentStatus==="billed"||K.orderStatus==="completed"||K.orderStatus==="paid"||K.orderStatus==="billed")&&K.status!=="consolidated"&&K.paymentStatus!=="consolidated"}else Zt=(K.status==="completed"||K.paymentStatus==="completed"||K.status==="paid"||K.paymentStatus==="paid"||K.status==="billed"||K.paymentStatus==="billed"||K.orderStatus==="completed"||K.orderStatus==="paid"||K.orderStatus==="billed")&&K.status!=="consolidated"&&K.paymentStatus!=="consolidated";const _r=new Date(K.createdAt||K.orderTime||K.date),qr=_r>=Ce&&_r<=Ke,Ln=((Ja=K.branchId)==null?void 0:Ja._id)||K.branchId||((Pa=K.branch)==null?void 0:Pa.id)||((wn=K.branch)==null?void 0:wn._id)||K.branch,jn=Ln===n.selectedBranch._id;if(i&&i.toLowerCase().includes("temple")&&console.log(" Date Filtering Debug:",JSON.stringify({orderId:K.id||K._id,invoiceNumber:K.invoiceNumber,orderDate:_r.toISOString(),startOfDay:Ce.toISOString(),endOfDay:Ke.toISOString(),isInDateRange:qr,orderBranchId:Ln,selectedBranchId:n.selectedBranch._id,isSameBranch:jn})),console.log(" Branch ID Debug (Simplified):",JSON.stringify({orderId:K.id||K._id,invoiceNumber:K.invoiceNumber,billNumber:K.billNumber,categoryName:K.categoryName,customerName:K.customerName,isInDateRange:qr,isSameBranch:jn,isSameCategory:bt,isCompleted:Zt,finalResult:qr&&jn&&bt&&Zt})),(K.invoiceNumber==="012"||K.invoiceNumber==="011"||K.billNumber==="012"||K.billNumber==="011")&&console.log(" TEMPLE MEALS ORDER FILTERING RESULT:",{orderId:K.id||K._id,isInDateRange:qr,isSameBranch:jn,isSameCategory:bt,isCompleted:Zt,finalResult:qr&&jn&&bt&&Zt}),i&&i.toLowerCase().includes("temple")){const lr=(K.categoryName||"").toLowerCase();if(lr.includes("self service")||lr==="self service"||lr.includes("darshini")||lr==="darshini")return console.log(" SAFETY CHECK: Blocking Self Service order from Temple Meals report:",{orderId:K.id||K._id,orderCategoryName:lr,invoiceNumber:K.invoiceNumber,reason:"Self Service order detected in Temple Meals filter"}),!1}return qr&&jn&&bt&&Zt});console.log(" Filtered orders count:",Mt.length),i&&i.toLowerCase().includes("temple")&&(console.log(" FINAL FILTERED ORDERS FOR TEMPLE MEALS:"),Mt.forEach((K,Ot)=>{console.log(`Final Order ${Ot+1}:`,JSON.stringify({id:K.id||K._id,invoiceNumber:K.invoiceNumber,categoryName:K.categoryName,customerName:K.customerName,status:K.status,paymentStatus:K.paymentStatus,totalAmount:K.totalAmount,createdAt:K.createdAt}))})),i&&i.toLowerCase().includes("self service")&&(console.log(" SELF SERVICE FILTERING ANALYSIS:"),console.log("  Total orders before filtering:",zt.length),console.log("  Orders after filtering:",Mt.length),zt.forEach((K,Ot)=>{var Qn,ha,Ja;const bt=new Date(K.createdAt||K.orderTime||K.date),Zt=bt>=Ce&&bt<=Ke,qr=(((Qn=K.branchId)==null?void 0:Qn._id)||K.branchId||((ha=K.branch)==null?void 0:ha.id)||((Ja=K.branch)==null?void 0:Ja._id)||K.branch)===n.selectedBranch._id;let Ln="NO MATCH";if(K.categoryName){const Pa=K.categoryName.toLowerCase();(Pa.includes("self service")||Pa.includes("darshini"))&&(Ln="SAVED CATEGORY MATCH")}else!K.tableNumber&&!K.tableId&&(Ln="FALLBACK MATCH (no table)");const jn=Mt.some(Pa=>(Pa.id||Pa._id)===(K.id||K._id));console.log(`    Order ${Ot+1} (${K.invoiceNumber||K.billNumber}):`),console.log(`      - Category: ${K.categoryName||"NOT SET"}`),console.log(`      - Date match: ${Zt}`),console.log(`      - Branch match: ${qr}`),console.log(`      - Category match: ${Ln}`),console.log(`      - Table: ${K.tableNumber||"None"}`),console.log(`      - Status: ${K.status}/${K.paymentStatus}`),console.log(`      - INCLUDED: ${jn}`)}),console.log(" Self Service orders found:",Mt.map(K=>({id:K.id||K._id,bill:K.invoiceNumber||K.billNumber,category:K.categoryName,customer:K.customerName,amount:K.totalAmount})))),console.log(" TEMPLE MEALS DEBUG - Filtering summary:",{totalOrders:zt.length,selectedCategory:i,filteredCount:Mt.length,templeMealsOrders:Mt.filter(K=>{const Ot=(K.categoryName||"").toLowerCase(),bt=(K.orderId||K.kotNumber||K.id||K._id||"").toLowerCase(),Zt=(K.customerName||"").toLowerCase();return Ot.includes("temple")||bt.includes("temple")||Zt.includes("temple")||K.invoiceNumber&&/^0(1[1-9]|20)$/.test(K.invoiceNumber)||/\[0(1[1-9]|20)\]/.test(K.customerName||"")}).length,ordersWithCategoryName:Mt.filter(K=>K.categoryName).length,ordersWithoutCategoryName:Mt.filter(K=>!K.categoryName).length}),i&&i.toLowerCase().includes("temple")&&(console.log(" TEMPLE MEALS ORDERS FOUND:"),Mt.forEach((K,Ot)=>{console.log(`  Temple Order ${Ot+1}:`,{id:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,categoryName:K.categoryName,customerName:K.customerName,totalAmount:K.totalAmount,status:K.status,paymentStatus:K.paymentStatus,items:(K.items||[]).map(bt=>bt.name)})}),console.log(` Total Temple Meals orders in sales report: ${Mt.length}`),console.log(" ALL ORDERS PROCESSED FOR TEMPLE MEALS (first 10):"),zt.slice(0,10).forEach((K,Ot)=>{console.log(`  All Order ${Ot+1}:`,{id:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,categoryName:K.categoryName,customerName:K.customerName,status:K.status,paymentStatus:K.paymentStatus,hasTempleInvoice:K.invoiceNumber&&(/^0(1[1-9]|20)$/.test(K.invoiceNumber)||/^0(6[1-9]|70)$/.test(K.invoiceNumber)),hasTempleCustomer:/\[0(1[1-9]|20)\]/.test(K.customerName||"")||/\[0(6[1-9]|70)\]/.test(K.customerName||""),noTable:!K.tableNumber&&!K.tableId,items:(K.items||[]).map(bt=>bt.name)})})),console.log(" Sample filtered orders with category info:",Mt.slice(0,3).map(K=>({id:K.id||K._id,invoiceNumber:K.invoiceNumber,categoryName:K.categoryName,categoryId:K.categoryId,branchName:K.branchName,customerName:K.customerName,totalAmount:K.totalAmount,status:K.status,paymentStatus:K.paymentStatus,createdAt:K.createdAt}))),console.log(" Filtered orders:",Mt);const sr=[],jr={};Mt.forEach(K=>{const Ot=K.invoiceNumber||K.billNumber;Ot?(jr[Ot]||(jr[Ot]=[]),jr[Ot].push(K)):sr.push(K)}),Object.entries(jr).forEach(([K,Ot])=>{if(Ot.length===1)sr.push(Ot[0]),console.log(" Single order for bill:",K,"Amount:",Ot[0].totalAmount);else{console.log(" Multiple orders for bill:",K,"Count:",Ot.length);const Zt=Ot.sort((_r,qr)=>{const Ln=new Date(_r.createdAt||_r.orderTime||0),jn=new Date(qr.createdAt||qr.orderTime||0),Qn=_r.discountAmount&&_r.discountAmount>0||_r.isComprehensiveBill,ha=qr.discountAmount&&qr.discountAmount>0||qr.isComprehensiveBill;return Qn&&!ha?-1:!Qn&&ha?1:jn-Ln})[0];sr.push(Zt),console.log(" Selected order for bill:",K,{selectedAmount:Zt.totalAmount,selectedDiscount:Zt.discountAmount,selectedTime:Zt.createdAt,allAmounts:Ot.map(_r=>({amount:_r.totalAmount,discount:_r.discountAmount,time:_r.createdAt,id:_r.id||_r._id}))})}}),console.log(" After deduplication:",{originalCount:Mt.length,deduplicatedCount:sr.length,billNumbers:Object.keys(jr)});const Fn=sr;console.log(" Filtering Debug - showing first 5 orders:"),zt.slice(0,5).forEach((K,Ot)=>{var ha,Ja,Pa,wn,lr;const bt=new Date(K.createdAt||K.orderTime||K.date),Zt=bt>=Ce&&bt<=Ke,_r=((ha=K.branchId)==null?void 0:ha._id)||K.branchId||((Ja=K.branch)==null?void 0:Ja.id)||((Pa=K.branch)==null?void 0:Pa._id)||K.branch,qr=n.selectedBranch._id,Ln=_r===qr;let jn=!0;i&&i!=="All"&&(i.toLowerCase().includes("restaurant")?jn=(K.status==="completed"||K.paymentStatus==="completed"||K.status==="paid"||K.paymentStatus==="paid"||K.status==="billed"||K.paymentStatus==="billed"||K.orderStatus==="completed"||K.orderStatus==="paid"||K.orderStatus==="billed")&&K.status!=="consolidated"&&K.paymentStatus!=="consolidated":jn=!0);let Qn=!0;if(i&&i!=="All"){const Xt=i.toLowerCase(),cn=(K.orderId||K.kotNumber||K.id||K._id||"").toLowerCase(),Ma=(K.customerName||"").toLowerCase(),Ta=(K.branchName||((wn=K.branchId)==null?void 0:wn.name)||((lr=K.branch)==null?void 0:lr.name)||"").toLowerCase(),ys=(K.items||[]).map(pr=>(pr.name||"").toLowerCase()).join(" ");if(Xt.includes("temple")||Xt.includes("meal"))if(K.categoryName){const pr=K.categoryName.toLowerCase();Qn=(pr.includes("temple")||pr==="temple meals"||pr==="temple meal")&&!pr.includes("self service")&&!pr.includes("darshini")}else{const pr=(K.items||[]).some(fa=>{const pa=(fa.name||"").toLowerCase();return pa.includes("kashaya")||pa.includes("hot badam milk")||pa.includes("badam milk")?!1:pa.includes("holige")||pa.includes("temple meal")||pa.includes("temple meals")||pa.includes("prasad")||pa.includes("pooja")||/\d+\s*temple\s*meal/i.test(fa.name||"")||/temple\s*meal/i.test(fa.name||"")}),dn=(K.items||[]).every(fa=>{const pa=(fa.name||"").toLowerCase();return pa.includes("kashaya")||pa.includes("hot badam milk")||pa.includes("badam milk")}),$n=cn.includes("temple")||cn.includes("-tm-")||Ma.includes("temple"),gn=!!(K.tableNumber&&K.tableId),Qr=!pr&&(cn.includes("counter")||cn.includes("darshini")||cn.includes("self service"));Qn=(pr||$n)&&!gn&&!Qr&&!dn,console.log(" Temple Meals Item-Driven Filter:",{orderId:K.id||K._id,invoiceNumber:K.invoiceNumber||K.billNumber,customerName:K.customerName,hasActualTempleMealsItems:pr,hasTempleMealsPatterns:$n,hasOnlyExcludedItems:dn,isRestaurant:gn,isSelfService:Qr,items:(K.items||[]).map(fa=>({name:fa.name,lowerName:(fa.name||"").toLowerCase(),includesTempleMeals:(fa.name||"").toLowerCase().includes("temple meals"),includesTempleMeal:(fa.name||"").toLowerCase().includes("temple meal"),includesHolige:(fa.name||"").toLowerCase().includes("holige"),isKashaya:(fa.name||"").toLowerCase().includes("kashaya"),isBadamMilk:(fa.name||"").toLowerCase().includes("badam milk"),regexMatch:/\d+\s*temple\s*meal/i.test(fa.name||"")})),willInclude:Qn})}else if(Xt.includes("restaurant"))Qn=!(cn.includes("temple")||cn.includes("-tm-")||Ma.includes("temple")||Ta.includes("temple")||(K.items||[]).some(dn=>{const $n=(dn.name||"").toLowerCase();return $n.includes("kashaya")||$n.includes("hot badam milk")||$n.includes("badam milk")?!1:$n.includes("temple meal")||$n.includes("temple meals")||$n.includes("prasad")||$n.includes("pooja")||$n.includes("holige")}))&&K.tableNumber&&K.tableId;else if(Xt.includes("darshini")||Xt.includes("self service")||Xt.includes("self-service")){const pr=cn.includes("temple")||cn.includes("-tm-")||Ma.includes("temple")||Ta.includes("temple")||(K.items||[]).some(gn=>{const Qr=(gn.name||"").toLowerCase();return Qr.includes("kashaya")||Qr.includes("hot badam milk")||Qr.includes("badam milk")?!1:Qr.includes("temple meal")||Qr.includes("temple meals")||Qr.includes("prasad")||Qr.includes("pooja")||Qr.includes("holige")}),dn=K.tableNumber&&K.tableId||K.tableNumber||K.tableId||cn.includes("-res-")||cn.includes("table")||Ma.includes("table");Qn=Ma.includes("walk-in")||Ma.includes("[undefined]")||Ma.includes("[pending]")||cn.includes("counter")||cn.includes("darshini")||cn.includes("self service")||!pr&&!dn&&!K.tableNumber&&!K.tableId}}console.log(` Order ${Ot+1}:`,{id:K.id||K._id,orderDate:bt.toISOString(),dateForComparison:bt.toDateString(),selectedDate:Te.toDateString(),isInDateRange:Zt,orderBranchId:_r,selectedBranchId:qr,isSameBranch:Ln,status:K.status,paymentStatus:K.paymentStatus,orderStatus:K.orderStatus,isCompleted:jn,categoryName:i,isSameCategory:Qn,tableNumber:K.tableNumber,tableId:K.tableId,shouldInclude:Zt&&Ln&&jn&&Qn,items:(K.items||[]).map(Xt=>Xt.name)})});const Ra=Fn.length,Ai=Fn.reduce((K,Ot)=>K+(Ot.totalAmount||Ot.grandTotal||0),0),nu=Fn.reduce((K,Ot)=>K+(Ot.items||[]).reduce((bt,Zt)=>bt+(Zt.quantity||1),0),0),mo=Fn.reduce((K,Ot)=>K+(Ot.discountAmount||0),0),gs={};Fn.forEach(K=>{const bt=`${new Date(K.createdAt||K.orderTime).getHours()}:00`;gs[bt]||(gs[bt]={orders:0,revenue:0}),gs[bt].orders+=1,gs[bt].revenue+=K.totalAmount||K.grandTotal||0});const xo={date:Te.toISOString().split("T")[0],category:i||"All Categories",branch:n.selectedBranch.name,summary:{totalOrders:Ra,totalRevenue:Ai,totalItems:nu,totalDiscount:mo,averageOrderValue:Ra>0?Ai/Ra:0},hourlySales:Object.entries(gs).sort((K,Ot)=>parseInt(K[0])-parseInt(Ot[0])).map(([K,Ot])=>({hour:K,...Ot})),orders:Fn.sort((K,Ot)=>{const bt=new Date(K.createdAt||K.orderTime||0);return new Date(Ot.createdAt||Ot.orderTime||0)-bt}).map(K=>{console.log(" Order fields available:",{id:K.id||K._id,invoiceNumber:K.invoiceNumber,billNumber:K.billNumber,kotNumber:K.kotNumber,orderId:K.orderId,orderNumber:K.orderNumber,paymentStatus:K.paymentStatus,status:K.status,customerName:K.customerName,tableNumber:K.tableNumber,totalAmount:K.totalAmount,allFields:Object.keys(K)});const Ot=!K.tableNumber&&K.paymentStatus==="completed";Ot&&console.log(" Self Service order detected:",{id:K.id||K._id,invoiceNumber:K.invoiceNumber,billNumber:K.billNumber,hasInvoiceNumber:!!K.invoiceNumber,hasBillNumber:!!K.billNumber,willUseFallback:!K.invoiceNumber&&!K.billNumber});let bt;if(K.invoiceNumber&&!K.invoiceNumber.includes("ObjectId")&&K.invoiceNumber.length<=20)bt=K.invoiceNumber,console.log(" Using invoiceNumber:",bt);else if(K.billNumber&&!K.billNumber.includes("ObjectId")&&K.billNumber.length<=20)bt=K.billNumber,console.log(" Using billNumber:",bt);else if(K.customerName&&K.customerName.includes("[BILL-")&&K.customerName.includes("]")){const Zt=K.customerName.match(/\[(BILL-\d+)\]/);Zt?(bt=Zt[1],console.log(" WORKAROUND SUCCESS: Extracted bill number from customerName:",bt,"from:",K.customerName)):console.log(" WORKAROUND FAILED: Could not extract bill number from:",K.customerName)}else K.kotNumber?(bt=K.kotNumber,console.log(" Using kotNumber:",bt)):(bt=K.orderId||K.orderNumber||K.id||K._id,console.log(" Using fallback:",bt,"Available fields:",{invoiceNumber:K.invoiceNumber,billNumber:K.billNumber,kotNumber:K.kotNumber,orderId:K.orderId,orderNumber:K.orderNumber,id:K.id,_id:K._id,customerName:K.customerName}));return(!bt||bt.includes("ObjectId")||bt.length>20)&&(Ot?(bt=`BILL-${(K.id||K._id||Date.now()).toString().slice(-6).slice(-3)}`,console.log(" Generated BILL number for Self Service:",bt)):(bt=`ORDER-${(K.id||K._id||Date.now()).toString().slice(-6)}`,console.log(" Generated ORDER number for restaurant:",bt))),bt&&bt.startsWith("KOT-")&&K.paymentStatus==="completed"&&(bt=`BILL-${bt.replace("KOT-","")}`,console.log(" Converted KOT to BILL format:",bt)),Ot&&bt&&bt.startsWith("ORDER-")&&(bt=`BILL-${bt.replace("ORDER-","")}`,console.log(" Final conversion: ORDER to BILL for Self Service:",bt)),{id:K.id||K._id,orderNumber:bt,invoiceNumber:K.invoiceNumber||K.billNumber||null,time:new Date(K.createdAt||K.orderTime).toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),customerName:K.customerName||"Walk-in Customer",tableNumber:K.tableNumber||null,items:K.items||[],originalTotalAmount:K.totalAmount||K.grandTotal||0,discountAmount:K.discountAmount||0,totalAmount:(()=>{const Zt=K.totalAmount||K.grandTotal||0,_r=K.discountAmount||0,qr=K.subtotal||0;console.log(" Order amount debug for",bt,":",{orderId:K.id||K._id,dbTotalAmount:Zt,dbDiscountAmount:_r,dbSubtotal:qr,orderFields:{totalAmount:K.totalAmount,grandTotal:K.grandTotal,discountAmount:K.discountAmount,subtotal:K.subtotal},isBill005:bt==="BILL-005",rawOrderData:bt==="BILL-005"?K:"not BILL-005"});const Ln=Zt;return console.log(" Using totalAmount directly (already discounted):",Ln),Ln})(),paymentMethod:K.paymentMethod||"cash"}})};console.log(" Sales report loaded:",xo),console.log(" Sample order with amounts:",xo.orders[0]),console.log(" All order amounts:",xo.orders.map(K=>({orderNumber:K.orderNumber,totalAmount:K.totalAmount,discountAmount:K.discountAmount,originalTotalAmount:K.originalTotalAmount})));const ic=xo.orders.filter(K=>K.discountAmount>0);console.log(" Orders with discounts:",ic.length,ic),Ae(xo)}catch(Te){console.error(" Error loading sales report:",Te),alert("Failed to load sales report. Please try again."),Ae(null)}finally{oe(!1),pt(!1)}},At=async(J=null)=>{try{pt(!0),console.log(" Loading sales report for date:",J||"today"),console.log(" SALES REPORT DEBUG - Current category context:",{preSelectedCategory:i,customerDataCategory:n==null?void 0:n.selectedCategory,isTempleCategory:i&&i.toLowerCase().includes("temple")}),await xt(0,J),setTimeout(async()=>{console.log(" Auto-refreshing sales report to pick up new orders...");try{await xt(0,J)}catch(be){console.error(" Error in auto-refresh:",be)}},2e3)}catch(be){console.error(" Error loading sales report:",be),alert("Failed to load sales report. Please try again."),Ae(null)}finally{pt(!1)}},gt=async()=>{var J;me(!0);try{console.log(" Loading complimentary bills for today...");const be=new Date().toISOString().split("T")[0],Te=localStorage.getItem("selectedBranch");if(!Te)throw new Error("No branch selected");const Ke=JSON.parse(Te)._id,Xe=await or.getComplimentaryStats(Ke,be,be);if(console.log(" Complimentary stats response:",Xe),Xe&&Xe.dailyStats&&Xe.dailyStats.length>0){const rt=Xe.dailyStats[0];Q(rt.bills||[]),console.log(" Loaded complimentary bills:",((J=rt.bills)==null?void 0:J.length)||0)}else{const rt=await or.request("/counter-order/orders?includeComplimentary=true");let Dt=[];rt.success&&Array.isArray(rt.orders)||Array.isArray(rt.orders)?Dt=rt.orders:Array.isArray(rt.data)?Dt=rt.data:Array.isArray(rt)&&(Dt=rt);const br=Dt.filter(tr=>tr.isComplimentary?new Date(tr.createdAt).toISOString().split("T")[0]===be:!1).map(tr=>({billId:tr.id,orderId:tr.id,customerName:tr.customerName,amount:tr.grandTotal||tr.totalAmount,reason:tr.complimentaryReason,time:new Date(tr.createdAt).toLocaleTimeString(),invoiceNumber:tr.invoiceNumber||"N/A"}));Q(br),console.log(" Loaded complimentary orders directly:",br.length)}}catch(be){console.error(" Error loading complimentary bills:",be),Q([])}finally{me(!1)}},Ct=async()=>{if(!se||!we){alert("Please select a table to shift to.");return}try{const J=se.isTableShift&&se.allTableKOTs,be=J?se.allTableKOTs:[se];console.log(" Executing table shift:",{isTableShift:J,kotCount:be.length,fromTable:se.tableNumber,toTable:we.number,kotNumbers:be.map(Xe=>Xe.kotNumber)});const Te={tableId:we._id||we.id,tableNumber:we.number};for(const Xe of be)await or.request(`/counter-order/orders/${Xe.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)}),console.log(` Shifted KOT ${Xe.kotNumber} to Table ${we.number}`);const Ce=z.find(Xe=>Xe.number===se.tableNumber),Ke=(Ce==null?void 0:Ce._id)||(Ce==null?void 0:Ce.id);console.log(" Table IDs:",{oldTableNumber:se.tableNumber,oldTableId:Ke,newTableNumber:we.number,newTableId:we._id||we.id}),Ke?(await or.request(`/table/${Ke}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Old table status updated to available")):console.warn(" Could not find old table ID, skipping old table status update"),await or.request(`/table/${we._id||we.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"occupied"})}),console.log(" New table status updated to occupied"),console.log(" Table shift completed successfully"),ee(!1),fe(null),Me(null),await xt(),await Qt(),alert(J?` Successfully shifted entire Table ${se.tableNumber} (${be.length} KOTs) to Table ${we.number}`:` Successfully shifted KOT ${se.kotNumber} from Table ${se.tableNumber} to Table ${we.number}`)}catch(J){console.error(" Error executing table shift:",J),alert("Failed to shift table. Please try again.")}};w.useEffect(()=>{Yt()},[a,l,j]),w.useEffect(()=>{if(P){const J=()=>{if(Ut.current)return Ut.current.focus(),Ut.current.select(),console.log("  Auto-focused on KOT search bar via ref"),!0;const be=document.querySelector("#kot-search-input")||document.querySelector('input[placeholder*="Search by table number"]')||document.querySelector('input[placeholder*="Search by table"]')||document.querySelector(".kot-search-input");return be?(be.focus(),be.select(),console.log("  Auto-focused on KOT search bar via selector"),!0):(console.log("  Search input not found, retrying..."),!1)};requestAnimationFrame(()=>J()),setTimeout(()=>J(),10),setTimeout(()=>J(),50),setTimeout(()=>J(),100),setTimeout(()=>J(),200)}},[P]),w.useEffect(()=>{P&&Ut.current&&requestAnimationFrame(()=>{Ut.current&&(Ut.current.focus(),Ut.current.select(),console.log("  KOT search input focused via ref effect with requestAnimationFrame"))})},[P]),w.useEffect(()=>{const J=be=>{if(console.log(" Global key pressed:",be.key,"showKOTList:",P,"savedKOTs.length:",R.length),be.altKey&&be.key.toLowerCase()==="k"||be.ctrlKey&&be.key.toLowerCase()==="k"){if(be.preventDefault(),P){console.log(" Alt+K/Ctrl+K pressed: Closing KOT list..."),_(!1),te(0);const Te=()=>{if(Lt.current)return Lt.current.focus(),Lt.current.select(),console.log("  Alt+K: Focused on main search bar after closing KOT list via ref"),!0;{const Ce=document.querySelector('input[placeholder*="Search by name"]');if(Ce)return Ce.focus(),Ce.select(),console.log("  Alt+K: Focused on main search bar via selector after closing KOT list"),!0}return!1};setTimeout(()=>Te(),50),setTimeout(()=>Te(),150),setTimeout(()=>Te(),300)}else{console.log(" Alt+K/Ctrl+K pressed: Loading saved KOTs..."),xt(),_(!0),te(0),Ve("");const Te=()=>{if(Ut.current)return Ut.current.focus(),Ut.current.select(),console.log("  Alt+K: Auto-focused on KOT search bar via ref"),!0;const Ce=document.querySelector("#kot-search-input")||document.querySelector('input[placeholder*="Search by table number"]')||document.querySelector('input[placeholder*="Search by table"]')||document.querySelector(".kot-search-input");return Ce?(Ce.focus(),Ce.select(),console.log("  Alt+K: Auto-focused on KOT search bar via selector"),!0):(console.log("  Alt+K: Search input not found, retrying..."),!1)};requestAnimationFrame(()=>Te()),setTimeout(()=>Te(),10),setTimeout(()=>Te(),50),setTimeout(()=>Te(),100),setTimeout(()=>Te(),200)}return}if(be.altKey&&be.key.toLowerCase()==="c"){be.preventDefault(),U?(console.log(" Alt+C pressed: Closing complimentary list..."),X(!1)):(console.log(" Alt+C pressed: Loading complimentary bills..."),gt(),X(!0));return}if(P&&R.length>0){const Te=document.activeElement;if(!(Te&&Te.getAttribute("tabindex")==="0")){if(console.log(" Modal not focused, handling navigation globally..."),Te&&(Te.tagName==="INPUT"||Te.tagName==="TEXTAREA")){console.log(" Ignoring key press - user is typing in input field");return}if(be.key==="ArrowDown"||be.key==="ArrowUp"){const Ke=document.querySelector('[tabindex="0"]');Ke&&(Ke.focus(),console.log(" Focused modal for navigation"))}}}};return console.log(" Adding global keyboard event listener, showKOTList:",P),window.addEventListener("keydown",J),()=>{console.log(" Removing global keyboard event listener"),window.removeEventListener("keydown",J)}},[P,U,R,de,n,e]),w.useEffect(()=>{const J=()=>{localStorage.getItem("refreshTablesAfterBill")==="true"&&(console.log(" Window focused: Refreshing tables after bill print..."),localStorage.removeItem("refreshTablesAfterBill"),Qt())};return window.addEventListener("focus",J),()=>{window.removeEventListener("focus",J)}},[]),w.useEffect(()=>{P&&(console.log(" KOT list opened, skipping modal focus to prioritize search input..."),setTimeout(()=>{R.length>0&&xe(0)},100))},[P,R.length]);const Yt=()=>{let J=[...j];if(i&&i!=="All"?(J=J.filter(be=>{var Xe,rt,Dt,zt;const Ce=(((Xe=be.categoryId)==null?void 0:Xe.name)||((rt=be.categoryId)==null?void 0:rt.categoryName)||((Dt=be.category)==null?void 0:Dt.name)||((zt=be.category)==null?void 0:zt.categoryName)||"").toLowerCase(),Ke=i.toLowerCase();return Ce===Ke||Ce.includes(Ke)||Ke.includes(Ce)}),J.length===0&&(J=[...j])):l!=="All"&&(J=J.filter(be=>{var Xe,rt,Dt,zt;const Ce=(((Xe=be.categoryId)==null?void 0:Xe.name)||((rt=be.categoryId)==null?void 0:rt.categoryName)||((Dt=be.category)==null?void 0:Dt.name)||((zt=be.category)==null?void 0:zt.categoryName)||"").toLowerCase(),Ke=l.toLowerCase();return Ce===Ke||Ce.includes(Ke)||Ke.includes(Ce)})),a.trim()&&a!=="000"&&a!==""){const be=a.toLowerCase().trim();J=J.filter(Te=>{const Ce=(Te.name||"").toLowerCase(),Ke=(Te.description||"").toLowerCase(),Xe=Ce.includes(be)||Ke.includes(be),rt=Te.menuItemNumber||Te.number,Dt=rt&&String(rt)===be;return Xe||Dt})}b(J)},Or=J=>{const be=/^\d+$/.test(J);if(J==="")return"";if(be){const Te=J.replace(/^0+/,"")||"0";return Te.length>=3?Te:Te.padStart(3,"0")}else return J},kr=J=>{const be=Or(J);s(be)},Ur=J=>{J.key==="Enter"?ye():J.key==="Backspace"&&a==="000"&&(J.preventDefault(),s(""))},Ls=()=>{a===""&&s("000")},di=J=>{mt(J),_t("1"),wt(""),Re(!0)},Da=(J,be)=>{I(Te=>({...Te,[J]:be}))},Xa=(J,be)=>{$s(J,be),I(Te=>{const Ce={...Te};return delete Ce[J],Ce})},$s=(J,be)=>{let Te=parseInt(be);(isNaN(Te)||Te<0)&&(Te=0);const Ce=Math.max(0,Math.min(10,Te));if(h(Ke=>{const Xe=Ke.findIndex(rt=>rt._id===J);if(Ce===0){if(Xe>=0){const rt=[...Ke];return rt.splice(Xe,1),rt}return Ke}else if(Xe>=0){const rt=[...Ke];return rt[Xe]={...rt[Xe],quantity:Ce},rt}else{const rt=j.find(Dt=>Dt._id===J);return rt?[...Ke,{...rt,quantity:Ce}]:Ke}}),Te>10){const Ke=j.find(Xe=>Xe._id===J);C(`Maximum quantity (10) reached for ${(Ke==null?void 0:Ke.name)||"this item"}`),setTimeout(()=>C(null),3e3)}},Qa=J=>{const be=u.find(Te=>Te._id===J);return be?be.quantity:0},sl=()=>u.reduce((J,be)=>J+(be.price||0)*be.quantity,0),Na=async()=>{try{if(console.log(" Generate Bill clicked - starting process..."),u.length===0){alert("Please add items to the cart first");return}console.log(" NAVIGATION-BASED BILLING: Deferring bill number generation to BillGeneration page for Self Service"),console.log(" Self Service order preparing for bill generation");let J=null;console.log("  NAVIGATION-BASED: Deferring Self Service bill number generation to completion time"),console.log(" Navigating to bill generation with invoice number:",J),console.log(" CRITICAL DEBUG - Navigation state:",{customerData:n,selectedCategory:n==null?void 0:n.selectedCategory,preSelectedCategory:i,selectedTable:M,cartItems:u.length});let be=n==null?void 0:n.selectedCategory;(!be||!be.name)&&(i?(be={name:i,_id:null},console.log(" Using preSelectedCategory for bill generation:",be)):!M||!M.tableNumber&&!M.number?(be={name:"Self Service",_id:null},console.log(" Auto-detected Self Service category (no table):",be)):(be={name:"Restaurant",_id:null},console.log(" Auto-detected Restaurant category (has table):",be))),console.log(" Final category for bill generation:",be),e("/counter/bill-generation",{state:{...n,selectedCategory:be,selectedTable:M,cartItems:u,totalAmount:sl()}})}catch(J){console.error(" Error in handleGenerateBill:",J),alert(`Error generating bill: ${J.message}
Please try again.`)}};return n?y?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-loading",children:[r.jsx("div",{className:"counter-spinner"}),r.jsx("p",{children:"Loading menu..."})]})})}):E?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("h3",{children:"Error"}),r.jsx("p",{children:E}),r.jsx("button",{className:"counter-button",onClick:zr,children:"Retry"})]})})}):r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",style:{paddingBottom:u.length>0?"100px":"20px"},children:[r.jsxs("div",{className:"counter-header",style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"counter-title",style:{fontSize:"1.5rem",margin:0},children:[n.customerName,"'s Order"]}),r.jsxs("p",{className:"counter-subtitle",style:{margin:"4px 0 0 0"},children:[n.selectedBranch.name,"  ",n.invoiceNumber,"  ",n.date,"  ",n.time]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsx("button",{onClick:Xfe,style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"8px",padding:"10px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseOver:J=>J.target.style.background="#d97706",onMouseOut:J=>J.target.style.background="#f59e0b",title:`Switch from ${((Bf=n==null?void 0:n.selectedCategory)==null?void 0:Bf.name)||"current"} category`,children:" Switch Category"}),r.jsx("button",{onClick:()=>{ze(!0),At(Bt)},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"10px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseOver:J=>J.target.style.background="#2563eb",onMouseOut:J=>J.target.style.background="#3b82f6",title:"View today's sales report and history",children:" Sales Report"})]})]}),S&&r.jsxs("div",{style:{marginBottom:"16px",padding:"12px 16px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{children:""}),S]}),r.jsx("div",{style:{marginBottom:"20px"},children:r.jsx("input",{ref:Lt,type:"text",className:"counter-input",placeholder:" Search item number (e.g., 100) or name, then press Enter...",value:a,onChange:J=>kr(J.target.value),onKeyDown:Ur,onFocus:Ls})}),i&&r.jsx("div",{style:{marginBottom:"20px",padding:"12px 16px",backgroundColor:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"1.1rem"},children:""}),r.jsxs("span",{style:{fontWeight:"600",color:"#0369a1"},children:["Showing: ",l," Menu",M&&r.jsxs("span",{style:{marginLeft:"8px",color:"#f59e0b"},children:[" Table ",M.tableNumber||M.number]})]})]})}),i&&i.toLowerCase().includes("restaurant")&&r.jsxs("div",{style:{marginBottom:"20px",padding:"16px",backgroundColor:M?"#f0fdf4":"#fef3c7",border:`2px solid ${M?"#10b981":"#f59e0b"}`,borderRadius:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"1.2rem"},children:""}),r.jsx("span",{style:{fontWeight:"600",color:M?"#065f46":"#92400e"},children:M?`Table ${M.tableNumber||M.number} Selected (New KOT will be created)`:"Enter Table Number (Keyboard Only)"})]}),M&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"0.875rem",color:"#065f46",fontWeight:"500"},children:"Status:"}),r.jsxs("select",{value:M.status,onChange:J=>ge(M._id,J.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"2px solid #10b981",backgroundColor:"white",color:"#065f46",fontWeight:"600",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:[r.jsx("option",{value:"available",children:"Available"}),r.jsx("option",{value:"reserved",children:"Reserved"})]}),r.jsx("button",{onClick:()=>{F(null),Nt("")},style:{padding:"6px 12px",borderRadius:"6px",border:"2px solid #ef4444",backgroundColor:"white",color:"#dc2626",fontWeight:"600",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:"Change Table"})]})]}),!M&&r.jsx(r.Fragment,{children:N?r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:r.jsx("div",{style:{fontSize:"1rem",color:"#92400e"},children:"Loading tables..."})}):z.length===0?r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:r.jsx("div",{style:{fontSize:"0.875rem",color:"#dc2626"},children:"No available tables found. Please contact staff."})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px",fontSize:"1rem",color:"#1f2937",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"1.25rem"},children:""}),"Keyboard Workflow: Enter Table Number"]}),r.jsx("div",{style:{marginBottom:"16px"},children:r.jsx("input",{ref:Kt,type:"text",value:yt,onChange:J=>Nt(J.target.value),onKeyDown:J=>{J.key==="Enter"&&(J.preventDefault(),he())},placeholder:"Type table number (e.g., 4) and press Enter...",autoFocus:!0,style:{width:"100%",padding:"16px",fontSize:"1.5rem",border:"3px solid #f59e0b",borderRadius:"8px",textAlign:"center",fontWeight:"700",color:"#92400e",backgroundColor:"#fffbeb",outline:"none"}})}),r.jsxs("details",{style:{marginTop:"12px"},children:[r.jsx("summary",{style:{cursor:"pointer",fontSize:"0.875rem",color:"#6b7280",textAlign:"center",listStyle:"none",padding:"8px"},children:"Or click to select table"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",marginTop:"8px"},children:z.map(J=>{const be=J.status==="available"||J.status==="Available";return r.jsxs("button",{onClick:()=>ln(J),style:{background:be?"white":"#fee2e2",border:`2px solid ${be?"#10b981":"#ef4444"}`,borderRadius:"8px",padding:"16px 20px",minWidth:"80px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem",fontWeight:"600",color:be?"#065f46":"#991b1b",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",outline:"none",position:"relative"},onMouseEnter:Te=>{Te.target.style.transform="translateY(-2px)",Te.target.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:Te=>{Te.target.style.transform="translateY(0)",Te.target.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.05)"},children:[r.jsx("div",{children:J.number}),!be&&r.jsx("div",{style:{fontSize:"0.65rem",marginTop:"4px",color:"#dc2626",fontWeight:"500"},children:J.status.toUpperCase()})]},J._id)})})]})]})})]}),!i&&r.jsx("div",{style:{marginBottom:"20px"},children:r.jsx("div",{className:"counter-category-scroll",children:p.map(J=>r.jsx("button",{className:`counter-button ${l===J?"":"counter-button-secondary"}`,onClick:()=>d(J),style:{minWidth:"auto",padding:"8px 16px",fontSize:"0.875rem",whiteSpace:"nowrap"},children:J},J))})}),g.length===0?r.jsx("div",{className:"counter-error",children:r.jsx("p",{children:a?"No items found for your search":"No menu items available"})}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"12px",margin:"16px 0",maxHeight:"50vh",overflowY:"auto",paddingRight:"8px",width:"100%"},children:g.map(J=>{const be=Qa(J._id);return r.jsxs("div",{id:`counter-item-${J._id}`,style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"12px",padding:"14px",cursor:"pointer",transition:"all 0.3s ease",minHeight:"110px",maxHeight:"130px",display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100%"},children:[r.jsxs("div",{style:{display:"flex",gap:"12px",height:"65px"},children:[r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[r.jsxs("h3",{style:{margin:"0 0 3px 0",fontSize:"0.9rem",lineHeight:"1.2",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[J.menuItemNumber&&r.jsx("span",{style:{color:"#f59e0b",marginRight:"6px"},children:J.menuItemNumber}),J.name]}),r.jsxs("p",{style:{margin:"0 0 3px 0",color:"#718096",fontSize:"0.8rem",fontWeight:"600"},children:["",J.price.toFixed(2)]}),J.description&&r.jsx("p",{style:{margin:"0",color:"#4a5568",fontSize:"0.7rem",lineHeight:"1.2",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:J.description})]}),r.jsx("div",{style:{width:"55px",height:"55px",flexShrink:0},children:r.jsx("img",{src:$I(J.image)||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='55' height='55'%3E%3Crect fill='%23f3f4f6' width='55' height='55'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='9' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",alt:J.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",backgroundColor:"#f3f4f6"},onError:Te=>{const Ce=Jfe(J.image);Ce&&Te.target.src!==Ce?Te.target.src=Ce:(Te.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='55' height='55'%3E%3Crect fill='%23f3f4f6' width='55' height='55'/%3E%3Ctext fill='%239ca3af' font-family='sans-serif' font-size='9' x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle'%3ENo Image%3C/text%3E%3C/svg%3E",Te.target.onerror=null)}})})]}),r.jsx("div",{style:{marginTop:"8px"},children:be>0?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:()=>$s(J._id,be-1),style:{width:"26px",height:"26px",padding:"0",fontSize:"0.95rem",minHeight:"auto",border:"1px solid #667eea",borderRadius:"6px"},children:"-"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx("input",{type:"number",min:"0",max:"10",value:k[J._id]!==void 0?k[J._id]:be,onChange:Te=>Da(J._id,Te.target.value),onKeyDown:Te=>{Te.key==="Enter"&&Te.target.blur()},style:{width:"40px",height:"26px",textAlign:"center",border:"1px solid #e2e8f0",borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600",padding:"0 4px",outline:"none",transition:"border-color 0.2s ease"},onFocus:Te=>{Te.target.select(),Te.target.style.borderColor="#667eea"},onBlur:Te=>{Te.target.style.borderColor="#e2e8f0",Xa(J._id,Te.target.value)}}),be>=10&&r.jsx("span",{style:{fontSize:"0.6rem",color:"#e53e3e",fontWeight:"500",marginTop:"1px"},children:"MAX"})]}),r.jsx("button",{className:"counter-button",onClick:()=>$s(J._id,be+1),disabled:be>=10,style:{width:"26px",height:"26px",padding:"0",fontSize:"0.95rem",minHeight:"auto",borderRadius:"6px",opacity:be>=10?.5:1,cursor:be>=10?"not-allowed":"pointer"},title:be>=10?"Maximum quantity reached (10)":"Add one more",children:"+"})]}):r.jsx("button",{className:"counter-button",onClick:()=>di(J),style:{width:"100%",padding:"6px 12px",fontSize:"0.75rem",minHeight:"auto",borderRadius:"6px"},children:"ADD"})})]},J._id)})}),i&&i.toLowerCase().includes("restaurant")&&u.length>0&&r.jsxs("div",{style:{background:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"16px",margin:"16px 0",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"8px",borderBottom:"1px solid #e2e8f0"},children:[r.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1f2937",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[" Cart Items (",u.reduce((J,be)=>J+be.quantity,0),")"]}),r.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#059669"},children:["",sl().toFixed(2)]})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:u.map((J,be)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"#f8fafc",padding:"12px",borderRadius:"6px",border:"1px solid #e2e8f0"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1f2937",marginBottom:"2px"},children:J.name}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["",J.price," each",J.remark&&r.jsxs("span",{style:{marginLeft:"6px",fontStyle:"italic",color:"#3b82f6"},children:[" ",J.remark]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#ffffff",borderRadius:"6px",border:"1px solid #cbd5e1"},children:[r.jsx("button",{onClick:()=>et(J._id,J.quantity-1),style:{background:"transparent",border:"none",padding:"4px 8px",fontSize:"1rem",fontWeight:"600",color:J.quantity>1?"#ef4444":"#9ca3af",cursor:J.quantity>1?"pointer":"not-allowed",borderRadius:"4px 0 0 4px"},disabled:J.quantity<=1,children:""}),r.jsx("div",{style:{padding:"4px 12px",fontSize:"0.875rem",fontWeight:"600",color:"#1f2937",minWidth:"32px",textAlign:"center",background:"white",borderLeft:"1px solid #cbd5e1",borderRight:"1px solid #cbd5e1"},children:J.quantity}),r.jsx("button",{onClick:()=>et(J._id,J.quantity+1),style:{background:"transparent",border:"none",padding:"4px 8px",fontSize:"1rem",fontWeight:"600",color:"#10b981",cursor:"pointer",borderRadius:"0 4px 4px 0"},children:"+"})]}),r.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1f2937",minWidth:"60px",textAlign:"right"},children:["",(J.price*J.quantity).toFixed(2)]}),r.jsx("button",{onClick:()=>Le(J._id),style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"4px 8px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:Te=>{Te.target.style.background="#fee2e2",Te.target.style.borderColor="#fca5a5"},onMouseOut:Te=>{Te.target.style.background="#fef2f2",Te.target.style.borderColor="#fecaca"},title:`Remove ${J.name} from cart`,children:""})]})]},be))})]}),u.length>0&&r.jsxs("div",{className:"counter-cart-summary",style:{position:"fixed",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(10px)",padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:1e3,borderTop:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)"},children:[r.jsxs("div",{style:{color:"white"},children:[r.jsxs("div",{style:{fontSize:"0.875rem",opacity:.9},children:[u.reduce((J,be)=>J+be.quantity,0)," Items"]}),r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700"},children:["",sl().toFixed(2)]})]}),i&&i.toLowerCase().includes("restaurant")?r.jsx("button",{className:"counter-button",onClick:async()=>{var J;if(console.log(" Save KOT clicked - selectedTable:",M),console.log(" Save KOT clicked - cartItems:",u),console.log(" Save KOT clicked - customerData:",n),!M){console.log(" Please select a table first!"),alert("Please select a table first!");return}if(!u||u.length===0){console.log(" No items in cart!"),alert("Please add items to cart first!");return}try{const be=localStorage.getItem("counterUserData"),Te=be?JSON.parse(be):null;if(console.log(" Counter user data:",Te),!Te||!Te._id){alert("User session expired. Please login again.");return}console.log(" Saving KOT for table:",M),console.log(" Creating NEW KOT (each order gets unique KOT number)");const Ce=sl();console.log(" Calculated subtotal:",Ce),console.log(" Generating KOT number...");const Ke=await Qfe(n.selectedBranch._id);console.log(" Generated KOT number:",Ke),console.log(" RESTAURANT KOT - Bill number will be generated on completion, not during KOT creation");const Xe={userId:Te._id,customerName:n.customerName||"Walk-in Customer",phoneNumber:n.phoneNumber||"0000000000",branchId:n.selectedBranch._id,tableId:M._id||M.id,tableNumber:M.tableNumber||M.number,items:u.map(Dt=>({menuItemId:Dt._id||Dt.id,name:Dt.name,quantity:Dt.quantity,price:Dt.price,...Dt.remark?{remark:Dt.remark}:{}})),subtotal:Ce,tax:0,serviceCharge:0,totalAmount:Ce,grandTotal:Ce,paymentMethod:"cash",status:"pending",kotNumber:Ke,invoiceNumber:null,kotTime:new Date().toISOString(),categoryName:LI(n,i),branchName:((J=n==null?void 0:n.selectedBranch)==null?void 0:J.name)||"Unknown Branch"};console.log(" CRITICAL DEBUG - KOT being sent to API:",{kotOrder:Xe,categoryName:Xe.categoryName,customerData:n==null?void 0:n.selectedCategory,preSelectedCategory:i,storedCategory:jw(),getCategoryResult:LI(n,i)}),console.log(" Saving NEW KOT order:",Xe),console.log(" About to call counterApi.createOrder...");const rt=await or.createOrder(Xe);console.log(" NEW KOT saved to database:",rt),console.log(" Saved KOT response details:",{success:rt==null?void 0:rt.success,id:(rt==null?void 0:rt.id)||(rt==null?void 0:rt._id),kotNumber:rt==null?void 0:rt.kotNumber,invoiceNumber:rt==null?void 0:rt.invoiceNumber,status:rt==null?void 0:rt.status,paymentStatus:rt==null?void 0:rt.paymentStatus}),console.log(" Printing NEW KOT to kitchen:",u);try{await ni.printKOT({kotNumber:Ke,tableNumber:M.number||M.tableNumber,items:u}),console.log(" NEW KOT printed to kitchen successfully")}catch(Dt){console.error(" Failed to print KOT:",Dt)}console.log(` NEW KOT ${Ke} created! Table ${M.number} - ${u.length} items`),console.log(" RESTAURANT FIX: Bill number will be assigned when customer completes order"),alert(` New KOT created!

Table: ${M.number}
KOT: ${Ke}
Items: ${u.length}

Each KOT gets a unique number!`),h([]),F(null),Nt(""),V(null),Z(null),setTimeout(()=>{Kt.current&&(Kt.current.focus(),console.log(" Auto-focused on table input after creating new KOT"))},100)}catch(be){console.error(" Failed to save KOT:",be),console.error(" Error details:",be.message),alert(`Failed to save KOT: ${be.message}
Please try again.`)}},style:{background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",width:"auto",padding:"12px 24px",borderRadius:"8px",fontWeight:"600"},children:" Save KOT "}):r.jsx("button",{className:"counter-button",onClick:Na,style:{background:"rgba(34, 197, 94, 0.9)",border:"1px solid rgba(34, 197, 94, 1)",color:"white",width:"auto",padding:"12px 24px",borderRadius:"8px",fontWeight:"600",fontSize:"1rem"},children:" Generate Bill "})]}),P&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"700px",maxWidth:"900px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",outline:"none"},tabIndex:0,"data-kot-modal":"true",onKeyDown:async J=>{console.log(" Modal direct keydown:",J.key,"focusedKOTIndex:",de);const Te=(()=>{if(!Se.trim())return R;const Ce=Se.toLowerCase().trim();return R.filter(Ke=>String(Ke.tableNumber||"").toLowerCase().includes(Ce))})();if(J.key==="ArrowDown"&&(J.preventDefault(),console.log(" Direct ArrowDown - current:",de,"filtered total:",Te.length),te(Ce=>{const Ke=Ce<Te.length-1?Ce+1:0;return console.log(" Direct - Setting focusedKOTIndex to:",Ke),setTimeout(()=>xe(Ke),50),Ke})),J.key==="ArrowUp"&&(J.preventDefault(),console.log(" Direct ArrowUp - current:",de,"filtered total:",Te.length),te(Ce=>{const Ke=Ce>0?Ce-1:Te.length-1;return console.log(" Direct - Setting focusedKOTIndex to:",Ke),setTimeout(()=>xe(Ke),50),Ke})),J.key==="Enter"){J.preventDefault();const Ce=document.activeElement;if(Ce&&(Ce.id==="kot-search-input"||Ce===Ut.current)){console.log(" Modal Enter: Search input is focused, letting search input handle Enter");return}console.log(" Direct Enter pressed, focusedKOTIndex:",de),console.log(" Filtered KOTs length:",Te.length),console.log(" Search query:",Se);const Xe=Te[de];console.log(" Focused KOT from filtered results:",Xe),Xe&&Xe.paymentStatus==="pending"?(console.log(" Direct Enter: Generating COMPREHENSIVE bill for table:",Xe.tableNumber),await Ft(Xe.tableNumber)):console.log(" No valid KOT found at focused index or KOT not pending")}if(J.key==="Escape"&&(J.preventDefault(),console.log(" Direct Escape pressed, closing KOT list"),_(!1),te(0)),J.key.toLowerCase()==="e"){J.preventDefault();const Ke=R.filter(Xe=>{if(!Se.trim())return!0;const rt=Se.toLowerCase().trim();return String(Xe.tableNumber||"").toLowerCase().includes(rt)})[de];Ke&&Ke.paymentStatus==="pending"?(console.log(" E key pressed: Starting edit for KOT:",Ke.kotNumber),Pe(Ke)):console.log(" Cannot edit: KOT not found or not pending")}J.key.toLowerCase()==="p"&&Ee&&(J.preventDefault(),console.log(" P key pressed: Save and Print KOT"),Ue(!0))},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[r.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",color:"#ea580c",fontWeight:"600"},children:[" Saved KOTs (Kitchen Order Tickets) - Focus: ",de+1,"/",Se.trim()?R.filter(J=>{const be=Se.toLowerCase().trim();return String(J.tableNumber||"").toLowerCase().includes(be)}).length:R.length,Se.trim()&&` (filtered by "${Se}")`,(()=>{if(Se.trim()){const be=R.filter(Te=>{const Ce=Se.toLowerCase().trim();return String(Te.tableNumber||"").toLowerCase().includes(Ce)})[de];if(be)return`  Table ${be.tableNumber}`}return""})()]}),r.jsx("button",{onClick:()=>_(!1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close (Alt+K or Ctrl+K)"})]}),r.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"8px",padding:"12px 16px",marginBottom:"20px",fontSize:"0.875rem",color:"#0c4a6e"},children:[r.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:" Keyboard Navigation:"}),r.jsx("div",{children:"Alt+K or Ctrl+K: Open & Auto-focus Search  Type table number  Enter: Focus Table   Navigate Tables  Enter: Generate Bill  E: Edit Items  P: Save & Print KOT  Esc: Close"}),r.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px",color:"#0369a1"},children:' Tip: KOTs are now grouped by table! Each table shows all its KOTs together with one "Complete Bill" button.'})]}),r.jsx("div",{style:{marginBottom:"20px"},children:r.jsx("input",{id:"kot-search-input",ref:Ut,type:"text",placeholder:" Search by table number (e.g., 5, 10)...",value:Se,autoFocus:!0,onChange:J=>{Ve(J.target.value),te(0)},onKeyDown:async J=>{if(J.key==="Enter"){J.preventDefault(),console.log(" KOT Search Enter pressed with query:",Se),console.log(" Available KOTs:",R.map(Ce=>({kotNumber:Ce.kotNumber,tableNumber:Ce.tableNumber,paymentStatus:Ce.paymentStatus})));const be=R.filter(Ce=>{if(!Se.trim())return!0;const Ke=Se.toLowerCase().trim(),Xe=String(Ce.tableNumber||"").toLowerCase(),rt=Xe.includes(Ke);return console.log(" Filtering KOT:",{kotNumber:Ce.kotNumber,tableNumber:Ce.tableNumber,searchTerm:Ke,tableNumberLower:Xe,matches:rt}),rt});if(console.log(" Filtered KOTs:",be.length,be.map(Ce=>({kotNumber:Ce.kotNumber,tableNumber:Ce.tableNumber,paymentStatus:Ce.paymentStatus}))),be.length===1){const Ce=be[0];console.log(" Search Enter: Only one result found, generating COMPREHENSIVE bill for table:",Ce.tableNumber),console.log(" Search Enter: KOT payment status:",Ce.paymentStatus),console.log(" Search Enter: This should be the ONLY call to generateComprehensiveBillForTable"),Ce.paymentStatus==="pending"?(console.log("  Calling generateComprehensiveBillForTable for table:",Ce.tableNumber),await Ft(Ce.tableNumber)):console.log("  KOT already completed:",Ce.kotNumber,"Status:",Ce.paymentStatus);return}if(be.length>1){const Ce=[...new Set(be.map(Ke=>Ke.tableNumber))];if(console.log(" Multiple KOTs found, unique tables:",Ce),Ce.length===1){const Ke=Ce[0],Xe=be.filter(rt=>rt.paymentStatus==="pending");if(console.log(" All KOTs are for table:",Ke),console.log(" Pending KOTs for this table:",Xe.length),Xe.length>0){console.log("  Calling generateComprehensiveBillForTable for table with multiple KOTs:",Ke),await Ft(Ke);return}else console.log("  All KOTs for table",Ke,"are already completed")}else console.log(" Multiple tables found in search results:",Ce)}console.log(" Search Enter pressed - multiple results or no results, closing KOT list"),console.log(" Filtered results count:",be.length),_(!1),te(0);const Te=()=>{if(Lt.current)return Lt.current.focus(),Lt.current.select(),console.log("  KOT Search Enter: Focused on main search bar via ref"),!0;{const Ce=document.querySelector('input[placeholder*="Search by name"]');if(Ce)return Ce.focus(),Ce.select(),console.log("  KOT Search Enter: Focused on main search bar via selector"),!0}return!1};setTimeout(()=>Te(),50),setTimeout(()=>Te(),150),setTimeout(()=>Te(),300)}else if(J.key==="Escape")J.preventDefault(),Se.trim()?(Ve(""),console.log(" Search Escape pressed - cleared search")):(_(!1),te(0),console.log(" Search Escape pressed - closed modal"));else if(J.key==="ArrowDown"){J.preventDefault();const be=document.querySelector('[data-kot-modal="true"]');be&&(be.focus(),console.log(" Search ArrowDown pressed - focused on modal"))}},style:{width:"100%",padding:"12px 16px",fontSize:"1rem",border:"2px solid #d1d5db",borderRadius:"8px",outline:"none",transition:"border-color 0.2s ease"},onFocus:J=>J.target.style.borderColor="#3b82f6",onBlur:J=>J.target.style.borderColor="#d1d5db"})}),G?r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),"Loading saved KOTs..."]}):R.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),r.jsx("h3",{style:{margin:"0 0 8px 0",color:"#374151"},children:"No Saved KOTs Found"}),r.jsx("p",{style:{margin:"0",fontSize:"0.875rem"},children:"KOTs will appear here after they are sent to the kitchen"})]}):r.jsx("div",{style:{display:"grid",gap:"16px",maxHeight:"500px",overflowY:"auto"},children:(()=>{const J=R.filter(Ce=>{if(!Se.trim())return!0;const Ke=Se.toLowerCase().trim();return String(Ce.tableNumber||"").toLowerCase().includes(Ke)});if(J.length===0&&Se.trim())return r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),r.jsxs("p",{children:['No KOTs found for table "',Se,'"']}),r.jsx("p",{style:{fontSize:"0.875rem",marginTop:"8px"},children:"Try searching with a different table number"})]});const be={};J.forEach(Ce=>{const Ke=Ce.tableNumber;be[Ke]||(be[Ke]=[]),be[Ke].push(Ce)});const Te=Object.keys(be).sort((Ce,Ke)=>{const Xe=parseInt(Ce.replace(/[^0-9]/g,""))||0,rt=parseInt(Ke.replace(/[^0-9]/g,""))||0;return Xe-rt});return Te.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#9ca3af"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),r.jsxs("p",{children:['No KOTs found for table "',Se,'"']}),r.jsx("p",{style:{fontSize:"0.875rem",marginTop:"8px"},children:"Try searching with a different table number"})]}):Te.map((Ce,Ke)=>{const Xe=be[Ce],rt=Xe.reduce((br,tr)=>br+(tr.totalAmount||0),0),Dt=Xe.reduce((br,tr)=>{var Mt;return br+(((Mt=tr.items)==null?void 0:Mt.length)||0)},0),zt=Ke===Math.floor(de/1);return r.jsxs("div",{style:{background:zt?"#fef3c7":"#fff7ed",border:zt?"3px solid #f59e0b":"2px solid #fb923c",borderRadius:"12px",padding:"20px",marginBottom:"16px",transition:"all 0.2s ease",boxShadow:zt?"0 4px 12px rgba(245, 158, 11, 0.3)":"none"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"12px",background:"#fed7aa",borderRadius:"8px"},children:[r.jsxs("div",{children:[r.jsxs("h3",{style:{margin:"0",color:"#9a3412",fontSize:"1.25rem"},children:[" Table ",Ce]}),r.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#7c2d12"},children:[Xe.length," KOT",Xe.length>1?"s":"","  ",Dt," items  ",rt.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>{const br=Xe[0];F({_id:br.tableId,id:br.tableId,tableNumber:br.tableNumber,number:br.tableNumber,status:"reserved"}),h([]),V(null),Z(null),_(!1),console.log(` Ready to add NEW items to Table ${Ce}. This will create a NEW KOT.`)},style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Add Items"}),r.jsx("button",{onClick:async()=>{console.log(" Generating comprehensive bill for table:",Ce),await Ft(Ce)},style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Complete Bill"}),r.jsx("button",{onClick:()=>{console.log(" Starting table shift for entire table:",Ce),console.log(" KOTs to be shifted:",Xe.map(Mt=>Mt.kotNumber));const br=Xe[0];fe({...br,allTableKOTs:Xe,isTableShift:!0});const tr=z.filter(Mt=>Mt.status==="available"&&Mt.number!==Ce);We(tr),ee(!0)},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},title:`Shift entire Table ${Ce} (all ${Xe.length} KOTs) to another table`,children:" Shift Table"})]})]}),r.jsx("div",{style:{display:"grid",gap:"12px"},children:Xe.map((br,tr)=>{var Mt,sr;return r.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"16px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[r.jsxs("div",{children:[r.jsxs("h4",{style:{margin:"0",color:"#166534",fontSize:"1rem"},children:[" ",br.kotNumber||`KOT-${(Mt=br.id)==null?void 0:Mt.slice(-3)}`]}),r.jsxs("p",{style:{margin:"2px 0 0 0",fontSize:"0.75rem",color:"#15803d"},children:[new Date(br.createdAt).toLocaleString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}),"  ",(br.totalAmount||0).toFixed(2)]})]}),r.jsx("div",{style:{display:"flex",gap:"4px"},children:r.jsx("button",{onClick:()=>Pe(br),style:{background:"#8b5cf6",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer"},children:" Edit"})})]}),Ee&&Ee.id===br.id?r.jsxs("div",{style:{background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"8px",padding:"16px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[r.jsx("h5",{style:{margin:"0",color:"#92400e",fontSize:"0.875rem"},children:" Editing Items"}),r.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r.jsx("button",{onClick:()=>Ue(!1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer"},children:" Save"}),r.jsx("button",{onClick:()=>Ue(!0),style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer"},children:" Save & Print"}),r.jsx("button",{onClick:ht,style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer"},children:" Cancel"})]})]}),r.jsx("div",{style:{display:"grid",gap:"8px"},children:it.map((jr,Fn)=>r.jsxs("div",{style:{background:jr.isRemoved?"#fee2e2":"#f0fdf4",border:jr.isRemoved?"1px solid #fca5a5":"1px solid #bbf7d0",borderRadius:"6px",padding:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("span",{style:{textDecoration:jr.isRemoved?"line-through":"none",color:jr.isRemoved?"#991b1b":"#166534",fontWeight:"600",fontSize:"0.875rem"},children:jr.name}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"2px"},children:["",jr.price," each"]})]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:!jr.isRemoved&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>He(Fn,Math.max(0,jr.newQuantity-1)),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.75rem",cursor:"pointer"},children:"-"}),r.jsx("span",{style:{minWidth:"30px",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:jr.newQuantity}),r.jsx("button",{onClick:()=>He(Fn,jr.newQuantity+1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"2px 6px",fontSize:"0.75rem",cursor:"pointer"},children:"+"})]})})]},`${jr.menuItemId||jr._id||jr.name}-${Fn}`))})]}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"6px"},children:(sr=br.items)==null?void 0:sr.map((jr,Fn)=>r.jsxs("div",{style:{background:"#dcfce7",padding:"6px 10px",borderRadius:"4px",fontSize:"0.8rem",color:"#166534"},children:[r.jsxs("span",{style:{fontWeight:"600"},children:[jr.quantity,"x"]}),jr.name,r.jsxs("span",{style:{color:"#15803d",marginLeft:"4px"},children:["(",jr.price,")"]})]},Fn))})]},br.id)})})]},Ce)})})()}),r.jsxs("div",{style:{marginTop:"24px",textAlign:"center"},children:[r.jsx("button",{onClick:xt,disabled:G,style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:G?"not-allowed":"pointer",opacity:G?.6:1,marginRight:"12px"},children:G?" Refreshing...":" Refresh KOTs"}),r.jsx("button",{onClick:()=>_(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Close"})]})]})}),U&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"700px",maxWidth:"900px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",outline:"none"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#1a202c",display:"flex",alignItems:"center",gap:"8px"},children:" Today's Complimentary Bills"}),r.jsx("button",{onClick:()=>X(!1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close (Alt+C)"})]}),le?r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),r.jsx("div",{children:"Loading complimentary bills..."})]}):H.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),r.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"8px"},children:"No Complimentary Bills Today"}),r.jsx("div",{children:"All bills today were paid orders!"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"#fef3c7",borderRadius:"8px",border:"1px solid #f59e0b"},children:[r.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#92400e",marginBottom:"8px"},children:" Today's Summary"}),r.jsxs("div",{style:{display:"flex",gap:"24px"},children:[r.jsxs("div",{children:[r.jsx("span",{style:{color:"#6b7280"},children:"Total Bills: "}),r.jsx("span",{style:{fontWeight:"600",color:"#1a202c"},children:H.length})]}),r.jsxs("div",{children:[r.jsx("span",{style:{color:"#6b7280"},children:"Total Amount: "}),r.jsxs("span",{style:{fontWeight:"600",color:"#1a202c"},children:["",H.reduce((J,be)=>J+(be.amount||0),0).toFixed(2)]})]})]})]}),r.jsx("div",{style:{display:"grid",gap:"16px",maxHeight:"400px",overflowY:"auto"},children:H.map((J,be)=>r.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",transition:"all 0.2s"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1a202c",marginBottom:"4px"},children:[" ",J.customerName]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Invoice: ",J.invoiceNumber,"  Time: ",J.time]})]}),r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669"},children:["",(J.amount||0).toFixed(2)]})]}),r.jsxs("div",{style:{background:"#fffbeb",padding:"12px",borderRadius:"8px",border:"1px solid #fbbf24"},children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"600",marginBottom:"4px"},children:" Complimentary Reason:"}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",fontStyle:"italic"},children:J.reason||"No reason provided"})]})]},J.billId||be))})]}),r.jsxs("div",{style:{marginTop:"24px",textAlign:"center"},children:[r.jsx("button",{onClick:gt,disabled:le,style:{background:"#f59e0b",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:le?"not-allowed":"pointer",opacity:le?.6:1,marginRight:"12px"},children:le?" Refreshing...":" Refresh"}),r.jsx("button",{onClick:()=>X(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Close"})]})]})}),je&&se&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"600px",maxWidth:"800px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",outline:"none"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[r.jsxs("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#1a202c",display:"flex",alignItems:"center",gap:"8px"},children:[" ",se.isTableShift?`Shift Entire Table ${se.tableNumber}`:`Shift KOT ${se.kotNumber}`]}),r.jsx("button",{onClick:()=>{ee(!1),fe(null),Me(null)},style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close"})]}),r.jsxs("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",marginBottom:"24px"},children:[r.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"1.125rem",fontWeight:"600",color:"#1a202c"},children:[" ",se.isTableShift?"Table Details":"KOT Details"]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:se.isTableShift?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Current Table:"}),r.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#dc2626"},children:[" ",se.tableNumber]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Total KOTs:"}),r.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:[" ",((il=se.allTableKOTs)==null?void 0:il.length)||0," KOTs"]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Customer:"}),r.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:[" ",se.customerName]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Total Items:"}),r.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:[" ",((ru=se.allTableKOTs)==null?void 0:ru.reduce((J,be)=>{var Te;return J+(((Te=be.items)==null?void 0:Te.length)||0)},0))||0," items"]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"KOT Number:"}),r.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:se.kotNumber})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Current Table:"}),r.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#dc2626"},children:[" ",se.tableNumber]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Customer:"}),r.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:[" ",se.customerName]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Items:"}),r.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:[" ",((ol=se.items)==null?void 0:ol.length)||0," items"]})]})]})})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("h3",{style:{margin:"0 0 16px 0",fontSize:"1.125rem",fontWeight:"600",color:"#1a202c"},children:[" Select New Table (",ue.length," available)"]}),ue.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsx("div",{children:"No available tables for shifting"})]}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",maxHeight:"300px",overflowY:"auto",padding:"8px"},children:ue.map(J=>r.jsxs("button",{onClick:()=>Me(J),style:{background:(we==null?void 0:we.number)===J.number?"#3b82f6":"#f8fafc",color:(we==null?void 0:we.number)===J.number?"white":"#1a202c",border:(we==null?void 0:we.number)===J.number?"2px solid #2563eb":"1px solid #e2e8f0",borderRadius:"8px",padding:"16px 12px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",textAlign:"center",transition:"all 0.2s",minHeight:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:[" ",J.number]},J._id||J.id))})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[r.jsx("button",{onClick:()=>{ee(!1),fe(null),Me(null)},style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),r.jsxs("button",{onClick:Ct,disabled:!we,style:{background:we?"#3b82f6":"#d1d5db",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:we?"pointer":"not-allowed",opacity:we?1:.6},children:[" Shift to Table ",(we==null?void 0:we.number)||"..."]})]})]})}),ke&&ot&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[r.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",color:"#1f2937",fontWeight:"600"},children:"Add to Cart"}),r.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",marginBottom:"24px"},children:[r.jsxs("h3",{style:{margin:"0 0 8px 0",fontSize:"1.1rem",color:"#1f2937"},children:[ot.menuItemNumber&&r.jsx("span",{style:{color:"#f59e0b",marginRight:"8px"},children:ot.menuItemNumber}),ot.name]}),r.jsxs("p",{style:{margin:"0",fontSize:"1rem",color:"#059669",fontWeight:"600"},children:["",ot.price.toFixed(2)]})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Enter Quantity:"}),r.jsx("input",{type:"number",min:"1",value:Tt,onChange:J=>_t(J.target.value),onKeyDown:J=>{J.key==="Enter"?ve():J.key==="Escape"&&(Re(!1),mt(null))},onFocus:J=>{J.target.select()},autoFocus:!0,style:{width:"100%",padding:"12px",fontSize:"1.5rem",border:"3px solid #3b82f6",borderRadius:"8px",textAlign:"center",fontWeight:"700",color:"#2563eb",backgroundColor:"#eff6ff"}})]}),i&&i.toLowerCase().includes("restaurant")&&r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Remark (Optional):"}),r.jsx("input",{type:"text",value:st,onChange:J=>wt(J.target.value),onKeyDown:J=>{J.key==="Enter"?ve():J.key==="Escape"&&(Re(!1),mt(null))},placeholder:"Enter any special instructions...",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"2px solid #d1d5db",borderRadius:"8px",color:"#374151",backgroundColor:"#f9fafb"}})]}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>{Re(!1),mt(null)},style:{flex:1,background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel (Esc)"}),r.jsx("button",{onClick:ve,style:{flex:1,background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Add to Cart (Enter)"})]})]})}),tt&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",width:"90%",maxWidth:"1000px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:"2px solid #e5e7eb",paddingBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.75rem",color:"#1f2937",fontWeight:"700"},children:" Sales Report"}),r.jsxs("p",{style:{margin:0,color:"#6b7280",fontSize:"1rem"},children:[Ze==null?void 0:Ze.category," - ",Ze==null?void 0:Ze.branch]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[r.jsx("input",{type:"date",value:Bt,onChange:J=>{Pt(J.target.value),At(J.target.value)},style:{padding:"8px 12px",border:"2px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem"}}),r.jsx("button",{onClick:async()=>{console.log(" Manual refresh clicked");try{await At(Bt),console.log(" Manual refresh completed successfully")}catch(J){console.error(" Manual refresh failed:",J)}},disabled:Qe||G,style:{background:Qe||G?"#6b7280":"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:Qe||G?"not-allowed":"pointer",opacity:Qe||G?.6:1},title:"Refresh sales report",children:Qe||G?" Refreshing...":" Refresh"}),r.jsx("button",{onClick:()=>ze(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close"})]})]}),Qe?r.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"60px",flexDirection:"column",gap:"16px"},children:[r.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e5e7eb",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"Loading sales report..."})]}):Ze?r.jsxs("div",{children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[r.jsxs("div",{style:{background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#0ea5e9"},children:Ze.summary.totalOrders}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#0369a1",fontWeight:"600"},children:"Total Orders"})]}),r.jsxs("div",{style:{background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[r.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#10b981"},children:["",Ze.summary.totalRevenue.toFixed(2)]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#047857",fontWeight:"600"},children:"Total Revenue"})]}),r.jsxs("div",{style:{background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#f59e0b"},children:Ze.summary.totalItems}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",fontWeight:"600"},children:"Items Sold"})]}),r.jsxs("div",{style:{background:"#fce7f3",border:"2px solid #ec4899",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[r.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#ec4899"},children:["",Ze.summary.averageOrderValue.toFixed(2)]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#be185d",fontWeight:"600"},children:"Avg Order Value"})]}),Ze.summary.totalDiscount>0&&r.jsxs("div",{style:{background:"#fef2f2",border:"2px solid #ef4444",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[r.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#ef4444"},children:["",Ze.summary.totalDiscount.toFixed(2)]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#dc2626",fontWeight:"600"},children:"Total Discounts"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:[" Recent Orders (",Ze.orders.length,")"]}),r.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",maxHeight:"300px",overflow:"auto"},children:Ze.orders.length===0?r.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"No orders found for selected date and category"}):Ze.orders.slice(0,20).map((J,be)=>r.jsxs("div",{style:{padding:"12px 16px",borderBottom:be<Math.min(19,Ze.orders.length-1)?"1px solid #e5e7eb":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:[J.orderNumber,J.tableNumber&&` - Table ${J.tableNumber}`]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[J.time,"  ",J.customerName,"  ",J.items.length," items"]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:["",J.totalAmount.toFixed(2)]}),J.discountAmount>0&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#ef4444"},children:["-",J.discountAmount.toFixed(2)," discount"]})]}),r.jsx("button",{onClick:()=>{console.log(" Viewing order details:",J.orderNumber),Ye(J),ae(!0)},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:Te=>Te.target.style.background="#2563eb",onMouseOut:Te=>Te.target.style.background="#3b82f6",title:`View items for ${J.orderNumber}`,children:" View"}),!(J.categoryName&&J.categoryName.toLowerCase().includes("self service")||J.categoryName&&J.categoryName.toLowerCase().includes("darshini")||n.selectedCategory&&n.selectedCategory.name&&(n.selectedCategory.name.toLowerCase().includes("self service")||n.selectedCategory.name.toLowerCase().includes("darshini")))&&r.jsx("button",{onClick:async()=>{var Te,Ce;console.log(" Printing receipt for order:",J.orderNumber),console.log(" Order discount info:",{discountAmount:J.discountAmount,discount:J.discount,hasDiscount:!!(J.discountAmount&&J.discountAmount>0)});try{const Ke=J.items.reduce((Ra,Ai)=>Ra+Ai.price*Ai.quantity,0),Xe=J.discountAmount||Ke-J.totalAmount,rt={selectedBranch:n.selectedBranch,selectedTable:J.tableNumber?{tableNumber:J.tableNumber,number:J.tableNumber}:null,selectedCategory:n.selectedCategory,invoiceNumber:J.orderNumber,date:Bt,time:J.time,customerName:J.customerName,phoneNumber:J.phoneNumber||"0000000000",cartItems:J.items.map(Ra=>({name:Ra.name,price:Ra.price,quantity:Ra.quantity})),subtotal:Ke,total:J.totalAmount,discountAmount:Xe,discountRemark:((Te=J.discount)==null?void 0:Te.remark)||(Xe>0?"Discount Applied":""),discount:J.discount||(Xe>0?{type:"amount",value:Xe,amount:Xe,remark:"Discount Applied"}:null),paymentMethod:"Completed",amountReceived:J.totalAmount,change:0};console.log(" Print data prepared:",rt);const Dt=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}");console.log(" Printer settings:",Dt);const zt=ni.generateThermalReceipt(rt);console.log(" Receipt text generated, length:",zt.length);const br="https://hotelvirat.com/api/v1/hotel",tr=Dt.ip||"192.168.1.100",Mt=Dt.port||9100;console.log(" Attempting network print to:",`${tr}:${Mt}`);const sr=new AbortController,jr=setTimeout(()=>sr.abort(),3e3),Fn=await fetch(`${br}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:zt,printerIP:tr,port:Mt}),signal:sr.signal});if(clearTimeout(jr),Fn.ok)console.log(" Receipt printed successfully for order:",J.orderNumber),alert(` Receipt printed successfully for order ${J.orderNumber}`);else throw new Error("Thermal printer not responding")}catch(Ke){console.log(" Network printing failed, trying thermal printer service:",Ke.message);try{const Xe=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),rt={method:"network",printerIP:Xe.ip||"192.168.1.100",port:Xe.port||9100},Dt=J.items.reduce((tr,Mt)=>tr+Mt.price*Mt.quantity,0),zt=J.discountAmount||Dt-J.totalAmount,br={selectedBranch:n.selectedBranch,selectedTable:J.tableNumber?{tableNumber:J.tableNumber,number:J.tableNumber}:null,selectedCategory:n.selectedCategory,invoiceNumber:J.orderNumber,date:Bt,time:J.time,customerName:J.customerName,phoneNumber:J.phoneNumber||"0000000000",cartItems:J.items.map(tr=>({name:tr.name,price:tr.price,quantity:tr.quantity})),subtotal:Dt,total:J.totalAmount,discountAmount:zt,discountRemark:((Ce=J.discount)==null?void 0:Ce.remark)||(zt>0?"Discount Applied":""),discount:J.discount||(zt>0?{type:"amount",value:zt,amount:zt,remark:"Discount Applied"}:null),paymentMethod:"Completed",amountReceived:J.totalAmount,change:0};await ni.printReceipt(br,rt),console.log(" Receipt printed via thermal printer service for order:",J.orderNumber),alert(` Receipt printed via thermal printer service for order ${J.orderNumber}`)}catch(Xe){console.error(" All printing methods failed:",Xe),alert(` Printing failed: ${Xe.message}. Please check printer connection.`)}}},style:{background:"#10b981",color:"white",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:Te=>Te.target.style.background="#059669",onMouseOut:Te=>Te.target.style.background="#10b981",title:`Print receipt for ${J.orderNumber}`,children:" Print"})]})]},be))})]})]}):r.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"#6b7280"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),r.jsx("p",{children:"No sales data available for the selected date."})]})]})}),kt&&Ie&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"2px solid #e5e7eb"},children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1f2937",margin:0},children:" Order Details"}),r.jsx("button",{onClick:()=>{ae(!1),Ye(null)},style:{background:"#ef4444",color:"white",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close"})]}),r.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",marginBottom:"24px"},children:r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Bill Number:"}),r.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:Ie.orderNumber})]}),Ie.tableNumber&&r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Table:"}),r.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:[" ",Ie.tableNumber]})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Customer:"}),r.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:Ie.customerName})]}),r.jsxs("div",{children:[r.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"4px"},children:"Time:"}),r.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:Ie.time})]})]})}),r.jsxs("div",{children:[r.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1f2937",marginBottom:"16px"},children:["Items (",Ie.items.length,")"]}),r.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",overflow:"hidden"},children:Ie.items.map((J,be)=>r.jsxs("div",{style:{padding:"16px",borderBottom:be<Ie.items.length-1?"1px solid #e5e7eb":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:J.name}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["",J.price,"  ",J.quantity]})]}),r.jsx("div",{style:{textAlign:"right"},children:r.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:["",(J.price*J.quantity).toFixed(2)]})})]},be))})]}),r.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"2px solid #e5e7eb"},children:[(()=>{const J=Ie.items.reduce((Xe,rt)=>Xe+rt.price*rt.quantity,0),be=Ie.totalAmount,Te=J-be,Ce=Ie.discountAmount>0||Te>0,Ke=Ie.discountAmount||Te;return console.log(" Order Details calculation:",{calculatedSubtotal:J,actualTotal:be,impliedDiscount:Te,savedDiscountAmount:Ie.discountAmount,finalDiscountAmount:Ke,hasDiscount:Ce}),Ce&&Ke>0?r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsx("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#6b7280"},children:"Subtotal:"}),r.jsxs("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#6b7280"},children:["",J.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsx("span",{style:{fontSize:"1rem",fontWeight:"500",color:"#ef4444"},children:"Discount:"}),r.jsxs("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#ef4444"},children:["-",Ke.toFixed(2)]})]}),Ie.discount&&Ie.discount.remark&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"Reason:"}),r.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",fontStyle:"italic"},children:Ie.discount.remark})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #d1d5db",margin:"12px 0"}})]}):null})(),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[r.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1f2937"},children:(()=>{const be=Ie.items.reduce((Ce,Ke)=>Ce+Ke.price*Ke.quantity,0)-Ie.totalAmount;return Ie.discountAmount>0||be>0?"Final Amount:":"Total Amount:"})()}),r.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669"},children:["",Ie.totalAmount.toFixed(2)]})]})]})]})})]})}):r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("p",{children:"Customer data not found. Please start over."}),r.jsx("button",{className:"counter-button",onClick:()=>e("/counter/branch-selection"),children:"Go Back"})]})})})},epe=()=>{var k,I,z,B;const e=kn(),n=ua().state,[a,s]=w.useState(!1),[i,l]=w.useState(null),[d,u]=w.useState((n==null?void 0:n.cartItems)||[]),[h,p]=w.useState(!1),[m,g]=w.useState(!1),[b,j]=w.useState(!1);if(w.useEffect(()=>{const M=async F=>{if(F.key==="Enter"){const N=document.activeElement;if(N&&(N.tagName==="INPUT"||N.tagName==="TEXTAREA")||a||m)return;await y()}if(F.key.toLowerCase()==="k"){const N=document.activeElement;if(N&&(N.tagName==="INPUT"||N.tagName==="TEXTAREA"))return;j(!b)}};return window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)}},[a,m,b]),!n)return r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("p",{children:"Order data not found. Please start over."}),r.jsx("button",{className:"counter-button",onClick:()=>e("/counter/menu"),children:"Go Back"})]})})});const v=async()=>{var M,F,N,L,P,_,R,W;try{console.log(" Starting KOT save process...");const G=localStorage.getItem("counterUserData"),oe=G?JSON.parse(G):null;if(!oe||!oe._id)throw console.error(" Counter user not found in localStorage"),new Error("User session expired. Please login again.");console.log(" Counter user found:",oe._id),console.log(" Creating KOT invoice...");const q={customerName:n.customerName||"Walk-in Customer",phoneNumber:n.phoneNumber||"0000000000",branchId:n.selectedBranch._id,category:((M=n.selectedCategory)==null?void 0:M.name)||"Restaurant",date:n.date||new Date().toLocaleDateString("en-IN"),time:n.time||new Date().toLocaleTimeString("en-IN",{hour12:!0})};console.log(" Invoice data:",q);const V=await or.createInvoice(q);if(console.log(" KOT Invoice created:",V.invoice),n.selectedTable&&n.selectedTable._id)try{console.log(" Updating table status to reserved...");const Q=n.selectedTable._id||n.selectedTable.id;await or.request(`/table/${Q}`,{method:"PUT",body:JSON.stringify({status:"reserved"})}),console.log(" Table status updated to reserved")}catch(Q){console.error(" Failed to update table status:",Q)}console.log(" Creating KOT order...");const U=d.reduce((Q,le)=>Q+le.price*le.quantity,0),X={userId:oe._id,customerName:n.customerName||"Walk-in Customer",phoneNumber:n.phoneNumber||"0000000000",branchId:n.selectedBranch._id,branchName:((F=n.selectedBranch)==null?void 0:F.name)||"Unknown Branch",categoryId:((N=n.selectedCategory)==null?void 0:N._id)||null,categoryName:((L=n.selectedCategory)==null?void 0:L.name)||"Restaurant",invoiceId:V.invoice.id,tableId:((P=n.selectedTable)==null?void 0:P._id)||((_=n.selectedTable)==null?void 0:_.id)||null,tableNumber:((R=n.selectedTable)==null?void 0:R.tableNumber)||((W=n.selectedTable)==null?void 0:W.number)||null,items:d.map(Q=>({menuItemId:Q._id||Q.id||"507f1f77bcf86cd799439013",name:Q.name,quantity:Q.quantity,price:Q.price,...Q.remark?{remark:Q.remark}:{}})),subtotal:U,tax:0,serviceCharge:0,totalAmount:U,grandTotal:U,paymentMethod:"pending",orderStatus:"kot_sent",paymentStatus:"pending",kotNumber:`KOT-${Date.now()}`,kotTime:new Date().toISOString()};console.log(" Saving KOT order:",X);const H=await or.createOrder(X);return console.log(" KOT saved successfully:",H),p(!0),localStorage.setItem("currentKOT",JSON.stringify({...n,kotOrder:H,kotNumber:X.kotNumber,kotItems:d})),console.log(" KOT save process completed successfully!"),H}catch(G){throw console.error(" Failed to save KOT:",G),console.error(" Error details:",G.message,G.stack),G}},y=async()=>{var M,F;if(!a){s(!0),l(null);try{console.log(" Saving KOT to database..."),await v();const N=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),L={selectedBranch:n.selectedBranch,kotNumber:`KOT-${Date.now()}`,date:n.date,time:n.time,tableNumber:((M=n.selectedTable)==null?void 0:M.tableNumber)||((F=n.selectedTable)==null?void 0:F.number)||"N/A",cartItems:d,isKOT:!0};try{const P=A(L),_="https://hotelvirat.com/api/v1/hotel",R=N.ip||"192.168.1.100",W=N.port||9100,G=new AbortController,oe=setTimeout(()=>G.abort(),3e3),q=await fetch(`${_}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:P,printerIP:R,port:W}),signal:G.signal});if(clearTimeout(oe),q.ok)l({type:"success",message:"KOT printed to kitchen! Table reserved. Returning to menu..."}),g(!0),setTimeout(()=>{e("/counter/menu",{state:{...n,cartItems:[],selectedTable:null,kotPrinted:!0}})},1500);else throw new Error("Kitchen printer not responding")}catch(P){console.log("Direct thermal printing failed, trying thermal printer service:",P.message);const _={method:"network",printerIP:N.ip||"192.168.1.100",port:N.port||9100},R={selectedBranch:n.selectedBranch,invoiceNumber:L.kotNumber,date:L.date,time:L.time,customerName:"KITCHEN ORDER",phoneNumber:"",cartItems:d.map(W=>({name:`${W.quantity}x ${W.name}`,price:0,quantity:1,...W.remark?{remark:W.remark}:{}})),total:0,paymentMethod:"KOT",amountReceived:0,change:0,isKOT:!0,tableNumber:L.tableNumber};await Promise.race([ni.printBill(R,_),new Promise((W,G)=>setTimeout(()=>G(new Error("Print operation timed out")),5e3))]),l({type:"success",message:"KOT printed to kitchen! Table reserved. Returning to menu..."}),g(!0),setTimeout(()=>{e("/counter/menu",{state:{...n,cartItems:[],selectedTable:null,kotPrinted:!0}})},1500)}setTimeout(()=>l(null),3e3)}catch(N){console.error("KOT Print error:",N),l({type:"error",message:"Failed to print KOT. Please check printer connection."}),setTimeout(()=>l(null),5e3)}finally{s(!1)}}},A=M=>{const N=R=>{const W=Math.max(0,Math.floor((42-R.length)/2));return" ".repeat(W)+R},L=(R,W)=>{const G=42-W.length-1,oe=R.length>G?R.substring(0,G-3)+"...":R,q=42-oe.length-W.length;return oe+" ".repeat(Math.max(1,q))+W};let P=`
`;P+=N("*** KITCHEN ORDER TICKET ***")+`
`,P+=N(M.selectedBranch.name||"Restaurant")+`
`,P+="=".repeat(42)+`
`,P+=L("KOT#:",M.kotNumber||"KOT-001")+`
`,P+=L("Table:",M.tableNumber||"N/A")+`
`,P+=L("Date:",M.date||new Date().toLocaleDateString())+`
`,P+=L("Time:",M.time||new Date().toLocaleTimeString())+`
`,P+="=".repeat(42)+`
`,P+=N("ITEMS TO PREPARE")+`
`,P+="-".repeat(42)+`
`,M.cartItems&&M.cartItems.length>0?M.cartItems.forEach(R=>{const W=`${R.quantity||1}x ${R.name||"Unknown Item"}`;P+=W+`
`,R.remark&&(P+=`  Note: ${R.remark}
`),W.length>42&&(P+=`
`)}):P+=N("No items")+`
`,P+="-".repeat(42)+`
`;const _=M.cartItems?M.cartItems.reduce((R,W)=>R+(W.quantity||1),0):0;return P+=N(`Total Items: ${_}`)+`
`,P+="=".repeat(42)+`
`,P+=N("*** KITCHEN COPY ***")+`
`,P+=`


`,P},E=()=>{e("/counter/print-settings",{state:{returnTo:"/counter/kot-generation",orderData:n}})},O=()=>{e("/counter/menu",{state:{...n,cartItems:[],isKOTOrder:!0,existingKOT:!0}})},S=()=>{e("/counter/bill-generation",{state:{...n,cartItems:d,isKOTOrder:!0,kotSaved:!0}})},C=()=>{e("/counter/menu",{state:{...n,cartItems:d}})};return d.reduce((M,F)=>M+F.price*F.quantity,0),r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Kitchen Order Ticket (KOT)"}),r.jsx("p",{className:"counter-subtitle",children:"Send order to kitchen"})]}),r.jsxs("div",{style:{background:"#fff7ed",padding:"20px",borderRadius:"12px",marginBottom:"24px",border:"2px dashed #fb923c"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[r.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",color:"#ea580c"},children:" KITCHEN ORDER TICKET"}),r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:n.selectedBranch.name})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #fb923c",margin:"16px 0"}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"KOT Number:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:["KOT-",Date.now().toString().slice(-6)]})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Table:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:[" ",((k=n.selectedTable)==null?void 0:k.tableNumber)||((I=n.selectedTable)==null?void 0:I.number)||"N/A"]})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Time:"}),r.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:n.time})]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #fb923c",margin:"16px 0"}}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#ea580c"},children:"Items to Prepare"}),d.map((M,F)=>r.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:F<d.length-1?"1px solid #fed7aa":"none"},children:r.jsxs("div",{style:{flex:1},children:[r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#9a3412",fontSize:"1rem"},children:[M.quantity,"x ",M.name]}),M.remark&&r.jsxs("p",{style:{margin:"4px 0 0 0",fontStyle:"italic",color:"#dc2626",fontSize:"0.875rem",fontWeight:"500"},children:["Note: ",M.remark]})]})},F))]}),r.jsx("hr",{style:{border:"none",borderTop:"2px solid #ea580c",margin:"16px 0"}}),r.jsxs("div",{style:{textAlign:"center",fontSize:"1.2rem",fontWeight:"700",color:"#ea580c"},children:["Total Items: ",d.reduce((M,F)=>M+F.quantity,0)]})]}),i&&r.jsx("div",{style:{background:i.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${i.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"16px",textAlign:"center"},children:r.jsxs("div",{style:{color:i.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[i.type==="success"?"":""," ",i.message]})}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"24px"},children:[!m&&r.jsxs("div",{style:{textAlign:"center",padding:"20px",background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"12px"},children:[r.jsx("h3",{style:{margin:"0 0 8px 0",color:"#92400e",fontSize:"1.2rem"},children:"Press Enter to Print KOT"}),r.jsx("p",{style:{margin:"0",color:"#78350f",fontSize:"0.875rem"},children:"Or click the Print KOT button below"})]}),m&&r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",padding:"20px",background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"12px"},children:[r.jsx("button",{className:"counter-button",onClick:O,style:{background:"#f59e0b",borderColor:"#f59e0b",padding:"16px 24px",fontSize:"1rem",fontWeight:"600"},children:" Add More Items"}),r.jsx("button",{className:"counter-button",onClick:S,style:{background:"#10b981",borderColor:"#10b981",padding:"16px 24px",fontSize:"1rem",fontWeight:"600"},children:" Generate Final Bill"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:C,children:" Back"}),r.jsx("button",{className:"counter-button-secondary",onClick:y,disabled:a,style:{background:m?"#9ca3af":"#ea580c",borderColor:m?"#9ca3af":"#ea580c",color:"white",opacity:a?.6:1,cursor:a?"not-allowed":"pointer"},children:a?" Printing...":m?" KOT Printed":" Print KOT"}),r.jsx("button",{className:"counter-button-secondary",onClick:E,title:"Configure printer settings",children:" Settings"}),r.jsx("button",{className:"counter-button-secondary",onClick:()=>j(!0),title:"Press K to view KOT details",children:" View KOT (K)"})]})]}),b&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"500px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5rem",color:"#ea580c",fontWeight:"600"},children:" Kitchen Order Ticket"}),r.jsx("button",{onClick:()=>j(!1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:" Close (K)"})]}),r.jsxs("div",{style:{background:"#fff7ed",padding:"20px",borderRadius:"12px",border:"2px solid #fb923c"},children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"KOT Number:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:["KOT-",Date.now().toString().slice(-6)]})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Table:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:[" ",((z=n.selectedTable)==null?void 0:z.tableNumber)||((B=n.selectedTable)==null?void 0:B.number)||"N/A"]})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#9a3412"},children:"Time:"}),r.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#ea580c"},children:n.time})]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #fb923c",margin:"16px 0"}}),r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#ea580c"},children:"Items to Prepare"}),d.map((M,F)=>r.jsxs("div",{style:{padding:"8px 0",borderBottom:F<d.length-1?"1px solid #fed7aa":"none"},children:[r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#9a3412",fontSize:"1rem"},children:[M.quantity,"x ",M.name]}),M.remark&&r.jsxs("p",{style:{margin:"4px 0 0 0",fontStyle:"italic",color:"#dc2626",fontSize:"0.875rem",fontWeight:"500"},children:["Note: ",M.remark]})]},F)),r.jsx("hr",{style:{border:"none",borderTop:"2px solid #ea580c",margin:"16px 0"}}),r.jsxs("div",{style:{textAlign:"center",fontSize:"1.2rem",fontWeight:"700",color:"#ea580c"},children:["Total Items: ",d.reduce((M,F)=>M+F.quantity,0)]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"20px"},children:[r.jsx("button",{onClick:y,disabled:a,style:{background:"#ea580c",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:a?"not-allowed":"pointer",opacity:a?.6:1},children:a?" Printing...":" Print KOT"}),r.jsx("button",{onClick:()=>j(!1),style:{background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Close"})]})]})]})})]})})},ww=()=>{try{const e=localStorage.getItem("selectedCategory"),t=localStorage.getItem("selectedCategoryName");if(console.log(" getStoredCategory - storedCategory:",e),console.log(" getStoredCategory - storedCategoryName:",t),t)return console.log(" Using storedCategoryName:",t),t;if(e){const n=JSON.parse(e);console.log(" Parsed categoryData:",n);const a=(n==null?void 0:n.name)||n;return console.log(" Using parsed category name:",a),a}return console.log(" No stored category found"),null}catch(e){return console.error(" Error reading stored category:",e),null}},Bj=(e,t)=>{var a;console.log(" getCategoryName called with:",{customerData:e,selectedCategory:e==null?void 0:e.selectedCategory,preSelectedCategory:t,storedCategory:ww()});const n=[(a=e==null?void 0:e.selectedCategory)==null?void 0:a.name,t,ww(),window.location.pathname.includes("temple")?"Temple Meals":null,window.location.pathname.includes("self")?"Self Service":null,window.location.pathname.includes("restaurant")?"Restaurant":null];console.log(" Category sources to check:",n);for(const s of n)if(s&&s!=="All")return console.log(" Found category from source:",s),s;return console.log(" No category found, using fallback: Self Service"),"Self Service"},Fj=async(e,t)=>{try{if(console.log(" Getting next unified bill/invoice number from server for category:",t),!e)throw new Error("Branch ID is required for bill/invoice number generation");if(!t)throw new Error("Category is required for bill/invoice number generation");const n=await or.getNextBillNumber(e,t);if(n&&n.success&&n.billNumber)return console.log(` Server generated unified bill/invoice number: ${n.billNumber} for category: ${t}`),n.billNumber;throw new Error("Invalid response from server")}catch(n){console.error(" Failed to get unified bill/invoice number from server:",n),console.log(" Falling back to localStorage method...");const a=new Date,s=String(a.getDate()).padStart(2,"0"),i=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getFullYear()).slice(-2),d=`${s}-${i}-${l}`,u=`unified-bill-counter-${t}-${d}`;let h=parseInt(localStorage.getItem(u)||"0");h++,localStorage.setItem(u,h.toString());const p=String(h).padStart(3,"0");return console.log(` Fallback generated unified number: ${p} for category: ${t} (counter: ${h})`),p}},tpe=()=>{const e=kn(),n=ua().state;console.log(" BillGeneration received orderData:",{invoiceNumber:n==null?void 0:n.invoiceNumber,billNumber:n==null?void 0:n.billNumber,kotNumber:n==null?void 0:n.kotNumber,isKOTOrder:n==null?void 0:n.isKOTOrder,existingOrderId:n==null?void 0:n.existingOrderId,isComprehensiveBill:n==null?void 0:n.isComprehensiveBill,kotNumbers:n==null?void 0:n.kotNumbers,fullOrderData:n}),console.log(" CRITICAL DEBUG - Bill number sources:",{"orderData.billNumber":n==null?void 0:n.billNumber,"orderData.invoiceNumber":n==null?void 0:n.invoiceNumber,"typeof billNumber":typeof(n==null?void 0:n.billNumber),"typeof invoiceNumber":typeof(n==null?void 0:n.invoiceNumber),"billNumber === undefined":(n==null?void 0:n.billNumber)===void 0,"invoiceNumber === undefined":(n==null?void 0:n.invoiceNumber)===void 0,'billNumber === "001"':(n==null?void 0:n.billNumber)==="001",'invoiceNumber === "001"':(n==null?void 0:n.invoiceNumber)==="001"}),n!=null&&n.isKOTOrder&&(n!=null&&n.kotNumber)&&(n.billNumber||console.log(" Bill number will be generated in comprehensive bill flow"));const[a,s]=w.useState(!1),[i,l]=w.useState(null),[d,u]=w.useState((n==null?void 0:n.cartItems)||[]),[h,p]=w.useState((n==null?void 0:n.invoiceNumber)||(n==null?void 0:n.billNumber)),[m,g]=w.useState(!1),[b,j]=w.useState(!1);w.useEffect(()=>{(async()=>{var fe;(fe=n==null?void 0:n.selectedCategory)!=null&&fe.name&&!localStorage.getItem("selectedCategoryName")&&(console.log(" Storing category from orderData:",n.selectedCategory.name),localStorage.setItem("selectedCategory",JSON.stringify(n.selectedCategory)),localStorage.setItem("selectedCategoryName",n.selectedCategory.name)),n!=null&&n.billNumber||n!=null&&n.invoiceNumber?(console.log(" BillGeneration: Using existing invoice number:",n.billNumber||n.invoiceNumber),p(n.billNumber||n.invoiceNumber),g(!0),j(!0)):(console.log(" BillGeneration: No invoice number provided - will generate when order is completed"),p("PENDING"),g(!1),j(!1))})()},[]);const[v,y]=w.useState(!1),[A,E]=w.useState("percentage"),[O,S]=w.useState(""),[C,k]=w.useState(""),[I,z]=w.useState(null),[B,M]=w.useState(!1),[F,N]=w.useState(""),[L,P]=w.useState(!1);w.useEffect(()=>{v&&setTimeout(()=>{const se=document.querySelector('input[type="number"][placeholder*="percentage"]');se&&se.focus()},100)},[v]);const _=async()=>{if(!n.selectedTable){console.log(" No selected table to update status for");return}const se=n.selectedTable._id||n.selectedTable.id,fe=n.selectedTable.tableNumber||n.selectedTable.number;if(!se){console.error(" Table ID is missing - cannot update status");return}try{console.log(` Freeing up table after bill print: ${fe} (ID: ${se})`);const ue=await or.request(`/table/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})});console.log(" Table status API response:",ue),console.log(` Table ${fe} status updated to AVAILABLE after bill print`),localStorage.setItem("refreshTablesAfterBill","true"),localStorage.setItem("lastUpdatedTable",se),localStorage.setItem("lastUpdatedTableStatus","available"),localStorage.setItem("tableStatusUpdateTime",Date.now().toString());try{await or.request(`/tables/${se}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Alternative table status endpoint also updated")}catch{console.log(" Alternative endpoint not available (this is normal)")}window.refreshTables&&typeof window.refreshTables=="function"&&(console.log(" Triggering immediate table refresh..."),window.refreshTables())}catch(ue){console.error(" Failed to update table status after bill print:",ue),console.error(" Error details:",{message:ue.message,status:ue.status,response:ue.response}),localStorage.setItem("refreshTablesAfterBill","true"),localStorage.setItem("tableStatusUpdateFailed","true"),localStorage.setItem("failedTableId",se),window.showNotification&&typeof window.showNotification=="function"&&window.showNotification("Table status update failed. Please manually refresh the table list.","warning")}};w.useEffect(()=>{const se=async fe=>{if(fe.altKey&&fe.key.toLowerCase()==="b"){fe.preventDefault(),X();return}if(fe.altKey&&fe.key.toLowerCase()==="c"){fe.preventDefault(),B?(M(!1),N("")):P(!0);return}if(fe.key==="Enter"){const ue=document.activeElement;if(ue&&(ue.tagName==="INPUT"||ue.tagName==="TEXTAREA"))return;if(v||L){console.log(" Enter key blocked - popup is open");return}if(a)return;console.log(" Enter key pressed - generating bill number and printing..."),(async()=>{var we;try{let Me=h;console.log(" Enter key: Current state before generation:",{invoiceNumber:h,billNumberGenerated:b,needsGeneration:(!Me||Me==="PENDING")&&!b}),(!Me||Me==="PENDING")&&!b?(console.log(" Enter key: Generating bill number before printing..."),Me=await Fj(n.selectedBranch._id,((we=n.selectedCategory)==null?void 0:we.name)||"Self Service"),console.log(" Enter key: Generated bill number:",Me),p(Me),j(!0),console.log(" Enter key: State after generation:",{finalInvoiceNumber:Me,billNumberGeneratedFlag:!0}),await new Promise(Ee=>setTimeout(Ee,100))):console.log(" Enter key: Using existing bill number:",Me),console.log(" Enter key: Printing with bill number:",Me),await oe(Me),setTimeout(()=>{R(Me)},500)}catch(Me){console.error(" Error in Enter key handler:",Me)}})()}};return window.addEventListener("keydown",se),()=>{window.removeEventListener("keydown",se)}},[a,d,v,L,I,B]);const R=async(se=null)=>{var ue,We,we,Me,Ee,Be,it,re,ce,Z,de,te,Se,Ve;console.log(" handleDone() called - starting order completion process..."),console.log(" Provided bill number:",se),console.log(" Current state:",{invoiceNumber:h,billNumberGenerated:b,finalInvoiceNumber:h});let fe=se||h;if(!se&&(!fe||fe==="PENDING")&&!b){console.log(" Generating bill number at completion time...");try{fe=await Fj(n.selectedBranch._id,((ue=n.selectedCategory)==null?void 0:ue.name)||"Self Service"),console.log(" Generated bill number at completion:",fe),p(fe),j(!0)}catch(tt){console.error(" Failed to generate bill number at completion:",tt),fe="001"}}else console.log(" Using existing/provided bill number:",fe),console.log(" Skipping bill number generation because:",{providedBillNumber:!!se,hasInvoiceNumber:!(!fe||fe==="PENDING"),billNumberGenerated:b});console.log(" Order data:",{isComprehensiveBill:n.isComprehensiveBill,existingOrderIds:n.existingOrderIds,kotNumbers:n.kotNumbers,billNumber:n.billNumber,invoiceNumber:n.invoiceNumber,finalInvoiceNumber:fe}),console.log(" CRITICAL DEBUG - Full orderData:",n),console.log(" CRITICAL DEBUG - selectedCategory:",n.selectedCategory);try{const tt=localStorage.getItem("counterUserData"),ze=tt?JSON.parse(tt):null;if(!ze||!ze._id){console.error(" Counter user not found in localStorage"),e("/counter/menu",{state:{customerName:n.customerName,phoneNumber:n.phoneNumber,selectedBranch:n.selectedBranch,date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),refreshTables:!0}});return}if(n.existingOrderId||n.existingOrderIds){if(n.isComprehensiveBill&&n.existingOrderIds){console.log(" Updating MULTIPLE KOT orders to completed:",n.existingOrderIds),console.log(" KOT numbers included:",n.kotNumbers);const Ze=d.reduce((pt,Bt)=>pt+Bt.price*Bt.quantity,0),Ae=Ze-H();console.log(" Comprehensive bill amounts:",{subtotal:Ze,discountAmount:H(),finalTotal:Ae,appliedDiscount:I});const Qe={userId:ze._id,customerName:n.customerName||"Walk-in Customer",phoneNumber:n.phoneNumber||"0000000000",branchId:n.selectedBranch._id,branchName:n.selectedBranch.name,categoryId:((We=n.selectedCategory)==null?void 0:We._id)||null,categoryName:Bj(n,null),tableId:((we=n.selectedTable)==null?void 0:we._id)||((Me=n.selectedTable)==null?void 0:Me.id)||null,tableNumber:((Ee=n.selectedTable)==null?void 0:Ee.tableNumber)||((Be=n.selectedTable)==null?void 0:Be.number)||null,items:d.map(pt=>({menuItemId:pt._id||pt.id||"507f1f77bcf86cd799439013",name:pt.name,quantity:pt.quantity,price:pt.price})),subtotal:Ze,discount:I?{type:I.type,value:I.value,amount:H(),remark:I.remark}:null,discountAmount:H(),tax:0,serviceCharge:0,totalAmount:Ae,grandTotal:Ae,isComplimentary:B,complimentaryReason:F,paymentMethod:"cash",paymentStatus:"completed",status:"completed",invoiceNumber:fe,isComprehensiveBill:!0,kotNumbers:n.kotNumbers,originalKOTIds:n.existingOrderIds};console.log(" Saving consolidated comprehensive bill order:",Qe);try{const pt=await or.createOrder(Qe);console.log(" Consolidated comprehensive bill saved successfully:",pt);const Bt=n.existingOrderIds.map(async kt=>{var ae,Ie;try{console.log(" Marking KOT as consolidated (hidden from sales report):",kt),console.log(" API endpoint:",`/counter-order/orders/${kt}/payment-status`),console.log(" Update payload:",{paymentStatus:"consolidated",status:"consolidated",invoiceNumber:n.billNumber||n.invoiceNumber,consolidatedOrderId:((ae=pt.order)==null?void 0:ae.id)||pt.id,isPartOfComprehensiveBill:!0});const Ye=await or.request(`/counter-order/orders/${kt}/payment-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"consolidated",status:"consolidated",invoiceNumber:fe,consolidatedOrderId:((Ie=pt.order)==null?void 0:Ie.id)||pt.id,isPartOfComprehensiveBill:!0})});return console.log(" KOT order marked as consolidated (hidden from sales report):",kt,Ye),Ye}catch(Ye){throw console.error(" Failed to update KOT order status:",kt,Ye),Ye}});console.log(" Waiting for all KOT status updates to complete...");const Pt=await Promise.all(Bt);console.log(" All KOT update results:",Pt),console.log(" All KOTs marked as consolidated (hidden from sales report) with bill number:",fe)}catch(pt){console.error(" CRITICAL: Failed to create consolidated order:",pt),console.error(" Error details:",{message:pt.message,stack:pt.stack,orderData:Qe,response:pt.response||"No response data"}),pt.response&&console.error(" Backend error response available"),console.log(" Attempting direct KOT status updates as fallback...");const Bt=n.existingOrderIds.map(async Pt=>{try{console.log(" Fallback: Updating KOT with discount info and marking as consolidated:",Pt),console.log(" Fallback payload:",{paymentStatus:"consolidated",status:"consolidated",invoiceNumber:fe,totalAmount:Ae,grandTotal:Ae,subtotal:Ze,discountAmount:H(),discount:I,isPartOfComprehensiveBill:!0});const kt=await or.request(`/counter-order/orders/${Pt}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"consolidated",status:"consolidated",invoiceNumber:fe,totalAmount:Ae,grandTotal:Ae,subtotal:Ze,discountAmount:H(),discount:I?{type:I.type,value:I.value,amount:H(),remark:I.remark}:null,isPartOfComprehensiveBill:!0})});return console.log(" Fallback KOT update with discount and consolidated status successful:",Pt,kt),kt}catch(kt){return console.error(" Fallback KOT update failed:",Pt,{error:kt.message,status:kt.status,response:kt.response}),null}});await Promise.all(Bt),console.log(" Fallback KOT updates with discount and consolidated status completed")}}else if(n.existingOrderId){console.log(" Updating existing KOT order to completed:",n.existingOrderId);try{await or.request(`/counter-order/orders/${n.existingOrderId}/payment-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"completed",invoiceNumber:fe})}),console.log(" KOT order marked as completed with bill number:",fe)}catch(Ze){console.error(" Failed to update KOT order status:",Ze)}}if(n.selectedTable)try{console.log(` Freeing up table: ${n.selectedTable.tableNumber||n.selectedTable.number}`),await or.request(`/table/${n.selectedTable._id||n.selectedTable.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Table freed successfully")}catch(Ze){console.error(" Failed to free table:",Ze)}}else{console.log(" Skipping invoice creation - using existing bill number:",fe),console.log(" Creating order directly...");const Ze=d.reduce((kt,ae)=>kt+ae.price*ae.quantity,0),Ae=Ze-H(),Qe={userId:ze._id,customerName:`${n.customerName||"Walk-in Customer"} [${h}]`,phoneNumber:n.phoneNumber||"0000000000",branchId:n.selectedBranch._id,branchName:n.selectedBranch.name,categoryId:((it=n.selectedCategory)==null?void 0:it._id)||null,categoryName:Bj(n,null),tableId:((re=n.selectedTable)==null?void 0:re._id)||((ce=n.selectedTable)==null?void 0:ce.id)||null,tableNumber:((Z=n.selectedTable)==null?void 0:Z.tableNumber)||((de=n.selectedTable)==null?void 0:de.number)||null,items:d.map(kt=>({menuItemId:kt._id||kt.id||"507f1f77bcf86cd799439013",name:kt.name,quantity:kt.quantity,price:kt.price})),subtotal:Ze,discount:I?{type:I.type,value:I.value,amount:H(),remark:I.remark}:null,discountAmount:H(),tax:0,serviceCharge:0,totalAmount:Ae,grandTotal:Ae,isComplimentary:B,complimentaryReason:F,paymentMethod:"cash",paymentStatus:"completed",status:"completed",invoiceNumber:fe};console.log(" Saving web order to CounterOrder collection (without invoice):",Qe),console.log(" Invoice number being saved:",fe),console.log(" CRITICAL DEBUG - Order being sent to API:",{orderToSave:Qe,categoryName:Qe.categoryName,selectedCategory:n.selectedCategory,storedCategory:ww(),getCategoryResult:Bj(n,null)});const pt=await or.createOrder(Qe);console.log(" Web order saved to database successfully:",pt),console.log(" Saved order invoice number:",((te=pt==null?void 0:pt.order)==null?void 0:te.invoiceNumber)||(pt==null?void 0:pt.invoiceNumber));const Bt=((Se=pt==null?void 0:pt.order)==null?void 0:Se.invoiceNumber)||(pt==null?void 0:pt.invoiceNumber),Pt=((Ve=pt==null?void 0:pt.order)==null?void 0:Ve.billNumber)||(pt==null?void 0:pt.billNumber);if(console.log(" BACKEND RESPONSE DEBUG - All returned fields:",{orderKeys:Object.keys((pt==null?void 0:pt.order)||{}),fullOrder:pt==null?void 0:pt.order,hasInvoiceNumber:!!Bt,hasBillNumber:!!Pt,returnedInvoiceNumber:Bt,returnedBillNumber:Pt}),!Bt&&!Pt&&(console.error(" CRITICAL: Backend did not save invoice/bill number!"),console.error(" Sent:",Qe.invoiceNumber,"Got back:",Bt),console.error(" This is why sales report shows ORDER-xxxxx instead of BILL-xxx"),console.log(" WORKAROUND: Invoice number is embedded in customerName field for sales report")),n.selectedTable)try{console.log(` Freeing up table: ${n.selectedTable.tableNumber||n.selectedTable.number}`),await or.request(`/table/${n.selectedTable._id||n.selectedTable.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"available"})}),console.log(" Table freed successfully")}catch(kt){console.error(" Failed to free table:",kt)}}}catch(tt){if(console.error(" Failed to save order:",tt),console.error(" Error details:",{message:tt.message,stack:tt.stack}),n.existingOrderIds&&n.existingOrderIds.length>0){console.log(" Attempting emergency fallback KOT status updates due to order save failure...");try{const ze=n.existingOrderIds.map(async Ze=>{try{console.log(" Emergency: Updating KOT with discount info and marking as consolidated:",Ze);const Ae=d.reduce((Bt,Pt)=>Bt+Pt.price*Pt.quantity,0),Qe=Ae-H(),pt=await or.request(`/counter-order/orders/${Ze}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentStatus:"consolidated",status:"consolidated",invoiceNumber:fe,totalAmount:Qe,grandTotal:Qe,subtotal:Ae,discountAmount:H(),discount:I?{type:I.type,value:I.value,amount:H(),remark:I.remark}:null,isPartOfComprehensiveBill:!0})});return console.log(" Emergency fallback KOT update with discount and consolidated status successful:",Ze,pt),pt}catch(Ae){return console.error(" Emergency fallback KOT update failed:",Ze,Ae),null}});await Promise.all(ze),console.log(" Emergency fallback KOT updates with discount and consolidated status completed")}catch(ze){console.error(" Emergency fallback also failed:",ze)}}}console.log(" handleDone() completing - navigating back to menu with refresh flags"),console.log(" Navigation state:",{refreshTables:!0,refreshKOTs:!0}),e("/counter/menu",{state:{customerName:"Walk-in Customer",phoneNumber:"0000000000",selectedBranch:n.selectedBranch,selectedCategory:n.selectedCategory,selectedTable:null,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"}),cartItems:[],refreshTables:!0,refreshKOTs:!0}})},W=async()=>{n.isKOTOrder||n.existingOrderId?console.log(" KOT order canceled - keeping current invoice number available:",n.invoiceNumber):console.log(" Order canceled - next order will generate new bill number when needed"),e("/counter/menu",{state:{customerName:"Walk-in Customer",phoneNumber:"0000000000",selectedBranch:n.selectedBranch,selectedCategory:n.selectedCategory,date:new Date().toLocaleDateString("en-IN"),time:new Date().toLocaleTimeString("en-IN",{hour12:!0,minute:"2-digit"}),cartItems:[],refreshTables:!0,refreshKOTs:!0}})},G=async()=>{var se,fe,ue,We;if(!a){s(!0),l(null);try{let we=h;if((!we||we==="PENDING")&&!b){console.log(" Print Bill: Generating bill number before printing...");try{we=await Fj(n.selectedBranch._id,((se=n.selectedCategory)==null?void 0:se.name)||"Self Service"),console.log(" Print Bill: Generated bill number:",we),p(we),j(!0),await new Promise(re=>setTimeout(re,100))}catch(re){console.error(" Failed to generate bill number for printing:",re),we="001"}}else console.log(" Print Bill: Using existing bill number:",we);const Me=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),Ee=d.reduce((re,ce)=>re+ce.price*ce.quantity,0),Be=Ee-H(),it={selectedBranch:n.selectedBranch,selectedTable:n.selectedTable,selectedCategory:n.selectedCategory,invoiceNumber:we,billNumber:we,date:n.date,time:n.time,customerName:n.customerName,phoneNumber:n.phoneNumber,cartItems:d,subtotal:Ee,total:Be,discountAmount:H(),discountRemark:(I==null?void 0:I.remark)||"",discount:I,paymentMethod:"Pending",amountReceived:0,change:0,isComprehensiveBill:n.isComprehensiveBill,kotNumbers:n.kotNumbers};console.log(" BillGeneration handlePrint - Sending printData to thermal printer:",{selectedTable:it.selectedTable,selectedCategory:it.selectedCategory,hasTable:!!((fe=it.selectedTable)!=null&&fe.tableNumber||(ue=it.selectedTable)!=null&&ue.number),categoryName:(We=it.selectedCategory)==null?void 0:We.name,discountAmount:it.discountAmount,appliedDiscount:it.discount,invoiceNumber:it.invoiceNumber,billNumber:it.billNumber,finalInvoiceNumber:we,originalInvoiceNumber:h});try{const re={method:"network",printerIP:Me.ip||"192.168.1.100",port:Me.port||9100},ce=await Promise.race([ni.printBill(it,re),new Promise((Z,de)=>setTimeout(()=>de(new Error("Print operation timed out after 5 seconds")),5e3))]);if(ce&&ce.method){const de={"popup-window":"Bill printed using browser (thermal printer not found)","current-window":"Bill printed using browser (thermal printer not found)","current-window-fallback":"Bill printed using browser (thermal printer not found)",network:"Bill printed to thermal printer successfully!",usb:"Bill printed to USB thermal printer successfully!"}[ce.method]||"Bill printed successfully!";l({type:"success",message:de})}else l({type:"success",message:"Bill printed successfully!"});await _()}catch(re){console.log("Thermal printing failed:",re.message),l({type:"success",message:"Bill printed using browser fallback"}),await _()}console.log(" Print Bill: Completing order after successful print..."),setTimeout(async()=>{try{await R(we)}catch(re){console.error(" Error completing order after print:",re)}},1e3),setTimeout(()=>l(null),3e3)}catch(we){console.error("Print error:",we),l({type:"error",message:we.message||"Failed to print bill. Please try again."}),setTimeout(()=>l(null),5e3)}finally{s(!1)}}},oe=async se=>{var fe,ue,We;if(!a){s(!0);try{const we=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),Me=d.reduce((re,ce)=>re+ce.price*ce.quantity,0),Ee=H(),Be=Me-Ee;console.log(" Enter Key Print with Bill Number - Debug:",{billNumber:se,subtotal:Me,discountAmount:Ee,total:Be,appliedDiscount:I});const it={selectedBranch:n.selectedBranch,selectedTable:n.selectedTable,selectedCategory:n.selectedCategory,invoiceNumber:se,billNumber:se,date:n.date,time:n.time,customerName:n.customerName,phoneNumber:n.phoneNumber,cartItems:d,subtotal:Me,total:Be,discountAmount:Ee,discountRemark:(I==null?void 0:I.remark)||"",discount:I,paymentMethod:"Pending",amountReceived:0,change:0,isComprehensiveBill:n.isComprehensiveBill,kotNumbers:n.kotNumbers};console.log(" BillGeneration handleDirectPrintWithBillNumber - Sending printData to thermal printer:",{selectedTable:it.selectedTable,selectedCategory:it.selectedCategory,hasTable:!!((fe=it.selectedTable)!=null&&fe.tableNumber||(ue=it.selectedTable)!=null&&ue.number),categoryName:(We=it.selectedCategory)==null?void 0:We.name,discountAmount:it.discountAmount,appliedDiscount:it.discount,totalAfterDiscount:it.total,invoiceNumber:it.invoiceNumber,billNumber:it.billNumber,finalBillNumber:se});try{const re={method:"network",printerIP:we.ip||"192.168.1.100",port:we.port||9100};await Promise.race([ni.printBill(it,re),new Promise((ce,Z)=>setTimeout(()=>Z(new Error("Thermal printer service timeout")),3e3))]),console.log(" Enter key: Bill printed via thermal printer service with bill number:",se),await _()}catch(re){console.log(" Enter key: Thermal printing failed:",re.message)}}catch(we){console.error(" Enter key: All printing methods failed:",we)}finally{s(!1)}}},q=()=>{e("/counter/print-settings",{state:{returnTo:"/counter/bill-generation",orderData:n}})},V=se=>{const fe=d.filter((ue,We)=>We!==se);u(fe),fe.length===0&&e("/counter/menu",{state:{customerName:n.customerName,phoneNumber:n.phoneNumber,selectedBranch:n.selectedBranch,invoiceNumber:n.invoiceNumber,date:n.date,time:n.time,cartItems:[]}})},U=(se,fe)=>{let ue=parseInt(fe);(isNaN(ue)||ue<0)&&(ue=0);const We=[...d];ue===0?We.splice(se,1):We[se]={...We[se],quantity:ue},u(We),We.length===0&&e("/counter/menu",{state:{customerName:n.customerName,phoneNumber:n.phoneNumber,selectedBranch:n.selectedBranch,invoiceNumber:n.invoiceNumber,date:n.date,time:n.time,cartItems:[]}})},X=()=>{const se=n.selectedTable&&(n.selectedTable.tableNumber||n.selectedTable.number);console.log(" handleBack called:",{isRestaurantOrder:se,selectedTable:n.selectedTable,cartItemsCount:d.length}),e("/counter/menu",{state:{...n,cartItems:se?[]:d,refreshTables:!0,refreshKOTs:!0}})},H=()=>I?I.type==="percentage"?je*I.value/100:Math.min(I.value,je):0,Q=()=>je-H(),le=()=>{const se=parseFloat(O);if(isNaN(se)||se<=0){alert("Please enter a valid discount value");return}if(A==="percentage"&&se>100){alert("Percentage discount cannot be more than 100%");return}if(A==="amount"&&se>je){alert("Discount amount cannot be more than total amount");return}if(!C.trim()){alert("Please enter a remark for the discount");return}z({type:A,value:se,remark:C.trim()}),y(!1),S(""),k("")},me=()=>{z(null)},je=d.reduce((se,fe)=>se+fe.price*fe.quantity,0),ee=Q();return n?r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Bill Summary"}),r.jsx("p",{className:"counter-subtitle",children:"Review your order details"})]}),r.jsxs("div",{style:{background:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Customer:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",n.customerName||"Walk-in Customer"]}),n.phoneNumber&&n.phoneNumber!=="0000000000"&&r.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"0.875rem",color:"#4a5568"},children:[" ",n.phoneNumber]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:n.selectedTable?"1fr 1fr 1fr":"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Invoice No:"}),r.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:h||"Generating..."}),!h&&r.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.75rem",color:"#e53e3e"},children:"Debug: Generating invoice number..."})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Order Date & Time:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",n.date]}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c",fontSize:"0.875rem"},children:[" ",n.time]})]}),n.selectedTable&&r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Table:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",n.selectedTable.tableNumber||n.selectedTable.number]})]})]}),r.jsx("div",{style:{background:"#f0f9ff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #bfdbfe",marginBottom:"16px",fontSize:"0.875rem",color:"#1e40af"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{children:" Bill Generated:"}),r.jsxs("span",{style:{fontWeight:"600"},children:[new Date().toLocaleDateString("en-IN")," at ",new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})]})]})}),n.isComprehensiveBill&&n.kotNumbers&&n.kotNumbers.length>1&&r.jsxs("div",{style:{background:"#f0f9ff",padding:"12px",borderRadius:"8px",border:"1px solid #0ea5e9",marginBottom:"16px"},children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#0369a1",fontWeight:"600"},children:" Comprehensive Bill - Combined KOTs:"}),r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#0369a1"},children:[n.kotNumbers.join(", ")," (",n.kotNumbers.length," KOTs combined)"]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{background:"white",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[r.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",background:"#f8fafc"},children:r.jsxs("h3",{style:{margin:"0",fontSize:"1rem",fontWeight:"600",color:"#1a202c"},children:["Order Items (",d.length,")"]})}),r.jsx("div",{style:{padding:"0"},children:d.map((se,fe)=>r.jsxs("div",{style:{padding:"12px 16px",borderBottom:fe<d.length-1?"1px solid #f1f5f9":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"600",color:"#1a202c"},children:se.name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("button",{onClick:()=>U(fe,se.quantity-1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",width:"24px",height:"24px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),r.jsx("input",{type:"number",value:se.quantity,onChange:ue=>U(fe,parseInt(ue.target.value)||0),style:{width:"50px",padding:"4px 8px",border:"1px solid #d1d5db",borderRadius:"4px",textAlign:"center",fontSize:"14px"},min:"0"}),r.jsx("button",{onClick:()=>U(fe,se.quantity+1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",width:"24px",height:"24px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]}),r.jsxs("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["@ ",se.price]})]})]}),r.jsxs("div",{style:{textAlign:"right",marginLeft:"16px"},children:[r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:["",(se.price*se.quantity).toFixed(2)]}),r.jsx("button",{onClick:()=>V(fe),style:{background:"none",border:"none",color:"#ef4444",fontSize:"0.75rem",cursor:"pointer",marginTop:"4px"},children:"Remove"})]})]},fe))})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{background:"#f7fafc",padding:"20px",borderRadius:"12px",marginBottom:"24px",border:"2px dashed #e2e8f0"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[r.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",color:"#1a202c"},children:n.selectedBranch.name}),r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:n.selectedBranch.address}),r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:[" ",n.selectedBranch.phone]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:n.selectedTable?"1fr 1fr 1fr":"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Invoice No:"}),r.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:h||"Generating..."}),!h&&r.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"0.75rem",color:"#e53e3e"},children:"Debug: Generating invoice number..."})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Order Date & Time:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",n.date]}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c",fontSize:"0.875rem"},children:[" ",n.time]})]}),n.selectedTable&&r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Table:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[" ",n.selectedTable.tableNumber||n.selectedTable.number]})]})]}),r.jsx("div",{style:{background:"#f0f9ff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #bfdbfe",marginBottom:"16px",fontSize:"0.875rem",color:"#1e40af"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{children:" Bill Generated:"}),r.jsxs("span",{style:{fontWeight:"600"},children:[new Date().toLocaleDateString("en-IN")," at ",new Date().toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})]})]})}),n.isComprehensiveBill&&n.kotNumbers&&n.kotNumbers.length>1&&r.jsxs("div",{style:{background:"#f0f9ff",padding:"12px",borderRadius:"8px",border:"1px solid #0ea5e9",marginBottom:"16px"},children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#0369a1",fontWeight:"600"},children:" Comprehensive Bill - Combined KOTs:"}),r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#0369a1"},children:[n.kotNumbers.join(", ")," (",n.kotNumbers.length," KOTs combined)"]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#1a202c"},children:"Order Items"}),d.length===0?r.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#718096",fontStyle:"italic"},children:"No items in cart"}):d.map((se,fe)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:fe<d.length-1?"1px solid #e2e8f0":"none"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"500",color:"#1a202c"},children:se.name}),r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:["",se.price.toFixed(2)," each"]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginRight:"16px"},children:[r.jsx("button",{onClick:()=>U(fe,se.quantity-1),style:{background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",fontWeight:"600",color:"#374151",transition:"all 0.2s"},onMouseOver:ue=>{ue.target.style.background="#e5e7eb",ue.target.style.borderColor="#9ca3af"},onMouseOut:ue=>{ue.target.style.background="#f3f4f6",ue.target.style.borderColor="#d1d5db"},title:"Decrease quantity",children:"-"}),r.jsx("div",{style:{minWidth:"40px",textAlign:"center",fontSize:"1rem",fontWeight:"600",color:"#1f2937",padding:"4px 8px",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"4px"},children:se.quantity}),r.jsx("button",{onClick:()=>U(fe,se.quantity+1),style:{background:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"6px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"1rem",fontWeight:"600",color:"white",transition:"all 0.2s"},onMouseOver:ue=>{ue.target.style.background="#2563eb",ue.target.style.borderColor="#2563eb"},onMouseOut:ue=>{ue.target.style.background="#3b82f6",ue.target.style.borderColor="#3b82f6"},title:"Increase quantity",children:"+"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsxs("div",{style:{fontWeight:"600",color:"#1a202c",minWidth:"80px",textAlign:"right"},children:["",(se.price*se.quantity).toFixed(2)]}),r.jsx("button",{onClick:()=>V(fe),style:{background:"#dc2626",color:"white",border:"none",borderRadius:"6px",padding:"6px 10px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"500",transition:"all 0.2s"},onMouseOver:ue=>ue.target.style.background="#b91c1c",onMouseOut:ue=>ue.target.style.background="#dc2626",title:"Remove this item completely",children:" Remove"})]})]},fe))]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.1rem",fontWeight:"500",color:"#4a5568",marginBottom:"8px"},children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["",je.toFixed(2)]})]}),I&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1rem",color:"#e53e3e",marginBottom:"4px"},children:[r.jsxs("span",{children:["Discount (",I.type==="percentage"?`${I.value}%`:`${I.value}`,"):"]}),r.jsxs("span",{children:["-",H().toFixed(2)]})]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"#718096",fontStyle:"italic",marginBottom:"8px",textAlign:"right"},children:["Reason: ",I.remark]})]}),r.jsx("hr",{style:{border:"none",borderTop:"2px solid #1a202c",margin:"12px 0"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.5rem",fontWeight:"700",color:"#1a202c"},children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{children:["",ee.toFixed(2)]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",justifyContent:"center"},children:[r.jsx("button",{onClick:()=>y(!0),style:{background:I?"#f59e0b":"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:se=>{se.target.style.background=I?"#d97706":"#059669"},onMouseOut:se=>{se.target.style.background=I?"#f59e0b":"#10b981"},children:I?" Edit Discount":" Add Discount"}),I&&r.jsx("button",{onClick:me,style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:se=>se.target.style.background="#b91c1c",onMouseOut:se=>se.target.style.background="#dc2626",children:" Remove Discount"})]})]}),r.jsxs("div",{style:{background:B?"#fef3c7":"#f8fafc",padding:"16px",borderRadius:"8px",border:`2px solid ${B?"#f59e0b":"#e2e8f0"}`,marginBottom:"16px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:B?"12px":"0"},children:[r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",color:B?"#92400e":"#374151"},children:[r.jsx("input",{type:"checkbox",checked:B,onChange:se=>{se.target.checked?P(!0):(M(!1),N(""))},style:{width:"18px",height:"18px",cursor:"pointer"}})," Complimentary Bill"]}),r.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"(Alt+C)"})]}),B&&F&&r.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",fontStyle:"italic",background:"#fffbeb",padding:"8px 12px",borderRadius:"6px",border:"1px solid #fbbf24"},children:[r.jsx("strong",{children:"Reason:"})," ",F]})]}),i&&r.jsx("div",{style:{background:i.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${i.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"16px",textAlign:"center"},children:r.jsxs("div",{style:{color:i.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[i.type==="success"?"":""," ",i.message]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 2fr",gap:"12px",marginTop:"24px"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:X,style:{padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},children:" Back"}),r.jsx("button",{className:"counter-button-secondary",onClick:W,style:{background:"#dc2626",borderColor:"#dc2626",color:"white",padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},title:"Cancel this order and start fresh",children:" Cancel Order"}),r.jsx("button",{className:"counter-button-secondary",onClick:G,disabled:a,style:{opacity:a?.6:1,cursor:a?"not-allowed":"pointer",padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},title:"Print bill to thermal printer (Press Enter)",children:a?" Printing...":" Print Bill"}),r.jsx("button",{className:"counter-button-secondary",onClick:q,style:{padding:"14px 24px",minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600"},title:"Configure thermal printer settings",children:" Settings"})]})]}),v&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",minWidth:"450px",maxWidth:"500px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onKeyDown:se=>{se.key==="Enter"?(se.preventDefault(),console.log(" Enter pressed in discount popup - applying discount"),le()):se.key==="Escape"&&(se.preventDefault(),console.log(" Escape pressed in discount popup - closing"),y(!1),S(""),k(""))},tabIndex:0,children:[r.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"1.5rem",color:"#1f2937",fontWeight:"600"},children:" Add Discount"}),r.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",marginBottom:"24px"},children:[r.jsxs("p",{style:{margin:"0 0 8px 0",fontSize:"0.875rem",color:"#6b7280"},children:["Current Subtotal: ",je.toFixed(2)]}),I&&r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#e53e3e"},children:["Current Discount: ",I.type==="percentage"?`${I.value}%`:`${I.value}`," (",I.remark,")"]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Discount Type:"}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>E("percentage"),style:{flex:1,padding:"10px",border:`2px solid ${A==="percentage"?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",background:A==="percentage"?"#eff6ff":"white",color:A==="percentage"?"#2563eb":"#6b7280",fontWeight:"600",cursor:"pointer"},children:" Percentage (%)"}),r.jsx("button",{onClick:()=>E("amount"),style:{flex:1,padding:"10px",border:`2px solid ${A==="amount"?"#3b82f6":"#d1d5db"}`,borderRadius:"8px",background:A==="amount"?"#eff6ff":"white",color:A==="amount"?"#2563eb":"#6b7280",fontWeight:"600",cursor:"pointer"},children:" Amount ()"})]})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:["Discount ",A==="percentage"?"Percentage":"Amount",":"]}),r.jsx("input",{type:"number",min:"0",max:A==="percentage"?"100":je,step:A==="percentage"?"1":"0.01",value:O,onChange:se=>S(se.target.value),onKeyDown:se=>{if(se.key==="Enter"&&(se.preventDefault(),O)){const fe=document.querySelector('input[placeholder*="Dussehra Sale"]');fe&&fe.focus()}},placeholder:A==="percentage"?"Enter percentage (e.g., 10)":"Enter amount (e.g., 50.00)",style:{width:"100%",padding:"12px",fontSize:"1.1rem",border:"2px solid #d1d5db",borderRadius:"8px",textAlign:"center",fontWeight:"600"}}),O&&r.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.875rem",color:"#059669",textAlign:"center"},children:["Discount Amount: ",A==="percentage"?(je*parseFloat(O||0)/100).toFixed(2):parseFloat(O||0).toFixed(2)]})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Remark (Required):"}),r.jsx("input",{type:"text",value:C,onChange:se=>k(se.target.value),onKeyDown:se=>{se.key==="Enter"&&(se.preventDefault(),O&&C.trim()&&(console.log(" Enter pressed in remark field - applying discount"),le()))},placeholder:"e.g., Dussehra Sale, Customer Loyalty, etc.",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"2px solid #d1d5db",borderRadius:"8px"}})]}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>{y(!1),S(""),k("")},style:{flex:1,background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:le,style:{flex:1,background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Apply Discount"})]})]})}),L&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",padding:"32px",borderRadius:"12px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[r.jsx("h2",{style:{margin:"0 0 24px 0",fontSize:"1.5rem",fontWeight:"700",color:"#1a202c",textAlign:"center"},children:" Mark as Complimentary"}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"Reason for Complimentary:"}),r.jsx("input",{type:"text",value:F,onChange:se=>N(se.target.value),onKeyDown:se=>{se.key==="Enter"&&F.trim()&&(M(!0),P(!1)),se.key==="Escape"&&(P(!1),N(""))},placeholder:"e.g., Owner's friend, Staff meal, Promotional offer, etc.",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"2px solid #d1d5db",borderRadius:"8px"},autoFocus:!0}),r.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"This bill will not appear in sales reports"})]}),r.jsxs("div",{style:{display:"flex",gap:"12px"},children:[r.jsx("button",{onClick:()=>{P(!1),N("")},style:{flex:1,background:"#6b7280",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:()=>{F.trim()&&(M(!0),P(!1))},disabled:!F.trim(),style:{flex:1,background:F.trim()?"#f59e0b":"#d1d5db",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"1rem",fontWeight:"600",cursor:F.trim()?"pointer":"not-allowed"},children:"Mark Complimentary"})]})]})})]})}):r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("p",{children:"Order data not found. Please start over."}),r.jsx("button",{className:"counter-button",onClick:()=>e("/counter/menu"),children:"Go Back"})]})})})},rpe=()=>{const e=kn(),n=ua().state,[a,s]=w.useState("cash"),[i,l]=w.useState(""),[d,u]=w.useState(!1),[h,p]=w.useState("");if(w.useEffect(()=>{if(n){const S=n.totalAmount||0,C=S*.05,k=S+C;l(k.toFixed(2))}},[n]),!n)return r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("p",{children:"Order data not found. Please start over."}),r.jsx("button",{className:"counter-button",onClick:()=>e("/counter/bill-generation"),children:"Go Back"})]})})});const m=n.totalAmount||0,g=m*.05,b=m+g,j=a==="cash"&&i?Math.max(0,parseFloat(i)-b):0,v=S=>{s(S),l(b.toFixed(2)),p("")},y=S=>{l(S),p("")},A=()=>{if(a==="cash"){const S=parseFloat(i);if(!i||isNaN(S))return p("Amount received is required for cash payments"),!1;if(S<b)return p("Amount received is less than total amount"),!1}if(a==="card"||a==="upi"){const S=parseFloat(i);(!S||S!==b)&&l(b.toFixed(2))}return!0},E=async()=>{var S,C,k,I,z,B;if(A()){u(!0),p("");try{const M={customerName:n.customerName,phoneNumber:n.phoneNumber,branchId:n.selectedBranch._id,branchName:((S=n.selectedBranch)==null?void 0:S.name)||"Unknown Branch",categoryId:((C=n.selectedCategory)==null?void 0:C._id)||null,categoryName:((k=n.selectedCategory)==null?void 0:k.name)||"Self Service",invoiceNumber:n.invoiceNumber,invoiceId:n.invoiceId,items:n.cartItems.map(oe=>({menuItemId:oe._id,name:oe.name,price:oe.price,quantity:oe.quantity,total:oe.price*oe.quantity})),subtotal:m,tax:g,total:b,paymentMethod:a,amountReceived:a==="cash"?parseFloat(i):b,change:j,status:"completed",orderDate:new Date().toISOString(),counterUserId:localStorage.getItem("counterUserId")},F=oe=>Promise.race([or.createOrder(oe),new Promise((q,V)=>setTimeout(()=>V(new Error("Order creation timed out")),1e4))]),N=oe=>Promise.race([or.createBill(oe),new Promise((q,V)=>setTimeout(()=>V(new Error("Bill creation timed out")),1e4))]),L=oe=>Promise.race([or.processPayment(oe),new Promise((q,V)=>setTimeout(()=>V(new Error("Payment processing timed out")),1e4))]),P=await F(M);console.log("Order created:",P);const _={orderId:((I=P.order)==null?void 0:I._id)||P._id,...M},R=await N(_);console.log("Bill created:",R);const W={orderId:((z=P.order)==null?void 0:z._id)||P._id,billId:((B=R.bill)==null?void 0:B._id)||R._id,amount:b,paymentMethod:a,amountReceived:a==="cash"?parseFloat(i):b,change:j,status:"completed",paymentDate:new Date().toISOString()},G=await L(W);console.log("Payment processed:",G),setTimeout(()=>{var oe,q,V;e("/counter/payment-success",{state:{...n,orderId:((oe=P.order)==null?void 0:oe._id)||P._id,billId:((q=R.bill)==null?void 0:q._id)||R._id,paymentId:((V=G.payment)==null?void 0:V._id)||G._id,paymentMethod:a,amountReceived:a==="cash"?parseFloat(i):b,change:j,total:b}})},100)}catch(M){console.error("Error processing payment:",M),p(M.message||"Failed to process payment. Please try again.")}finally{u(!1)}}},O=()=>{e("/counter/bill-generation",{state:n})};return r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Payment"}),r.jsx("p",{className:"counter-subtitle",children:"Process customer payment"})]}),r.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem"},children:"Order Summary"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:["",m.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"Tax (5%):"}),r.jsxs("span",{children:["",g.toFixed(2)]})]}),r.jsx("hr",{style:{margin:"12px 0",border:"none",borderTop:"2px solid #1a202c"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.25rem",fontWeight:"700"},children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{children:["",b.toFixed(2)]})]})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1rem"},children:"Payment Method"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[r.jsxs("button",{className:`counter-item ${a==="cash"?"selected":""}`,onClick:()=>v("cash"),style:{padding:"16px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsx("div",{style:{fontWeight:"600"},children:"Cash"})]}),r.jsxs("button",{className:`counter-item ${a==="card"?"selected":""}`,onClick:()=>v("card"),style:{padding:"16px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsx("div",{style:{fontWeight:"600"},children:"Card"})]}),r.jsxs("button",{className:`counter-item ${a==="upi"?"selected":""}`,onClick:()=>v("upi"),style:{padding:"16px",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsx("div",{style:{fontWeight:"600"},children:"UPI"})]})]})]}),a==="cash"&&r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("div",{className:"counter-form-group",children:[r.jsx("label",{className:"counter-label",children:"Amount Received * (Auto-filled)"}),r.jsx("input",{type:"number",className:"counter-input",placeholder:"Amount auto-filled with total",value:i,onChange:S=>y(S.target.value),min:b,step:"0.01"}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"4px",fontStyle:"italic"},children:[" Amount is automatically filled with the total (",b.toFixed(2),"). You can adjust if needed."]})]}),i&&!isNaN(parseFloat(i))&&r.jsxs("div",{style:{background:j>0?"#f0fff4":"#fff5f5",padding:"12px",borderRadius:"8px",border:`1px solid ${j>0?"#68d391":"#fc8181"}`},children:[r.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px"},children:["Change to Return: ",j.toFixed(2)]}),j<0&&r.jsx("div",{style:{color:"#e53e3e",fontSize:"0.875rem"},children:"Insufficient amount received"})]})]}),(a==="card"||a==="upi")&&r.jsxs("div",{style:{background:"#e6fffa",padding:"16px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #81e6d9"},children:[r.jsx("div",{style:{fontWeight:"600",marginBottom:"8px"},children:a==="card"?"Card Payment":"UPI Payment"}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"#2d3748"},children:["Amount: ",b.toFixed(2)]}),r.jsxs("div",{style:{fontSize:"0.875rem",color:"#2d3748",marginTop:"4px"},children:["Please complete the payment on the ",a==="card"?"card terminal":"UPI app"]})]}),h&&r.jsx("div",{className:"counter-error",style:{marginBottom:"24px"},children:h}),r.jsxs("div",{style:{display:"flex",gap:"16px"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:O,disabled:d,style:{flex:1},children:" Back"}),r.jsx("button",{className:"counter-button",onClick:E,disabled:d,style:{flex:2},children:d?r.jsx("div",{className:"counter-spinner",style:{width:"20px",height:"20px"}}):"Complete Payment"})]})]})})};class npe{constructor(){this.storageKey="counter_orders"}getAllOrders(){try{const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading orders from localStorage:",t),[]}}getOrdersByBranch(t){return this.getAllOrders().filter(a=>a.branchId===t)}saveOrder(t){try{const n=this.getAllOrders(),a={_id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,invoiceNumber:t.invoiceNumber,branchId:t.selectedBranch._id,branchName:t.selectedBranch.name,customerName:t.customerName,phoneNumber:t.phoneNumber,orderDate:new Date().toISOString(),createdAt:new Date().toISOString(),items:t.cartItems.map(s=>({name:s.name,price:s.price,quantity:s.quantity,total:s.price*s.quantity})),total:t.totalAmount||t.total||0,status:"completed",paymentMethod:t.paymentMethod||"cash",paymentStatus:"paid",date:t.date,time:t.time,amountReceived:t.amountReceived||0,change:t.change||0};return n.push(a),n.sort((s,i)=>new Date(i.orderDate)-new Date(s.orderDate)),localStorage.setItem(this.storageKey,JSON.stringify(n)),console.log(" Order saved successfully:",a.invoiceNumber),a}catch(n){throw console.error("Error saving order:",n),n}}updateOrderStatus(t,n){try{const a=this.getAllOrders(),s=a.findIndex(i=>i._id===t);if(s!==-1)return a[s].status=n,a[s].updatedAt=new Date().toISOString(),localStorage.setItem(this.storageKey,JSON.stringify(a)),a[s];throw new Error("Order not found")}catch(a){throw console.error("Error updating order status:",a),a}}deleteOrder(t){try{const a=this.getAllOrders().filter(s=>s._id!==t);return localStorage.setItem(this.storageKey,JSON.stringify(a)),!0}catch(n){throw console.error("Error deleting order:",n),n}}clearAllOrders(){try{return localStorage.removeItem(this.storageKey),console.log(" All orders cleared"),!0}catch(t){throw console.error("Error clearing orders:",t),t}}getOrderStats(t=null){const n=t?this.getOrdersByBranch(t):this.getAllOrders(),a=n.length,s=n.filter(d=>d.status==="completed").length,i=n.filter(d=>d.status==="pending").length,l=n.reduce((d,u)=>d+(u.total||0),0);return{totalOrders:a,completedOrders:s,pendingOrders:i,totalSales:l,averageOrderValue:a>0?l/a:0}}exportOrders(){const t=this.getAllOrders(),n=JSON.stringify(t,null,2),a=new Blob([n],{type:"application/json"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=`counter_orders_${new Date().toISOString().split("T")[0]}.json`,i.click(),URL.revokeObjectURL(s)}}const ape=new npe,spe=()=>{const e=kn(),n=ua().state,[a,s]=w.useState(!1),[i,l]=w.useState(null);if(w.useEffect(()=>{if(n)try{const g=ape.saveOrder(n);console.log("Order saved to storage:",g.invoiceNumber)}catch(g){console.error("Failed to save order:",g)}const m=setTimeout(()=>{e("/counter/branch-selection")},1e4);return()=>clearTimeout(m)},[e,n]),!n)return r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("p",{children:"Payment data not found. Please start over."}),r.jsx("button",{className:"counter-button",onClick:()=>e("/counter/branch-selection"),children:"New Order"})]})})});const d=()=>{e("/counter/branch-selection")},u=async()=>{if(!a){s(!0),l(null);try{const m=JSON.parse(localStorage.getItem("thermalPrinterSettings")||"{}"),g={method:m.method||"auto",printerIP:m.ip||"192.168.1.100",port:m.port||9100},b=await Promise.race([ni.printReceipt(n,g),new Promise((j,v)=>setTimeout(()=>v(new Error("Print operation timed out after 5 seconds")),5e3))]);if(b&&b.method){const v={"popup-window":"Receipt printed using browser (thermal printer not found)","current-window":"Receipt printed using browser (thermal printer not found)","current-window-fallback":"Receipt printed using browser (thermal printer not found)",network:"Receipt printed to thermal printer successfully!",usb:"Receipt printed to USB thermal printer successfully!"}[b.method]||"Receipt printed successfully!";l({type:"success",message:v})}else l({type:"success",message:"Receipt printed successfully!"});setTimeout(()=>l(null),3e3)}catch(m){console.error("Print error:",m),l({type:"error",message:m.message||"Failed to print receipt. Please try again."}),setTimeout(()=>l(null),5e3)}finally{s(!1)}}},h=()=>{e("/counter/print-settings",{state:{returnTo:"/counter/payment-success",paymentData:n}})},p=()=>{e("/counter/orders")};return r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("div",{style:{fontSize:"4rem",color:"#48bb78",marginBottom:"16px",textAlign:"center"},children:""}),r.jsx("h1",{className:"counter-title",style:{color:"#48bb78"},children:"Payment Successful!"}),r.jsx("p",{className:"counter-subtitle",children:"Order has been processed successfully"})]}),r.jsxs("div",{style:{background:"#f7fafc",padding:"24px",borderRadius:"12px",marginBottom:"24px",border:"2px solid #48bb78"},children:[r.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[r.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",color:"#1a202c"},children:n.selectedBranch.name}),r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:n.selectedBranch.address}),r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:[" ",n.selectedBranch.phone]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Invoice No:"}),r.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:n.invoiceNumber})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Date & Time:"}),r.jsxs("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:[n.date," ",n.time]})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Customer:"}),r.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:n.customerName})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:"Phone:"}),r.jsx("p",{style:{margin:"0",fontWeight:"600",color:"#1a202c"},children:n.phoneNumber})]})]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#1a202c"},children:"Items Ordered"}),n.cartItems.map((m,g)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:g<n.cartItems.length-1?"1px solid #e2e8f0":"none"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("p",{style:{margin:"0",fontWeight:"500",color:"#1a202c"},children:m.name}),r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem",color:"#718096"},children:["",m.price.toFixed(2),"  ",m.quantity]})]}),r.jsxs("div",{style:{fontWeight:"600",color:"#1a202c"},children:["",(m.price*m.quantity).toFixed(2)]})]},g))]}),r.jsx("hr",{style:{border:"none",borderTop:"1px solid #e2e8f0",margin:"16px 0"}}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{style:{color:"#718096"},children:"Subtotal:"}),r.jsxs("span",{style:{fontWeight:"500"},children:["",(n.total-n.total*.05).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{style:{color:"#718096"},children:"Tax (5%):"}),r.jsxs("span",{style:{fontWeight:"500"},children:["",(n.total*.05).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[r.jsx("span",{style:{color:"#718096"},children:"Payment Method:"}),r.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize"},children:n.paymentMethod})]}),n.paymentMethod==="cash"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{style:{color:"#718096"},children:"Amount Received:"}),r.jsxs("span",{style:{fontWeight:"500"},children:["",n.amountReceived.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[r.jsx("span",{style:{color:"#718096"},children:"Change:"}),r.jsxs("span",{style:{fontWeight:"500"},children:["",n.change.toFixed(2)]})]})]}),r.jsx("hr",{style:{border:"none",borderTop:"2px solid #1a202c",margin:"12px 0"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.25rem",fontWeight:"700",color:"#1a202c"},children:[r.jsx("span",{children:"Total Paid:"}),r.jsxs("span",{children:["",n.total.toFixed(2)]})]})]}),r.jsxs("div",{style:{background:"#f0fff4",padding:"12px",borderRadius:"8px",border:"1px solid #68d391",textAlign:"center"},children:[r.jsx("div",{style:{color:"#22543d",fontWeight:"600"},children:" Payment Completed Successfully"}),r.jsx("div",{style:{color:"#2f855a",fontSize:"0.875rem",marginTop:"4px"},children:"Thank you for your business!"})]})]}),i&&r.jsx("div",{style:{background:i.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${i.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"16px",textAlign:"center"},children:r.jsxs("div",{style:{color:i.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[i.type==="success"?"":""," ",i.message]})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"12px",marginBottom:"20px"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:u,disabled:a,style:{opacity:a?.6:1,cursor:a?"not-allowed":"pointer"},title:"Print receipt to thermal printer",children:a?" Printing...":" Print Receipt"}),r.jsx("button",{className:"counter-button-secondary",onClick:h,title:"Configure thermal printer settings",children:" Print Settings"}),r.jsx("button",{className:"counter-button-secondary",onClick:p,children:" View Orders"}),r.jsx("button",{className:"counter-button",onClick:d,children:" New Order"})]}),r.jsx("div",{style:{textAlign:"center",fontSize:"0.875rem",color:"#718096",fontStyle:"italic"},children:"Automatically redirecting to new order in 10 seconds..."})]})})},ipe=()=>{const e=kn(),[t,n]=w.useState([]),[a,s]=w.useState(!0),[i,l]=w.useState(null),[d,u]=w.useState(null);w.useEffect(()=>{const j=localStorage.getItem("selectedBranch");if(j){const v=JSON.parse(j);u(v),h(v._id)}else e("/counter/branch-selection")},[e]);const h=async j=>{try{s(!0),l(null);const v=await or.getOrders(j),A=(v.orders||v.data||v||[]).sort((E,O)=>new Date(O.orderDate||O.createdAt)-new Date(E.orderDate||E.createdAt));n(A)}catch(v){console.error("Error loading orders:",v),l("Failed to load orders. Please try again.")}finally{s(!1)}},p=()=>{e("/counter/branch-selection")},m=()=>{e("/counter/branch-selection")},g=j=>{try{const v=new Date(j);return v.toLocaleDateString("en-IN")+" "+v.toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}catch{return j}},b=j=>{switch(j==null?void 0:j.toLowerCase()){case"completed":return"#48bb78";case"pending":return"#ed8936";case"cancelled":return"#f56565";default:return"#718096"}};return a?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-loading",children:[r.jsx("div",{className:"counter-spinner"}),r.jsx("p",{children:"Loading orders..."})]})})}):i?r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("h3",{children:"Error"}),r.jsx("p",{children:i}),r.jsx("button",{className:"counter-button",onClick:()=>d&&h(d._id),children:"Retry"})]})})}):r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Order History"}),r.jsxs("p",{className:"counter-subtitle",children:[d==null?void 0:d.name," - Recent Orders"]})]}),r.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"24px",justifyContent:"center"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:m,style:{flex:1,maxWidth:"200px"},children:" Back"}),r.jsx("button",{className:"counter-button",onClick:p,style:{flex:1,maxWidth:"200px"},children:" New Order"})]}),t.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#718096"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),r.jsx("h3",{style:{margin:"0 0 8px 0"},children:"No Orders Found"}),r.jsx("p",{style:{margin:"0"},children:"No orders have been placed yet."})]}):r.jsx("div",{style:{display:"grid",gap:"16px",maxHeight:"60vh",overflowY:"auto"},children:t.map((j,v)=>r.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"12px",padding:"20px",transition:"all 0.2s"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"1.1rem",color:"#1a202c"},children:j.invoiceNumber||`Order #${v+1}`}),r.jsxs("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:[j.customerName,"  ",j.phoneNumber]}),r.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#4a5568"},children:g(j.orderDate||j.createdAt)})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{background:b(j.status),color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",marginBottom:"8px"},children:j.status||"Completed"}),r.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#1a202c"},children:["",(j.total||0).toFixed(2)]})]})]}),j.items&&j.items.length>0&&r.jsxs("div",{style:{background:"#f7fafc",padding:"12px",borderRadius:"8px",marginBottom:"12px"},children:[r.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"0.875rem",color:"#4a5568",fontWeight:"600"},children:["Items (",j.items.length,")"]}),r.jsxs("div",{style:{display:"grid",gap:"4px"},children:[j.items.slice(0,3).map((y,A)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[r.jsxs("span",{style:{color:"#2d3748"},children:[y.name,"  ",y.quantity]}),r.jsxs("span",{style:{color:"#1a202c",fontWeight:"500"},children:["",(y.total||y.price*y.quantity).toFixed(2)]})]},A)),j.items.length>3&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#718096",fontStyle:"italic"},children:["+",j.items.length-3," more items"]})]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.875rem",color:"#4a5568"},children:[r.jsxs("span",{children:["Payment: ",j.paymentMethod?r.jsx("span",{style:{textTransform:"capitalize",fontWeight:"500"},children:j.paymentMethod}):"Cash"]}),j.paymentMethod==="cash"&&j.change>0&&r.jsxs("span",{children:["Change: ",j.change.toFixed(2)]})]})]},j._id||v))})]})})},ope=()=>{const e=kn(),t=ua(),{returnTo:n,paymentData:a,orderData:s}=t.state||{},[i,l]=w.useState({method:"auto",ip:"192.168.1.100",port:"9100",devicePath:"/dev/usb/lp0"}),[d,u]=w.useState(!1),[h,p]=w.useState([]),[m,g]=w.useState(!1),[b,j]=w.useState(null);w.useEffect(()=>{const O=localStorage.getItem("thermalPrinterSettings");O&&l({...i,...JSON.parse(O)})},[]);const v=()=>{localStorage.setItem("thermalPrinterSettings",JSON.stringify(i)),alert("Printer settings saved successfully!"),n?n==="/counter/bill-generation"&&s?e(n,{state:s}):e(n,{state:{paymentData:a}}):e("/counter/branch-selection")},y=async()=>{u(!0),p([]);try{const C=await(await fetch("https://hotelvirat.com/api/v1/hotel/print-thermal/discover")).json();C.success?(p(C.printers),C.printers.length===0&&alert("No thermal printers found on the network. Make sure your thermal printer is connected to the same network and powered on.")):alert("Failed to discover printers: "+C.message)}catch(O){console.error("Discovery error:",O),alert("Failed to discover printers. Make sure the backend server is running on port 9000.")}finally{u(!1)}},A=async()=>{g(!0),j(null);try{const O={selectedBranch:{name:"Test Restaurant",address:"123 Test Street, Test City",phone:"123-456-7890"},invoiceNumber:"TEST-"+Date.now(),date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),customerName:"Test Customer",phoneNumber:"1234567890",cartItems:[{name:"Test Item 1",price:10,quantity:2},{name:"Test Item 2",price:15.5,quantity:1}],total:35.5,paymentMethod:"cash",amountReceived:40,change:4.5};await ni.printReceipt(O,{method:i.method,printerIP:i.ip,port:parseInt(i.port)}),j({type:"success",message:"Test receipt printed successfully!"})}catch(O){console.error("Test print error:",O),j({type:"error",message:O.message})}finally{g(!1)}},E=O=>{l({...i,ip:O.ip,port:O.port.toString(),method:"network"})};return r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Thermal Printer Settings"}),r.jsx("p",{className:"counter-subtitle",children:"Configure your thermal printer for receipt printing"})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{className:"counter-label",children:"Print Method"}),r.jsxs("select",{className:"counter-input",value:i.method,onChange:O=>l({...i,method:O.target.value}),children:[r.jsx("option",{value:"auto",children:"Auto (Try all methods)"}),r.jsx("option",{value:"network",children:"Network Printer"}),r.jsx("option",{value:"serial",children:"USB/Serial Printer"}),r.jsx("option",{value:"browser",children:"Browser Print (Fallback)"})]})]}),(i.method==="network"||i.method==="auto")&&r.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[r.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1rem"},children:"Network Printer Settings"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"16px",marginBottom:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{className:"counter-label",children:"Printer IP Address"}),r.jsx("input",{type:"text",className:"counter-input",value:i.ip,onChange:O=>l({...i,ip:O.target.value}),placeholder:"192.168.1.100"}),r.jsx("p",{style:{fontSize:"0.75rem",color:"#718096",margin:"4px 0 0 0"},children:"Enter your thermal printer's IP address. Leave as default (192.168.1.100) to skip network printing and use browser fallback."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"counter-label",children:"Port"}),r.jsx("input",{type:"number",className:"counter-input",value:i.port,onChange:O=>l({...i,port:O.target.value}),placeholder:"9100"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:y,disabled:d,style:{flex:1},children:d?" Discovering...":" Discover Printers"}),r.jsx("button",{className:"counter-button-secondary",onClick:A,disabled:m,style:{flex:1},children:m?" Testing...":" Test Print"})]}),h.length>0&&r.jsxs("div",{children:[r.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"0.875rem",color:"#4a5568"},children:"Found Printers:"}),r.jsx("div",{style:{display:"grid",gap:"8px"},children:h.map((O,S)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"white",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer"},onClick:()=>E(O),children:[r.jsxs("span",{style:{fontWeight:"500"},children:[O.ip,":",O.port]}),r.jsxs("span",{style:{fontSize:"0.75rem",color:"#718096"},children:[O.responseTime,"ms"]})]},S))})]})]}),(i.method==="serial"||i.method==="auto")&&r.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[r.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"1rem"},children:"USB/Serial Printer Settings"}),r.jsxs("div",{children:[r.jsx("label",{className:"counter-label",children:"Device Path"}),r.jsx("input",{type:"text",className:"counter-input",value:i.devicePath,onChange:O=>l({...i,devicePath:O.target.value}),placeholder:"/dev/usb/lp0"}),r.jsx("p",{style:{fontSize:"0.75rem",color:"#718096",margin:"4px 0 0 0"},children:"Common paths: /dev/usb/lp0, /dev/ttyUSB0, COM1 (Windows)"})]})]}),b&&r.jsx("div",{style:{background:b.type==="success"?"#f0fff4":"#fed7d7",padding:"12px",borderRadius:"8px",border:`1px solid ${b.type==="success"?"#68d391":"#fc8181"}`,marginBottom:"24px",textAlign:"center"},children:r.jsxs("div",{style:{color:b.type==="success"?"#22543d":"#742a2a",fontWeight:"600"},children:[b.type==="success"?"":""," ",b.message]})}),r.jsxs("div",{style:{background:"#e6fffa",padding:"16px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #81e6d9"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#234e52"},children:" Setup Instructions"}),r.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",color:"#2d3748",fontSize:"0.875rem"},children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Network Printer:"})," Connect your thermal printer to the same network and note its IP address"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"USB Printer:"})," Connect via USB and check device path in system settings"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Auto Mode:"})," Tries all methods automatically, recommended for most users"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Browser Fallback:"})," Uses regular browser printing with thermal-optimized formatting"]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"16px"},children:[r.jsx("button",{className:"counter-button-secondary",onClick:()=>e(n||"/counter/branch-selection",{state:n==="/counter/bill-generation"?s:{paymentData:a}}),style:{flex:1},children:" Cancel"}),r.jsx("button",{className:"counter-button",onClick:v,style:{flex:2},children:" Save Settings"})]})]})})},lpe=()=>{const[e,t]=w.useState(!1),[n,a]=w.useState(null),s=async()=>{t(!0),a(null);try{const d={selectedBranch:{name:"Hotel Virat Test",address:"123 Test Street, Test City",phone:"123-456-7890"},invoiceNumber:"TEST-"+Date.now(),date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),customerName:"Test Customer",phoneNumber:"1234567890",cartItems:[{name:"Test Item 1",price:10,quantity:2},{name:"Test Item 2",price:15.5,quantity:1}],total:35.5,paymentMethod:"cash",amountReceived:40,change:4.5};console.log(" Testing thermal printer with data:",d);const u=await ni.printReceipt(d,{method:"auto",printerIP:"192.168.1.100",port:9100});a({type:"success",message:"Test print successful!",details:u})}catch(d){console.error("Test print error:",d),a({type:"error",message:d.message,details:d})}finally{t(!1)}},i=async()=>{t(!0),a(null);try{const d={selectedBranch:{name:"Hotel Virat Test",address:"123 Test Street, Test City",phone:"123-456-7890"},invoiceNumber:"BILL-"+Date.now(),date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),customerName:"Test Customer",phoneNumber:"1234567890",cartItems:[{name:"Test Item 1",price:10,quantity:2},{name:"Test Item 2",price:15.5,quantity:1}],total:35.5};console.log(" Testing thermal bill with data:",d);const u=await ni.printBill(d,{method:"auto",printerIP:"192.168.1.100",port:9100});a({type:"success",message:"Test bill print successful!",details:u})}catch(d){console.error("Test bill error:",d),a({type:"error",message:d.message,details:d})}finally{t(!1)}},l=async()=>{t(!0),a(null);try{const d="https://hotelvirat.com/api/v1/hotel";console.log(" Testing endpoint:",`${d}/print-thermal/network`);const u=await fetch(`${d}/print-thermal/network`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:"Test endpoint connection",printerIP:"192.168.1.100",port:9100})}),h=await u.json();u.ok?a({type:"success",message:"Endpoint accessible!",details:h}):a({type:"info",message:"Endpoint accessible (printer not found is expected)",details:h})}catch(d){console.error("Endpoint test error:",d),a({type:"error",message:"Endpoint not accessible: "+d.message,details:d})}finally{t(!1)}};return r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsxs("div",{className:"counter-header",children:[r.jsx("h1",{className:"counter-title",children:"Thermal Printer Test"}),r.jsx("p",{className:"counter-subtitle",children:"Test thermal printing functionality"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"24px"},children:[r.jsx("button",{className:"counter-button",onClick:l,disabled:e,children:e?" Testing...":" Test Endpoint"}),r.jsx("button",{className:"counter-button",onClick:i,disabled:e,children:e?" Testing...":" Test Bill"}),r.jsx("button",{className:"counter-button",onClick:s,disabled:e,children:e?" Testing...":" Test Receipt"})]}),r.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem"},children:"Environment Info"}),r.jsxs("p",{style:{margin:"0 0 8px 0",fontSize:"0.875rem"},children:[r.jsx("strong",{children:"Backend URL:"})," ","https://hotelvirat.com/api/v1/hotel"]}),r.jsxs("p",{style:{margin:"0 0 8px 0",fontSize:"0.875rem"},children:[r.jsx("strong",{children:"Print Endpoint:"})," ","https://hotelvirat.com/api/v1/hotel/print-thermal/network"]}),r.jsxs("p",{style:{margin:"0",fontSize:"0.875rem"},children:[r.jsx("strong",{children:"Web Serial Support:"})," ","serial"in navigator?" Supported":" Not Supported"]})]}),n&&r.jsxs("div",{style:{background:n.type==="success"?"#f0fff4":n.type==="info"?"#e6fffa":"#fed7d7",padding:"16px",borderRadius:"8px",border:`1px solid ${n.type==="success"?"#68d391":n.type==="info"?"#81e6d9":"#fc8181"}`,marginBottom:"24px"},children:[r.jsxs("div",{style:{color:n.type==="success"?"#22543d":n.type==="info"?"#234e52":"#742a2a",fontWeight:"600",marginBottom:"8px"},children:[n.type==="success"?"":n.type==="info"?"":""," ",n.message]}),n.details&&r.jsxs("details",{style:{fontSize:"0.875rem",color:"#4a5568"},children:[r.jsx("summary",{style:{cursor:"pointer",marginBottom:"8px"},children:"View Details"}),r.jsx("pre",{style:{background:"rgba(0,0,0,0.1)",padding:"8px",borderRadius:"4px",overflow:"auto",fontSize:"0.75rem"},children:JSON.stringify(n.details,null,2)})]})]}),r.jsxs("div",{style:{background:"#e6fffa",padding:"16px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #81e6d9"},children:[r.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"1rem",color:"#234e52"},children:" Test Instructions"}),r.jsxs("ol",{style:{margin:"0",paddingLeft:"20px",color:"#2d3748",fontSize:"0.875rem"},children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Test Endpoint:"})," Checks if backend API is accessible"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Test Bill:"})," Tests bill printing (before payment)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Test Receipt:"})," Tests receipt printing (after payment)"]})]})]}),r.jsx("div",{style:{textAlign:"center"},children:r.jsx("button",{className:"counter-button-secondary",onClick:()=>window.history.back(),children:" Back"})})]})})},cpe=()=>{var L;const e=kn(),[t,n]=w.useState(null),[a,s]=w.useState("daily"),[i,l]=w.useState(!0),[d,u]=w.useState(null),[h,p]=w.useState({daily:null,weekly:null,monthly:null,all:null}),[m,g]=w.useState([]),[b,j]=w.useState(new Date().toISOString().split("T")[0]),[v,y]=w.useState(!1),[A,E]=w.useState(!1);w.useEffect(()=>{const P=localStorage.getItem("selectedBranch");if(P){const _=JSON.parse(P);n(_),O(_._id)}else e("/counter/branch-selection")},[e]);const O=async P=>{try{l(!0),u(null);let _=[];try{const W=await or.getOrders();let G=[];W.success&&Array.isArray(W.data)?G=W.data:W.orders&&Array.isArray(W.orders)?G=W.orders:Array.isArray(W)&&(G=W),P?_=G.filter(oe=>{var V,U;return(((V=oe.branch)==null?void 0:V.id)||((U=oe.branchId)==null?void 0:U._id)||oe.branchId)===P}):_=G,console.log(" Loaded counter orders:",_.length)}catch(W){console.log(" Error loading orders from database:",W),u(`Failed to load orders: ${W.message}`);return}const R=_.map(W=>{var G,oe,q;return{_id:W.id,invoiceNumber:(G=W.invoice)!=null&&G.invoiceNumber?`BILL-${W.invoice.invoiceNumber}`:W.invoiceNumber||"N/A",customerName:W.customerName||"Walk-in Customer",phoneNumber:W.phoneNumber||"0000000000",orderDate:W.createdAt,createdAt:W.createdAt,items:W.items||[],total:W.grandTotal||W.totalAmount||0,subtotal:W.subtotal||W.totalAmount||0,tax:W.tax||0,serviceCharge:W.serviceCharge||0,status:W.orderStatus==="completed"?"completed":"pending",paymentMethod:W.paymentMethod||"cash",paymentStatus:W.paymentStatus||"pending",branchName:((oe=W.branch)==null?void 0:oe.name)||"Unknown Branch",counterUser:((q=W.userId)==null?void 0:q.name)||"Counter User",orderSource:"counter"}});if(console.log(" SalesReports - Transformed counter orders:",R.map(W=>({id:W._id,invoice:W.invoiceNumber,customer:W.customerName,date:W.createdAt,dateFormatted:new Date(W.createdAt).toISOString().split("T")[0],total:W.total,source:W.orderSource}))),g(R),!A&&R.length>0){const W=R[0],G=new Date(W.orderDate||W.createdAt).toISOString().split("T")[0];j(G),E(!0);const oe=new Date(G),q=S(R,oe),V=C(R,oe),U=k(R,oe),X=R.reduce((me,je)=>me+(je.total||0),0),H=R.filter(me=>me.status==="completed"),Q=R.filter(me=>me.status==="pending"),le={totalOrders:R.length,completedOrders:H.length,pendingOrders:Q.length,totalSales:X,orders:R.sort((me,je)=>new Date(je.orderDate||je.createdAt)-new Date(me.orderDate||me.createdAt))};p({daily:q,weekly:V,monthly:U,all:le})}else{const W=new Date(b),G=S(R,W),oe=C(R,W),q=k(R,W),V=R.reduce((Q,le)=>Q+(le.total||0),0),U=R.filter(Q=>Q.status==="completed"),X=R.filter(Q=>Q.status==="pending"),H={totalOrders:R.length,completedOrders:U.length,pendingOrders:X.length,totalSales:V,orders:R.sort((Q,le)=>new Date(le.orderDate||le.createdAt)-new Date(Q.orderDate||Q.createdAt))};p({daily:G,weekly:oe,monthly:q,all:H})}}catch(_){console.error("Error loading sales data:",_),u("Failed to load sales data. Please try again.")}finally{l(!1)}},S=(P,_)=>{const R=_.toISOString().split("T")[0],W=P.filter(U=>new Date(U.orderDate||U.createdAt).toISOString().split("T")[0]===R),G=W.reduce((U,X)=>U+(X.total||0),0),oe=W.filter(U=>U.status==="completed"),q=W.filter(U=>U.status==="pending");return{totalOrders:W.length,completedOrders:oe.length,pendingOrders:q.length,totalSales:G,orders:W.sort((U,X)=>new Date(X.orderDate||X.createdAt)-new Date(U.orderDate||U.createdAt))}},C=(P,_)=>{const R=new Date(_),W=R.getDay();R.setDate(R.getDate()-W),R.setHours(0,0,0,0);const G=new Date(R);G.setDate(R.getDate()+6),G.setHours(23,59,59,999);const oe=P.filter(X=>{const H=new Date(X.orderDate||X.createdAt);return H>=R&&H<=G}),q=oe.reduce((X,H)=>X+(H.total||0),0),V=oe.filter(X=>X.status==="completed"),U=oe.filter(X=>X.status==="pending");return{totalOrders:oe.length,completedOrders:V.length,pendingOrders:U.length,totalSales:q,orders:oe.sort((X,H)=>new Date(H.orderDate||H.createdAt)-new Date(X.orderDate||X.createdAt)),startDate:R.toLocaleDateString("en-IN"),endDate:G.toLocaleDateString("en-IN")}},k=(P,_)=>{const R=new Date(_.getFullYear(),_.getMonth(),1);R.setHours(0,0,0,0);const W=new Date(_.getFullYear(),_.getMonth()+1,0);W.setHours(23,59,59,999);const G=P.filter(U=>{const X=new Date(U.orderDate||U.createdAt);return X>=R&&X<=W}),oe=G.reduce((U,X)=>U+(X.total||0),0),q=G.filter(U=>U.status==="completed"),V=G.filter(U=>U.status==="pending");return{totalOrders:G.length,completedOrders:q.length,pendingOrders:V.length,totalSales:oe,orders:G.sort((U,X)=>new Date(X.orderDate||X.createdAt)-new Date(U.orderDate||U.createdAt)),monthName:_.toLocaleDateString("en-IN",{month:"long",year:"numeric"})}},I=P=>{if(j(P),y(!1),t){const _=new Date(P),R=S(m,_);p(W=>({...W,daily:R}))}},z=P=>{if(s(P),y(!1),t&&m.length>0){const _=new Date;let R={};if(P==="daily"){const W=new Date(b);R.daily=S(m,W)}else if(P==="weekly")R.weekly=C(m,_);else if(P==="monthly")R.monthly=k(m,_);else if(P==="all"){const W=m.reduce((q,V)=>q+(V.total||0),0),G=m.filter(q=>q.status==="completed"),oe=m.filter(q=>q.status==="pending");R.all={totalOrders:m.length,completedOrders:G.length,pendingOrders:oe.length,totalSales:W,orders:m.sort((q,V)=>new Date(V.orderDate||V.createdAt)-new Date(q.orderDate||q.createdAt))}}p(W=>({...W,...R}))}},B=()=>{e("/counter/menu")},M=P=>{try{const _=new Date(P);return _.toLocaleDateString("en-IN")+" "+_.toLocaleTimeString("en-IN",{hour12:!0,hour:"2-digit",minute:"2-digit"})}catch{return P}},F=P=>{switch(P==null?void 0:P.toLowerCase()){case"completed":return"#48bb78";case"pending":return"#ed8936";case"cancelled":return"#f56565";default:return"#718096"}};if(i)return r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-loading",children:[r.jsx("div",{className:"counter-spinner"}),r.jsx("p",{children:"Loading sales data..."})]})})});if(d)return r.jsx("div",{className:"counter-container",children:r.jsx("div",{className:"counter-card",children:r.jsxs("div",{className:"counter-error",children:[r.jsx("h3",{children:"Error"}),r.jsx("p",{children:d}),r.jsx("button",{className:"counter-button",onClick:()=>t&&O(t._id),children:"Retry"})]})})});const N=h[a];return r.jsx("div",{className:"counter-container",children:r.jsxs("div",{className:"counter-card",children:[r.jsx("div",{className:"counter-header",style:{marginBottom:"24px"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("h1",{className:"counter-title",children:" Sales & Reports"}),r.jsxs("p",{className:"counter-subtitle",children:[t==null?void 0:t.name," - Track your business performance"]}),r.jsx("div",{style:{background:m.length>0?"#e6fffa":"#fef2f2",border:`1px solid ${m.length>0?"#38b2ac":"#f87171"}`,borderRadius:"8px",padding:"8px 12px",marginTop:"8px",fontSize:"0.75rem",color:m.length>0?"#234e52":"#991b1b"},children:m.length>0?r.jsxs(r.Fragment,{children:[" Live Data: Showing ",m.length," real orders from your counter system."]}):r.jsx(r.Fragment,{children:" No Orders Yet: Place orders through the counter menu to see sales data here."})})]}),r.jsx("button",{className:"counter-button-secondary",onClick:B,style:{padding:"8px 16px"},children:" Back to Menu"})]})}),r.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"2px solid #e2e8f0",paddingBottom:"16px"},children:[{key:"daily",label:" Daily",icon:""},{key:"weekly",label:" Weekly",icon:""},{key:"monthly",label:" Monthly",icon:""},{key:"all",label:" All Orders",icon:""}].map(P=>r.jsx("button",{onClick:()=>z(P.key),style:{background:a===P.key?"#667eea":"white",color:a===P.key?"white":"#4a5568",border:`2px solid ${a===P.key?"#667eea":"#e2e8f0"}`,borderRadius:"12px",padding:"12px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",flex:1,textAlign:"center"},children:P.label},P.key))}),a==="daily"&&r.jsxs("div",{style:{marginBottom:"24px",textAlign:"center"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#4a5568"},children:"Select Date:"}),r.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",alignItems:"center"},children:[r.jsx("input",{type:"date",value:b,onChange:P=>I(P.target.value),style:{padding:"8px 12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"500"}}),r.jsxs("button",{onClick:()=>{const P=new Date().toISOString().split("T")[0];I(P)},style:{background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"8px 12px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"500"},title:"Set to today's date and refresh",children:[" Today (",new Date().toLocaleDateString(),")"]})]}),m.length>0&&r.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.75rem",color:"#718096"},children:[" Tip: Your orders are from ",new Date(m[m.length-1].orderDate||m[m.length-1].createdAt).toLocaleDateString()," to ",new Date(m[0].orderDate||m[0].createdAt).toLocaleDateString()]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},children:[r.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"24px",borderRadius:"16px",textAlign:"center",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"4px"},children:(N==null?void 0:N.totalOrders)||0}),r.jsx("div",{style:{fontSize:"0.875rem",opacity:.9,marginBottom:"4px"},children:"Total Orders"}),r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[(N==null?void 0:N.completedOrders)||0," completed  ",(N==null?void 0:N.pendingOrders)||0," pending"]})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"24px",borderRadius:"16px",textAlign:"center",boxShadow:"0 8px 32px rgba(240, 147, 251, 0.3)"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"4px"},children:["",((N==null?void 0:N.totalSales)||0).toFixed(2)]}),r.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:"Total Sales"}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:"(all orders included)"})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",padding:"24px",borderRadius:"16px",textAlign:"center",boxShadow:"0 8px 32px rgba(79, 172, 254, 0.3)"},children:[r.jsx("div",{style:{fontSize:"2rem",marginBottom:"8px"},children:""}),r.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",marginBottom:"4px"},children:["",((N==null?void 0:N.totalOrders)||0)>0?(((N==null?void 0:N.totalSales)||0)/((N==null?void 0:N.totalOrders)||1)).toFixed(2):"0.00"]}),r.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:"Average Order"}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.8},children:"across all orders"})]})]}),r.jsxs("div",{style:{background:"#f7fafc",padding:"16px",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},children:[r.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#2d3748"},children:[a==="daily"&&`Daily Report - ${new Date(b).toLocaleDateString()}`,a==="weekly"&&`Weekly Report - ${N==null?void 0:N.startDate} to ${N==null?void 0:N.endDate}`,a==="monthly"&&`Monthly Report - ${N==null?void 0:N.monthName}`,a==="all"&&"All Orders - Complete History"]}),r.jsxs("p",{style:{margin:"0",color:"#718096",fontSize:"0.875rem"},children:[a==="daily"&&"View sales performance for the selected day",a==="weekly"&&"View sales performance for the current week",a==="monthly"&&"View sales performance for the current month",a==="all"&&"View all orders from your database regardless of date"]})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsxs("h3",{style:{margin:"0 0 16px 0",color:"#2d3748"},children:["Recent Orders (",((L=N==null?void 0:N.orders)==null?void 0:L.length)||0,")"]}),!(N!=null&&N.orders)||N.orders.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#718096"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),r.jsx("h4",{style:{margin:"0 0 8px 0"},children:"No Orders Found"}),r.jsxs("p",{style:{margin:"0"},children:["No orders found for the selected ",a," period."]})]}):r.jsxs("div",{style:{display:"grid",gap:"12px",maxHeight:v?"none":"400px",overflowY:v?"visible":"auto"},children:[(v?N.orders:N.orders.slice(0,10)).map((P,_)=>r.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"12px",padding:"16px",transition:"all 0.2s"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[r.jsxs("div",{children:[r.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"1rem",color:"#1a202c"},children:P.invoiceNumber&&P.invoiceNumber!=="N/A"?P.invoiceNumber:`Order #${_+1}`}),r.jsxs("p",{style:{margin:"0 0 4px 0",fontSize:"0.875rem",color:"#718096"},children:[P.customerName,"  ",P.phoneNumber]}),r.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#4a5568"},children:M(P.orderDate||P.createdAt)})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{background:F(P.status),color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",textTransform:"uppercase",marginBottom:"8px"},children:P.status||"Completed"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"700",color:"#1a202c"},children:["",(P.total||0).toFixed(2)]})]})]}),P.items&&P.items.length>0&&r.jsxs("div",{style:{background:"#f7fafc",padding:"8px 12px",borderRadius:"8px",fontSize:"0.875rem"},children:[r.jsxs("strong",{children:[P.items.length," items:"]})," ",P.items.slice(0,2).map(R=>R.name).join(", "),P.items.length>2&&` +${P.items.length-2} more`]})]},P._id||_)),N.orders.length>10&&r.jsx("div",{style:{textAlign:"center",padding:"20px",background:"#f7fafc",borderRadius:"12px",border:"2px dashed #e2e8f0"},children:v?r.jsxs("div",{children:[r.jsxs("p",{style:{margin:"0 0 12px 0",color:"#718096",fontSize:"0.875rem"},children:["Showing all ",N.orders.length," orders"]}),r.jsx("button",{onClick:()=>y(!1),style:{background:"#718096",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:P=>P.target.style.background="#4a5568",onMouseOut:P=>P.target.style.background="#718096",children:" Show Less (Top 10 Only)"})]}):r.jsxs("div",{children:[r.jsxs("p",{style:{margin:"0 0 12px 0",color:"#718096",fontSize:"0.875rem"},children:["Showing 10 of ",N.orders.length," orders"]}),r.jsxs("button",{onClick:()=>y(!0),style:{background:"#667eea",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:P=>P.target.style.background="#5a67d8",onMouseOut:P=>P.target.style.background="#667eea",children:[" Show All ",N.orders.length," Orders"]})]})})]})]})]})})},Ks=({children:e})=>localStorage.getItem("counterAuthenticated")==="true"?e:r.jsx(rr,{to:"/counter/login",replace:!0});function dpe(){const[e,t]=w.useState(!1);return w.useEffect(()=>{console.log(" CounterApp loaded!");const n=localStorage.getItem("counterAuthenticated")==="true";t(n);const a=()=>{t(localStorage.getItem("counterAuthenticated")==="true")};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]),r.jsx("div",{className:"counter-app",children:r.jsxs($j,{children:[r.jsx(ft,{path:"login",element:r.jsx(Gfe,{})}),r.jsx(ft,{path:"branch-selection",element:r.jsx(Ks,{children:r.jsx(Kfe,{})})}),r.jsx(ft,{path:"category-selection",element:r.jsx(Ks,{children:r.jsx(Vfe,{})})}),r.jsx(ft,{path:"customer-details",element:r.jsx(rr,{to:"/counter/branch-selection",replace:!0})}),r.jsx(ft,{path:"menu",element:r.jsx(Ks,{children:r.jsx(Zfe,{})})}),r.jsx(ft,{path:"kot-generation",element:r.jsx(Ks,{children:r.jsx(epe,{})})}),r.jsx(ft,{path:"bill-generation",element:r.jsx(Ks,{children:r.jsx(tpe,{})})}),r.jsx(ft,{path:"payment",element:r.jsx(Ks,{children:r.jsx(rpe,{})})}),r.jsx(ft,{path:"payment-success",element:r.jsx(Ks,{children:r.jsx(spe,{})})}),r.jsx(ft,{path:"orders",element:r.jsx(Ks,{children:r.jsx(ipe,{})})}),r.jsx(ft,{path:"print-settings",element:r.jsx(Ks,{children:r.jsx(ope,{})})}),r.jsx(ft,{path:"print-test",element:r.jsx(Ks,{children:r.jsx(lpe,{})})}),r.jsx(ft,{path:"sales-reports",element:r.jsx(Ks,{children:r.jsx(cpe,{})})}),r.jsx(ft,{path:"",element:r.jsx(rr,{to:"login",replace:!0})})]})})}const upe=()=>{const[e,t]=w.useState(!1),[n,a]=w.useState(!1);w.useEffect(()=>{const d=()=>{const u=window.scrollY;a(u>50)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]);const s=d=>{console.log(` Scrolling to: ${d}`);const u=document.getElementById(d);if(u){const h=document.querySelector(".website-header"),p=h?h.offsetHeight:90,m=u.offsetTop-p;window.scrollTo({top:m,behavior:"smooth"}),console.log(` Scrolling to position: ${m}`)}else console.error(` Element not found: ${d}`);t(!1)},i=()=>{console.log(" === Testing scroll functionality ===");const d=["home","room-booking","catering-service","download-app","contact-us"];console.log(" Section availability check:"),d.forEach(u=>{const h=document.getElementById(u);console.log(h?` Section ${u}: Found at ${h.offsetTop}px`:` Section ${u}: Not found`)}),console.log(" Scroll settings:"),console.log("    Document scroll behavior:",document.documentElement.style.scrollBehavior),console.log("    Body scroll behavior:",document.body.style.scrollBehavior),console.log("    Current scroll position:",window.pageYOffset),console.log("    Body overflow:",getComputedStyle(document.body).overflow)};w.useEffect(()=>{setTimeout(i,1e3)},[]);const l=[{id:"home",label:"Home"},{id:"room-booking",label:"Room Booking"},{id:"catering-service",label:"Catering Service"},{id:"download-app",label:"Order Now"},{id:"contact-us",label:"Contact Us"}];return r.jsx("header",{className:`website-header ${n?"scrolled":""}`,children:r.jsxs("div",{className:"header-container",children:[r.jsxs("div",{className:"logo-section",children:[r.jsx("img",{src:Yo,alt:"Hotel Virat",className:"logo-image"}),r.jsxs("div",{className:"logo-text",children:[r.jsx("h2",{children:"Hotel Virat"}),r.jsx("span",{className:"tagline",children:"Luxury & Comfort"})]})]}),r.jsx("nav",{className:`nav-menu ${e?"active":""}`,children:r.jsx("ul",{children:l.map(d=>r.jsx("li",{children:r.jsx("button",{onClick:()=>s(d.id),className:"nav-link",children:d.label})},d.id))})}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>s("contact-us"),className:"cta-button",children:"Book Now"}),r.jsx("button",{className:"hamburger",onClick:()=>t(!e),"aria-label":"Toggle menu",children:e?r.jsx(On,{size:24}):r.jsx(ZL,{size:24})})]})]})})},hpe=()=>{const[e,t]=w.useState([]),[n,a]=w.useState(0),[s,i]=w.useState(!0);w.useEffect(()=>{l()},[]),w.useEffect(()=>{if(e.length>1){const p=setInterval(()=>{a(m=>(m+1)%e.length)},5e3);return()=>clearInterval(p)}},[e.length]);const l=async()=>{try{console.log("Fetching carousel images from:",`${en}/api/website/carousel`);const p=await fetch(`${en}/api/website/carousel`);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const m=await p.json();if(console.log("Carousel API response:",m),m.success&&m.images&&m.images.length>0){const g=m.images.filter(b=>b.isActive).sort((b,j)=>(b.order||0)-(j.order||0));console.log("All images from API:",m.images),console.log("Active images only:",g),console.log("Inactive images:",m.images.filter(b=>!b.isActive)),t(g)}else console.log("No carousel images found, using fallback"),t([])}catch(p){console.error("Error fetching banner images:",p),t([])}finally{i(!1)}},d=()=>{a(p=>(p+1)%e.length)},u=()=>{a(p=>(p-1+e.length)%e.length)},h=p=>{a(p)};return s?r.jsx("section",{id:"home",className:"carousel-banner",children:r.jsxs("div",{className:"carousel-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading banner images..."})]})}):e.length===0?r.jsx("section",{id:"home",className:"carousel-banner",children:r.jsx("div",{className:"carousel-placeholder",children:r.jsxs("div",{className:"placeholder-content",children:[r.jsx("h1",{children:"Welcome to Hotel Virat"}),r.jsx("p",{children:"Experience luxury and comfort at its finest"}),r.jsxs("div",{className:"placeholder-features",children:[r.jsxs("div",{className:"feature",children:[r.jsx("span",{children:""}),r.jsx("h3",{children:"Luxury Rooms"}),r.jsx("p",{children:"Comfortable and elegant accommodations"})]}),r.jsxs("div",{className:"feature",children:[r.jsx("span",{children:""}),r.jsx("h3",{children:"Fine Dining"}),r.jsx("p",{children:"Delicious cuisine and exceptional service"})]}),r.jsxs("div",{className:"feature",children:[r.jsx("span",{children:""}),r.jsx("h3",{children:"Event Hosting"}),r.jsx("p",{children:"Perfect venue for your special occasions"})]})]})]})})}):r.jsx("section",{id:"home",className:"carousel-banner",children:r.jsxs("div",{className:"carousel-container",children:[r.jsx("div",{className:"carousel-wrapper",children:e.map((p,m)=>r.jsxs("div",{className:`carousel-slide ${m===n?"active":""}`,children:[r.jsx("img",{src:`${en}${p.imageUrl}`,alt:p.title||`Banner ${m+1}`,className:"carousel-image",style:{objectFit:"cover",objectPosition:"center",width:"100%",height:"100%"},onError:g=>{console.error("Image failed to load:",g.target.src),g.target.style.display="none"}}),r.jsx("div",{className:"carousel-overlay",children:r.jsxs("div",{className:"carousel-content",children:[r.jsx("h1",{children:p.title||"Welcome to Hotel Virat"}),r.jsx("p",{children:p.description||"Experience luxury and comfort at its finest"})]})})]},p._id))}),e.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"carousel-nav prev",onClick:u,"aria-label":"Previous slide",children:r.jsx(Fd,{size:24})}),r.jsx("button",{className:"carousel-nav next",onClick:d,"aria-label":"Next slide",children:r.jsx(Ld,{size:24})}),r.jsx("div",{className:"carousel-indicators",children:e.map((p,m)=>r.jsx("button",{className:`indicator ${m===n?"active":""}`,onClick:()=>h(m),"aria-label":`Go to slide ${m+1}`},m))})]})]})})},fpe=({selectedRoom:e,bookedDates:t,onDateSelect:n,selectedCheckIn:a,selectedCheckOut:s})=>{var B;const[i,l]=w.useState(new Date),[d,u]=w.useState(!1),h=new Date,p=h.getFullYear()+"-"+String(h.getMonth()+1).padStart(2,"0")+"-"+String(h.getDate()).padStart(2,"0");console.log("Calendar Debug - Today:",{todayDate:h,todayString:p,todayISO:h.toISOString().split("T")[0],localDate:h.toLocaleDateString(),getDate:h.getDate(),getMonth:h.getMonth(),getFullYear:h.getFullYear()});const m=i.getFullYear(),g=i.getMonth(),b=new Date(m,g,1),v=new Date(m,g+1,0).getDate(),y=b.getDay(),A=((B=t[e._id])==null?void 0:B.dates)||[],E=new Set(A.map(M=>M.date));console.log("Calendar Debug - Booked dates for room:",{roomId:e._id,roomNumber:e.roomNumber,bookedDates:A,bookedDatesSet:Array.from(E)});const O=[];for(let M=0;M<y;M++)O.push(null);for(let M=1;M<=v;M++){const F=new Date(m,g,M),N=F.getFullYear()+"-"+String(F.getMonth()+1).padStart(2,"0")+"-"+String(F.getDate()).padStart(2,"0"),L=E.has(N),P=N<p,_=N===a||N===s,R=a&&s&&N>a&&N<s,W=N===p;console.log(`Calendar Debug - Day ${M}:`,{dateStr:N,todayStr:p,isToday:W,isBooked:L,isPast:P}),O.push({day:M,date:N,isBooked:L,isPast:P,isSelected:_,isInRange:R,isToday:W})}const S=M=>{if(!M||M.isPast||M.isBooked){if(M!=null&&M.isBooked){const F=A.find(N=>N.date===M.date);alert(` This date is already booked!

Date: ${new Date(M.date).toLocaleDateString()}
Booked by: ${(F==null?void 0:F.guestName)||"Unknown"}
Status: ${(F==null?void 0:F.status)||"Unknown"}`)}return}n(M.date,d),u(!d)},C=()=>{l(new Date(m,g-1,1))},k=()=>{l(new Date(m,g+1,1))},I=["January","February","March","April","May","June","July","August","September","October","November","December"],z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return r.jsxs("div",{className:"calendar-widget",children:[r.jsxs("div",{className:"calendar-header",children:[r.jsx("button",{type:"button",onClick:C,className:"calendar-nav-btn",children:""}),r.jsxs("h3",{children:[I[g]," ",m]}),r.jsx("button",{type:"button",onClick:k,className:"calendar-nav-btn",children:""})]}),r.jsxs("div",{className:"calendar-grid",children:[z.map(M=>r.jsx("div",{className:"calendar-day-header",children:M},M)),O.map((M,F)=>r.jsx("div",{className:`calendar-day ${M?M.isPast?"past":M.isBooked?"booked":M.isSelected?"selected":M.isInRange?"in-range":M.isToday?"today":"available":"empty"}`,onClick:()=>S(M),children:M&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"day-number",children:M.day}),M.isBooked&&r.jsx("span",{className:"booked-dot",children:""}),M.isToday&&r.jsx("span",{className:"today-indicator",children:"Today"})]})},F))]}),r.jsx("div",{className:"calendar-instructions",children:a?s?r.jsxs("p",{children:[" ",a," to ",s," selected"]}):r.jsx("p",{children:" Click on another available date to select check-out"}):r.jsx("p",{children:" Click on an available date to select check-in"})})]})},ppe=()=>{var M,F;const[e,t]=w.useState([]),[n,a]=w.useState(!0),[s,i]=w.useState(null),[l,d]=w.useState(!1),[u,h]=w.useState([]),[p,m]=w.useState({}),[g,b]=w.useState({guestName:"",guestEmail:"",guestPhone:"",checkInDate:"",checkOutDate:"",adults:1,children:0,specialRequests:""}),[j,v]=w.useState(!1);w.useEffect(()=>{y(),A()},[]);const y=async()=>{try{a(!0),console.log("Fetching rooms from:",`${en}/api/v1/hotel/room`);const N=await fetch(`${en}/api/v1/hotel/room`);if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const L=await N.json();console.log("Rooms API response:",L);const P=L.filter(_=>_.isAvailable);t(P)}catch(N){console.error("Error fetching rooms:",N),t([])}finally{a(!1)}},A=async()=>{try{console.log("Fetching existing bookings...");const N=await fetch(`${en}/api/v1/hotel/room-booking`);if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const L=await N.json();console.log("Existing bookings:",L),L.success&&L.bookings&&(h(L.bookings),E(L.bookings))}catch(N){console.error("Error fetching existing bookings:",N)}},E=N=>{const L={};console.log("Processing bookings:",N),N.forEach(P=>{var _,R;if(P.status!=="cancelled"){const W=((_=P.roomId)==null?void 0:_._id)||P.roomId,G=((R=P.roomId)==null?void 0:R.roomNumber)||"Unknown";L[W]||(L[W]={roomNumber:G,dates:[]});const oe=new Date(P.checkInDate),q=new Date(P.checkOutDate);console.log("Processing booking:",{guestName:P.guestName,checkInDate:P.checkInDate,checkOutDate:P.checkOutDate,checkInParsed:oe,checkOutParsed:q,roomNumber:G});for(let V=new Date(oe);V<q;V.setDate(V.getDate()+1)){const U=V.getFullYear()+"-"+String(V.getMonth()+1).padStart(2,"0")+"-"+String(V.getDate()).padStart(2,"0");console.log("Adding booked date:",U,"for room:",G),L[W].dates.push({date:U,guestName:P.guestName,status:P.status,bookingId:P._id})}}}),console.log("Final processed booked dates:",L),m(L)},O=(N,L,P)=>{const _=p[N];if(!_)return null;const R=new Date(L),W=new Date(P);for(let G=new Date(R);G<W;G.setDate(G.getDate()+1)){const oe=G.toISOString().split("T")[0],q=_.dates.find(V=>V.date===oe);if(q)return{conflictDate:oe,guestName:q.guestName,status:q.status,roomNumber:_.roomNumber}}return null},S=N=>{i(N),d(!0)},C=()=>{d(!1),i(null),b({guestName:"",guestEmail:"",guestPhone:"",checkInDate:"",checkOutDate:"",adults:1,children:0,specialRequests:""})},k=N=>{const{name:L,value:P}=N.target;b(_=>({..._,[L]:P}))},I=(N,L)=>{if(L){if(N<=g.checkInDate){alert("Check-out date must be after check-in date");return}const P=O(s._id,g.checkInDate,N);if(P){alert(` Room ${P.roomNumber} is already booked!

Conflict Date: ${new Date(P.conflictDate).toLocaleDateString()}
Booked by: ${P.guestName}
Status: ${P.status}

Please select different dates.`);return}b(_=>({..._,checkOutDate:N}))}else b(P=>({...P,checkInDate:N,checkOutDate:""}))},z=async N=>{if(N.preventDefault(),!g.guestName||!g.guestEmail||!g.checkInDate||!g.checkOutDate){alert("Please fill in all required fields");return}const L=O(s._id,g.checkInDate,g.checkOutDate);if(L){alert(` Room ${L.roomNumber} is already booked!

Conflict Date: ${new Date(L.conflictDate).toLocaleDateString()}
Booked by: ${L.guestName}
Status: ${L.status}

Please select different dates.`);return}try{v(!0);const P={roomId:s._id,guestName:g.guestName,guestEmail:g.guestEmail,guestPhone:g.guestPhone,checkInDate:g.checkInDate,checkOutDate:g.checkOutDate,adults:parseInt(g.adults),children:parseInt(g.children),specialRequests:g.specialRequests,totalAmount:s.price,status:"pending"};console.log("Submitting booking:",P);const _=await fetch(`${en}/api/v1/hotel/room-booking`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),R=await _.json();_.ok&&R.success?(alert(" Room booked successfully! We will contact you soon to confirm your reservation."),C(),y(),A()):alert("Error: "+(R.message||"Failed to book room"))}catch(P){console.error("Error submitting booking:",P),alert("Failed to book room. Please try again.")}finally{v(!1)}},B=N=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(N);return n?r.jsx("section",{id:"room-booking",className:"room-booking",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h2",{children:"Room Booking"}),r.jsx("p",{className:"section-subtitle",children:"Book your comfortable stay with us"})]}),r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading available rooms..."})]})]})}):r.jsx("section",{id:"room-booking",className:"room-booking",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h2",{children:"Room Booking"}),r.jsx("p",{className:"section-subtitle",children:"Book your comfortable stay with us"})]}),e.length===0?r.jsxs("div",{className:"no-rooms",children:[r.jsx("h3",{children:"No Rooms Available"}),r.jsx("p",{children:"Sorry, no rooms are currently available for booking. Please contact us directly."}),r.jsxs("div",{className:"contact-buttons",children:[r.jsx("a",{href:"tel:+919876543210",className:"contact-btn",children:" Call Now"}),r.jsx("button",{onClick:()=>{const N=document.getElementById("contact-us");N&&N.scrollIntoView({behavior:"smooth"})},className:"contact-btn",children:" Contact Form"})]})]}):r.jsx("div",{className:"rooms-grid",children:e.map(N=>{var L,P,_,R,W,G,oe,q;return r.jsxs("div",{className:"room-card",children:[r.jsx("div",{className:"room-images",children:N.images&&N.images.length>0?r.jsx("img",{src:`${en}/${N.images[0]}`,alt:`${N.roomType} Room`,onError:V=>{V.target.src="/placeholder-room.jpg"}}):r.jsxs("div",{className:"no-image",children:[r.jsx("span",{children:""}),r.jsx("p",{children:"No Image"})]})}),r.jsxs("div",{className:"room-info",children:[r.jsxs("div",{className:"room-header",children:[r.jsxs("h3",{children:[N.roomType," Room"]}),r.jsxs("div",{className:"room-price",children:[B(N.price),"/night"]})]}),r.jsxs("div",{className:"room-details",children:[r.jsxs("p",{className:"room-floor",children:["Floor: ",N.floor]}),N.roomNumber&&r.jsxs("p",{className:"room-number",children:["Room: ",N.roomNumber]}),r.jsxs("p",{className:"room-capacity",children:[" ",((L=N.capacity)==null?void 0:L.adults)||2," Adults, ",((P=N.capacity)==null?void 0:P.children)||0," Children"]})]}),N.description&&r.jsx("p",{className:"room-description",children:N.description}),r.jsxs("div",{className:"room-amenities",children:[r.jsx("h4",{children:"Amenities:"}),r.jsxs("div",{className:"amenities-list",children:[((_=N.amenities)==null?void 0:_.tv)&&r.jsx("span",{className:"amenity",children:" TV"}),((R=N.amenities)==null?void 0:R.ac)&&r.jsx("span",{className:"amenity",children:" AC"}),((W=N.amenities)==null?void 0:W.wifi)&&r.jsx("span",{className:"amenity",children:" WiFi"}),((G=N.amenities)==null?void 0:G.minibar)&&r.jsx("span",{className:"amenity",children:" Minibar"}),((oe=N.amenities)==null?void 0:oe.roomService)&&r.jsx("span",{className:"amenity",children:" Room Service"}),((q=N.amenities)==null?void 0:q.balcony)&&r.jsx("span",{className:"amenity",children:" Balcony"})]})]}),r.jsx("button",{className:"book-btn",onClick:()=>S(N),children:"Book This Room"})]})]},N._id)})}),l&&s&&r.jsx("div",{className:"modal-overlay",onClick:C,children:r.jsxs("div",{className:"booking-modal",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("div",{className:"modal-title",children:r.jsxs("h3",{children:["Book ",s.roomType," Room"]})}),r.jsx("button",{className:"modal-close",onClick:C,type:"button","aria-label":"Close modal",children:r.jsx("span",{children:""})})]}),r.jsxs("form",{onSubmit:z,children:[r.jsx("div",{className:"modal-body-container",children:r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"room-summary",children:[r.jsx("h4",{children:"Room Details"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Type:"})," ",s.roomType]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Price:"})," ",B(s.price)," per night"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Capacity:"})," ",((M=s.capacity)==null?void 0:M.adults)||2," Adults, ",((F=s.capacity)==null?void 0:F.children)||0," Children"]}),s.roomNumber&&r.jsxs("p",{children:[r.jsx("strong",{children:"Room Number:"})," ",s.roomNumber]})]}),r.jsxs("div",{className:"visual-calendar",children:[r.jsx("h4",{children:" Select Your Dates"}),r.jsxs("div",{className:"calendar-legend",children:[r.jsxs("span",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot available"}),"Available"]}),r.jsxs("span",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot booked"}),"Booked"]}),r.jsxs("span",{className:"legend-item",children:[r.jsx("span",{className:"legend-dot selected"}),"Selected"]})]}),r.jsx(fpe,{selectedRoom:s,bookedDates:p,onDateSelect:I,selectedCheckIn:g.checkInDate,selectedCheckOut:g.checkOutDate})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"guestName",children:"Full Name *"}),r.jsx("input",{type:"text",id:"guestName",name:"guestName",value:g.guestName,onChange:k,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"guestEmail",children:"Email *"}),r.jsx("input",{type:"email",id:"guestEmail",name:"guestEmail",value:g.guestEmail,onChange:k,required:!0})]})]}),r.jsx("div",{className:"form-row",children:r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"guestPhone",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"guestPhone",name:"guestPhone",value:g.guestPhone,onChange:k})]})}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"checkInDate",children:"Check-in Date *"}),r.jsx("input",{type:"date",id:"checkInDate",name:"checkInDate",value:g.checkInDate,onChange:k,min:new Date().toISOString().split("T")[0],required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"checkOutDate",children:"Check-out Date *"}),r.jsx("input",{type:"date",id:"checkOutDate",name:"checkOutDate",value:g.checkOutDate,onChange:k,min:g.checkInDate||new Date().toISOString().split("T")[0],required:!0})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"adults",children:"Adults"}),r.jsxs("select",{id:"adults",name:"adults",value:g.adults,onChange:k,children:[r.jsx("option",{value:"1",children:"1 Adult"}),r.jsx("option",{value:"2",children:"2 Adults"}),r.jsx("option",{value:"3",children:"3 Adults"}),r.jsx("option",{value:"4",children:"4 Adults"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"children",children:"Children"}),r.jsxs("select",{id:"children",name:"children",value:g.children,onChange:k,children:[r.jsx("option",{value:"0",children:"0 Children"}),r.jsx("option",{value:"1",children:"1 Child"}),r.jsx("option",{value:"2",children:"2 Children"}),r.jsx("option",{value:"3",children:"3 Children"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"specialRequests",children:"Special Requests"}),r.jsx("textarea",{id:"specialRequests",name:"specialRequests",value:g.specialRequests,onChange:k,rows:"3",placeholder:"Any special requests or requirements..."})]})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:C,disabled:j,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j,children:j?"Booking...":"Confirm Booking"})]})]})]})})]})})},mpe=()=>{var n,a,s,i,l,d,u,h;const e={title:" Premium Catering Excellence",subtitle:"Transforming celebrations into culinary masterpieces since 2009",description:"From intimate gatherings to grand celebrations, Hotel Virat delivers exceptional catering experiences that blend authentic flavors with modern presentation.",features:[{icon:"utensils",title:"Master Culinary Team",description:"15+ years crafting authentic Indian & international cuisines with precision"},{icon:"users",title:"Any Scale Event",description:"From intimate 25-guest dinners to spectacular 2500+ celebrations"},{icon:"clock",title:"Perfect Execution",description:"Flawless timing, elegant presentation, seamless service delivery"},{icon:"star",title:"Premium Quality",description:"Fresh ingredients, custom menus, personalized attention to detail"}],services:[{name:"Royal Wedding Feasts",description:"Multi-course traditional spreads with live counters & ceremonial service",icon:"",highlight:"Most Booked"},{name:"Corporate Events",description:"Professional catering for conferences, launches & business celebrations",icon:"",highlight:"Business Favorite"},{name:"Festival Celebrations",description:"Cultural festivals, birthdays & anniversaries with themed presentations",icon:"",highlight:"Family Choice"}],specialties:[" Live Cooking Stations (Chaat, Dosa, Pasta)"," Traditional Tandoor & BBQ Counters"," Regional Specialists (Punjabi, South Indian, Gujarati)"," International Buffets (Continental, Chinese, Italian)"," Special Diets (Jain, Vegan, Keto, Gluten-Free)"," Premium Table Settings & Floral Decor"],stats:[{number:"750+",label:"Events Delivered"},{number:"15+",label:"Years Excellence"},{number:"65+",label:"Menu Options"},{number:"99%",label:"Happy Clients"}],contactInfo:{phone:"+91 9876543210",whatsapp:"+91 9876543210"}},t=p=>{switch(p){case"utensils":return r.jsx(xm,{size:20});case"users":return r.jsx(ei,{size:20});case"clock":return r.jsx(Kc,{size:20});case"star":return r.jsx(j7,{size:20});default:return r.jsx(xm,{size:20})}};return r.jsx("section",{id:"catering-service",className:"catering-service",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"section-header",children:[r.jsxs("div",{className:"header-content",children:[r.jsx("h2",{children:e.title}),r.jsx("p",{className:"section-subtitle",children:e.subtitle})]}),r.jsx("div",{className:"header-stats",children:(n=e.stats)==null?void 0:n.map((p,m)=>r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-number",children:p.number}),r.jsx("div",{className:"stat-label",children:p.label})]},m))})]}),r.jsxs("div",{className:"main-content",children:[r.jsxs("div",{className:"content-left",children:[r.jsx("div",{className:"description-compact",children:r.jsx("p",{style:{color:"#000000",fontSize:"0.95rem",fontWeight:"600",margin:"0"},children:e.description})}),r.jsxs("div",{className:"services-ultra-compact",children:[r.jsxs("h3",{style:{color:"#ffffff",fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem",fontFamily:"Georgia, serif",letterSpacing:"0.5px",textAlign:"center",position:"relative",paddingBottom:"0.5rem"},children:["Our Signature Services",r.jsx("div",{style:{position:"absolute",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"60px",height:"2px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"1px"}})]}),r.jsx("div",{className:"services-mini-grid",children:(a=e.services)==null?void 0:a.map((p,m)=>r.jsxs("div",{className:"service-mini-card",style:{background:"white",padding:"1rem",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"0.8rem"},children:[r.jsxs("div",{className:"service-mini-header",style:{display:"flex",alignItems:"flex-start",gap:"0.8rem",marginBottom:"0.4rem"},children:[r.jsx("span",{className:"service-icon",style:{fontSize:"1.3rem"},children:p.icon}),r.jsxs("div",{className:"service-mini-info",style:{flex:"1"},children:[r.jsx("h4",{style:{color:"#000000",fontSize:"1rem",fontWeight:"700",margin:"0 0 0.2rem 0",lineHeight:"1.2"},children:p.name}),r.jsx("span",{className:"service-badge",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"0.15rem 0.5rem",borderRadius:"10px",fontSize:"0.65rem",fontWeight:"600"},children:p.highlight})]})]}),r.jsx("p",{style:{color:"#000000",fontSize:"0.85rem",margin:"0",lineHeight:"1.4",fontWeight:"500"},children:p.description})]},m))})]}),r.jsxs("div",{className:"specialties-ultra-compact",children:[r.jsxs("h3",{style:{color:"#ffffff",fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem",fontFamily:"Georgia, serif",letterSpacing:"0.5px",textAlign:"center",position:"relative",paddingBottom:"0.5rem"},children:["What Makes Us Special",r.jsx("div",{style:{position:"absolute",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"60px",height:"2px",background:"linear-gradient(135deg, #48bb78 0%, #38a169 100%)",borderRadius:"1px"}})]}),r.jsx("div",{className:"specialties-mini-grid",style:{display:"flex",flexWrap:"wrap",gap:"0.4rem"},children:(s=e.specialties)==null?void 0:s.map((p,m)=>r.jsx("div",{className:"specialty-mini-tag",style:{background:"#edf2f7",color:"#000000",padding:"0.4rem 0.8rem",borderRadius:"15px",fontSize:"0.75rem",fontWeight:"600",border:"1px solid #e2e8f0"},children:p},m))})]})]}),r.jsxs("div",{className:"content-right",children:[r.jsxs("div",{className:"features-ultra-compact",children:[r.jsxs("h3",{style:{color:"#ffffff",fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem",fontFamily:"Georgia, serif",letterSpacing:"0.5px",textAlign:"center",position:"relative",paddingBottom:"0.5rem"},children:["Why Choose Hotel Virat",r.jsx("div",{style:{position:"absolute",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"60px",height:"2px",background:"linear-gradient(135deg, #ed8936 0%, #dd6b20 100%)",borderRadius:"1px"}})]}),r.jsx("div",{className:"features-mini-list",style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:(i=e.features)==null?void 0:i.map((p,m)=>r.jsxs("div",{className:"feature-mini-item",style:{display:"flex",gap:"0.8rem",padding:"0.8rem",background:"white",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[r.jsx("div",{className:"feature-mini-icon",style:{color:"#667eea",flexShrink:"0",marginTop:"0.1rem"},children:t(p.icon)}),r.jsxs("div",{className:"feature-mini-content",children:[r.jsx("h4",{style:{color:"#000000",fontSize:"0.9rem",fontWeight:"700",margin:"0 0 0.2rem 0",lineHeight:"1.2"},children:p.title}),r.jsx("p",{style:{color:"#000000",fontSize:"0.8rem",margin:"0",lineHeight:"1.3",fontWeight:"500"},children:p.description})]})]},m))})]}),r.jsxs("div",{className:"contact-cta-combo",style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[r.jsxs("div",{className:"contact-ultra-compact",style:{background:"#f8fafc",padding:"1rem",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[r.jsxs("h3",{style:{color:"#ffffff",fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem",fontFamily:"Georgia, serif",letterSpacing:"0.5px",textAlign:"center",position:"relative",paddingBottom:"0.5rem"},children:["Get Instant Quote",r.jsx("div",{style:{position:"absolute",bottom:"0",left:"50%",transform:"translateX(-50%)",width:"60px",height:"2px",background:"linear-gradient(135deg, #3182ce 0%, #2c5282 100%)",borderRadius:"1px"}})]}),r.jsxs("div",{className:"contact-mini-options",style:{display:"flex",flexDirection:"column",gap:"0.6rem"},children:[r.jsxs("a",{href:`tel:${(l=e.contactInfo)==null?void 0:l.phone}`,className:"contact-mini-btn call",style:{display:"flex",alignItems:"center",gap:"0.8rem",padding:"0.8rem",background:"white",border:"1px solid #e2e8f0",borderRadius:"8px",textDecoration:"none"},children:[r.jsx("span",{className:"btn-icon",style:{fontSize:"1.2rem"},children:""}),r.jsxs("div",{className:"btn-mini-content",style:{flex:"1"},children:[r.jsx("span",{className:"btn-label",style:{color:"#718096",fontSize:"0.75rem",fontWeight:"500",display:"block"},children:"Call Now"}),r.jsx("span",{className:"btn-value",style:{color:"#000000",fontSize:"0.8rem",fontWeight:"600",display:"block"},children:(d=e.contactInfo)==null?void 0:d.phone})]})]}),r.jsxs("a",{href:`https://wa.me/${(h=(u=e.contactInfo)==null?void 0:u.whatsapp)==null?void 0:h.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"contact-mini-btn whatsapp",style:{display:"flex",alignItems:"center",gap:"0.8rem",padding:"0.8rem",background:"white",border:"1px solid #e2e8f0",borderRadius:"8px",textDecoration:"none"},children:[r.jsx("span",{className:"btn-icon",style:{fontSize:"1.2rem"},children:""}),r.jsxs("div",{className:"btn-mini-content",style:{flex:"1"},children:[r.jsx("span",{className:"btn-label",style:{color:"#718096",fontSize:"0.75rem",fontWeight:"500",display:"block"},children:"WhatsApp"}),r.jsx("span",{className:"btn-value",style:{color:"#000000",fontSize:"0.8rem",fontWeight:"600",display:"block"},children:"Quick Quote"})]})]})]})]}),r.jsxs("div",{className:"cta-ultra-compact",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1rem",borderRadius:"8px",textAlign:"center",color:"white"},children:[r.jsxs("div",{className:"cta-mini-offer",children:[r.jsx("span",{className:"offer-mini-badge",style:{background:"rgba(255, 255, 255, 0.2)",padding:"0.2rem 0.6rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",display:"inline-block",marginBottom:"0.4rem"},children:" February Special"}),r.jsx("h4",{style:{margin:"0 0 0.3rem 0",fontSize:"1rem",fontWeight:"700",color:"white"},children:"Book Now & Save 20%"}),r.jsx("p",{style:{margin:"0 0 0.8rem 0",fontSize:"0.75rem",opacity:"0.9",lineHeight:"1.3",color:"white"},children:"Free menu tasting + complimentary decoration"})]}),r.jsx("button",{className:"cta-mini-btn",style:{background:"white",color:"#667eea",border:"none",padding:"0.6rem 1.2rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",width:"100%"},onClick:()=>{const p=document.getElementById("contact-us");p&&p.scrollIntoView({behavior:"smooth"})},children:"Get Free Consultation"})]})]})]})]})]})})},xpe=()=>{const e={title:"Download Hotel Virat App",subtitle:"Book rooms, order food & get exclusive deals on your mobile",description:"Experience seamless hotel booking with our mobile app. Get instant confirmations, exclusive discounts, and 24/7 support right at your fingertips.",features:["Quick Room Booking","Food & Room Service","Exclusive Mobile Offers","Instant Notifications","Secure Payments","Customer Support"],downloadLinks:{ios:"https://apps.apple.com/in/app/hotel-virat/id6751843636",android:"https://play.google.com/store/apps/details?id=com.viratcounter"}};return r.jsx("section",{id:"download-app",className:"download-app",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"app-header",children:[r.jsx("h2",{className:"app-title",children:e.title}),r.jsx("p",{className:"app-subtitle",children:e.subtitle})]}),r.jsxs("div",{className:"app-main",children:[r.jsxs("div",{className:"app-content",children:[r.jsx("div",{className:"app-description",children:r.jsx("p",{children:e.description})}),r.jsxs("div",{className:"app-features",children:[r.jsx("h3",{children:"What you can do:"}),r.jsx("div",{className:"features-list",children:e.features.map((t,n)=>r.jsxs("div",{className:"feature-item",children:[r.jsx("span",{className:"feature-check",children:""}),r.jsx("span",{children:t})]},n))})]}),r.jsxs("div",{className:"download-section",children:[r.jsx("h3",{children:"Download Now - Available on Both Platforms"}),r.jsxs("div",{className:"download-buttons",children:[r.jsxs("a",{href:e.downloadLinks.ios,className:"download-btn ios-btn",target:"_blank",rel:"noopener noreferrer",children:[r.jsx("div",{className:"btn-left",children:r.jsx("span",{className:"apple-icon",children:""})}),r.jsxs("div",{className:"btn-right",children:[r.jsx("span",{className:"btn-text",children:"Download on the"}),r.jsx("span",{className:"btn-store",children:"App Store"}),r.jsx("span",{className:"btn-device",children:"For iPhone & iPad"})]})]}),r.jsxs("a",{href:e.downloadLinks.android,className:"download-btn android-btn",target:"_blank",rel:"noopener noreferrer",children:[r.jsx("div",{className:"btn-left",children:r.jsx("span",{className:"play-icon",children:""})}),r.jsxs("div",{className:"btn-right",children:[r.jsx("span",{className:"btn-text",children:"Get it on"}),r.jsx("span",{className:"btn-store",children:"Google Play"}),r.jsx("span",{className:"btn-device",children:"For Android Devices"})]})]})]}),r.jsxs("div",{className:"download-info",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("span",{className:"info-icon",children:""}),r.jsx("span",{children:"4.8 Rating"})]}),r.jsxs("div",{className:"info-item",children:[r.jsx("span",{className:"info-icon",children:""}),r.jsx("span",{children:"50K+ Downloads"})]}),r.jsxs("div",{className:"info-item",children:[r.jsx("span",{className:"info-icon",children:""}),r.jsx("span",{children:"Free Download"})]})]})]})]}),r.jsx("div",{className:"app-preview",children:r.jsx("div",{className:"phone-container",children:r.jsx("div",{className:"phone-with-image",children:r.jsx("img",{src:"/src/assets/copyimage.jpeg",alt:"Hotel Virat App Screenshot",className:"app-screenshot"})})})})]})]})})},gpe=()=>{const[e,t]=w.useState({name:"",email:"",phone:"",subject:"",message:""}),[n,a]=w.useState(!1),[s,i]=w.useState(null),l=u=>{const{name:h,value:p}=u.target;t(m=>({...m,[h]:p}))},d=async u=>{u.preventDefault(),a(!0),i(null);try{await ffe(hfe.CONTACT,{method:"POST",body:JSON.stringify(e)}),i("success"),t({name:"",email:"",phone:"",subject:"",message:""})}catch(h){console.error("Error submitting contact form:",h),i("error")}finally{a(!1)}};return r.jsx("section",{id:"contact-us",className:"contact-us",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h2",{children:"Contact Us"}),r.jsx("p",{className:"section-subtitle",children:"Get in touch with us for any inquiries or bookings"})]}),r.jsxs("div",{className:"contact-content",children:[r.jsxs("div",{className:"contact-info",children:[r.jsxs("div",{className:"info-card",children:[r.jsx("div",{className:"info-icon",children:r.jsx(Ia,{size:24})}),r.jsxs("div",{className:"info-content",children:[r.jsx("h3",{children:"Phone"}),r.jsx("p",{children:"+91 9876543210"}),r.jsx("p",{children:"+91 9876543211"})]})]}),r.jsxs("div",{className:"info-card",children:[r.jsx("div",{className:"info-icon",children:r.jsx(Ps,{size:24})}),r.jsxs("div",{className:"info-content",children:[r.jsx("h3",{children:"Email"}),r.jsx("p",{children:"info@hotelvirat.com"}),r.jsx("p",{children:"booking@hotelvirat.com"})]})]}),r.jsxs("div",{className:"info-card",children:[r.jsx("div",{className:"info-icon",children:r.jsx($l,{size:24})}),r.jsxs("div",{className:"info-content",children:[r.jsx("h3",{children:"Address"}),r.jsx("p",{children:"Hotel Virat Sridarshini"}),r.jsx("p",{children:"Rajaji Nagar, Bangalore"}),r.jsx("p",{children:"Karnataka, India"})]})]})]}),r.jsx("div",{className:"contact-form-container",children:r.jsxs("form",{onSubmit:d,className:"contact-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:l,required:!0,placeholder:"Enter your full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:l,required:!0,placeholder:"Enter your email"})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"phone",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:l,placeholder:"Enter your phone number"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"subject",children:"Subject *"}),r.jsxs("select",{id:"subject",name:"subject",value:e.subject,onChange:l,required:!0,children:[r.jsx("option",{value:"",children:"Select a subject"}),r.jsx("option",{value:"room-booking",children:"Room Booking"}),r.jsx("option",{value:"catering-service",children:"Catering Service"}),r.jsx("option",{value:"general-inquiry",children:"General Inquiry"}),r.jsx("option",{value:"feedback",children:"Feedback"}),r.jsx("option",{value:"complaint",children:"Complaint"}),r.jsx("option",{value:"other",children:"Other"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"message",children:"Message *"}),r.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:l,required:!0,rows:"5",placeholder:"Enter your message here..."})]}),s==="success"&&r.jsxs("div",{className:"form-message success",children:[r.jsx(od,{size:20}),r.jsx("span",{children:"Thank you! Your message has been sent successfully. We'll get back to you soon."})]}),s==="error"&&r.jsx("div",{className:"form-message error",children:r.jsx("span",{children:"Sorry, there was an error sending your message. Please try again or contact us directly."})}),r.jsx("button",{type:"submit",className:"submit-btn",disabled:n,children:n?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"loading-spinner"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(p7,{size:20}),"Send Message"]})})]})})]})]})})},ype=()=>{const e=new Date().getFullYear(),t=n=>{const a=document.getElementById(n);a&&a.scrollIntoView({behavior:"smooth"})};return r.jsxs("footer",{className:"website-footer",children:[r.jsx("div",{className:"footer-content",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"footer-grid",children:[r.jsxs("div",{className:"footer-section",children:[r.jsx("h3",{children:"Hotel Virat"}),r.jsx("p",{children:"Experience luxury and comfort at its finest. We provide exceptional hospitality services including comfortable accommodations, delicious catering, and memorable experiences."}),r.jsxs("div",{className:"social-links",children:[r.jsx("a",{href:"#","aria-label":"Facebook",children:r.jsx(kL,{size:20})}),r.jsx("a",{href:"#","aria-label":"Twitter",children:r.jsx(k7,{size:20})}),r.jsx("a",{href:"#","aria-label":"Instagram",children:r.jsx(LL,{size:20})}),r.jsx("a",{href:"#","aria-label":"LinkedIn",children:r.jsx(HL,{size:20})})]})]}),r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"Quick Links"}),r.jsxs("ul",{children:[r.jsx("li",{children:r.jsx("button",{onClick:()=>t("home"),children:"Home"})}),r.jsx("li",{children:r.jsx("button",{onClick:()=>t("room-booking"),children:"Room Booking"})}),r.jsx("li",{children:r.jsx("button",{onClick:()=>t("catering-service"),children:"Catering Service"})}),r.jsx("li",{children:r.jsx("button",{onClick:()=>t("download-app"),children:"Download App"})}),r.jsx("li",{children:r.jsx("button",{onClick:()=>t("contact-us"),children:"Contact Us"})})]})]}),r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"Our Services"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Room Accommodation"}),r.jsx("li",{children:"Catering Services"}),r.jsx("li",{children:"Event Management"}),r.jsx("li",{children:"Wedding Planning"}),r.jsx("li",{children:"Corporate Events"}),r.jsx("li",{children:"Food Delivery"})]})]}),r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"Contact Information"}),r.jsxs("div",{className:"contact-item",children:[r.jsx(Ia,{size:16}),r.jsxs("div",{children:[r.jsx("p",{children:"+91 9876543210"}),r.jsx("p",{children:"+91 9876543211"})]})]}),r.jsxs("div",{className:"contact-item",children:[r.jsx(Ps,{size:16}),r.jsxs("div",{children:[r.jsx("p",{children:"info@hotelvirat.com"}),r.jsx("p",{children:"booking@hotelvirat.com"})]})]}),r.jsxs("div",{className:"contact-item",children:[r.jsx($l,{size:16}),r.jsxs("div",{children:[r.jsx("p",{children:"Hotel Virat Sridarshini"}),r.jsx("p",{children:"Rajaji Nagar, Bangalore"}),r.jsx("p",{children:"Karnataka, India"})]})]})]})]})})}),r.jsx("div",{className:"footer-bottom",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"footer-bottom-content",children:[r.jsxs("p",{children:[" ",e," Hotel Virat. All rights reserved."]}),r.jsxs("div",{className:"footer-links",children:[r.jsx("a",{href:"#",children:"Privacy Policy"}),r.jsx("a",{href:"#",children:"Terms of Service"}),r.jsx("a",{href:"#",children:"Cookie Policy"})]})]})})})]})},bpe=()=>(w.useEffect(()=>{document.documentElement.style.scrollBehavior="smooth",document.body.style.scrollBehavior="smooth",document.title="Hotel Virat - Luxury Accommodation & Catering Services";const e=document.querySelector('meta[name="description"]');if(e)e.setAttribute("content","Experience luxury and comfort at Hotel Virat. We offer premium accommodation, exceptional catering services, and memorable hospitality experiences in Bangalore.");else{const n=document.createElement("meta");n.name="description",n.content="Experience luxury and comfort at Hotel Virat. We offer premium accommodation, exceptional catering services, and memorable hospitality experiences in Bangalore.",document.getElementsByTagName("head")[0].appendChild(n)}window.testWebsiteScroll=(n="catering-service")=>{console.log(` === Testing scroll to ${n} ===`);const a=document.getElementById(n);if(a){console.log(" Element found, scrolling...");const s=90,i=a.offsetTop-s;console.log(" Scroll details:",{elementOffsetTop:a.offsetTop,headerHeight:s,targetPosition:i,currentScrollPosition:window.pageYOffset}),window.scrollTo({top:i,behavior:"smooth"}),setTimeout(()=>{console.log(` New scroll position: ${window.pageYOffset}`),console.log(` Target was: ${i}`),console.log(` Difference: ${Math.abs(window.pageYOffset-i)}px`)},1e3)}else console.error(` Element ${n} not found`)};const t=n=>{if(n.ctrlKey){const a=["home","room-booking","catering-service","download-app","contact-us"],s=parseInt(n.key);if(s>=1&&s<=5){n.preventDefault();const i=a[s-1];console.log(` Keyboard shortcut: Scrolling to ${i}`),window.testWebsiteScroll(i)}}};return document.addEventListener("keydown",t),setTimeout(()=>{console.log("=== Available sections ==="),document.querySelectorAll("section[id]").forEach(a=>{console.log(`- ${a.id}: offsetTop=${a.offsetTop}, height=${a.offsetHeight}`)}),console.log('=== Test scrolling with: window.testWebsiteScroll("section-id") ===')},2e3),()=>{document.documentElement.style.scrollBehavior="auto",document.body.style.scrollBehavior="auto",document.removeEventListener("keydown",t),delete window.testWebsiteScroll}},[]),r.jsxs("div",{className:"website",children:[r.jsx(upe,{}),r.jsxs("main",{className:"website-main",children:[r.jsx(hpe,{}),r.jsx(ppe,{}),r.jsx(mpe,{}),r.jsx(xpe,{}),r.jsx(gpe,{})]}),r.jsx(ype,{})]})),vpe=({children:e})=>localStorage.getItem("isAuthenticated")==="true"?e:r.jsx(rr,{to:"/admin/login",replace:!0}),jpe=()=>{const e=ua();return w.useEffect(()=>(e.pathname.startsWith("/admin")?document.body.classList.add("admin-layout"):document.body.classList.remove("admin-layout"),()=>{document.body.classList.remove("admin-layout")}),[e.pathname]),null};function wpe(){const[e,t]=w.useState(!1),[n,a]=w.useState(!1);return w.useEffect(()=>{const s=localStorage.getItem("isAuthenticated")==="true";a(s);const i=()=>{a(localStorage.getItem("isAuthenticated")==="true")};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]),r.jsxs(WF,{children:[r.jsx(jpe,{}),r.jsxs($j,{children:[r.jsx(ft,{path:"/",element:r.jsx(bpe,{})}),r.jsx(ft,{path:"/admin/login",element:r.jsx(qae,{})}),r.jsx(ft,{path:"/admin/*",element:r.jsx(vpe,{children:r.jsxs("div",{className:"app",children:[r.jsx(U7,{collapsed:e,setCollapsed:t}),r.jsx("main",{className:`content ${e?"content-expanded":""}`,children:r.jsxs($j,{children:[r.jsx(ft,{path:"/",element:r.jsx(uae,{})}),r.jsx(ft,{path:"/orders",element:r.jsx(mae,{})}),r.jsx(ft,{path:"/categorized-orders",element:r.jsx(Sfe,{})}),r.jsx(ft,{path:"/products",element:r.jsx(bae,{})}),r.jsx(ft,{path:"/categories",element:r.jsx(wae,{})}),r.jsx(ft,{path:"/branches",element:r.jsx(Tae,{})}),r.jsx(ft,{path:"/users",element:r.jsx(Eae,{})}),r.jsx(ft,{path:"/coupons",element:r.jsx(Iae,{})}),r.jsx(ft,{path:"/payments",element:r.jsx(Bae,{})}),r.jsx(ft,{path:"/website-carousel",element:r.jsx(Lfe,{})}),r.jsx(ft,{path:"/website-catering",element:r.jsx($fe,{})}),r.jsx(ft,{path:"/website-app",element:r.jsx(zfe,{})}),r.jsx(ft,{path:"/website-messages",element:r.jsx(Ufe,{})}),r.jsx(ft,{path:"/help-support",element:r.jsx(Fae,{})}),r.jsx(ft,{path:"/about-us",element:r.jsx(Lae,{})}),r.jsx(ft,{path:"/terms-policies",element:r.jsx(Uae,{})}),r.jsx(ft,{path:"/staff-users",element:r.jsx(Gae,{})}),r.jsx(ft,{path:"/counter-users",element:r.jsx(Yae,{})}),r.jsx(ft,{path:"/staff-orders",element:r.jsx(Xae,{})}),r.jsx(ft,{path:"/counter-orders",element:r.jsx(Qae,{})}),r.jsx(ft,{path:"/tables",element:r.jsx(Jae,{})}),r.jsx(ft,{path:"/staff-invoices",element:r.jsx(Zae,{})}),r.jsx(ft,{path:"/counter-bills",element:r.jsx(ese,{})}),r.jsx(ft,{path:"/staff-payment",element:r.jsx(rse,{})}),r.jsx(ft,{path:"/counter-payment",element:r.jsx(ase,{})}),r.jsx(ft,{path:"/product-submissions",element:r.jsx(sse,{})}),r.jsx(ft,{path:"/qr-uploads",element:r.jsx(ise,{})}),r.jsx(ft,{path:"/purchase-users",element:r.jsx(cse,{})}),r.jsx(ft,{path:"/qr-generator",element:r.jsx(fse,{})}),r.jsx(ft,{path:"/subscription",element:r.jsx(xse,{})}),r.jsx(ft,{path:"/subscription-management",element:r.jsx(gse,{})}),r.jsx(ft,{path:"/meal-of-the-day",element:r.jsx(yse,{})}),r.jsx(ft,{path:"/rooms",element:r.jsx(ufe,{})}),r.jsx(ft,{path:"/room-bookings",element:r.jsx(pfe,{})}),r.jsx(ft,{path:"/room-payments",element:r.jsx(gfe,{})}),r.jsx(ft,{path:"/category-access",element:r.jsx(vfe,{})}),r.jsx(ft,{path:"/receptionist-access",element:r.jsx(Cfe,{})}),r.jsx(ft,{path:"/reservations",element:r.jsx(Ffe,{})})]})})]})})}),r.jsx(ft,{path:"/login",element:r.jsx(rr,{to:"/admin/login",replace:!0})}),r.jsx(ft,{path:"/orders",element:r.jsx(rr,{to:"/admin/orders",replace:!0})}),r.jsx(ft,{path:"/categorized-orders",element:r.jsx(rr,{to:"/admin/categorized-orders",replace:!0})}),r.jsx(ft,{path:"/products",element:r.jsx(rr,{to:"/admin/products",replace:!0})}),r.jsx(ft,{path:"/categories",element:r.jsx(rr,{to:"/admin/categories",replace:!0})}),r.jsx(ft,{path:"/branches",element:r.jsx(rr,{to:"/admin/branches",replace:!0})}),r.jsx(ft,{path:"/users",element:r.jsx(rr,{to:"/admin/users",replace:!0})}),r.jsx(ft,{path:"/coupons",element:r.jsx(rr,{to:"/admin/coupons",replace:!0})}),r.jsx(ft,{path:"/payments",element:r.jsx(rr,{to:"/admin/payments",replace:!0})}),r.jsx(ft,{path:"/website-carousel",element:r.jsx(rr,{to:"/admin/website-carousel",replace:!0})}),r.jsx(ft,{path:"/website-catering",element:r.jsx(rr,{to:"/admin/website-catering",replace:!0})}),r.jsx(ft,{path:"/website-app",element:r.jsx(rr,{to:"/admin/website-app",replace:!0})}),r.jsx(ft,{path:"/website-messages",element:r.jsx(rr,{to:"/admin/website-messages",replace:!0})}),r.jsx(ft,{path:"/help-support",element:r.jsx(rr,{to:"/admin/help-support",replace:!0})}),r.jsx(ft,{path:"/about-us",element:r.jsx(rr,{to:"/admin/about-us",replace:!0})}),r.jsx(ft,{path:"/terms-policies",element:r.jsx(rr,{to:"/admin/terms-policies",replace:!0})}),r.jsx(ft,{path:"/staff-users",element:r.jsx(rr,{to:"/admin/staff-users",replace:!0})}),r.jsx(ft,{path:"/counter-users",element:r.jsx(rr,{to:"/admin/counter-users",replace:!0})}),r.jsx(ft,{path:"/staff-orders",element:r.jsx(rr,{to:"/admin/staff-orders",replace:!0})}),r.jsx(ft,{path:"/counter-orders",element:r.jsx(rr,{to:"/admin/counter-orders",replace:!0})}),r.jsx(ft,{path:"/tables",element:r.jsx(rr,{to:"/admin/tables",replace:!0})}),r.jsx(ft,{path:"/staff-invoices",element:r.jsx(rr,{to:"/admin/staff-invoices",replace:!0})}),r.jsx(ft,{path:"/counter-bills",element:r.jsx(rr,{to:"/admin/counter-bills",replace:!0})}),r.jsx(ft,{path:"/staff-payment",element:r.jsx(rr,{to:"/admin/staff-payment",replace:!0})}),r.jsx(ft,{path:"/counter-payment",element:r.jsx(rr,{to:"/admin/counter-payment",replace:!0})}),r.jsx(ft,{path:"/product-submissions",element:r.jsx(rr,{to:"/admin/product-submissions",replace:!0})}),r.jsx(ft,{path:"/qr-uploads",element:r.jsx(rr,{to:"/admin/qr-uploads",replace:!0})}),r.jsx(ft,{path:"/purchase-users",element:r.jsx(rr,{to:"/admin/purchase-users",replace:!0})}),r.jsx(ft,{path:"/qr-generator",element:r.jsx(rr,{to:"/admin/qr-generator",replace:!0})}),r.jsx(ft,{path:"/subscription",element:r.jsx(rr,{to:"/admin/subscription",replace:!0})}),r.jsx(ft,{path:"/subscription-management",element:r.jsx(rr,{to:"/admin/subscription-management",replace:!0})}),r.jsx(ft,{path:"/meal-of-the-day",element:r.jsx(rr,{to:"/admin/meal-of-the-day",replace:!0})}),r.jsx(ft,{path:"/rooms",element:r.jsx(rr,{to:"/admin/rooms",replace:!0})}),r.jsx(ft,{path:"/room-bookings",element:r.jsx(rr,{to:"/admin/room-bookings",replace:!0})}),r.jsx(ft,{path:"/room-payments",element:r.jsx(rr,{to:"/admin/room-payments",replace:!0})}),r.jsx(ft,{path:"/category-access",element:r.jsx(rr,{to:"/admin/category-access",replace:!0})}),r.jsx(ft,{path:"/receptionist-access",element:r.jsx(rr,{to:"/admin/receptionist-access",replace:!0})}),r.jsx(ft,{path:"/reservations",element:r.jsx(rr,{to:"/admin/reservations",replace:!0})}),r.jsx(ft,{path:"/menu",element:r.jsx(J6,{})}),r.jsx(ft,{path:"/public-menu",element:r.jsx(J6,{})}),r.jsx(ft,{path:"/privacy-policy",element:r.jsx(pse,{})}),r.jsx(ft,{path:"/terms-conditions",element:r.jsx(mse,{})}),r.jsx(ft,{path:"/category-orders",element:r.jsx(jfe,{})}),r.jsx(ft,{path:"/receptionist-dashboard",element:r.jsx(Ife,{})}),r.jsx(ft,{path:"/counter/*",element:r.jsx(dpe,{})})]})]})}const Spe=w.createContext(),Npe=[{id:1,name:"Central Branch",address:"123 Main St, City Center",phone:"123-456-7890",isActive:!0},{id:2,name:"North Branch",address:"456 North Ave, Northside",phone:"234-567-8901",isActive:!0},{id:3,name:"South Branch",address:"789 South Blvd, Southside",phone:"345-678-9012",isActive:!0},{id:4,name:"East Branch",address:"101 East Rd, Eastville",phone:"456-789-0123",isActive:!0},{id:5,name:"West Branch",address:"202 West St, Westtown",phone:"567-890-1234",isActive:!0}],Tpe=[{id:1,name:"Appetizers",branchId:1,description:"Starters and small plates",isActive:!0},{id:2,name:"Main Course",branchId:1,description:"Primary dishes",isActive:!0},{id:3,name:"Desserts",branchId:1,description:"Sweet treats",isActive:!0},{id:4,name:"Beverages",branchId:1,description:"Drinks and refreshments",isActive:!0},{id:5,name:"Breakfast",branchId:2,description:"Morning meals",isActive:!0},{id:6,name:"Lunch",branchId:2,description:"Midday meals",isActive:!0},{id:7,name:"Dinner",branchId:2,description:"Evening meals",isActive:!0},{id:8,name:"Snacks",branchId:3,description:"Light bites",isActive:!0},{id:9,name:"Soups",branchId:3,description:"Warm and comforting",isActive:!0},{id:10,name:"Salads",branchId:3,description:"Fresh and healthy",isActive:!0},{id:11,name:"Specials",branchId:4,description:"Chef's recommendations",isActive:!0},{id:12,name:"Combos",branchId:4,description:"Value meals",isActive:!0},{id:13,name:"Vegetarian",branchId:5,description:"Plant-based options",isActive:!0},{id:14,name:"Non-Vegetarian",branchId:5,description:"Meat-based dishes",isActive:!0}],Cpe=[{id:1,name:"Spring Rolls",categoryId:1,branchId:1,price:120,description:"Crispy vegetable spring rolls served with sweet chili sauce",image:"https://images.unsplash.com/photo-1606505662538-0a89eb33e0d9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8c3ByaW5nJTIwcm9sbHN8ZW58MHx8MHx8fDA%3D",isAvailable:!0},{id:2,name:"Paneer Tikka",categoryId:1,branchId:1,price:180,description:"Marinated cottage cheese grilled to perfection",image:"https://images.unsplash.com/photo-1567188040759-fb8a883dc6d8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGFuZWVyJTIwdGlra2F8ZW58MHx8MHx8fDA%3D",isAvailable:!0},{id:3,name:"Butter Paneer",categoryId:2,branchId:1,price:250,description:"Tender PAneer in a rich buttery tomato sauce",image:"https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YnV0dGVyJTIwY2hpY2tlbnxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:4,name:"Vegetable Biryani",categoryId:2,branchId:1,price:220,description:"Fragrant rice cooked with mixed vegetables and spices",image:"https://images.unsplash.com/photo-1589302168068-964664d93dc0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YmlyeWFuaXxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:5,name:"Gulab Jamun",categoryId:3,branchId:1,price:100,description:"Sweet milk solids balls soaked in sugar syrup",image:"https://images.unsplash.com/photo-1605197161470-5d2a9af0ac7e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z3VsYWIlMjBqYW11bnxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:6,name:"Mango Lassi",categoryId:4,branchId:1,price:80,description:"Refreshing yogurt drink with mango pulp",image:"https://images.unsplash.com/photo-1626078436898-7c7f4f6dccf4?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bWFuZ28lMjBsYXNzaXxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:7,name:"Masala Dosa",categoryId:5,branchId:2,price:150,description:"Crispy rice crepe filled with spiced potatoes",image:"https://images.unsplash.com/photo-1589301760014-d929f3979dbc?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8ZG9zYXxlbnwwfHwwfHx8MA%3D%3D",isAvailable:!0},{id:8,name:"Sandwich",categoryId:6,branchId:2,price:160,description:"Grilled Potato with lettuce and mayo in toasted bread",image:"https://images.unsplash.com/photo-1521390188846-e2a3a97453a0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y2hpY2tlbiUyMHNhbmR3aWNofGVufDB8fDB8fHww",isAvailable:!0},{id:9,name:"Tandoori Paneer",categoryId:7,branchId:2,price:280,description:"Paneer marinated in yogurt and spices, cooked in a tandoor",image:"https://images.unsplash.com/photo-1610057099431-d73a1c9d2f2f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dGFuZG9vcmklMjBjaGlja2VufGVufDB8fDB8fHww",isAvailable:!0},{id:10,name:"Samosa",categoryId:8,branchId:3,price:40,description:"Crispy pastry filled with spiced potatoes and peas",image:"https://images.unsplash.com/photo-1601050690597-df0568f70950?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c2Ftb3NhfGVufDB8fDB8fHww",isAvailable:!0}],Ape=({children:e})=>{const[t,n]=w.useState(Npe),[a,s]=w.useState(Tpe),[i,l]=w.useState(Cpe),[d,u]=w.useState(1),h=C=>{const k={...C,id:t.length>0?Math.max(...t.map(I=>I.id))+1:1,isActive:!0};return n([...t,k]),k},p=C=>{n(t.map(k=>k.id===C.id?C:k))},m=C=>{n(t.filter(k=>k.id!==C)),s(a.filter(k=>k.branchId!==C)),l(i.filter(k=>k.branchId!==C))},g=C=>{const k={...C,id:a.length>0?Math.max(...a.map(I=>I.id))+1:1,isActive:!0};return s([...a,k]),k},b=C=>{s(a.map(k=>k.id===C.id?C:k))},j=C=>{s(a.filter(k=>k.id!==C)),l(i.filter(k=>k.categoryId!==C))},v=C=>{const k={...C,id:i.length>0?Math.max(...i.map(I=>I.id))+1:1,isAvailable:!0};return l([...i,k]),k},y=C=>{l(i.map(k=>k.id===C.id?C:k))},A=C=>{l(i.filter(k=>k.id!==C))},E=C=>a.filter(k=>k.branchId===C),O=C=>i.filter(k=>k.categoryId===C),S=C=>i.filter(k=>k.branchId===C);return r.jsx(Spe.Provider,{value:{branches:t,categories:a,products:i,selectedBranch:d,setSelectedBranch:u,addBranch:h,updateBranch:p,deleteBranch:m,addCategory:g,updateCategory:b,deleteCategory:j,addProduct:v,updateProduct:y,deleteProduct:A,getCategoriesByBranch:E,getProductsByCategory:O,getProductsByBranch:S},children:e})},Epe=console.error,Ope=console.warn;console.error=(...e)=>{typeof e[0]=="string"&&(e[0].includes("Received `true` for a non-boolean attribute `jsx`")||e[0].includes("jsx")&&e[0].includes("non-boolean attribute"))||Epe.apply(console,e)};console.warn=(...e)=>{typeof e[0]=="string"&&(e[0].includes("Received `true` for a non-boolean attribute `jsx`")||e[0].includes("jsx")&&e[0].includes("non-boolean attribute"))||Ope.apply(console,e)};kB.createRoot(document.getElementById("root")).render(r.jsx(_e.StrictMode,{children:r.jsx(Ape,{children:r.jsx(wpe,{})})}));
